{"version":3,"file":"./build/block-editor/index.min.js","mappings":"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IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,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,EACAyC,EACAykB,EACAqgC,EACAC,EACAG,EACAlZ,EACAC,EACAZ,GAEF,CAYO,SAASoa,GAAkB3+D,EAAM4+D,GACvC,MACCC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAhE,EACAiE,EACAlE,EACAtH,EACAf,EACAlpD,EACAqyD,EACAH,EACAwD,EACAC,EACAC,EACAC,EACAt1D,EACAu1D,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAvL,EACAwL,EACAC,EACAC,EACAC,EACAC,EACArE,EACAN,EACAQ,EACAC,EACAE,EACAZ,EACA6E,EACAC,EACAC,EACAC,EACAC,EACAC,EACAlE,EACAmE,EACAC,EACAC,GACAC,GACAC,GACAC,GACA/K,IACG3G,GACH,6BACA,4BACA,iCACA,kCACA,gCACA,8BACA,8BACA,+BACA,6BACA,4BACA,uBACA,wBACA,wBACA,uBACA,yBACA,4BACA,yBACA,2BACA,2BACA,kBACA,iBACA,mBACA,8BACA,4BACA,8BACA,+BACA,6BACA,gBACA,yBACA,uBACA,SACA,eACA,gBACA,eACA,eACA,eACA,uBACA,sBACA,sBACA,wBACA,uBACA,uBACA,uBACA,sBACA,wBACA,yBACA,wBACA,0BACA,yBACA,uBACA,mBACA,aACA,aACA,gBACA,eACA,UAmJD,OAAOoL,IAhJahB,EAAAA,EAAAA,UAAS,KACrB,CACNwB,WAAY,CACXwD,kBACAC,kBAED7lD,MAAO,CACNkjD,QAAS,CACR/jC,OAAQ8jC,EACRtyB,MAAOwyB,EACPl4D,QAASm4D,GAEVlgC,UAAW,CACV/D,OAAQuoC,EACR/2B,MAAOg3B,EACP18D,QAAS28D,GAEVO,QAAS,CACRhpC,OAAQooC,EACR52B,MAAO62B,EACPv8D,QAASw8D,GAEV/D,mBACAJ,iBACAZ,iBACAvjC,OAAQmoC,EACR7E,eAAgBoF,EAChBlF,gBACAP,WAAY0F,EACZvF,KAAMwF,GACNzF,QAAS2F,GACT5F,OAAQ6F,GACRtqD,KAAMoqD,IAEP1M,WAAY,CACX6G,aAAc,CACbhjC,OAAQ2mC,EACR76D,QAAS86D,EACTp1B,MAAOq1B,GAERnkC,UAAW,CACV1C,OAAQ+mC,EACRj7D,QAASi3D,EACTvxB,MAAOw1B,GAERlE,iBACAC,iBAAkB+D,EAClBtL,YACAf,aACAlpD,aACAqyD,YACAH,cACAwD,iBACAE,gBACAC,gBACAF,eAEDxlD,QAAS,CACRunD,aAAc,CACbjpC,OAAQynC,EACR37D,QAAS47D,EACTl2B,MAAOm2B,GAERH,oBACAE,oBAAqBH,EACrBz1D,UACAu1D,SACAC,WACAM,SAED71D,OAAQ,CACP8O,MAAOknD,EACPmB,OAAQlB,EACRp/D,MAAOq/D,EACPh+D,MAAOi+D,GAERvE,WAAY,CACXkE,cACAC,aAEDvL,SACAiK,eACAxI,aAEC,CACFyI,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAhE,EACAiE,EACAlE,EACAtH,EACAf,EACAlpD,EACAqyD,EACAH,EACAwD,EACAE,EACAC,EACAF,EACAp1D,EACAu1D,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAvL,EACAiK,EACAuB,EACAC,EACAC,EACAC,EACAC,EACArE,EACAN,EACAQ,EACAC,EACAE,EACAZ,EACA6E,EACAC,EACAC,EACAC,EACAC,EACAC,EACAlE,EACAmE,EACAC,EACAC,GACAC,GACAC,GACAC,GACA/K,KAG+Cp2D,EACjD,CA+FA,MAAMuhE,IAAiBC,EAAAA,EAAAA,OA1BvB,UAAqB,MACpB3hE,EACA4hE,cAAeC,EAAI,mBACnBC,KACGlqD,IAEH,MAAMmqD,EAAeF,EAAMjqD,GACrBoqD,EAAoBv6C,GACzBq6C,GAAsBxiD,IACrB,MAAM2iD,EAAU,IAAK3iD,GAErB,OADA2iD,EAASjiE,GAAUynB,EACZw6C,CAAO,IAYhB,OARAxD,EAAAA,EAAAA,YAAW,KAGVuD,EAAiBD,GACV,KACNC,OAAiBx7D,EAAW,KAGvB,IACR,KC1jBA07D,EAAAA,EAAAA,WACC,2BACA,wCAdD,SAAmC19B,GAClC,MAAM,WAAE29B,E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","sources":["webpack://wp/./node_modules/autosize/dist/autosize.js","webpack://wp/./node_modules/computed-style/dist/computedStyle.commonjs.js","webpack://wp/./node_modules/diff/src/diff/base.js","webpack://wp/./node_modules/diff/src/diff/character.js","webpack://wp/./node_modules/fast-deep-equal/es6/index.js","webpack://wp/./node_modules/fast-deep-equal/index.js","webpack://wp/./node_modules/line-height/lib/line-height.js","webpack://wp/./node_modules/normalize-wheel/index.js","webpack://wp/./node_modules/normalize-wheel/src/ExecutionEnvironment.js","webpack://wp/./node_modules/normalize-wheel/src/UserAgent_DEPRECATED.js","webpack://wp/./node_modules/normalize-wheel/src/isEventSupported.js","webpack://wp/./node_modules/normalize-wheel/src/normalizeWheel.js","webpack://wp/./node_modules/picocolors/picocolors.browser.js","webpack://wp/./node_modules/postcss-prefix-selector/index.js","webpack://wp/./node_modules/postcss/lib/at-rule.js","webpack://wp/./node_modules/postcss/lib/comment.js","webpack://wp/./node_modules/postcss/lib/container.js","webpack://wp/./node_modules/postcss/lib/css-syntax-error.js","webpack://wp/./node_modules/postcss/lib/declaration.js","webpack://wp/./node_modules/postcss/lib/document.js","webpack://wp/./node_modules/postcss/lib/input.js","webpack://wp/./node_modules/postcss/lib/lazy-result.js","webpack://wp/./node_modules/postcss/lib/list.js","webpack://wp/./node_modules/postcss/lib/map-generator.js","webpack://wp/./node_modules/postcss/lib/no-work-result.js","webpack://wp/./node_modules/postcss/lib/node.js","webpack://wp/./node_modules/postcss/lib/parse.js","webpack://wp/./node_modules/postcss/lib/parser.js","webpack://wp/./node_modules/postcss/lib/previous-map.js","webpack://wp/./node_modules/postcss/lib/processor.js","webpack://wp/./node_modules/postcss/lib/result.js","webpack://wp/./node_modules/postcss/lib/root.js","webpack://wp/./node_modules/postcss/lib/rule.js","webpack://wp/./node_modules/postcss/lib/stringifier.js","webpack://wp/./node_modules/postcss/lib/stringify.js","webpack://wp/./node_modules/postcss/lib/symbols.js","webpack://wp/./node_modules/postcss/lib/tokenize.js","webpack://wp/./node_modules/postcss/lib/warn-once.js","webpack://wp/./node_modules/postcss/lib/warning.js","webpack://wp/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://wp/./node_modules/prop-types/index.js","webpack://wp/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://wp/./node_modules/react-autosize-textarea/lib/TextareaAutosize.js","webpack://wp/./node_modules/react-autosize-textarea/lib/index.js","webpack://wp/./node_modules/remove-accents/index.js","webpack://wp/./packages/block-editor/node_modules/postcss-urlrebase/index.js","webpack://wp/./packages/block-editor/node_modules/postcss-value-parser/lib/index.js","webpack://wp/./packages/block-editor/node_modules/postcss-value-parser/lib/parse.js","webpack://wp/./packages/block-editor/node_modules/postcss-value-parser/lib/stringify.js","webpack://wp/./packages/block-editor/node_modules/postcss-value-parser/lib/unit.js","webpack://wp/./packages/block-editor/node_modules/postcss-value-parser/lib/walk.js","webpack://wp/external window \"React\"","webpack://wp/./node_modules/nanoid/non-secure/index.cjs","webpack://wp/webpack/bootstrap","webpack://wp/webpack/runtime/compat get default export","webpack://wp/webpack/runtime/define property getters","webpack://wp/webpack/runtime/hasOwnProperty shorthand","webpack://wp/webpack/runtime/make namespace object","webpack://wp/external window [\"wp\",\"blocks\"]","webpack://wp/external window [\"wp\",\"element\"]","webpack://wp/external window [\"wp\",\"data\"]","webpack://wp/external window [\"wp\",\"compose\"]","webpack://wp/external window [\"wp\",\"hooks\"]","../../packages/block-editor/src/components/block-edit/context.js","webpack://wp/external window [\"wp\",\"deprecated\"]","webpack://wp/external window [\"wp\",\"i18n\"]","../../packages/block-editor/src/store/defaults.js","../../packages/block-editor/src/store/array.js","../../packages/block-editor/src/store/private-keys.js","webpack://wp/external window [\"wp\",\"privateApis\"]","../../packages/block-editor/src/lock-unlock.ts","../../packages/block-editor/src/store/reducer.js","webpack://wp/external window [\"wp\",\"primitives\"]","webpack://wp/external window \"ReactJSXRuntime\"","../../packages/icons/src/library/symbol.tsx","webpack://wp/external window [\"wp\",\"richText\"]","webpack://wp/external window [\"wp\",\"preferences\"]","webpack://wp/external window [\"wp\",\"blockSerializationDefaultParser\"]","../../packages/block-editor/src/store/constants.js","../../packages/block-editor/src/components/inserter/block-patterns-tab/utils.js","../../packages/block-editor/src/utils/object.js","../../packages/block-editor/src/store/get-block-settings.js","../../packages/block-editor/src/store/private-selectors.js","../../packages/block-editor/src/store/utils.js","../../packages/block-editor/src/utils/sorting.js","../../packages/block-editor/src/store/selectors.js","webpack://wp/external window [\"wp\",\"a11y\"]","../../packages/block-editor/src/store/private-actions.js","webpack://wp/external window [\"wp\",\"notices\"]","../../packages/block-editor/src/utils/selection.js","../../packages/block-editor/src/store/actions.js","../../packages/block-editor/src/store/index.js","../../packages/block-editor/src/components/use-settings/index.js","webpack://wp/external window [\"wp\",\"styleEngine\"]","../../packages/block-editor/src/components/font-sizes/fluid-utils.js","../../packages/block-editor/src/utils/format-font-weight.js","../../packages/block-editor/src/utils/get-font-styles-and-weights.js","../../packages/block-editor/src/utils/format-font-style.js","../../packages/block-editor/src/components/global-styles/typography-utils.js","../../packages/block-editor/src/components/global-styles/utils.js","../../packages/block-editor/src/components/global-styles/context.js","../../packages/block-editor/src/components/global-styles/hooks.js","webpack://wp/./node_modules/clsx/dist/clsx.mjs","../../packages/block-editor/src/hooks/utils.js","../../packages/block-editor/src/hooks/compat.js","webpack://wp/external window [\"wp\",\"components\"]","../../packages/block-editor/src/components/block-controls/groups.js","../../packages/block-editor/src/components/block-controls/fill.js","../../packages/block-editor/src/components/block-controls/hook.js","webpack://wp/external window [\"wp\",\"warning\"]","../../packages/block-editor/src/components/block-controls/slot.js","../../packages/block-editor/src/components/block-controls/index.js","../../packages/icons/src/library/justify-left.tsx","../../packages/icons/src/library/justify-center.tsx","../../packages/icons/src/library/justify-right.tsx","../../packages/icons/src/library/justify-space-between.tsx","../../packages/icons/src/library/justify-stretch.tsx","../../packages/icons/src/library/arrow-right.tsx","../../packages/icons/src/library/arrow-down.tsx","../../packages/block-editor/src/layouts/definitions.js","../../packages/block-editor/src/layouts/utils.js","../../packages/icons/src/library/sides-all.tsx","../../packages/icons/src/library/sides-horizontal.tsx","../../packages/icons/src/library/sides-vertical.tsx","../../packages/icons/src/library/sides-top.tsx","../../packages/icons/src/library/sides-right.tsx","../../packages/icons/src/library/sides-bottom.tsx","../../packages/icons/src/library/sides-left.tsx","../../packages/block-editor/src/components/spacing-sizes-control/utils.js","../../packages/block-editor/src/hooks/gap.js","../../packages/icons/src/library/justify-top.tsx","../../packages/icons/src/library/justify-center-vertical.tsx","../../packages/icons/src/library/justify-bottom.tsx","../../packages/icons/src/library/justify-stretch-vertical.tsx","../../packages/icons/src/library/justify-space-between-vertical.tsx","../../packages/block-editor/src/components/block-vertical-alignment-control/ui.js","../../packages/block-editor/src/components/block-vertical-alignment-control/index.js","../../packages/block-editor/src/components/justify-content-control/ui.js","../../packages/block-editor/src/components/justify-content-control/index.js","../../packages/block-editor/src/layouts/flex.js","../../packages/block-editor/src/layouts/flow.js","../../packages/icons/src/icon/index.ts","../../packages/icons/src/library/align-none.tsx","../../packages/icons/src/library/stretch-wide.tsx","../../packages/block-editor/src/layouts/constrained.js","../../packages/block-editor/src/layouts/grid.js","../../packages/block-editor/src/layouts/index.js","../../packages/block-editor/src/components/block-list/layout.js","../../packages/block-editor/src/components/block-alignment-control/use-available-alignments.js","../../packages/icons/src/library/position-left.tsx","../../packages/icons/src/library/position-center.tsx","../../packages/icons/src/library/position-right.tsx","../../packages/icons/src/library/stretch-full-width.tsx","../../packages/block-editor/src/components/block-alignment-control/constants.js","../../packages/block-editor/src/components/block-alignment-control/ui.js","../../packages/block-editor/src/components/block-alignment-control/index.js","../../packages/block-editor/src/components/block-editing-mode/index.js","../../packages/block-editor/src/hooks/align.js","../../packages/block-editor/src/components/inspector-controls/groups.js","../../packages/block-editor/src/components/inspector-controls/fill.js","../../packages/block-editor/src/components/inspector-controls/block-support-tools-panel.js","../../packages/block-editor/src/components/inspector-controls/block-support-slot-container.js","../../packages/block-editor/src/components/inspector-controls/slot.js","../../packages/block-editor/src/components/inspector-controls/index.js","webpack://wp/external window [\"wp\",\"url\"]","webpack://wp/external window [\"wp\",\"dom\"]","webpack://wp/external window [\"wp\",\"blob\"]","webpack://wp/external window [\"wp\",\"keycodes\"]","../../packages/icons/src/library/media.tsx","../../packages/icons/src/library/upload.tsx","../../packages/icons/src/library/post-featured-image.tsx","../../packages/block-editor/src/components/media-upload/index.js","../../packages/block-editor/src/components/media-upload/check.js","webpack://wp/external window [\"wp\",\"isShallowEqual\"]","../../packages/icons/src/library/keyboard-return.tsx","../../packages/icons/src/library/chevron-left-small.tsx","../../packages/icons/src/library/chevron-right-small.tsx","../../packages/block-editor/src/components/link-control/settings-drawer.js","../../packages/block-editor/src/components/url-input/index.js","../../packages/icons/src/library/plus.tsx","../../packages/block-editor/src/components/link-control/search-create-button.js","../../packages/icons/src/library/post-list.tsx","../../packages/icons/src/library/page.tsx","../../packages/icons/src/library/tag.tsx","../../packages/icons/src/library/category.tsx","../../packages/icons/src/library/file.tsx","../../packages/icons/src/library/globe.tsx","../../packages/icons/src/library/home.tsx","../../packages/icons/src/library/verse.tsx","../../packages/block-editor/src/components/link-control/search-item.js","../../packages/block-editor/src/components/link-control/constants.js","../../packages/block-editor/src/components/link-control/search-results.js","../../packages/block-editor/src/components/link-control/is-url-like.js","../../packages/block-editor/src/components/link-control/use-search-handler.js","../../packages/block-editor/src/components/link-control/search-input.js","../../packages/icons/src/library/info.tsx","../../packages/icons/src/library/edit.tsx","../../packages/icons/src/library/pencil.tsx","../../packages/icons/src/library/link-off.tsx","../../packages/icons/src/library/copy-small.tsx","../../packages/block-editor/src/components/link-control/viewer-slot.js","../../packages/block-editor/src/components/link-control/use-rich-url-data.js","../../packages/block-editor/src/components/link-control/link-preview.js","../../packages/block-editor/src/components/link-control/settings.js","../../packages/block-editor/src/components/link-control/index.js","../../packages/block-editor/src/components/link-control/use-internal-value.js","../../packages/block-editor/src/components/link-control/use-create-page.js","../../packages/block-editor/src/components/media-replace-flow/index.js","../../packages/block-editor/src/components/background-image-control/index.js","../../packages/block-editor/src/components/global-styles/background-panel.js","../../packages/block-editor/src/hooks/background.js","../../packages/block-editor/src/hooks/lock.js","../../packages/block-editor/src/hooks/anchor.js","../../packages/block-editor/src/hooks/aria-label.js","../../packages/block-editor/src/hooks/custom-class-name.js","../../packages/block-editor/src/hooks/generated-class-name.js","webpack://wp/./node_modules/colord/index.mjs","webpack://wp/./node_modules/colord/plugins/names.mjs","webpack://wp/./node_modules/colord/plugins/a11y.mjs","../../packages/block-editor/src/components/colors/utils.js","../../packages/block-editor/src/components/colors-gradients/use-multiple-origin-colors-and-gradients.js","../../packages/block-editor/src/components/border-radius-control/utils.js","../../packages/block-editor/src/components/border-radius-control/all-input-control.js","../../packages/block-editor/src/components/border-radius-control/input-controls.js","../../packages/icons/src/library/link.tsx","../../packages/block-editor/src/components/border-radius-control/linked-button.js","../../packages/block-editor/src/components/border-radius-control/index.js","../../packages/icons/src/library/check.tsx","../../packages/icons/src/library/shadow.tsx","../../packages/icons/src/library/reset.tsx","../../packages/block-editor/src/components/global-styles/shadow-panel-components.js","../../packages/block-editor/src/components/global-styles/border-panel.js","../../packages/block-editor/src/hooks/border.js","../../packages/block-editor/src/components/gradients/use-gradient.js","../../packages/block-editor/src/components/colors-gradients/control.js","../../packages/block-editor/src/components/global-styles/color-panel.js","../../packages/block-editor/src/components/contrast-checker/index.js","../../packages/block-editor/src/components/provider/block-refs-provider.js","../../packages/block-editor/src/components/block-list/use-block-props/use-block-refs.js","../../packages/block-editor/src/hooks/contrast-checker.js","../../packages/block-editor/src/hooks/color.js","../../packages/block-editor/src/components/font-family/index.js","../../packages/block-editor/src/components/font-appearance-control/index.js","../../packages/block-editor/src/components/line-height-control/utils.js","../../packages/block-editor/src/components/line-height-control/index.js","../../packages/block-editor/src/components/letter-spacing-control/index.js","../../packages/icons/src/library/align-left.tsx","../../packages/icons/src/library/align-center.tsx","../../packages/icons/src/library/align-right.tsx","../../packages/icons/src/library/align-justify.tsx","../../packages/block-editor/src/components/text-alignment-control/index.js","../../packages/icons/src/library/format-uppercase.tsx","../../packages/icons/src/library/format-lowercase.tsx","../../packages/icons/src/library/format-capitalize.tsx","../../packages/block-editor/src/components/text-transform-control/index.js","../../packages/icons/src/library/format-underline.tsx","../../packages/icons/src/library/format-strikethrough.tsx","../../packages/block-editor/src/components/text-decoration-control/index.js","../../packages/icons/src/library/text-horizontal.tsx","../../packages/icons/src/library/text-vertical.tsx","../../packages/block-editor/src/components/writing-mode-control/index.js","../../packages/block-editor/src/components/global-styles/typography-panel.js","../../packages/block-editor/src/hooks/line-height.js","webpack://wp/external window [\"wp\",\"tokenList\"]","../../packages/block-editor/src/hooks/font-family.js","../../packages/block-editor/src/components/font-sizes/utils.js","../../packages/block-editor/src/hooks/font-size.js","../../packages/block-editor/src/components/alignment-control/ui.js","../../packages/block-editor/src/components/alignment-control/index.js","../../packages/block-editor/src/hooks/text-align.js","../../packages/block-editor/src/hooks/typography.js","../../packages/block-editor/src/components/spacing-sizes-control/hooks/use-spacing-sizes.js","../../packages/icons/src/library/settings.tsx","../../packages/block-editor/src/components/spacing-sizes-control/input-controls/spacing-input-control.js","../../packages/block-editor/src/components/spacing-sizes-control/input-controls/axial.js","../../packages/block-editor/src/components/spacing-sizes-control/input-controls/separated.js","../../packages/block-editor/src/components/spacing-sizes-control/input-controls/single.js","../../packages/block-editor/src/components/spacing-sizes-control/linked-button.js","../../packages/block-editor/src/components/spacing-sizes-control/index.js","../../packages/block-editor/src/components/height-control/index.js","../../packages/block-editor/src/components/grid/use-get-number-of-blocks-before-cell.js","../../packages/block-editor/src/components/child-layout-control/index.js","../../packages/block-editor/src/components/dimensions-tool/aspect-ratio-tool.js","../../packages/block-editor/src/components/global-styles/dimensions-panel.js","../../packages/block-editor/src/components/block-popover/use-popover-scroll.js","../../packages/block-editor/src/utils/dom.js","../../packages/block-editor/src/components/block-popover/index.js","../../packages/block-editor/src/components/block-popover/cover.js","../../packages/block-editor/src/hooks/spacing-visualizer.js","../../packages/block-editor/src/hooks/dimensions.js","../../packages/block-editor/src/hooks/style.js","../../packages/block-editor/src/hooks/settings.js","../../packages/icons/src/library/filter.tsx","../../packages/block-editor/src/components/duotone-control/index.js","../../packages/block-editor/src/components/duotone/utils.js","../../packages/block-editor/src/components/global-styles/get-block-css-selector.js","../../packages/block-editor/src/components/global-styles/filters-panel.js","../../packages/block-editor/src/hooks/duotone.js","../../packages/block-editor/src/components/use-block-display-information/index.js","../../packages/block-editor/src/hooks/position.js","../../packages/block-editor/src/components/global-styles/use-global-styles-output.js","../../packages/block-editor/src/hooks/block-style-variation.js","../../packages/block-editor/src/hooks/layout.js","../../packages/block-editor/src/components/grid/utils.js","../../packages/block-editor/src/components/inserter/tips.js","../../packages/icons/src/library/chevron-right.tsx","../../packages/icons/src/library/chevron-left.tsx","../../packages/icons/src/library/block-default.tsx","../../packages/block-editor/src/components/block-icon/index.js","../../packages/block-editor/src/components/block-card/index.js","../../packages/upload-media/src/store/types.ts","../../packages/upload-media/src/store/reducer.ts","../../packages/upload-media/src/store/selectors.ts","../../packages/upload-media/src/store/private-selectors.ts","webpack://wp/./node_modules/uuid/dist/esm-browser/native.js","webpack://wp/./node_modules/uuid/dist/esm-browser/rng.js","webpack://wp/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://wp/./node_modules/uuid/dist/esm-browser/v4.js","../../packages/upload-media/src/upload-error.ts","../../packages/upload-media/src/validate-mime-type.ts","../../packages/upload-media/src/validate-mime-type-for-user.ts","../../packages/upload-media/src/get-mime-types-array.ts","../../packages/upload-media/src/validate-file-size.ts","../../packages/upload-media/src/store/actions.ts","../../packages/upload-media/src/utils.ts","../../packages/upload-media/src/stub-file.ts","../../packages/upload-media/src/store/private-actions.ts","../../packages/upload-media/src/lock-unlock.ts","../../packages/upload-media/src/store/constants.ts","../../packages/upload-media/src/store/index.ts","../../packages/upload-media/src/components/provider/with-registry-provider.tsx","../../packages/upload-media/src/components/provider/index.tsx","../../packages/block-editor/src/components/provider/with-registry-provider.js","../../packages/block-editor/src/components/provider/use-block-sync.js","webpack://wp/external window [\"wp\",\"keyboardShortcuts\"]","../../packages/block-editor/src/components/keyboard-shortcuts/index.js","../../packages/block-editor/src/components/provider/index.js","../../packages/block-editor/src/components/provider/use-media-upload-settings.js","../../packages/block-editor/src/components/block-context/index.js","../../packages/block-editor/src/utils/block-bindings.js","../../packages/block-editor/src/components/block-edit/edit.js","../../packages/icons/src/library/more-vertical.tsx","../../packages/block-editor/src/components/warning/index.js","../../packages/block-editor/src/components/block-edit/multiple-usage-warning.js","../../packages/block-editor/src/components/block-list/private-block-context.js","../../packages/block-editor/src/components/block-edit/index.js","../../packages/block-editor/src/components/block-compare/block-view.js","../../packages/block-editor/src/components/block-compare/index.js","../../packages/block-editor/src/components/block-list/block-invalid-warning.js","../../packages/block-editor/src/components/block-list/block-crash-warning.js","../../packages/block-editor/src/components/block-list/block-crash-boundary.js","../../packages/block-editor/src/components/block-list/block-html.js","webpack://wp/./node_modules/@react-spring/rafz/dist/react-spring-rafz.esm.js","webpack://wp/./node_modules/@react-spring/shared/dist/react-spring-shared.esm.js","webpack://wp/./node_modules/@react-spring/animated/dist/react-spring-animated.esm.js","webpack://wp/./node_modules/@react-spring/core/dist/react-spring-core.esm.js","webpack://wp/external window \"ReactDOM\"","webpack://wp/./node_modules/@react-spring/web/dist/react-spring-web.esm.js","../../packages/block-editor/src/components/use-moving-animation/index.js","../../packages/block-editor/src/components/block-list/use-block-props/use-focus-first-element.js","../../packages/block-editor/src/components/block-list/use-block-props/use-is-hovered.js","../../packages/block-editor/src/components/block-list/use-block-props/use-focus-handler.js","../../packages/icons/src/library/drag-handle.tsx","../../packages/block-editor/src/components/block-draggable/draggable-chip.js","../../packages/block-editor/src/components/block-list/use-block-props/use-selected-block-event-handlers.js","../../packages/block-editor/src/components/block-list/use-block-props/use-intersection-observer.js","../../packages/block-editor/src/components/block-list/use-block-props/use-scroll-into-view.js","../../packages/block-editor/src/components/use-flash-editable-blocks/index.js","../../packages/block-editor/src/components/block-list/use-block-props/use-firefox-draggable-compatibility.js","../../packages/block-editor/src/components/block-list/use-block-props/index.js","../../packages/block-editor/src/components/block-list/block.js","webpack://wp/external window [\"wp\",\"htmlEntities\"]","../../packages/block-editor/src/components/default-block-appender/index.js","../../packages/block-editor/src/components/block-list-appender/index.js","../../packages/block-editor/src/components/block-popover/inbetween.js","../../packages/block-editor/src/components/block-popover/drop-zone.js","../../packages/block-editor/src/components/block-tools/insertion-point.js","../../packages/block-editor/src/components/block-list/use-in-between-inserter.js","../../packages/block-editor/src/components/block-selection-clearer/index.js","../../packages/block-editor/src/components/inner-blocks/use-nested-settings-update.js","../../packages/block-editor/src/components/use-on-block-drop/index.js","../../packages/block-editor/src/utils/math.js","../../packages/block-editor/src/components/use-block-drop-zone/index.js","../../packages/block-editor/src/components/inner-blocks/index.js","../../packages/block-editor/src/components/inner-blocks/use-block-context.js","../../packages/block-editor/src/components/inner-blocks/use-inner-block-template-sync.js","../../packages/block-editor/src/components/inner-blocks/default-block-appender.js","../../packages/block-editor/src/components/inner-blocks/button-block-appender.js","../../packages/block-editor/src/components/observe-typing/index.js","../../packages/block-editor/src/components/block-list/zoom-out-separator.js","../../packages/block-editor/src/components/block-list/index.js","../../packages/block-editor/src/components/writing-flow/use-multi-selection.js","../../packages/block-editor/src/components/writing-flow/use-arrow-nav.js","../../packages/block-editor/src/components/writing-flow/use-select-all.js","../../packages/block-editor/src/components/writing-flow/use-drag-selection.js","../../packages/block-editor/src/components/writing-flow/use-selection-observer.js","../../packages/block-editor/src/components/writing-flow/use-click-selection.js","../../packages/block-editor/src/components/writing-flow/use-input.js","../../packages/block-editor/src/utils/use-notify-copy.js","../../packages/block-editor/src/utils/pasting.js","../../packages/block-editor/src/components/writing-flow/utils.js","../../packages/block-editor/src/components/writing-flow/use-clipboard-handler.js","../../packages/block-editor/src/components/writing-flow/index.js","../../packages/block-editor/src/components/writing-flow/use-tab-nav.js","../../packages/block-editor/src/components/iframe/get-compatibility-styles.js","../../packages/block-editor/src/components/iframe/use-scale-canvas.js","../../packages/block-editor/src/components/iframe/index.js","webpack://wp/./node_modules/parsel-js/dist/parsel.js","../../packages/block-editor/src/utils/transform-styles/index.js","../../packages/block-editor/src/components/editor-styles/index.js","../../packages/block-editor/src/components/block-preview/auto.js","webpack://wp/external window [\"wp\",\"priorityQueue\"]","../../packages/block-editor/src/components/block-preview/async.js","../../packages/block-editor/src/components/block-preview/index.js","../../packages/block-editor/src/components/inserter/preview-panel.js","../../packages/block-editor/src/components/inserter-listbox/item.js","../../packages/block-editor/src/components/inserter-draggable-blocks/index.js","../../packages/block-editor/src/components/inserter-list-item/index.js","../../packages/block-editor/src/components/inserter-listbox/group.js","../../packages/block-editor/src/components/inserter-listbox/row.js","../../packages/block-editor/src/components/block-types-list/index.js","../../packages/block-editor/src/components/inserter/panel.js","../../packages/block-editor/src/components/inserter/hooks/use-block-types-state.js","../../packages/block-editor/src/components/inserter-listbox/index.js","../../packages/block-editor/src/components/inserter/no-results.js","../../packages/block-editor/src/components/inserter/block-types-tab.js","../../packages/block-editor/src/components/inserter/block-patterns-explorer/pattern-explorer-sidebar.js","../../packages/block-editor/src/components/block-patterns-paging/index.js","../../packages/block-editor/src/components/block-patterns-list/index.js","../../packages/block-editor/src/components/inserter/hooks/use-insertion-point.js","../../packages/block-editor/src/components/inserter/hooks/use-patterns-state.js","webpack://wp/./node_modules/lower-case/src/index.ts","webpack://wp/./node_modules/no-case/src/index.ts","../../packages/block-editor/src/components/inserter/search-items.js","../../packages/block-editor/src/components/inserter/hooks/use-patterns-paging.js","../../packages/block-editor/src/components/inserter/block-patterns-explorer/pattern-list.js","../../packages/block-editor/src/components/inserter/block-patterns-tab/use-pattern-categories.js","../../packages/block-editor/src/components/inserter/block-patterns-explorer/index.js","../../packages/block-editor/src/components/inserter/mobile-tab-navigation.js","../../packages/block-editor/src/components/inserter/block-patterns-tab/patterns-filter.js","../../packages/block-editor/src/components/inserter/block-patterns-tab/pattern-category-previews.js","../../packages/block-editor/src/components/inserter/category-tabs/index.js","../../packages/block-editor/src/components/inserter/block-patterns-tab/index.js","../../packages/icons/src/library/external.tsx","../../packages/block-editor/src/components/inserter/media-tab/utils.js","../../packages/block-editor/src/components/inserter/media-tab/media-preview.js","../../packages/block-editor/src/components/inserter/media-tab/media-list.js","../../packages/block-editor/src/components/inserter/media-tab/media-panel.js","../../packages/block-editor/src/components/inserter/media-tab/hooks.js","../../packages/block-editor/src/components/inserter/media-tab/media-tab.js","../../packages/block-editor/src/components/inserter-menu-extension/index.js","../../packages/block-editor/src/utils/order-inserter-block-items.js","../../packages/block-editor/src/components/inserter/search-results.js","../../packages/icons/src/library/close-small.tsx","../../packages/block-editor/src/components/tabbed-sidebar/index.js","../../packages/block-editor/src/hooks/use-zoom-out.js","../../packages/block-editor/src/components/inserter/menu.js","../../packages/block-editor/src/components/inserter/quick-inserter.js","../../packages/block-editor/src/components/inserter/index.js","../../packages/block-editor/src/components/button-block-appender/index.js","../../packages/block-editor/src/components/grid/grid-visualizer.js","../../packages/block-editor/src/components/grid/grid-item-resizer.js","../../packages/icons/src/library/chevron-up.tsx","../../packages/icons/src/library/chevron-down.tsx","../../packages/block-editor/src/components/grid/grid-item-movers.js","../../packages/block-editor/src/hooks/layout-child.js","../../packages/block-editor/src/hooks/content-lock-ui.js","../../packages/block-editor/src/hooks/metadata.js","../../packages/block-editor/src/hooks/block-hooks.js","../../packages/block-editor/src/hooks/block-bindings.js","../../packages/block-editor/src/components/grid/use-grid-layout-sync.js","../../packages/block-editor/src/hooks/grid-visualizer.js","../../packages/block-editor/src/hooks/block-renaming.js","../../packages/block-editor/src/hooks/use-border-props.js","../../packages/block-editor/src/hooks/use-shadow-props.js","../../packages/block-editor/src/hooks/use-color-props.js","../../packages/block-editor/src/hooks/use-spacing-props.js","../../packages/block-editor/src/hooks/use-typography-props.js","../../packages/block-editor/src/hooks/use-cached-truthy.js","../../packages/block-editor/src/hooks/index.js","../../packages/block-editor/src/components/colors/with-colors.js","../../packages/block-editor/src/components/font-sizes/font-size-picker.js","../../packages/block-editor/src/components/font-sizes/with-font-sizes.js","../../packages/block-editor/src/autocompleters/block.js","webpack://wp/external window [\"wp\",\"apiFetch\"]","../../packages/icons/src/library/post.tsx","../../packages/block-editor/src/autocompleters/link.js","../../packages/block-editor/src/components/autocomplete/index.js","../../packages/icons/src/library/fullscreen.tsx","../../packages/block-editor/src/components/block-full-height-alignment-control/index.js","../../packages/block-editor/src/components/block-alignment-matrix-control/index.js","../../packages/block-editor/src/components/block-title/use-block-display-title.js","../../packages/block-editor/src/components/block-title/index.js","../../packages/block-editor/src/components/block-breadcrumb/index.js","../../packages/block-editor/src/utils/get-editor-region.js","../../packages/block-editor/src/components/block-content-overlay/index.js","../../packages/block-editor/src/components/block-tools/use-block-toolbar-popover-props.js","../../packages/block-editor/src/components/block-tools/use-selected-block-tool-props.js","../../packages/block-editor/src/components/block-tools/empty-block-inserter.js","../../packages/block-editor/src/components/block-draggable/index.js","../../packages/block-editor/src/components/block-draggable/use-scroll-when-dragging.js","../../packages/block-editor/src/components/block-mover/mover-description.js","../../packages/block-editor/src/components/block-mover/button.js","../../packages/block-editor/src/components/block-mover/index.js","../../packages/block-editor/src/components/block-toolbar/utils.js","../../packages/block-editor/src/components/block-parent-selector/index.js","../../packages/icons/src/library/copy.tsx","../../packages/block-editor/src/components/block-switcher/preview-block-popover.js","../../packages/block-editor/src/components/block-switcher/block-variation-transformations.js","../../packages/block-editor/src/components/block-switcher/block-transformations-menu.js","../../packages/block-editor/src/components/block-styles/utils.js","../../packages/block-editor/src/components/block-styles/use-styles-for-block.js","../../packages/block-editor/src/components/block-styles/menu-items.js","../../packages/block-editor/src/components/block-switcher/block-styles-menu.js","../../packages/block-editor/src/components/block-switcher/utils.js","../../packages/block-editor/src/components/block-switcher/use-transformed-patterns.js","../../packages/block-editor/src/components/block-switcher/pattern-transformations-menu.js","../../packages/block-editor/src/components/block-switcher/index.js","../../packages/block-editor/src/components/block-toolbar/block-toolbar-last-item.js","../../packages/block-editor/src/hooks/supports.js","../../packages/block-editor/src/components/use-paste-styles/index.js","../../packages/block-editor/src/components/block-actions/index.js","../../packages/block-editor/src/components/collab/block-comment-icon-slot.js","../../packages/block-editor/src/components/block-settings-menu/block-html-convert-button.js","../../packages/block-editor/src/components/block-settings-menu/block-settings-menu-first-item.js","../../packages/block-editor/src/components/convert-to-group-buttons/use-convert-to-group-button-props.js","../../packages/block-editor/src/components/convert-to-group-buttons/index.js","../../packages/block-editor/src/components/block-lock/use-block-lock.js","../../packages/icons/src/library/unlock.tsx","../../packages/icons/src/library/lock-outline.tsx","../../packages/icons/src/library/lock.tsx","../../packages/block-editor/src/components/block-lock/modal.js","../../packages/block-editor/src/components/block-lock/menu-item.js","../../packages/block-editor/src/components/block-settings-menu/block-mode-toggle.js","../../packages/block-editor/src/components/content-lock/modify-content-lock-menu-item.js","../../packages/block-editor/src/components/block-rename/modal.js","../../packages/block-editor/src/components/block-rename/is-empty-string.js","../../packages/block-editor/src/components/block-rename/rename-control.js","../../packages/block-editor/src/components/block-settings-menu-controls/index.js","../../packages/block-editor/src/components/block-rename/use-block-rename.js","../../packages/block-editor/src/components/block-settings-menu/block-parent-selector-menu-item.js","../../packages/block-editor/src/components/block-settings-menu/block-settings-dropdown.js","../../packages/block-editor/src/components/collab/block-comment-icon-toolbar-slot.js","../../packages/block-editor/src/components/block-settings-menu/index.js","../../packages/block-editor/src/components/block-lock/toolbar.js","../../packages/icons/src/library/group.tsx","../../packages/icons/src/library/row.tsx","../../packages/icons/src/library/stack.tsx","../../packages/icons/src/library/grid.tsx","../../packages/block-editor/src/components/convert-to-group-buttons/toolbar.js","../../packages/block-editor/src/components/block-edit-visually-button/index.js","../../packages/block-editor/src/components/block-toolbar/block-name-context.js","../../packages/block-editor/src/components/navigable-toolbar/index.js","../../packages/block-editor/src/components/block-toolbar/use-has-block-toolbar.js","../../packages/block-editor/src/components/block-toolbar/change-design.js","../../packages/block-editor/src/components/block-toolbar/switch-section-style.js","../../packages/block-editor/src/components/block-toolbar/index.js","../../packages/block-editor/src/components/block-tools/block-toolbar-popover.js","../../packages/block-editor/src/components/block-tools/zoom-out-mode-inserter-button.js","../../packages/block-editor/src/components/block-tools/zoom-out-mode-inserters.js","../../packages/block-editor/src/components/block-tools/index.js","../../packages/block-editor/src/components/block-tools/use-show-block-tools.js","webpack://wp/external window [\"wp\",\"commands\"]","../../packages/icons/src/library/ungroup.tsx","../../packages/icons/src/library/trash.tsx","../../packages/block-editor/src/components/use-block-commands/index.js","../../packages/block-editor/src/components/block-canvas/index.js","../../packages/block-editor/src/components/color-style-selector/index.js","../../packages/icons/src/library/list-view.tsx","../../packages/block-editor/src/components/list-view/context.js","../../packages/block-editor/src/components/list-view/aria-referenced-text.js","../../packages/block-editor/src/components/list-view/appender.js","../../packages/block-editor/src/components/list-view/leaf.js","../../packages/icons/src/library/pin-small.tsx","../../packages/icons/src/library/lock-small.tsx","../../packages/block-editor/src/components/list-view/expander.js","../../packages/block-editor/src/components/list-view/use-list-view-images.js","../../packages/block-editor/src/components/list-view/block-select-button.js","../../packages/block-editor/src/components/list-view/block-contents.js","../../packages/block-editor/src/components/list-view/utils.js","../../packages/block-editor/src/components/list-view/block.js","../../packages/block-editor/src/components/list-view/use-list-view-scroll-into-view.js","../../packages/block-editor/src/components/list-view/branch.js","../../packages/block-editor/src/components/list-view/drop-indicator.js","../../packages/block-editor/src/components/list-view/use-list-view-drop-zone.js","../../packages/block-editor/src/components/list-view/index.js","../../packages/block-editor/src/components/list-view/use-list-view-client-ids.js","../../packages/block-editor/src/components/list-view/use-list-view-block-indexes.js","../../packages/block-editor/src/components/list-view/use-block-selection.js","../../packages/block-editor/src/components/list-view/use-list-view-expand-selected-item.js","../../packages/block-editor/src/components/list-view/use-clipboard-handler.js","../../packages/block-editor/src/components/list-view/use-list-view-collapse-items.js","../../packages/block-editor/src/components/block-navigation/dropdown.js","../../packages/block-editor/src/components/block-styles/preview-panel.js","../../packages/block-editor/src/components/block-styles/index.js","../../packages/block-editor/src/components/block-heading-level-dropdown/heading-level-icon.js","../../packages/icons/src/library/paragraph.tsx","../../packages/icons/src/library/heading-level-1.tsx","../../packages/icons/src/library/heading-level-2.tsx","../../packages/icons/src/library/heading-level-3.tsx","../../packages/icons/src/library/heading-level-4.tsx","../../packages/icons/src/library/heading-level-5.tsx","../../packages/icons/src/library/heading-level-6.tsx","../../packages/block-editor/src/components/block-heading-level-dropdown/index.js","../../packages/icons/src/library/layout.tsx","../../packages/block-editor/src/components/block-variation-picker/index.js","../../packages/block-editor/src/components/block-pattern-setup/constants.js","../../packages/block-editor/src/components/block-pattern-setup/setup-toolbar.js","../../packages/block-editor/src/components/block-pattern-setup/index.js","../../packages/block-editor/src/components/block-pattern-setup/use-patterns-setup.js","../../packages/block-editor/src/components/block-variation-transforms/index.js","../../packages/block-editor/src/components/color-palette/with-color-context.js","../../packages/block-editor/src/components/color-palette/index.js","../../packages/block-editor/src/components/color-palette/control.js","webpack://wp/external window [\"wp\",\"date\"]","../../packages/block-editor/src/components/date-format-picker/index.js","../../packages/block-editor/src/components/colors-gradients/dropdown.js","../../packages/block-editor/src/components/colors-gradients/panel-color-gradient-settings.js","../../packages/icons/src/library/aspect-ratio.tsx","../../packages/block-editor/src/components/image-editor/constants.js","../../packages/block-editor/src/components/image-editor/use-save-image.js","../../packages/block-editor/src/components/image-editor/context.js","../../packages/block-editor/src/components/image-editor/use-transform-image.js","../../packages/block-editor/src/components/image-editor/aspect-ratio-dropdown.js","webpack://wp/./packages/block-editor/node_modules/tslib/tslib.es6.js","webpack://wp/./packages/block-editor/node_modules/src/helpers.ts","webpack://wp/./packages/block-editor/node_modules/src/Cropper.tsx","../../packages/block-editor/src/components/image-editor/cropper.js","../../packages/icons/src/library/search.tsx","../../packages/block-editor/src/components/image-editor/zoom-dropdown.js","../../packages/icons/src/library/rotate-right.tsx","../../packages/block-editor/src/components/image-editor/rotation-button.js","../../packages/block-editor/src/components/image-editor/form-controls.js","../../packages/block-editor/src/components/image-editor/index.js","../../packages/block-editor/src/components/image-size-control/index.js","../../packages/block-editor/src/components/image-size-control/use-dimension-handler.js","../../packages/block-editor/src/components/url-popover/link-viewer-url.js","../../packages/block-editor/src/components/url-popover/index.js","../../packages/block-editor/src/components/url-popover/link-editor.js","../../packages/block-editor/src/components/url-popover/link-viewer.js","../../packages/block-editor/src/components/media-placeholder/index.js","../../packages/block-editor/src/components/panel-color-settings/index.js","../../packages/block-editor/src/components/rich-text/format-toolbar/index.js","../../packages/block-editor/src/components/rich-text/format-toolbar-container.js","../../packages/block-editor/src/components/rich-text/use-format-types.js","../../packages/block-editor/src/components/rich-text/event-listeners/before-input-rules.js","../../packages/block-editor/src/components/rich-text/event-listeners/input-rules.js","../../packages/block-editor/src/components/rich-text/utils.js","../../packages/block-editor/src/components/rich-text/event-listeners/paste-handler.js","../../packages/block-editor/src/components/rich-text/event-listeners/index.js","../../packages/block-editor/src/components/rich-text/prevent-event-discovery.js","../../packages/block-editor/src/components/rich-text/event-listeners/insert-replacement-text.js","../../packages/block-editor/src/components/rich-text/event-listeners/remove-browser-shortcuts.js","../../packages/block-editor/src/components/rich-text/event-listeners/shortcuts.js","../../packages/block-editor/src/components/rich-text/event-listeners/input-events.js","../../packages/block-editor/src/components/rich-text/event-listeners/undo-automatic-change.js","../../packages/block-editor/src/components/rich-text/event-listeners/delete.js","../../packages/block-editor/src/components/rich-text/event-listeners/enter.js","../../packages/block-editor/src/components/rich-text/event-listeners/firefox-compat.js","../../packages/block-editor/src/components/rich-text/format-edit.js","../../packages/block-editor/src/components/rich-text/content.js","../../packages/block-editor/src/components/rich-text/multiline.js","../../packages/block-editor/src/components/rich-text/index.js","../../packages/block-editor/src/components/rich-text/use-mark-persistent.js","../../packages/block-editor/src/components/rich-text/with-deprecations.js","../../packages/block-editor/src/components/editable-text/index.js","../../packages/block-editor/src/components/plain-text/index.js","../../packages/block-editor/src/components/responsive-block-control/label.js","../../packages/block-editor/src/components/responsive-block-control/index.js","../../packages/block-editor/src/components/rich-text/shortcut.js","../../packages/block-editor/src/components/rich-text/toolbar-button.js","../../packages/block-editor/src/components/rich-text/input-event.js","../../packages/block-editor/src/components/tool-selector/index.js","../../packages/block-editor/src/components/unit-control/index.js","../../packages/icons/src/library/arrow-left.tsx","../../packages/block-editor/src/components/url-input/button.js","../../packages/icons/src/library/image.tsx","../../packages/block-editor/src/components/url-popover/image-url-input-ui.js","../../packages/block-editor/src/components/preview-options/index.js","../../packages/block-editor/src/components/use-resize-canvas/index.js","../../packages/block-editor/src/components/skip-to-selected-block/index.js","../../packages/block-editor/src/components/multi-selection-inspector/index.js","../../packages/icons/src/library/cog.tsx","../../packages/icons/src/library/styles.tsx","../../packages/block-editor/src/components/inspector-controls-tabs/utils.js","../../packages/block-editor/src/components/inspector-controls-tabs/advanced-controls-panel.js","../../packages/block-editor/src/components/inspector-controls-tabs/position-controls-panel.js","../../packages/block-editor/src/components/inspector-controls-tabs/settings-tab.js","../../packages/block-editor/src/components/inspector-controls-tabs/styles-tab.js","../../packages/block-editor/src/components/inspector-controls-tabs/use-is-list-view-tab-disabled.js","../../packages/block-editor/src/components/inspector-controls-tabs/index.js","../../packages/block-editor/src/components/inspector-controls-tabs/use-inspector-controls-tabs.js","../../packages/block-editor/src/components/block-quick-navigation/index.js","../../packages/block-editor/src/components/block-inspector/index.js","../../packages/block-editor/src/components/block-inspector/useBlockInspectorAnimationSettings.js","../../packages/block-editor/src/components/copy-handler/index.js","../../packages/block-editor/src/components/inserter/library.js","../../packages/block-editor/src/components/selection-scroll-into-view/index.js","../../packages/block-editor/src/components/typewriter/index.js","../../packages/block-editor/src/components/recursion-provider/index.js","../../packages/block-editor/src/components/inspector-popover-header/index.js","../../packages/block-editor/src/components/publish-date-time-picker/index.js","../../packages/block-editor/src/elements/index.js","../../packages/block-editor/src/utils/get-px-from-css-unit.js","../../packages/block-editor/src/components/global-styles/image-settings-panel.js","../../packages/block-editor/src/components/global-styles/advanced-panel.js","../../packages/block-editor/src/components/global-styles/get-global-styles-changes.js","webpack://wp/./node_modules/memize/dist/index.js","../../packages/block-editor/src/components/rich-text/get-rich-text-values.js","../../packages/block-editor/src/components/block-manager/checklist.js","../../packages/block-editor/src/components/block-manager/category.js","../../packages/block-editor/src/components/dimensions-tool/scale-tool.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://wp/./node_modules/@emotion/is-prop-valid/node_modules/@emotion/memoize/dist/emotion-memoize.esm.js","webpack://wp/./node_modules/@emotion/is-prop-valid/dist/emotion-is-prop-valid.esm.js","webpack://wp/./node_modules/@emotion/sheet/dist/emotion-sheet.browser.esm.js","webpack://wp/./node_modules/stylis/src/Utility.js","webpack://wp/./node_modules/stylis/src/Tokenizer.js","webpack://wp/./node_modules/stylis/src/Enum.js","webpack://wp/./node_modules/stylis/src/Serializer.js","webpack://wp/./node_modules/stylis/src/Prefixer.js","webpack://wp/./node_modules/stylis/src/Parser.js","webpack://wp/./node_modules/@emotion/cache/dist/emotion-cache.browser.esm.js","webpack://wp/./node_modules/stylis/src/Middleware.js","webpack://wp/./node_modules/@emotion/unitless/dist/emotion-unitless.esm.js","webpack://wp/./node_modules/@emotion/serialize/node_modules/@emotion/memoize/dist/emotion-memoize.esm.js","webpack://wp/./node_modules/@emotion/serialize/dist/emotion-serialize.browser.esm.js","webpack://wp/./node_modules/@emotion/react/dist/emotion-element-699e6908.browser.esm.js","webpack://wp/./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js","webpack://wp/./node_modules/@emotion/utils/dist/emotion-utils.browser.esm.js","webpack://wp/./node_modules/@emotion/hash/dist/emotion-hash.esm.js","../../packages/block-editor/src/components/dimensions-tool/width-height-tool.js","../../packages/block-editor/src/components/dimensions-tool/index.js","../../packages/block-editor/src/components/resolution-tool/index.js","../../packages/block-editor/src/components/html-element-control/messages.js","../../packages/block-editor/src/private-apis.js","../../packages/block-editor/src/components/resizable-box-popover/index.js","../../packages/block-editor/src/components/block-manager/index.js","../../packages/block-editor/src/components/block-removal-warning-modal/index.js","../../packages/block-editor/src/components/html-element-control/index.js"],"sourcesContent":["/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});","// This code has been refactored for 140 bytes\n// You can see the original here: https://github.com/twolfson/computedStyle/blob/04cd1da2e30fa45844f95f5cb1ac898e9b9ef050/lib/computedStyle.js\nvar computedStyle = function (el, prop, getComputedStyle) {\n  getComputedStyle = window.getComputedStyle;\n\n  // In one fell swoop\n  return (\n    // If we have getComputedStyle\n    getComputedStyle ?\n      // Query it\n      // TODO: From CSS-Query notes, we might need (node, null) for FF\n      getComputedStyle(el) :\n\n    // Otherwise, we are in IE and use currentStyle\n      el.currentStyle\n  )[\n    // Switch to camelCase for CSSOM\n    // DEV: Grabbed from jQuery\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/css.js#L191-L194\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/core.js#L593-L597\n    prop.replace(/-(\\w)/gi, function (word, letter) {\n      return letter.toUpperCase();\n    })\n  ];\n};\n\nmodule.exports = computedStyle;\n","export default function Diff() {}\n\nDiff.prototype = {\n  diff(oldString, newString, options = {}) {\n    let callback = options.callback;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    this.options = options;\n\n    let self = this;\n\n    function done(value) {\n      if (callback) {\n        setTimeout(function() { callback(undefined, value); }, 0);\n        return true;\n      } else {\n        return value;\n      }\n    }\n\n    // Allow subclasses to massage the input prior to running\n    oldString = this.castInput(oldString);\n    newString = this.castInput(newString);\n\n    oldString = this.removeEmpty(this.tokenize(oldString));\n    newString = this.removeEmpty(this.tokenize(newString));\n\n    let newLen = newString.length, oldLen = oldString.length;\n    let editLength = 1;\n    let maxEditLength = newLen + oldLen;\n    let bestPath = [{ newPos: -1, components: [] }];\n\n    // Seed editLength = 0, i.e. the content starts with the same values\n    let oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n      // Identity per the equality and tokenizer\n      return done([{value: this.join(newString), count: newString.length}]);\n    }\n\n    // Main worker method. checks all permutations of a given edit length for acceptance.\n    function execEditLength() {\n      for (let diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n        let basePath;\n        let addPath = bestPath[diagonalPath - 1],\n            removePath = bestPath[diagonalPath + 1],\n            oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n        if (addPath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n\n        let canAdd = addPath && addPath.newPos + 1 < newLen,\n            canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        }\n\n        // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the new string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n        if (!canAdd || (canRemove && addPath.newPos < removePath.newPos)) {\n          basePath = clonePath(removePath);\n          self.pushComponent(basePath.components, undefined, true);\n        } else {\n          basePath = addPath; // No need to clone, we've pulled it from the list\n          basePath.newPos++;\n          self.pushComponent(basePath.components, true, undefined);\n        }\n\n        oldPos = self.extractCommon(basePath, newString, oldString, diagonalPath);\n\n        // If we have hit the end of both strings, then we are done\n        if (basePath.newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n          return done(buildValues(self, basePath.components, newString, oldString, self.useLongestToken));\n        } else {\n          // Otherwise track this path as a potential candidate and continue.\n          bestPath[diagonalPath] = basePath;\n        }\n      }\n\n      editLength++;\n    }\n\n    // Performs the length of edit iteration. Is a bit fugly as this has to support the\n    // sync and async mode which is never fun. Loops over execEditLength until a value\n    // is produced.\n    if (callback) {\n      (function exec() {\n        setTimeout(function() {\n          // This should not happen, but we want to be safe.\n          /* istanbul ignore next */\n          if (editLength > maxEditLength) {\n            return callback();\n          }\n\n          if (!execEditLength()) {\n            exec();\n          }\n        }, 0);\n      }());\n    } else {\n      while (editLength <= maxEditLength) {\n        let ret = execEditLength();\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n\n  pushComponent(components, added, removed) {\n    let last = components[components.length - 1];\n    if (last && last.added === added && last.removed === removed) {\n      // We need to clone here as the component clone operation is just\n      // as shallow array clone\n      components[components.length - 1] = {count: last.count + 1, added: added, removed: removed };\n    } else {\n      components.push({count: 1, added: added, removed: removed });\n    }\n  },\n  extractCommon(basePath, newString, oldString, diagonalPath) {\n    let newLen = newString.length,\n        oldLen = oldString.length,\n        newPos = basePath.newPos,\n        oldPos = newPos - diagonalPath,\n\n        commonCount = 0;\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n    }\n\n    if (commonCount) {\n      basePath.components.push({count: commonCount});\n    }\n\n    basePath.newPos = newPos;\n    return oldPos;\n  },\n\n  equals(left, right) {\n    if (this.options.comparator) {\n      return this.options.comparator(left, right);\n    } else {\n      return left === right\n        || (this.options.ignoreCase && left.toLowerCase() === right.toLowerCase());\n    }\n  },\n  removeEmpty(array) {\n    let ret = [];\n    for (let i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n    return ret;\n  },\n  castInput(value) {\n    return value;\n  },\n  tokenize(value) {\n    return value.split('');\n  },\n  join(chars) {\n    return chars.join('');\n  }\n};\n\nfunction buildValues(diff, components, newString, oldString, useLongestToken) {\n  let componentPos = 0,\n      componentLen = components.length,\n      newPos = 0,\n      oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    let component = components[componentPos];\n    if (!component.removed) {\n      if (!component.added && useLongestToken) {\n        let value = newString.slice(newPos, newPos + component.count);\n        value = value.map(function(value, i) {\n          let oldValue = oldString[oldPos + i];\n          return oldValue.length > value.length ? oldValue : value;\n        });\n\n        component.value = diff.join(value);\n      } else {\n        component.value = diff.join(newString.slice(newPos, newPos + component.count));\n      }\n      newPos += component.count;\n\n      // Common case\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n      oldPos += component.count;\n\n      // Reverse add and remove so removes are output first to match common convention\n      // The diffing algorithm is tied to add then remove output and this is the simplest\n      // route to get the desired output with minimal overhead.\n      if (componentPos && components[componentPos - 1].added) {\n        let tmp = components[componentPos - 1];\n        components[componentPos - 1] = components[componentPos];\n        components[componentPos] = tmp;\n      }\n    }\n  }\n\n  // Special case handle for when one terminal is ignored (i.e. whitespace).\n  // For this case we merge the terminal into the prior string and drop the change.\n  // This is only available for string mode.\n  let lastComponent = components[componentLen - 1];\n  if (componentLen > 1\n      && typeof lastComponent.value === 'string'\n      && (lastComponent.added || lastComponent.removed)\n      && diff.equals('', lastComponent.value)) {\n    components[componentLen - 2].value += lastComponent.value;\n    components.pop();\n  }\n\n  return components;\n}\n\nfunction clonePath(path) {\n  return { newPos: path.newPos, components: path.components.slice(0) };\n}\n","import Diff from './base';\n\nexport const characterDiff = new Diff();\nexport function diffChars(oldStr, newStr, options) { return characterDiff.diff(oldStr, newStr, options); }\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n  var envHasBigInt64Array = typeof BigInt64Array !== 'undefined';\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n    if ((a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      for (i of a.entries())\n        if (!equal(i[1], b.get(i[0]))) return false;\n      return true;\n    }\n\n    if ((a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      return true;\n    }\n\n    if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","// Load in dependencies\nvar computedStyle = require('computed-style');\n\n/**\n * Calculate the `line-height` of a given node\n * @param {HTMLElement} node Element to calculate line height of. Must be in the DOM.\n * @returns {Number} `line-height` of the element in pixels\n */\nfunction lineHeight(node) {\n  // Grab the line-height via style\n  var lnHeightStr = computedStyle(node, 'line-height');\n  var lnHeight = parseFloat(lnHeightStr, 10);\n\n  // If the lineHeight did not contain a unit (i.e. it was numeric), convert it to ems (e.g. '2.3' === '2.3em')\n  if (lnHeightStr === lnHeight + '') {\n    // Save the old lineHeight style and update the em unit to the element\n    var _lnHeightStyle = node.style.lineHeight;\n    node.style.lineHeight = lnHeightStr + 'em';\n\n    // Calculate the em based height\n    lnHeightStr = computedStyle(node, 'line-height');\n    lnHeight = parseFloat(lnHeightStr, 10);\n\n    // Revert the lineHeight style\n    if (_lnHeightStyle) {\n      node.style.lineHeight = _lnHeightStyle;\n    } else {\n      delete node.style.lineHeight;\n    }\n  }\n\n  // If the lineHeight is in `pt`, convert it to pixels (4px for 3pt)\n  // DEV: `em` units are converted to `pt` in IE6\n  // Conversion ratio from https://developer.mozilla.org/en-US/docs/Web/CSS/length\n  if (lnHeightStr.indexOf('pt') !== -1) {\n    lnHeight *= 4;\n    lnHeight /= 3;\n  // Otherwise, if the lineHeight is in `mm`, convert it to pixels (96px for 25.4mm)\n  } else if (lnHeightStr.indexOf('mm') !== -1) {\n    lnHeight *= 96;\n    lnHeight /= 25.4;\n  // Otherwise, if the lineHeight is in `cm`, convert it to pixels (96px for 2.54cm)\n  } else if (lnHeightStr.indexOf('cm') !== -1) {\n    lnHeight *= 96;\n    lnHeight /= 2.54;\n  // Otherwise, if the lineHeight is in `in`, convert it to pixels (96px for 1in)\n  } else if (lnHeightStr.indexOf('in') !== -1) {\n    lnHeight *= 96;\n  // Otherwise, if the lineHeight is in `pc`, convert it to pixels (12pt for 1pc)\n  } else if (lnHeightStr.indexOf('pc') !== -1) {\n    lnHeight *= 16;\n  }\n\n  // Continue our computation\n  lnHeight = Math.round(lnHeight);\n\n  // If the line-height is \"normal\", calculate by font-size\n  if (lnHeightStr === 'normal') {\n    // Create a temporary node\n    var nodeName = node.nodeName;\n    var _node = document.createElement(nodeName);\n    _node.innerHTML = '&nbsp;';\n\n    // If we have a text area, reset it to only 1 row\n    // https://github.com/twolfson/line-height/issues/4\n    if (nodeName.toUpperCase() === 'TEXTAREA') {\n      _node.setAttribute('rows', '1');\n    }\n\n    // Set the font-size of the element\n    var fontSizeStr = computedStyle(node, 'font-size');\n    _node.style.fontSize = fontSizeStr;\n\n    // Remove default padding/border which can affect offset height\n    // https://github.com/twolfson/line-height/issues/4\n    // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetHeight\n    _node.style.padding = '0px';\n    _node.style.border = '0px';\n\n    // Append it to the body\n    var body = document.body;\n    body.appendChild(_node);\n\n    // Assume the line height of the element is the height\n    var height = _node.offsetHeight;\n    lnHeight = height;\n\n    // Remove our child from the DOM\n    body.removeChild(_node);\n  }\n\n  // Return the calculated height\n  return lnHeight;\n}\n\n// Export lineHeight\nmodule.exports = lineHeight;\n","module.exports = require('./src/normalizeWheel.js');\n","/**\n * Copyright (c) 2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ExecutionEnvironment\n */\n\n/*jslint evil: true */\n\n'use strict';\n\nvar canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\n/**\n * Simple, lightweight module assisting with the detection and context of\n * Worker. Helps avoid circular dependencies and allows code to reason about\n * whether or not they are in a Worker, even if they never include the main\n * `ReactWorker` dependency.\n */\nvar ExecutionEnvironment = {\n\n  canUseDOM: canUseDOM,\n\n  canUseWorkers: typeof Worker !== 'undefined',\n\n  canUseEventListeners:\n    canUseDOM && !!(window.addEventListener || window.attachEvent),\n\n  canUseViewport: canUseDOM && !!window.screen,\n\n  isInWorker: !canUseDOM // For now, this is true - might change in the future.\n\n};\n\nmodule.exports = ExecutionEnvironment;\n","/**\n * Copyright 2004-present Facebook. All Rights Reserved.\n *\n * @providesModule UserAgent_DEPRECATED\n */\n\n/**\n *  Provides entirely client-side User Agent and OS detection. You should prefer\n *  the non-deprecated UserAgent module when possible, which exposes our\n *  authoritative server-side PHP-based detection to the client.\n *\n *  Usage is straightforward:\n *\n *    if (UserAgent_DEPRECATED.ie()) {\n *      //  IE\n *    }\n *\n *  You can also do version checks:\n *\n *    if (UserAgent_DEPRECATED.ie() >= 7) {\n *      //  IE7 or better\n *    }\n *\n *  The browser functions will return NaN if the browser does not match, so\n *  you can also do version compares the other way:\n *\n *    if (UserAgent_DEPRECATED.ie() < 7) {\n *      //  IE6 or worse\n *    }\n *\n *  Note that the version is a float and may include a minor version number,\n *  so you should always use range operators to perform comparisons, not\n *  strict equality.\n *\n *  **Note:** You should **strongly** prefer capability detection to browser\n *  version detection where it's reasonable:\n *\n *    http://www.quirksmode.org/js/support.html\n *\n *  Further, we have a large number of mature wrapper functions and classes\n *  which abstract away many browser irregularities. Check the documentation,\n *  grep for things, or ask on javascript@lists.facebook.com before writing yet\n *  another copy of \"event || window.event\".\n *\n */\n\nvar _populated = false;\n\n// Browsers\nvar _ie, _firefox, _opera, _webkit, _chrome;\n\n// Actual IE browser for compatibility mode\nvar _ie_real_version;\n\n// Platforms\nvar _osx, _windows, _linux, _android;\n\n// Architectures\nvar _win64;\n\n// Devices\nvar _iphone, _ipad, _native;\n\nvar _mobile;\n\nfunction _populate() {\n  if (_populated) {\n    return;\n  }\n\n  _populated = true;\n\n  // To work around buggy JS libraries that can't handle multi-digit\n  // version numbers, Opera 10's user agent string claims it's Opera\n  // 9, then later includes a Version/X.Y field:\n  //\n  // Opera/9.80 (foo) Presto/2.2.15 Version/10.10\n  var uas = navigator.userAgent;\n  var agent = /(?:MSIE.(\\d+\\.\\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\\d+\\.\\d+))|(?:Opera(?:.+Version.|.)(\\d+\\.\\d+))|(?:AppleWebKit.(\\d+(?:\\.\\d+)?))|(?:Trident\\/\\d+\\.\\d+.*rv:(\\d+\\.\\d+))/.exec(uas);\n  var os    = /(Mac OS X)|(Windows)|(Linux)/.exec(uas);\n\n  _iphone = /\\b(iPhone|iP[ao]d)/.exec(uas);\n  _ipad = /\\b(iP[ao]d)/.exec(uas);\n  _android = /Android/i.exec(uas);\n  _native = /FBAN\\/\\w+;/i.exec(uas);\n  _mobile = /Mobile/i.exec(uas);\n\n  // Note that the IE team blog would have you believe you should be checking\n  // for 'Win64; x64'.  But MSDN then reveals that you can actually be coming\n  // from either x64 or ia64;  so ultimately, you should just check for Win64\n  // as in indicator of whether you're in 64-bit IE.  32-bit IE on 64-bit\n  // Windows will send 'WOW64' instead.\n  _win64 = !!(/Win64/.exec(uas));\n\n  if (agent) {\n    _ie = agent[1] ? parseFloat(agent[1]) : (\n          agent[5] ? parseFloat(agent[5]) : NaN);\n    // IE compatibility mode\n    if (_ie && document && document.documentMode) {\n      _ie = document.documentMode;\n    }\n    // grab the \"true\" ie version from the trident token if available\n    var trident = /(?:Trident\\/(\\d+.\\d+))/.exec(uas);\n    _ie_real_version = trident ? parseFloat(trident[1]) + 4 : _ie;\n\n    _firefox = agent[2] ? parseFloat(agent[2]) : NaN;\n    _opera   = agent[3] ? parseFloat(agent[3]) : NaN;\n    _webkit  = agent[4] ? parseFloat(agent[4]) : NaN;\n    if (_webkit) {\n      // We do not add the regexp to the above test, because it will always\n      // match 'safari' only since 'AppleWebKit' appears before 'Chrome' in\n      // the userAgent string.\n      agent = /(?:Chrome\\/(\\d+\\.\\d+))/.exec(uas);\n      _chrome = agent && agent[1] ? parseFloat(agent[1]) : NaN;\n    } else {\n      _chrome = NaN;\n    }\n  } else {\n    _ie = _firefox = _opera = _chrome = _webkit = NaN;\n  }\n\n  if (os) {\n    if (os[1]) {\n      // Detect OS X version.  If no version number matches, set _osx to true.\n      // Version examples:  10, 10_6_1, 10.7\n      // Parses version number as a float, taking only first two sets of\n      // digits.  If only one set of digits is found, returns just the major\n      // version number.\n      var ver = /(?:Mac OS X (\\d+(?:[._]\\d+)?))/.exec(uas);\n\n      _osx = ver ? parseFloat(ver[1].replace('_', '.')) : true;\n    } else {\n      _osx = false;\n    }\n    _windows = !!os[2];\n    _linux   = !!os[3];\n  } else {\n    _osx = _windows = _linux = false;\n  }\n}\n\nvar UserAgent_DEPRECATED = {\n\n  /**\n   *  Check if the UA is Internet Explorer.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  ie: function() {\n    return _populate() || _ie;\n  },\n\n  /**\n   * Check if we're in Internet Explorer compatibility mode.\n   *\n   * @return bool true if in compatibility mode, false if\n   * not compatibility mode or not ie\n   */\n  ieCompatibilityMode: function() {\n    return _populate() || (_ie_real_version > _ie);\n  },\n\n\n  /**\n   * Whether the browser is 64-bit IE.  Really, this is kind of weak sauce;  we\n   * only need this because Skype can't handle 64-bit IE yet.  We need to remove\n   * this when we don't need it -- tracked by #601957.\n   */\n  ie64: function() {\n    return UserAgent_DEPRECATED.ie() && _win64;\n  },\n\n  /**\n   *  Check if the UA is Firefox.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  firefox: function() {\n    return _populate() || _firefox;\n  },\n\n\n  /**\n   *  Check if the UA is Opera.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  opera: function() {\n    return _populate() || _opera;\n  },\n\n\n  /**\n   *  Check if the UA is WebKit.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  webkit: function() {\n    return _populate() || _webkit;\n  },\n\n  /**\n   *  For Push\n   *  WILL BE REMOVED VERY SOON. Use UserAgent_DEPRECATED.webkit\n   */\n  safari: function() {\n    return UserAgent_DEPRECATED.webkit();\n  },\n\n  /**\n   *  Check if the UA is a Chrome browser.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  chrome : function() {\n    return _populate() || _chrome;\n  },\n\n\n  /**\n   *  Check if the user is running Windows.\n   *\n   *  @return bool `true' if the user's OS is Windows.\n   */\n  windows: function() {\n    return _populate() || _windows;\n  },\n\n\n  /**\n   *  Check if the user is running Mac OS X.\n   *\n   *  @return float|bool   Returns a float if a version number is detected,\n   *                       otherwise true/false.\n   */\n  osx: function() {\n    return _populate() || _osx;\n  },\n\n  /**\n   * Check if the user is running Linux.\n   *\n   * @return bool `true' if the user's OS is some flavor of Linux.\n   */\n  linux: function() {\n    return _populate() || _linux;\n  },\n\n  /**\n   * Check if the user is running on an iPhone or iPod platform.\n   *\n   * @return bool `true' if the user is running some flavor of the\n   *    iPhone OS.\n   */\n  iphone: function() {\n    return _populate() || _iphone;\n  },\n\n  mobile: function() {\n    return _populate() || (_iphone || _ipad || _android || _mobile);\n  },\n\n  nativeApp: function() {\n    // webviews inside of the native apps\n    return _populate() || _native;\n  },\n\n  android: function() {\n    return _populate() || _android;\n  },\n\n  ipad: function() {\n    return _populate() || _ipad;\n  }\n};\n\nmodule.exports = UserAgent_DEPRECATED;\n","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule isEventSupported\n */\n\n'use strict';\n\nvar ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar useHasFeature;\nif (ExecutionEnvironment.canUseDOM) {\n  useHasFeature =\n    document.implementation &&\n    document.implementation.hasFeature &&\n    // always returns true in newer browsers as per the standard.\n    // @see http://dom.spec.whatwg.org/#dom-domimplementation-hasfeature\n    document.implementation.hasFeature('', '') !== true;\n}\n\n/**\n * Checks if an event is supported in the current execution environment.\n *\n * NOTE: This will not work correctly for non-generic events such as `change`,\n * `reset`, `load`, `error`, and `select`.\n *\n * Borrows from Modernizr.\n *\n * @param {string} eventNameSuffix Event name, e.g. \"click\".\n * @param {?boolean} capture Check if the capture phase is supported.\n * @return {boolean} True if the event is supported.\n * @internal\n * @license Modernizr 3.0.0pre (Custom Build) | MIT\n */\nfunction isEventSupported(eventNameSuffix, capture) {\n  if (!ExecutionEnvironment.canUseDOM ||\n      capture && !('addEventListener' in document)) {\n    return false;\n  }\n\n  var eventName = 'on' + eventNameSuffix;\n  var isSupported = eventName in document;\n\n  if (!isSupported) {\n    var element = document.createElement('div');\n    element.setAttribute(eventName, 'return;');\n    isSupported = typeof element[eventName] === 'function';\n  }\n\n  if (!isSupported && useHasFeature && eventNameSuffix === 'wheel') {\n    // This is the only way to test support for the `wheel` event in IE9+.\n    isSupported = document.implementation.hasFeature('Events.wheel', '3.0');\n  }\n\n  return isSupported;\n}\n\nmodule.exports = isEventSupported;\n","/**\n * Copyright (c) 2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule normalizeWheel\n * @typechecks\n */\n\n'use strict';\n\nvar UserAgent_DEPRECATED = require('./UserAgent_DEPRECATED');\n\nvar isEventSupported = require('./isEventSupported');\n\n\n// Reasonable defaults\nvar PIXEL_STEP  = 10;\nvar LINE_HEIGHT = 40;\nvar PAGE_HEIGHT = 800;\n\n/**\n * Mouse wheel (and 2-finger trackpad) support on the web sucks.  It is\n * complicated, thus this doc is long and (hopefully) detailed enough to answer\n * your questions.\n *\n * If you need to react to the mouse wheel in a predictable way, this code is\n * like your bestest friend. * hugs *\n *\n * As of today, there are 4 DOM event types you can listen to:\n *\n *   'wheel'                -- Chrome(31+), FF(17+), IE(9+)\n *   'mousewheel'           -- Chrome, IE(6+), Opera, Safari\n *   'MozMousePixelScroll'  -- FF(3.5 only!) (2010-2013) -- don't bother!\n *   'DOMMouseScroll'       -- FF(0.9.7+) since 2003\n *\n * So what to do?  The is the best:\n *\n *   normalizeWheel.getEventType();\n *\n * In your event callback, use this code to get sane interpretation of the\n * deltas.  This code will return an object with properties:\n *\n *   spinX   -- normalized spin speed (use for zoom) - x plane\n *   spinY   -- \" - y plane\n *   pixelX  -- normalized distance (to pixels) - x plane\n *   pixelY  -- \" - y plane\n *\n * Wheel values are provided by the browser assuming you are using the wheel to\n * scroll a web page by a number of lines or pixels (or pages).  Values can vary\n * significantly on different platforms and browsers, forgetting that you can\n * scroll at different speeds.  Some devices (like trackpads) emit more events\n * at smaller increments with fine granularity, and some emit massive jumps with\n * linear speed or acceleration.\n *\n * This code does its best to normalize the deltas for you:\n *\n *   - spin is trying to normalize how far the wheel was spun (or trackpad\n *     dragged).  This is super useful for zoom support where you want to\n *     throw away the chunky scroll steps on the PC and make those equal to\n *     the slow and smooth tiny steps on the Mac. Key data: This code tries to\n *     resolve a single slow step on a wheel to 1.\n *\n *   - pixel is normalizing the desired scroll delta in pixel units.  You'll\n *     get the crazy differences between browsers, but at least it'll be in\n *     pixels!\n *\n *   - positive value indicates scrolling DOWN/RIGHT, negative UP/LEFT.  This\n *     should translate to positive value zooming IN, negative zooming OUT.\n *     This matches the newer 'wheel' event.\n *\n * Why are there spinX, spinY (or pixels)?\n *\n *   - spinX is a 2-finger side drag on the trackpad, and a shift + wheel turn\n *     with a mouse.  It results in side-scrolling in the browser by default.\n *\n *   - spinY is what you expect -- it's the classic axis of a mouse wheel.\n *\n *   - I dropped spinZ/pixelZ.  It is supported by the DOM 3 'wheel' event and\n *     probably is by browsers in conjunction with fancy 3D controllers .. but\n *     you know.\n *\n * Implementation info:\n *\n * Examples of 'wheel' event if you scroll slowly (down) by one step with an\n * average mouse:\n *\n *   OS X + Chrome  (mouse)     -    4   pixel delta  (wheelDelta -120)\n *   OS X + Safari  (mouse)     -  N/A   pixel delta  (wheelDelta  -12)\n *   OS X + Firefox (mouse)     -    0.1 line  delta  (wheelDelta  N/A)\n *   Win8 + Chrome  (mouse)     -  100   pixel delta  (wheelDelta -120)\n *   Win8 + Firefox (mouse)     -    3   line  delta  (wheelDelta -120)\n *\n * On the trackpad:\n *\n *   OS X + Chrome  (trackpad)  -    2   pixel delta  (wheelDelta   -6)\n *   OS X + Firefox (trackpad)  -    1   pixel delta  (wheelDelta  N/A)\n *\n * On other/older browsers.. it's more complicated as there can be multiple and\n * also missing delta values.\n *\n * The 'wheel' event is more standard:\n *\n * http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents\n *\n * The basics is that it includes a unit, deltaMode (pixels, lines, pages), and\n * deltaX, deltaY and deltaZ.  Some browsers provide other values to maintain\n * backward compatibility with older events.  Those other values help us\n * better normalize spin speed.  Example of what the browsers provide:\n *\n *                          | event.wheelDelta | event.detail\n *        ------------------+------------------+--------------\n *          Safari v5/OS X  |       -120       |       0\n *          Safari v5/Win7  |       -120       |       0\n *         Chrome v17/OS X  |       -120       |       0\n *         Chrome v17/Win7  |       -120       |       0\n *                IE9/Win7  |       -120       |   undefined\n *         Firefox v4/OS X  |     undefined    |       1\n *         Firefox v4/Win7  |     undefined    |       3\n *\n */\nfunction normalizeWheel(/*object*/ event) /*object*/ {\n  var sX = 0, sY = 0,       // spinX, spinY\n      pX = 0, pY = 0;       // pixelX, pixelY\n\n  // Legacy\n  if ('detail'      in event) { sY = event.detail; }\n  if ('wheelDelta'  in event) { sY = -event.wheelDelta / 120; }\n  if ('wheelDeltaY' in event) { sY = -event.wheelDeltaY / 120; }\n  if ('wheelDeltaX' in event) { sX = -event.wheelDeltaX / 120; }\n\n  // side scrolling on FF with DOMMouseScroll\n  if ( 'axis' in event && event.axis === event.HORIZONTAL_AXIS ) {\n    sX = sY;\n    sY = 0;\n  }\n\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n\n  if ('deltaY' in event) { pY = event.deltaY; }\n  if ('deltaX' in event) { pX = event.deltaX; }\n\n  if ((pX || pY) && event.deltaMode) {\n    if (event.deltaMode == 1) {          // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else {                             // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pX && !sX) { sX = (pX < 1) ? -1 : 1; }\n  if (pY && !sY) { sY = (pY < 1) ? -1 : 1; }\n\n  return { spinX  : sX,\n           spinY  : sY,\n           pixelX : pX,\n           pixelY : pY };\n}\n\n\n/**\n * The best combination if you prefer spinX + spinY normalization.  It favors\n * the older DOMMouseScroll for Firefox, as FF does not include wheelDelta with\n * 'wheel' event, making spin speed determination impossible.\n */\nnormalizeWheel.getEventType = function() /*string*/ {\n  return (UserAgent_DEPRECATED.firefox())\n           ? 'DOMMouseScroll'\n           : (isEventSupported('wheel'))\n               ? 'wheel'\n               : 'mousewheel';\n};\n\nmodule.exports = normalizeWheel;\n","var x=String;\nvar create=function() {return {isColorSupported:false,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x,blackBright:x,redBright:x,greenBright:x,yellowBright:x,blueBright:x,magentaBright:x,cyanBright:x,whiteBright:x,bgBlackBright:x,bgRedBright:x,bgGreenBright:x,bgYellowBright:x,bgBlueBright:x,bgMagentaBright:x,bgCyanBright:x,bgWhiteBright:x}};\nmodule.exports=create();\nmodule.exports.createColors = create;\n","module.exports = function postcssPrefixSelector(options) {\r\n  const prefix = options.prefix;\r\n  const prefixWithSpace = /\\s+$/.test(prefix) ? prefix : `${prefix} `;\r\n  const ignoreFiles = options.ignoreFiles ? [].concat(options.ignoreFiles) : [];\r\n  const includeFiles = options.includeFiles\r\n    ? [].concat(options.includeFiles)\r\n    : [];\r\n\r\n  return function (root) {\r\n    if (\r\n      ignoreFiles.length &&\r\n      root.source.input.file &&\r\n      isFileInArray(root.source.input.file, ignoreFiles)\r\n    ) {\r\n      return;\r\n    }\r\n    if (\r\n      includeFiles.length &&\r\n      root.source.input.file &&\r\n      !isFileInArray(root.source.input.file, includeFiles)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    root.walkRules((rule) => {\r\n      const keyframeRules = [\r\n        'keyframes',\r\n        '-webkit-keyframes',\r\n        '-moz-keyframes',\r\n        '-o-keyframes',\r\n        '-ms-keyframes',\r\n      ];\r\n\r\n      if (rule.parent && keyframeRules.includes(rule.parent.name)) {\r\n        return;\r\n      }\r\n\r\n      rule.selectors = rule.selectors.map((selector) => {\r\n        if (options.exclude && excludeSelector(selector, options.exclude)) {\r\n          return selector;\r\n        }\r\n\r\n        if (options.transform) {\r\n          return options.transform(\r\n            prefix,\r\n            selector,\r\n            prefixWithSpace + selector,\r\n            root.source.input.file,\r\n            rule\r\n          );\r\n        }\r\n\r\n        return prefixWithSpace + selector;\r\n      });\r\n    });\r\n  };\r\n};\r\n\r\nfunction isFileInArray(file, arr) {\r\n  return arr.some((ruleOrString) => {\r\n    if (ruleOrString instanceof RegExp) {\r\n      return ruleOrString.test(file);\r\n    }\r\n\r\n    return file.includes(ruleOrString);\r\n  });\r\n}\r\n\r\nfunction excludeSelector(selector, excludeArr) {\r\n  return excludeArr.some((excludeRule) => {\r\n    if (excludeRule instanceof RegExp) {\r\n      return excludeRule.test(selector);\r\n    }\r\n\r\n    return selector === excludeRule;\r\n  });\r\n}\r\n","'use strict'\n\nlet Container = require('./container')\n\nclass AtRule extends Container {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'atrule'\n  }\n\n  append(...children) {\n    if (!this.proxyOf.nodes) this.nodes = []\n    return super.append(...children)\n  }\n\n  prepend(...children) {\n    if (!this.proxyOf.nodes) this.nodes = []\n    return super.prepend(...children)\n  }\n}\n\nmodule.exports = AtRule\nAtRule.default = AtRule\n\nContainer.registerAtRule(AtRule)\n","'use strict'\n\nlet Node = require('./node')\n\nclass Comment extends Node {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'comment'\n  }\n}\n\nmodule.exports = Comment\nComment.default = Comment\n","'use strict'\n\nlet { isClean, my } = require('./symbols')\nlet Declaration = require('./declaration')\nlet Comment = require('./comment')\nlet Node = require('./node')\n\nlet parse, Rule, AtRule, Root\n\nfunction cleanSource(nodes) {\n  return nodes.map(i => {\n    if (i.nodes) i.nodes = cleanSource(i.nodes)\n    delete i.source\n    return i\n  })\n}\n\nfunction markDirtyUp(node) {\n  node[isClean] = false\n  if (node.proxyOf.nodes) {\n    for (let i of node.proxyOf.nodes) {\n      markDirtyUp(i)\n    }\n  }\n}\n\nclass Container extends Node {\n  append(...children) {\n    for (let child of children) {\n      let nodes = this.normalize(child, this.last)\n      for (let node of nodes) this.proxyOf.nodes.push(node)\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  cleanRaws(keepBetween) {\n    super.cleanRaws(keepBetween)\n    if (this.nodes) {\n      for (let node of this.nodes) node.cleanRaws(keepBetween)\n    }\n  }\n\n  each(callback) {\n    if (!this.proxyOf.nodes) return undefined\n    let iterator = this.getIterator()\n\n    let index, result\n    while (this.indexes[iterator] < this.proxyOf.nodes.length) {\n      index = this.indexes[iterator]\n      result = callback(this.proxyOf.nodes[index], index)\n      if (result === false) break\n\n      this.indexes[iterator] += 1\n    }\n\n    delete this.indexes[iterator]\n    return result\n  }\n\n  every(condition) {\n    return this.nodes.every(condition)\n  }\n\n  getIterator() {\n    if (!this.lastEach) this.lastEach = 0\n    if (!this.indexes) this.indexes = {}\n\n    this.lastEach += 1\n    let iterator = this.lastEach\n    this.indexes[iterator] = 0\n\n    return iterator\n  }\n\n  getProxyProcessor() {\n    return {\n      get(node, prop) {\n        if (prop === 'proxyOf') {\n          return node\n        } else if (!node[prop]) {\n          return node[prop]\n        } else if (\n          prop === 'each' ||\n          (typeof prop === 'string' && prop.startsWith('walk'))\n        ) {\n          return (...args) => {\n            return node[prop](\n              ...args.map(i => {\n                if (typeof i === 'function') {\n                  return (child, index) => i(child.toProxy(), index)\n                } else {\n                  return i\n                }\n              })\n            )\n          }\n        } else if (prop === 'every' || prop === 'some') {\n          return cb => {\n            return node[prop]((child, ...other) =>\n              cb(child.toProxy(), ...other)\n            )\n          }\n        } else if (prop === 'root') {\n          return () => node.root().toProxy()\n        } else if (prop === 'nodes') {\n          return node.nodes.map(i => i.toProxy())\n        } else if (prop === 'first' || prop === 'last') {\n          return node[prop].toProxy()\n        } else {\n          return node[prop]\n        }\n      },\n\n      set(node, prop, value) {\n        if (node[prop] === value) return true\n        node[prop] = value\n        if (prop === 'name' || prop === 'params' || prop === 'selector') {\n          node.markDirty()\n        }\n        return true\n      }\n    }\n  }\n\n  index(child) {\n    if (typeof child === 'number') return child\n    if (child.proxyOf) child = child.proxyOf\n    return this.proxyOf.nodes.indexOf(child)\n  }\n\n  insertAfter(exist, add) {\n    let existIndex = this.index(exist)\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex]).reverse()\n    existIndex = this.index(exist)\n    for (let node of nodes) this.proxyOf.nodes.splice(existIndex + 1, 0, node)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (existIndex < index) {\n        this.indexes[id] = index + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  insertBefore(exist, add) {\n    let existIndex = this.index(exist)\n    let type = existIndex === 0 ? 'prepend' : false\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex], type).reverse()\n    existIndex = this.index(exist)\n    for (let node of nodes) this.proxyOf.nodes.splice(existIndex, 0, node)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (existIndex <= index) {\n        this.indexes[id] = index + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  normalize(nodes, sample) {\n    if (typeof nodes === 'string') {\n      nodes = cleanSource(parse(nodes).nodes)\n    } else if (typeof nodes === 'undefined') {\n      nodes = []\n    } else if (Array.isArray(nodes)) {\n      nodes = nodes.slice(0)\n      for (let i of nodes) {\n        if (i.parent) i.parent.removeChild(i, 'ignore')\n      }\n    } else if (nodes.type === 'root' && this.type !== 'document') {\n      nodes = nodes.nodes.slice(0)\n      for (let i of nodes) {\n        if (i.parent) i.parent.removeChild(i, 'ignore')\n      }\n    } else if (nodes.type) {\n      nodes = [nodes]\n    } else if (nodes.prop) {\n      if (typeof nodes.value === 'undefined') {\n        throw new Error('Value field is missed in node creation')\n      } else if (typeof nodes.value !== 'string') {\n        nodes.value = String(nodes.value)\n      }\n      nodes = [new Declaration(nodes)]\n    } else if (nodes.selector) {\n      nodes = [new Rule(nodes)]\n    } else if (nodes.name) {\n      nodes = [new AtRule(nodes)]\n    } else if (nodes.text) {\n      nodes = [new Comment(nodes)]\n    } else {\n      throw new Error('Unknown node type in node creation')\n    }\n\n    let processed = nodes.map(i => {\n      /* c8 ignore next */\n      if (!i[my]) Container.rebuild(i)\n      i = i.proxyOf\n      if (i.parent) i.parent.removeChild(i)\n      if (i[isClean]) markDirtyUp(i)\n      if (typeof i.raws.before === 'undefined') {\n        if (sample && typeof sample.raws.before !== 'undefined') {\n          i.raws.before = sample.raws.before.replace(/\\S/g, '')\n        }\n      }\n      i.parent = this.proxyOf\n      return i\n    })\n\n    return processed\n  }\n\n  prepend(...children) {\n    children = children.reverse()\n    for (let child of children) {\n      let nodes = this.normalize(child, this.first, 'prepend').reverse()\n      for (let node of nodes) this.proxyOf.nodes.unshift(node)\n      for (let id in this.indexes) {\n        this.indexes[id] = this.indexes[id] + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  push(child) {\n    child.parent = this\n    this.proxyOf.nodes.push(child)\n    return this\n  }\n\n  removeAll() {\n    for (let node of this.proxyOf.nodes) node.parent = undefined\n    this.proxyOf.nodes = []\n\n    this.markDirty()\n\n    return this\n  }\n\n  removeChild(child) {\n    child = this.index(child)\n    this.proxyOf.nodes[child].parent = undefined\n    this.proxyOf.nodes.splice(child, 1)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (index >= child) {\n        this.indexes[id] = index - 1\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  replaceValues(pattern, opts, callback) {\n    if (!callback) {\n      callback = opts\n      opts = {}\n    }\n\n    this.walkDecls(decl => {\n      if (opts.props && !opts.props.includes(decl.prop)) return\n      if (opts.fast && !decl.value.includes(opts.fast)) return\n\n      decl.value = decl.value.replace(pattern, callback)\n    })\n\n    this.markDirty()\n\n    return this\n  }\n\n  some(condition) {\n    return this.nodes.some(condition)\n  }\n\n  walk(callback) {\n    return this.each((child, i) => {\n      let result\n      try {\n        result = callback(child, i)\n      } catch (e) {\n        throw child.addToError(e)\n      }\n      if (result !== false && child.walk) {\n        result = child.walk(callback)\n      }\n\n      return result\n    })\n  }\n\n  walkAtRules(name, callback) {\n    if (!callback) {\n      callback = name\n      return this.walk((child, i) => {\n        if (child.type === 'atrule') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (name instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'atrule' && name.test(child.name)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'atrule' && child.name === name) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkComments(callback) {\n    return this.walk((child, i) => {\n      if (child.type === 'comment') {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkDecls(prop, callback) {\n    if (!callback) {\n      callback = prop\n      return this.walk((child, i) => {\n        if (child.type === 'decl') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (prop instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'decl' && prop.test(child.prop)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'decl' && child.prop === prop) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkRules(selector, callback) {\n    if (!callback) {\n      callback = selector\n\n      return this.walk((child, i) => {\n        if (child.type === 'rule') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (selector instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'rule' && selector.test(child.selector)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'rule' && child.selector === selector) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  get first() {\n    if (!this.proxyOf.nodes) return undefined\n    return this.proxyOf.nodes[0]\n  }\n\n  get last() {\n    if (!this.proxyOf.nodes) return undefined\n    return this.proxyOf.nodes[this.proxyOf.nodes.length - 1]\n  }\n}\n\nContainer.registerParse = dependant => {\n  parse = dependant\n}\n\nContainer.registerRule = dependant => {\n  Rule = dependant\n}\n\nContainer.registerAtRule = dependant => {\n  AtRule = dependant\n}\n\nContainer.registerRoot = dependant => {\n  Root = dependant\n}\n\nmodule.exports = Container\nContainer.default = Container\n\n/* c8 ignore start */\nContainer.rebuild = node => {\n  if (node.type === 'atrule') {\n    Object.setPrototypeOf(node, AtRule.prototype)\n  } else if (node.type === 'rule') {\n    Object.setPrototypeOf(node, Rule.prototype)\n  } else if (node.type === 'decl') {\n    Object.setPrototypeOf(node, Declaration.prototype)\n  } else if (node.type === 'comment') {\n    Object.setPrototypeOf(node, Comment.prototype)\n  } else if (node.type === 'root') {\n    Object.setPrototypeOf(node, Root.prototype)\n  }\n\n  node[my] = true\n\n  if (node.nodes) {\n    node.nodes.forEach(child => {\n      Container.rebuild(child)\n    })\n  }\n}\n/* c8 ignore stop */\n","'use strict'\n\nlet pico = require('picocolors')\n\nlet terminalHighlight = require('./terminal-highlight')\n\nclass CssSyntaxError extends Error {\n  constructor(message, line, column, source, file, plugin) {\n    super(message)\n    this.name = 'CssSyntaxError'\n    this.reason = message\n\n    if (file) {\n      this.file = file\n    }\n    if (source) {\n      this.source = source\n    }\n    if (plugin) {\n      this.plugin = plugin\n    }\n    if (typeof line !== 'undefined' && typeof column !== 'undefined') {\n      if (typeof line === 'number') {\n        this.line = line\n        this.column = column\n      } else {\n        this.line = line.line\n        this.column = line.column\n        this.endLine = column.line\n        this.endColumn = column.column\n      }\n    }\n\n    this.setMessage()\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, CssSyntaxError)\n    }\n  }\n\n  setMessage() {\n    this.message = this.plugin ? this.plugin + ': ' : ''\n    this.message += this.file ? this.file : '<css input>'\n    if (typeof this.line !== 'undefined') {\n      this.message += ':' + this.line + ':' + this.column\n    }\n    this.message += ': ' + this.reason\n  }\n\n  showSourceCode(color) {\n    if (!this.source) return ''\n\n    let css = this.source\n    if (color == null) color = pico.isColorSupported\n    if (terminalHighlight) {\n      if (color) css = terminalHighlight(css)\n    }\n\n    let lines = css.split(/\\r?\\n/)\n    let start = Math.max(this.line - 3, 0)\n    let end = Math.min(this.line + 2, lines.length)\n\n    let maxWidth = String(end).length\n\n    let mark, aside\n    if (color) {\n      let { bold, gray, red } = pico.createColors(true)\n      mark = text => bold(red(text))\n      aside = text => gray(text)\n    } else {\n      mark = aside = str => str\n    }\n\n    return lines\n      .slice(start, end)\n      .map((line, index) => {\n        let number = start + 1 + index\n        let gutter = ' ' + (' ' + number).slice(-maxWidth) + ' | '\n        if (number === this.line) {\n          let spacing =\n            aside(gutter.replace(/\\d/g, ' ')) +\n            line.slice(0, this.column - 1).replace(/[^\\t]/g, ' ')\n          return mark('>') + aside(gutter) + line + '\\n ' + spacing + mark('^')\n        }\n        return ' ' + aside(gutter) + line\n      })\n      .join('\\n')\n  }\n\n  toString() {\n    let code = this.showSourceCode()\n    if (code) {\n      code = '\\n\\n' + code + '\\n'\n    }\n    return this.name + ': ' + this.message + code\n  }\n}\n\nmodule.exports = CssSyntaxError\nCssSyntaxError.default = CssSyntaxError\n","'use strict'\n\nlet Node = require('./node')\n\nclass Declaration extends Node {\n  constructor(defaults) {\n    if (\n      defaults &&\n      typeof defaults.value !== 'undefined' &&\n      typeof defaults.value !== 'string'\n    ) {\n      defaults = { ...defaults, value: String(defaults.value) }\n    }\n    super(defaults)\n    this.type = 'decl'\n  }\n\n  get variable() {\n    return this.prop.startsWith('--') || this.prop[0] === '$'\n  }\n}\n\nmodule.exports = Declaration\nDeclaration.default = Declaration\n","'use strict'\n\nlet Container = require('./container')\n\nlet LazyResult, Processor\n\nclass Document extends Container {\n  constructor(defaults) {\n    // type needs to be passed to super, otherwise child roots won't be normalized correctly\n    super({ type: 'document', ...defaults })\n\n    if (!this.nodes) {\n      this.nodes = []\n    }\n  }\n\n  toResult(opts = {}) {\n    let lazy = new LazyResult(new Processor(), this, opts)\n\n    return lazy.stringify()\n  }\n}\n\nDocument.registerLazyResult = dependant => {\n  LazyResult = dependant\n}\n\nDocument.registerProcessor = dependant => {\n  Processor = dependant\n}\n\nmodule.exports = Document\nDocument.default = Document\n","'use strict'\n\nlet { SourceMapConsumer, SourceMapGenerator } = require('source-map-js')\nlet { fileURLToPath, pathToFileURL } = require('url')\nlet { isAbsolute, resolve } = require('path')\nlet { nanoid } = require('nanoid/non-secure')\n\nlet terminalHighlight = require('./terminal-highlight')\nlet CssSyntaxError = require('./css-syntax-error')\nlet PreviousMap = require('./previous-map')\n\nlet fromOffsetCache = Symbol('fromOffsetCache')\n\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator)\nlet pathAvailable = Boolean(resolve && isAbsolute)\n\nclass Input {\n  constructor(css, opts = {}) {\n    if (\n      css === null ||\n      typeof css === 'undefined' ||\n      (typeof css === 'object' && !css.toString)\n    ) {\n      throw new Error(`PostCSS received ${css} instead of CSS string`)\n    }\n\n    this.css = css.toString()\n\n    if (this.css[0] === '\\uFEFF' || this.css[0] === '\\uFFFE') {\n      this.hasBOM = true\n      this.css = this.css.slice(1)\n    } else {\n      this.hasBOM = false\n    }\n\n    if (opts.from) {\n      if (\n        !pathAvailable ||\n        /^\\w+:\\/\\//.test(opts.from) ||\n        isAbsolute(opts.from)\n      ) {\n        this.file = opts.from\n      } else {\n        this.file = resolve(opts.from)\n      }\n    }\n\n    if (pathAvailable && sourceMapAvailable) {\n      let map = new PreviousMap(this.css, opts)\n      if (map.text) {\n        this.map = map\n        let file = map.consumer().file\n        if (!this.file && file) this.file = this.mapResolve(file)\n      }\n    }\n\n    if (!this.file) {\n      this.id = '<input css ' + nanoid(6) + '>'\n    }\n    if (this.map) this.map.file = this.from\n  }\n\n  error(message, line, column, opts = {}) {\n    let result, endLine, endColumn\n\n    if (line && typeof line === 'object') {\n      let start = line\n      let end = column\n      if (typeof start.offset === 'number') {\n        let pos = this.fromOffset(start.offset)\n        line = pos.line\n        column = pos.col\n      } else {\n        line = start.line\n        column = start.column\n      }\n      if (typeof end.offset === 'number') {\n        let pos = this.fromOffset(end.offset)\n        endLine = pos.line\n        endColumn = pos.col\n      } else {\n        endLine = end.line\n        endColumn = end.column\n      }\n    } else if (!column) {\n      let pos = this.fromOffset(line)\n      line = pos.line\n      column = pos.col\n    }\n\n    let origin = this.origin(line, column, endLine, endColumn)\n    if (origin) {\n      result = new CssSyntaxError(\n        message,\n        origin.endLine === undefined\n          ? origin.line\n          : { column: origin.column, line: origin.line },\n        origin.endLine === undefined\n          ? origin.column\n          : { column: origin.endColumn, line: origin.endLine },\n        origin.source,\n        origin.file,\n        opts.plugin\n      )\n    } else {\n      result = new CssSyntaxError(\n        message,\n        endLine === undefined ? line : { column, line },\n        endLine === undefined ? column : { column: endColumn, line: endLine },\n        this.css,\n        this.file,\n        opts.plugin\n      )\n    }\n\n    result.input = { column, endColumn, endLine, line, source: this.css }\n    if (this.file) {\n      if (pathToFileURL) {\n        result.input.url = pathToFileURL(this.file).toString()\n      }\n      result.input.file = this.file\n    }\n\n    return result\n  }\n\n  fromOffset(offset) {\n    let lastLine, lineToIndex\n    if (!this[fromOffsetCache]) {\n      let lines = this.css.split('\\n')\n      lineToIndex = new Array(lines.length)\n      let prevIndex = 0\n\n      for (let i = 0, l = lines.length; i < l; i++) {\n        lineToIndex[i] = prevIndex\n        prevIndex += lines[i].length + 1\n      }\n\n      this[fromOffsetCache] = lineToIndex\n    } else {\n      lineToIndex = this[fromOffsetCache]\n    }\n    lastLine = lineToIndex[lineToIndex.length - 1]\n\n    let min = 0\n    if (offset >= lastLine) {\n      min = lineToIndex.length - 1\n    } else {\n      let max = lineToIndex.length - 2\n      let mid\n      while (min < max) {\n        mid = min + ((max - min) >> 1)\n        if (offset < lineToIndex[mid]) {\n          max = mid - 1\n        } else if (offset >= lineToIndex[mid + 1]) {\n          min = mid + 1\n        } else {\n          min = mid\n          break\n        }\n      }\n    }\n    return {\n      col: offset - lineToIndex[min] + 1,\n      line: min + 1\n    }\n  }\n\n  mapResolve(file) {\n    if (/^\\w+:\\/\\//.test(file)) {\n      return file\n    }\n    return resolve(this.map.consumer().sourceRoot || this.map.root || '.', file)\n  }\n\n  origin(line, column, endLine, endColumn) {\n    if (!this.map) return false\n    let consumer = this.map.consumer()\n\n    let from = consumer.originalPositionFor({ column, line })\n    if (!from.source) return false\n\n    let to\n    if (typeof endLine === 'number') {\n      to = consumer.originalPositionFor({ column: endColumn, line: endLine })\n    }\n\n    let fromUrl\n\n    if (isAbsolute(from.source)) {\n      fromUrl = pathToFileURL(from.source)\n    } else {\n      fromUrl = new URL(\n        from.source,\n        this.map.consumer().sourceRoot || pathToFileURL(this.map.mapFile)\n      )\n    }\n\n    let result = {\n      column: from.column,\n      endColumn: to && to.column,\n      endLine: to && to.line,\n      line: from.line,\n      url: fromUrl.toString()\n    }\n\n    if (fromUrl.protocol === 'file:') {\n      if (fileURLToPath) {\n        result.file = fileURLToPath(fromUrl)\n      } else {\n        /* c8 ignore next 2 */\n        throw new Error(`file: protocol is not available in this PostCSS build`)\n      }\n    }\n\n    let source = consumer.sourceContentFor(from.source)\n    if (source) result.source = source\n\n    return result\n  }\n\n  toJSON() {\n    let json = {}\n    for (let name of ['hasBOM', 'css', 'file', 'id']) {\n      if (this[name] != null) {\n        json[name] = this[name]\n      }\n    }\n    if (this.map) {\n      json.map = { ...this.map }\n      if (json.map.consumerCache) {\n        json.map.consumerCache = undefined\n      }\n    }\n    return json\n  }\n\n  get from() {\n    return this.file || this.id\n  }\n}\n\nmodule.exports = Input\nInput.default = Input\n\nif (terminalHighlight && terminalHighlight.registerInput) {\n  terminalHighlight.registerInput(Input)\n}\n","'use strict'\n\nlet { isClean, my } = require('./symbols')\nlet MapGenerator = require('./map-generator')\nlet stringify = require('./stringify')\nlet Container = require('./container')\nlet Document = require('./document')\nlet warnOnce = require('./warn-once')\nlet Result = require('./result')\nlet parse = require('./parse')\nlet Root = require('./root')\n\nconst TYPE_TO_CLASS_NAME = {\n  atrule: 'AtRule',\n  comment: 'Comment',\n  decl: 'Declaration',\n  document: 'Document',\n  root: 'Root',\n  rule: 'Rule'\n}\n\nconst PLUGIN_PROPS = {\n  AtRule: true,\n  AtRuleExit: true,\n  Comment: true,\n  CommentExit: true,\n  Declaration: true,\n  DeclarationExit: true,\n  Document: true,\n  DocumentExit: true,\n  Once: true,\n  OnceExit: true,\n  postcssPlugin: true,\n  prepare: true,\n  Root: true,\n  RootExit: true,\n  Rule: true,\n  RuleExit: true\n}\n\nconst NOT_VISITORS = {\n  Once: true,\n  postcssPlugin: true,\n  prepare: true\n}\n\nconst CHILDREN = 0\n\nfunction isPromise(obj) {\n  return typeof obj === 'object' && typeof obj.then === 'function'\n}\n\nfunction getEvents(node) {\n  let key = false\n  let type = TYPE_TO_CLASS_NAME[node.type]\n  if (node.type === 'decl') {\n    key = node.prop.toLowerCase()\n  } else if (node.type === 'atrule') {\n    key = node.name.toLowerCase()\n  }\n\n  if (key && node.append) {\n    return [\n      type,\n      type + '-' + key,\n      CHILDREN,\n      type + 'Exit',\n      type + 'Exit-' + key\n    ]\n  } else if (key) {\n    return [type, type + '-' + key, type + 'Exit', type + 'Exit-' + key]\n  } else if (node.append) {\n    return [type, CHILDREN, type + 'Exit']\n  } else {\n    return [type, type + 'Exit']\n  }\n}\n\nfunction toStack(node) {\n  let events\n  if (node.type === 'document') {\n    events = ['Document', CHILDREN, 'DocumentExit']\n  } else if (node.type === 'root') {\n    events = ['Root', CHILDREN, 'RootExit']\n  } else {\n    events = getEvents(node)\n  }\n\n  return {\n    eventIndex: 0,\n    events,\n    iterator: 0,\n    node,\n    visitorIndex: 0,\n    visitors: []\n  }\n}\n\nfunction cleanMarks(node) {\n  node[isClean] = false\n  if (node.nodes) node.nodes.forEach(i => cleanMarks(i))\n  return node\n}\n\nlet postcss = {}\n\nclass LazyResult {\n  constructor(processor, css, opts) {\n    this.stringified = false\n    this.processed = false\n\n    let root\n    if (\n      typeof css === 'object' &&\n      css !== null &&\n      (css.type === 'root' || css.type === 'document')\n    ) {\n      root = cleanMarks(css)\n    } else if (css instanceof LazyResult || css instanceof Result) {\n      root = cleanMarks(css.root)\n      if (css.map) {\n        if (typeof opts.map === 'undefined') opts.map = {}\n        if (!opts.map.inline) opts.map.inline = false\n        opts.map.prev = css.map\n      }\n    } else {\n      let parser = parse\n      if (opts.syntax) parser = opts.syntax.parse\n      if (opts.parser) parser = opts.parser\n      if (parser.parse) parser = parser.parse\n\n      try {\n        root = parser(css, opts)\n      } catch (error) {\n        this.processed = true\n        this.error = error\n      }\n\n      if (root && !root[my]) {\n        /* c8 ignore next 2 */\n        Container.rebuild(root)\n      }\n    }\n\n    this.result = new Result(processor, root, opts)\n    this.helpers = { ...postcss, postcss, result: this.result }\n    this.plugins = this.processor.plugins.map(plugin => {\n      if (typeof plugin === 'object' && plugin.prepare) {\n        return { ...plugin, ...plugin.prepare(this.result) }\n      } else {\n        return plugin\n      }\n    })\n  }\n\n  async() {\n    if (this.error) return Promise.reject(this.error)\n    if (this.processed) return Promise.resolve(this.result)\n    if (!this.processing) {\n      this.processing = this.runAsync()\n    }\n    return this.processing\n  }\n\n  catch(onRejected) {\n    return this.async().catch(onRejected)\n  }\n\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally)\n  }\n\n  getAsyncError() {\n    throw new Error('Use process(css).then(cb) to work with async plugins')\n  }\n\n  handleError(error, node) {\n    let plugin = this.result.lastPlugin\n    try {\n      if (node) node.addToError(error)\n      this.error = error\n      if (error.name === 'CssSyntaxError' && !error.plugin) {\n        error.plugin = plugin.postcssPlugin\n        error.setMessage()\n      } else if (plugin.postcssVersion) {\n        if (process.env.NODE_ENV !== 'production') {\n          let pluginName = plugin.postcssPlugin\n          let pluginVer = plugin.postcssVersion\n          let runtimeVer = this.result.processor.version\n          let a = pluginVer.split('.')\n          let b = runtimeVer.split('.')\n\n          if (a[0] !== b[0] || parseInt(a[1]) > parseInt(b[1])) {\n            // eslint-disable-next-line no-console\n            console.error(\n              'Unknown error from PostCSS plugin. Your current PostCSS ' +\n                'version is ' +\n                runtimeVer +\n                ', but ' +\n                pluginName +\n                ' uses ' +\n                pluginVer +\n                '. Perhaps this is the source of the error below.'\n            )\n          }\n        }\n      }\n    } catch (err) {\n      /* c8 ignore next 3 */\n      // eslint-disable-next-line no-console\n      if (console && console.error) console.error(err)\n    }\n    return error\n  }\n\n  prepareVisitors() {\n    this.listeners = {}\n    let add = (plugin, type, cb) => {\n      if (!this.listeners[type]) this.listeners[type] = []\n      this.listeners[type].push([plugin, cb])\n    }\n    for (let plugin of this.plugins) {\n      if (typeof plugin === 'object') {\n        for (let event in plugin) {\n          if (!PLUGIN_PROPS[event] && /^[A-Z]/.test(event)) {\n            throw new Error(\n              `Unknown event ${event} in ${plugin.postcssPlugin}. ` +\n                `Try to update PostCSS (${this.processor.version} now).`\n            )\n          }\n          if (!NOT_VISITORS[event]) {\n            if (typeof plugin[event] === 'object') {\n              for (let filter in plugin[event]) {\n                if (filter === '*') {\n                  add(plugin, event, plugin[event][filter])\n                } else {\n                  add(\n                    plugin,\n                    event + '-' + filter.toLowerCase(),\n                    plugin[event][filter]\n                  )\n                }\n              }\n            } else if (typeof plugin[event] === 'function') {\n              add(plugin, event, plugin[event])\n            }\n          }\n        }\n      }\n    }\n    this.hasListener = Object.keys(this.listeners).length > 0\n  }\n\n  async runAsync() {\n    this.plugin = 0\n    for (let i = 0; i < this.plugins.length; i++) {\n      let plugin = this.plugins[i]\n      let promise = this.runOnRoot(plugin)\n      if (isPromise(promise)) {\n        try {\n          await promise\n        } catch (error) {\n          throw this.handleError(error)\n        }\n      }\n    }\n\n    this.prepareVisitors()\n    if (this.hasListener) {\n      let root = this.result.root\n      while (!root[isClean]) {\n        root[isClean] = true\n        let stack = [toStack(root)]\n        while (stack.length > 0) {\n          let promise = this.visitTick(stack)\n          if (isPromise(promise)) {\n            try {\n              await promise\n            } catch (e) {\n              let node = stack[stack.length - 1].node\n              throw this.handleError(e, node)\n            }\n          }\n        }\n      }\n\n      if (this.listeners.OnceExit) {\n        for (let [plugin, visitor] of this.listeners.OnceExit) {\n          this.result.lastPlugin = plugin\n          try {\n            if (root.type === 'document') {\n              let roots = root.nodes.map(subRoot =>\n                visitor(subRoot, this.helpers)\n              )\n\n              await Promise.all(roots)\n            } else {\n              await visitor(root, this.helpers)\n            }\n          } catch (e) {\n            throw this.handleError(e)\n          }\n        }\n      }\n    }\n\n    this.processed = true\n    return this.stringify()\n  }\n\n  runOnRoot(plugin) {\n    this.result.lastPlugin = plugin\n    try {\n      if (typeof plugin === 'object' && plugin.Once) {\n        if (this.result.root.type === 'document') {\n          let roots = this.result.root.nodes.map(root =>\n            plugin.Once(root, this.helpers)\n          )\n\n          if (isPromise(roots[0])) {\n            return Promise.all(roots)\n          }\n\n          return roots\n        }\n\n        return plugin.Once(this.result.root, this.helpers)\n      } else if (typeof plugin === 'function') {\n        return plugin(this.result.root, this.result)\n      }\n    } catch (error) {\n      throw this.handleError(error)\n    }\n  }\n\n  stringify() {\n    if (this.error) throw this.error\n    if (this.stringified) return this.result\n    this.stringified = true\n\n    this.sync()\n\n    let opts = this.result.opts\n    let str = stringify\n    if (opts.syntax) str = opts.syntax.stringify\n    if (opts.stringifier) str = opts.stringifier\n    if (str.stringify) str = str.stringify\n\n    let map = new MapGenerator(str, this.result.root, this.result.opts)\n    let data = map.generate()\n    this.result.css = data[0]\n    this.result.map = data[1]\n\n    return this.result\n  }\n\n  sync() {\n    if (this.error) throw this.error\n    if (this.processed) return this.result\n    this.processed = true\n\n    if (this.processing) {\n      throw this.getAsyncError()\n    }\n\n    for (let plugin of this.plugins) {\n      let promise = this.runOnRoot(plugin)\n      if (isPromise(promise)) {\n        throw this.getAsyncError()\n      }\n    }\n\n    this.prepareVisitors()\n    if (this.hasListener) {\n      let root = this.result.root\n      while (!root[isClean]) {\n        root[isClean] = true\n        this.walkSync(root)\n      }\n      if (this.listeners.OnceExit) {\n        if (root.type === 'document') {\n          for (let subRoot of root.nodes) {\n            this.visitSync(this.listeners.OnceExit, subRoot)\n          }\n        } else {\n          this.visitSync(this.listeners.OnceExit, root)\n        }\n      }\n    }\n\n    return this.result\n  }\n\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!('from' in this.opts)) {\n        warnOnce(\n          'Without `from` option PostCSS could generate wrong source map ' +\n            'and will not find Browserslist config. Set it to CSS file path ' +\n            'or to `undefined` to prevent this warning.'\n        )\n      }\n    }\n    return this.async().then(onFulfilled, onRejected)\n  }\n\n  toString() {\n    return this.css\n  }\n\n  visitSync(visitors, node) {\n    for (let [plugin, visitor] of visitors) {\n      this.result.lastPlugin = plugin\n      let promise\n      try {\n        promise = visitor(node, this.helpers)\n      } catch (e) {\n        throw this.handleError(e, node.proxyOf)\n      }\n      if (node.type !== 'root' && node.type !== 'document' && !node.parent) {\n        return true\n      }\n      if (isPromise(promise)) {\n        throw this.getAsyncError()\n      }\n    }\n  }\n\n  visitTick(stack) {\n    let visit = stack[stack.length - 1]\n    let { node, visitors } = visit\n\n    if (node.type !== 'root' && node.type !== 'document' && !node.parent) {\n      stack.pop()\n      return\n    }\n\n    if (visitors.length > 0 && visit.visitorIndex < visitors.length) {\n      let [plugin, visitor] = visitors[visit.visitorIndex]\n      visit.visitorIndex += 1\n      if (visit.visitorIndex === visitors.length) {\n        visit.visitors = []\n        visit.visitorIndex = 0\n      }\n      this.result.lastPlugin = plugin\n      try {\n        return visitor(node.toProxy(), this.helpers)\n      } catch (e) {\n        throw this.handleError(e, node)\n      }\n    }\n\n    if (visit.iterator !== 0) {\n      let iterator = visit.iterator\n      let child\n      while ((child = node.nodes[node.indexes[iterator]])) {\n        node.indexes[iterator] += 1\n        if (!child[isClean]) {\n          child[isClean] = true\n          stack.push(toStack(child))\n          return\n        }\n      }\n      visit.iterator = 0\n      delete node.indexes[iterator]\n    }\n\n    let events = visit.events\n    while (visit.eventIndex < events.length) {\n      let event = events[visit.eventIndex]\n      visit.eventIndex += 1\n      if (event === CHILDREN) {\n        if (node.nodes && node.nodes.length) {\n          node[isClean] = true\n          visit.iterator = node.getIterator()\n        }\n        return\n      } else if (this.listeners[event]) {\n        visit.visitors = this.listeners[event]\n        return\n      }\n    }\n    stack.pop()\n  }\n\n  walkSync(node) {\n    node[isClean] = true\n    let events = getEvents(node)\n    for (let event of events) {\n      if (event === CHILDREN) {\n        if (node.nodes) {\n          node.each(child => {\n            if (!child[isClean]) this.walkSync(child)\n          })\n        }\n      } else {\n        let visitors = this.listeners[event]\n        if (visitors) {\n          if (this.visitSync(visitors, node.toProxy())) return\n        }\n      }\n    }\n  }\n\n  warnings() {\n    return this.sync().warnings()\n  }\n\n  get content() {\n    return this.stringify().content\n  }\n\n  get css() {\n    return this.stringify().css\n  }\n\n  get map() {\n    return this.stringify().map\n  }\n\n  get messages() {\n    return this.sync().messages\n  }\n\n  get opts() {\n    return this.result.opts\n  }\n\n  get processor() {\n    return this.result.processor\n  }\n\n  get root() {\n    return this.sync().root\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'LazyResult'\n  }\n}\n\nLazyResult.registerPostcss = dependant => {\n  postcss = dependant\n}\n\nmodule.exports = LazyResult\nLazyResult.default = LazyResult\n\nRoot.registerLazyResult(LazyResult)\nDocument.registerLazyResult(LazyResult)\n","'use strict'\n\nlet list = {\n  comma(string) {\n    return list.split(string, [','], true)\n  },\n\n  space(string) {\n    let spaces = [' ', '\\n', '\\t']\n    return list.split(string, spaces)\n  },\n\n  split(string, separators, last) {\n    let array = []\n    let current = ''\n    let split = false\n\n    let func = 0\n    let inQuote = false\n    let prevQuote = ''\n    let escape = false\n\n    for (let letter of string) {\n      if (escape) {\n        escape = false\n      } else if (letter === '\\\\') {\n        escape = true\n      } else if (inQuote) {\n        if (letter === prevQuote) {\n          inQuote = false\n        }\n      } else if (letter === '\"' || letter === \"'\") {\n        inQuote = true\n        prevQuote = letter\n      } else if (letter === '(') {\n        func += 1\n      } else if (letter === ')') {\n        if (func > 0) func -= 1\n      } else if (func === 0) {\n        if (separators.includes(letter)) split = true\n      }\n\n      if (split) {\n        if (current !== '') array.push(current.trim())\n        current = ''\n        split = false\n      } else {\n        current += letter\n      }\n    }\n\n    if (last || current !== '') array.push(current.trim())\n    return array\n  }\n}\n\nmodule.exports = list\nlist.default = list\n","'use strict'\n\nlet { SourceMapConsumer, SourceMapGenerator } = require('source-map-js')\nlet { dirname, relative, resolve, sep } = require('path')\nlet { pathToFileURL } = require('url')\n\nlet Input = require('./input')\n\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator)\nlet pathAvailable = Boolean(dirname && resolve && relative && sep)\n\nclass MapGenerator {\n  constructor(stringify, root, opts, cssString) {\n    this.stringify = stringify\n    this.mapOpts = opts.map || {}\n    this.root = root\n    this.opts = opts\n    this.css = cssString\n    this.originalCSS = cssString\n    this.usesFileUrls = !this.mapOpts.from && this.mapOpts.absolute\n\n    this.memoizedFileURLs = new Map()\n    this.memoizedPaths = new Map()\n    this.memoizedURLs = new Map()\n  }\n\n  addAnnotation() {\n    let content\n\n    if (this.isInline()) {\n      content =\n        'data:application/json;base64,' + this.toBase64(this.map.toString())\n    } else if (typeof this.mapOpts.annotation === 'string') {\n      content = this.mapOpts.annotation\n    } else if (typeof this.mapOpts.annotation === 'function') {\n      content = this.mapOpts.annotation(this.opts.to, this.root)\n    } else {\n      content = this.outputFile() + '.map'\n    }\n    let eol = '\\n'\n    if (this.css.includes('\\r\\n')) eol = '\\r\\n'\n\n    this.css += eol + '/*# sourceMappingURL=' + content + ' */'\n  }\n\n  applyPrevMaps() {\n    for (let prev of this.previous()) {\n      let from = this.toUrl(this.path(prev.file))\n      let root = prev.root || dirname(prev.file)\n      let map\n\n      if (this.mapOpts.sourcesContent === false) {\n        map = new SourceMapConsumer(prev.text)\n        if (map.sourcesContent) {\n          map.sourcesContent = null\n        }\n      } else {\n        map = prev.consumer()\n      }\n\n      this.map.applySourceMap(map, from, this.toUrl(this.path(root)))\n    }\n  }\n\n  clearAnnotation() {\n    if (this.mapOpts.annotation === false) return\n\n    if (this.root) {\n      let node\n      for (let i = this.root.nodes.length - 1; i >= 0; i--) {\n        node = this.root.nodes[i]\n        if (node.type !== 'comment') continue\n        if (node.text.indexOf('# sourceMappingURL=') === 0) {\n          this.root.removeChild(i)\n        }\n      }\n    } else if (this.css) {\n      this.css = this.css.replace(/\\n*?\\/\\*#[\\S\\s]*?\\*\\/$/gm, '')\n    }\n  }\n\n  generate() {\n    this.clearAnnotation()\n    if (pathAvailable && sourceMapAvailable && this.isMap()) {\n      return this.generateMap()\n    } else {\n      let result = ''\n      this.stringify(this.root, i => {\n        result += i\n      })\n      return [result]\n    }\n  }\n\n  generateMap() {\n    if (this.root) {\n      this.generateString()\n    } else if (this.previous().length === 1) {\n      let prev = this.previous()[0].consumer()\n      prev.file = this.outputFile()\n      this.map = SourceMapGenerator.fromSourceMap(prev, {\n        ignoreInvalidMapping: true\n      })\n    } else {\n      this.map = new SourceMapGenerator({\n        file: this.outputFile(),\n        ignoreInvalidMapping: true\n      })\n      this.map.addMapping({\n        generated: { column: 0, line: 1 },\n        original: { column: 0, line: 1 },\n        source: this.opts.from\n          ? this.toUrl(this.path(this.opts.from))\n          : '<no source>'\n      })\n    }\n\n    if (this.isSourcesContent()) this.setSourcesContent()\n    if (this.root && this.previous().length > 0) this.applyPrevMaps()\n    if (this.isAnnotation()) this.addAnnotation()\n\n    if (this.isInline()) {\n      return [this.css]\n    } else {\n      return [this.css, this.map]\n    }\n  }\n\n  generateString() {\n    this.css = ''\n    this.map = new SourceMapGenerator({\n      file: this.outputFile(),\n      ignoreInvalidMapping: true\n    })\n\n    let line = 1\n    let column = 1\n\n    let noSource = '<no source>'\n    let mapping = {\n      generated: { column: 0, line: 0 },\n      original: { column: 0, line: 0 },\n      source: ''\n    }\n\n    let lines, last\n    this.stringify(this.root, (str, node, type) => {\n      this.css += str\n\n      if (node && type !== 'end') {\n        mapping.generated.line = line\n        mapping.generated.column = column - 1\n        if (node.source && node.source.start) {\n          mapping.source = this.sourcePath(node)\n          mapping.original.line = node.source.start.line\n          mapping.original.column = node.source.start.column - 1\n          this.map.addMapping(mapping)\n        } else {\n          mapping.source = noSource\n          mapping.original.line = 1\n          mapping.original.column = 0\n          this.map.addMapping(mapping)\n        }\n      }\n\n      lines = str.match(/\\n/g)\n      if (lines) {\n        line += lines.length\n        last = str.lastIndexOf('\\n')\n        column = str.length - last\n      } else {\n        column += str.length\n      }\n\n      if (node && type !== 'start') {\n        let p = node.parent || { raws: {} }\n        let childless =\n          node.type === 'decl' || (node.type === 'atrule' && !node.nodes)\n        if (!childless || node !== p.last || p.raws.semicolon) {\n          if (node.source && node.source.end) {\n            mapping.source = this.sourcePath(node)\n            mapping.original.line = node.source.end.line\n            mapping.original.column = node.source.end.column - 1\n            mapping.generated.line = line\n            mapping.generated.column = column - 2\n            this.map.addMapping(mapping)\n          } else {\n            mapping.source = noSource\n            mapping.original.line = 1\n            mapping.original.column = 0\n            mapping.generated.line = line\n            mapping.generated.column = column - 1\n            this.map.addMapping(mapping)\n          }\n        }\n      }\n    })\n  }\n\n  isAnnotation() {\n    if (this.isInline()) {\n      return true\n    }\n    if (typeof this.mapOpts.annotation !== 'undefined') {\n      return this.mapOpts.annotation\n    }\n    if (this.previous().length) {\n      return this.previous().some(i => i.annotation)\n    }\n    return true\n  }\n\n  isInline() {\n    if (typeof this.mapOpts.inline !== 'undefined') {\n      return this.mapOpts.inline\n    }\n\n    let annotation = this.mapOpts.annotation\n    if (typeof annotation !== 'undefined' && annotation !== true) {\n      return false\n    }\n\n    if (this.previous().length) {\n      return this.previous().some(i => i.inline)\n    }\n    return true\n  }\n\n  isMap() {\n    if (typeof this.opts.map !== 'undefined') {\n      return !!this.opts.map\n    }\n    return this.previous().length > 0\n  }\n\n  isSourcesContent() {\n    if (typeof this.mapOpts.sourcesContent !== 'undefined') {\n      return this.mapOpts.sourcesContent\n    }\n    if (this.previous().length) {\n      return this.previous().some(i => i.withContent())\n    }\n    return true\n  }\n\n  outputFile() {\n    if (this.opts.to) {\n      return this.path(this.opts.to)\n    } else if (this.opts.from) {\n      return this.path(this.opts.from)\n    } else {\n      return 'to.css'\n    }\n  }\n\n  path(file) {\n    if (this.mapOpts.absolute) return file\n    if (file.charCodeAt(0) === 60 /* `<` */) return file\n    if (/^\\w+:\\/\\//.test(file)) return file\n    let cached = this.memoizedPaths.get(file)\n    if (cached) return cached\n\n    let from = this.opts.to ? dirname(this.opts.to) : '.'\n\n    if (typeof this.mapOpts.annotation === 'string') {\n      from = dirname(resolve(from, this.mapOpts.annotation))\n    }\n\n    let path = relative(from, file)\n    this.memoizedPaths.set(file, path)\n\n    return path\n  }\n\n  previous() {\n    if (!this.previousMaps) {\n      this.previousMaps = []\n      if (this.root) {\n        this.root.walk(node => {\n          if (node.source && node.source.input.map) {\n            let map = node.source.input.map\n            if (!this.previousMaps.includes(map)) {\n              this.previousMaps.push(map)\n            }\n          }\n        })\n      } else {\n        let input = new Input(this.originalCSS, this.opts)\n        if (input.map) this.previousMaps.push(input.map)\n      }\n    }\n\n    return this.previousMaps\n  }\n\n  setSourcesContent() {\n    let already = {}\n    if (this.root) {\n      this.root.walk(node => {\n        if (node.source) {\n          let from = node.source.input.from\n          if (from && !already[from]) {\n            already[from] = true\n            let fromUrl = this.usesFileUrls\n              ? this.toFileUrl(from)\n              : this.toUrl(this.path(from))\n            this.map.setSourceContent(fromUrl, node.source.input.css)\n          }\n        }\n      })\n    } else if (this.css) {\n      let from = this.opts.from\n        ? this.toUrl(this.path(this.opts.from))\n        : '<no source>'\n      this.map.setSourceContent(from, this.css)\n    }\n  }\n\n  sourcePath(node) {\n    if (this.mapOpts.from) {\n      return this.toUrl(this.mapOpts.from)\n    } else if (this.usesFileUrls) {\n      return this.toFileUrl(node.source.input.from)\n    } else {\n      return this.toUrl(this.path(node.source.input.from))\n    }\n  }\n\n  toBase64(str) {\n    if (Buffer) {\n      return Buffer.from(str).toString('base64')\n    } else {\n      return window.btoa(unescape(encodeURIComponent(str)))\n    }\n  }\n\n  toFileUrl(path) {\n    let cached = this.memoizedFileURLs.get(path)\n    if (cached) return cached\n\n    if (pathToFileURL) {\n      let fileURL = pathToFileURL(path).toString()\n      this.memoizedFileURLs.set(path, fileURL)\n\n      return fileURL\n    } else {\n      throw new Error(\n        '`map.absolute` option is not available in this PostCSS build'\n      )\n    }\n  }\n\n  toUrl(path) {\n    let cached = this.memoizedURLs.get(path)\n    if (cached) return cached\n\n    if (sep === '\\\\') {\n      path = path.replace(/\\\\/g, '/')\n    }\n\n    let url = encodeURI(path).replace(/[#?]/g, encodeURIComponent)\n    this.memoizedURLs.set(path, url)\n\n    return url\n  }\n}\n\nmodule.exports = MapGenerator\n","'use strict'\n\nlet MapGenerator = require('./map-generator')\nlet stringify = require('./stringify')\nlet warnOnce = require('./warn-once')\nlet parse = require('./parse')\nconst Result = require('./result')\n\nclass NoWorkResult {\n  constructor(processor, css, opts) {\n    css = css.toString()\n    this.stringified = false\n\n    this._processor = processor\n    this._css = css\n    this._opts = opts\n    this._map = undefined\n    let root\n\n    let str = stringify\n    this.result = new Result(this._processor, root, this._opts)\n    this.result.css = css\n\n    let self = this\n    Object.defineProperty(this.result, 'root', {\n      get() {\n        return self.root\n      }\n    })\n\n    let map = new MapGenerator(str, root, this._opts, css)\n    if (map.isMap()) {\n      let [generatedCSS, generatedMap] = map.generate()\n      if (generatedCSS) {\n        this.result.css = generatedCSS\n      }\n      if (generatedMap) {\n        this.result.map = generatedMap\n      }\n    } else {\n      map.clearAnnotation()\n      this.result.css = map.css\n    }\n  }\n\n  async() {\n    if (this.error) return Promise.reject(this.error)\n    return Promise.resolve(this.result)\n  }\n\n  catch(onRejected) {\n    return this.async().catch(onRejected)\n  }\n\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally)\n  }\n\n  sync() {\n    if (this.error) throw this.error\n    return this.result\n  }\n\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!('from' in this._opts)) {\n        warnOnce(\n          'Without `from` option PostCSS could generate wrong source map ' +\n            'and will not find Browserslist config. Set it to CSS file path ' +\n            'or to `undefined` to prevent this warning.'\n        )\n      }\n    }\n\n    return this.async().then(onFulfilled, onRejected)\n  }\n\n  toString() {\n    return this._css\n  }\n\n  warnings() {\n    return []\n  }\n\n  get content() {\n    return this.result.css\n  }\n\n  get css() {\n    return this.result.css\n  }\n\n  get map() {\n    return this.result.map\n  }\n\n  get messages() {\n    return []\n  }\n\n  get opts() {\n    return this.result.opts\n  }\n\n  get processor() {\n    return this.result.processor\n  }\n\n  get root() {\n    if (this._root) {\n      return this._root\n    }\n\n    let root\n    let parser = parse\n\n    try {\n      root = parser(this._css, this._opts)\n    } catch (error) {\n      this.error = error\n    }\n\n    if (this.error) {\n      throw this.error\n    } else {\n      this._root = root\n      return root\n    }\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'NoWorkResult'\n  }\n}\n\nmodule.exports = NoWorkResult\nNoWorkResult.default = NoWorkResult\n","'use strict'\n\nlet { isClean, my } = require('./symbols')\nlet CssSyntaxError = require('./css-syntax-error')\nlet Stringifier = require('./stringifier')\nlet stringify = require('./stringify')\n\nfunction cloneNode(obj, parent) {\n  let cloned = new obj.constructor()\n\n  for (let i in obj) {\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) {\n      /* c8 ignore next 2 */\n      continue\n    }\n    if (i === 'proxyCache') continue\n    let value = obj[i]\n    let type = typeof value\n\n    if (i === 'parent' && type === 'object') {\n      if (parent) cloned[i] = parent\n    } else if (i === 'source') {\n      cloned[i] = value\n    } else if (Array.isArray(value)) {\n      cloned[i] = value.map(j => cloneNode(j, cloned))\n    } else {\n      if (type === 'object' && value !== null) value = cloneNode(value)\n      cloned[i] = value\n    }\n  }\n\n  return cloned\n}\n\nclass Node {\n  constructor(defaults = {}) {\n    this.raws = {}\n    this[isClean] = false\n    this[my] = true\n\n    for (let name in defaults) {\n      if (name === 'nodes') {\n        this.nodes = []\n        for (let node of defaults[name]) {\n          if (typeof node.clone === 'function') {\n            this.append(node.clone())\n          } else {\n            this.append(node)\n          }\n        }\n      } else {\n        this[name] = defaults[name]\n      }\n    }\n  }\n\n  addToError(error) {\n    error.postcssNode = this\n    if (error.stack && this.source && /\\n\\s{4}at /.test(error.stack)) {\n      let s = this.source\n      error.stack = error.stack.replace(\n        /\\n\\s{4}at /,\n        `$&${s.input.from}:${s.start.line}:${s.start.column}$&`\n      )\n    }\n    return error\n  }\n\n  after(add) {\n    this.parent.insertAfter(this, add)\n    return this\n  }\n\n  assign(overrides = {}) {\n    for (let name in overrides) {\n      this[name] = overrides[name]\n    }\n    return this\n  }\n\n  before(add) {\n    this.parent.insertBefore(this, add)\n    return this\n  }\n\n  cleanRaws(keepBetween) {\n    delete this.raws.before\n    delete this.raws.after\n    if (!keepBetween) delete this.raws.between\n  }\n\n  clone(overrides = {}) {\n    let cloned = cloneNode(this)\n    for (let name in overrides) {\n      cloned[name] = overrides[name]\n    }\n    return cloned\n  }\n\n  cloneAfter(overrides = {}) {\n    let cloned = this.clone(overrides)\n    this.parent.insertAfter(this, cloned)\n    return cloned\n  }\n\n  cloneBefore(overrides = {}) {\n    let cloned = this.clone(overrides)\n    this.parent.insertBefore(this, cloned)\n    return cloned\n  }\n\n  error(message, opts = {}) {\n    if (this.source) {\n      let { end, start } = this.rangeBy(opts)\n      return this.source.input.error(\n        message,\n        { column: start.column, line: start.line },\n        { column: end.column, line: end.line },\n        opts\n      )\n    }\n    return new CssSyntaxError(message)\n  }\n\n  getProxyProcessor() {\n    return {\n      get(node, prop) {\n        if (prop === 'proxyOf') {\n          return node\n        } else if (prop === 'root') {\n          return () => node.root().toProxy()\n        } else {\n          return node[prop]\n        }\n      },\n\n      set(node, prop, value) {\n        if (node[prop] === value) return true\n        node[prop] = value\n        if (\n          prop === 'prop' ||\n          prop === 'value' ||\n          prop === 'name' ||\n          prop === 'params' ||\n          prop === 'important' ||\n          /* c8 ignore next */\n          prop === 'text'\n        ) {\n          node.markDirty()\n        }\n        return true\n      }\n    }\n  }\n\n  markDirty() {\n    if (this[isClean]) {\n      this[isClean] = false\n      let next = this\n      while ((next = next.parent)) {\n        next[isClean] = false\n      }\n    }\n  }\n\n  next() {\n    if (!this.parent) return undefined\n    let index = this.parent.index(this)\n    return this.parent.nodes[index + 1]\n  }\n\n  positionBy(opts, stringRepresentation) {\n    let pos = this.source.start\n    if (opts.index) {\n      pos = this.positionInside(opts.index, stringRepresentation)\n    } else if (opts.word) {\n      stringRepresentation = this.toString()\n      let index = stringRepresentation.indexOf(opts.word)\n      if (index !== -1) pos = this.positionInside(index, stringRepresentation)\n    }\n    return pos\n  }\n\n  positionInside(index, stringRepresentation) {\n    let string = stringRepresentation || this.toString()\n    let column = this.source.start.column\n    let line = this.source.start.line\n\n    for (let i = 0; i < index; i++) {\n      if (string[i] === '\\n') {\n        column = 1\n        line += 1\n      } else {\n        column += 1\n      }\n    }\n\n    return { column, line }\n  }\n\n  prev() {\n    if (!this.parent) return undefined\n    let index = this.parent.index(this)\n    return this.parent.nodes[index - 1]\n  }\n\n  rangeBy(opts) {\n    let start = {\n      column: this.source.start.column,\n      line: this.source.start.line\n    }\n    let end = this.source.end\n      ? {\n        column: this.source.end.column + 1,\n        line: this.source.end.line\n      }\n      : {\n        column: start.column + 1,\n        line: start.line\n      }\n\n    if (opts.word) {\n      let stringRepresentation = this.toString()\n      let index = stringRepresentation.indexOf(opts.word)\n      if (index !== -1) {\n        start = this.positionInside(index, stringRepresentation)\n        end = this.positionInside(index + opts.word.length, stringRepresentation)\n      }\n    } else {\n      if (opts.start) {\n        start = {\n          column: opts.start.column,\n          line: opts.start.line\n        }\n      } else if (opts.index) {\n        start = this.positionInside(opts.index)\n      }\n\n      if (opts.end) {\n        end = {\n          column: opts.end.column,\n          line: opts.end.line\n        }\n      } else if (typeof opts.endIndex === 'number') {\n        end = this.positionInside(opts.endIndex)\n      } else if (opts.index) {\n        end = this.positionInside(opts.index + 1)\n      }\n    }\n\n    if (\n      end.line < start.line ||\n      (end.line === start.line && end.column <= start.column)\n    ) {\n      end = { column: start.column + 1, line: start.line }\n    }\n\n    return { end, start }\n  }\n\n  raw(prop, defaultType) {\n    let str = new Stringifier()\n    return str.raw(this, prop, defaultType)\n  }\n\n  remove() {\n    if (this.parent) {\n      this.parent.removeChild(this)\n    }\n    this.parent = undefined\n    return this\n  }\n\n  replaceWith(...nodes) {\n    if (this.parent) {\n      let bookmark = this\n      let foundSelf = false\n      for (let node of nodes) {\n        if (node === this) {\n          foundSelf = true\n        } else if (foundSelf) {\n          this.parent.insertAfter(bookmark, node)\n          bookmark = node\n        } else {\n          this.parent.insertBefore(bookmark, node)\n        }\n      }\n\n      if (!foundSelf) {\n        this.remove()\n      }\n    }\n\n    return this\n  }\n\n  root() {\n    let result = this\n    while (result.parent && result.parent.type !== 'document') {\n      result = result.parent\n    }\n    return result\n  }\n\n  toJSON(_, inputs) {\n    let fixed = {}\n    let emitInputs = inputs == null\n    inputs = inputs || new Map()\n    let inputsNextIndex = 0\n\n    for (let name in this) {\n      if (!Object.prototype.hasOwnProperty.call(this, name)) {\n        /* c8 ignore next 2 */\n        continue\n      }\n      if (name === 'parent' || name === 'proxyCache') continue\n      let value = this[name]\n\n      if (Array.isArray(value)) {\n        fixed[name] = value.map(i => {\n          if (typeof i === 'object' && i.toJSON) {\n            return i.toJSON(null, inputs)\n          } else {\n            return i\n          }\n        })\n      } else if (typeof value === 'object' && value.toJSON) {\n        fixed[name] = value.toJSON(null, inputs)\n      } else if (name === 'source') {\n        let inputId = inputs.get(value.input)\n        if (inputId == null) {\n          inputId = inputsNextIndex\n          inputs.set(value.input, inputsNextIndex)\n          inputsNextIndex++\n        }\n        fixed[name] = {\n          end: value.end,\n          inputId,\n          start: value.start\n        }\n      } else {\n        fixed[name] = value\n      }\n    }\n\n    if (emitInputs) {\n      fixed.inputs = [...inputs.keys()].map(input => input.toJSON())\n    }\n\n    return fixed\n  }\n\n  toProxy() {\n    if (!this.proxyCache) {\n      this.proxyCache = new Proxy(this, this.getProxyProcessor())\n    }\n    return this.proxyCache\n  }\n\n  toString(stringifier = stringify) {\n    if (stringifier.stringify) stringifier = stringifier.stringify\n    let result = ''\n    stringifier(this, i => {\n      result += i\n    })\n    return result\n  }\n\n  warn(result, text, opts) {\n    let data = { node: this }\n    for (let i in opts) data[i] = opts[i]\n    return result.warn(text, data)\n  }\n\n  get proxyOf() {\n    return this\n  }\n}\n\nmodule.exports = Node\nNode.default = Node\n","'use strict'\n\nlet Container = require('./container')\nlet Parser = require('./parser')\nlet Input = require('./input')\n\nfunction parse(css, opts) {\n  let input = new Input(css, opts)\n  let parser = new Parser(input)\n  try {\n    parser.parse()\n  } catch (e) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (e.name === 'CssSyntaxError' && opts && opts.from) {\n        if (/\\.scss$/i.test(opts.from)) {\n          e.message +=\n            '\\nYou tried to parse SCSS with ' +\n            'the standard CSS parser; ' +\n            'try again with the postcss-scss parser'\n        } else if (/\\.sass/i.test(opts.from)) {\n          e.message +=\n            '\\nYou tried to parse Sass with ' +\n            'the standard CSS parser; ' +\n            'try again with the postcss-sass parser'\n        } else if (/\\.less$/i.test(opts.from)) {\n          e.message +=\n            '\\nYou tried to parse Less with ' +\n            'the standard CSS parser; ' +\n            'try again with the postcss-less parser'\n        }\n      }\n    }\n    throw e\n  }\n\n  return parser.root\n}\n\nmodule.exports = parse\nparse.default = parse\n\nContainer.registerParse(parse)\n","'use strict'\n\nlet Declaration = require('./declaration')\nlet tokenizer = require('./tokenize')\nlet Comment = require('./comment')\nlet AtRule = require('./at-rule')\nlet Root = require('./root')\nlet Rule = require('./rule')\n\nconst SAFE_COMMENT_NEIGHBOR = {\n  empty: true,\n  space: true\n}\n\nfunction findLastWithPosition(tokens) {\n  for (let i = tokens.length - 1; i >= 0; i--) {\n    let token = tokens[i]\n    let pos = token[3] || token[2]\n    if (pos) return pos\n  }\n}\n\nclass Parser {\n  constructor(input) {\n    this.input = input\n\n    this.root = new Root()\n    this.current = this.root\n    this.spaces = ''\n    this.semicolon = false\n\n    this.createTokenizer()\n    this.root.source = { input, start: { column: 1, line: 1, offset: 0 } }\n  }\n\n  atrule(token) {\n    let node = new AtRule()\n    node.name = token[1].slice(1)\n    if (node.name === '') {\n      this.unnamedAtrule(node, token)\n    }\n    this.init(node, token[2])\n\n    let type\n    let prev\n    let shift\n    let last = false\n    let open = false\n    let params = []\n    let brackets = []\n\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken()\n      type = token[0]\n\n      if (type === '(' || type === '[') {\n        brackets.push(type === '(' ? ')' : ']')\n      } else if (type === '{' && brackets.length > 0) {\n        brackets.push('}')\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop()\n      }\n\n      if (brackets.length === 0) {\n        if (type === ';') {\n          node.source.end = this.getPosition(token[2])\n          node.source.end.offset++\n          this.semicolon = true\n          break\n        } else if (type === '{') {\n          open = true\n          break\n        } else if (type === '}') {\n          if (params.length > 0) {\n            shift = params.length - 1\n            prev = params[shift]\n            while (prev && prev[0] === 'space') {\n              prev = params[--shift]\n            }\n            if (prev) {\n              node.source.end = this.getPosition(prev[3] || prev[2])\n              node.source.end.offset++\n            }\n          }\n          this.end(token)\n          break\n        } else {\n          params.push(token)\n        }\n      } else {\n        params.push(token)\n      }\n\n      if (this.tokenizer.endOfFile()) {\n        last = true\n        break\n      }\n    }\n\n    node.raws.between = this.spacesAndCommentsFromEnd(params)\n    if (params.length) {\n      node.raws.afterName = this.spacesAndCommentsFromStart(params)\n      this.raw(node, 'params', params)\n      if (last) {\n        token = params[params.length - 1]\n        node.source.end = this.getPosition(token[3] || token[2])\n        node.source.end.offset++\n        this.spaces = node.raws.between\n        node.raws.between = ''\n      }\n    } else {\n      node.raws.afterName = ''\n      node.params = ''\n    }\n\n    if (open) {\n      node.nodes = []\n      this.current = node\n    }\n  }\n\n  checkMissedSemicolon(tokens) {\n    let colon = this.colon(tokens)\n    if (colon === false) return\n\n    let founded = 0\n    let token\n    for (let j = colon - 1; j >= 0; j--) {\n      token = tokens[j]\n      if (token[0] !== 'space') {\n        founded += 1\n        if (founded === 2) break\n      }\n    }\n    // If the token is a word, e.g. `!important`, `red` or any other valid property's value.\n    // Then we need to return the colon after that word token. [3] is the \"end\" colon of that word.\n    // And because we need it after that one we do +1 to get the next one.\n    throw this.input.error(\n      'Missed semicolon',\n      token[0] === 'word' ? token[3] + 1 : token[2]\n    )\n  }\n\n  colon(tokens) {\n    let brackets = 0\n    let token, type, prev\n    for (let [i, element] of tokens.entries()) {\n      token = element\n      type = token[0]\n\n      if (type === '(') {\n        brackets += 1\n      }\n      if (type === ')') {\n        brackets -= 1\n      }\n      if (brackets === 0 && type === ':') {\n        if (!prev) {\n          this.doubleColon(token)\n        } else if (prev[0] === 'word' && prev[1] === 'progid') {\n          continue\n        } else {\n          return i\n        }\n      }\n\n      prev = token\n    }\n    return false\n  }\n\n  comment(token) {\n    let node = new Comment()\n    this.init(node, token[2])\n    node.source.end = this.getPosition(token[3] || token[2])\n    node.source.end.offset++\n\n    let text = token[1].slice(2, -2)\n    if (/^\\s*$/.test(text)) {\n      node.text = ''\n      node.raws.left = text\n      node.raws.right = ''\n    } else {\n      let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/)\n      node.text = match[2]\n      node.raws.left = match[1]\n      node.raws.right = match[3]\n    }\n  }\n\n  createTokenizer() {\n    this.tokenizer = tokenizer(this.input)\n  }\n\n  decl(tokens, customProperty) {\n    let node = new Declaration()\n    this.init(node, tokens[0][2])\n\n    let last = tokens[tokens.length - 1]\n    if (last[0] === ';') {\n      this.semicolon = true\n      tokens.pop()\n    }\n\n    node.source.end = this.getPosition(\n      last[3] || last[2] || findLastWithPosition(tokens)\n    )\n    node.source.end.offset++\n\n    while (tokens[0][0] !== 'word') {\n      if (tokens.length === 1) this.unknownWord(tokens)\n      node.raws.before += tokens.shift()[1]\n    }\n    node.source.start = this.getPosition(tokens[0][2])\n\n    node.prop = ''\n    while (tokens.length) {\n      let type = tokens[0][0]\n      if (type === ':' || type === 'space' || type === 'comment') {\n        break\n      }\n      node.prop += tokens.shift()[1]\n    }\n\n    node.raws.between = ''\n\n    let token\n    while (tokens.length) {\n      token = tokens.shift()\n\n      if (token[0] === ':') {\n        node.raws.between += token[1]\n        break\n      } else {\n        if (token[0] === 'word' && /\\w/.test(token[1])) {\n          this.unknownWord([token])\n        }\n        node.raws.between += token[1]\n      }\n    }\n\n    if (node.prop[0] === '_' || node.prop[0] === '*') {\n      node.raws.before += node.prop[0]\n      node.prop = node.prop.slice(1)\n    }\n\n    let firstSpaces = []\n    let next\n    while (tokens.length) {\n      next = tokens[0][0]\n      if (next !== 'space' && next !== 'comment') break\n      firstSpaces.push(tokens.shift())\n    }\n\n    this.precheckMissedSemicolon(tokens)\n\n    for (let i = tokens.length - 1; i >= 0; i--) {\n      token = tokens[i]\n      if (token[1].toLowerCase() === '!important') {\n        node.important = true\n        let string = this.stringFrom(tokens, i)\n        string = this.spacesFromEnd(tokens) + string\n        if (string !== ' !important') node.raws.important = string\n        break\n      } else if (token[1].toLowerCase() === 'important') {\n        let cache = tokens.slice(0)\n        let str = ''\n        for (let j = i; j > 0; j--) {\n          let type = cache[j][0]\n          if (str.trim().indexOf('!') === 0 && type !== 'space') {\n            break\n          }\n          str = cache.pop()[1] + str\n        }\n        if (str.trim().indexOf('!') === 0) {\n          node.important = true\n          node.raws.important = str\n          tokens = cache\n        }\n      }\n\n      if (token[0] !== 'space' && token[0] !== 'comment') {\n        break\n      }\n    }\n\n    let hasWord = tokens.some(i => i[0] !== 'space' && i[0] !== 'comment')\n\n    if (hasWord) {\n      node.raws.between += firstSpaces.map(i => i[1]).join('')\n      firstSpaces = []\n    }\n    this.raw(node, 'value', firstSpaces.concat(tokens), customProperty)\n\n    if (node.value.includes(':') && !customProperty) {\n      this.checkMissedSemicolon(tokens)\n    }\n  }\n\n  doubleColon(token) {\n    throw this.input.error(\n      'Double colon',\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    )\n  }\n\n  emptyRule(token) {\n    let node = new Rule()\n    this.init(node, token[2])\n    node.selector = ''\n    node.raws.between = ''\n    this.current = node\n  }\n\n  end(token) {\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon\n    }\n    this.semicolon = false\n\n    this.current.raws.after = (this.current.raws.after || '') + this.spaces\n    this.spaces = ''\n\n    if (this.current.parent) {\n      this.current.source.end = this.getPosition(token[2])\n      this.current.source.end.offset++\n      this.current = this.current.parent\n    } else {\n      this.unexpectedClose(token)\n    }\n  }\n\n  endFile() {\n    if (this.current.parent) this.unclosedBlock()\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon\n    }\n    this.current.raws.after = (this.current.raws.after || '') + this.spaces\n    this.root.source.end = this.getPosition(this.tokenizer.position())\n  }\n\n  freeSemicolon(token) {\n    this.spaces += token[1]\n    if (this.current.nodes) {\n      let prev = this.current.nodes[this.current.nodes.length - 1]\n      if (prev && prev.type === 'rule' && !prev.raws.ownSemicolon) {\n        prev.raws.ownSemicolon = this.spaces\n        this.spaces = ''\n      }\n    }\n  }\n\n  // Helpers\n\n  getPosition(offset) {\n    let pos = this.input.fromOffset(offset)\n    return {\n      column: pos.col,\n      line: pos.line,\n      offset\n    }\n  }\n\n  init(node, offset) {\n    this.current.push(node)\n    node.source = {\n      input: this.input,\n      start: this.getPosition(offset)\n    }\n    node.raws.before = this.spaces\n    this.spaces = ''\n    if (node.type !== 'comment') this.semicolon = false\n  }\n\n  other(start) {\n    let end = false\n    let type = null\n    let colon = false\n    let bracket = null\n    let brackets = []\n    let customProperty = start[1].startsWith('--')\n\n    let tokens = []\n    let token = start\n    while (token) {\n      type = token[0]\n      tokens.push(token)\n\n      if (type === '(' || type === '[') {\n        if (!bracket) bracket = token\n        brackets.push(type === '(' ? ')' : ']')\n      } else if (customProperty && colon && type === '{') {\n        if (!bracket) bracket = token\n        brackets.push('}')\n      } else if (brackets.length === 0) {\n        if (type === ';') {\n          if (colon) {\n            this.decl(tokens, customProperty)\n            return\n          } else {\n            break\n          }\n        } else if (type === '{') {\n          this.rule(tokens)\n          return\n        } else if (type === '}') {\n          this.tokenizer.back(tokens.pop())\n          end = true\n          break\n        } else if (type === ':') {\n          colon = true\n        }\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop()\n        if (brackets.length === 0) bracket = null\n      }\n\n      token = this.tokenizer.nextToken()\n    }\n\n    if (this.tokenizer.endOfFile()) end = true\n    if (brackets.length > 0) this.unclosedBracket(bracket)\n\n    if (end && colon) {\n      if (!customProperty) {\n        while (tokens.length) {\n          token = tokens[tokens.length - 1][0]\n          if (token !== 'space' && token !== 'comment') break\n          this.tokenizer.back(tokens.pop())\n        }\n      }\n      this.decl(tokens, customProperty)\n    } else {\n      this.unknownWord(tokens)\n    }\n  }\n\n  parse() {\n    let token\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken()\n\n      switch (token[0]) {\n        case 'space':\n          this.spaces += token[1]\n          break\n\n        case ';':\n          this.freeSemicolon(token)\n          break\n\n        case '}':\n          this.end(token)\n          break\n\n        case 'comment':\n          this.comment(token)\n          break\n\n        case 'at-word':\n          this.atrule(token)\n          break\n\n        case '{':\n          this.emptyRule(token)\n          break\n\n        default:\n          this.other(token)\n          break\n      }\n    }\n    this.endFile()\n  }\n\n  precheckMissedSemicolon(/* tokens */) {\n    // Hook for Safe Parser\n  }\n\n  raw(node, prop, tokens, customProperty) {\n    let token, type\n    let length = tokens.length\n    let value = ''\n    let clean = true\n    let next, prev\n\n    for (let i = 0; i < length; i += 1) {\n      token = tokens[i]\n      type = token[0]\n      if (type === 'space' && i === length - 1 && !customProperty) {\n        clean = false\n      } else if (type === 'comment') {\n        prev = tokens[i - 1] ? tokens[i - 1][0] : 'empty'\n        next = tokens[i + 1] ? tokens[i + 1][0] : 'empty'\n        if (!SAFE_COMMENT_NEIGHBOR[prev] && !SAFE_COMMENT_NEIGHBOR[next]) {\n          if (value.slice(-1) === ',') {\n            clean = false\n          } else {\n            value += token[1]\n          }\n        } else {\n          clean = false\n        }\n      } else {\n        value += token[1]\n      }\n    }\n    if (!clean) {\n      let raw = tokens.reduce((all, i) => all + i[1], '')\n      node.raws[prop] = { raw, value }\n    }\n    node[prop] = value\n  }\n\n  rule(tokens) {\n    tokens.pop()\n\n    let node = new Rule()\n    this.init(node, tokens[0][2])\n\n    node.raws.between = this.spacesAndCommentsFromEnd(tokens)\n    this.raw(node, 'selector', tokens)\n    this.current = node\n  }\n\n  spacesAndCommentsFromEnd(tokens) {\n    let lastTokenType\n    let spaces = ''\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0]\n      if (lastTokenType !== 'space' && lastTokenType !== 'comment') break\n      spaces = tokens.pop()[1] + spaces\n    }\n    return spaces\n  }\n\n  // Errors\n\n  spacesAndCommentsFromStart(tokens) {\n    let next\n    let spaces = ''\n    while (tokens.length) {\n      next = tokens[0][0]\n      if (next !== 'space' && next !== 'comment') break\n      spaces += tokens.shift()[1]\n    }\n    return spaces\n  }\n\n  spacesFromEnd(tokens) {\n    let lastTokenType\n    let spaces = ''\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0]\n      if (lastTokenType !== 'space') break\n      spaces = tokens.pop()[1] + spaces\n    }\n    return spaces\n  }\n\n  stringFrom(tokens, from) {\n    let result = ''\n    for (let i = from; i < tokens.length; i++) {\n      result += tokens[i][1]\n    }\n    tokens.splice(from, tokens.length - from)\n    return result\n  }\n\n  unclosedBlock() {\n    let pos = this.current.source.start\n    throw this.input.error('Unclosed block', pos.line, pos.column)\n  }\n\n  unclosedBracket(bracket) {\n    throw this.input.error(\n      'Unclosed bracket',\n      { offset: bracket[2] },\n      { offset: bracket[2] + 1 }\n    )\n  }\n\n  unexpectedClose(token) {\n    throw this.input.error(\n      'Unexpected }',\n      { offset: token[2] },\n      { offset: token[2] + 1 }\n    )\n  }\n\n  unknownWord(tokens) {\n    throw this.input.error(\n      'Unknown word',\n      { offset: tokens[0][2] },\n      { offset: tokens[0][2] + tokens[0][1].length }\n    )\n  }\n\n  unnamedAtrule(node, token) {\n    throw this.input.error(\n      'At-rule without name',\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    )\n  }\n}\n\nmodule.exports = Parser\n","'use strict'\n\nlet { SourceMapConsumer, SourceMapGenerator } = require('source-map-js')\nlet { existsSync, readFileSync } = require('fs')\nlet { dirname, join } = require('path')\n\nfunction fromBase64(str) {\n  if (Buffer) {\n    return Buffer.from(str, 'base64').toString()\n  } else {\n    /* c8 ignore next 2 */\n    return window.atob(str)\n  }\n}\n\nclass PreviousMap {\n  constructor(css, opts) {\n    if (opts.map === false) return\n    this.loadAnnotation(css)\n    this.inline = this.startWith(this.annotation, 'data:')\n\n    let prev = opts.map ? opts.map.prev : undefined\n    let text = this.loadMap(opts.from, prev)\n    if (!this.mapFile && opts.from) {\n      this.mapFile = opts.from\n    }\n    if (this.mapFile) this.root = dirname(this.mapFile)\n    if (text) this.text = text\n  }\n\n  consumer() {\n    if (!this.consumerCache) {\n      this.consumerCache = new SourceMapConsumer(this.text)\n    }\n    return this.consumerCache\n  }\n\n  decodeInline(text) {\n    let baseCharsetUri = /^data:application\\/json;charset=utf-?8;base64,/\n    let baseUri = /^data:application\\/json;base64,/\n    let charsetUri = /^data:application\\/json;charset=utf-?8,/\n    let uri = /^data:application\\/json,/\n\n    if (charsetUri.test(text) || uri.test(text)) {\n      return decodeURIComponent(text.substr(RegExp.lastMatch.length))\n    }\n\n    if (baseCharsetUri.test(text) || baseUri.test(text)) {\n      return fromBase64(text.substr(RegExp.lastMatch.length))\n    }\n\n    let encoding = text.match(/data:application\\/json;([^,]+),/)[1]\n    throw new Error('Unsupported source map encoding ' + encoding)\n  }\n\n  getAnnotationURL(sourceMapString) {\n    return sourceMapString.replace(/^\\/\\*\\s*# sourceMappingURL=/, '').trim()\n  }\n\n  isMap(map) {\n    if (typeof map !== 'object') return false\n    return (\n      typeof map.mappings === 'string' ||\n      typeof map._mappings === 'string' ||\n      Array.isArray(map.sections)\n    )\n  }\n\n  loadAnnotation(css) {\n    let comments = css.match(/\\/\\*\\s*# sourceMappingURL=/gm)\n    if (!comments) return\n\n    // sourceMappingURLs from comments, strings, etc.\n    let start = css.lastIndexOf(comments.pop())\n    let end = css.indexOf('*/', start)\n\n    if (start > -1 && end > -1) {\n      // Locate the last sourceMappingURL to avoid pickin\n      this.annotation = this.getAnnotationURL(css.substring(start, end))\n    }\n  }\n\n  loadFile(path) {\n    this.root = dirname(path)\n    if (existsSync(path)) {\n      this.mapFile = path\n      return readFileSync(path, 'utf-8').toString().trim()\n    }\n  }\n\n  loadMap(file, prev) {\n    if (prev === false) return false\n\n    if (prev) {\n      if (typeof prev === 'string') {\n        return prev\n      } else if (typeof prev === 'function') {\n        let prevPath = prev(file)\n        if (prevPath) {\n          let map = this.loadFile(prevPath)\n          if (!map) {\n            throw new Error(\n              'Unable to load previous source map: ' + prevPath.toString()\n            )\n          }\n          return map\n        }\n      } else if (prev instanceof SourceMapConsumer) {\n        return SourceMapGenerator.fromSourceMap(prev).toString()\n      } else if (prev instanceof SourceMapGenerator) {\n        return prev.toString()\n      } else if (this.isMap(prev)) {\n        return JSON.stringify(prev)\n      } else {\n        throw new Error(\n          'Unsupported previous source map format: ' + prev.toString()\n        )\n      }\n    } else if (this.inline) {\n      return this.decodeInline(this.annotation)\n    } else if (this.annotation) {\n      let map = this.annotation\n      if (file) map = join(dirname(file), map)\n      return this.loadFile(map)\n    }\n  }\n\n  startWith(string, start) {\n    if (!string) return false\n    return string.substr(0, start.length) === start\n  }\n\n  withContent() {\n    return !!(\n      this.consumer().sourcesContent &&\n      this.consumer().sourcesContent.length > 0\n    )\n  }\n}\n\nmodule.exports = PreviousMap\nPreviousMap.default = PreviousMap\n","'use strict'\n\nlet NoWorkResult = require('./no-work-result')\nlet LazyResult = require('./lazy-result')\nlet Document = require('./document')\nlet Root = require('./root')\n\nclass Processor {\n  constructor(plugins = []) {\n    this.version = '8.4.38'\n    this.plugins = this.normalize(plugins)\n  }\n\n  normalize(plugins) {\n    let normalized = []\n    for (let i of plugins) {\n      if (i.postcss === true) {\n        i = i()\n      } else if (i.postcss) {\n        i = i.postcss\n      }\n\n      if (typeof i === 'object' && Array.isArray(i.plugins)) {\n        normalized = normalized.concat(i.plugins)\n      } else if (typeof i === 'object' && i.postcssPlugin) {\n        normalized.push(i)\n      } else if (typeof i === 'function') {\n        normalized.push(i)\n      } else if (typeof i === 'object' && (i.parse || i.stringify)) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(\n            'PostCSS syntaxes cannot be used as plugins. Instead, please use ' +\n              'one of the syntax/parser/stringifier options as outlined ' +\n              'in your PostCSS runner documentation.'\n          )\n        }\n      } else {\n        throw new Error(i + ' is not a PostCSS plugin')\n      }\n    }\n    return normalized\n  }\n\n  process(css, opts = {}) {\n    if (\n      !this.plugins.length &&\n      !opts.parser &&\n      !opts.stringifier &&\n      !opts.syntax\n    ) {\n      return new NoWorkResult(this, css, opts)\n    } else {\n      return new LazyResult(this, css, opts)\n    }\n  }\n\n  use(plugin) {\n    this.plugins = this.plugins.concat(this.normalize([plugin]))\n    return this\n  }\n}\n\nmodule.exports = Processor\nProcessor.default = Processor\n\nRoot.registerProcessor(Processor)\nDocument.registerProcessor(Processor)\n","'use strict'\n\nlet Warning = require('./warning')\n\nclass Result {\n  constructor(processor, root, opts) {\n    this.processor = processor\n    this.messages = []\n    this.root = root\n    this.opts = opts\n    this.css = undefined\n    this.map = undefined\n  }\n\n  toString() {\n    return this.css\n  }\n\n  warn(text, opts = {}) {\n    if (!opts.plugin) {\n      if (this.lastPlugin && this.lastPlugin.postcssPlugin) {\n        opts.plugin = this.lastPlugin.postcssPlugin\n      }\n    }\n\n    let warning = new Warning(text, opts)\n    this.messages.push(warning)\n\n    return warning\n  }\n\n  warnings() {\n    return this.messages.filter(i => i.type === 'warning')\n  }\n\n  get content() {\n    return this.css\n  }\n}\n\nmodule.exports = Result\nResult.default = Result\n","'use strict'\n\nlet Container = require('./container')\n\nlet LazyResult, Processor\n\nclass Root extends Container {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'root'\n    if (!this.nodes) this.nodes = []\n  }\n\n  normalize(child, sample, type) {\n    let nodes = super.normalize(child)\n\n    if (sample) {\n      if (type === 'prepend') {\n        if (this.nodes.length > 1) {\n          sample.raws.before = this.nodes[1].raws.before\n        } else {\n          delete sample.raws.before\n        }\n      } else if (this.first !== sample) {\n        for (let node of nodes) {\n          node.raws.before = sample.raws.before\n        }\n      }\n    }\n\n    return nodes\n  }\n\n  removeChild(child, ignore) {\n    let index = this.index(child)\n\n    if (!ignore && index === 0 && this.nodes.length > 1) {\n      this.nodes[1].raws.before = this.nodes[index].raws.before\n    }\n\n    return super.removeChild(child)\n  }\n\n  toResult(opts = {}) {\n    let lazy = new LazyResult(new Processor(), this, opts)\n    return lazy.stringify()\n  }\n}\n\nRoot.registerLazyResult = dependant => {\n  LazyResult = dependant\n}\n\nRoot.registerProcessor = dependant => {\n  Processor = dependant\n}\n\nmodule.exports = Root\nRoot.default = Root\n\nContainer.registerRoot(Root)\n","'use strict'\n\nlet Container = require('./container')\nlet list = require('./list')\n\nclass Rule extends Container {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'rule'\n    if (!this.nodes) this.nodes = []\n  }\n\n  get selectors() {\n    return list.comma(this.selector)\n  }\n\n  set selectors(values) {\n    let match = this.selector ? this.selector.match(/,\\s*/) : null\n    let sep = match ? match[0] : ',' + this.raw('between', 'beforeOpen')\n    this.selector = values.join(sep)\n  }\n}\n\nmodule.exports = Rule\nRule.default = Rule\n\nContainer.registerRule(Rule)\n","'use strict'\n\nconst DEFAULT_RAW = {\n  after: '\\n',\n  beforeClose: '\\n',\n  beforeComment: '\\n',\n  beforeDecl: '\\n',\n  beforeOpen: ' ',\n  beforeRule: '\\n',\n  colon: ': ',\n  commentLeft: ' ',\n  commentRight: ' ',\n  emptyBody: '',\n  indent: '    ',\n  semicolon: false\n}\n\nfunction capitalize(str) {\n  return str[0].toUpperCase() + str.slice(1)\n}\n\nclass Stringifier {\n  constructor(builder) {\n    this.builder = builder\n  }\n\n  atrule(node, semicolon) {\n    let name = '@' + node.name\n    let params = node.params ? this.rawValue(node, 'params') : ''\n\n    if (typeof node.raws.afterName !== 'undefined') {\n      name += node.raws.afterName\n    } else if (params) {\n      name += ' '\n    }\n\n    if (node.nodes) {\n      this.block(node, name + params)\n    } else {\n      let end = (node.raws.between || '') + (semicolon ? ';' : '')\n      this.builder(name + params + end, node)\n    }\n  }\n\n  beforeAfter(node, detect) {\n    let value\n    if (node.type === 'decl') {\n      value = this.raw(node, null, 'beforeDecl')\n    } else if (node.type === 'comment') {\n      value = this.raw(node, null, 'beforeComment')\n    } else if (detect === 'before') {\n      value = this.raw(node, null, 'beforeRule')\n    } else {\n      value = this.raw(node, null, 'beforeClose')\n    }\n\n    let buf = node.parent\n    let depth = 0\n    while (buf && buf.type !== 'root') {\n      depth += 1\n      buf = buf.parent\n    }\n\n    if (value.includes('\\n')) {\n      let indent = this.raw(node, null, 'indent')\n      if (indent.length) {\n        for (let step = 0; step < depth; step++) value += indent\n      }\n    }\n\n    return value\n  }\n\n  block(node, start) {\n    let between = this.raw(node, 'between', 'beforeOpen')\n    this.builder(start + between + '{', node, 'start')\n\n    let after\n    if (node.nodes && node.nodes.length) {\n      this.body(node)\n      after = this.raw(node, 'after')\n    } else {\n      after = this.raw(node, 'after', 'emptyBody')\n    }\n\n    if (after) this.builder(after)\n    this.builder('}', node, 'end')\n  }\n\n  body(node) {\n    let last = node.nodes.length - 1\n    while (last > 0) {\n      if (node.nodes[last].type !== 'comment') break\n      last -= 1\n    }\n\n    let semicolon = this.raw(node, 'semicolon')\n    for (let i = 0; i < node.nodes.length; i++) {\n      let child = node.nodes[i]\n      let before = this.raw(child, 'before')\n      if (before) this.builder(before)\n      this.stringify(child, last !== i || semicolon)\n    }\n  }\n\n  comment(node) {\n    let left = this.raw(node, 'left', 'commentLeft')\n    let right = this.raw(node, 'right', 'commentRight')\n    this.builder('/*' + left + node.text + right + '*/', node)\n  }\n\n  decl(node, semicolon) {\n    let between = this.raw(node, 'between', 'colon')\n    let string = node.prop + between + this.rawValue(node, 'value')\n\n    if (node.important) {\n      string += node.raws.important || ' !important'\n    }\n\n    if (semicolon) string += ';'\n    this.builder(string, node)\n  }\n\n  document(node) {\n    this.body(node)\n  }\n\n  raw(node, own, detect) {\n    let value\n    if (!detect) detect = own\n\n    // Already had\n    if (own) {\n      value = node.raws[own]\n      if (typeof value !== 'undefined') return value\n    }\n\n    let parent = node.parent\n\n    if (detect === 'before') {\n      // Hack for first rule in CSS\n      if (!parent || (parent.type === 'root' && parent.first === node)) {\n        return ''\n      }\n\n      // `root` nodes in `document` should use only their own raws\n      if (parent && parent.type === 'document') {\n        return ''\n      }\n    }\n\n    // Floating child without parent\n    if (!parent) return DEFAULT_RAW[detect]\n\n    // Detect style by other nodes\n    let root = node.root()\n    if (!root.rawCache) root.rawCache = {}\n    if (typeof root.rawCache[detect] !== 'undefined') {\n      return root.rawCache[detect]\n    }\n\n    if (detect === 'before' || detect === 'after') {\n      return this.beforeAfter(node, detect)\n    } else {\n      let method = 'raw' + capitalize(detect)\n      if (this[method]) {\n        value = this[method](root, node)\n      } else {\n        root.walk(i => {\n          value = i.raws[own]\n          if (typeof value !== 'undefined') return false\n        })\n      }\n    }\n\n    if (typeof value === 'undefined') value = DEFAULT_RAW[detect]\n\n    root.rawCache[detect] = value\n    return value\n  }\n\n  rawBeforeClose(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length > 0) {\n        if (typeof i.raws.after !== 'undefined') {\n          value = i.raws.after\n          if (value.includes('\\n')) {\n            value = value.replace(/[^\\n]+$/, '')\n          }\n          return false\n        }\n      }\n    })\n    if (value) value = value.replace(/\\S/g, '')\n    return value\n  }\n\n  rawBeforeComment(root, node) {\n    let value\n    root.walkComments(i => {\n      if (typeof i.raws.before !== 'undefined') {\n        value = i.raws.before\n        if (value.includes('\\n')) {\n          value = value.replace(/[^\\n]+$/, '')\n        }\n        return false\n      }\n    })\n    if (typeof value === 'undefined') {\n      value = this.raw(node, null, 'beforeDecl')\n    } else if (value) {\n      value = value.replace(/\\S/g, '')\n    }\n    return value\n  }\n\n  rawBeforeDecl(root, node) {\n    let value\n    root.walkDecls(i => {\n      if (typeof i.raws.before !== 'undefined') {\n        value = i.raws.before\n        if (value.includes('\\n')) {\n          value = value.replace(/[^\\n]+$/, '')\n        }\n        return false\n      }\n    })\n    if (typeof value === 'undefined') {\n      value = this.raw(node, null, 'beforeRule')\n    } else if (value) {\n      value = value.replace(/\\S/g, '')\n    }\n    return value\n  }\n\n  rawBeforeOpen(root) {\n    let value\n    root.walk(i => {\n      if (i.type !== 'decl') {\n        value = i.raws.between\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawBeforeRule(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && (i.parent !== root || root.first !== i)) {\n        if (typeof i.raws.before !== 'undefined') {\n          value = i.raws.before\n          if (value.includes('\\n')) {\n            value = value.replace(/[^\\n]+$/, '')\n          }\n          return false\n        }\n      }\n    })\n    if (value) value = value.replace(/\\S/g, '')\n    return value\n  }\n\n  rawColon(root) {\n    let value\n    root.walkDecls(i => {\n      if (typeof i.raws.between !== 'undefined') {\n        value = i.raws.between.replace(/[^\\s:]/g, '')\n        return false\n      }\n    })\n    return value\n  }\n\n  rawEmptyBody(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length === 0) {\n        value = i.raws.after\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawIndent(root) {\n    if (root.raws.indent) return root.raws.indent\n    let value\n    root.walk(i => {\n      let p = i.parent\n      if (p && p !== root && p.parent && p.parent === root) {\n        if (typeof i.raws.before !== 'undefined') {\n          let parts = i.raws.before.split('\\n')\n          value = parts[parts.length - 1]\n          value = value.replace(/\\S/g, '')\n          return false\n        }\n      }\n    })\n    return value\n  }\n\n  rawSemicolon(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length && i.last.type === 'decl') {\n        value = i.raws.semicolon\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawValue(node, prop) {\n    let value = node[prop]\n    let raw = node.raws[prop]\n    if (raw && raw.value === value) {\n      return raw.raw\n    }\n\n    return value\n  }\n\n  root(node) {\n    this.body(node)\n    if (node.raws.after) this.builder(node.raws.after)\n  }\n\n  rule(node) {\n    this.block(node, this.rawValue(node, 'selector'))\n    if (node.raws.ownSemicolon) {\n      this.builder(node.raws.ownSemicolon, node, 'end')\n    }\n  }\n\n  stringify(node, semicolon) {\n    /* c8 ignore start */\n    if (!this[node.type]) {\n      throw new Error(\n        'Unknown AST node type ' +\n          node.type +\n          '. ' +\n          'Maybe you need to change PostCSS stringifier.'\n      )\n    }\n    /* c8 ignore stop */\n    this[node.type](node, semicolon)\n  }\n}\n\nmodule.exports = Stringifier\nStringifier.default = Stringifier\n","'use strict'\n\nlet Stringifier = require('./stringifier')\n\nfunction stringify(node, builder) {\n  let str = new Stringifier(builder)\n  str.stringify(node)\n}\n\nmodule.exports = stringify\nstringify.default = stringify\n","'use strict'\n\nmodule.exports.isClean = Symbol('isClean')\n\nmodule.exports.my = Symbol('my')\n","'use strict'\n\nconst SINGLE_QUOTE = \"'\".charCodeAt(0)\nconst DOUBLE_QUOTE = '\"'.charCodeAt(0)\nconst BACKSLASH = '\\\\'.charCodeAt(0)\nconst SLASH = '/'.charCodeAt(0)\nconst NEWLINE = '\\n'.charCodeAt(0)\nconst SPACE = ' '.charCodeAt(0)\nconst FEED = '\\f'.charCodeAt(0)\nconst TAB = '\\t'.charCodeAt(0)\nconst CR = '\\r'.charCodeAt(0)\nconst OPEN_SQUARE = '['.charCodeAt(0)\nconst CLOSE_SQUARE = ']'.charCodeAt(0)\nconst OPEN_PARENTHESES = '('.charCodeAt(0)\nconst CLOSE_PARENTHESES = ')'.charCodeAt(0)\nconst OPEN_CURLY = '{'.charCodeAt(0)\nconst CLOSE_CURLY = '}'.charCodeAt(0)\nconst SEMICOLON = ';'.charCodeAt(0)\nconst ASTERISK = '*'.charCodeAt(0)\nconst COLON = ':'.charCodeAt(0)\nconst AT = '@'.charCodeAt(0)\n\nconst RE_AT_END = /[\\t\\n\\f\\r \"#'()/;[\\\\\\]{}]/g\nconst RE_WORD_END = /[\\t\\n\\f\\r !\"#'():;@[\\\\\\]{}]|\\/(?=\\*)/g\nconst RE_BAD_BRACKET = /.[\\r\\n\"'(/\\\\]/\nconst RE_HEX_ESCAPE = /[\\da-f]/i\n\nmodule.exports = function tokenizer(input, options = {}) {\n  let css = input.css.valueOf()\n  let ignore = options.ignoreErrors\n\n  let code, next, quote, content, escape\n  let escaped, escapePos, prev, n, currentToken\n\n  let length = css.length\n  let pos = 0\n  let buffer = []\n  let returned = []\n\n  function position() {\n    return pos\n  }\n\n  function unclosed(what) {\n    throw input.error('Unclosed ' + what, pos)\n  }\n\n  function endOfFile() {\n    return returned.length === 0 && pos >= length\n  }\n\n  function nextToken(opts) {\n    if (returned.length) return returned.pop()\n    if (pos >= length) return\n\n    let ignoreUnclosed = opts ? opts.ignoreUnclosed : false\n\n    code = css.charCodeAt(pos)\n\n    switch (code) {\n      case NEWLINE:\n      case SPACE:\n      case TAB:\n      case CR:\n      case FEED: {\n        next = pos\n        do {\n          next += 1\n          code = css.charCodeAt(next)\n        } while (\n          code === SPACE ||\n          code === NEWLINE ||\n          code === TAB ||\n          code === CR ||\n          code === FEED\n        )\n\n        currentToken = ['space', css.slice(pos, next)]\n        pos = next - 1\n        break\n      }\n\n      case OPEN_SQUARE:\n      case CLOSE_SQUARE:\n      case OPEN_CURLY:\n      case CLOSE_CURLY:\n      case COLON:\n      case SEMICOLON:\n      case CLOSE_PARENTHESES: {\n        let controlChar = String.fromCharCode(code)\n        currentToken = [controlChar, controlChar, pos]\n        break\n      }\n\n      case OPEN_PARENTHESES: {\n        prev = buffer.length ? buffer.pop()[1] : ''\n        n = css.charCodeAt(pos + 1)\n        if (\n          prev === 'url' &&\n          n !== SINGLE_QUOTE &&\n          n !== DOUBLE_QUOTE &&\n          n !== SPACE &&\n          n !== NEWLINE &&\n          n !== TAB &&\n          n !== FEED &&\n          n !== CR\n        ) {\n          next = pos\n          do {\n            escaped = false\n            next = css.indexOf(')', next + 1)\n            if (next === -1) {\n              if (ignore || ignoreUnclosed) {\n                next = pos\n                break\n              } else {\n                unclosed('bracket')\n              }\n            }\n            escapePos = next\n            while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n              escapePos -= 1\n              escaped = !escaped\n            }\n          } while (escaped)\n\n          currentToken = ['brackets', css.slice(pos, next + 1), pos, next]\n\n          pos = next\n        } else {\n          next = css.indexOf(')', pos + 1)\n          content = css.slice(pos, next + 1)\n\n          if (next === -1 || RE_BAD_BRACKET.test(content)) {\n            currentToken = ['(', '(', pos]\n          } else {\n            currentToken = ['brackets', content, pos, next]\n            pos = next\n          }\n        }\n\n        break\n      }\n\n      case SINGLE_QUOTE:\n      case DOUBLE_QUOTE: {\n        quote = code === SINGLE_QUOTE ? \"'\" : '\"'\n        next = pos\n        do {\n          escaped = false\n          next = css.indexOf(quote, next + 1)\n          if (next === -1) {\n            if (ignore || ignoreUnclosed) {\n              next = pos + 1\n              break\n            } else {\n              unclosed('string')\n            }\n          }\n          escapePos = next\n          while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n            escapePos -= 1\n            escaped = !escaped\n          }\n        } while (escaped)\n\n        currentToken = ['string', css.slice(pos, next + 1), pos, next]\n        pos = next\n        break\n      }\n\n      case AT: {\n        RE_AT_END.lastIndex = pos + 1\n        RE_AT_END.test(css)\n        if (RE_AT_END.lastIndex === 0) {\n          next = css.length - 1\n        } else {\n          next = RE_AT_END.lastIndex - 2\n        }\n\n        currentToken = ['at-word', css.slice(pos, next + 1), pos, next]\n\n        pos = next\n        break\n      }\n\n      case BACKSLASH: {\n        next = pos\n        escape = true\n        while (css.charCodeAt(next + 1) === BACKSLASH) {\n          next += 1\n          escape = !escape\n        }\n        code = css.charCodeAt(next + 1)\n        if (\n          escape &&\n          code !== SLASH &&\n          code !== SPACE &&\n          code !== NEWLINE &&\n          code !== TAB &&\n          code !== CR &&\n          code !== FEED\n        ) {\n          next += 1\n          if (RE_HEX_ESCAPE.test(css.charAt(next))) {\n            while (RE_HEX_ESCAPE.test(css.charAt(next + 1))) {\n              next += 1\n            }\n            if (css.charCodeAt(next + 1) === SPACE) {\n              next += 1\n            }\n          }\n        }\n\n        currentToken = ['word', css.slice(pos, next + 1), pos, next]\n\n        pos = next\n        break\n      }\n\n      default: {\n        if (code === SLASH && css.charCodeAt(pos + 1) === ASTERISK) {\n          next = css.indexOf('*/', pos + 2) + 1\n          if (next === 0) {\n            if (ignore || ignoreUnclosed) {\n              next = css.length\n            } else {\n              unclosed('comment')\n            }\n          }\n\n          currentToken = ['comment', css.slice(pos, next + 1), pos, next]\n          pos = next\n        } else {\n          RE_WORD_END.lastIndex = pos + 1\n          RE_WORD_END.test(css)\n          if (RE_WORD_END.lastIndex === 0) {\n            next = css.length - 1\n          } else {\n            next = RE_WORD_END.lastIndex - 2\n          }\n\n          currentToken = ['word', css.slice(pos, next + 1), pos, next]\n          buffer.push(currentToken)\n          pos = next\n        }\n\n        break\n      }\n    }\n\n    pos++\n    return currentToken\n  }\n\n  function back(token) {\n    returned.push(token)\n  }\n\n  return {\n    back,\n    endOfFile,\n    nextToken,\n    position\n  }\n}\n","/* eslint-disable no-console */\n'use strict'\n\nlet printed = {}\n\nmodule.exports = function warnOnce(message) {\n  if (printed[message]) return\n  printed[message] = true\n\n  if (typeof console !== 'undefined' && console.warn) {\n    console.warn(message)\n  }\n}\n","'use strict'\n\nclass Warning {\n  constructor(text, opts = {}) {\n    this.type = 'warning'\n    this.text = text\n\n    if (opts.node && opts.node.source) {\n      let range = opts.node.rangeBy(opts)\n      this.line = range.start.line\n      this.column = range.start.column\n      this.endLine = range.end.line\n      this.endColumn = range.end.column\n    }\n\n    for (let opt in opts) this[opt] = opts[opt]\n  }\n\n  toString() {\n    if (this.node) {\n      return this.node.error(this.text, {\n        index: this.index,\n        plugin: this.plugin,\n        word: this.word\n      }).message\n    }\n\n    if (this.plugin) {\n      return this.plugin + ': ' + this.text\n    }\n\n    return this.text\n  }\n}\n\nmodule.exports = Warning\nWarning.default = Warning\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nexports.__esModule = true;\nvar React = require(\"react\");\nvar PropTypes = require(\"prop-types\");\nvar autosize = require(\"autosize\");\nvar _getLineHeight = require(\"line-height\");\nvar getLineHeight = _getLineHeight;\nvar RESIZED = \"autosize:resized\";\n/**\n * A light replacement for built-in textarea component\n * which automaticaly adjusts its height to match the content\n */\nvar TextareaAutosizeClass = /** @class */ (function (_super) {\n    __extends(TextareaAutosizeClass, _super);\n    function TextareaAutosizeClass() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            lineHeight: null\n        };\n        _this.textarea = null;\n        _this.onResize = function (e) {\n            if (_this.props.onResize) {\n                _this.props.onResize(e);\n            }\n        };\n        _this.updateLineHeight = function () {\n            if (_this.textarea) {\n                _this.setState({\n                    lineHeight: getLineHeight(_this.textarea)\n                });\n            }\n        };\n        _this.onChange = function (e) {\n            var onChange = _this.props.onChange;\n            _this.currentValue = e.currentTarget.value;\n            onChange && onChange(e);\n        };\n        return _this;\n    }\n    TextareaAutosizeClass.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, maxRows = _a.maxRows, async = _a.async;\n        if (typeof maxRows === \"number\") {\n            this.updateLineHeight();\n        }\n        if (typeof maxRows === \"number\" || async) {\n            /*\n              the defer is needed to:\n                - force \"autosize\" to activate the scrollbar when this.props.maxRows is passed\n                - support StyledComponents (see #71)\n            */\n            setTimeout(function () { return _this.textarea && autosize(_this.textarea); });\n        }\n        else {\n            this.textarea && autosize(this.textarea);\n        }\n        if (this.textarea) {\n            this.textarea.addEventListener(RESIZED, this.onResize);\n        }\n    };\n    TextareaAutosizeClass.prototype.componentWillUnmount = function () {\n        if (this.textarea) {\n            this.textarea.removeEventListener(RESIZED, this.onResize);\n            autosize.destroy(this.textarea);\n        }\n    };\n    TextareaAutosizeClass.prototype.render = function () {\n        var _this = this;\n        var _a = this, _b = _a.props, onResize = _b.onResize, maxRows = _b.maxRows, onChange = _b.onChange, style = _b.style, innerRef = _b.innerRef, children = _b.children, props = __rest(_b, [\"onResize\", \"maxRows\", \"onChange\", \"style\", \"innerRef\", \"children\"]), lineHeight = _a.state.lineHeight;\n        var maxHeight = maxRows && lineHeight ? lineHeight * maxRows : null;\n        return (React.createElement(\"textarea\", __assign({}, props, { onChange: this.onChange, style: maxHeight ? __assign({}, style, { maxHeight: maxHeight }) : style, ref: function (element) {\n                _this.textarea = element;\n                if (typeof _this.props.innerRef === 'function') {\n                    _this.props.innerRef(element);\n                }\n                else if (_this.props.innerRef) {\n                    _this.props.innerRef.current = element;\n                }\n            } }), children));\n    };\n    TextareaAutosizeClass.prototype.componentDidUpdate = function () {\n        this.textarea && autosize.update(this.textarea);\n    };\n    TextareaAutosizeClass.defaultProps = {\n        rows: 1,\n        async: false\n    };\n    TextareaAutosizeClass.propTypes = {\n        rows: PropTypes.number,\n        maxRows: PropTypes.number,\n        onResize: PropTypes.func,\n        innerRef: PropTypes.any,\n        async: PropTypes.bool\n    };\n    return TextareaAutosizeClass;\n}(React.Component));\nexports.TextareaAutosize = React.forwardRef(function (props, ref) {\n    return React.createElement(TextareaAutosizeClass, __assign({}, props, { innerRef: ref }));\n});\n","\"use strict\";\nexports.__esModule = true;\nvar TextareaAutosize_1 = require(\"./TextareaAutosize\");\nexports[\"default\"] = TextareaAutosize_1.TextareaAutosize;\n","var characterMap = {\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"AE\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"C\",\n\t\"\": \"C\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"D\",\n\t\"\": \"N\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"Y\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"ae\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"c\",\n\t\"\": \"c\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"d\",\n\t\"\": \"n\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"y\",\n\t\"\": \"y\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"C\": \"C\",\n\t\"c\": \"c\",\n\t\"\": \"D\",\n\t\"\": \"d\",\n\t\"\": \"D\",\n\t\"\": \"d\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"G\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"g\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"IJ\",\n\t\"\": \"ij\",\n\t\"\": \"J\",\n\t\"\": \"j\",\n\t\"\": \"K\",\n\t\"\": \"k\",\n\t\"\": \"K\",\n\t\"\": \"k\",\n\t\"K\": \"K\",\n\t\"k\": \"k\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"l\",\n\t\"\": \"l\",\n\t\"\": \"M\",\n\t\"\": \"m\",\n\t\"M\": \"M\",\n\t\"m\": \"m\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"n\",\n\t\"N\": \"N\",\n\t\"n\": \"n\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"OE\",\n\t\"\": \"oe\",\n\t\"P\": \"P\",\n\t\"p\": \"p\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"R\": \"R\",\n\t\"r\": \"r\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"S\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"s\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"T\",\n\t\"\": \"t\",\n\t\"\": \"t\",\n\t\"\": \"T\",\n\t\"\": \"T\",\n\t\"\": \"t\",\n\t\"\": \"T\",\n\t\"\": \"t\",\n\t\"T\": \"T\",\n\t\"t\": \"t\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"V\": \"V\",\n\t\"v\": \"v\",\n\t\"\": \"W\",\n\t\"\": \"w\",\n\t\"\": \"W\",\n\t\"\": \"w\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"\": \"Y\",\n\t\"\": \"y\",\n\t\"\": \"Y\",\n\t\"Y\": \"Y\",\n\t\"y\": \"y\",\n\t\"\": \"Z\",\n\t\"\": \"z\",\n\t\"\": \"Z\",\n\t\"\": \"z\",\n\t\"\": \"Z\",\n\t\"\": \"z\",\n\t\"\": \"s\",\n\t\"\": \"f\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"AE\",\n\t\"\": \"ae\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"TH\",\n\t\"\": \"th\",\n\t\"\": \"P\",\n\t\"\": \"p\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"\": \"\",\n\t\"\": \"\",\n\t\"\": \"\",\n\t\"\": \"\",\n\t\"A\": \"A\",\n\t\"a\": \"a\",\n\t\"E\": \"E\",\n\t\"e\": \"e\",\n\t\"I\": \"I\",\n\t\"i\": \"i\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"W\",\n\t\"\": \"w\",\n\t\"\": \"Y\",\n\t\"\": \"y\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"B\": \"B\",\n\t\"b\": \"b\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"F\": \"F\",\n\t\"f\": \"f\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"J\": \"J\",\n\t\"\": \"j\",\n\t\"\": \"K\",\n\t\"\": \"k\",\n\t\"M\": \"M\",\n\t\"m\": \"m\",\n\t\"P\": \"P\",\n\t\"p\": \"p\",\n\t\"Q\": \"Q\",\n\t\"q\": \"q\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"V\": \"V\",\n\t\"v\": \"v\",\n\t\"W\": \"W\",\n\t\"w\": \"w\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"Y\": \"Y\",\n\t\"y\": \"y\",\n\t\"A\": \"A\",\n\t\"a\": \"a\",\n\t\"B\": \"B\",\n\t\"b\": \"b\",\n\t\"\": \"D\",\n\t\"\": \"d\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"I\": \"I\",\n\t\"i\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"M\": \"M\",\n\t\"m\": \"m\",\n\t\"O\": \"O\",\n\t\"o\": \"o\",\n\t\"Q\": \"Q\",\n\t\"q\": \"q\",\n\t\"U\": \"U\",\n\t\"u\": \"u\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"Z\": \"Z\",\n\t\"z\": \"z\",\n\t\"\":\"\",\n\t\"\":\"\",\n\t\"\":\"\",\n\t\"\":\"\",\n};\n\nvar chars = Object.keys(characterMap).join('|');\nvar allAccents = new RegExp(chars, 'g');\nvar firstAccent = new RegExp(chars, '');\n\nfunction matcher(match) {\n\treturn characterMap[match];\n}\n\nvar removeAccents = function(string) {\n\treturn string.replace(allAccents, matcher);\n};\n\nvar hasAccents = function(string) {\n\treturn !!string.match(firstAccent);\n};\n\nmodule.exports = removeAccents;\nmodule.exports.has = hasAccents;\nmodule.exports.remove = removeAccents;\n","const CSSValueParser = require('postcss-value-parser')\n\n/**\n * @type {import('postcss').PluginCreator}\n */\nmodule.exports = (opts) => {\n\n  const DEFAULTS = {\n    skipHostRelativeUrls: true,\n  }\n  const config = Object.assign(DEFAULTS, opts)\n\n  return {\n    postcssPlugin: 'rebaseUrl',\n\n    Declaration(decl) {\n      // The faster way to find Declaration node\n      const parsedValue = CSSValueParser(decl.value)\n\n      let valueChanged = false\n      parsedValue.walk(node => {\n        if (node.type !== 'function' || node.value !== 'url') {\n          return\n        }\n\n        const urlVal = node.nodes[0].value\n\n        // bases relative URLs with rootUrl\n        const basedUrl = new URL(urlVal, opts.rootUrl)\n\n        // skip host-relative, already normalized URLs (e.g. `/images/image.jpg`, without `..`s)\n        if ((basedUrl.pathname === urlVal) && config.skipHostRelativeUrls) {\n          return false // skip this value\n        }\n\n        node.nodes[0].value = basedUrl.toString()\n        valueChanged = true\n\n        return false // do not walk deeper\n      })\n\n      if (valueChanged) {\n        decl.value = CSSValueParser.stringify(parsedValue)\n      }\n\n    }\n  }\n}\n\nmodule.exports.postcss = true\n","var parse = require(\"./parse\");\nvar walk = require(\"./walk\");\nvar stringify = require(\"./stringify\");\n\nfunction ValueParser(value) {\n  if (this instanceof ValueParser) {\n    this.nodes = parse(value);\n    return this;\n  }\n  return new ValueParser(value);\n}\n\nValueParser.prototype.toString = function() {\n  return Array.isArray(this.nodes) ? stringify(this.nodes) : \"\";\n};\n\nValueParser.prototype.walk = function(cb, bubble) {\n  walk(this.nodes, cb, bubble);\n  return this;\n};\n\nValueParser.unit = require(\"./unit\");\n\nValueParser.walk = walk;\n\nValueParser.stringify = stringify;\n\nmodule.exports = ValueParser;\n","var openParentheses = \"(\".charCodeAt(0);\nvar closeParentheses = \")\".charCodeAt(0);\nvar singleQuote = \"'\".charCodeAt(0);\nvar doubleQuote = '\"'.charCodeAt(0);\nvar backslash = \"\\\\\".charCodeAt(0);\nvar slash = \"/\".charCodeAt(0);\nvar comma = \",\".charCodeAt(0);\nvar colon = \":\".charCodeAt(0);\nvar star = \"*\".charCodeAt(0);\nvar uLower = \"u\".charCodeAt(0);\nvar uUpper = \"U\".charCodeAt(0);\nvar plus = \"+\".charCodeAt(0);\nvar isUnicodeRange = /^[a-f0-9?-]+$/i;\n\nmodule.exports = function(input) {\n  var tokens = [];\n  var value = input;\n\n  var next,\n    quote,\n    prev,\n    token,\n    escape,\n    escapePos,\n    whitespacePos,\n    parenthesesOpenPos;\n  var pos = 0;\n  var code = value.charCodeAt(pos);\n  var max = value.length;\n  var stack = [{ nodes: tokens }];\n  var balanced = 0;\n  var parent;\n\n  var name = \"\";\n  var before = \"\";\n  var after = \"\";\n\n  while (pos < max) {\n    // Whitespaces\n    if (code <= 32) {\n      next = pos;\n      do {\n        next += 1;\n        code = value.charCodeAt(next);\n      } while (code <= 32);\n      token = value.slice(pos, next);\n\n      prev = tokens[tokens.length - 1];\n      if (code === closeParentheses && balanced) {\n        after = token;\n      } else if (prev && prev.type === \"div\") {\n        prev.after = token;\n        prev.sourceEndIndex += token.length;\n      } else if (\n        code === comma ||\n        code === colon ||\n        (code === slash &&\n          value.charCodeAt(next + 1) !== star &&\n          (!parent ||\n            (parent && parent.type === \"function\" && parent.value !== \"calc\")))\n      ) {\n        before = token;\n      } else {\n        tokens.push({\n          type: \"space\",\n          sourceIndex: pos,\n          sourceEndIndex: next,\n          value: token\n        });\n      }\n\n      pos = next;\n\n      // Quotes\n    } else if (code === singleQuote || code === doubleQuote) {\n      next = pos;\n      quote = code === singleQuote ? \"'\" : '\"';\n      token = {\n        type: \"string\",\n        sourceIndex: pos,\n        quote: quote\n      };\n      do {\n        escape = false;\n        next = value.indexOf(quote, next + 1);\n        if (~next) {\n          escapePos = next;\n          while (value.charCodeAt(escapePos - 1) === backslash) {\n            escapePos -= 1;\n            escape = !escape;\n          }\n        } else {\n          value += quote;\n          next = value.length - 1;\n          token.unclosed = true;\n        }\n      } while (escape);\n      token.value = value.slice(pos + 1, next);\n      token.sourceEndIndex = token.unclosed ? next : next + 1;\n      tokens.push(token);\n      pos = next + 1;\n      code = value.charCodeAt(pos);\n\n      // Comments\n    } else if (code === slash && value.charCodeAt(pos + 1) === star) {\n      next = value.indexOf(\"*/\", pos);\n\n      token = {\n        type: \"comment\",\n        sourceIndex: pos,\n        sourceEndIndex: next + 2\n      };\n\n      if (next === -1) {\n        token.unclosed = true;\n        next = value.length;\n        token.sourceEndIndex = next;\n      }\n\n      token.value = value.slice(pos + 2, next);\n      tokens.push(token);\n\n      pos = next + 2;\n      code = value.charCodeAt(pos);\n\n      // Operation within calc\n    } else if (\n      (code === slash || code === star) &&\n      parent &&\n      parent.type === \"function\" &&\n      parent.value === \"calc\"\n    ) {\n      token = value[pos];\n      tokens.push({\n        type: \"word\",\n        sourceIndex: pos - before.length,\n        sourceEndIndex: pos + token.length,\n        value: token\n      });\n      pos += 1;\n      code = value.charCodeAt(pos);\n\n      // Dividers\n    } else if (code === slash || code === comma || code === colon) {\n      token = value[pos];\n\n      tokens.push({\n        type: \"div\",\n        sourceIndex: pos - before.length,\n        sourceEndIndex: pos + token.length,\n        value: token,\n        before: before,\n        after: \"\"\n      });\n      before = \"\";\n\n      pos += 1;\n      code = value.charCodeAt(pos);\n\n      // Open parentheses\n    } else if (openParentheses === code) {\n      // Whitespaces after open parentheses\n      next = pos;\n      do {\n        next += 1;\n        code = value.charCodeAt(next);\n      } while (code <= 32);\n      parenthesesOpenPos = pos;\n      token = {\n        type: \"function\",\n        sourceIndex: pos - name.length,\n        value: name,\n        before: value.slice(parenthesesOpenPos + 1, next)\n      };\n      pos = next;\n\n      if (name === \"url\" && code !== singleQuote && code !== doubleQuote) {\n        next -= 1;\n        do {\n          escape = false;\n          next = value.indexOf(\")\", next + 1);\n          if (~next) {\n            escapePos = next;\n            while (value.charCodeAt(escapePos - 1) === backslash) {\n              escapePos -= 1;\n              escape = !escape;\n            }\n          } else {\n            value += \")\";\n            next = value.length - 1;\n            token.unclosed = true;\n          }\n        } while (escape);\n        // Whitespaces before closed\n        whitespacePos = next;\n        do {\n          whitespacePos -= 1;\n          code = value.charCodeAt(whitespacePos);\n        } while (code <= 32);\n        if (parenthesesOpenPos < whitespacePos) {\n          if (pos !== whitespacePos + 1) {\n            token.nodes = [\n              {\n                type: \"word\",\n                sourceIndex: pos,\n                sourceEndIndex: whitespacePos + 1,\n                value: value.slice(pos, whitespacePos + 1)\n              }\n            ];\n          } else {\n            token.nodes = [];\n          }\n          if (token.unclosed && whitespacePos + 1 !== next) {\n            token.after = \"\";\n            token.nodes.push({\n              type: \"space\",\n              sourceIndex: whitespacePos + 1,\n              sourceEndIndex: next,\n              value: value.slice(whitespacePos + 1, next)\n            });\n          } else {\n            token.after = value.slice(whitespacePos + 1, next);\n            token.sourceEndIndex = next;\n          }\n        } else {\n          token.after = \"\";\n          token.nodes = [];\n        }\n        pos = next + 1;\n        token.sourceEndIndex = token.unclosed ? next : pos;\n        code = value.charCodeAt(pos);\n        tokens.push(token);\n      } else {\n        balanced += 1;\n        token.after = \"\";\n        token.sourceEndIndex = pos + 1;\n        tokens.push(token);\n        stack.push(token);\n        tokens = token.nodes = [];\n        parent = token;\n      }\n      name = \"\";\n\n      // Close parentheses\n    } else if (closeParentheses === code && balanced) {\n      pos += 1;\n      code = value.charCodeAt(pos);\n\n      parent.after = after;\n      parent.sourceEndIndex += after.length;\n      after = \"\";\n      balanced -= 1;\n      stack[stack.length - 1].sourceEndIndex = pos;\n      stack.pop();\n      parent = stack[balanced];\n      tokens = parent.nodes;\n\n      // Words\n    } else {\n      next = pos;\n      do {\n        if (code === backslash) {\n          next += 1;\n        }\n        next += 1;\n        code = value.charCodeAt(next);\n      } while (\n        next < max &&\n        !(\n          code <= 32 ||\n          code === singleQuote ||\n          code === doubleQuote ||\n          code === comma ||\n          code === colon ||\n          code === slash ||\n          code === openParentheses ||\n          (code === star &&\n            parent &&\n            parent.type === \"function\" &&\n            parent.value === \"calc\") ||\n          (code === slash &&\n            parent.type === \"function\" &&\n            parent.value === \"calc\") ||\n          (code === closeParentheses && balanced)\n        )\n      );\n      token = value.slice(pos, next);\n\n      if (openParentheses === code) {\n        name = token;\n      } else if (\n        (uLower === token.charCodeAt(0) || uUpper === token.charCodeAt(0)) &&\n        plus === token.charCodeAt(1) &&\n        isUnicodeRange.test(token.slice(2))\n      ) {\n        tokens.push({\n          type: \"unicode-range\",\n          sourceIndex: pos,\n          sourceEndIndex: next,\n          value: token\n        });\n      } else {\n        tokens.push({\n          type: \"word\",\n          sourceIndex: pos,\n          sourceEndIndex: next,\n          value: token\n        });\n      }\n\n      pos = next;\n    }\n  }\n\n  for (pos = stack.length - 1; pos; pos -= 1) {\n    stack[pos].unclosed = true;\n    stack[pos].sourceEndIndex = value.length;\n  }\n\n  return stack[0].nodes;\n};\n","function stringifyNode(node, custom) {\n  var type = node.type;\n  var value = node.value;\n  var buf;\n  var customResult;\n\n  if (custom && (customResult = custom(node)) !== undefined) {\n    return customResult;\n  } else if (type === \"word\" || type === \"space\") {\n    return value;\n  } else if (type === \"string\") {\n    buf = node.quote || \"\";\n    return buf + value + (node.unclosed ? \"\" : buf);\n  } else if (type === \"comment\") {\n    return \"/*\" + value + (node.unclosed ? \"\" : \"*/\");\n  } else if (type === \"div\") {\n    return (node.before || \"\") + value + (node.after || \"\");\n  } else if (Array.isArray(node.nodes)) {\n    buf = stringify(node.nodes, custom);\n    if (type !== \"function\") {\n      return buf;\n    }\n    return (\n      value +\n      \"(\" +\n      (node.before || \"\") +\n      buf +\n      (node.after || \"\") +\n      (node.unclosed ? \"\" : \")\")\n    );\n  }\n  return value;\n}\n\nfunction stringify(nodes, custom) {\n  var result, i;\n\n  if (Array.isArray(nodes)) {\n    result = \"\";\n    for (i = nodes.length - 1; ~i; i -= 1) {\n      result = stringifyNode(nodes[i], custom) + result;\n    }\n    return result;\n  }\n  return stringifyNode(nodes, custom);\n}\n\nmodule.exports = stringify;\n","var minus = \"-\".charCodeAt(0);\nvar plus = \"+\".charCodeAt(0);\nvar dot = \".\".charCodeAt(0);\nvar exp = \"e\".charCodeAt(0);\nvar EXP = \"E\".charCodeAt(0);\n\n// Check if three code points would start a number\n// https://www.w3.org/TR/css-syntax-3/#starts-with-a-number\nfunction likeNumber(value) {\n  var code = value.charCodeAt(0);\n  var nextCode;\n\n  if (code === plus || code === minus) {\n    nextCode = value.charCodeAt(1);\n\n    if (nextCode >= 48 && nextCode <= 57) {\n      return true;\n    }\n\n    var nextNextCode = value.charCodeAt(2);\n\n    if (nextCode === dot && nextNextCode >= 48 && nextNextCode <= 57) {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (code === dot) {\n    nextCode = value.charCodeAt(1);\n\n    if (nextCode >= 48 && nextCode <= 57) {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (code >= 48 && code <= 57) {\n    return true;\n  }\n\n  return false;\n}\n\n// Consume a number\n// https://www.w3.org/TR/css-syntax-3/#consume-number\nmodule.exports = function(value) {\n  var pos = 0;\n  var length = value.length;\n  var code;\n  var nextCode;\n  var nextNextCode;\n\n  if (length === 0 || !likeNumber(value)) {\n    return false;\n  }\n\n  code = value.charCodeAt(pos);\n\n  if (code === plus || code === minus) {\n    pos++;\n  }\n\n  while (pos < length) {\n    code = value.charCodeAt(pos);\n\n    if (code < 48 || code > 57) {\n      break;\n    }\n\n    pos += 1;\n  }\n\n  code = value.charCodeAt(pos);\n  nextCode = value.charCodeAt(pos + 1);\n\n  if (code === dot && nextCode >= 48 && nextCode <= 57) {\n    pos += 2;\n\n    while (pos < length) {\n      code = value.charCodeAt(pos);\n\n      if (code < 48 || code > 57) {\n        break;\n      }\n\n      pos += 1;\n    }\n  }\n\n  code = value.charCodeAt(pos);\n  nextCode = value.charCodeAt(pos + 1);\n  nextNextCode = value.charCodeAt(pos + 2);\n\n  if (\n    (code === exp || code === EXP) &&\n    ((nextCode >= 48 && nextCode <= 57) ||\n      ((nextCode === plus || nextCode === minus) &&\n        nextNextCode >= 48 &&\n        nextNextCode <= 57))\n  ) {\n    pos += nextCode === plus || nextCode === minus ? 3 : 2;\n\n    while (pos < length) {\n      code = value.charCodeAt(pos);\n\n      if (code < 48 || code > 57) {\n        break;\n      }\n\n      pos += 1;\n    }\n  }\n\n  return {\n    number: value.slice(0, pos),\n    unit: value.slice(pos)\n  };\n};\n","module.exports = function walk(nodes, cb, bubble) {\n  var i, max, node, result;\n\n  for (i = 0, max = nodes.length; i < max; i += 1) {\n    node = nodes[i];\n    if (!bubble) {\n      result = cb(node, i, nodes);\n    }\n\n    if (\n      result !== false &&\n      node.type === \"function\" &&\n      Array.isArray(node.nodes)\n    ) {\n      walk(node.nodes, cb, bubble);\n    }\n\n    if (bubble) {\n      cb(node, i, nodes);\n    }\n  }\n};\n","module.exports = window[\"React\"];","// This alphabet uses `A-Za-z0-9_-` symbols.\n// The order of characters is optimized for better gzip and brotli compression.\n// References to the same file (works both for gzip and brotli):\n// `'use`, `andom`, and `rict'`\n// References to the brotli default dictionary:\n// `-26T`, `1983`, `40px`, `75px`, `bush`, `jack`, `mind`, `very`, and `wolf`\nlet urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n\nlet customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    // A compact alternative for `for (var i = 0; i < step; i++)`.\n    let i = size | 0\n    while (i--) {\n      // `| 0` is more compact and faster than `Math.floor()`.\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\n\nlet nanoid = (size = 21) => {\n  let id = ''\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  let i = size | 0\n  while (i--) {\n    // `| 0` is more compact and faster than `Math.floor()`.\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n\nmodule.exports = { nanoid, customAlphabet }\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"compose\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","/**\n * WordPress dependencies\n */\nimport { createContext, useContext } from '@wordpress/element';\n\nexport const mayDisplayControlsKey = Symbol( 'mayDisplayControls' );\nexport const mayDisplayParentControlsKey = Symbol( 'mayDisplayParentControls' );\nexport const blockEditingModeKey = Symbol( 'blockEditingMode' );\nexport const blockBindingsKey = Symbol( 'blockBindings' );\nexport const isPreviewModeKey = Symbol( 'isPreviewMode' );\n\nexport const DEFAULT_BLOCK_EDIT_CONTEXT = {\n\tname: '',\n\tisSelected: false,\n};\n\nconst Context = createContext( DEFAULT_BLOCK_EDIT_CONTEXT );\nconst { Provider } = Context;\n\nexport { Provider as BlockEditContextProvider };\n\n/**\n * A hook that returns the block edit context.\n *\n * @return {Object} Block edit context\n */\nexport function useBlockEditContext() {\n\treturn useContext( Context );\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"deprecated\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\n\nexport const PREFERENCES_DEFAULTS = {\n\tinsertUsage: {},\n};\n\n/**\n * The default editor settings\n *\n * @typedef {Object} SETTINGS_DEFAULT\n * @property {boolean}       alignWide                              Enable/Disable Wide/Full Alignments\n * @property {boolean}       supportsLayout                         Enable/disable layouts support in container blocks.\n * @property {boolean}       imageEditing                           Image Editing settings set to false to disable.\n * @property {Array}         imageSizes                             Available image sizes\n * @property {number}        maxWidth                               Max width to constraint resizing\n * @property {boolean|Array} allowedBlockTypes                      Allowed block types\n * @property {boolean}       hasFixedToolbar                        Whether or not the editor toolbar is fixed\n * @property {boolean}       distractionFree                        Whether or not the editor UI is distraction free\n * @property {boolean}       focusMode                              Whether the focus mode is enabled or not\n * @property {Array}         styles                                 Editor Styles\n * @property {boolean}       keepCaretInsideBlock                   Whether caret should move between blocks in edit mode\n * @property {string}        bodyPlaceholder                        Empty post placeholder\n * @property {string}        titlePlaceholder                       Empty title placeholder\n * @property {boolean}       canLockBlocks                          Whether the user can manage Block Lock state\n * @property {boolean}       codeEditingEnabled                     Whether or not the user can switch to the code editor\n * @property {boolean}       generateAnchors                        Enable/Disable auto anchor generation for Heading blocks\n * @property {boolean}       enableOpenverseMediaCategory           Enable/Disable the Openverse media category in the inserter.\n * @property {boolean}       clearBlockSelection                    Whether the block editor should clear selection on mousedown when a block is not clicked.\n * @property {boolean}       __experimentalCanUserUseUnfilteredHTML Whether the user should be able to use unfiltered HTML or the HTML should be filtered e.g., to remove elements considered insecure like iframes.\n * @property {boolean}       __experimentalBlockDirectory           Whether the user has enabled the Block Directory\n * @property {Array}         __experimentalBlockPatterns            Array of objects representing the block patterns\n * @property {Array}         __experimentalBlockPatternCategories   Array of objects representing the block pattern categories\n */\nexport const SETTINGS_DEFAULTS = {\n\talignWide: false,\n\tsupportsLayout: true,\n\n\t// colors setting is not used anymore now defaults are passed from theme.json on the server and core has its own defaults.\n\t// The setting is only kept for backward compatibility purposes.\n\tcolors: [\n\t\t{\n\t\t\tname: __( 'Black' ),\n\t\t\tslug: 'black',\n\t\t\tcolor: '#000000',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Cyan bluish gray' ),\n\t\t\tslug: 'cyan-bluish-gray',\n\t\t\tcolor: '#abb8c3',\n\t\t},\n\t\t{\n\t\t\tname: __( 'White' ),\n\t\t\tslug: 'white',\n\t\t\tcolor: '#ffffff',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Pale pink' ),\n\t\t\tslug: 'pale-pink',\n\t\t\tcolor: '#f78da7',\n\t\t},\n\t\t{ name: __( 'Vivid red' ), slug: 'vivid-red', color: '#cf2e2e' },\n\t\t{\n\t\t\tname: __( 'Luminous vivid orange' ),\n\t\t\tslug: 'luminous-vivid-orange',\n\t\t\tcolor: '#ff6900',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Luminous vivid amber' ),\n\t\t\tslug: 'luminous-vivid-amber',\n\t\t\tcolor: '#fcb900',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Light green cyan' ),\n\t\t\tslug: 'light-green-cyan',\n\t\t\tcolor: '#7bdcb5',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Vivid green cyan' ),\n\t\t\tslug: 'vivid-green-cyan',\n\t\t\tcolor: '#00d084',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Pale cyan blue' ),\n\t\t\tslug: 'pale-cyan-blue',\n\t\t\tcolor: '#8ed1fc',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Vivid cyan blue' ),\n\t\t\tslug: 'vivid-cyan-blue',\n\t\t\tcolor: '#0693e3',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Vivid purple' ),\n\t\t\tslug: 'vivid-purple',\n\t\t\tcolor: '#9b51e0',\n\t\t},\n\t],\n\t// fontSizes setting is not used anymore now defaults are passed from theme.json on the server and core has its own defaults.\n\t// The setting is only kept for backward compatibility purposes.\n\tfontSizes: [\n\t\t{\n\t\t\tname: _x( 'Small', 'font size name' ),\n\t\t\tsize: 13,\n\t\t\tslug: 'small',\n\t\t},\n\t\t{\n\t\t\tname: _x( 'Normal', 'font size name' ),\n\t\t\tsize: 16,\n\t\t\tslug: 'normal',\n\t\t},\n\t\t{\n\t\t\tname: _x( 'Medium', 'font size name' ),\n\t\t\tsize: 20,\n\t\t\tslug: 'medium',\n\t\t},\n\t\t{\n\t\t\tname: _x( 'Large', 'font size name' ),\n\t\t\tsize: 36,\n\t\t\tslug: 'large',\n\t\t},\n\t\t{\n\t\t\tname: _x( 'Huge', 'font size name' ),\n\t\t\tsize: 42,\n\t\t\tslug: 'huge',\n\t\t},\n\t],\n\n\t// Image default size slug.\n\timageDefaultSize: 'large',\n\n\timageSizes: [\n\t\t{ slug: 'thumbnail', name: __( 'Thumbnail' ) },\n\t\t{ slug: 'medium', name: __( 'Medium' ) },\n\t\t{ slug: 'large', name: __( 'Large' ) },\n\t\t{ slug: 'full', name: __( 'Full Size' ) },\n\t],\n\n\t// Allow plugin to disable Image Editor if need be.\n\timageEditing: true,\n\n\t// This is current max width of the block inner area\n\t// It's used to constraint image resizing and this value could be overridden later by themes\n\tmaxWidth: 580,\n\n\t// Allowed block types for the editor, defaulting to true (all supported).\n\tallowedBlockTypes: true,\n\n\t// Maximum upload size in bytes allowed for the site.\n\tmaxUploadFileSize: 0,\n\n\t// List of allowed mime types and file extensions.\n\tallowedMimeTypes: null,\n\n\t// Allows to disable block locking interface.\n\tcanLockBlocks: true,\n\n\t// Allows to disable Openverse media category in the inserter.\n\tenableOpenverseMediaCategory: true,\n\n\tclearBlockSelection: true,\n\n\t__experimentalCanUserUseUnfilteredHTML: false,\n\t__experimentalBlockDirectory: false,\n\t__mobileEnablePageTemplates: false,\n\t__experimentalBlockPatterns: [],\n\t__experimentalBlockPatternCategories: [],\n\n\tisPreviewMode: false,\n\n\t// These settings will be completely revamped in the future.\n\t// The goal is to evolve this into an API which will instruct\n\t// the block inspector to animate transitions between what it\n\t// displays based on the relationship between the selected block\n\t// and its parent, and only enable it if the parent is controlling\n\t// its children blocks.\n\tblockInspectorAnimation: {\n\t\tanimationParent: 'core/navigation',\n\t\t'core/navigation': { enterDirection: 'leftToRight' },\n\t\t'core/navigation-submenu': { enterDirection: 'rightToLeft' },\n\t\t'core/navigation-link': { enterDirection: 'rightToLeft' },\n\t\t'core/search': { enterDirection: 'rightToLeft' },\n\t\t'core/social-links': { enterDirection: 'rightToLeft' },\n\t\t'core/page-list': { enterDirection: 'rightToLeft' },\n\t\t'core/spacer': { enterDirection: 'rightToLeft' },\n\t\t'core/home-link': { enterDirection: 'rightToLeft' },\n\t\t'core/site-title': { enterDirection: 'rightToLeft' },\n\t\t'core/site-logo': { enterDirection: 'rightToLeft' },\n\t},\n\n\tgenerateAnchors: false,\n\t// gradients setting is not used anymore now defaults are passed from theme.json on the server and core has its own defaults.\n\t// The setting is only kept for backward compatibility purposes.\n\tgradients: [\n\t\t{\n\t\t\tname: __( 'Vivid cyan blue to vivid purple' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)',\n\t\t\tslug: 'vivid-cyan-blue-to-vivid-purple',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Light green cyan to vivid green cyan' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%)',\n\t\t\tslug: 'light-green-cyan-to-vivid-green-cyan',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Luminous vivid amber to luminous vivid orange' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%)',\n\t\t\tslug: 'luminous-vivid-amber-to-luminous-vivid-orange',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Luminous vivid orange to vivid red' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%)',\n\t\t\tslug: 'luminous-vivid-orange-to-vivid-red',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Very light gray to cyan bluish gray' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%)',\n\t\t\tslug: 'very-light-gray-to-cyan-bluish-gray',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Cool to warm spectrum' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%)',\n\t\t\tslug: 'cool-to-warm-spectrum',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Blush light purple' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%)',\n\t\t\tslug: 'blush-light-purple',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Blush bordeaux' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%)',\n\t\t\tslug: 'blush-bordeaux',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Luminous dusk' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%)',\n\t\t\tslug: 'luminous-dusk',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Pale ocean' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%)',\n\t\t\tslug: 'pale-ocean',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Electric grass' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%)',\n\t\t\tslug: 'electric-grass',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Midnight' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%)',\n\t\t\tslug: 'midnight',\n\t\t},\n\t],\n\n\t__unstableResolvedAssets: { styles: [], scripts: [] },\n};\n","/**\n * Insert one or multiple elements into a given position of an array.\n *\n * @param {Array}  array    Source array.\n * @param {*}      elements Elements to insert.\n * @param {number} index    Insert Position.\n *\n * @return {Array} Result.\n */\nexport function insertAt( array, elements, index ) {\n\treturn [\n\t\t...array.slice( 0, index ),\n\t\t...( Array.isArray( elements ) ? elements : [ elements ] ),\n\t\t...array.slice( index ),\n\t];\n}\n\n/**\n * Moves an element in an array.\n *\n * @param {Array}  array Source array.\n * @param {number} from  Source index.\n * @param {number} to    Destination index.\n * @param {number} count Number of elements to move.\n *\n * @return {Array} Result.\n */\nexport function moveTo( array, from, to, count = 1 ) {\n\tconst withoutMovedElements = [ ...array ];\n\twithoutMovedElements.splice( from, count );\n\treturn insertAt(\n\t\twithoutMovedElements,\n\t\tarray.slice( from, from + count ),\n\t\tto\n\t);\n}\n","export const globalStylesDataKey = Symbol( 'globalStylesDataKey' );\nexport const globalStylesLinksDataKey = Symbol( 'globalStylesLinks' );\nexport const selectBlockPatternsKey = Symbol( 'selectBlockPatternsKey' );\nexport const reusableBlocksSelectKey = Symbol( 'reusableBlocksSelect' );\nexport const sectionRootClientIdKey = Symbol( 'sectionRootClientIdKey' );\nexport const mediaEditKey = Symbol( 'mediaEditKey' );\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"privateApis\"];","/**\n * WordPress dependencies\n */\nimport { __dangerousOptInToUnstableAPIsOnlyForCoreModules } from '@wordpress/private-apis';\n\nexport const { lock, unlock } =\n\t__dangerousOptInToUnstableAPIsOnlyForCoreModules(\n\t\t'I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.',\n\t\t'@wordpress/block-editor'\n\t);\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * WordPress dependencies\n */\nimport { pipe } from '@wordpress/compose';\nimport { combineReducers, select } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\nimport {\n\tstore as blocksStore,\n\tprivateApis as blocksPrivateApis,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { PREFERENCES_DEFAULTS, SETTINGS_DEFAULTS } from './defaults';\nimport { insertAt, moveTo } from './array';\nimport { sectionRootClientIdKey } from './private-keys';\nimport { unlock } from '../lock-unlock';\n\nconst { isContentBlock } = unlock( blocksPrivateApis );\n\nconst identity = ( x ) => x;\n\n/**\n * Given an array of blocks, returns an object where each key is a nesting\n * context, the value of which is an array of block client IDs existing within\n * that nesting context.\n *\n * @param {Array}   blocks       Blocks to map.\n * @param {?string} rootClientId Assumed root client ID.\n *\n * @return {Object} Block order map object.\n */\nfunction mapBlockOrder( blocks, rootClientId = '' ) {\n\tconst result = new Map();\n\tconst current = [];\n\tresult.set( rootClientId, current );\n\tblocks.forEach( ( block ) => {\n\t\tconst { clientId, innerBlocks } = block;\n\t\tcurrent.push( clientId );\n\t\tmapBlockOrder( innerBlocks, clientId ).forEach(\n\t\t\t( order, subClientId ) => {\n\t\t\t\tresult.set( subClientId, order );\n\t\t\t}\n\t\t);\n\t} );\n\treturn result;\n}\n\n/**\n * Given an array of blocks, returns an object where each key contains\n * the clientId of the block and the value is the parent of the block.\n *\n * @param {Array}   blocks       Blocks to map.\n * @param {?string} rootClientId Assumed root client ID.\n *\n * @return {Object} Block order map object.\n */\nfunction mapBlockParents( blocks, rootClientId = '' ) {\n\tconst result = [];\n\tconst stack = [ [ rootClientId, blocks ] ];\n\twhile ( stack.length ) {\n\t\tconst [ parent, currentBlocks ] = stack.shift();\n\t\tcurrentBlocks.forEach( ( { innerBlocks, ...block } ) => {\n\t\t\tresult.push( [ block.clientId, parent ] );\n\t\t\tif ( innerBlocks?.length ) {\n\t\t\t\tstack.push( [ block.clientId, innerBlocks ] );\n\t\t\t}\n\t\t} );\n\t}\n\treturn result;\n}\n\n/**\n * Helper method to iterate through all blocks, recursing into inner blocks,\n * applying a transformation function to each one.\n * Returns a flattened object with the transformed blocks.\n *\n * @param {Array}    blocks    Blocks to flatten.\n * @param {Function} transform Transforming function to be applied to each block.\n *\n * @return {Array} Flattened object.\n */\nfunction flattenBlocks( blocks, transform = identity ) {\n\tconst result = [];\n\n\tconst stack = [ ...blocks ];\n\twhile ( stack.length ) {\n\t\tconst { innerBlocks, ...block } = stack.shift();\n\t\tstack.push( ...innerBlocks );\n\t\tresult.push( [ block.clientId, transform( block ) ] );\n\t}\n\n\treturn result;\n}\n\nfunction getFlattenedClientIds( blocks ) {\n\tconst result = {};\n\tconst stack = [ ...blocks ];\n\twhile ( stack.length ) {\n\t\tconst { innerBlocks, ...block } = stack.shift();\n\t\tstack.push( ...innerBlocks );\n\t\tresult[ block.clientId ] = true;\n\t}\n\n\treturn result;\n}\n\n/**\n * Given an array of blocks, returns an object containing all blocks, without\n * attributes, recursing into inner blocks. Keys correspond to the block client\n * ID, the value of which is the attributes object.\n *\n * @param {Array} blocks Blocks to flatten.\n *\n * @return {Array} Flattened block attributes object.\n */\nfunction getFlattenedBlocksWithoutAttributes( blocks ) {\n\treturn flattenBlocks( blocks, ( block ) => {\n\t\tconst { attributes, ...restBlock } = block;\n\t\treturn restBlock;\n\t} );\n}\n\n/**\n * Given an array of blocks, returns an object containing all block attributes,\n * recursing into inner blocks. Keys correspond to the block client ID, the\n * value of which is the attributes object.\n *\n * @param {Array} blocks Blocks to flatten.\n *\n * @return {Array} Flattened block attributes object.\n */\nfunction getFlattenedBlockAttributes( blocks ) {\n\treturn flattenBlocks( blocks, ( block ) => block.attributes );\n}\n\n/**\n * Returns true if the two object arguments have the same keys, or false\n * otherwise.\n *\n * @param {Object} a First object.\n * @param {Object} b Second object.\n *\n * @return {boolean} Whether the two objects have the same keys.\n */\nexport function hasSameKeys( a, b ) {\n\treturn fastDeepEqual( Object.keys( a ), Object.keys( b ) );\n}\n\n/**\n * Returns true if, given the currently dispatching action and the previously\n * dispatched action, the two actions are updating the same block attribute, or\n * false otherwise.\n *\n * @param {Object} action     Currently dispatching action.\n * @param {Object} lastAction Previously dispatched action.\n *\n * @return {boolean} Whether actions are updating the same block attribute.\n */\nexport function isUpdatingSameBlockAttribute( action, lastAction ) {\n\treturn (\n\t\taction.type === 'UPDATE_BLOCK_ATTRIBUTES' &&\n\t\tlastAction !== undefined &&\n\t\tlastAction.type === 'UPDATE_BLOCK_ATTRIBUTES' &&\n\t\tfastDeepEqual( action.clientIds, lastAction.clientIds ) &&\n\t\thasSameKeys( action.attributes, lastAction.attributes )\n\t);\n}\n\nfunction updateBlockTreeForBlocks( state, blocks ) {\n\tconst treeToUpdate = state.tree;\n\tconst stack = [ ...blocks ];\n\tconst flattenedBlocks = [ ...blocks ];\n\twhile ( stack.length ) {\n\t\tconst block = stack.shift();\n\t\tstack.push( ...block.innerBlocks );\n\t\tflattenedBlocks.push( ...block.innerBlocks );\n\t}\n\t// Create objects before mutating them, that way it's always defined.\n\tfor ( const block of flattenedBlocks ) {\n\t\ttreeToUpdate.set( block.clientId, {} );\n\t}\n\tfor ( const block of flattenedBlocks ) {\n\t\ttreeToUpdate.set(\n\t\t\tblock.clientId,\n\t\t\tObject.assign( treeToUpdate.get( block.clientId ), {\n\t\t\t\t...state.byClientId.get( block.clientId ),\n\t\t\t\tattributes: state.attributes.get( block.clientId ),\n\t\t\t\tinnerBlocks: block.innerBlocks.map( ( subBlock ) =>\n\t\t\t\t\ttreeToUpdate.get( subBlock.clientId )\n\t\t\t\t),\n\t\t\t} )\n\t\t);\n\t}\n}\n\nfunction updateParentInnerBlocksInTree(\n\tstate,\n\tupdatedClientIds,\n\tupdateChildrenOfUpdatedClientIds = false\n) {\n\tconst treeToUpdate = state.tree;\n\tconst uncontrolledParents = new Set( [] );\n\tconst controlledParents = new Set();\n\tfor ( const clientId of updatedClientIds ) {\n\t\tlet current = updateChildrenOfUpdatedClientIds\n\t\t\t? clientId\n\t\t\t: state.parents.get( clientId );\n\t\tdo {\n\t\t\tif ( state.controlledInnerBlocks[ current ] ) {\n\t\t\t\t// Should stop on controlled blocks.\n\t\t\t\t// If we reach a controlled parent, break out of the loop.\n\t\t\t\tcontrolledParents.add( current );\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\t// Else continue traversing up through parents.\n\t\t\t\tuncontrolledParents.add( current );\n\t\t\t\tcurrent = state.parents.get( current );\n\t\t\t}\n\t\t} while ( current !== undefined );\n\t}\n\n\t// To make sure the order of assignments doesn't matter,\n\t// we first create empty objects and mutates the inner blocks later.\n\tfor ( const clientId of uncontrolledParents ) {\n\t\ttreeToUpdate.set( clientId, { ...treeToUpdate.get( clientId ) } );\n\t}\n\tfor ( const clientId of uncontrolledParents ) {\n\t\ttreeToUpdate.get( clientId ).innerBlocks = (\n\t\t\tstate.order.get( clientId ) || []\n\t\t).map( ( subClientId ) => treeToUpdate.get( subClientId ) );\n\t}\n\n\t// Controlled parent blocks, need a dedicated key for their inner blocks\n\t// to be used when doing getBlocks( controlledBlockClientId ).\n\tfor ( const clientId of controlledParents ) {\n\t\ttreeToUpdate.set( 'controlled||' + clientId, {\n\t\t\tinnerBlocks: ( state.order.get( clientId ) || [] ).map(\n\t\t\t\t( subClientId ) => treeToUpdate.get( subClientId )\n\t\t\t),\n\t\t} );\n\t}\n}\n\n/**\n * Higher-order reducer intended to compute full block objects key for each block in the post.\n * This is a denormalization to optimize the performance of the getBlock selectors and avoid\n * recomputing the block objects and avoid heavy memoization.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withBlockTree =\n\t( reducer ) =>\n\t( state = {}, action ) => {\n\t\tconst newState = reducer( state, action );\n\n\t\tif ( newState === state ) {\n\t\t\treturn state;\n\t\t}\n\n\t\tnewState.tree = state.tree ? state.tree : new Map();\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdateBlockTreeForBlocks( newState, action.blocks );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\taction.rootClientId ? [ action.rootClientId ] : [ '' ],\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'UPDATE_BLOCK':\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tnewState.tree.set( action.clientId, {\n\t\t\t\t\t...newState.tree.get( action.clientId ),\n\t\t\t\t\t...newState.byClientId.get( action.clientId ),\n\t\t\t\t\tattributes: newState.attributes.get( action.clientId ),\n\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\t[ action.clientId ],\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'SYNC_DERIVED_BLOCK_ATTRIBUTES':\n\t\t\tcase 'UPDATE_BLOCK_ATTRIBUTES': {\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\taction.clientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.tree.set( clientId, {\n\t\t\t\t\t\t...newState.tree.get( clientId ),\n\t\t\t\t\t\tattributes: newState.attributes.get( clientId ),\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\taction.clientIds,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst inserterClientIds = getFlattenedClientIds(\n\t\t\t\t\taction.blocks\n\t\t\t\t);\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.tree.delete( clientId );\n\t\t\t\t\t// Controlled inner blocks are only removed\n\t\t\t\t\t// if the block doesn't move to another position\n\t\t\t\t\t// otherwise their content will be lost.\n\t\t\t\t\tif ( ! inserterClientIds[ clientId ] ) {\n\t\t\t\t\t\tnewState.tree.delete( 'controlled||' + clientId );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tupdateBlockTreeForBlocks( newState, action.blocks );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\taction.blocks.map( ( b ) => b.clientId ),\n\t\t\t\t\tfalse\n\t\t\t\t);\n\n\t\t\t\t// If there are no replaced blocks, it means we're removing blocks so we need to update their parent.\n\t\t\t\tconst parentsOfRemovedBlocks = [];\n\t\t\t\tfor ( const clientId of action.clientIds ) {\n\t\t\t\t\tconst parentId = state.parents.get( clientId );\n\t\t\t\t\tif (\n\t\t\t\t\t\tparentId !== undefined &&\n\t\t\t\t\t\t( parentId === '' ||\n\t\t\t\t\t\t\tnewState.byClientId.get( parentId ) )\n\t\t\t\t\t) {\n\t\t\t\t\t\tparentsOfRemovedBlocks.push( parentId );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tparentsOfRemovedBlocks,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN':\n\t\t\t\tconst parentsOfRemovedBlocks = [];\n\t\t\t\tfor ( const clientId of action.clientIds ) {\n\t\t\t\t\tconst parentId = state.parents.get( clientId );\n\t\t\t\t\tif (\n\t\t\t\t\t\tparentId !== undefined &&\n\t\t\t\t\t\t( parentId === '' ||\n\t\t\t\t\t\t\tnewState.byClientId.get( parentId ) )\n\t\t\t\t\t) {\n\t\t\t\t\t\tparentsOfRemovedBlocks.push( parentId );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.tree.delete( clientId );\n\t\t\t\t\tnewState.tree.delete( 'controlled||' + clientId );\n\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tparentsOfRemovedBlocks,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'MOVE_BLOCKS_TO_POSITION': {\n\t\t\t\tconst updatedBlockUids = [];\n\t\t\t\tif ( action.fromRootClientId ) {\n\t\t\t\t\tupdatedBlockUids.push( action.fromRootClientId );\n\t\t\t\t} else {\n\t\t\t\t\tupdatedBlockUids.push( '' );\n\t\t\t\t}\n\t\t\t\tif ( action.toRootClientId ) {\n\t\t\t\t\tupdatedBlockUids.push( action.toRootClientId );\n\t\t\t\t}\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tupdatedBlockUids,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'MOVE_BLOCKS_UP':\n\t\t\tcase 'MOVE_BLOCKS_DOWN': {\n\t\t\t\tconst updatedBlockUids = [\n\t\t\t\t\taction.rootClientId ? action.rootClientId : '',\n\t\t\t\t];\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tupdatedBlockUids,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'SAVE_REUSABLE_BLOCK_SUCCESS': {\n\t\t\t\tconst updatedBlockUids = [];\n\t\t\t\tnewState.attributes.forEach( ( attributes, clientId ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tnewState.byClientId.get( clientId ).name ===\n\t\t\t\t\t\t\t'core/block' &&\n\t\t\t\t\t\tattributes.ref === action.updatedId\n\t\t\t\t\t) {\n\t\t\t\t\t\tupdatedBlockUids.push( clientId );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdatedBlockUids.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.tree.set( clientId, {\n\t\t\t\t\t\t...newState.byClientId.get( clientId ),\n\t\t\t\t\t\tattributes: newState.attributes.get( clientId ),\n\t\t\t\t\t\tinnerBlocks: newState.tree.get( clientId ).innerBlocks,\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tupdatedBlockUids,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn newState;\n\t};\n\n/**\n * Higher-order reducer intended to augment the blocks reducer, assigning an\n * `isPersistentChange` property value corresponding to whether a change in\n * state can be considered as persistent. All changes are considered persistent\n * except when updating the same block attribute as in the previous action.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nfunction withPersistentBlockChange( reducer ) {\n\tlet lastAction;\n\tlet markNextChangeAsNotPersistent = false;\n\tlet explicitPersistent;\n\n\treturn ( state, action ) => {\n\t\tlet nextState = reducer( state, action );\n\n\t\tlet nextIsPersistentChange;\n\t\tif ( action.type === 'SET_EXPLICIT_PERSISTENT' ) {\n\t\t\texplicitPersistent = action.isPersistentChange;\n\t\t\tnextIsPersistentChange = state.isPersistentChange ?? true;\n\t\t}\n\n\t\tif ( explicitPersistent !== undefined ) {\n\t\t\tnextIsPersistentChange = explicitPersistent;\n\t\t\treturn nextIsPersistentChange === nextState.isPersistentChange\n\t\t\t\t? nextState\n\t\t\t\t: {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\tisPersistentChange: nextIsPersistentChange,\n\t\t\t\t  };\n\t\t}\n\n\t\tconst isExplicitPersistentChange =\n\t\t\taction.type === 'MARK_LAST_CHANGE_AS_PERSISTENT' ||\n\t\t\tmarkNextChangeAsNotPersistent;\n\n\t\t// Defer to previous state value (or default) unless changing or\n\t\t// explicitly marking as persistent.\n\t\tif ( state === nextState && ! isExplicitPersistentChange ) {\n\t\t\tmarkNextChangeAsNotPersistent =\n\t\t\t\taction.type === 'MARK_NEXT_CHANGE_AS_NOT_PERSISTENT';\n\n\t\t\tnextIsPersistentChange = state?.isPersistentChange ?? true;\n\t\t\tif ( state.isPersistentChange === nextIsPersistentChange ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...nextState,\n\t\t\t\tisPersistentChange: nextIsPersistentChange,\n\t\t\t};\n\t\t}\n\n\t\tnextState = {\n\t\t\t...nextState,\n\t\t\tisPersistentChange: isExplicitPersistentChange\n\t\t\t\t? ! markNextChangeAsNotPersistent\n\t\t\t\t: ! isUpdatingSameBlockAttribute( action, lastAction ),\n\t\t};\n\n\t\t// In comparing against the previous action, consider only those which\n\t\t// would have qualified as one which would have been ignored or not\n\t\t// have resulted in a changed state.\n\t\tlastAction = action;\n\t\tmarkNextChangeAsNotPersistent =\n\t\t\taction.type === 'MARK_NEXT_CHANGE_AS_NOT_PERSISTENT';\n\n\t\treturn nextState;\n\t};\n}\n\n/**\n * Higher-order reducer intended to augment the blocks reducer, assigning an\n * `isIgnoredChange` property value corresponding to whether a change in state\n * can be considered as ignored. A change is considered ignored when the result\n * of an action not incurred by direct user interaction.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nfunction withIgnoredBlockChange( reducer ) {\n\t/**\n\t * Set of action types for which a blocks state change should be ignored.\n\t *\n\t * @type {Set}\n\t */\n\tconst IGNORED_ACTION_TYPES = new Set( [ 'RECEIVE_BLOCKS' ] );\n\n\treturn ( state, action ) => {\n\t\tconst nextState = reducer( state, action );\n\n\t\tif ( nextState !== state ) {\n\t\t\tnextState.isIgnoredChange = IGNORED_ACTION_TYPES.has( action.type );\n\t\t}\n\n\t\treturn nextState;\n\t};\n}\n\n/**\n * Higher-order reducer targeting the combined blocks reducer, augmenting\n * block client IDs in remove action to include cascade of inner blocks.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withInnerBlocksRemoveCascade = ( reducer ) => ( state, action ) => {\n\t// Gets all children which need to be removed.\n\tconst getAllChildren = ( clientIds ) => {\n\t\tlet result = clientIds;\n\t\tfor ( let i = 0; i < result.length; i++ ) {\n\t\t\tif (\n\t\t\t\t! state.order.get( result[ i ] ) ||\n\t\t\t\t( action.keepControlledInnerBlocks &&\n\t\t\t\t\taction.keepControlledInnerBlocks[ result[ i ] ] )\n\t\t\t) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( result === clientIds ) {\n\t\t\t\tresult = [ ...result ];\n\t\t\t}\n\n\t\t\tresult.push( ...state.order.get( result[ i ] ) );\n\t\t}\n\t\treturn result;\n\t};\n\n\tif ( state ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'REMOVE_BLOCKS':\n\t\t\t\taction = {\n\t\t\t\t\t...action,\n\t\t\t\t\ttype: 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN',\n\t\t\t\t\tremovedClientIds: getAllChildren( action.clientIds ),\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\tcase 'REPLACE_BLOCKS':\n\t\t\t\taction = {\n\t\t\t\t\t...action,\n\t\t\t\t\ttype: 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN',\n\t\t\t\t\treplacedClientIds: getAllChildren( action.clientIds ),\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn reducer( state, action );\n};\n\n/**\n * Higher-order reducer which targets the combined blocks reducer and handles\n * the `RESET_BLOCKS` action. When dispatched, this action will replace all\n * blocks that exist in the post, leaving blocks that exist only in state (e.g.\n * reusable blocks and blocks controlled by inner blocks controllers) alone.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withBlockReset = ( reducer ) => ( state, action ) => {\n\tif ( action.type === 'RESET_BLOCKS' ) {\n\t\tconst newState = {\n\t\t\t...state,\n\t\t\tbyClientId: new Map(\n\t\t\t\tgetFlattenedBlocksWithoutAttributes( action.blocks )\n\t\t\t),\n\t\t\tattributes: new Map( getFlattenedBlockAttributes( action.blocks ) ),\n\t\t\torder: mapBlockOrder( action.blocks ),\n\t\t\tparents: new Map( mapBlockParents( action.blocks ) ),\n\t\t\tcontrolledInnerBlocks: {},\n\t\t};\n\n\t\tnewState.tree = new Map( state?.tree );\n\t\tupdateBlockTreeForBlocks( newState, action.blocks );\n\t\tnewState.tree.set( '', {\n\t\t\tinnerBlocks: action.blocks.map( ( subBlock ) =>\n\t\t\t\tnewState.tree.get( subBlock.clientId )\n\t\t\t),\n\t\t} );\n\n\t\treturn newState;\n\t}\n\n\treturn reducer( state, action );\n};\n\n/**\n * Higher-order reducer which targets the combined blocks reducer and handles\n * the `REPLACE_INNER_BLOCKS` action. When dispatched, this action the state\n * should become equivalent to the execution of a `REMOVE_BLOCKS` action\n * containing all the child's of the root block followed by the execution of\n * `INSERT_BLOCKS` with the new blocks.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withReplaceInnerBlocks = ( reducer ) => ( state, action ) => {\n\tif ( action.type !== 'REPLACE_INNER_BLOCKS' ) {\n\t\treturn reducer( state, action );\n\t}\n\n\t// Finds every nested inner block controller. We must check the action blocks\n\t// and not just the block parent state because some inner block controllers\n\t// should be deleted if specified, whereas others should not be deleted. If\n\t// a controlled should not be deleted, then we need to avoid deleting its\n\t// inner blocks from the block state because its inner blocks will not be\n\t// attached to the block in the action.\n\tconst nestedControllers = {};\n\tif ( Object.keys( state.controlledInnerBlocks ).length ) {\n\t\tconst stack = [ ...action.blocks ];\n\t\twhile ( stack.length ) {\n\t\t\tconst { innerBlocks, ...block } = stack.shift();\n\t\t\tstack.push( ...innerBlocks );\n\t\t\tif ( !! state.controlledInnerBlocks[ block.clientId ] ) {\n\t\t\t\tnestedControllers[ block.clientId ] = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t// The `keepControlledInnerBlocks` prop will keep the inner blocks of the\n\t// marked block in the block state so that they can be reattached to the\n\t// marked block when we re-insert everything a few lines below.\n\tlet stateAfterBlocksRemoval = state;\n\tif ( state.order.get( action.rootClientId ) ) {\n\t\tstateAfterBlocksRemoval = reducer( stateAfterBlocksRemoval, {\n\t\t\ttype: 'REMOVE_BLOCKS',\n\t\t\tkeepControlledInnerBlocks: nestedControllers,\n\t\t\tclientIds: state.order.get( action.rootClientId ),\n\t\t} );\n\t}\n\tlet stateAfterInsert = stateAfterBlocksRemoval;\n\tif ( action.blocks.length ) {\n\t\tstateAfterInsert = reducer( stateAfterInsert, {\n\t\t\t...action,\n\t\t\ttype: 'INSERT_BLOCKS',\n\t\t\tindex: 0,\n\t\t} );\n\n\t\t// We need to re-attach the controlled inner blocks to the blocks tree and\n\t\t// preserve their block order. Otherwise, an inner block controller's blocks\n\t\t// will be deleted entirely from its entity.\n\t\tconst stateAfterInsertOrder = new Map( stateAfterInsert.order );\n\t\tObject.keys( nestedControllers ).forEach( ( key ) => {\n\t\t\tif ( state.order.get( key ) ) {\n\t\t\t\tstateAfterInsertOrder.set( key, state.order.get( key ) );\n\t\t\t}\n\t\t} );\n\t\tstateAfterInsert.order = stateAfterInsertOrder;\n\t\tstateAfterInsert.tree = new Map( stateAfterInsert.tree );\n\t\tObject.keys( nestedControllers ).forEach( ( _key ) => {\n\t\t\tconst key = `controlled||${ _key }`;\n\t\t\tif ( state.tree.has( key ) ) {\n\t\t\t\tstateAfterInsert.tree.set( key, state.tree.get( key ) );\n\t\t\t}\n\t\t} );\n\t}\n\treturn stateAfterInsert;\n};\n\n/**\n * Higher-order reducer which targets the combined blocks reducer and handles\n * the `SAVE_REUSABLE_BLOCK_SUCCESS` action. This action can't be handled by\n * regular reducers and needs a higher-order reducer since it needs access to\n * both `byClientId` and `attributes` simultaneously.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withSaveReusableBlock = ( reducer ) => ( state, action ) => {\n\tif ( state && action.type === 'SAVE_REUSABLE_BLOCK_SUCCESS' ) {\n\t\tconst { id, updatedId } = action;\n\n\t\t// If a temporary reusable block is saved, we swap the temporary id with the final one.\n\t\tif ( id === updatedId ) {\n\t\t\treturn state;\n\t\t}\n\n\t\tstate = { ...state };\n\t\tstate.attributes = new Map( state.attributes );\n\t\tstate.attributes.forEach( ( attributes, clientId ) => {\n\t\t\tconst { name } = state.byClientId.get( clientId );\n\t\t\tif ( name === 'core/block' && attributes.ref === id ) {\n\t\t\t\tstate.attributes.set( clientId, {\n\t\t\t\t\t...attributes,\n\t\t\t\t\tref: updatedId,\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn reducer( state, action );\n};\n/**\n * Higher-order reducer which removes blocks from state when switching parent block controlled state.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withResetControlledBlocks = ( reducer ) => ( state, action ) => {\n\tif ( action.type === 'SET_HAS_CONTROLLED_INNER_BLOCKS' ) {\n\t\t// when switching a block from controlled to uncontrolled or inverse,\n\t\t// we need to remove its content first.\n\t\tconst tempState = reducer( state, {\n\t\t\ttype: 'REPLACE_INNER_BLOCKS',\n\t\t\trootClientId: action.clientId,\n\t\t\tblocks: [],\n\t\t} );\n\t\treturn reducer( tempState, action );\n\t}\n\n\treturn reducer( state, action );\n};\n\n/**\n * Reducer returning the blocks state.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport const blocks = pipe(\n\tcombineReducers,\n\twithSaveReusableBlock, // Needs to be before withBlockCache.\n\twithBlockTree, // Needs to be before withInnerBlocksRemoveCascade.\n\twithInnerBlocksRemoveCascade,\n\twithReplaceInnerBlocks, // Needs to be after withInnerBlocksRemoveCascade.\n\twithBlockReset,\n\twithPersistentBlockChange,\n\twithIgnoredBlockChange,\n\twithResetControlledBlocks\n)( {\n\t// The state is using a Map instead of a plain object for performance reasons.\n\t// You can run the \"./test/performance.js\" unit test to check the impact\n\t// code changes can have on this reducer.\n\tbyClientId( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tgetFlattenedBlocksWithoutAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'UPDATE_BLOCK': {\n\t\t\t\t// Ignore updates if block isn't known.\n\t\t\t\tif ( ! state.has( action.clientId ) ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\t// Do nothing if only attributes change.\n\t\t\t\tconst { attributes, ...changes } = action.updates;\n\t\t\t\tif ( Object.values( changes ).length === 0 ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set( action.clientId, {\n\t\t\t\t\t...state.get( action.clientId ),\n\t\t\t\t\t...changes,\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tif ( ! action.blocks ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\n\t\t\t\tgetFlattenedBlocksWithoutAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\t// The state is using a Map instead of a plain object for performance reasons.\n\t// You can run the \"./test/performance.js\" unit test to check the impact\n\t// code changes can have on this reducer.\n\tattributes( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tgetFlattenedBlockAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'UPDATE_BLOCK': {\n\t\t\t\t// Ignore updates if block isn't known or there are no attribute changes.\n\t\t\t\tif (\n\t\t\t\t\t! state.get( action.clientId ) ||\n\t\t\t\t\t! action.updates.attributes\n\t\t\t\t) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set( action.clientId, {\n\t\t\t\t\t...state.get( action.clientId ),\n\t\t\t\t\t...action.updates.attributes,\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'SYNC_DERIVED_BLOCK_ATTRIBUTES':\n\t\t\tcase 'UPDATE_BLOCK_ATTRIBUTES': {\n\t\t\t\t// Avoid a state change if none of the block IDs are known.\n\t\t\t\tif ( action.clientIds.every( ( id ) => ! state.get( id ) ) ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tlet hasChange = false;\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tfor ( const clientId of action.clientIds ) {\n\t\t\t\t\tconst updatedAttributeEntries = Object.entries(\n\t\t\t\t\t\taction.uniqueByBlock\n\t\t\t\t\t\t\t? action.attributes[ clientId ]\n\t\t\t\t\t\t\t: action.attributes ?? {}\n\t\t\t\t\t);\n\t\t\t\t\tif ( updatedAttributeEntries.length === 0 ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tlet hasUpdatedAttributes = false;\n\t\t\t\t\tconst existingAttributes = state.get( clientId );\n\t\t\t\t\tconst newAttributes = {};\n\t\t\t\t\tupdatedAttributeEntries.forEach( ( [ key, value ] ) => {\n\t\t\t\t\t\tif ( existingAttributes[ key ] !== value ) {\n\t\t\t\t\t\t\thasUpdatedAttributes = true;\n\t\t\t\t\t\t\tnewAttributes[ key ] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t\thasChange = hasChange || hasUpdatedAttributes;\n\t\t\t\t\tif ( hasUpdatedAttributes ) {\n\t\t\t\t\t\tnewState.set( clientId, {\n\t\t\t\t\t\t\t...existingAttributes,\n\t\t\t\t\t\t\t...newAttributes,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn hasChange ? newState : state;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tif ( ! action.blocks ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tgetFlattenedBlockAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\t// The state is using a Map instead of a plain object for performance reasons.\n\t// You can run the \"./test/performance.js\" unit test to check the impact\n\t// code changes can have on this reducer.\n\torder( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS': {\n\t\t\t\tconst blockOrder = mapBlockOrder( action.blocks );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tblockOrder.forEach( ( order, clientId ) => {\n\t\t\t\t\tif ( clientId !== '' ) {\n\t\t\t\t\t\tnewState.set( clientId, order );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tnewState.set(\n\t\t\t\t\t'',\n\t\t\t\t\t( state.get( '' ) ?? [] ).concat( blockOrder[ '' ] )\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst { rootClientId = '' } = action;\n\t\t\t\tconst subState = state.get( rootClientId ) || [];\n\t\t\t\tconst mappedBlocks = mapBlockOrder(\n\t\t\t\t\taction.blocks,\n\t\t\t\t\trootClientId\n\t\t\t\t);\n\t\t\t\tconst { index = subState.length } = action;\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tmappedBlocks.forEach( ( order, clientId ) => {\n\t\t\t\t\tnewState.set( clientId, order );\n\t\t\t\t} );\n\t\t\t\tnewState.set(\n\t\t\t\t\trootClientId,\n\t\t\t\t\tinsertAt(\n\t\t\t\t\t\tsubState,\n\t\t\t\t\t\tmappedBlocks.get( rootClientId ),\n\t\t\t\t\t\tindex\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCKS_TO_POSITION': {\n\t\t\t\tconst {\n\t\t\t\t\tfromRootClientId = '',\n\t\t\t\t\ttoRootClientId = '',\n\t\t\t\t\tclientIds,\n\t\t\t\t} = action;\n\t\t\t\tconst { index = state.get( toRootClientId ).length } = action;\n\n\t\t\t\t// Moving inside the same parent block.\n\t\t\t\tif ( fromRootClientId === toRootClientId ) {\n\t\t\t\t\tconst subState = state.get( toRootClientId );\n\t\t\t\t\tconst fromIndex = subState.indexOf( clientIds[ 0 ] );\n\t\t\t\t\tconst newState = new Map( state );\n\t\t\t\t\tnewState.set(\n\t\t\t\t\t\ttoRootClientId,\n\t\t\t\t\t\tmoveTo(\n\t\t\t\t\t\t\tstate.get( toRootClientId ),\n\t\t\t\t\t\t\tfromIndex,\n\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\tclientIds.length\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\treturn newState;\n\t\t\t\t}\n\n\t\t\t\t// Moving from a parent block to another.\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set(\n\t\t\t\t\tfromRootClientId,\n\t\t\t\t\tstate\n\t\t\t\t\t\t.get( fromRootClientId )\n\t\t\t\t\t\t?.filter( ( id ) => ! clientIds.includes( id ) ) ?? []\n\t\t\t\t);\n\t\t\t\tnewState.set(\n\t\t\t\t\ttoRootClientId,\n\t\t\t\t\tinsertAt( state.get( toRootClientId ), clientIds, index )\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCKS_UP': {\n\t\t\t\tconst { clientIds, rootClientId = '' } = action;\n\t\t\t\tconst firstClientId = clientIds[ 0 ];\n\t\t\t\tconst subState = state.get( rootClientId );\n\n\t\t\t\tif ( ! subState.length || firstClientId === subState[ 0 ] ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst firstIndex = subState.indexOf( firstClientId );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set(\n\t\t\t\t\trootClientId,\n\t\t\t\t\tmoveTo(\n\t\t\t\t\t\tsubState,\n\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\tfirstIndex - 1,\n\t\t\t\t\t\tclientIds.length\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCKS_DOWN': {\n\t\t\t\tconst { clientIds, rootClientId = '' } = action;\n\t\t\t\tconst firstClientId = clientIds[ 0 ];\n\t\t\t\tconst lastClientId = clientIds[ clientIds.length - 1 ];\n\t\t\t\tconst subState = state.get( rootClientId );\n\n\t\t\t\tif (\n\t\t\t\t\t! subState.length ||\n\t\t\t\t\tlastClientId === subState[ subState.length - 1 ]\n\t\t\t\t) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst firstIndex = subState.indexOf( firstClientId );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set(\n\t\t\t\t\trootClientId,\n\t\t\t\t\tmoveTo(\n\t\t\t\t\t\tsubState,\n\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\tfirstIndex + 1,\n\t\t\t\t\t\tclientIds.length\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst { clientIds } = action;\n\t\t\t\tif ( ! action.blocks ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst mappedBlocks = mapBlockOrder( action.blocks );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tmappedBlocks.forEach( ( order, clientId ) => {\n\t\t\t\t\tif ( clientId !== '' ) {\n\t\t\t\t\t\tnewState.set( clientId, order );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tnewState.forEach( ( order, clientId ) => {\n\t\t\t\t\tconst newSubOrder = Object.values( order ).reduce(\n\t\t\t\t\t\t( result, subClientId ) => {\n\t\t\t\t\t\t\tif ( subClientId === clientIds[ 0 ] ) {\n\t\t\t\t\t\t\t\treturn [ ...result, ...mappedBlocks.get( '' ) ];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( clientIds.indexOf( subClientId ) === -1 ) {\n\t\t\t\t\t\t\t\tresult.push( subClientId );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[]\n\t\t\t\t\t);\n\t\t\t\t\tnewState.set( clientId, newSubOrder );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\t// Remove inner block ordering for removed blocks.\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tnewState.forEach( ( order, clientId ) => {\n\t\t\t\t\tconst newSubOrder =\n\t\t\t\t\t\torder?.filter(\n\t\t\t\t\t\t\t( id ) => ! action.removedClientIds.includes( id )\n\t\t\t\t\t\t) ?? [];\n\t\t\t\t\tif ( newSubOrder.length !== order.length ) {\n\t\t\t\t\t\tnewState.set( clientId, newSubOrder );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\t// While technically redundant data as the inverse of `order`, it serves as\n\t// an optimization for the selectors which derive the ancestry of a block.\n\tparents( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tmapBlockParents( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tmapBlockParents(\n\t\t\t\t\taction.blocks,\n\t\t\t\t\taction.rootClientId || ''\n\t\t\t\t).forEach( ( [ key, value ] ) => {\n\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'MOVE_BLOCKS_TO_POSITION': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.clientIds.forEach( ( id ) => {\n\t\t\t\t\tnewState.set( id, action.toRootClientId || '' );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tmapBlockParents(\n\t\t\t\t\taction.blocks,\n\t\t\t\t\tstate.get( action.clientIds[ 0 ] )\n\t\t\t\t).forEach( ( [ key, value ] ) => {\n\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\tcontrolledInnerBlocks(\n\t\tstate = {},\n\t\t{ type, clientId, hasControlledInnerBlocks }\n\t) {\n\t\tif ( type === 'SET_HAS_CONTROLLED_INNER_BLOCKS' ) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ clientId ]: hasControlledInnerBlocks,\n\t\t\t};\n\t\t}\n\t\treturn state;\n\t},\n} );\n\n/**\n * Reducer returning visibility status of block interface.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isBlockInterfaceHidden( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'HIDE_BLOCK_INTERFACE':\n\t\t\treturn true;\n\n\t\tcase 'SHOW_BLOCK_INTERFACE':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning typing state.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isTyping( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_TYPING':\n\t\t\treturn true;\n\n\t\tcase 'STOP_TYPING':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning dragging state. It is possible for a user to be dragging\n * data from outside of the editor, so this state is separate from `draggedBlocks`.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isDragging( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_DRAGGING':\n\t\t\treturn true;\n\n\t\tcase 'STOP_DRAGGING':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning dragged block client id.\n *\n * @param {string[]} state  Current state.\n * @param {Object}   action Dispatched action.\n *\n * @return {string[]} Updated state.\n */\nexport function draggedBlocks( state = [], action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_DRAGGING_BLOCKS':\n\t\t\treturn action.clientIds;\n\n\t\tcase 'STOP_DRAGGING_BLOCKS':\n\t\t\treturn [];\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer tracking the visible blocks.\n *\n * @param {Record<string,boolean>} state  Current state.\n * @param {Object}                 action Dispatched action.\n *\n * @return {Record<string,boolean>} Block visibility.\n */\nexport function blockVisibility( state = {}, action ) {\n\tif ( action.type === 'SET_BLOCK_VISIBILITY' ) {\n\t\treturn {\n\t\t\t...state,\n\t\t\t...action.updates,\n\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Internal helper reducer for selectionStart and selectionEnd. Can hold a block\n * selection, represented by an object with property clientId.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nfunction selectionHelper( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'CLEAR_SELECTED_BLOCK': {\n\t\t\tif ( state.clientId ) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn state;\n\t\t}\n\t\tcase 'SELECT_BLOCK':\n\t\t\tif ( action.clientId === state.clientId ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { clientId: action.clientId };\n\t\tcase 'REPLACE_INNER_BLOCKS':\n\t\tcase 'INSERT_BLOCKS': {\n\t\t\tif ( ! action.updateSelection || ! action.blocks.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { clientId: action.blocks[ 0 ].clientId };\n\t\t}\n\t\tcase 'REMOVE_BLOCKS':\n\t\t\tif (\n\t\t\t\t! action.clientIds ||\n\t\t\t\t! action.clientIds.length ||\n\t\t\t\taction.clientIds.indexOf( state.clientId ) === -1\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {};\n\t\tcase 'REPLACE_BLOCKS': {\n\t\t\tif ( action.clientIds.indexOf( state.clientId ) === -1 ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst blockToSelect =\n\t\t\t\taction.blocks[ action.indexToSelect ] ||\n\t\t\t\taction.blocks[ action.blocks.length - 1 ];\n\n\t\t\tif ( ! blockToSelect ) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tif ( blockToSelect.clientId === state.clientId ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { clientId: blockToSelect.clientId };\n\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the selection state.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function selection( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SELECTION_CHANGE':\n\t\t\tif ( action.clientId ) {\n\t\t\t\treturn {\n\t\t\t\t\tselectionStart: {\n\t\t\t\t\t\tclientId: action.clientId,\n\t\t\t\t\t\tattributeKey: action.attributeKey,\n\t\t\t\t\t\toffset: action.startOffset,\n\t\t\t\t\t},\n\t\t\t\t\tselectionEnd: {\n\t\t\t\t\t\tclientId: action.clientId,\n\t\t\t\t\t\tattributeKey: action.attributeKey,\n\t\t\t\t\t\toffset: action.endOffset,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tselectionStart: action.start || state.selectionStart,\n\t\t\t\tselectionEnd: action.end || state.selectionEnd,\n\t\t\t};\n\t\tcase 'RESET_SELECTION':\n\t\t\tconst { selectionStart, selectionEnd } = action;\n\t\t\treturn {\n\t\t\t\tselectionStart,\n\t\t\t\tselectionEnd,\n\t\t\t};\n\t\tcase 'MULTI_SELECT':\n\t\t\tconst { start, end } = action;\n\n\t\t\tif (\n\t\t\t\tstart === state.selectionStart?.clientId &&\n\t\t\t\tend === state.selectionEnd?.clientId\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tselectionStart: { clientId: start },\n\t\t\t\tselectionEnd: { clientId: end },\n\t\t\t};\n\t\tcase 'RESET_BLOCKS':\n\t\t\tconst startClientId = state?.selectionStart?.clientId;\n\t\t\tconst endClientId = state?.selectionEnd?.clientId;\n\n\t\t\t// Do nothing if there's no selected block.\n\t\t\tif ( ! startClientId && ! endClientId ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\t// If the start of the selection won't exist after reset, remove selection.\n\t\t\tif (\n\t\t\t\t! action.blocks.some(\n\t\t\t\t\t( block ) => block.clientId === startClientId\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tselectionStart: {},\n\t\t\t\t\tselectionEnd: {},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If the end of the selection won't exist after reset, collapse selection.\n\t\t\tif (\n\t\t\t\t! action.blocks.some(\n\t\t\t\t\t( block ) => block.clientId === endClientId\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectionEnd: state.selectionStart,\n\t\t\t\t};\n\t\t\t}\n\t}\n\n\tconst selectionStart = selectionHelper( state.selectionStart, action );\n\tconst selectionEnd = selectionHelper( state.selectionEnd, action );\n\n\tif (\n\t\tselectionStart === state.selectionStart &&\n\t\tselectionEnd === state.selectionEnd\n\t) {\n\t\treturn state;\n\t}\n\n\treturn {\n\t\tselectionStart,\n\t\tselectionEnd,\n\t};\n}\n\n/**\n * Reducer returning whether the user is multi-selecting.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isMultiSelecting( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_MULTI_SELECT':\n\t\t\treturn true;\n\n\t\tcase 'STOP_MULTI_SELECT':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning whether selection is enabled.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isSelectionEnabled( state = true, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'TOGGLE_SELECTION':\n\t\t\treturn action.isSelectionEnabled;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the data needed to display a prompt when certain blocks\n * are removed, or `false` if no such prompt is requested.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {Object|false} Data for removal prompt display, if any.\n */\nfunction removalPromptData( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'DISPLAY_BLOCK_REMOVAL_PROMPT':\n\t\t\tconst { clientIds, selectPrevious, message } = action;\n\t\t\treturn {\n\t\t\t\tclientIds,\n\t\t\t\tselectPrevious,\n\t\t\t\tmessage,\n\t\t\t};\n\t\tcase 'CLEAR_BLOCK_REMOVAL_PROMPT':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning any rules that a block editor may provide in order to\n * prevent a user from accidentally removing certain blocks. These rules are\n * then used to display a confirmation prompt to the user. For instance, in the\n * Site Editor, the Query Loop block is important enough to warrant such\n * confirmation.\n *\n * The data is a record whose keys are block types (e.g. 'core/query') and\n * whose values are the explanation to be shown to users (e.g. 'Query Loop\n * displays a list of posts or pages.').\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {Record<string,string>} Updated state.\n */\nfunction blockRemovalRules( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_BLOCK_REMOVAL_RULES':\n\t\t\treturn action.rules;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the initial block selection.\n *\n * Currently this in only used to restore the selection after block deletion and\n * pasting new content.This reducer should eventually be removed in favour of setting\n * selection directly.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {number|null} Initial position: 0, -1 or null.\n */\nexport function initialPosition( state = null, action ) {\n\tif (\n\t\taction.type === 'REPLACE_BLOCKS' &&\n\t\taction.initialPosition !== undefined\n\t) {\n\t\treturn action.initialPosition;\n\t} else if (\n\t\t[\n\t\t\t'MULTI_SELECT',\n\t\t\t'SELECT_BLOCK',\n\t\t\t'RESET_SELECTION',\n\t\t\t'INSERT_BLOCKS',\n\t\t\t'REPLACE_INNER_BLOCKS',\n\t\t].includes( action.type )\n\t) {\n\t\treturn action.initialPosition;\n\t}\n\n\treturn state;\n}\n\nexport function blocksMode( state = {}, action ) {\n\tif ( action.type === 'TOGGLE_BLOCK_MODE' ) {\n\t\tconst { clientId } = action;\n\t\treturn {\n\t\t\t...state,\n\t\t\t[ clientId ]:\n\t\t\t\tstate[ clientId ] && state[ clientId ] === 'html'\n\t\t\t\t\t? 'visual'\n\t\t\t\t\t: 'html',\n\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the block insertion point visibility, either null if there\n * is not an explicit insertion point assigned, or an object of its `index` and\n * `rootClientId`.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function insertionCue( state = null, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SHOW_INSERTION_POINT': {\n\t\t\tconst {\n\t\t\t\trootClientId,\n\t\t\t\tindex,\n\t\t\t\t__unstableWithInserter,\n\t\t\t\toperation,\n\t\t\t\tnearestSide,\n\t\t\t} = action;\n\t\t\tconst nextState = {\n\t\t\t\trootClientId,\n\t\t\t\tindex,\n\t\t\t\t__unstableWithInserter,\n\t\t\t\toperation,\n\t\t\t\tnearestSide,\n\t\t\t};\n\n\t\t\t// Bail out updates if the states are the same.\n\t\t\treturn fastDeepEqual( state, nextState ) ? state : nextState;\n\t\t}\n\n\t\tcase 'HIDE_INSERTION_POINT':\n\t\t\treturn null;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning whether the post blocks match the defined template or not.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function template( state = { isValid: true }, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_TEMPLATE_VALIDITY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisValid: action.isValid,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the editor setting.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function settings( state = SETTINGS_DEFAULTS, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'UPDATE_SETTINGS': {\n\t\t\tconst updatedSettings = action.reset\n\t\t\t\t? {\n\t\t\t\t\t\t...SETTINGS_DEFAULTS,\n\t\t\t\t\t\t...action.settings,\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\t...action.settings,\n\t\t\t\t  };\n\n\t\t\tObject.defineProperty( updatedSettings, '__unstableIsPreviewMode', {\n\t\t\t\tget() {\n\t\t\t\t\tdeprecated( '__unstableIsPreviewMode', {\n\t\t\t\t\t\tsince: '6.8',\n\t\t\t\t\t\talternative: 'isPreviewMode',\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn this.isPreviewMode;\n\t\t\t\t},\n\t\t\t} );\n\n\t\t\treturn updatedSettings;\n\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the user preferences.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {string} Updated state.\n */\nexport function preferences( state = PREFERENCES_DEFAULTS, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'INSERT_BLOCKS':\n\t\tcase 'REPLACE_BLOCKS': {\n\t\t\tconst nextInsertUsage = action.blocks.reduce(\n\t\t\t\t( prevUsage, block ) => {\n\t\t\t\t\tconst { attributes, name: blockName } = block;\n\t\t\t\t\tlet id = blockName;\n\t\t\t\t\t// If a block variation match is found change the name to be the same with the\n\t\t\t\t\t// one that is used for block variations in the Inserter (`getItemFromVariation`).\n\t\t\t\t\tconst match = select( blocksStore ).getActiveBlockVariation(\n\t\t\t\t\t\tblockName,\n\t\t\t\t\t\tattributes\n\t\t\t\t\t);\n\t\t\t\t\tif ( match?.name ) {\n\t\t\t\t\t\tid += '/' + match.name;\n\t\t\t\t\t}\n\t\t\t\t\tif ( blockName === 'core/block' ) {\n\t\t\t\t\t\tid += '/' + attributes.ref;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prevUsage,\n\t\t\t\t\t\t[ id ]: {\n\t\t\t\t\t\t\ttime: action.time,\n\t\t\t\t\t\t\tcount: prevUsage[ id ]\n\t\t\t\t\t\t\t\t? prevUsage[ id ].count + 1\n\t\t\t\t\t\t\t\t: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tstate.insertUsage\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tinsertUsage: nextInsertUsage,\n\t\t\t};\n\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning an object where each key is a block client ID, its value\n * representing the settings for its nested blocks.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport const blockListSettings = ( state = {}, action ) => {\n\tswitch ( action.type ) {\n\t\t// Even if the replaced blocks have the same client ID, our logic\n\t\t// should correct the state.\n\t\tcase 'REPLACE_BLOCKS':\n\t\tcase 'REMOVE_BLOCKS': {\n\t\t\treturn Object.fromEntries(\n\t\t\t\tObject.entries( state ).filter(\n\t\t\t\t\t( [ id ] ) => ! action.clientIds.includes( id )\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tcase 'UPDATE_BLOCK_LIST_SETTINGS': {\n\t\t\tconst updates =\n\t\t\t\ttypeof action.clientId === 'string'\n\t\t\t\t\t? { [ action.clientId ]: action.settings }\n\t\t\t\t\t: action.clientId;\n\n\t\t\t// Remove settings that are the same as the current state.\n\t\t\tfor ( const clientId in updates ) {\n\t\t\t\tif ( ! updates[ clientId ] ) {\n\t\t\t\t\tif ( ! state[ clientId ] ) {\n\t\t\t\t\t\tdelete updates[ clientId ];\n\t\t\t\t\t}\n\t\t\t\t} else if (\n\t\t\t\t\tfastDeepEqual( state[ clientId ], updates[ clientId ] )\n\t\t\t\t) {\n\t\t\t\t\tdelete updates[ clientId ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( Object.keys( updates ).length === 0 ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst merged = { ...state, ...updates };\n\n\t\t\tfor ( const clientId in updates ) {\n\t\t\t\tif ( ! updates[ clientId ] ) {\n\t\t\t\t\tdelete merged[ clientId ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn merged;\n\t\t}\n\t}\n\treturn state;\n};\n\n/**\n * Reducer return an updated state representing the most recent block attribute\n * update. The state is structured as an object where the keys represent the\n * client IDs of blocks, the values a subset of attributes from the most recent\n * block update. The state is always reset to null if the last action is\n * anything other than an attributes update.\n *\n * @param {Object<string,Object>} state  Current state.\n * @param {Object}                action Action object.\n *\n * @return {[string,Object]} Updated state.\n */\nexport function lastBlockAttributesChange( state = null, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'UPDATE_BLOCK':\n\t\t\tif ( ! action.updates.attributes ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn { [ action.clientId ]: action.updates.attributes };\n\n\t\tcase 'UPDATE_BLOCK_ATTRIBUTES':\n\t\t\treturn action.clientIds.reduce(\n\t\t\t\t( accumulator, id ) => ( {\n\t\t\t\t\t...accumulator,\n\t\t\t\t\t[ id ]: action.uniqueByBlock\n\t\t\t\t\t\t? action.attributes[ id ]\n\t\t\t\t\t\t: action.attributes,\n\t\t\t\t} ),\n\t\t\t\t{}\n\t\t\t);\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning current highlighted block.\n *\n * @param {boolean} state  Current highlighted block.\n * @param {Object}  action Dispatched action.\n *\n * @return {string} Updated state.\n */\nexport function highlightedBlock( state, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'TOGGLE_BLOCK_HIGHLIGHT':\n\t\t\tconst { clientId, isHighlighted } = action;\n\n\t\t\tif ( isHighlighted ) {\n\t\t\t\treturn clientId;\n\t\t\t} else if ( state === clientId ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn state;\n\t\tcase 'SELECT_BLOCK':\n\t\t\tif ( action.clientId !== state ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning current expanded block in the list view.\n *\n * @param {string|null} state  Current expanded block.\n * @param {Object}      action Dispatched action.\n *\n * @return {string|null} Updated state.\n */\nexport function expandedBlock( state = null, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_BLOCK_EXPANDED_IN_LIST_VIEW':\n\t\t\treturn action.clientId;\n\t\tcase 'SELECT_BLOCK':\n\t\t\tif ( action.clientId !== state ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the block insertion event list state.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function lastBlockInserted( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'INSERT_BLOCKS':\n\t\tcase 'REPLACE_BLOCKS':\n\t\t\tif ( ! action.blocks.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst clientIds = action.blocks.map( ( block ) => {\n\t\t\t\treturn block.clientId;\n\t\t\t} );\n\n\t\t\tconst source = action.meta?.source;\n\n\t\t\treturn { clientIds, source };\n\t\tcase 'RESET_BLOCKS':\n\t\t\treturn {};\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning the block that is eding temporarily edited as blocks.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function temporarilyEditingAsBlocks( state = '', action ) {\n\tif ( action.type === 'SET_TEMPORARILY_EDITING_AS_BLOCKS' ) {\n\t\treturn action.temporarilyEditingAsBlocks;\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning the focus mode that should be used when temporarily edit as blocks finishes.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function temporarilyEditingFocusModeRevert( state = '', action ) {\n\tif ( action.type === 'SET_TEMPORARILY_EDITING_AS_BLOCKS' ) {\n\t\treturn action.focusModeToRevert;\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning a map of block client IDs to block editing modes.\n *\n * @param {Map}    state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Map} Updated state.\n */\nexport function blockEditingModes( state = new Map(), action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_BLOCK_EDITING_MODE':\n\t\t\tif ( state.get( action.clientId ) === action.mode ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn new Map( state ).set( action.clientId, action.mode );\n\t\tcase 'UNSET_BLOCK_EDITING_MODE': {\n\t\t\tif ( ! state.has( action.clientId ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\tconst newState = new Map( state );\n\t\t\tnewState.delete( action.clientId );\n\t\t\treturn newState;\n\t\t}\n\t\tcase 'RESET_BLOCKS': {\n\t\t\treturn state.has( '' )\n\t\t\t\t? new Map().set( '', state.get( '' ) )\n\t\t\t\t: state;\n\t\t}\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning the clientId of the block settings menu that is currently open.\n *\n * @param {string|null} state  Current state.\n * @param {Object}      action Dispatched action.\n *\n * @return {string|null} Updated state.\n */\nexport function openedBlockSettingsMenu( state = null, action ) {\n\tif ( 'SET_OPENED_BLOCK_SETTINGS_MENU' === action.type ) {\n\t\treturn action?.clientId ?? null;\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning a map of style IDs to style overrides.\n *\n * @param {Map}    state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Map} Updated state.\n */\nexport function styleOverrides( state = new Map(), action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_STYLE_OVERRIDE':\n\t\t\treturn new Map( state ).set( action.id, action.style );\n\t\tcase 'DELETE_STYLE_OVERRIDE': {\n\t\t\tconst newState = new Map( state );\n\t\t\tnewState.delete( action.id );\n\t\t\treturn newState;\n\t\t}\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning a map of the registered inserter media categories.\n *\n * @param {Array}  state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Array} Updated state.\n */\nexport function registeredInserterMediaCategories( state = [], action ) {\n\tswitch ( action.type ) {\n\t\tcase 'REGISTER_INSERTER_MEDIA_CATEGORY':\n\t\t\treturn [ ...state, action.category ];\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer setting last focused element\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function lastFocus( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'LAST_FOCUS':\n\t\t\treturn action.lastFocus;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer setting zoom out state.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {number} Updated state.\n */\nexport function zoomLevel( state = 100, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_ZOOM_LEVEL':\n\t\t\treturn action.zoom;\n\t\tcase 'RESET_ZOOM_LEVEL':\n\t\t\treturn 100;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer setting the insertion point\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function insertionPoint( state = null, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_INSERTION_POINT':\n\t\t\treturn action.value;\n\t\tcase 'SELECT_BLOCK':\n\t\t\treturn null;\n\t}\n\n\treturn state;\n}\n\nconst combinedReducers = combineReducers( {\n\tblocks,\n\tisDragging,\n\tisTyping,\n\tisBlockInterfaceHidden,\n\tdraggedBlocks,\n\tselection,\n\tisMultiSelecting,\n\tisSelectionEnabled,\n\tinitialPosition,\n\tblocksMode,\n\tblockListSettings,\n\tinsertionPoint,\n\tinsertionCue,\n\ttemplate,\n\tsettings,\n\tpreferences,\n\tlastBlockAttributesChange,\n\tlastFocus,\n\texpandedBlock,\n\thighlightedBlock,\n\tlastBlockInserted,\n\ttemporarilyEditingAsBlocks,\n\ttemporarilyEditingFocusModeRevert,\n\tblockVisibility,\n\tblockEditingModes,\n\tstyleOverrides,\n\tremovalPromptData,\n\tblockRemovalRules,\n\topenedBlockSettingsMenu,\n\tregisteredInserterMediaCategories,\n\tzoomLevel,\n} );\n\n/**\n * Retrieves a block's tree structure, handling both controlled and uncontrolled inner blocks.\n *\n * @param {Object} state    The current state object.\n * @param {string} clientId The client ID of the block to retrieve.\n *\n * @return {Object|undefined} The block tree object, or undefined if not found. For controlled blocks,\n *                           returns a merged tree with controlled inner blocks.\n */\nfunction getBlockTreeBlock( state, clientId ) {\n\tif ( clientId === '' ) {\n\t\tconst rootBlock = state.blocks.tree.get( clientId );\n\n\t\tif ( ! rootBlock ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Patch the root block to have a clientId property.\n\t\t// TODO - consider updating the blocks reducer so that the root block has this property.\n\t\treturn {\n\t\t\tclientId: '',\n\t\t\t...rootBlock,\n\t\t};\n\t}\n\n\tif ( ! state.blocks.controlledInnerBlocks[ clientId ] ) {\n\t\treturn state.blocks.tree.get( clientId );\n\t}\n\n\tconst controlledTree = state.blocks.tree.get( `controlled||${ clientId }` );\n\tconst regularTree = state.blocks.tree.get( clientId );\n\n\treturn {\n\t\t...regularTree,\n\t\tinnerBlocks: controlledTree?.innerBlocks,\n\t};\n}\n\n/**\n * Recursively traverses through a block tree of a given block and executes a callback for each block.\n *\n * @param {Object}   state    The store state.\n * @param {string}   clientId The clientId of the block to start traversing from.\n * @param {Function} callback Function to execute for each block encountered during traversal.\n *                            The callback receives the current block as its argument.\n */\nfunction traverseBlockTree( state, clientId, callback ) {\n\tconst tree = getBlockTreeBlock( state, clientId );\n\tif ( ! tree ) {\n\t\treturn;\n\t}\n\n\tcallback( tree );\n\n\tif ( ! tree?.innerBlocks?.length ) {\n\t\treturn;\n\t}\n\n\tfor ( const innerBlock of tree?.innerBlocks ) {\n\t\ttraverseBlockTree( state, innerBlock.clientId, callback );\n\t}\n}\n\n/**\n * Checks if a block has a parent in a list of client IDs, and if so returns the client ID of the parent.\n *\n * @param {Object} state     The current state object.\n * @param {string} clientId  The client ID of the block to search the parents of.\n * @param {Array}  clientIds The client IDs of the blocks to check.\n *\n * @return {string|undefined} The client ID of the parent block if found, undefined otherwise.\n */\nfunction findParentInClientIdsList( state, clientId, clientIds ) {\n\tif ( ! clientIds.length ) {\n\t\treturn;\n\t}\n\n\tlet parent = state.blocks.parents.get( clientId );\n\twhile ( parent !== undefined ) {\n\t\tif ( clientIds.includes( parent ) ) {\n\t\t\treturn parent;\n\t\t}\n\t\tparent = state.blocks.parents.get( parent );\n\t}\n}\n\n/**\n * Checks if a block has any bindings in its metadata attributes.\n *\n * @param {Object} block The block object to check for bindings.\n * @return {boolean}    True if the block has bindings, false otherwise.\n */\nfunction hasBindings( block ) {\n\treturn (\n\t\tblock?.attributes?.metadata?.bindings &&\n\t\tObject.keys( block?.attributes?.metadata?.bindings ).length\n\t);\n}\n\n/**\n * Computes and returns derived block editing modes for a given block tree.\n *\n * This function calculates the editing modes for each block in the tree, taking into account\n * various factors such as zoom level, navigation mode, sections, and synced patterns.\n *\n * @param {Object}  state        The current state object.\n * @param {boolean} isNavMode    Whether the navigation mode is active.\n * @param {string}  treeClientId The client ID of the root block for the tree. Defaults to an empty string.\n * @return {Map} A Map containing the derived block editing modes, keyed by block client ID.\n */\nfunction getDerivedBlockEditingModesForTree(\n\tstate,\n\tisNavMode = false,\n\ttreeClientId = ''\n) {\n\tconst isZoomedOut =\n\t\tstate?.zoomLevel < 100 || state?.zoomLevel === 'auto-scaled';\n\tconst derivedBlockEditingModes = new Map();\n\n\t// When there are sections, the majority of blocks are disabled,\n\t// so the default block editing mode is set to disabled.\n\tconst sectionRootClientId = state.settings?.[ sectionRootClientIdKey ];\n\tconst sectionClientIds = state.blocks.order.get( sectionRootClientId );\n\tconst hasDisabledBlocks = Array.from( state.blockEditingModes ).some(\n\t\t( [ , mode ] ) => mode === 'disabled'\n\t);\n\tconst templatePartClientIds = [];\n\tconst syncedPatternClientIds = [];\n\n\tObject.keys( state.blocks.controlledInnerBlocks ).forEach( ( clientId ) => {\n\t\tconst block = state.blocks.byClientId?.get( clientId );\n\n\t\tif ( block?.name === 'core/template-part' ) {\n\t\t\ttemplatePartClientIds.push( clientId );\n\t\t}\n\n\t\tif ( block?.name === 'core/block' ) {\n\t\t\tsyncedPatternClientIds.push( clientId );\n\t\t}\n\t} );\n\n\ttraverseBlockTree( state, treeClientId, ( block ) => {\n\t\tconst { clientId, name: blockName } = block;\n\n\t\t// If the block already has an explicit block editing mode set,\n\t\t// don't override it.\n\t\tif ( state.blockEditingModes.has( clientId ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Disabled explicit block editing modes are inherited by children.\n\t\t// It's an expensive calculation, so only do it if there are disabled blocks.\n\t\tif ( hasDisabledBlocks ) {\n\t\t\t// Look through parents to find one with an explicit block editing mode.\n\t\t\tlet ancestorBlockEditingMode;\n\t\t\tlet parent = state.blocks.parents.get( clientId );\n\t\t\twhile ( parent !== undefined ) {\n\t\t\t\t// There's a chance we only just calculated this for the parent,\n\t\t\t\t// if so we can return that value for a faster lookup.\n\t\t\t\tif ( derivedBlockEditingModes.has( parent ) ) {\n\t\t\t\t\tancestorBlockEditingMode =\n\t\t\t\t\t\tderivedBlockEditingModes.get( parent );\n\t\t\t\t} else if ( state.blockEditingModes.has( parent ) ) {\n\t\t\t\t\t// Checking the explicit block editing mode will be slower,\n\t\t\t\t\t// as the block editing mode is more likely to be set on a\n\t\t\t\t\t// distant ancestor.\n\t\t\t\t\tancestorBlockEditingMode =\n\t\t\t\t\t\tstate.blockEditingModes.get( parent );\n\t\t\t\t}\n\t\t\t\tif ( ancestorBlockEditingMode ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tparent = state.blocks.parents.get( parent );\n\t\t\t}\n\n\t\t\t// If the ancestor block editing mode is disabled, it's inherited by the child.\n\t\t\tif ( ancestorBlockEditingMode === 'disabled' ) {\n\t\t\t\tderivedBlockEditingModes.set( clientId, 'disabled' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif ( isZoomedOut || isNavMode ) {\n\t\t\t// If the root block is the section root set its editing mode to contentOnly.\n\t\t\tif ( clientId === sectionRootClientId ) {\n\t\t\t\tderivedBlockEditingModes.set( clientId, 'contentOnly' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// There are no sections, so everything else is disabled.\n\t\t\tif ( ! sectionClientIds?.length ) {\n\t\t\t\tderivedBlockEditingModes.set( clientId, 'disabled' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( sectionClientIds.includes( clientId ) ) {\n\t\t\t\tderivedBlockEditingModes.set( clientId, 'contentOnly' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If zoomed out, all blocks that aren't sections or the section root are\n\t\t\t// disabled.\n\t\t\tif ( isZoomedOut ) {\n\t\t\t\tderivedBlockEditingModes.set( clientId, 'disabled' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst isInSection = !! findParentInClientIdsList(\n\t\t\t\tstate,\n\t\t\t\tclientId,\n\t\t\t\tsectionClientIds\n\t\t\t);\n\t\t\tif ( ! isInSection ) {\n\t\t\t\tif ( clientId === '' ) {\n\t\t\t\t\tderivedBlockEditingModes.set( clientId, 'disabled' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Allow selection of template parts outside of sections.\n\t\t\t\tif ( blockName === 'core/template-part' ) {\n\t\t\t\t\tderivedBlockEditingModes.set( clientId, 'contentOnly' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst isInTemplatePart = !! findParentInClientIdsList(\n\t\t\t\t\tstate,\n\t\t\t\t\tclientId,\n\t\t\t\t\ttemplatePartClientIds\n\t\t\t\t);\n\t\t\t\t// Allow contentOnly blocks in template parts outside of sections\n\t\t\t\t// to be editable. Only disable blocks that don't fit this criteria.\n\t\t\t\tif ( ! isInTemplatePart && ! isContentBlock( blockName ) ) {\n\t\t\t\t\tderivedBlockEditingModes.set( clientId, 'disabled' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Handle synced pattern content so the inner blocks of a synced pattern are\n\t\t\t// properly disabled.\n\t\t\tif ( syncedPatternClientIds.length ) {\n\t\t\t\tconst parentPatternClientId = findParentInClientIdsList(\n\t\t\t\t\tstate,\n\t\t\t\t\tclientId,\n\t\t\t\t\tsyncedPatternClientIds\n\t\t\t\t);\n\n\t\t\t\tif ( parentPatternClientId ) {\n\t\t\t\t\t// This is a pattern nested in another pattern, it should be disabled.\n\t\t\t\t\tif (\n\t\t\t\t\t\tfindParentInClientIdsList(\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tparentPatternClientId,\n\t\t\t\t\t\t\tsyncedPatternClientIds\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tderivedBlockEditingModes.set( clientId, 'disabled' );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hasBindings( block ) ) {\n\t\t\t\t\t\tderivedBlockEditingModes.set( clientId, 'contentOnly' );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Synced pattern content without a binding isn't editable\n\t\t\t\t\t// from the instance, the user has to edit the pattern source,\n\t\t\t\t\t// so return 'disabled'.\n\t\t\t\t\tderivedBlockEditingModes.set( clientId, 'disabled' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( blockName && isContentBlock( blockName ) ) {\n\t\t\t\tderivedBlockEditingModes.set( clientId, 'contentOnly' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tderivedBlockEditingModes.set( clientId, 'disabled' );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( syncedPatternClientIds.length ) {\n\t\t\t// Synced pattern blocks (core/block).\n\t\t\tif ( syncedPatternClientIds.includes( clientId ) ) {\n\t\t\t\t// This is a pattern nested in another pattern, it should be disabled.\n\t\t\t\tif (\n\t\t\t\t\tfindParentInClientIdsList(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tclientId,\n\t\t\t\t\t\tsyncedPatternClientIds\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tderivedBlockEditingModes.set( clientId, 'disabled' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Else do nothing, use the default block editing mode.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Inner blocks of synced patterns.\n\t\t\tconst parentPatternClientId = findParentInClientIdsList(\n\t\t\t\tstate,\n\t\t\t\tclientId,\n\t\t\t\tsyncedPatternClientIds\n\t\t\t);\n\t\t\tif ( parentPatternClientId ) {\n\t\t\t\t// This is a pattern nested in another pattern, it should be disabled.\n\t\t\t\tif (\n\t\t\t\t\tfindParentInClientIdsList(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tparentPatternClientId,\n\t\t\t\t\t\tsyncedPatternClientIds\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tderivedBlockEditingModes.set( clientId, 'disabled' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( hasBindings( block ) ) {\n\t\t\t\t\tderivedBlockEditingModes.set( clientId, 'contentOnly' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Synced pattern content without a binding isn't editable\n\t\t\t\t// from the instance, the user has to edit the pattern source,\n\t\t\t\t// so return 'disabled'.\n\t\t\t\tderivedBlockEditingModes.set( clientId, 'disabled' );\n\t\t\t}\n\t\t}\n\t} );\n\n\treturn derivedBlockEditingModes;\n}\n\n/**\n * Updates the derived block editing modes based on added and removed blocks.\n *\n * This function handles the updating of block editing modes when blocks are added,\n * removed, or moved within the editor.\n *\n * It only returns a value when modifications are made to the block editing modes.\n *\n * @param {Object}  options                    The options for updating derived block editing modes.\n * @param {Object}  options.prevState          The previous state object.\n * @param {Object}  options.nextState          The next state object.\n * @param {Array}   [options.addedBlocks]      An array of blocks that were added.\n * @param {Array}   [options.removedClientIds] An array of client IDs of blocks that were removed.\n * @param {boolean} [options.isNavMode]        Whether the navigation mode is active.\n * @return {Map|undefined} The updated derived block editing modes, or undefined if no changes were made.\n */\nfunction getDerivedBlockEditingModesUpdates( {\n\tprevState,\n\tnextState,\n\taddedBlocks,\n\tremovedClientIds,\n\tisNavMode = false,\n} ) {\n\tconst prevDerivedBlockEditingModes = isNavMode\n\t\t? prevState.derivedNavModeBlockEditingModes\n\t\t: prevState.derivedBlockEditingModes;\n\tlet nextDerivedBlockEditingModes;\n\n\t// Perform removals before additions to handle cases like the `MOVE_BLOCKS_TO_POSITION` action.\n\t// That action removes a set of clientIds, but adds the same blocks back in a different location.\n\t// If removals were performed after additions, those moved clientIds would be removed incorrectly.\n\tremovedClientIds?.forEach( ( clientId ) => {\n\t\t// The actions only receive parent block IDs for removal.\n\t\t// Recurse through the block tree to ensure all blocks are removed.\n\t\t// Specifically use the previous state, before the blocks were removed.\n\t\ttraverseBlockTree( prevState, clientId, ( block ) => {\n\t\t\tif ( prevDerivedBlockEditingModes.has( block.clientId ) ) {\n\t\t\t\tif ( ! nextDerivedBlockEditingModes ) {\n\t\t\t\t\tnextDerivedBlockEditingModes = new Map(\n\t\t\t\t\t\tprevDerivedBlockEditingModes\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tnextDerivedBlockEditingModes.delete( block.clientId );\n\t\t\t}\n\t\t} );\n\t} );\n\n\taddedBlocks?.forEach( ( addedBlock ) => {\n\t\ttraverseBlockTree( nextState, addedBlock.clientId, ( block ) => {\n\t\t\tconst updates = getDerivedBlockEditingModesForTree(\n\t\t\t\tnextState,\n\t\t\t\tisNavMode,\n\t\t\t\tblock.clientId\n\t\t\t);\n\n\t\t\tif ( updates.size ) {\n\t\t\t\tif ( ! nextDerivedBlockEditingModes ) {\n\t\t\t\t\tnextDerivedBlockEditingModes = new Map( [\n\t\t\t\t\t\t...( prevDerivedBlockEditingModes?.size\n\t\t\t\t\t\t\t? prevDerivedBlockEditingModes\n\t\t\t\t\t\t\t: [] ),\n\t\t\t\t\t\t...updates,\n\t\t\t\t\t] );\n\t\t\t\t} else {\n\t\t\t\t\tnextDerivedBlockEditingModes = new Map( [\n\t\t\t\t\t\t...( nextDerivedBlockEditingModes?.size\n\t\t\t\t\t\t\t? nextDerivedBlockEditingModes\n\t\t\t\t\t\t\t: [] ),\n\t\t\t\t\t\t...updates,\n\t\t\t\t\t] );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t} );\n\n\treturn nextDerivedBlockEditingModes;\n}\n\n/**\n * Higher-order reducer that adds derived block editing modes to the state.\n *\n * This function wraps a reducer and enhances it to handle actions that affect\n * block editing modes. It updates the derivedBlockEditingModes in the state\n * based on various actions such as adding, removing, or moving blocks, or changing\n * the editor mode.\n *\n * @param {Function} reducer The original reducer function to be wrapped.\n * @return {Function} A new reducer function that includes derived block editing modes handling.\n */\nexport function withDerivedBlockEditingModes( reducer ) {\n\treturn ( state, action ) => {\n\t\tconst nextState = reducer( state, action );\n\n\t\t// An exception is needed here to still recompute the block editing modes when\n\t\t// the editor mode changes since the editor mode isn't stored within the\n\t\t// block editor state and changing it won't trigger an altered new state.\n\t\tif ( action.type !== 'SET_EDITOR_MODE' && nextState === state ) {\n\t\t\treturn state;\n\t\t}\n\n\t\tswitch ( action.type ) {\n\t\t\tcase 'REMOVE_BLOCKS': {\n\t\t\t\tconst nextDerivedBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\tremovedClientIds: action.clientIds,\n\t\t\t\t\t\tisNavMode: false,\n\t\t\t\t\t} );\n\t\t\t\tconst nextDerivedNavModeBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\tremovedClientIds: action.clientIds,\n\t\t\t\t\t\tisNavMode: true,\n\t\t\t\t\t} );\n\n\t\t\t\tif (\n\t\t\t\t\tnextDerivedBlockEditingModes ||\n\t\t\t\t\tnextDerivedNavModeBlockEditingModes\n\t\t\t\t) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\tderivedBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedBlockEditingModes,\n\t\t\t\t\t\tderivedNavModeBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedNavModeBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedNavModeBlockEditingModes,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst nextDerivedBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\taddedBlocks: action.blocks,\n\t\t\t\t\t\tisNavMode: false,\n\t\t\t\t\t} );\n\t\t\t\tconst nextDerivedNavModeBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\taddedBlocks: action.blocks,\n\t\t\t\t\t\tisNavMode: true,\n\t\t\t\t\t} );\n\n\t\t\t\tif (\n\t\t\t\t\tnextDerivedBlockEditingModes ||\n\t\t\t\t\tnextDerivedNavModeBlockEditingModes\n\t\t\t\t) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\tderivedBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedBlockEditingModes,\n\t\t\t\t\t\tderivedNavModeBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedNavModeBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedNavModeBlockEditingModes,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'SET_BLOCK_EDITING_MODE':\n\t\t\tcase 'UNSET_BLOCK_EDITING_MODE':\n\t\t\tcase 'SET_HAS_CONTROLLED_INNER_BLOCKS': {\n\t\t\t\tconst updatedBlock = getBlockTreeBlock(\n\t\t\t\t\tnextState,\n\t\t\t\t\taction.clientId\n\t\t\t\t);\n\n\t\t\t\t// The block might have been removed in which case it'll be\n\t\t\t\t// handled by the `REMOVE_BLOCKS` action.\n\t\t\t\tif ( ! updatedBlock ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tconst nextDerivedBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\tremovedClientIds: [ action.clientId ],\n\t\t\t\t\t\taddedBlocks: [ updatedBlock ],\n\t\t\t\t\t\tisNavMode: false,\n\t\t\t\t\t} );\n\t\t\t\tconst nextDerivedNavModeBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\tremovedClientIds: [ action.clientId ],\n\t\t\t\t\t\taddedBlocks: [ updatedBlock ],\n\t\t\t\t\t\tisNavMode: true,\n\t\t\t\t\t} );\n\n\t\t\t\tif (\n\t\t\t\t\tnextDerivedBlockEditingModes ||\n\t\t\t\t\tnextDerivedNavModeBlockEditingModes\n\t\t\t\t) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\tderivedBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedBlockEditingModes,\n\t\t\t\t\t\tderivedNavModeBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedNavModeBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedNavModeBlockEditingModes,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'REPLACE_BLOCKS': {\n\t\t\t\tconst nextDerivedBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\taddedBlocks: action.blocks,\n\t\t\t\t\t\tremovedClientIds: action.clientIds,\n\t\t\t\t\t\tisNavMode: false,\n\t\t\t\t\t} );\n\t\t\t\tconst nextDerivedNavModeBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\taddedBlocks: action.blocks,\n\t\t\t\t\t\tremovedClientIds: action.clientIds,\n\t\t\t\t\t\tisNavMode: true,\n\t\t\t\t\t} );\n\n\t\t\t\tif (\n\t\t\t\t\tnextDerivedBlockEditingModes ||\n\t\t\t\t\tnextDerivedNavModeBlockEditingModes\n\t\t\t\t) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\tderivedBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedBlockEditingModes,\n\t\t\t\t\t\tderivedNavModeBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedNavModeBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedNavModeBlockEditingModes,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'REPLACE_INNER_BLOCKS': {\n\t\t\t\t// Get the clientIds of the blocks that are being replaced\n\t\t\t\t// from the old state, before they were removed.\n\t\t\t\tconst removedClientIds = state.blocks.order.get(\n\t\t\t\t\taction.rootClientId\n\t\t\t\t);\n\t\t\t\tconst nextDerivedBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\taddedBlocks: action.blocks,\n\t\t\t\t\t\tremovedClientIds,\n\t\t\t\t\t\tisNavMode: false,\n\t\t\t\t\t} );\n\t\t\t\tconst nextDerivedNavModeBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\taddedBlocks: action.blocks,\n\t\t\t\t\t\tremovedClientIds,\n\t\t\t\t\t\tisNavMode: true,\n\t\t\t\t\t} );\n\n\t\t\t\tif (\n\t\t\t\t\tnextDerivedBlockEditingModes ||\n\t\t\t\t\tnextDerivedNavModeBlockEditingModes\n\t\t\t\t) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\tderivedBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedBlockEditingModes,\n\t\t\t\t\t\tderivedNavModeBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedNavModeBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedNavModeBlockEditingModes,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'MOVE_BLOCKS_TO_POSITION': {\n\t\t\t\tconst addedBlocks = action.clientIds.map( ( clientId ) => {\n\t\t\t\t\treturn nextState.blocks.byClientId.get( clientId );\n\t\t\t\t} );\n\t\t\t\tconst nextDerivedBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\taddedBlocks,\n\t\t\t\t\t\tremovedClientIds: action.clientIds,\n\t\t\t\t\t\tisNavMode: false,\n\t\t\t\t\t} );\n\t\t\t\tconst nextDerivedNavModeBlockEditingModes =\n\t\t\t\t\tgetDerivedBlockEditingModesUpdates( {\n\t\t\t\t\t\tprevState: state,\n\t\t\t\t\t\tnextState,\n\t\t\t\t\t\taddedBlocks,\n\t\t\t\t\t\tremovedClientIds: action.clientIds,\n\t\t\t\t\t\tisNavMode: true,\n\t\t\t\t\t} );\n\n\t\t\t\tif (\n\t\t\t\t\tnextDerivedBlockEditingModes ||\n\t\t\t\t\tnextDerivedNavModeBlockEditingModes\n\t\t\t\t) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\tderivedBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedBlockEditingModes,\n\t\t\t\t\t\tderivedNavModeBlockEditingModes:\n\t\t\t\t\t\t\tnextDerivedNavModeBlockEditingModes ??\n\t\t\t\t\t\t\tstate.derivedNavModeBlockEditingModes,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'UPDATE_SETTINGS': {\n\t\t\t\t// Recompute the entire tree if the section root changes.\n\t\t\t\tif (\n\t\t\t\t\tstate?.settings?.[ sectionRootClientIdKey ] !==\n\t\t\t\t\tnextState?.settings?.[ sectionRootClientIdKey ]\n\t\t\t\t) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\tderivedBlockEditingModes:\n\t\t\t\t\t\t\tgetDerivedBlockEditingModesForTree(\n\t\t\t\t\t\t\t\tnextState,\n\t\t\t\t\t\t\t\tfalse /* Nav mode off */\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\tderivedNavModeBlockEditingModes:\n\t\t\t\t\t\t\tgetDerivedBlockEditingModesForTree(\n\t\t\t\t\t\t\t\tnextState,\n\t\t\t\t\t\t\t\ttrue /* Nav mode on */\n\t\t\t\t\t\t\t),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'RESET_BLOCKS':\n\t\t\tcase 'SET_EDITOR_MODE':\n\t\t\tcase 'RESET_ZOOM_LEVEL':\n\t\t\tcase 'SET_ZOOM_LEVEL': {\n\t\t\t\t// Recompute the entire tree if the editor mode or zoom level changes,\n\t\t\t\t// or if all the blocks are reset.\n\t\t\t\treturn {\n\t\t\t\t\t...nextState,\n\t\t\t\t\tderivedBlockEditingModes:\n\t\t\t\t\t\tgetDerivedBlockEditingModesForTree(\n\t\t\t\t\t\t\tnextState,\n\t\t\t\t\t\t\tfalse /* Nav mode off */\n\t\t\t\t\t\t),\n\t\t\t\t\tderivedNavModeBlockEditingModes:\n\t\t\t\t\t\tgetDerivedBlockEditingModesForTree(\n\t\t\t\t\t\t\tnextState,\n\t\t\t\t\t\t\ttrue /* Nav mode on */\n\t\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t// If there's no change, the derivedBlockEditingModes from the previous\n\t\t// state need to be preserved.\n\t\tnextState.derivedBlockEditingModes =\n\t\t\tstate?.derivedBlockEditingModes ?? new Map();\n\t\tnextState.derivedNavModeBlockEditingModes =\n\t\t\tstate?.derivedNavModeBlockEditingModes ?? new Map();\n\n\t\treturn nextState;\n\t};\n}\n\nfunction withAutomaticChangeReset( reducer ) {\n\treturn ( state, action ) => {\n\t\tconst nextState = reducer( state, action );\n\n\t\tif ( ! state ) {\n\t\t\treturn nextState;\n\t\t}\n\n\t\t// Take over the last value without creating a new reference.\n\t\tnextState.automaticChangeStatus = state.automaticChangeStatus;\n\n\t\tif ( action.type === 'MARK_AUTOMATIC_CHANGE' ) {\n\t\t\treturn {\n\t\t\t\t...nextState,\n\t\t\t\tautomaticChangeStatus: 'pending',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\taction.type === 'MARK_AUTOMATIC_CHANGE_FINAL' &&\n\t\t\tstate.automaticChangeStatus === 'pending'\n\t\t) {\n\t\t\treturn {\n\t\t\t\t...nextState,\n\t\t\t\tautomaticChangeStatus: 'final',\n\t\t\t};\n\t\t}\n\n\t\t// If there's a change that doesn't affect blocks or selection, maintain\n\t\t// the current status.\n\t\tif (\n\t\t\tnextState.blocks === state.blocks &&\n\t\t\tnextState.selection === state.selection\n\t\t) {\n\t\t\treturn nextState;\n\t\t}\n\n\t\t// As long as the state is not final, ignore any selection changes.\n\t\tif (\n\t\t\tnextState.automaticChangeStatus !== 'final' &&\n\t\t\tnextState.selection !== state.selection\n\t\t) {\n\t\t\treturn nextState;\n\t\t}\n\n\t\t// Reset the status if blocks change or selection changes (when status is final).\n\t\treturn {\n\t\t\t...nextState,\n\t\t\tautomaticChangeStatus: undefined,\n\t\t};\n\t};\n}\n\nexport default pipe(\n\twithDerivedBlockEditingModes,\n\twithAutomaticChangeReset\n)( combinedReducers );\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"primitives\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst symbol = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-1 1.4l-5.6 5.6c-.1.1-.3.1-.4 0l-5.6-5.6c-.1-.1-.1-.3 0-.4l5.6-5.6s.1-.1.2-.1.1 0 .2.1l5.6 5.6c.1.1.1.3 0 .4zm-16.6-.4L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z\" />\n\t</SVG>\n);\n\nexport default symbol;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"richText\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"preferences\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockSerializationDefaultParser\"];","export const STORE_NAME = 'core/block-editor';\n","/**\n * WordPress dependencies\n */\n\nimport { __, _x } from '@wordpress/i18n';\n\nexport const INSERTER_PATTERN_TYPES = {\n\tuser: 'user',\n\ttheme: 'theme',\n\tdirectory: 'directory',\n};\n\nexport const INSERTER_SYNC_TYPES = {\n\tfull: 'fully',\n\tunsynced: 'unsynced',\n};\n\nexport const allPatternsCategory = {\n\tname: 'allPatterns',\n\tlabel: _x( 'All', 'patterns' ),\n};\n\nexport const myPatternsCategory = {\n\tname: 'myPatterns',\n\tlabel: __( 'My patterns' ),\n};\n\nexport const starterPatternsCategory = {\n\tname: 'core/starter-content',\n\tlabel: __( 'Starter content' ),\n};\n\nexport function isPatternFiltered( pattern, sourceFilter, syncFilter ) {\n\tconst isUserPattern = pattern.name.startsWith( 'core/block' );\n\tconst isDirectoryPattern =\n\t\tpattern.source === 'core' ||\n\t\tpattern.source?.startsWith( 'pattern-directory' );\n\n\t// If theme source selected, filter out user created patterns and those from\n\t// the core patterns directory.\n\tif (\n\t\tsourceFilter === INSERTER_PATTERN_TYPES.theme &&\n\t\t( isUserPattern || isDirectoryPattern )\n\t) {\n\t\treturn true;\n\t}\n\n\t// If the directory source is selected, filter out user created patterns\n\t// and those bundled with the theme.\n\tif (\n\t\tsourceFilter === INSERTER_PATTERN_TYPES.directory &&\n\t\t( isUserPattern || ! isDirectoryPattern )\n\t) {\n\t\treturn true;\n\t}\n\n\t// If user source selected, filter out theme patterns.\n\tif (\n\t\tsourceFilter === INSERTER_PATTERN_TYPES.user &&\n\t\tpattern.type !== INSERTER_PATTERN_TYPES.user\n\t) {\n\t\treturn true;\n\t}\n\n\t// Filter by sync status.\n\tif (\n\t\tsyncFilter === INSERTER_SYNC_TYPES.full &&\n\t\tpattern.syncStatus !== ''\n\t) {\n\t\treturn true;\n\t}\n\n\tif (\n\t\tsyncFilter === INSERTER_SYNC_TYPES.unsynced &&\n\t\tpattern.syncStatus !== 'unsynced' &&\n\t\tisUserPattern\n\t) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * Immutably sets a value inside an object. Like `lodash#set`, but returning a\n * new object. Treats nullish initial values as empty objects. Clones any\n * nested objects. Supports arrays, too.\n *\n * @param {Object}              object Object to set a value in.\n * @param {number|string|Array} path   Path in the object to modify.\n * @param {*}                   value  New value to set.\n * @return {Object} Cloned object with the new value set.\n */\nexport function setImmutably( object, path, value ) {\n\t// Normalize path\n\tpath = Array.isArray( path ) ? [ ...path ] : [ path ];\n\n\t// Shallowly clone the base of the object\n\tobject = Array.isArray( object ) ? [ ...object ] : { ...object };\n\n\tconst leaf = path.pop();\n\n\t// Traverse object from root to leaf, shallowly cloning at each level\n\tlet prev = object;\n\tfor ( const key of path ) {\n\t\tconst lvl = prev[ key ];\n\t\tprev = prev[ key ] = Array.isArray( lvl ) ? [ ...lvl ] : { ...lvl };\n\t}\n\n\tprev[ leaf ] = value;\n\n\treturn object;\n}\n\n/**\n * Helper util to return a value from a certain path of the object.\n * Path is specified as either:\n * - a string of properties, separated by dots, for example: \"x.y\".\n * - an array of properties, for example `[ 'x', 'y' ]`.\n * You can also specify a default value in case the result is nullish.\n *\n * @param {Object}       object       Input object.\n * @param {string|Array} path         Path to the object property.\n * @param {*}            defaultValue Default value if the value at the specified path is nullish.\n * @return {*} Value of the object property at the specified path.\n */\nexport const getValueFromObjectPath = ( object, path, defaultValue ) => {\n\tconst arrayPath = Array.isArray( path ) ? path : path.split( '.' );\n\tlet value = object;\n\tarrayPath.forEach( ( fieldName ) => {\n\t\tvalue = value?.[ fieldName ];\n\t} );\n\treturn value ?? defaultValue;\n};\n\n/**\n * Helper util to filter out objects with duplicate values for a given property.\n *\n * @param {Object[]} array    Array of objects to filter.\n * @param {string}   property Property to filter unique values by.\n *\n * @return {Object[]} Array of objects with unique values for the specified property.\n */\nexport function uniqByProperty( array, property ) {\n\tconst seen = new Set();\n\treturn array.filter( ( item ) => {\n\t\tconst value = item[ property ];\n\t\treturn seen.has( value ) ? false : seen.add( value );\n\t} );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__EXPERIMENTAL_PATHS_WITH_OVERRIDE as PATHS_WITH_OVERRIDE,\n\thasBlockSupport,\n} from '@wordpress/blocks';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromObjectPath } from '../utils/object';\nimport { getBlockName, getSettings, getBlockAttributes } from './selectors';\n\nconst blockedPaths = [\n\t'color',\n\t'border',\n\t'dimensions',\n\t'typography',\n\t'spacing',\n];\n\nconst deprecatedFlags = {\n\t'color.palette': ( settings ) => settings.colors,\n\t'color.gradients': ( settings ) => settings.gradients,\n\t'color.custom': ( settings ) =>\n\t\tsettings.disableCustomColors === undefined\n\t\t\t? undefined\n\t\t\t: ! settings.disableCustomColors,\n\t'color.customGradient': ( settings ) =>\n\t\tsettings.disableCustomGradients === undefined\n\t\t\t? undefined\n\t\t\t: ! settings.disableCustomGradients,\n\t'typography.fontSizes': ( settings ) => settings.fontSizes,\n\t'typography.customFontSize': ( settings ) =>\n\t\tsettings.disableCustomFontSizes === undefined\n\t\t\t? undefined\n\t\t\t: ! settings.disableCustomFontSizes,\n\t'typography.lineHeight': ( settings ) => settings.enableCustomLineHeight,\n\t'spacing.units': ( settings ) => {\n\t\tif ( settings.enableCustomUnits === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( settings.enableCustomUnits === true ) {\n\t\t\treturn [ 'px', 'em', 'rem', 'vh', 'vw', '%' ];\n\t\t}\n\n\t\treturn settings.enableCustomUnits;\n\t},\n\t'spacing.padding': ( settings ) => settings.enableCustomSpacing,\n};\n\nconst prefixedFlags = {\n\t/*\n\t * These were only available in the plugin\n\t * and can be removed when the minimum WordPress version\n\t * for the plugin is 5.9.\n\t */\n\t'border.customColor': 'border.color',\n\t'border.customStyle': 'border.style',\n\t'border.customWidth': 'border.width',\n\t'typography.customFontStyle': 'typography.fontStyle',\n\t'typography.customFontWeight': 'typography.fontWeight',\n\t'typography.customLetterSpacing': 'typography.letterSpacing',\n\t'typography.customTextDecorations': 'typography.textDecoration',\n\t'typography.customTextTransforms': 'typography.textTransform',\n\t/*\n\t * These were part of WordPress 5.8 and we need to keep them.\n\t */\n\t'border.customRadius': 'border.radius',\n\t'spacing.customMargin': 'spacing.margin',\n\t'spacing.customPadding': 'spacing.padding',\n\t'typography.customLineHeight': 'typography.lineHeight',\n};\n\n/**\n * Remove `custom` prefixes for flags that did not land in 5.8.\n *\n * This provides continued support for `custom` prefixed properties. It will\n * be removed once third party devs have had sufficient time to update themes,\n * plugins, etc.\n *\n * @see https://github.com/WordPress/gutenberg/pull/34485\n *\n * @param {string} path Path to desired value in settings.\n * @return {string}     The value for defined setting.\n */\nconst removeCustomPrefixes = ( path ) => {\n\treturn prefixedFlags[ path ] || path;\n};\n\nexport function getBlockSettings( state, clientId, ...paths ) {\n\tconst blockName = getBlockName( state, clientId );\n\tconst candidates = [];\n\n\tif ( clientId ) {\n\t\tlet id = clientId;\n\t\tdo {\n\t\t\tconst name = getBlockName( state, id );\n\t\t\tif ( hasBlockSupport( name, '__experimentalSettings', false ) ) {\n\t\t\t\tcandidates.push( id );\n\t\t\t}\n\t\t} while ( ( id = state.blocks.parents.get( id ) ) );\n\t}\n\n\treturn paths.map( ( path ) => {\n\t\tif ( blockedPaths.includes( path ) ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn(\n\t\t\t\t'Top level useSetting paths are disabled. Please use a subpath to query the information needed.'\n\t\t\t);\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// 0. Allow third parties to filter the block's settings at runtime.\n\t\tlet result = applyFilters(\n\t\t\t'blockEditor.useSetting.before',\n\t\t\tundefined,\n\t\t\tpath,\n\t\t\tclientId,\n\t\t\tblockName\n\t\t);\n\n\t\tif ( undefined !== result ) {\n\t\t\treturn result;\n\t\t}\n\n\t\tconst normalizedPath = removeCustomPrefixes( path );\n\n\t\t// 1. Take settings from the block instance or its ancestors.\n\t\t// Start from the current block and work our way up the ancestors.\n\t\tfor ( const candidateClientId of candidates ) {\n\t\t\tconst candidateAtts = getBlockAttributes(\n\t\t\t\tstate,\n\t\t\t\tcandidateClientId\n\t\t\t);\n\t\t\tresult =\n\t\t\t\tgetValueFromObjectPath(\n\t\t\t\t\tcandidateAtts.settings?.blocks?.[ blockName ],\n\t\t\t\t\tnormalizedPath\n\t\t\t\t) ??\n\t\t\t\tgetValueFromObjectPath(\n\t\t\t\t\tcandidateAtts.settings,\n\t\t\t\t\tnormalizedPath\n\t\t\t\t);\n\t\t\tif ( result !== undefined ) {\n\t\t\t\t// Stop the search for more distant ancestors and move on.\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// 2. Fall back to the settings from the block editor store (__experimentalFeatures).\n\t\tconst settings = getSettings( state );\n\t\tif ( result === undefined && blockName ) {\n\t\t\tresult = getValueFromObjectPath(\n\t\t\t\tsettings.__experimentalFeatures?.blocks?.[ blockName ],\n\t\t\t\tnormalizedPath\n\t\t\t);\n\t\t}\n\n\t\tif ( result === undefined ) {\n\t\t\tresult = getValueFromObjectPath(\n\t\t\t\tsettings.__experimentalFeatures,\n\t\t\t\tnormalizedPath\n\t\t\t);\n\t\t}\n\n\t\t// Return if the setting was found in either the block instance or the store.\n\t\tif ( result !== undefined ) {\n\t\t\tif ( PATHS_WITH_OVERRIDE[ normalizedPath ] ) {\n\t\t\t\treturn result.custom ?? result.theme ?? result.default;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\t// 3. Otherwise, use deprecated settings.\n\t\tconst deprecatedSettingsValue =\n\t\t\tdeprecatedFlags[ normalizedPath ]?.( settings );\n\t\tif ( deprecatedSettingsValue !== undefined ) {\n\t\t\treturn deprecatedSettingsValue;\n\t\t}\n\n\t\t// 4. Fallback for typography.dropCap:\n\t\t// This is only necessary to support typography.dropCap.\n\t\t// when __experimentalFeatures are not present (core without plugin).\n\t\t// To remove when __experimentalFeatures are ported to core.\n\t\treturn normalizedPath === 'typography.dropCap' ? true : undefined;\n\t} );\n}\n","/**\n * WordPress dependencies\n */\nimport { createSelector, createRegistrySelector } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetBlockOrder,\n\tgetBlockParents,\n\tgetBlockEditingMode,\n\tgetSettings,\n\tcanInsertBlockType,\n\tgetBlockName,\n\tgetTemplateLock,\n\tgetClientIdsWithDescendants,\n\tisNavigationMode,\n\tgetBlockRootClientId,\n} from './selectors';\nimport {\n\tcheckAllowListRecursive,\n\tgetAllPatternsDependants,\n\tgetInsertBlockTypeDependants,\n\tgetGrammar,\n} from './utils';\nimport { INSERTER_PATTERN_TYPES } from '../components/inserter/block-patterns-tab/utils';\nimport { STORE_NAME } from './constants';\nimport { unlock } from '../lock-unlock';\nimport {\n\tselectBlockPatternsKey,\n\treusableBlocksSelectKey,\n\tsectionRootClientIdKey,\n} from './private-keys';\n\nexport { getBlockSettings } from './get-block-settings';\n\n/**\n * Returns true if the block interface is hidden, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the block toolbar is hidden.\n */\nexport function isBlockInterfaceHidden( state ) {\n\treturn state.isBlockInterfaceHidden;\n}\n\n/**\n * Gets the client ids of the last inserted blocks.\n *\n * @param {Object} state Global application state.\n * @return {Array|undefined} Client Ids of the last inserted block(s).\n */\nexport function getLastInsertedBlocksClientIds( state ) {\n\treturn state?.lastBlockInserted?.clientIds;\n}\n\nexport function getBlockWithoutAttributes( state, clientId ) {\n\treturn state.blocks.byClientId.get( clientId );\n}\n\n/**\n * Returns true if all of the descendants of a block with the given client ID\n * have an editing mode of 'disabled', or false otherwise.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block client ID.\n *\n * @return {boolean} Whether the block descendants are disabled.\n */\nexport const isBlockSubtreeDisabled = ( state, clientId ) => {\n\tconst isChildSubtreeDisabled = ( childClientId ) => {\n\t\treturn (\n\t\t\tgetBlockEditingMode( state, childClientId ) === 'disabled' &&\n\t\t\tgetBlockOrder( state, childClientId ).every(\n\t\t\t\tisChildSubtreeDisabled\n\t\t\t)\n\t\t);\n\t};\n\treturn getBlockOrder( state, clientId ).every( isChildSubtreeDisabled );\n};\n\nfunction getEnabledClientIdsTreeUnmemoized( state, rootClientId ) {\n\tconst blockOrder = getBlockOrder( state, rootClientId );\n\tconst result = [];\n\n\tfor ( const clientId of blockOrder ) {\n\t\tconst innerBlocks = getEnabledClientIdsTreeUnmemoized(\n\t\t\tstate,\n\t\t\tclientId\n\t\t);\n\t\tif ( getBlockEditingMode( state, clientId ) !== 'disabled' ) {\n\t\t\tresult.push( { clientId, innerBlocks } );\n\t\t} else {\n\t\t\tresult.push( ...innerBlocks );\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Returns a tree of block objects with only clientID and innerBlocks set.\n * Blocks with a 'disabled' editing mode are not included.\n *\n * @param {Object}  state        Global application state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Object[]} Tree of block objects with only clientID and innerBlocks set.\n */\nexport const getEnabledClientIdsTree = createRegistrySelector( ( select ) =>\n\tcreateSelector( getEnabledClientIdsTreeUnmemoized, ( state ) => [\n\t\tstate.blocks.order,\n\t\tstate.derivedBlockEditingModes,\n\t\tstate.derivedNavModeBlockEditingModes,\n\t\tstate.blockEditingModes,\n\t\tstate.settings.templateLock,\n\t\tstate.blockListSettings,\n\t\tselect( STORE_NAME ).__unstableGetEditorMode( state ),\n\t] )\n);\n\n/**\n * Returns a list of a given block's ancestors, from top to bottom. Blocks with\n * a 'disabled' editing mode are excluded.\n *\n * @see getBlockParents\n *\n * @param {Object}  state     Global application state.\n * @param {string}  clientId  The block client ID.\n * @param {boolean} ascending Order results from bottom to top (true) or top\n *                            to bottom (false).\n */\nexport const getEnabledBlockParents = createSelector(\n\t( state, clientId, ascending = false ) => {\n\t\treturn getBlockParents( state, clientId, ascending ).filter(\n\t\t\t( parent ) => getBlockEditingMode( state, parent ) !== 'disabled'\n\t\t);\n\t},\n\t( state ) => [\n\t\tstate.blocks.parents,\n\t\tstate.blockEditingModes,\n\t\tstate.settings.templateLock,\n\t\tstate.blockListSettings,\n\t]\n);\n\n/**\n * Selector that returns the data needed to display a prompt when certain\n * blocks are removed, or `false` if no such prompt is requested.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object|false} Data for removal prompt display, if any.\n */\nexport function getRemovalPromptData( state ) {\n\treturn state.removalPromptData;\n}\n\n/**\n * Returns true if removal prompt exists, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether removal prompt exists.\n */\nexport function getBlockRemovalRules( state ) {\n\treturn state.blockRemovalRules;\n}\n\n/**\n * Returns the client ID of the block settings menu that is currently open.\n *\n * @param {Object} state Global application state.\n * @return {string|null} The client ID of the block menu that is currently open.\n */\nexport function getOpenedBlockSettingsMenu( state ) {\n\treturn state.openedBlockSettingsMenu;\n}\n\n/**\n * Returns all style overrides, intended to be merged with global editor styles.\n *\n * Overrides are sorted to match the order of the blocks they relate to. This\n * is useful to maintain correct CSS cascade order.\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} An array of style ID to style override pairs.\n */\nexport const getStyleOverrides = createSelector(\n\t( state ) => {\n\t\tconst clientIds = getClientIdsWithDescendants( state );\n\t\tconst clientIdMap = clientIds.reduce( ( acc, clientId, index ) => {\n\t\t\tacc[ clientId ] = index;\n\t\t\treturn acc;\n\t\t}, {} );\n\n\t\treturn [ ...state.styleOverrides ].sort( ( overrideA, overrideB ) => {\n\t\t\t// Once the overrides Map is spread to an array, the first element\n\t\t\t// is the key, while the second is the override itself including\n\t\t\t// the clientId to sort by.\n\t\t\tconst [ , { clientId: clientIdA } ] = overrideA;\n\t\t\tconst [ , { clientId: clientIdB } ] = overrideB;\n\n\t\t\tconst aIndex = clientIdMap[ clientIdA ] ?? -1;\n\t\t\tconst bIndex = clientIdMap[ clientIdB ] ?? -1;\n\n\t\t\treturn aIndex - bIndex;\n\t\t} );\n\t},\n\t( state ) => [ state.blocks.order, state.styleOverrides ]\n);\n\n/** @typedef {import('./actions').InserterMediaCategory} InserterMediaCategory */\n/**\n * Returns the registered inserter media categories through the public API.\n *\n * @param {Object} state Editor state.\n *\n * @return {InserterMediaCategory[]} Inserter media categories.\n */\nexport function getRegisteredInserterMediaCategories( state ) {\n\treturn state.registeredInserterMediaCategories;\n}\n\n/**\n * Returns an array containing the allowed inserter media categories.\n * It merges the registered media categories from extenders with the\n * core ones. It also takes into account the allowed `mime_types`, which\n * can be altered by `upload_mimes` filter and restrict some of them.\n *\n * @param {Object} state Global application state.\n *\n * @return {InserterMediaCategory[]} Client IDs of descendants.\n */\nexport const getInserterMediaCategories = createSelector(\n\t( state ) => {\n\t\tconst {\n\t\t\tsettings: {\n\t\t\t\tinserterMediaCategories,\n\t\t\t\tallowedMimeTypes,\n\t\t\t\tenableOpenverseMediaCategory,\n\t\t\t},\n\t\t\tregisteredInserterMediaCategories,\n\t\t} = state;\n\t\t// The allowed `mime_types` can be altered by `upload_mimes` filter and restrict\n\t\t// some of them. In this case we shouldn't add the category to the available media\n\t\t// categories list in the inserter.\n\t\tif (\n\t\t\t( ! inserterMediaCategories &&\n\t\t\t\t! registeredInserterMediaCategories.length ) ||\n\t\t\t! allowedMimeTypes\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tconst coreInserterMediaCategoriesNames =\n\t\t\tinserterMediaCategories?.map( ( { name } ) => name ) || [];\n\t\tconst mergedCategories = [\n\t\t\t...( inserterMediaCategories || [] ),\n\t\t\t...( registeredInserterMediaCategories || [] ).filter(\n\t\t\t\t( { name } ) =>\n\t\t\t\t\t! coreInserterMediaCategoriesNames.includes( name )\n\t\t\t),\n\t\t];\n\t\treturn mergedCategories.filter( ( category ) => {\n\t\t\t// Check if Openverse category is enabled.\n\t\t\tif (\n\t\t\t\t! enableOpenverseMediaCategory &&\n\t\t\t\tcategory.name === 'openverse'\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn Object.values( allowedMimeTypes ).some( ( mimeType ) =>\n\t\t\t\tmimeType.startsWith( `${ category.mediaType }/` )\n\t\t\t);\n\t\t} );\n\t},\n\t( state ) => [\n\t\tstate.settings.inserterMediaCategories,\n\t\tstate.settings.allowedMimeTypes,\n\t\tstate.settings.enableOpenverseMediaCategory,\n\t\tstate.registeredInserterMediaCategories,\n\t]\n);\n\n/**\n * Returns whether there is at least one allowed pattern for inner blocks children.\n * This is useful for deferring the parsing of all patterns until needed.\n *\n * @param {Object} state               Editor state.\n * @param {string} [rootClientId=null] Target root client ID.\n *\n * @return {boolean} If there is at least one allowed pattern.\n */\nexport const hasAllowedPatterns = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, rootClientId = null ) => {\n\t\t\tconst { getAllPatterns } = unlock( select( STORE_NAME ) );\n\t\t\tconst patterns = getAllPatterns();\n\t\t\tconst { allowedBlockTypes } = getSettings( state );\n\t\t\treturn patterns.some( ( pattern ) => {\n\t\t\t\tconst { inserter = true } = pattern;\n\t\t\t\tif ( ! inserter ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst grammar = getGrammar( pattern );\n\t\t\t\treturn (\n\t\t\t\t\tcheckAllowListRecursive( grammar, allowedBlockTypes ) &&\n\t\t\t\t\tgrammar.every( ( { name: blockName } ) =>\n\t\t\t\t\t\tcanInsertBlockType( state, blockName, rootClientId )\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\t\t( state, rootClientId ) => [\n\t\t\t...getAllPatternsDependants( select )( state ),\n\t\t\t...getInsertBlockTypeDependants( select )( state, rootClientId ),\n\t\t]\n\t)\n);\n\nfunction mapUserPattern(\n\tuserPattern,\n\t__experimentalUserPatternCategories = []\n) {\n\treturn {\n\t\tname: `core/block/${ userPattern.id }`,\n\t\tid: userPattern.id,\n\t\ttype: INSERTER_PATTERN_TYPES.user,\n\t\ttitle: userPattern.title.raw,\n\t\tcategories: userPattern.wp_pattern_category?.map( ( catId ) => {\n\t\t\tconst category = __experimentalUserPatternCategories.find(\n\t\t\t\t( { id } ) => id === catId\n\t\t\t);\n\t\t\treturn category ? category.slug : catId;\n\t\t} ),\n\t\tcontent: userPattern.content.raw,\n\t\tsyncStatus: userPattern.wp_pattern_sync_status,\n\t};\n}\n\nexport const getPatternBySlug = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, patternName ) => {\n\t\t\t// Only fetch reusable blocks if we know we need them. To do: maybe\n\t\t\t// use the entity record API to retrieve the block by slug.\n\t\t\tif ( patternName?.startsWith( 'core/block/' ) ) {\n\t\t\t\tconst _id = parseInt(\n\t\t\t\t\tpatternName.slice( 'core/block/'.length ),\n\t\t\t\t\t10\n\t\t\t\t);\n\t\t\t\tconst block = unlock( select( STORE_NAME ) )\n\t\t\t\t\t.getReusableBlocks()\n\t\t\t\t\t.find( ( { id } ) => id === _id );\n\n\t\t\t\tif ( ! block ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn mapUserPattern(\n\t\t\t\t\tblock,\n\t\t\t\t\tstate.settings.__experimentalUserPatternCategories\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t// This setting is left for back compat.\n\t\t\t\t...( state.settings.__experimentalBlockPatterns ?? [] ),\n\t\t\t\t...( state.settings[ selectBlockPatternsKey ]?.( select ) ??\n\t\t\t\t\t[] ),\n\t\t\t].find( ( { name } ) => name === patternName );\n\t\t},\n\t\t( state, patternName ) =>\n\t\t\tpatternName?.startsWith( 'core/block/' )\n\t\t\t\t? [\n\t\t\t\t\t\tunlock( select( STORE_NAME ) ).getReusableBlocks(),\n\t\t\t\t\t\tstate.settings.__experimentalReusableBlocks,\n\t\t\t\t  ]\n\t\t\t\t: [\n\t\t\t\t\t\tstate.settings.__experimentalBlockPatterns,\n\t\t\t\t\t\tstate.settings[ selectBlockPatternsKey ]?.( select ),\n\t\t\t\t  ]\n\t)\n);\n\nexport const getAllPatterns = createRegistrySelector( ( select ) =>\n\tcreateSelector( ( state ) => {\n\t\treturn [\n\t\t\t...unlock( select( STORE_NAME ) )\n\t\t\t\t.getReusableBlocks()\n\t\t\t\t.map( ( userPattern ) =>\n\t\t\t\t\tmapUserPattern(\n\t\t\t\t\t\tuserPattern,\n\t\t\t\t\t\tstate.settings.__experimentalUserPatternCategories\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t// This setting is left for back compat.\n\t\t\t...( state.settings.__experimentalBlockPatterns ?? [] ),\n\t\t\t...( state.settings[ selectBlockPatternsKey ]?.( select ) ?? [] ),\n\t\t].filter(\n\t\t\t( x, index, arr ) =>\n\t\t\t\tindex === arr.findIndex( ( y ) => x.name === y.name )\n\t\t);\n\t}, getAllPatternsDependants( select ) )\n);\n\nconst EMPTY_ARRAY = [];\n\nexport const getReusableBlocks = createRegistrySelector(\n\t( select ) => ( state ) => {\n\t\tconst reusableBlocksSelect = state.settings[ reusableBlocksSelectKey ];\n\t\treturn (\n\t\t\t( reusableBlocksSelect\n\t\t\t\t? reusableBlocksSelect( select )\n\t\t\t\t: state.settings.__experimentalReusableBlocks ) ?? EMPTY_ARRAY\n\t\t);\n\t}\n);\n\n/**\n * Returns the element of the last element that had focus when focus left the editor canvas.\n *\n * @param {Object} state Block editor state.\n *\n * @return {Object} Element.\n */\nexport function getLastFocus( state ) {\n\treturn state.lastFocus;\n}\n\n/**\n * Returns true if the user is dragging anything, or false otherwise. It is possible for a\n * user to be dragging data from outside of the editor, so this selector is separate from\n * the `isDraggingBlocks` selector which only returns true if the user is dragging blocks.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether user is dragging.\n */\nexport function isDragging( state ) {\n\treturn state.isDragging;\n}\n\n/**\n * Retrieves the expanded block from the state.\n *\n * @param {Object} state Block editor state.\n *\n * @return {string|null} The client ID of the expanded block, if set.\n */\nexport function getExpandedBlock( state ) {\n\treturn state.expandedBlock;\n}\n\n/**\n * Retrieves the client ID of the ancestor block that is content locking the block\n * with the provided client ID.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client Id of the block.\n *\n * @return {?string} Client ID of the ancestor block that is content locking the block.\n */\nexport const getContentLockingParent = ( state, clientId ) => {\n\tlet current = clientId;\n\tlet result;\n\twhile ( ! result && ( current = state.blocks.parents.get( current ) ) ) {\n\t\tif ( getTemplateLock( state, current ) === 'contentOnly' ) {\n\t\t\tresult = current;\n\t\t}\n\t}\n\treturn result;\n};\n\n/**\n * Retrieves the client ID of the parent section block.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client Id of the block.\n *\n * @return {?string} Client ID of the ancestor block that is content locking the block.\n */\nexport const getParentSectionBlock = ( state, clientId ) => {\n\tlet current = clientId;\n\tlet result;\n\twhile ( ! result && ( current = state.blocks.parents.get( current ) ) ) {\n\t\tif ( isSectionBlock( state, current ) ) {\n\t\t\tresult = current;\n\t\t}\n\t}\n\treturn result;\n};\n\n/**\n * Retrieves the client ID is a content locking parent\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client Id of the block.\n *\n * @return {boolean} Whether the block is a content locking parent.\n */\nexport function isSectionBlock( state, clientId ) {\n\tconst blockName = getBlockName( state, clientId );\n\tif (\n\t\tblockName === 'core/block' ||\n\t\tgetTemplateLock( state, clientId ) === 'contentOnly'\n\t) {\n\t\treturn true;\n\t}\n\n\t// Template parts become sections in navigation mode.\n\tconst _isNavigationMode = isNavigationMode( state );\n\tif ( _isNavigationMode && blockName === 'core/template-part' ) {\n\t\treturn true;\n\t}\n\n\tconst sectionRootClientId = getSectionRootClientId( state );\n\tconst sectionClientIds = getBlockOrder( state, sectionRootClientId );\n\treturn _isNavigationMode && sectionClientIds.includes( clientId );\n}\n\n/**\n * Retrieves the client ID of the block that is content locked but is\n * currently being temporarily edited as a non-locked block.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} The client ID of the block being temporarily edited as a non-locked block.\n */\nexport function getTemporarilyEditingAsBlocks( state ) {\n\treturn state.temporarilyEditingAsBlocks;\n}\n\n/**\n * Returns the focus mode that should be reapplied when the user stops editing\n * a content locked blocks as a block without locking.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} The focus mode that should be re-set when temporarily editing as blocks stops.\n */\nexport function getTemporarilyEditingFocusModeToRevert( state ) {\n\treturn state.temporarilyEditingFocusModeRevert;\n}\n\n/**\n * Returns the style attributes of multiple blocks.\n *\n * @param {Object}   state     Global application state.\n * @param {string[]} clientIds An array of block client IDs.\n *\n * @return {Object} An object where keys are client IDs and values are the corresponding block styles or undefined.\n */\nexport const getBlockStyles = createSelector(\n\t( state, clientIds ) =>\n\t\tclientIds.reduce( ( styles, clientId ) => {\n\t\t\tstyles[ clientId ] = state.blocks.attributes.get( clientId )?.style;\n\t\t\treturn styles;\n\t\t}, {} ),\n\t( state, clientIds ) => [\n\t\t...clientIds.map(\n\t\t\t( clientId ) => state.blocks.attributes.get( clientId )?.style\n\t\t),\n\t]\n);\n\n/**\n * Retrieves the client ID of the block which contains the blocks\n * acting as \"sections\" in the editor. This is typically the \"main content\"\n * of the template/post.\n *\n * @param {Object} state Editor state.\n *\n * @return {string|undefined} The section root client ID or undefined if not set.\n */\nexport function getSectionRootClientId( state ) {\n\treturn state.settings?.[ sectionRootClientIdKey ];\n}\n\n/**\n * Returns whether the editor is considered zoomed out.\n *\n * @param {Object} state Global application state.\n * @return {boolean} Whether the editor is zoomed.\n */\nexport function isZoomOut( state ) {\n\treturn state.zoomLevel === 'auto-scaled' || state.zoomLevel < 100;\n}\n\n/**\n * Returns whether the zoom level.\n *\n * @param {Object} state Global application state.\n * @return {number|\"auto-scaled\"} Zoom level.\n */\nexport function getZoomLevel( state ) {\n\treturn state.zoomLevel;\n}\n\n/**\n * Finds the closest block where the block is allowed to be inserted.\n *\n * @param {Object}            state    Editor state.\n * @param {string[] | string} name     Block name or names.\n * @param {string}            clientId Default insertion point.\n *\n * @return {string} clientID of the closest container when the block name can be inserted.\n */\nexport function getClosestAllowedInsertionPoint( state, name, clientId = '' ) {\n\tconst blockNames = Array.isArray( name ) ? name : [ name ];\n\tconst areBlockNamesAllowedInClientId = ( id ) =>\n\t\tblockNames.every( ( currentName ) =>\n\t\t\tcanInsertBlockType( state, currentName, id )\n\t\t);\n\n\t// If we're trying to insert at the root level and it's not allowed\n\t// Try the section root instead.\n\tif ( ! clientId ) {\n\t\tif ( areBlockNamesAllowedInClientId( clientId ) ) {\n\t\t\treturn clientId;\n\t\t}\n\n\t\tconst sectionRootClientId = getSectionRootClientId( state );\n\t\tif (\n\t\t\tsectionRootClientId &&\n\t\t\tareBlockNamesAllowedInClientId( sectionRootClientId )\n\t\t) {\n\t\t\treturn sectionRootClientId;\n\t\t}\n\t\treturn null;\n\t}\n\n\t// Traverse the block tree up until we find a place where we can insert.\n\tlet current = clientId;\n\twhile ( current !== null && ! areBlockNamesAllowedInClientId( current ) ) {\n\t\tconst parentClientId = getBlockRootClientId( state, current );\n\t\tcurrent = parentClientId;\n\t}\n\n\treturn current;\n}\n\nexport function getClosestAllowedInsertionPointForPattern(\n\tstate,\n\tpattern,\n\tclientId\n) {\n\tconst { allowedBlockTypes } = getSettings( state );\n\tconst isAllowed = checkAllowListRecursive(\n\t\tgetGrammar( pattern ),\n\t\tallowedBlockTypes\n\t);\n\tif ( ! isAllowed ) {\n\t\treturn null;\n\t}\n\tconst names = getGrammar( pattern ).map( ( { blockName: name } ) => name );\n\treturn getClosestAllowedInsertionPoint( state, names, clientId );\n}\n\n/**\n * Where the point where the next block will be inserted into.\n *\n * @param {Object} state\n * @return {Object} where the insertion point in the block editor is or null if none is set.\n */\nexport function getInsertionPoint( state ) {\n\treturn state.insertionPoint;\n}\n","/**\n * WordPress dependencies\n */\nimport { parse } from '@wordpress/blocks';\nimport { parse as grammarParse } from '@wordpress/block-serialization-default-parser';\n\n/**\n * Internal dependencies\n */\nimport { selectBlockPatternsKey } from './private-keys';\nimport { unlock } from '../lock-unlock';\nimport { STORE_NAME } from './constants';\nimport { getSectionRootClientId } from './private-selectors';\n\nexport const isFiltered = Symbol( 'isFiltered' );\nconst parsedPatternCache = new WeakMap();\nconst grammarMapCache = new WeakMap();\n\nfunction parsePattern( pattern ) {\n\tconst blocks = parse( pattern.content, {\n\t\t__unstableSkipMigrationLogs: true,\n\t} );\n\tif ( blocks.length === 1 ) {\n\t\tblocks[ 0 ].attributes = {\n\t\t\t...blocks[ 0 ].attributes,\n\t\t\tmetadata: {\n\t\t\t\t...( blocks[ 0 ].attributes.metadata || {} ),\n\t\t\t\tcategories: pattern.categories,\n\t\t\t\tpatternName: pattern.name,\n\t\t\t\tname: blocks[ 0 ].attributes.metadata?.name || pattern.title,\n\t\t\t},\n\t\t};\n\t}\n\treturn {\n\t\t...pattern,\n\t\tblocks,\n\t};\n}\n\nexport function getParsedPattern( pattern ) {\n\tlet parsedPattern = parsedPatternCache.get( pattern );\n\tif ( ! parsedPattern ) {\n\t\tparsedPattern = parsePattern( pattern );\n\t\tparsedPatternCache.set( pattern, parsedPattern );\n\t}\n\treturn parsedPattern;\n}\n\nexport function getGrammar( pattern ) {\n\tlet grammarMap = grammarMapCache.get( pattern );\n\tif ( ! grammarMap ) {\n\t\tgrammarMap = grammarParse( pattern.content );\n\t\t// Block names are null only at the top level for whitespace.\n\t\tgrammarMap = grammarMap.filter( ( block ) => block.blockName !== null );\n\t\tgrammarMapCache.set( pattern, grammarMap );\n\t}\n\treturn grammarMap;\n}\n\nexport const checkAllowList = ( list, item, defaultResult = null ) => {\n\tif ( typeof list === 'boolean' ) {\n\t\treturn list;\n\t}\n\tif ( Array.isArray( list ) ) {\n\t\t// TODO: when there is a canonical way to detect that we are editing a post\n\t\t// the following check should be changed to something like:\n\t\t// if ( list.includes( 'core/post-content' ) && getEditorMode() === 'post-content' && item === null )\n\t\tif ( list.includes( 'core/post-content' ) && item === null ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn list.includes( item );\n\t}\n\treturn defaultResult;\n};\n\nexport const checkAllowListRecursive = ( blocks, allowedBlockTypes ) => {\n\tif ( typeof allowedBlockTypes === 'boolean' ) {\n\t\treturn allowedBlockTypes;\n\t}\n\n\tconst blocksQueue = [ ...blocks ];\n\twhile ( blocksQueue.length > 0 ) {\n\t\tconst block = blocksQueue.shift();\n\n\t\tconst isAllowed = checkAllowList(\n\t\t\tallowedBlockTypes,\n\t\t\tblock.name || block.blockName,\n\t\t\ttrue\n\t\t);\n\t\tif ( ! isAllowed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tblock.innerBlocks?.forEach( ( innerBlock ) => {\n\t\t\tblocksQueue.push( innerBlock );\n\t\t} );\n\t}\n\n\treturn true;\n};\n\nexport const getAllPatternsDependants = ( select ) => ( state ) => {\n\treturn [\n\t\tstate.settings.__experimentalBlockPatterns,\n\t\tstate.settings.__experimentalUserPatternCategories,\n\t\tstate.settings.__experimentalReusableBlocks,\n\t\tstate.settings[ selectBlockPatternsKey ]?.( select ),\n\t\tstate.blockPatterns,\n\t\tunlock( select( STORE_NAME ) ).getReusableBlocks(),\n\t];\n};\n\nexport const getInsertBlockTypeDependants =\n\t( select ) => ( state, rootClientId ) => {\n\t\treturn [\n\t\t\tstate.blockListSettings[ rootClientId ],\n\t\t\tstate.blocks.byClientId.get( rootClientId ),\n\t\t\tstate.settings.allowedBlockTypes,\n\t\t\tstate.settings.templateLock,\n\t\t\tstate.blockEditingModes,\n\t\t\tselect( STORE_NAME ).__unstableGetEditorMode( state ),\n\t\t\tgetSectionRootClientId( state ),\n\t\t];\n\t};\n","/**\n * Recursive stable sorting comparator function.\n *\n * @param {string|Function} field Field to sort by.\n * @param {Array}           items Items to sort.\n * @param {string}          order Order, 'asc' or 'desc'.\n * @return {Function} Comparison function to be used in a `.sort()`.\n */\nconst comparator = ( field, items, order ) => {\n\treturn ( a, b ) => {\n\t\tlet cmpA, cmpB;\n\n\t\tif ( typeof field === 'function' ) {\n\t\t\tcmpA = field( a );\n\t\t\tcmpB = field( b );\n\t\t} else {\n\t\t\tcmpA = a[ field ];\n\t\t\tcmpB = b[ field ];\n\t\t}\n\n\t\tif ( cmpA > cmpB ) {\n\t\t\treturn order === 'asc' ? 1 : -1;\n\t\t} else if ( cmpB > cmpA ) {\n\t\t\treturn order === 'asc' ? -1 : 1;\n\t\t}\n\n\t\tconst orderA = items.findIndex( ( item ) => item === a );\n\t\tconst orderB = items.findIndex( ( item ) => item === b );\n\n\t\t// Stable sort: maintaining original array order\n\t\tif ( orderA > orderB ) {\n\t\t\treturn 1;\n\t\t} else if ( orderB > orderA ) {\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn 0;\n\t};\n};\n\n/**\n * Order items by a certain key.\n * Supports decorator functions that allow complex picking of a comparison field.\n * Sorts in ascending order by default, but supports descending as well.\n * Stable sort - maintains original order of equal items.\n *\n * @param {Array}           items Items to order.\n * @param {string|Function} field Field to order by.\n * @param {string}          order Sorting order, `asc` or `desc`.\n * @return {Array} Sorted items.\n */\nexport function orderBy( items, field, order = 'asc' ) {\n\treturn items.concat().sort( comparator( field, items, order ) );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tgetBlockType,\n\tgetBlockTypes,\n\tgetBlockVariations,\n\thasBlockSupport,\n\tgetPossibleBlockTransformations,\n\tswitchToBlockType,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { Platform } from '@wordpress/element';\nimport { applyFilters } from '@wordpress/hooks';\nimport { symbol } from '@wordpress/icons';\nimport { create, remove, toHTMLString } from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\nimport { createSelector, createRegistrySelector } from '@wordpress/data';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport {\n\tisFiltered,\n\tcheckAllowListRecursive,\n\tcheckAllowList,\n\tgetAllPatternsDependants,\n\tgetInsertBlockTypeDependants,\n\tgetParsedPattern,\n\tgetGrammar,\n} from './utils';\nimport { orderBy } from '../utils/sorting';\nimport { STORE_NAME } from './constants';\nimport { unlock } from '../lock-unlock';\n\nimport {\n\tgetContentLockingParent,\n\tgetTemporarilyEditingAsBlocks,\n\tgetTemporarilyEditingFocusModeToRevert,\n\tgetSectionRootClientId,\n\tisSectionBlock,\n\tgetParentSectionBlock,\n\tisZoomOut,\n} from './private-selectors';\n\n/**\n * A block selection object.\n *\n * @typedef {Object} WPBlockSelection\n *\n * @property {string} clientId     A block client ID.\n * @property {string} attributeKey A block attribute key.\n * @property {number} offset       An attribute value offset, based on the rich\n *                                 text value. See `wp.richText.create`.\n */\n\n// Module constants.\nconst MILLISECONDS_PER_HOUR = 3600 * 1000;\nconst MILLISECONDS_PER_DAY = 24 * 3600 * 1000;\nconst MILLISECONDS_PER_WEEK = 7 * 24 * 3600 * 1000;\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation, as in a connected or\n * other pure component which performs `shouldComponentUpdate` check on props.\n * This should be used as a last resort, since the normalized data should be\n * maintained by the reducer result in state.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\n/**\n * Shared reference to an empty Set for cases where it is important to avoid\n * returning a new Set reference on every invocation, as in a connected or\n * other pure component which performs `shouldComponentUpdate` check on props.\n * This should be used as a last resort, since the normalized data should be\n * maintained by the reducer result in state.\n *\n * @type {Set}\n */\nconst EMPTY_SET = new Set();\n\nconst DEFAULT_INSERTER_OPTIONS = {\n\t[ isFiltered ]: true,\n};\n\n/**\n * Returns a block's name given its client ID, or null if no block exists with\n * the client ID.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {string} Block name.\n */\nexport function getBlockName( state, clientId ) {\n\tconst block = state.blocks.byClientId.get( clientId );\n\tconst socialLinkName = 'core/social-link';\n\n\tif ( Platform.OS !== 'web' && block?.name === socialLinkName ) {\n\t\tconst attributes = state.blocks.attributes.get( clientId );\n\t\tconst { service } = attributes ?? {};\n\n\t\treturn service ? `${ socialLinkName }-${ service }` : socialLinkName;\n\t}\n\treturn block ? block.name : null;\n}\n\n/**\n * Returns whether a block is valid or not.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Is Valid.\n */\nexport function isBlockValid( state, clientId ) {\n\tconst block = state.blocks.byClientId.get( clientId );\n\treturn !! block && block.isValid;\n}\n\n/**\n * Returns a block's attributes given its client ID, or null if no block exists with\n * the client ID.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {?Object} Block attributes.\n */\nexport function getBlockAttributes( state, clientId ) {\n\tconst block = state.blocks.byClientId.get( clientId );\n\tif ( ! block ) {\n\t\treturn null;\n\t}\n\n\treturn state.blocks.attributes.get( clientId );\n}\n\n/**\n * Returns a block given its client ID. This is a parsed copy of the block,\n * containing its `blockName`, `clientId`, and current `attributes` state. This\n * is not the block's registration settings, which must be retrieved from the\n * blocks module registration store.\n *\n * getBlock recurses through its inner blocks until all its children blocks have\n * been retrieved. Note that getBlock will not return the child inner blocks of\n * an inner block controller. This is because an inner block controller syncs\n * itself with its own entity, and should therefore not be included with the\n * blocks of a different entity. For example, say you call `getBlocks( TP )` to\n * get the blocks of a template part. If another template part is a child of TP,\n * then the nested template part's child blocks will not be returned. This way,\n * the template block itself is considered part of the parent, but the children\n * are not.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Parsed block object.\n */\nexport function getBlock( state, clientId ) {\n\tif ( ! state.blocks.byClientId.has( clientId ) ) {\n\t\treturn null;\n\t}\n\n\treturn state.blocks.tree.get( clientId );\n}\n\nexport const __unstableGetBlockWithoutInnerBlocks = createSelector(\n\t( state, clientId ) => {\n\t\tconst block = state.blocks.byClientId.get( clientId );\n\t\tif ( ! block ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\t...block,\n\t\t\tattributes: getBlockAttributes( state, clientId ),\n\t\t};\n\t},\n\t( state, clientId ) => [\n\t\tstate.blocks.byClientId.get( clientId ),\n\t\tstate.blocks.attributes.get( clientId ),\n\t]\n);\n\n/**\n * Returns all block objects for the current post being edited as an array in\n * the order they appear in the post. Note that this will exclude child blocks\n * of nested inner block controllers.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Object[]} Post blocks.\n */\nexport function getBlocks( state, rootClientId ) {\n\tconst treeKey =\n\t\t! rootClientId || ! areInnerBlocksControlled( state, rootClientId )\n\t\t\t? rootClientId || ''\n\t\t\t: 'controlled||' + rootClientId;\n\treturn state.blocks.tree.get( treeKey )?.innerBlocks || EMPTY_ARRAY;\n}\n\n/**\n * Returns a stripped down block object containing only its client ID,\n * and its inner blocks' client IDs.\n *\n * @deprecated\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Client ID of the block to get.\n *\n * @return {Object} Client IDs of the post blocks.\n */\nexport const __unstableGetClientIdWithClientIdsTree = createSelector(\n\t( state, clientId ) => {\n\t\tdeprecated(\n\t\t\t\"wp.data.select( 'core/block-editor' ).__unstableGetClientIdWithClientIdsTree\",\n\t\t\t{\n\t\t\t\tsince: '6.3',\n\t\t\t\tversion: '6.5',\n\t\t\t}\n\t\t);\n\t\treturn {\n\t\t\tclientId,\n\t\t\tinnerBlocks: __unstableGetClientIdsTree( state, clientId ),\n\t\t};\n\t},\n\t( state ) => [ state.blocks.order ]\n);\n\n/**\n * Returns the block tree represented in the block-editor store from the\n * given root, consisting of stripped down block objects containing only\n * their client IDs, and their inner blocks' client IDs.\n *\n * @deprecated\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Object[]} Client IDs of the post blocks.\n */\nexport const __unstableGetClientIdsTree = createSelector(\n\t( state, rootClientId = '' ) => {\n\t\tdeprecated(\n\t\t\t\"wp.data.select( 'core/block-editor' ).__unstableGetClientIdsTree\",\n\t\t\t{\n\t\t\t\tsince: '6.3',\n\t\t\t\tversion: '6.5',\n\t\t\t}\n\t\t);\n\t\treturn getBlockOrder( state, rootClientId ).map( ( clientId ) =>\n\t\t\t__unstableGetClientIdWithClientIdsTree( state, clientId )\n\t\t);\n\t},\n\t( state ) => [ state.blocks.order ]\n);\n\n/**\n * Returns an array containing the clientIds of all descendants of the blocks\n * given. Returned ids are ordered first by the order of the ids given, then\n * by the order that they appear in the editor.\n *\n * @param {Object}          state   Global application state.\n * @param {string|string[]} rootIds Client ID(s) for which descendant blocks are to be returned.\n *\n * @return {Array} Client IDs of descendants.\n */\nexport const getClientIdsOfDescendants = createSelector(\n\t( state, rootIds ) => {\n\t\trootIds = Array.isArray( rootIds ) ? [ ...rootIds ] : [ rootIds ];\n\t\tconst ids = [];\n\n\t\t// Add the descendants of the root blocks first.\n\t\tfor ( const rootId of rootIds ) {\n\t\t\tconst order = state.blocks.order.get( rootId );\n\t\t\tif ( order ) {\n\t\t\t\tids.push( ...order );\n\t\t\t}\n\t\t}\n\n\t\tlet index = 0;\n\n\t\t// Add the descendants of the descendants, recursively.\n\t\twhile ( index < ids.length ) {\n\t\t\tconst id = ids[ index ];\n\t\t\tconst order = state.blocks.order.get( id );\n\t\t\tif ( order ) {\n\t\t\t\tids.splice( index + 1, 0, ...order );\n\t\t\t}\n\t\t\tindex++;\n\t\t}\n\n\t\treturn ids;\n\t},\n\t( state ) => [ state.blocks.order ]\n);\n\n/**\n * Returns an array containing the clientIds of the top-level blocks and\n * their descendants of any depth (for nested blocks). Ids are returned\n * in the same order that they appear in the editor.\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} ids of top-level and descendant blocks.\n */\nexport const getClientIdsWithDescendants = ( state ) =>\n\tgetClientIdsOfDescendants( state, '' );\n\n/**\n * Returns the total number of blocks, or the total number of blocks with a specific name in a post.\n * The number returned includes nested blocks.\n *\n * @param {Object}  state     Global application state.\n * @param {?string} blockName Optional block name, if specified only blocks of that type will be counted.\n *\n * @return {number} Number of blocks in the post, or number of blocks with name equal to blockName.\n */\nexport const getGlobalBlockCount = createSelector(\n\t( state, blockName ) => {\n\t\tconst clientIds = getClientIdsWithDescendants( state );\n\t\tif ( ! blockName ) {\n\t\t\treturn clientIds.length;\n\t\t}\n\t\tlet count = 0;\n\t\tfor ( const clientId of clientIds ) {\n\t\t\tconst block = state.blocks.byClientId.get( clientId );\n\t\t\tif ( block.name === blockName ) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t},\n\t( state ) => [ state.blocks.order, state.blocks.byClientId ]\n);\n\n/**\n * Returns all blocks that match a blockName. Results include nested blocks.\n *\n * @param {Object}   state     Global application state.\n * @param {string[]} blockName Block name(s) for which clientIds are to be returned.\n *\n * @return {Array} Array of clientIds of blocks with name equal to blockName.\n */\nexport const getBlocksByName = createSelector(\n\t( state, blockName ) => {\n\t\tif ( ! blockName ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\t\tconst blockNames = Array.isArray( blockName )\n\t\t\t? blockName\n\t\t\t: [ blockName ];\n\t\tconst clientIds = getClientIdsWithDescendants( state );\n\t\tconst foundBlocks = clientIds.filter( ( clientId ) => {\n\t\t\tconst block = state.blocks.byClientId.get( clientId );\n\t\t\treturn blockNames.includes( block.name );\n\t\t} );\n\t\treturn foundBlocks.length > 0 ? foundBlocks : EMPTY_ARRAY;\n\t},\n\t( state ) => [ state.blocks.order, state.blocks.byClientId ]\n);\n\n/**\n * Returns all global blocks that match a blockName. Results include nested blocks.\n *\n * @deprecated\n *\n * @param {Object}   state     Global application state.\n * @param {string[]} blockName Block name(s) for which clientIds are to be returned.\n *\n * @return {Array} Array of clientIds of blocks with name equal to blockName.\n */\nexport function __experimentalGetGlobalBlocksByName( state, blockName ) {\n\tdeprecated(\n\t\t\"wp.data.select( 'core/block-editor' ).__experimentalGetGlobalBlocksByName\",\n\t\t{\n\t\t\tsince: '6.5',\n\t\t\talternative: `wp.data.select( 'core/block-editor' ).getBlocksByName`,\n\t\t}\n\t);\n\treturn getBlocksByName( state, blockName );\n}\n\n/**\n * Given an array of block client IDs, returns the corresponding array of block\n * objects.\n *\n * @param {Object}   state     Editor state.\n * @param {string[]} clientIds Client IDs for which blocks are to be returned.\n *\n * @return {WPBlock[]} Block objects.\n */\nexport const getBlocksByClientId = createSelector(\n\t( state, clientIds ) =>\n\t\t( Array.isArray( clientIds ) ? clientIds : [ clientIds ] ).map(\n\t\t\t( clientId ) => getBlock( state, clientId )\n\t\t),\n\t( state, clientIds ) =>\n\t\t( Array.isArray( clientIds ) ? clientIds : [ clientIds ] ).map(\n\t\t\t( clientId ) => state.blocks.tree.get( clientId )\n\t\t)\n);\n\n/**\n * Given an array of block client IDs, returns the corresponding array of block\n * names.\n *\n * @param {Object}   state     Editor state.\n * @param {string[]} clientIds Client IDs for which block names are to be returned.\n *\n * @return {string[]} Block names.\n */\nexport const getBlockNamesByClientId = createSelector(\n\t( state, clientIds ) =>\n\t\tgetBlocksByClientId( state, clientIds )\n\t\t\t.filter( Boolean )\n\t\t\t.map( ( block ) => block.name ),\n\t( state, clientIds ) => getBlocksByClientId( state, clientIds )\n);\n\n/**\n * Returns the number of blocks currently present in the post.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {number} Number of blocks in the post.\n */\nexport function getBlockCount( state, rootClientId ) {\n\treturn getBlockOrder( state, rootClientId ).length;\n}\n\n/**\n * Returns the current selection start block client ID, attribute key and text\n * offset.\n *\n * @param {Object} state Block editor state.\n *\n * @return {WPBlockSelection} Selection start information.\n */\nexport function getSelectionStart( state ) {\n\treturn state.selection.selectionStart;\n}\n\n/**\n * Returns the current selection end block client ID, attribute key and text\n * offset.\n *\n * @param {Object} state Block editor state.\n *\n * @return {WPBlockSelection} Selection end information.\n */\nexport function getSelectionEnd( state ) {\n\treturn state.selection.selectionEnd;\n}\n\n/**\n * Returns the current block selection start. This value may be null, and it\n * may represent either a singular block selection or multi-selection start.\n * A selection is singular if its start and end match.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Client ID of block selection start.\n */\nexport function getBlockSelectionStart( state ) {\n\treturn state.selection.selectionStart.clientId;\n}\n\n/**\n * Returns the current block selection end. This value may be null, and it\n * may represent either a singular block selection or multi-selection end.\n * A selection is singular if its start and end match.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Client ID of block selection end.\n */\nexport function getBlockSelectionEnd( state ) {\n\treturn state.selection.selectionEnd.clientId;\n}\n\n/**\n * Returns the number of blocks currently selected in the post.\n *\n * @param {Object} state Global application state.\n *\n * @return {number} Number of blocks selected in the post.\n */\nexport function getSelectedBlockCount( state ) {\n\tconst multiSelectedBlockCount =\n\t\tgetMultiSelectedBlockClientIds( state ).length;\n\n\tif ( multiSelectedBlockCount ) {\n\t\treturn multiSelectedBlockCount;\n\t}\n\n\treturn state.selection.selectionStart.clientId ? 1 : 0;\n}\n\n/**\n * Returns true if there is a single selected block, or false otherwise.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether a single block is selected.\n */\nexport function hasSelectedBlock( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\treturn (\n\t\t!! selectionStart.clientId &&\n\t\tselectionStart.clientId === selectionEnd.clientId\n\t);\n}\n\n/**\n * Returns the currently selected block client ID, or null if there is no\n * selected block.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Selected block client ID.\n */\nexport function getSelectedBlockClientId( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\tconst { clientId } = selectionStart;\n\n\tif ( ! clientId || clientId !== selectionEnd.clientId ) {\n\t\treturn null;\n\t}\n\n\treturn clientId;\n}\n\n/**\n * Returns the currently selected block, or null if there is no selected block.\n *\n * @param {Object} state Global application state.\n *\n * @example\n *\n *```js\n * import { select } from '@wordpress/data'\n * import { store as blockEditorStore } from '@wordpress/block-editor'\n *\n * // Set initial active block client ID\n * let activeBlockClientId = null\n *\n * const getActiveBlockData = () => {\n * \tconst activeBlock = select(blockEditorStore).getSelectedBlock()\n *\n * \tif (activeBlock && activeBlock.clientId !== activeBlockClientId) {\n * \t\tactiveBlockClientId = activeBlock.clientId\n *\n * \t\t// Get active block name and attributes\n * \t\tconst activeBlockName = activeBlock.name\n * \t\tconst activeBlockAttributes = activeBlock.attributes\n *\n * \t\t// Log active block name and attributes\n * \t\tconsole.log(activeBlockName, activeBlockAttributes)\n * \t\t}\n * \t}\n *\n * \t// Subscribe to changes in the editor\n * \t// wp.data.subscribe(() => {\n * \t\t// getActiveBlockData()\n * \t// })\n *\n * \t// Update active block data on click\n * \t// onclick=\"getActiveBlockData()\"\n *```\n *\n * @return {?Object} Selected block.\n */\nexport function getSelectedBlock( state ) {\n\tconst clientId = getSelectedBlockClientId( state );\n\treturn clientId ? getBlock( state, clientId ) : null;\n}\n\n/**\n * Given a block client ID, returns the root block from which the block is\n * nested, an empty string for top-level blocks, or null if the block does not\n * exist.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find root client ID.\n *\n * @return {?string} Root client ID, if exists\n */\nexport function getBlockRootClientId( state, clientId ) {\n\treturn state.blocks.parents.get( clientId ) ?? null;\n}\n\n/**\n * Given a block client ID, returns the list of all its parents from top to bottom.\n *\n * @param {Object}  state     Editor state.\n * @param {string}  clientId  Block from which to find root client ID.\n * @param {boolean} ascending Order results from bottom to top (true) or top to bottom (false).\n *\n * @return {Array} ClientIDs of the parent blocks.\n */\nexport const getBlockParents = createSelector(\n\t( state, clientId, ascending = false ) => {\n\t\tconst parents = [];\n\t\tlet current = clientId;\n\t\twhile ( ( current = state.blocks.parents.get( current ) ) ) {\n\t\t\tparents.push( current );\n\t\t}\n\n\t\tif ( ! parents.length ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\treturn ascending ? parents : parents.reverse();\n\t},\n\t( state ) => [ state.blocks.parents ]\n);\n\n/**\n * Given a block client ID and a block name, returns the list of all its parents\n * from top to bottom, filtered by the given name(s). For example, if passed\n * 'core/group' as the blockName, it will only return parents which are group\n * blocks. If passed `[ 'core/group', 'core/cover']`, as the blockName, it will\n * return parents which are group blocks and parents which are cover blocks.\n *\n * @param {Object}          state     Editor state.\n * @param {string}          clientId  Block from which to find root client ID.\n * @param {string|string[]} blockName Block name(s) to filter.\n * @param {boolean}         ascending Order results from bottom to top (true) or top to bottom (false).\n *\n * @return {Array} ClientIDs of the parent blocks.\n */\nexport const getBlockParentsByBlockName = createSelector(\n\t( state, clientId, blockName, ascending = false ) => {\n\t\tconst parents = getBlockParents( state, clientId, ascending );\n\t\tconst hasName = Array.isArray( blockName )\n\t\t\t? ( name ) => blockName.includes( name )\n\t\t\t: ( name ) => blockName === name;\n\t\treturn parents.filter( ( id ) => hasName( getBlockName( state, id ) ) );\n\t},\n\t( state ) => [ state.blocks.parents ]\n);\n/**\n * Given a block client ID, returns the root of the hierarchy from which the block is nested, return the block itself for root level blocks.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find root client ID.\n *\n * @return {string} Root client ID\n */\nexport function getBlockHierarchyRootClientId( state, clientId ) {\n\tlet current = clientId;\n\tlet parent;\n\tdo {\n\t\tparent = current;\n\t\tcurrent = state.blocks.parents.get( current );\n\t} while ( current );\n\treturn parent;\n}\n\n/**\n * Given a block client ID, returns the lowest common ancestor with selected client ID.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find common ancestor client ID.\n *\n * @return {string} Common ancestor client ID or undefined\n */\nexport function getLowestCommonAncestorWithSelectedBlock( state, clientId ) {\n\tconst selectedId = getSelectedBlockClientId( state );\n\tconst clientParents = [ ...getBlockParents( state, clientId ), clientId ];\n\tconst selectedParents = [\n\t\t...getBlockParents( state, selectedId ),\n\t\tselectedId,\n\t];\n\n\tlet lowestCommonAncestor;\n\n\tconst maxDepth = Math.min( clientParents.length, selectedParents.length );\n\tfor ( let index = 0; index < maxDepth; index++ ) {\n\t\tif ( clientParents[ index ] === selectedParents[ index ] ) {\n\t\t\tlowestCommonAncestor = clientParents[ index ];\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn lowestCommonAncestor;\n}\n\n/**\n * Returns the client ID of the block adjacent one at the given reference\n * startClientId and modifier directionality. Defaults start startClientId to\n * the selected block, and direction as next block. Returns null if there is no\n * adjacent block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n * @param {?number} modifier      Directionality multiplier (1 next, -1\n *                                previous).\n *\n * @return {?string} Return the client ID of the block, or null if none exists.\n */\nexport function getAdjacentBlockClientId( state, startClientId, modifier = 1 ) {\n\t// Default to selected block.\n\tif ( startClientId === undefined ) {\n\t\tstartClientId = getSelectedBlockClientId( state );\n\t}\n\n\t// Try multi-selection starting at extent based on modifier.\n\tif ( startClientId === undefined ) {\n\t\tif ( modifier < 0 ) {\n\t\t\tstartClientId = getFirstMultiSelectedBlockClientId( state );\n\t\t} else {\n\t\t\tstartClientId = getLastMultiSelectedBlockClientId( state );\n\t\t}\n\t}\n\n\t// Validate working start client ID.\n\tif ( ! startClientId ) {\n\t\treturn null;\n\t}\n\n\t// Retrieve start block root client ID, being careful to allow the falsey\n\t// empty string top-level root by explicitly testing against null.\n\tconst rootClientId = getBlockRootClientId( state, startClientId );\n\tif ( rootClientId === null ) {\n\t\treturn null;\n\t}\n\n\tconst { order } = state.blocks;\n\tconst orderSet = order.get( rootClientId );\n\tconst index = orderSet.indexOf( startClientId );\n\tconst nextIndex = index + 1 * modifier;\n\n\t// Block was first in set and we're attempting to get previous.\n\tif ( nextIndex < 0 ) {\n\t\treturn null;\n\t}\n\n\t// Block was last in set and we're attempting to get next.\n\tif ( nextIndex === orderSet.length ) {\n\t\treturn null;\n\t}\n\n\t// Assume incremented index is within the set.\n\treturn orderSet[ nextIndex ];\n}\n\n/**\n * Returns the previous block's client ID from the given reference start ID.\n * Defaults start to the selected block. Returns null if there is no previous\n * block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n *\n * @return {?string} Adjacent block's client ID, or null if none exists.\n */\nexport function getPreviousBlockClientId( state, startClientId ) {\n\treturn getAdjacentBlockClientId( state, startClientId, -1 );\n}\n\n/**\n * Returns the next block's client ID from the given reference start ID.\n * Defaults start to the selected block. Returns null if there is no next\n * block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n *\n * @return {?string} Adjacent block's client ID, or null if none exists.\n */\nexport function getNextBlockClientId( state, startClientId ) {\n\treturn getAdjacentBlockClientId( state, startClientId, 1 );\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns the initial caret position for the selected block.\n * This position is to used to position the caret properly when the selected block changes.\n * If the current block is not a RichText, having initial position set to 0 means \"focus block\"\n *\n * @param {Object} state Global application state.\n *\n * @return {0|-1|null} Initial position.\n */\nexport function getSelectedBlocksInitialCaretPosition( state ) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn state.initialPosition;\n}\n\n/**\n * Returns the current selection set of block client IDs (multiselection or single selection).\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block client IDs.\n */\nexport const getSelectedBlockClientIds = createSelector(\n\t( state ) => {\n\t\tconst { selectionStart, selectionEnd } = state.selection;\n\n\t\tif ( ! selectionStart.clientId || ! selectionEnd.clientId ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\t\treturn [ selectionStart.clientId ];\n\t\t}\n\n\t\t// Retrieve root client ID to aid in retrieving relevant nested block\n\t\t// order, being careful to allow the falsey empty string top-level root\n\t\t// by explicitly testing against null.\n\t\tconst rootClientId = getBlockRootClientId(\n\t\t\tstate,\n\t\t\tselectionStart.clientId\n\t\t);\n\n\t\tif ( rootClientId === null ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\tconst blockOrder = getBlockOrder( state, rootClientId );\n\t\tconst startIndex = blockOrder.indexOf( selectionStart.clientId );\n\t\tconst endIndex = blockOrder.indexOf( selectionEnd.clientId );\n\n\t\tif ( startIndex > endIndex ) {\n\t\t\treturn blockOrder.slice( endIndex, startIndex + 1 );\n\t\t}\n\n\t\treturn blockOrder.slice( startIndex, endIndex + 1 );\n\t},\n\t( state ) => [\n\t\tstate.blocks.order,\n\t\tstate.selection.selectionStart.clientId,\n\t\tstate.selection.selectionEnd.clientId,\n\t]\n);\n\n/**\n * Returns the current multi-selection set of block client IDs, or an empty\n * array if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block client IDs.\n */\nexport function getMultiSelectedBlockClientIds( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\treturn getSelectedBlockClientIds( state );\n}\n\n/**\n * Returns the current multi-selection set of blocks, or an empty array if\n * there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block objects.\n */\nexport const getMultiSelectedBlocks = createSelector(\n\t( state ) => {\n\t\tconst multiSelectedBlockClientIds =\n\t\t\tgetMultiSelectedBlockClientIds( state );\n\t\tif ( ! multiSelectedBlockClientIds.length ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\treturn multiSelectedBlockClientIds.map( ( clientId ) =>\n\t\t\tgetBlock( state, clientId )\n\t\t);\n\t},\n\t( state ) => [\n\t\t...getSelectedBlockClientIds.getDependants( state ),\n\t\tstate.blocks.byClientId,\n\t\tstate.blocks.order,\n\t\tstate.blocks.attributes,\n\t]\n);\n\n/**\n * Returns the client ID of the first block in the multi-selection set, or null\n * if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} First block client ID in the multi-selection set.\n */\nexport function getFirstMultiSelectedBlockClientId( state ) {\n\treturn getMultiSelectedBlockClientIds( state )[ 0 ] || null;\n}\n\n/**\n * Returns the client ID of the last block in the multi-selection set, or null\n * if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Last block client ID in the multi-selection set.\n */\nexport function getLastMultiSelectedBlockClientId( state ) {\n\tconst selectedClientIds = getMultiSelectedBlockClientIds( state );\n\treturn selectedClientIds[ selectedClientIds.length - 1 ] || null;\n}\n\n/**\n * Returns true if a multi-selection exists, and the block corresponding to the\n * specified client ID is the first block of the multi-selection set, or false\n * otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is first in multi-selection.\n */\nexport function isFirstMultiSelectedBlock( state, clientId ) {\n\treturn getFirstMultiSelectedBlockClientId( state ) === clientId;\n}\n\n/**\n * Returns true if the client ID occurs within the block multi-selection, or\n * false otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is in multi-selection set.\n */\nexport function isBlockMultiSelected( state, clientId ) {\n\treturn getMultiSelectedBlockClientIds( state ).indexOf( clientId ) !== -1;\n}\n\n/**\n * Returns true if an ancestor of the block is multi-selected, or false\n * otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether an ancestor of the block is in multi-selection\n *                   set.\n */\nexport const isAncestorMultiSelected = createSelector(\n\t( state, clientId ) => {\n\t\tlet ancestorClientId = clientId;\n\t\tlet isMultiSelected = false;\n\t\twhile ( ancestorClientId && ! isMultiSelected ) {\n\t\t\tancestorClientId = getBlockRootClientId( state, ancestorClientId );\n\t\t\tisMultiSelected = isBlockMultiSelected( state, ancestorClientId );\n\t\t}\n\t\treturn isMultiSelected;\n\t},\n\t( state ) => [\n\t\tstate.blocks.order,\n\t\tstate.selection.selectionStart.clientId,\n\t\tstate.selection.selectionEnd.clientId,\n\t]\n);\n\n/**\n * Returns the client ID of the block which begins the multi-selection set, or\n * null if there is no multi-selection.\n *\n * This is not necessarily the first client ID in the selection.\n *\n * @see getFirstMultiSelectedBlockClientId\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Client ID of block beginning multi-selection.\n */\nexport function getMultiSelectedBlocksStartClientId( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\treturn null;\n\t}\n\n\treturn selectionStart.clientId || null;\n}\n\n/**\n * Returns the client ID of the block which ends the multi-selection set, or\n * null if there is no multi-selection.\n *\n * This is not necessarily the last client ID in the selection.\n *\n * @see getLastMultiSelectedBlockClientId\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Client ID of block ending multi-selection.\n */\nexport function getMultiSelectedBlocksEndClientId( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\treturn null;\n\t}\n\n\treturn selectionEnd.clientId || null;\n}\n\n/**\n * Returns true if the selection is not partial.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether the selection is mergeable.\n */\nexport function __unstableIsFullySelected( state ) {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\treturn (\n\t\t! selectionAnchor.attributeKey &&\n\t\t! selectionFocus.attributeKey &&\n\t\ttypeof selectionAnchor.offset === 'undefined' &&\n\t\ttypeof selectionFocus.offset === 'undefined'\n\t);\n}\n\n/**\n * Returns true if the selection is collapsed.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether the selection is collapsed.\n */\nexport function __unstableIsSelectionCollapsed( state ) {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\treturn (\n\t\t!! selectionAnchor &&\n\t\t!! selectionFocus &&\n\t\tselectionAnchor.clientId === selectionFocus.clientId &&\n\t\tselectionAnchor.attributeKey === selectionFocus.attributeKey &&\n\t\tselectionAnchor.offset === selectionFocus.offset\n\t);\n}\n\nexport function __unstableSelectionHasUnmergeableBlock( state ) {\n\treturn getSelectedBlockClientIds( state ).some( ( clientId ) => {\n\t\tconst blockName = getBlockName( state, clientId );\n\t\tconst blockType = getBlockType( blockName );\n\t\treturn ! blockType.merge;\n\t} );\n}\n\n/**\n * Check whether the selection is mergeable.\n *\n * @param {Object}  state     Editor state.\n * @param {boolean} isForward Whether to merge forwards.\n *\n * @return {boolean} Whether the selection is mergeable.\n */\nexport function __unstableIsSelectionMergeable( state, isForward ) {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\n\t// It's not mergeable if the start and end are within the same block.\n\tif ( selectionAnchor.clientId === selectionFocus.clientId ) {\n\t\treturn false;\n\t}\n\n\t// It's not mergeable if there's no rich text selection.\n\tif (\n\t\t! selectionAnchor.attributeKey ||\n\t\t! selectionFocus.attributeKey ||\n\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\ttypeof selectionFocus.offset === 'undefined'\n\t) {\n\t\treturn false;\n\t}\n\n\tconst anchorRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionAnchor.clientId\n\t);\n\tconst focusRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionFocus.clientId\n\t);\n\n\t// It's not mergeable if the selection doesn't start and end in the same\n\t// block list. Maybe in the future it should be allowed.\n\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\treturn false;\n\t}\n\n\tconst blockOrder = getBlockOrder( state, anchorRootClientId );\n\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t// Reassign selection start and end based on order.\n\tlet selectionStart, selectionEnd;\n\n\tif ( anchorIndex > focusIndex ) {\n\t\tselectionStart = selectionFocus;\n\t\tselectionEnd = selectionAnchor;\n\t} else {\n\t\tselectionStart = selectionAnchor;\n\t\tselectionEnd = selectionFocus;\n\t}\n\n\tconst targetBlockClientId = isForward\n\t\t? selectionEnd.clientId\n\t\t: selectionStart.clientId;\n\tconst blockToMergeClientId = isForward\n\t\t? selectionStart.clientId\n\t\t: selectionEnd.clientId;\n\n\tconst targetBlockName = getBlockName( state, targetBlockClientId );\n\tconst targetBlockType = getBlockType( targetBlockName );\n\n\tif ( ! targetBlockType.merge ) {\n\t\treturn false;\n\t}\n\n\tconst blockToMerge = getBlock( state, blockToMergeClientId );\n\n\t// It's mergeable if the blocks are of the same type.\n\tif ( blockToMerge.name === targetBlockName ) {\n\t\treturn true;\n\t}\n\n\t// If the blocks are of a different type, try to transform the block being\n\t// merged into the same type of block.\n\tconst blocksToMerge = switchToBlockType( blockToMerge, targetBlockName );\n\n\treturn blocksToMerge && blocksToMerge.length;\n}\n\n/**\n * Get partial selected blocks with their content updated\n * based on the selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object[]} Updated partial selected blocks.\n */\nexport const __unstableGetSelectedBlocksWithPartialSelection = ( state ) => {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\n\tif ( selectionAnchor.clientId === selectionFocus.clientId ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\t// Can't split if the selection is not set.\n\tif (\n\t\t! selectionAnchor.attributeKey ||\n\t\t! selectionFocus.attributeKey ||\n\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\ttypeof selectionFocus.offset === 'undefined'\n\t) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\tconst anchorRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionAnchor.clientId\n\t);\n\tconst focusRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionFocus.clientId\n\t);\n\n\t// It's not splittable if the selection doesn't start and end in the same\n\t// block list. Maybe in the future it should be allowed.\n\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\tconst blockOrder = getBlockOrder( state, anchorRootClientId );\n\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t// Reassign selection start and end based on order.\n\tconst [ selectionStart, selectionEnd ] =\n\t\tanchorIndex > focusIndex\n\t\t\t? [ selectionFocus, selectionAnchor ]\n\t\t\t: [ selectionAnchor, selectionFocus ];\n\n\tconst blockA = getBlock( state, selectionStart.clientId );\n\tconst blockB = getBlock( state, selectionEnd.clientId );\n\n\tconst htmlA = blockA.attributes[ selectionStart.attributeKey ];\n\tconst htmlB = blockB.attributes[ selectionEnd.attributeKey ];\n\n\tlet valueA = create( { html: htmlA } );\n\tlet valueB = create( { html: htmlB } );\n\n\tvalueA = remove( valueA, 0, selectionStart.offset );\n\tvalueB = remove( valueB, selectionEnd.offset, valueB.text.length );\n\n\treturn [\n\t\t{\n\t\t\t...blockA,\n\t\t\tattributes: {\n\t\t\t\t...blockA.attributes,\n\t\t\t\t[ selectionStart.attributeKey ]: toHTMLString( {\n\t\t\t\t\tvalue: valueA,\n\t\t\t\t} ),\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\t...blockB,\n\t\t\tattributes: {\n\t\t\t\t...blockB.attributes,\n\t\t\t\t[ selectionEnd.attributeKey ]: toHTMLString( {\n\t\t\t\t\tvalue: valueB,\n\t\t\t\t} ),\n\t\t\t},\n\t\t},\n\t];\n};\n\n/**\n * Returns an array containing all block client IDs in the editor in the order\n * they appear. Optionally accepts a root client ID of the block list for which\n * the order should be returned, defaulting to the top-level block order.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Array} Ordered client IDs of editor blocks.\n */\nexport function getBlockOrder( state, rootClientId ) {\n\treturn state.blocks.order.get( rootClientId || '' ) || EMPTY_ARRAY;\n}\n\n/**\n * Returns the index at which the block corresponding to the specified client\n * ID occurs within the block order, or `-1` if the block does not exist.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {number} Index at which block exists in order.\n */\nexport function getBlockIndex( state, clientId ) {\n\tconst rootClientId = getBlockRootClientId( state, clientId );\n\treturn getBlockOrder( state, rootClientId ).indexOf( clientId );\n}\n\n/**\n * Returns true if the block corresponding to the specified client ID is\n * currently selected and no multi-selection exists, or false otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is selected and multi-selection exists.\n */\nexport function isBlockSelected( state, clientId ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId !== selectionEnd.clientId ) {\n\t\treturn false;\n\t}\n\n\treturn selectionStart.clientId === clientId;\n}\n\n/**\n * Returns true if one of the block's inner blocks is selected.\n *\n * @param {Object}  state    Editor state.\n * @param {string}  clientId Block client ID.\n * @param {boolean} deep     Perform a deep check.\n *\n * @return {boolean} Whether the block has an inner block selected\n */\nexport function hasSelectedInnerBlock( state, clientId, deep = false ) {\n\tconst selectedBlockClientIds = getSelectedBlockClientIds( state );\n\n\tif ( ! selectedBlockClientIds.length ) {\n\t\treturn false;\n\t}\n\n\tif ( deep ) {\n\t\treturn selectedBlockClientIds.some( ( id ) =>\n\t\t\t// Pass true because we don't care about order and it's more\n\t\t\t// performant.\n\t\t\tgetBlockParents( state, id, true ).includes( clientId )\n\t\t);\n\t}\n\n\treturn selectedBlockClientIds.some(\n\t\t( id ) => getBlockRootClientId( state, id ) === clientId\n\t);\n}\n\n/**\n * Returns true if one of the block's inner blocks is dragged.\n *\n * @param {Object}  state    Editor state.\n * @param {string}  clientId Block client ID.\n * @param {boolean} deep     Perform a deep check.\n *\n * @return {boolean} Whether the block has an inner block dragged\n */\nexport function hasDraggedInnerBlock( state, clientId, deep = false ) {\n\treturn getBlockOrder( state, clientId ).some(\n\t\t( innerClientId ) =>\n\t\t\tisBlockBeingDragged( state, innerClientId ) ||\n\t\t\t( deep && hasDraggedInnerBlock( state, innerClientId, deep ) )\n\t);\n}\n\n/**\n * Returns true if the block corresponding to the specified client ID is\n * currently selected but isn't the last of the selected blocks. Here \"last\"\n * refers to the block sequence in the document, _not_ the sequence of\n * multi-selection, which is why `state.selectionEnd` isn't used.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is selected and not the last in the\n *                   selection.\n */\nexport function isBlockWithinSelection( state, clientId ) {\n\tif ( ! clientId ) {\n\t\treturn false;\n\t}\n\n\tconst clientIds = getMultiSelectedBlockClientIds( state );\n\tconst index = clientIds.indexOf( clientId );\n\treturn index > -1 && index < clientIds.length - 1;\n}\n\n/**\n * Returns true if a multi-selection has been made, or false otherwise.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether multi-selection has been made.\n */\nexport function hasMultiSelection( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\treturn selectionStart.clientId !== selectionEnd.clientId;\n}\n\n/**\n * Whether in the process of multi-selecting or not. This flag is only true\n * while the multi-selection is being selected (by mouse move), and is false\n * once the multi-selection has been settled.\n *\n * @see hasMultiSelection\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} True if multi-selecting, false if not.\n */\nexport function isMultiSelecting( state ) {\n\treturn state.isMultiSelecting;\n}\n\n/**\n * Selector that returns if multi-selection is enabled or not.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} True if it should be possible to multi-select blocks, false if multi-selection is disabled.\n */\nexport function isSelectionEnabled( state ) {\n\treturn state.isSelectionEnabled;\n}\n\n/**\n * Returns the block's editing mode, defaulting to \"visual\" if not explicitly\n * assigned.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Block editing mode.\n */\nexport function getBlockMode( state, clientId ) {\n\treturn state.blocksMode[ clientId ] || 'visual';\n}\n\n/**\n * Returns true if the user is typing, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether user is typing.\n */\nexport function isTyping( state ) {\n\treturn state.isTyping;\n}\n\n/**\n * Returns true if the user is dragging blocks, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether user is dragging blocks.\n */\nexport function isDraggingBlocks( state ) {\n\treturn !! state.draggedBlocks.length;\n}\n\n/**\n * Returns the client ids of any blocks being directly dragged.\n *\n * This does not include children of a parent being dragged.\n *\n * @param {Object} state Global application state.\n *\n * @return {string[]} Array of dragged block client ids.\n */\nexport function getDraggedBlockClientIds( state ) {\n\treturn state.draggedBlocks;\n}\n\n/**\n * Returns whether the block is being dragged.\n *\n * Only returns true if the block is being directly dragged,\n * not if the block is a child of a parent being dragged.\n * See `isAncestorBeingDragged` for child blocks.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client id for block to check.\n *\n * @return {boolean} Whether the block is being dragged.\n */\nexport function isBlockBeingDragged( state, clientId ) {\n\treturn state.draggedBlocks.includes( clientId );\n}\n\n/**\n * Returns whether a parent/ancestor of the block is being dragged.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client id for block to check.\n *\n * @return {boolean} Whether the block's ancestor is being dragged.\n */\nexport function isAncestorBeingDragged( state, clientId ) {\n\t// Return early if no blocks are being dragged rather than\n\t// the more expensive check for parents.\n\tif ( ! isDraggingBlocks( state ) ) {\n\t\treturn false;\n\t}\n\n\tconst parents = getBlockParents( state, clientId );\n\treturn parents.some( ( parentClientId ) =>\n\t\tisBlockBeingDragged( state, parentClientId )\n\t);\n}\n\n/**\n * Returns true if the caret is within formatted text, or false otherwise.\n *\n * @deprecated\n *\n * @return {boolean} Whether the caret is within formatted text.\n */\nexport function isCaretWithinFormattedText() {\n\tdeprecated(\n\t\t'wp.data.select( \"core/block-editor\" ).isCaretWithinFormattedText',\n\t\t{\n\t\t\tsince: '6.1',\n\t\t\tversion: '6.3',\n\t\t}\n\t);\n\n\treturn false;\n}\n\n/**\n * Returns the location of the insertion cue. Defaults to the last index.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} Insertion point object with `rootClientId`, `index`.\n */\nexport const getBlockInsertionPoint = createSelector(\n\t( state ) => {\n\t\tlet rootClientId, index;\n\n\t\tconst {\n\t\t\tinsertionCue,\n\t\t\tselection: { selectionEnd },\n\t\t} = state;\n\t\tif ( insertionCue !== null ) {\n\t\t\treturn insertionCue;\n\t\t}\n\n\t\tconst { clientId } = selectionEnd;\n\n\t\tif ( clientId ) {\n\t\t\trootClientId = getBlockRootClientId( state, clientId ) || undefined;\n\t\t\tindex = getBlockIndex( state, selectionEnd.clientId ) + 1;\n\t\t} else {\n\t\t\tindex = getBlockOrder( state ).length;\n\t\t}\n\n\t\treturn { rootClientId, index };\n\t},\n\t( state ) => [\n\t\tstate.insertionCue,\n\t\tstate.selection.selectionEnd.clientId,\n\t\tstate.blocks.parents,\n\t\tstate.blocks.order,\n\t]\n);\n\n/**\n * Returns true if the block insertion point is visible.\n *\n * @param {Object} state Global application state.\n *\n * @return {?boolean} Whether the insertion point is visible or not.\n */\nexport function isBlockInsertionPointVisible( state ) {\n\treturn state.insertionCue !== null;\n}\n\n/**\n * Returns whether the blocks matches the template or not.\n *\n * @param {boolean} state\n * @return {?boolean} Whether the template is valid or not.\n */\nexport function isValidTemplate( state ) {\n\treturn state.template.isValid;\n}\n\n/**\n * Returns the defined block template\n *\n * @param {boolean} state\n *\n * @return {?Array} Block Template.\n */\nexport function getTemplate( state ) {\n\treturn state.settings.template;\n}\n\n/**\n * Returns the defined block template lock. Optionally accepts a root block\n * client ID as context, otherwise defaulting to the global context.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional block root client ID.\n *\n * @return {string|false} Block Template Lock\n */\nexport function getTemplateLock( state, rootClientId ) {\n\tif ( ! rootClientId ) {\n\t\treturn state.settings.templateLock ?? false;\n\t}\n\n\treturn getBlockListSettings( state, rootClientId )?.templateLock ?? false;\n}\n\n/**\n * Determines if the given block type is visible in the inserter.\n * Note that this is different than whether a block is allowed to be inserted.\n * In some cases, the block is not allowed in a given position but\n * it should still be visible in the inserter to be able to add it\n * to a different position.\n *\n * @param {Object}        state           Editor state.\n * @param {string|Object} blockNameOrType The block type object, e.g., the response\n *                                        from the block directory; or a string name of\n *                                        an installed block type, e.g.' core/paragraph'.\n * @param {?string}       rootClientId    Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block type is allowed to be inserted.\n */\nconst isBlockVisibleInTheInserter = (\n\tstate,\n\tblockNameOrType,\n\trootClientId = null\n) => {\n\tlet blockType;\n\tlet blockName;\n\n\tif ( blockNameOrType && 'object' === typeof blockNameOrType ) {\n\t\tblockType = blockNameOrType;\n\t\tblockName = blockNameOrType.name;\n\t} else {\n\t\tblockType = getBlockType( blockNameOrType );\n\t\tblockName = blockNameOrType;\n\t}\n\n\tif ( ! blockType ) {\n\t\treturn false;\n\t}\n\n\tconst { allowedBlockTypes } = getSettings( state );\n\n\tconst isBlockAllowedInEditor = checkAllowList(\n\t\tallowedBlockTypes,\n\t\tblockName,\n\t\ttrue\n\t);\n\tif ( ! isBlockAllowedInEditor ) {\n\t\treturn false;\n\t}\n\n\t// If parent blocks are not visible, child blocks should be hidden too.\n\tconst parents = (\n\t\tArray.isArray( blockType.parent ) ? blockType.parent : []\n\t).concat( Array.isArray( blockType.ancestor ) ? blockType.ancestor : [] );\n\tif ( parents.length > 0 ) {\n\t\t// This is an exception to the rule that says that all blocks are visible in the inserter.\n\t\t// Blocks that require a given parent or ancestor are only visible if we're within that parent.\n\t\tif ( parents.includes( 'core/post-content' ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet current = rootClientId;\n\t\tlet hasParent = false;\n\t\tdo {\n\t\t\tif ( parents.includes( getBlockName( state, current ) ) ) {\n\t\t\t\thasParent = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrent = state.blocks.parents.get( current );\n\t\t} while ( current );\n\n\t\treturn hasParent;\n\t}\n\n\treturn true;\n};\n\n/**\n * Determines if the given block type is allowed to be inserted into the block list.\n * This function is not exported and not memoized because using a memoized selector\n * inside another memoized selector is just a waste of time.\n *\n * @param {Object}        state        Editor state.\n * @param {string|Object} blockName    The block type object, e.g., the response\n *                                     from the block directory; or a string name of\n *                                     an installed block type, e.g.' core/paragraph'.\n * @param {?string}       rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block type is allowed to be inserted.\n */\nconst canInsertBlockTypeUnmemoized = (\n\tstate,\n\tblockName,\n\trootClientId = null\n) => {\n\tif ( ! isBlockVisibleInTheInserter( state, blockName, rootClientId ) ) {\n\t\treturn false;\n\t}\n\n\tlet blockType;\n\tif ( blockName && 'object' === typeof blockName ) {\n\t\tblockType = blockName;\n\t\tblockName = blockType.name;\n\t} else {\n\t\tblockType = getBlockType( blockName );\n\t}\n\n\tconst isLocked = !! getTemplateLock( state, rootClientId );\n\tif ( isLocked ) {\n\t\treturn false;\n\t}\n\n\tconst _isSectionBlock = !! isSectionBlock( state, rootClientId );\n\tif ( _isSectionBlock ) {\n\t\treturn false;\n\t}\n\n\tif ( getBlockEditingMode( state, rootClientId ?? '' ) === 'disabled' ) {\n\t\treturn false;\n\t}\n\n\tconst parentBlockListSettings = getBlockListSettings( state, rootClientId );\n\n\t// The parent block doesn't have settings indicating it doesn't support\n\t// inner blocks, return false.\n\tif ( rootClientId && parentBlockListSettings === undefined ) {\n\t\treturn false;\n\t}\n\n\tconst parentName = getBlockName( state, rootClientId );\n\tconst parentBlockType = getBlockType( parentName );\n\n\t// Look at the `blockType.allowedBlocks` field to determine whether this is an allowed child block.\n\tconst parentAllowedChildBlocks = parentBlockType?.allowedBlocks;\n\tlet hasParentAllowedBlock = checkAllowList(\n\t\tparentAllowedChildBlocks,\n\t\tblockName\n\t);\n\n\t// The `allowedBlocks` block list setting can further limit which blocks are allowed children.\n\tif ( hasParentAllowedBlock !== false ) {\n\t\tconst parentAllowedBlocks = parentBlockListSettings?.allowedBlocks;\n\t\tconst hasParentListAllowedBlock = checkAllowList(\n\t\t\tparentAllowedBlocks,\n\t\t\tblockName\n\t\t);\n\t\t// Never downgrade the result from `true` to `null`\n\t\tif ( hasParentListAllowedBlock !== null ) {\n\t\t\thasParentAllowedBlock = hasParentListAllowedBlock;\n\t\t}\n\t}\n\n\tconst blockAllowedParentBlocks = blockType.parent;\n\tconst hasBlockAllowedParent = checkAllowList(\n\t\tblockAllowedParentBlocks,\n\t\tparentName\n\t);\n\n\tlet hasBlockAllowedAncestor = true;\n\tconst blockAllowedAncestorBlocks = blockType.ancestor;\n\tif ( blockAllowedAncestorBlocks ) {\n\t\tconst ancestors = [\n\t\t\trootClientId,\n\t\t\t...getBlockParents( state, rootClientId ),\n\t\t];\n\n\t\thasBlockAllowedAncestor = ancestors.some( ( ancestorClientId ) =>\n\t\t\tcheckAllowList(\n\t\t\t\tblockAllowedAncestorBlocks,\n\t\t\t\tgetBlockName( state, ancestorClientId )\n\t\t\t)\n\t\t);\n\t}\n\n\tconst canInsert =\n\t\thasBlockAllowedAncestor &&\n\t\t( ( hasParentAllowedBlock === null &&\n\t\t\thasBlockAllowedParent === null ) ||\n\t\t\thasParentAllowedBlock === true ||\n\t\t\thasBlockAllowedParent === true );\n\n\tif ( ! canInsert ) {\n\t\treturn canInsert;\n\t}\n\n\t/**\n\t * This filter is an ad-hoc solution to prevent adding template parts inside post content.\n\t * Conceptually, having a filter inside a selector is bad pattern so this code will be\n\t * replaced by a declarative API that doesn't the following drawbacks:\n\t *\n\t * Filters are not reactive: Upon switching between \"template mode\" and non \"template mode\",\n\t * the filter and selector won't necessarily be executed again. For now, it doesn't matter much\n\t * because you can't switch between the two modes while the inserter stays open.\n\t *\n\t * Filters are global: Once they're defined, they will affect all editor instances and all registries.\n\t * An ideal API would only affect specific editor instances.\n\t */\n\treturn applyFilters(\n\t\t'blockEditor.__unstableCanInsertBlockType',\n\t\tcanInsert,\n\t\tblockType,\n\t\trootClientId,\n\t\t{\n\t\t\t// Pass bound selectors of the current registry. If we're in a nested\n\t\t\t// context, the data will differ from the one selected from the root\n\t\t\t// registry.\n\t\t\tgetBlock: getBlock.bind( null, state ),\n\t\t\tgetBlockParentsByBlockName: getBlockParentsByBlockName.bind(\n\t\t\t\tnull,\n\t\t\t\tstate\n\t\t\t),\n\t\t}\n\t);\n};\n\n/**\n * Determines if the given block type is allowed to be inserted into the block list.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  blockName    The name of the block type, e.g.' core/paragraph'.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block type is allowed to be inserted.\n */\nexport const canInsertBlockType = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\tcanInsertBlockTypeUnmemoized,\n\t\t( state, blockName, rootClientId ) =>\n\t\t\tgetInsertBlockTypeDependants( select )( state, rootClientId )\n\t)\n);\n\n/**\n * Determines if the given blocks are allowed to be inserted into the block\n * list.\n *\n * @param {Object}   state        Editor state.\n * @param {string[]} clientIds    The block client IDs to be inserted.\n * @param {?string}  rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given blocks are allowed to be inserted.\n */\nexport function canInsertBlocks( state, clientIds, rootClientId = null ) {\n\treturn clientIds.every( ( id ) =>\n\t\tcanInsertBlockType( state, getBlockName( state, id ), rootClientId )\n\t);\n}\n\n/**\n * Determines if the given block is allowed to be deleted.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId The block client Id.\n *\n * @return {boolean} Whether the given block is allowed to be removed.\n */\nexport function canRemoveBlock( state, clientId ) {\n\tconst attributes = getBlockAttributes( state, clientId );\n\tif ( attributes === null ) {\n\t\treturn true;\n\t}\n\tif ( attributes.lock?.remove !== undefined ) {\n\t\treturn ! attributes.lock.remove;\n\t}\n\n\tconst rootClientId = getBlockRootClientId( state, clientId );\n\tif ( getTemplateLock( state, rootClientId ) ) {\n\t\treturn false;\n\t}\n\n\tconst isBlockWithinSection = !! getParentSectionBlock( state, clientId );\n\tif ( isBlockWithinSection ) {\n\t\treturn false;\n\t}\n\n\treturn getBlockEditingMode( state, rootClientId ) !== 'disabled';\n}\n\n/**\n * Determines if the given blocks are allowed to be removed.\n *\n * @param {Object} state     Editor state.\n * @param {string} clientIds The block client IDs to be removed.\n *\n * @return {boolean} Whether the given blocks are allowed to be removed.\n */\nexport function canRemoveBlocks( state, clientIds ) {\n\treturn clientIds.every( ( clientId ) => canRemoveBlock( state, clientId ) );\n}\n\n/**\n * Determines if the given block is allowed to be moved.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId The block client Id.\n *\n * @return {boolean} Whether the given block is allowed to be moved.\n */\nexport function canMoveBlock( state, clientId ) {\n\tconst attributes = getBlockAttributes( state, clientId );\n\tif ( attributes === null ) {\n\t\treturn true;\n\t}\n\tif ( attributes.lock?.move !== undefined ) {\n\t\treturn ! attributes.lock.move;\n\t}\n\n\tconst rootClientId = getBlockRootClientId( state, clientId );\n\tif ( getTemplateLock( state, rootClientId ) === 'all' ) {\n\t\treturn false;\n\t}\n\treturn getBlockEditingMode( state, rootClientId ) !== 'disabled';\n}\n\n/**\n * Determines if the given blocks are allowed to be moved.\n *\n * @param {Object} state     Editor state.\n * @param {string} clientIds The block client IDs to be moved.\n *\n * @return {boolean} Whether the given blocks are allowed to be moved.\n */\nexport function canMoveBlocks( state, clientIds ) {\n\treturn clientIds.every( ( clientId ) => canMoveBlock( state, clientId ) );\n}\n\n/**\n * Determines if the given block is allowed to be edited.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId The block client Id.\n *\n * @return {boolean} Whether the given block is allowed to be edited.\n */\nexport function canEditBlock( state, clientId ) {\n\tconst attributes = getBlockAttributes( state, clientId );\n\tif ( attributes === null ) {\n\t\treturn true;\n\t}\n\n\tconst { lock } = attributes;\n\n\t// When the edit is true, we cannot edit the block.\n\treturn ! lock?.edit;\n}\n\n/**\n * Determines if the given block type can be locked/unlocked by a user.\n *\n * @param {Object}          state      Editor state.\n * @param {(string|Object)} nameOrType Block name or type object.\n *\n * @return {boolean} Whether a given block type can be locked/unlocked.\n */\nexport function canLockBlockType( state, nameOrType ) {\n\tif ( ! hasBlockSupport( nameOrType, 'lock', true ) ) {\n\t\treturn false;\n\t}\n\n\t// Use block editor settings as the default value.\n\treturn !! state.settings?.canLockBlocks;\n}\n\n/**\n * Returns information about how recently and frequently a block has been inserted.\n *\n * @param {Object} state Global application state.\n * @param {string} id    A string which identifies the insert, e.g. 'core/block/12'\n *\n * @return {?{ time: number, count: number }} An object containing `time` which is when the last\n *                                            insert occurred as a UNIX epoch, and `count` which is\n *                                            the number of inserts that have occurred.\n */\nfunction getInsertUsage( state, id ) {\n\treturn state.preferences.insertUsage?.[ id ] ?? null;\n}\n\n/**\n * Returns whether we can show a block type in the inserter\n *\n * @param {Object}  state        Global State\n * @param {Object}  blockType    BlockType\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block type is allowed to be shown in the inserter.\n */\nconst canIncludeBlockTypeInInserter = ( state, blockType, rootClientId ) => {\n\tif ( ! hasBlockSupport( blockType, 'inserter', true ) ) {\n\t\treturn false;\n\t}\n\n\treturn canInsertBlockTypeUnmemoized( state, blockType.name, rootClientId );\n};\n\n/**\n * Return a function to be used to transform a block variation to an inserter item\n *\n * @param {Object} state Global State\n * @param {Object} item  Denormalized inserter item\n * @return {Function} Function to transform a block variation to inserter item\n */\nconst getItemFromVariation = ( state, item ) => ( variation ) => {\n\tconst variationId = `${ item.id }/${ variation.name }`;\n\tconst { time, count = 0 } = getInsertUsage( state, variationId ) || {};\n\treturn {\n\t\t...item,\n\t\tid: variationId,\n\t\ticon: variation.icon || item.icon,\n\t\ttitle: variation.title || item.title,\n\t\tdescription: variation.description || item.description,\n\t\tcategory: variation.category || item.category,\n\t\t// If `example` is explicitly undefined for the variation, the preview will not be shown.\n\t\texample: variation.hasOwnProperty( 'example' )\n\t\t\t? variation.example\n\t\t\t: item.example,\n\t\tinitialAttributes: {\n\t\t\t...item.initialAttributes,\n\t\t\t...variation.attributes,\n\t\t},\n\t\tinnerBlocks: variation.innerBlocks,\n\t\tkeywords: variation.keywords || item.keywords,\n\t\tfrecency: calculateFrecency( time, count ),\n\t};\n};\n\n/**\n * Returns the calculated frecency.\n *\n * 'frecency' is a heuristic (https://en.wikipedia.org/wiki/Frecency)\n * that combines block usage frequency and recency.\n *\n * @param {number} time  When the last insert occurred as a UNIX epoch\n * @param {number} count The number of inserts that have occurred.\n *\n * @return {number} The calculated frecency.\n */\nconst calculateFrecency = ( time, count ) => {\n\tif ( ! time ) {\n\t\treturn count;\n\t}\n\t// The selector is cached, which means Date.now() is the last time that the\n\t// relevant state changed. This suits our needs.\n\tconst duration = Date.now() - time;\n\tswitch ( true ) {\n\t\tcase duration < MILLISECONDS_PER_HOUR:\n\t\t\treturn count * 4;\n\t\tcase duration < MILLISECONDS_PER_DAY:\n\t\t\treturn count * 2;\n\t\tcase duration < MILLISECONDS_PER_WEEK:\n\t\t\treturn count / 2;\n\t\tdefault:\n\t\t\treturn count / 4;\n\t}\n};\n\n/**\n * Returns a function that accepts a block type and builds an item to be shown\n * in a specific context. It's used for building items for Inserter and available\n * block Transforms list.\n *\n * @param {Object} state              Editor state.\n * @param {Object} options            Options object for handling the building of a block type.\n * @param {string} options.buildScope The scope for which the item is going to be used.\n * @return {Function} Function returns an item to be shown in a specific context (Inserter|Transforms list).\n */\nconst buildBlockTypeItem =\n\t( state, { buildScope = 'inserter' } ) =>\n\t( blockType ) => {\n\t\tconst id = blockType.name;\n\n\t\tlet isDisabled = false;\n\t\tif ( ! hasBlockSupport( blockType.name, 'multiple', true ) ) {\n\t\t\tisDisabled = getBlocksByClientId(\n\t\t\t\tstate,\n\t\t\t\tgetClientIdsWithDescendants( state )\n\t\t\t).some( ( { name } ) => name === blockType.name );\n\t\t}\n\n\t\tconst { time, count = 0 } = getInsertUsage( state, id ) || {};\n\t\tconst blockItemBase = {\n\t\t\tid,\n\t\t\tname: blockType.name,\n\t\t\ttitle: blockType.title,\n\t\t\ticon: blockType.icon,\n\t\t\tisDisabled,\n\t\t\tfrecency: calculateFrecency( time, count ),\n\t\t};\n\t\tif ( buildScope === 'transform' ) {\n\t\t\treturn blockItemBase;\n\t\t}\n\n\t\tconst inserterVariations = getBlockVariations(\n\t\t\tblockType.name,\n\t\t\t'inserter'\n\t\t);\n\t\treturn {\n\t\t\t...blockItemBase,\n\t\t\tinitialAttributes: {},\n\t\t\tdescription: blockType.description,\n\t\t\tcategory: blockType.category,\n\t\t\tkeywords: blockType.keywords,\n\t\t\tparent: blockType.parent,\n\t\t\tancestor: blockType.ancestor,\n\t\t\tvariations: inserterVariations,\n\t\t\texample: blockType.example,\n\t\t\tutility: 1, // Deprecated.\n\t\t};\n\t};\n\n/**\n * Determines the items that appear in the inserter. Includes both static\n * items (e.g. a regular block type) and dynamic items (e.g. a reusable block).\n *\n * Each item object contains what's necessary to display a button in the\n * inserter and handle its selection.\n *\n * The 'frecency' property is a heuristic (https://en.wikipedia.org/wiki/Frecency)\n * that combines block usage frequency and recency.\n *\n * Items are returned ordered descendingly by their 'utility' and 'frecency'.\n *\n * @param    {Object}   state             Editor state.\n * @param    {?string}  rootClientId      Optional root client ID of block list.\n *\n * @return {WPEditorInserterItem[]} Items that appear in inserter.\n *\n * @typedef {Object} WPEditorInserterItem\n * @property {string}   id                Unique identifier for the item.\n * @property {string}   name              The type of block to create.\n * @property {Object}   initialAttributes Attributes to pass to the newly created block.\n * @property {string}   title             Title of the item, as it appears in the inserter.\n * @property {string}   icon              Dashicon for the item, as it appears in the inserter.\n * @property {string}   category          Block category that the item is associated with.\n * @property {string[]} keywords          Keywords that can be searched to find this item.\n * @property {boolean}  isDisabled        Whether or not the user should be prevented from inserting\n *                                        this item.\n * @property {number}   frecency          Heuristic that combines frequency and recency.\n */\nexport const getInserterItems = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, rootClientId = null, options = DEFAULT_INSERTER_OPTIONS ) => {\n\t\t\tconst buildReusableBlockInserterItem = ( reusableBlock ) => {\n\t\t\t\tconst icon = ! reusableBlock.wp_pattern_sync_status\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tsrc: symbol,\n\t\t\t\t\t\t\tforeground: 'var(--wp-block-synced-color)',\n\t\t\t\t\t  }\n\t\t\t\t\t: symbol;\n\t\t\t\tconst id = `core/block/${ reusableBlock.id }`;\n\t\t\t\tconst { time, count = 0 } = getInsertUsage( state, id ) || {};\n\t\t\t\tconst frecency = calculateFrecency( time, count );\n\n\t\t\t\treturn {\n\t\t\t\t\tid,\n\t\t\t\t\tname: 'core/block',\n\t\t\t\t\tinitialAttributes: { ref: reusableBlock.id },\n\t\t\t\t\ttitle: reusableBlock.title?.raw,\n\t\t\t\t\ticon,\n\t\t\t\t\tcategory: 'reusable',\n\t\t\t\t\tkeywords: [ 'reusable' ],\n\t\t\t\t\tisDisabled: false,\n\t\t\t\t\tutility: 1, // Deprecated.\n\t\t\t\t\tfrecency,\n\t\t\t\t\tcontent: reusableBlock.content?.raw,\n\t\t\t\t\tsyncStatus: reusableBlock.wp_pattern_sync_status,\n\t\t\t\t};\n\t\t\t};\n\n\t\t\tconst syncedPatternInserterItems = canInsertBlockTypeUnmemoized(\n\t\t\t\tstate,\n\t\t\t\t'core/block',\n\t\t\t\trootClientId\n\t\t\t)\n\t\t\t\t? unlock( select( STORE_NAME ) )\n\t\t\t\t\t\t.getReusableBlocks()\n\t\t\t\t\t\t.map( buildReusableBlockInserterItem )\n\t\t\t\t: [];\n\n\t\t\tconst buildBlockTypeInserterItem = buildBlockTypeItem( state, {\n\t\t\t\tbuildScope: 'inserter',\n\t\t\t} );\n\n\t\t\tlet blockTypeInserterItems = getBlockTypes()\n\t\t\t\t.filter( ( blockType ) =>\n\t\t\t\t\thasBlockSupport( blockType, 'inserter', true )\n\t\t\t\t)\n\t\t\t\t.map( buildBlockTypeInserterItem );\n\n\t\t\tif ( options[ isFiltered ] !== false ) {\n\t\t\t\tblockTypeInserterItems = blockTypeInserterItems.filter(\n\t\t\t\t\t( blockType ) =>\n\t\t\t\t\t\tcanIncludeBlockTypeInInserter(\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tblockType,\n\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tblockTypeInserterItems = blockTypeInserterItems\n\t\t\t\t\t.filter( ( blockType ) =>\n\t\t\t\t\t\tisBlockVisibleInTheInserter(\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tblockType,\n\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.map( ( blockType ) => ( {\n\t\t\t\t\t\t...blockType,\n\t\t\t\t\t\tisAllowedInCurrentRoot: canIncludeBlockTypeInInserter(\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tblockType,\n\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t),\n\t\t\t\t\t} ) );\n\t\t\t}\n\n\t\t\tconst items = blockTypeInserterItems.reduce(\n\t\t\t\t( accumulator, item ) => {\n\t\t\t\t\tconst { variations = [] } = item;\n\t\t\t\t\t// Exclude any block type item that is to be replaced by a default variation.\n\t\t\t\t\tif ( ! variations.some( ( { isDefault } ) => isDefault ) ) {\n\t\t\t\t\t\taccumulator.push( item );\n\t\t\t\t\t}\n\t\t\t\t\tif ( variations.length ) {\n\t\t\t\t\t\tconst variationMapper = getItemFromVariation(\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\titem\n\t\t\t\t\t\t);\n\t\t\t\t\t\taccumulator.push(\n\t\t\t\t\t\t\t...variations.map( variationMapper )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn accumulator;\n\t\t\t\t},\n\t\t\t\t[]\n\t\t\t);\n\n\t\t\t// Ensure core blocks are prioritized in the returned results,\n\t\t\t// because third party blocks can be registered earlier than\n\t\t\t// the core blocks (usually by using the `init` action),\n\t\t\t// thus affecting the display order.\n\t\t\t// We don't sort reusable blocks as they are handled differently.\n\t\t\tconst groupByType = ( blocks, block ) => {\n\t\t\t\tconst { core, noncore } = blocks;\n\t\t\t\tconst type = block.name.startsWith( 'core/' ) ? core : noncore;\n\n\t\t\t\ttype.push( block );\n\t\t\t\treturn blocks;\n\t\t\t};\n\t\t\tconst { core: coreItems, noncore: nonCoreItems } = items.reduce(\n\t\t\t\tgroupByType,\n\t\t\t\t{ core: [], noncore: [] }\n\t\t\t);\n\t\t\tconst sortedBlockTypes = [ ...coreItems, ...nonCoreItems ];\n\t\t\treturn [ ...sortedBlockTypes, ...syncedPatternInserterItems ];\n\t\t},\n\t\t( state, rootClientId ) => [\n\t\t\tgetBlockTypes(),\n\t\t\tunlock( select( STORE_NAME ) ).getReusableBlocks(),\n\t\t\tstate.blocks.order,\n\t\t\tstate.preferences.insertUsage,\n\t\t\t...getInsertBlockTypeDependants( select )( state, rootClientId ),\n\t\t]\n\t)\n);\n\n/**\n * Determines the items that appear in the available block transforms list.\n *\n * Each item object contains what's necessary to display a menu item in the\n * transform list and handle its selection.\n *\n * The 'frecency' property is a heuristic (https://en.wikipedia.org/wiki/Frecency)\n * that combines block usage frequency and recency.\n *\n * Items are returned ordered descendingly by their 'frecency'.\n *\n * @param    {Object}          state        Editor state.\n * @param    {Object|Object[]} blocks       Block object or array objects.\n * @param    {?string}         rootClientId Optional root client ID of block list.\n *\n * @return {WPEditorTransformItem[]} Items that appear in inserter.\n *\n * @typedef {Object} WPEditorTransformItem\n * @property {string}          id           Unique identifier for the item.\n * @property {string}          name         The type of block to create.\n * @property {string}          title        Title of the item, as it appears in the inserter.\n * @property {string}          icon         Dashicon for the item, as it appears in the inserter.\n * @property {boolean}         isDisabled   Whether or not the user should be prevented from inserting\n *                                          this item.\n * @property {number}          frecency     Heuristic that combines frequency and recency.\n */\nexport const getBlockTransformItems = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, blocks, rootClientId = null ) => {\n\t\t\tconst normalizedBlocks = Array.isArray( blocks )\n\t\t\t\t? blocks\n\t\t\t\t: [ blocks ];\n\t\t\tconst buildBlockTypeTransformItem = buildBlockTypeItem( state, {\n\t\t\t\tbuildScope: 'transform',\n\t\t\t} );\n\t\t\tconst blockTypeTransformItems = getBlockTypes()\n\t\t\t\t.filter( ( blockType ) =>\n\t\t\t\t\tcanIncludeBlockTypeInInserter(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tblockType,\n\t\t\t\t\t\trootClientId\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.map( buildBlockTypeTransformItem );\n\n\t\t\tconst itemsByName = Object.fromEntries(\n\t\t\t\tObject.entries( blockTypeTransformItems ).map(\n\t\t\t\t\t( [ , value ] ) => [ value.name, value ]\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tconst possibleTransforms = getPossibleBlockTransformations(\n\t\t\t\tnormalizedBlocks\n\t\t\t).reduce( ( accumulator, block ) => {\n\t\t\t\tif ( itemsByName[ block?.name ] ) {\n\t\t\t\t\taccumulator.push( itemsByName[ block.name ] );\n\t\t\t\t}\n\t\t\t\treturn accumulator;\n\t\t\t}, [] );\n\t\t\treturn orderBy(\n\t\t\t\tpossibleTransforms,\n\t\t\t\t( block ) => itemsByName[ block.name ].frecency,\n\t\t\t\t'desc'\n\t\t\t);\n\t\t},\n\t\t( state, blocks, rootClientId ) => [\n\t\t\tgetBlockTypes(),\n\t\t\tstate.preferences.insertUsage,\n\t\t\t...getInsertBlockTypeDependants( select )( state, rootClientId ),\n\t\t]\n\t)\n);\n\n/**\n * Determines whether there are items to show in the inserter.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Items that appear in inserter.\n */\nexport const hasInserterItems = ( state, rootClientId = null ) => {\n\tconst hasBlockType = getBlockTypes().some( ( blockType ) =>\n\t\tcanIncludeBlockTypeInInserter( state, blockType, rootClientId )\n\t);\n\tif ( hasBlockType ) {\n\t\treturn true;\n\t}\n\tconst hasReusableBlock = canInsertBlockTypeUnmemoized(\n\t\tstate,\n\t\t'core/block',\n\t\trootClientId\n\t);\n\n\treturn hasReusableBlock;\n};\n\n/**\n * Returns the list of allowed inserter blocks for inner blocks children.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Array?} The list of allowed block types.\n */\nexport const getAllowedBlocks = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, rootClientId = null ) => {\n\t\t\tif ( ! rootClientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst blockTypes = getBlockTypes().filter( ( blockType ) =>\n\t\t\t\tcanIncludeBlockTypeInInserter( state, blockType, rootClientId )\n\t\t\t);\n\n\t\t\tconst hasReusableBlock = canInsertBlockTypeUnmemoized(\n\t\t\t\tstate,\n\t\t\t\t'core/block',\n\t\t\t\trootClientId\n\t\t\t);\n\n\t\t\tif ( hasReusableBlock ) {\n\t\t\t\tblockTypes.push( 'core/block' );\n\t\t\t}\n\n\t\t\treturn blockTypes;\n\t\t},\n\t\t( state, rootClientId ) => [\n\t\t\tgetBlockTypes(),\n\t\t\t...getInsertBlockTypeDependants( select )( state, rootClientId ),\n\t\t]\n\t)\n);\n\nexport const __experimentalGetAllowedBlocks = createSelector(\n\t( state, rootClientId = null ) => {\n\t\tdeprecated(\n\t\t\t'wp.data.select( \"core/block-editor\" ).__experimentalGetAllowedBlocks',\n\t\t\t{\n\t\t\t\talternative:\n\t\t\t\t\t'wp.data.select( \"core/block-editor\" ).getAllowedBlocks',\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.4',\n\t\t\t}\n\t\t);\n\t\treturn getAllowedBlocks( state, rootClientId );\n\t},\n\t( state, rootClientId ) =>\n\t\tgetAllowedBlocks.getDependants( state, rootClientId )\n);\n\n/**\n * Returns the block to be directly inserted by the block appender.\n *\n * @param    {Object}         state            Editor state.\n * @param    {?string}        rootClientId     Optional root client ID of block list.\n *\n * @return {WPDirectInsertBlock|undefined}              The block type to be directly inserted.\n *\n * @typedef {Object} WPDirectInsertBlock\n * @property {string}         name             The type of block.\n * @property {?Object}        attributes       Attributes to pass to the newly created block.\n * @property {?Array<string>} attributesToCopy Attributes to be copied from adjacent blocks when inserted.\n */\nexport function getDirectInsertBlock( state, rootClientId = null ) {\n\tif ( ! rootClientId ) {\n\t\treturn;\n\t}\n\tconst { defaultBlock, directInsert } =\n\t\tstate.blockListSettings[ rootClientId ] ?? {};\n\tif ( ! defaultBlock || ! directInsert ) {\n\t\treturn;\n\t}\n\n\treturn defaultBlock;\n}\n\nexport function __experimentalGetDirectInsertBlock(\n\tstate,\n\trootClientId = null\n) {\n\tdeprecated(\n\t\t'wp.data.select( \"core/block-editor\" ).__experimentalGetDirectInsertBlock',\n\t\t{\n\t\t\talternative:\n\t\t\t\t'wp.data.select( \"core/block-editor\" ).getDirectInsertBlock',\n\t\t\tsince: '6.3',\n\t\t\tversion: '6.4',\n\t\t}\n\t);\n\treturn getDirectInsertBlock( state, rootClientId );\n}\n\nexport const __experimentalGetParsedPattern = createRegistrySelector(\n\t( select ) => ( state, patternName ) => {\n\t\tconst pattern = unlock( select( STORE_NAME ) ).getPatternBySlug(\n\t\t\tpatternName\n\t\t);\n\t\treturn pattern ? getParsedPattern( pattern ) : null;\n\t}\n);\n\nconst getAllowedPatternsDependants = ( select ) => ( state, rootClientId ) => [\n\t...getAllPatternsDependants( select )( state ),\n\t...getInsertBlockTypeDependants( select )( state, rootClientId ),\n];\n\nconst patternsWithParsedBlocks = new WeakMap();\nfunction enhancePatternWithParsedBlocks( pattern ) {\n\tlet enhancedPattern = patternsWithParsedBlocks.get( pattern );\n\tif ( ! enhancedPattern ) {\n\t\tenhancedPattern = {\n\t\t\t...pattern,\n\t\t\tget blocks() {\n\t\t\t\treturn getParsedPattern( pattern ).blocks;\n\t\t\t},\n\t\t};\n\t\tpatternsWithParsedBlocks.set( pattern, enhancedPattern );\n\t}\n\treturn enhancedPattern;\n}\n\n/**\n * Returns the list of allowed patterns for inner blocks children.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional target root client ID.\n *\n * @return {Array?} The list of allowed patterns.\n */\nexport const __experimentalGetAllowedPatterns = createRegistrySelector(\n\t( select ) => {\n\t\treturn createSelector(\n\t\t\t(\n\t\t\t\tstate,\n\t\t\t\trootClientId = null,\n\t\t\t\toptions = DEFAULT_INSERTER_OPTIONS\n\t\t\t) => {\n\t\t\t\tconst { getAllPatterns } = unlock( select( STORE_NAME ) );\n\t\t\t\tconst patterns = getAllPatterns();\n\t\t\t\tconst { allowedBlockTypes } = getSettings( state );\n\t\t\t\tconst parsedPatterns = patterns\n\t\t\t\t\t.filter( ( { inserter = true } ) => !! inserter )\n\t\t\t\t\t.map( enhancePatternWithParsedBlocks );\n\n\t\t\t\tconst availableParsedPatterns = parsedPatterns.filter(\n\t\t\t\t\t( pattern ) =>\n\t\t\t\t\t\tcheckAllowListRecursive(\n\t\t\t\t\t\t\tgetGrammar( pattern ),\n\t\t\t\t\t\t\tallowedBlockTypes\n\t\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tconst patternsAllowed = availableParsedPatterns.filter(\n\t\t\t\t\t( pattern ) =>\n\t\t\t\t\t\tgetGrammar( pattern ).every( ( { blockName: name } ) =>\n\t\t\t\t\t\t\toptions[ isFiltered ] !== false\n\t\t\t\t\t\t\t\t? canInsertBlockType(\n\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t: isBlockVisibleInTheInserter(\n\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\treturn patternsAllowed;\n\t\t\t},\n\t\t\tgetAllowedPatternsDependants( select )\n\t\t);\n\t}\n);\n\n/**\n * Returns the list of patterns based on their declared `blockTypes`\n * and a block's name.\n * Patterns can use `blockTypes` to integrate in work flows like\n * suggesting appropriate patterns in a Placeholder state(during insertion)\n * or blocks transformations.\n *\n * @param {Object}          state        Editor state.\n * @param {string|string[]} blockNames   Block's name or array of block names to find matching patterns.\n * @param {?string}         rootClientId Optional target root client ID.\n *\n * @return {Array} The list of matched block patterns based on declared `blockTypes` and block name.\n */\nexport const getPatternsByBlockTypes = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, blockNames, rootClientId = null ) => {\n\t\t\tif ( ! blockNames ) {\n\t\t\t\treturn EMPTY_ARRAY;\n\t\t\t}\n\t\t\tconst patterns =\n\t\t\t\tselect( STORE_NAME ).__experimentalGetAllowedPatterns(\n\t\t\t\t\trootClientId\n\t\t\t\t);\n\t\t\tconst normalizedBlockNames = Array.isArray( blockNames )\n\t\t\t\t? blockNames\n\t\t\t\t: [ blockNames ];\n\t\t\tconst filteredPatterns = patterns.filter( ( pattern ) =>\n\t\t\t\tpattern?.blockTypes?.some?.( ( blockName ) =>\n\t\t\t\t\tnormalizedBlockNames.includes( blockName )\n\t\t\t\t)\n\t\t\t);\n\t\t\tif ( filteredPatterns.length === 0 ) {\n\t\t\t\treturn EMPTY_ARRAY;\n\t\t\t}\n\t\t\treturn filteredPatterns;\n\t\t},\n\t\t( state, blockNames, rootClientId ) =>\n\t\t\tgetAllowedPatternsDependants( select )( state, rootClientId )\n\t)\n);\n\nexport const __experimentalGetPatternsByBlockTypes = createRegistrySelector(\n\t( select ) => {\n\t\tdeprecated(\n\t\t\t'wp.data.select( \"core/block-editor\" ).__experimentalGetPatternsByBlockTypes',\n\t\t\t{\n\t\t\t\talternative:\n\t\t\t\t\t'wp.data.select( \"core/block-editor\" ).getPatternsByBlockTypes',\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.4',\n\t\t\t}\n\t\t);\n\t\treturn select( STORE_NAME ).getPatternsByBlockTypes;\n\t}\n);\n\n/**\n * Determines the items that appear in the available pattern transforms list.\n *\n * For now we only handle blocks without InnerBlocks and take into account\n * the `role` property of blocks' attributes for the transformation.\n *\n * We return the first set of possible eligible block patterns,\n * by checking the `blockTypes` property. We still have to recurse through\n * block pattern's blocks and try to find matches from the selected blocks.\n * Now this happens in the consumer to avoid heavy operations in the selector.\n *\n * @param {Object}   state        Editor state.\n * @param {Object[]} blocks       The selected blocks.\n * @param {?string}  rootClientId Optional root client ID of block list.\n *\n * @return {WPBlockPattern[]} Items that are eligible for a pattern transformation.\n */\nexport const __experimentalGetPatternTransformItems = createRegistrySelector(\n\t( select ) =>\n\t\tcreateSelector(\n\t\t\t( state, blocks, rootClientId = null ) => {\n\t\t\t\tif ( ! blocks ) {\n\t\t\t\t\treturn EMPTY_ARRAY;\n\t\t\t\t}\n\t\t\t\t/**\n\t\t\t\t * For now we only handle blocks without InnerBlocks and take into account\n\t\t\t\t * the `role` property of blocks' attributes for the transformation.\n\t\t\t\t * Note that the blocks have been retrieved through `getBlock`, which doesn't\n\t\t\t\t * return the inner blocks of an inner block controller, so we still need\n\t\t\t\t * to check for this case too.\n\t\t\t\t */\n\t\t\t\tif (\n\t\t\t\t\tblocks.some(\n\t\t\t\t\t\t( { clientId, innerBlocks } ) =>\n\t\t\t\t\t\t\tinnerBlocks.length ||\n\t\t\t\t\t\t\tareInnerBlocksControlled( state, clientId )\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn EMPTY_ARRAY;\n\t\t\t\t}\n\n\t\t\t\t// Create a Set of the selected block names that is used in patterns filtering.\n\t\t\t\tconst selectedBlockNames = Array.from(\n\t\t\t\t\tnew Set( blocks.map( ( { name } ) => name ) )\n\t\t\t\t);\n\t\t\t\t/**\n\t\t\t\t * Here we will return first set of possible eligible block patterns,\n\t\t\t\t * by checking the `blockTypes` property. We still have to recurse through\n\t\t\t\t * block pattern's blocks and try to find matches from the selected blocks.\n\t\t\t\t * Now this happens in the consumer to avoid heavy operations in the selector.\n\t\t\t\t */\n\t\t\t\treturn select( STORE_NAME ).getPatternsByBlockTypes(\n\t\t\t\t\tselectedBlockNames,\n\t\t\t\t\trootClientId\n\t\t\t\t);\n\t\t\t},\n\t\t\t( state, blocks, rootClientId ) =>\n\t\t\t\tgetAllowedPatternsDependants( select )( state, rootClientId )\n\t\t)\n);\n\n/**\n * Returns the Block List settings of a block, if any exist.\n *\n * @param {Object}  state    Editor state.\n * @param {?string} clientId Block client ID.\n *\n * @return {?Object} Block settings of the block if set.\n */\nexport function getBlockListSettings( state, clientId ) {\n\treturn state.blockListSettings[ clientId ];\n}\n\n/**\n * Returns the editor settings.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} The editor settings object.\n */\nexport function getSettings( state ) {\n\treturn state.settings;\n}\n\n/**\n * Returns true if the most recent block change is be considered persistent, or\n * false otherwise. A persistent change is one committed by BlockEditorProvider\n * via its `onChange` callback, in addition to `onInput`.\n *\n * @param {Object} state Block editor state.\n *\n * @return {boolean} Whether the most recent block change was persistent.\n */\nexport function isLastBlockChangePersistent( state ) {\n\treturn state.blocks.isPersistentChange;\n}\n\n/**\n * Returns the block list settings for an array of blocks, if any exist.\n *\n * @param {Object} state     Editor state.\n * @param {Array}  clientIds Block client IDs.\n *\n * @return {Object} An object where the keys are client ids and the values are\n *                  a block list setting object.\n */\nexport const __experimentalGetBlockListSettingsForBlocks = createSelector(\n\t( state, clientIds = [] ) => {\n\t\treturn clientIds.reduce( ( blockListSettingsForBlocks, clientId ) => {\n\t\t\tif ( ! state.blockListSettings[ clientId ] ) {\n\t\t\t\treturn blockListSettingsForBlocks;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...blockListSettingsForBlocks,\n\t\t\t\t[ clientId ]: state.blockListSettings[ clientId ],\n\t\t\t};\n\t\t}, {} );\n\t},\n\t( state ) => [ state.blockListSettings ]\n);\n\n/**\n * Returns the title of a given reusable block\n *\n * @param {Object}        state Global application state.\n * @param {number|string} ref   The shared block's ID.\n *\n * @return {string} The reusable block saved title.\n */\nexport const __experimentalGetReusableBlockTitle = createRegistrySelector(\n\t( select ) =>\n\t\tcreateSelector(\n\t\t\t( state, ref ) => {\n\t\t\t\tdeprecated(\n\t\t\t\t\t\"wp.data.select( 'core/block-editor' ).__experimentalGetReusableBlockTitle\",\n\t\t\t\t\t{\n\t\t\t\t\t\tsince: '6.6',\n\t\t\t\t\t\tversion: '6.8',\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tconst reusableBlock = unlock( select( STORE_NAME ) )\n\t\t\t\t\t.getReusableBlocks()\n\t\t\t\t\t.find( ( block ) => block.id === ref );\n\t\t\t\tif ( ! reusableBlock ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn reusableBlock.title?.raw;\n\t\t\t},\n\t\t\t() => [ unlock( select( STORE_NAME ) ).getReusableBlocks() ]\n\t\t)\n);\n\n/**\n * Returns true if the most recent block change is be considered ignored, or\n * false otherwise. An ignored change is one not to be committed by\n * BlockEditorProvider, neither via `onChange` nor `onInput`.\n *\n * @param {Object} state Block editor state.\n *\n * @return {boolean} Whether the most recent block change was ignored.\n */\nexport function __unstableIsLastBlockChangeIgnored( state ) {\n\t// TODO: Removal Plan: Changes incurred by RECEIVE_BLOCKS should not be\n\t// ignored if in-fact they result in a change in blocks state. The current\n\t// need to ignore changes not a result of user interaction should be\n\t// accounted for in the refactoring of reusable blocks as occurring within\n\t// their own separate block editor / state (#7119).\n\treturn state.blocks.isIgnoredChange;\n}\n\n/**\n * Returns the block attributes changed as a result of the last dispatched\n * action.\n *\n * @param {Object} state Block editor state.\n *\n * @return {Object<string,Object>} Subsets of block attributes changed, keyed\n *                                 by block client ID.\n */\nexport function __experimentalGetLastBlockAttributeChanges( state ) {\n\treturn state.lastBlockAttributesChange;\n}\n\n/**\n * Returns whether the navigation mode is enabled.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Is navigation mode enabled.\n */\nexport function isNavigationMode( state ) {\n\treturn __unstableGetEditorMode( state ) === 'navigation';\n}\n\n/**\n * Returns the current editor mode.\n *\n * @param {Object} state Editor state.\n *\n * @return {string} the editor mode.\n */\nexport const __unstableGetEditorMode = createRegistrySelector(\n\t( select ) => ( state ) => {\n\t\tif ( ! window?.__experimentalEditorWriteMode ) {\n\t\t\treturn 'edit';\n\t\t}\n\t\treturn (\n\t\t\tstate.settings.editorTool ??\n\t\t\tselect( preferencesStore ).get( 'core', 'editorTool' )\n\t\t);\n\t}\n);\n\n/**\n * Returns whether block moving mode is enabled.\n *\n * @deprecated\n */\nexport function hasBlockMovingClientId() {\n\tdeprecated(\n\t\t'wp.data.select( \"core/block-editor\" ).hasBlockMovingClientId',\n\t\t{\n\t\t\tsince: '6.7',\n\t\t\thint: 'Block moving mode feature has been removed',\n\t\t}\n\t);\n\treturn false;\n}\n\n/**\n * Returns true if the last change was an automatic change, false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the last change was automatic.\n */\nexport function didAutomaticChange( state ) {\n\treturn !! state.automaticChangeStatus;\n}\n\n/**\n * Returns true if the current highlighted block matches the block clientId.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block to check.\n *\n * @return {boolean} Whether the block is currently highlighted.\n */\nexport function isBlockHighlighted( state, clientId ) {\n\treturn state.highlightedBlock === clientId;\n}\n\n/**\n * Checks if a given block has controlled inner blocks.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block to check.\n *\n * @return {boolean} True if the block has controlled inner blocks.\n */\nexport function areInnerBlocksControlled( state, clientId ) {\n\treturn !! state.blocks.controlledInnerBlocks[ clientId ];\n}\n\n/**\n * Returns the clientId for the first 'active' block of a given array of block names.\n * A block is 'active' if it (or a child) is the selected block.\n * Returns the first match moving up the DOM from the selected block.\n *\n * @param {Object}   state            Global application state.\n * @param {string[]} validBlocksNames The names of block types to check for.\n *\n * @return {string} The matching block's clientId.\n */\nexport const __experimentalGetActiveBlockIdByBlockNames = createSelector(\n\t( state, validBlockNames ) => {\n\t\tif ( ! validBlockNames.length ) {\n\t\t\treturn null;\n\t\t}\n\t\t// Check if selected block is a valid entity area.\n\t\tconst selectedBlockClientId = getSelectedBlockClientId( state );\n\t\tif (\n\t\t\tvalidBlockNames.includes(\n\t\t\t\tgetBlockName( state, selectedBlockClientId )\n\t\t\t)\n\t\t) {\n\t\t\treturn selectedBlockClientId;\n\t\t}\n\t\t// Check if first selected block is a child of a valid entity area.\n\t\tconst multiSelectedBlockClientIds =\n\t\t\tgetMultiSelectedBlockClientIds( state );\n\t\tconst entityAreaParents = getBlockParentsByBlockName(\n\t\t\tstate,\n\t\t\tselectedBlockClientId || multiSelectedBlockClientIds[ 0 ],\n\t\t\tvalidBlockNames\n\t\t);\n\t\tif ( entityAreaParents ) {\n\t\t\t// Last parent closest/most interior.\n\t\t\treturn entityAreaParents[ entityAreaParents.length - 1 ];\n\t\t}\n\t\treturn null;\n\t},\n\t( state, validBlockNames ) => [\n\t\tstate.selection.selectionStart.clientId,\n\t\tstate.selection.selectionEnd.clientId,\n\t\tvalidBlockNames,\n\t]\n);\n\n/**\n * Tells if the block with the passed clientId was just inserted.\n *\n * @param {Object}  state    Global application state.\n * @param {Object}  clientId Client Id of the block.\n * @param {?string} source   Optional insertion source of the block.\n * @return {boolean} True if the block matches the last block inserted from the specified source.\n */\nexport function wasBlockJustInserted( state, clientId, source ) {\n\tconst { lastBlockInserted } = state;\n\treturn (\n\t\tlastBlockInserted.clientIds?.includes( clientId ) &&\n\t\tlastBlockInserted.source === source\n\t);\n}\n\n/**\n * Tells if the block is visible on the canvas or not.\n *\n * @param {Object} state    Global application state.\n * @param {Object} clientId Client Id of the block.\n * @return {boolean} True if the block is visible.\n */\nexport function isBlockVisible( state, clientId ) {\n\treturn state.blockVisibility?.[ clientId ] ?? true;\n}\n\n/**\n * Returns the currently hovered block.\n *\n * @deprecated\n */\nexport function getHoveredBlockClientId() {\n\tdeprecated(\n\t\t\"wp.data.select( 'core/block-editor' ).getHoveredBlockClientId\",\n\t\t{\n\t\t\tsince: '6.9',\n\t\t\tversion: '7.1',\n\t\t}\n\t);\n\treturn undefined;\n}\n\n/**\n * Returns the list of all hidden blocks.\n *\n * @param {Object} state Global application state.\n * @return {[string]} List of hidden blocks.\n */\nexport const __unstableGetVisibleBlocks = createSelector(\n\t( state ) => {\n\t\tconst visibleBlocks = new Set(\n\t\t\tObject.keys( state.blockVisibility ).filter(\n\t\t\t\t( key ) => state.blockVisibility[ key ]\n\t\t\t)\n\t\t);\n\t\tif ( visibleBlocks.size === 0 ) {\n\t\t\treturn EMPTY_SET;\n\t\t}\n\t\treturn visibleBlocks;\n\t},\n\t( state ) => [ state.blockVisibility ]\n);\n\nexport function __unstableHasActiveBlockOverlayActive( state, clientId ) {\n\t// Prevent overlay on blocks with a non-default editing mode. If the mode is\n\t// 'disabled' then the overlay is redundant since the block can't be\n\t// selected. If the mode is 'contentOnly' then the overlay is redundant\n\t// since there will be no controls to interact with once selected.\n\tif ( getBlockEditingMode( state, clientId ) !== 'default' ) {\n\t\treturn false;\n\t}\n\n\t// If the block editing is locked, the block overlay is always active.\n\tif ( ! canEditBlock( state, clientId ) ) {\n\t\treturn true;\n\t}\n\n\t// In zoom-out mode, the block overlay is always active for section level blocks.\n\tif ( isZoomOut( state ) ) {\n\t\tconst sectionRootClientId = getSectionRootClientId( state );\n\t\tif ( sectionRootClientId ) {\n\t\t\tconst sectionClientIds = getBlockOrder(\n\t\t\t\tstate,\n\t\t\t\tsectionRootClientId\n\t\t\t);\n\t\t\tif ( sectionClientIds?.includes( clientId ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if ( clientId && ! getBlockRootClientId( state, clientId ) ) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t// In navigation mode, the block overlay is active when the block is not\n\t// selected (and doesn't contain a selected child). The same behavior is\n\t// also enabled in all modes for blocks that have controlled children\n\t// (reusable block, template part, navigation), unless explicitly disabled\n\t// with `supports.__experimentalDisableBlockOverlay`.\n\tconst blockSupportDisable = hasBlockSupport(\n\t\tgetBlockName( state, clientId ),\n\t\t'__experimentalDisableBlockOverlay',\n\t\tfalse\n\t);\n\tconst shouldEnableIfUnselected = blockSupportDisable\n\t\t? false\n\t\t: areInnerBlocksControlled( state, clientId );\n\n\treturn (\n\t\tshouldEnableIfUnselected &&\n\t\t! isBlockSelected( state, clientId ) &&\n\t\t! hasSelectedInnerBlock( state, clientId, true )\n\t);\n}\n\nexport function __unstableIsWithinBlockOverlay( state, clientId ) {\n\tlet parent = state.blocks.parents.get( clientId );\n\twhile ( !! parent ) {\n\t\tif ( __unstableHasActiveBlockOverlayActive( state, parent ) ) {\n\t\t\treturn true;\n\t\t}\n\t\tparent = state.blocks.parents.get( parent );\n\t}\n\treturn false;\n}\n\n/**\n * @typedef {import('../components/block-editing-mode').BlockEditingMode} BlockEditingMode\n */\n\n/**\n * Returns the block editing mode for a given block.\n *\n * The mode can be one of three options:\n *\n * - `'disabled'`: Prevents editing the block entirely, i.e. it cannot be\n *   selected.\n * - `'contentOnly'`: Hides all non-content UI, e.g. auxiliary controls in the\n *   toolbar, the block movers, block settings.\n * - `'default'`: Allows editing the block as normal.\n *\n * Blocks can set a mode using the `useBlockEditingMode` hook.\n *\n * The mode is inherited by all of the block's inner blocks, unless they have\n * their own mode.\n *\n * A template lock can also set a mode. If the template lock is `'contentOnly'`,\n * the block's mode is overridden to `'contentOnly'` if the block has a content\n * role attribute, or `'disabled'` otherwise.\n *\n * @see useBlockEditingMode\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block client ID, or `''` for the root container.\n *\n * @return {BlockEditingMode} The block editing mode. One of `'disabled'`,\n *                            `'contentOnly'`, or `'default'`.\n */\nexport const getBlockEditingMode = createRegistrySelector(\n\t( select ) =>\n\t\t( state, clientId = '' ) => {\n\t\t\t// Some selectors that call this provide `null` as the default\n\t\t\t// rootClientId, but the default rootClientId is actually `''`.\n\t\t\tif ( clientId === null ) {\n\t\t\t\tclientId = '';\n\t\t\t}\n\n\t\t\tconst isNavMode = isNavigationMode( state );\n\n\t\t\t// If the editor is currently not in navigation mode, check if the clientId\n\t\t\t// has an editing mode set in the regular derived map.\n\t\t\t// There may be an editing mode set here for synced patterns or in zoomed out\n\t\t\t// mode.\n\t\t\tif (\n\t\t\t\t! isNavMode &&\n\t\t\t\tstate.derivedBlockEditingModes?.has( clientId )\n\t\t\t) {\n\t\t\t\treturn state.derivedBlockEditingModes.get( clientId );\n\t\t\t}\n\n\t\t\t// If the editor *is* in navigation mode, the block editing mode states\n\t\t\t// are stored in the derivedNavModeBlockEditingModes map.\n\t\t\tif (\n\t\t\t\tisNavMode &&\n\t\t\t\tstate.derivedNavModeBlockEditingModes?.has( clientId )\n\t\t\t) {\n\t\t\t\treturn state.derivedNavModeBlockEditingModes.get( clientId );\n\t\t\t}\n\n\t\t\t// In normal mode, consider that an explicitly set editing mode takes over.\n\t\t\tconst blockEditingMode = state.blockEditingModes.get( clientId );\n\t\t\tif ( blockEditingMode ) {\n\t\t\t\treturn blockEditingMode;\n\t\t\t}\n\n\t\t\t// In normal mode, top level is default mode.\n\t\t\tif ( clientId === '' ) {\n\t\t\t\treturn 'default';\n\t\t\t}\n\n\t\t\tconst rootClientId = getBlockRootClientId( state, clientId );\n\t\t\tconst templateLock = getTemplateLock( state, rootClientId );\n\t\t\t// If the parent of the block is contentOnly locked, check whether it's a content block.\n\t\t\tif ( templateLock === 'contentOnly' ) {\n\t\t\t\tconst name = getBlockName( state, clientId );\n\t\t\t\tconst { hasContentRoleAttribute } = unlock(\n\t\t\t\t\tselect( blocksStore )\n\t\t\t\t);\n\t\t\t\tconst isContent = hasContentRoleAttribute( name );\n\t\t\t\treturn isContent ? 'contentOnly' : 'disabled';\n\t\t\t}\n\t\t\treturn 'default';\n\t\t}\n);\n\n/**\n * Indicates if a block is ungroupable.\n * A block is ungroupable if it is a single grouping block with inner blocks.\n * If a block has an `ungroup` transform, it is also ungroupable, without the\n * requirement of being the default grouping block.\n * Additionally a block can only be ungrouped if it has inner blocks and can\n * be removed.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client Id of the block. If not passed the selected block's client id will be used.\n * @return {boolean} True if the block is ungroupable.\n */\nexport const isUngroupable = createRegistrySelector(\n\t( select ) =>\n\t\t( state, clientId = '' ) => {\n\t\t\tconst _clientId = clientId || getSelectedBlockClientId( state );\n\t\t\tif ( ! _clientId ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst { getGroupingBlockName } = select( blocksStore );\n\t\t\tconst block = getBlock( state, _clientId );\n\t\t\tconst groupingBlockName = getGroupingBlockName();\n\t\t\tconst _isUngroupable =\n\t\t\t\tblock &&\n\t\t\t\t( block.name === groupingBlockName ||\n\t\t\t\t\tgetBlockType( block.name )?.transforms?.ungroup ) &&\n\t\t\t\t!! block.innerBlocks.length;\n\n\t\t\treturn _isUngroupable && canRemoveBlock( state, _clientId );\n\t\t}\n);\n\n/**\n * Indicates if the provided blocks(by client ids) are groupable.\n * We need to have at least one block, have a grouping block name set and\n * be able to remove these blocks.\n *\n * @param {Object}   state     Global application state.\n * @param {string[]} clientIds Block client ids. If not passed the selected blocks client ids will be used.\n * @return {boolean} True if the blocks are groupable.\n */\nexport const isGroupable = createRegistrySelector(\n\t( select ) =>\n\t\t( state, clientIds = EMPTY_ARRAY ) => {\n\t\t\tconst { getGroupingBlockName } = select( blocksStore );\n\t\t\tconst groupingBlockName = getGroupingBlockName();\n\t\t\tconst _clientIds = clientIds?.length\n\t\t\t\t? clientIds\n\t\t\t\t: getSelectedBlockClientIds( state );\n\t\t\tconst rootClientId = _clientIds?.length\n\t\t\t\t? getBlockRootClientId( state, _clientIds[ 0 ] )\n\t\t\t\t: undefined;\n\t\t\tconst groupingBlockAvailable = canInsertBlockType(\n\t\t\t\tstate,\n\t\t\t\tgroupingBlockName,\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tconst _isGroupable = groupingBlockAvailable && _clientIds.length;\n\t\t\treturn _isGroupable && canRemoveBlocks( state, _clientIds );\n\t\t}\n);\n\n/**\n * DO-NOT-USE in production.\n * This selector is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n *\n * @deprecated\n *\n * @param {Object} state    Global application state.\n * @param {Object} clientId Client Id of the block.\n *\n * @return {?string} Client ID of the ancestor block that is content locking the block.\n */\nexport const __unstableGetContentLockingParent = ( state, clientId ) => {\n\tdeprecated(\n\t\t\"wp.data.select( 'core/block-editor' ).__unstableGetContentLockingParent\",\n\t\t{\n\t\t\tsince: '6.1',\n\t\t\tversion: '6.7',\n\t\t}\n\t);\n\treturn getContentLockingParent( state, clientId );\n};\n\n/**\n * DO-NOT-USE in production.\n * This selector is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n *\n * @deprecated\n *\n * @param {Object} state Global application state.\n */\nexport function __unstableGetTemporarilyEditingAsBlocks( state ) {\n\tdeprecated(\n\t\t\"wp.data.select( 'core/block-editor' ).__unstableGetTemporarilyEditingAsBlocks\",\n\t\t{\n\t\t\tsince: '6.1',\n\t\t\tversion: '6.7',\n\t\t}\n\t);\n\treturn getTemporarilyEditingAsBlocks( state );\n}\n\n/**\n * DO-NOT-USE in production.\n * This selector is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n *\n * @deprecated\n *\n * @param {Object} state Global application state.\n */\nexport function __unstableGetTemporarilyEditingFocusModeToRevert( state ) {\n\tdeprecated(\n\t\t\"wp.data.select( 'core/block-editor' ).__unstableGetTemporarilyEditingFocusModeToRevert\",\n\t\t{\n\t\t\tsince: '6.5',\n\t\t\tversion: '6.7',\n\t\t}\n\t);\n\treturn getTemporarilyEditingFocusModeToRevert( state );\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"a11y\"];","/**\n * WordPress dependencies\n */\nimport { Platform } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\nimport { speak } from '@wordpress/a11y';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from './index';\nimport { unlock } from '../lock-unlock';\n\nconst castArray = ( maybeArray ) =>\n\tArray.isArray( maybeArray ) ? maybeArray : [ maybeArray ];\n\n/**\n * A list of private/experimental block editor settings that\n * should not become a part of the WordPress public API.\n * BlockEditorProvider will remove these settings from the\n * settings object it receives.\n *\n * @see https://github.com/WordPress/gutenberg/pull/46131\n */\nconst privateSettings = [\n\t'inserterMediaCategories',\n\t'blockInspectorAnimation',\n\t'mediaSideload',\n];\n\n/**\n * Action that updates the block editor settings and\n * conditionally preserves the experimental ones.\n *\n * @param {Object}  settings                          Updated settings\n * @param {Object}  options                           Options object.\n * @param {boolean} options.stripExperimentalSettings Whether to strip experimental settings.\n * @param {boolean} options.reset                     Whether to reset the settings.\n * @return {Object} Action object\n */\nexport function __experimentalUpdateSettings(\n\tsettings,\n\t{ stripExperimentalSettings = false, reset = false } = {}\n) {\n\tlet incomingSettings = settings;\n\n\tif ( Object.hasOwn( incomingSettings, '__unstableIsPreviewMode' ) ) {\n\t\tdeprecated(\n\t\t\t\"__unstableIsPreviewMode argument in wp.data.dispatch('core/block-editor').updateSettings\",\n\t\t\t{\n\t\t\t\tsince: '6.8',\n\t\t\t\talternative: 'isPreviewMode',\n\t\t\t}\n\t\t);\n\n\t\tincomingSettings = { ...incomingSettings };\n\t\tincomingSettings.isPreviewMode =\n\t\t\tincomingSettings.__unstableIsPreviewMode;\n\t\tdelete incomingSettings.__unstableIsPreviewMode;\n\t}\n\n\tlet cleanSettings = incomingSettings;\n\n\t// There are no plugins in the mobile apps, so there is no\n\t// need to strip the experimental settings:\n\tif ( stripExperimentalSettings && Platform.OS === 'web' ) {\n\t\tcleanSettings = {};\n\t\tfor ( const key in incomingSettings ) {\n\t\t\tif ( ! privateSettings.includes( key ) ) {\n\t\t\t\tcleanSettings[ key ] = incomingSettings[ key ];\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\ttype: 'UPDATE_SETTINGS',\n\t\tsettings: cleanSettings,\n\t\treset,\n\t};\n}\n\n/**\n * Hides the block interface (eg. toolbar, outline, etc.)\n *\n * @return {Object} Action object.\n */\nexport function hideBlockInterface() {\n\treturn {\n\t\ttype: 'HIDE_BLOCK_INTERFACE',\n\t};\n}\n\n/**\n * Shows the block interface (eg. toolbar, outline, etc.)\n *\n * @return {Object} Action object.\n */\nexport function showBlockInterface() {\n\treturn {\n\t\ttype: 'SHOW_BLOCK_INTERFACE',\n\t};\n}\n\n/**\n * Yields action objects used in signalling that the blocks corresponding to\n * the set of specified client IDs are to be removed.\n *\n * Compared to `removeBlocks`, this private interface exposes an additional\n * parameter; see `forceRemove`.\n *\n * @param {string|string[]} clientIds      Client IDs of blocks to remove.\n * @param {boolean}         selectPrevious True if the previous block\n *                                         or the immediate parent\n *                                         (if no previous block exists)\n *                                         should be selected\n *                                         when a block is removed.\n * @param {boolean}         forceRemove    Whether to force the operation,\n *                                         bypassing any checks for certain\n *                                         block types.\n */\nexport const privateRemoveBlocks =\n\t( clientIds, selectPrevious = true, forceRemove = false ) =>\n\t( { select, dispatch, registry } ) => {\n\t\tif ( ! clientIds || ! clientIds.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tclientIds = castArray( clientIds );\n\t\tconst canRemoveBlocks = select.canRemoveBlocks( clientIds );\n\n\t\tif ( ! canRemoveBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// In certain editing contexts, we'd like to prevent accidental removal\n\t\t// of important blocks. For example, in the site editor, the Query Loop\n\t\t// block is deemed important. In such cases, we'll ask the user for\n\t\t// confirmation that they intended to remove such block(s). However,\n\t\t// the editor instance is responsible for presenting those confirmation\n\t\t// prompts to the user. Any instance opting into removal prompts must\n\t\t// register using `setBlockRemovalRules()`.\n\t\t//\n\t\t// @see https://github.com/WordPress/gutenberg/pull/51145\n\t\tconst rules = ! forceRemove && select.getBlockRemovalRules();\n\n\t\tif ( rules ) {\n\t\t\tfunction flattenBlocks( blocks ) {\n\t\t\t\tconst result = [];\n\t\t\t\tconst stack = [ ...blocks ];\n\t\t\t\twhile ( stack.length ) {\n\t\t\t\t\tconst { innerBlocks, ...block } = stack.shift();\n\t\t\t\t\tstack.push( ...innerBlocks );\n\t\t\t\t\tresult.push( block );\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tconst blockList = clientIds.map( select.getBlock );\n\t\t\tconst flattenedBlocks = flattenBlocks( blockList );\n\n\t\t\t// Find the first message and use it.\n\t\t\tlet message;\n\t\t\tfor ( const rule of rules ) {\n\t\t\t\tmessage = rule.callback( flattenedBlocks );\n\t\t\t\tif ( message ) {\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\tdisplayBlockRemovalPrompt(\n\t\t\t\t\t\t\tclientIds,\n\t\t\t\t\t\t\tselectPrevious,\n\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( selectPrevious ) {\n\t\t\tdispatch.selectPreviousBlock( clientIds[ 0 ], selectPrevious );\n\t\t}\n\n\t\t// We're batching these two actions because an extra `undo/redo` step can\n\t\t// be created, based on whether we insert a default block or not.\n\t\tregistry.batch( () => {\n\t\t\tdispatch( { type: 'REMOVE_BLOCKS', clientIds } );\n\t\t\t// To avoid a focus loss when removing the last block, assure there is\n\t\t\t// always a default block if the last of the blocks have been removed.\n\t\t\tdispatch( ensureDefaultBlock() );\n\t\t} );\n\t};\n\n/**\n * Action which will insert a default block insert action if there\n * are no other blocks at the root of the editor. This action should be used\n * in actions which may result in no blocks remaining in the editor (removal,\n * replacement, etc).\n */\nexport const ensureDefaultBlock =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\t// To avoid a focus loss when removing the last block, assure there is\n\t\t// always a default block if the last of the blocks have been removed.\n\t\tconst count = select.getBlockCount();\n\t\tif ( count > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there's an custom appender, don't insert default block.\n\t\t// We have to remember to manually move the focus elsewhere to\n\t\t// prevent it from being lost though.\n\t\tconst { __unstableHasCustomAppender } = select.getSettings();\n\t\tif ( __unstableHasCustomAppender ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch.insertDefaultBlock();\n\t};\n\n/**\n * Returns an action object used in signalling that a block removal prompt must\n * be displayed.\n *\n * Contrast with `setBlockRemovalRules`.\n *\n * @param {string|string[]} clientIds      Client IDs of blocks to remove.\n * @param {boolean}         selectPrevious True if the previous block or the\n *                                         immediate parent (if no previous\n *                                         block exists) should be selected\n *                                         when a block is removed.\n * @param {string}          message        Message to display in the prompt.\n *\n * @return {Object} Action object.\n */\nfunction displayBlockRemovalPrompt( clientIds, selectPrevious, message ) {\n\treturn {\n\t\ttype: 'DISPLAY_BLOCK_REMOVAL_PROMPT',\n\t\tclientIds,\n\t\tselectPrevious,\n\t\tmessage,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that a block removal prompt must\n * be cleared, either be cause the user has confirmed or canceled the request\n * for removal.\n *\n * @return {Object} Action object.\n */\nexport function clearBlockRemovalPrompt() {\n\treturn {\n\t\ttype: 'CLEAR_BLOCK_REMOVAL_PROMPT',\n\t};\n}\n\n/**\n * Returns an action object used to set up any rules that a block editor may\n * provide in order to prevent a user from accidentally removing certain\n * blocks. These rules are then used to display a confirmation prompt to the\n * user. For instance, in the Site Editor, the Query Loop block is important\n * enough to warrant such confirmation.\n *\n * IMPORTANT: Registering rules implicitly signals to the `privateRemoveBlocks`\n * action that the editor will be responsible for displaying block removal\n * prompts and confirming deletions. This action is meant to be used by\n * component `BlockRemovalWarningModal` only.\n *\n * The data is a record whose keys are block types (e.g. 'core/query') and\n * whose values are the explanation to be shown to users (e.g. 'Query Loop\n * displays a list of posts or pages.').\n *\n * Contrast with `displayBlockRemovalPrompt`.\n *\n * @param {Record<string,string>|false} rules Block removal rules.\n * @return {Object} Action object.\n */\nexport function setBlockRemovalRules( rules = false ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_REMOVAL_RULES',\n\t\trules,\n\t};\n}\n\n/**\n * Sets the client ID of the block settings menu that is currently open.\n *\n * @param {?string} clientId The block client ID.\n * @return {Object} Action object.\n */\nexport function setOpenedBlockSettingsMenu( clientId ) {\n\treturn {\n\t\ttype: 'SET_OPENED_BLOCK_SETTINGS_MENU',\n\t\tclientId,\n\t};\n}\n\nexport function setStyleOverride( id, style ) {\n\treturn {\n\t\ttype: 'SET_STYLE_OVERRIDE',\n\t\tid,\n\t\tstyle,\n\t};\n}\n\nexport function deleteStyleOverride( id ) {\n\treturn {\n\t\ttype: 'DELETE_STYLE_OVERRIDE',\n\t\tid,\n\t};\n}\n\n/**\n * Action that sets the element that had focus when focus leaves the editor canvas.\n *\n * @param {Object} lastFocus The last focused element.\n *\n *\n * @return {Object} Action object.\n */\nexport function setLastFocus( lastFocus = null ) {\n\treturn {\n\t\ttype: 'LAST_FOCUS',\n\t\tlastFocus,\n\t};\n}\n\n/**\n * Action that stops temporarily editing as blocks.\n *\n * @param {string} clientId The block's clientId.\n */\nexport function stopEditingAsBlocks( clientId ) {\n\treturn ( { select, dispatch, registry } ) => {\n\t\tconst focusModeToRevert = unlock(\n\t\t\tregistry.select( blockEditorStore )\n\t\t).getTemporarilyEditingFocusModeToRevert();\n\t\tdispatch.__unstableMarkNextChangeAsNotPersistent();\n\t\tdispatch.updateBlockAttributes( clientId, {\n\t\t\ttemplateLock: 'contentOnly',\n\t\t} );\n\t\tdispatch.updateBlockListSettings( clientId, {\n\t\t\t...select.getBlockListSettings( clientId ),\n\t\t\ttemplateLock: 'contentOnly',\n\t\t} );\n\t\tdispatch.updateSettings( { focusMode: focusModeToRevert } );\n\t\tdispatch.__unstableSetTemporarilyEditingAsBlocks();\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has begun to drag.\n *\n * @return {Object} Action object.\n */\nexport function startDragging() {\n\treturn {\n\t\ttype: 'START_DRAGGING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has stopped dragging.\n *\n * @return {Object} Action object.\n */\nexport function stopDragging() {\n\treturn {\n\t\ttype: 'STOP_DRAGGING',\n\t};\n}\n\n/**\n * @param {string|null} clientId The block's clientId, or `null` to clear.\n *\n * @return  {Object} Action object.\n */\nexport function expandBlock( clientId ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_EXPANDED_IN_LIST_VIEW',\n\t\tclientId,\n\t};\n}\n\n/**\n * @param {Object} value\n * @param {string} value.rootClientId The root client ID to insert at.\n * @param {number} value.index        The index to insert at.\n *\n * @return {Object} Action object.\n */\nexport function setInsertionPoint( value ) {\n\treturn {\n\t\ttype: 'SET_INSERTION_POINT',\n\t\tvalue,\n\t};\n}\n\n/**\n * Temporarily modify/unlock the content-only block for editions.\n *\n * @param {string} clientId The client id of the block.\n */\nexport const modifyContentLockBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tdispatch.selectBlock( clientId );\n\t\tdispatch.__unstableMarkNextChangeAsNotPersistent();\n\t\tdispatch.updateBlockAttributes( clientId, {\n\t\t\ttemplateLock: undefined,\n\t\t} );\n\t\tdispatch.updateBlockListSettings( clientId, {\n\t\t\t...select.getBlockListSettings( clientId ),\n\t\t\ttemplateLock: false,\n\t\t} );\n\t\tconst focusModeToRevert = select.getSettings().focusMode;\n\t\tdispatch.updateSettings( { focusMode: true } );\n\t\tdispatch.__unstableSetTemporarilyEditingAsBlocks(\n\t\t\tclientId,\n\t\t\tfocusModeToRevert\n\t\t);\n\t};\n\n/**\n * Sets the zoom level.\n *\n * @param {number} zoom the new zoom level\n * @return {Object} Action object.\n */\nexport const setZoomLevel =\n\t( zoom = 100 ) =>\n\t( { select, dispatch } ) => {\n\t\t// When switching to zoom-out mode, we need to select the parent section\n\t\tif ( zoom !== 100 ) {\n\t\t\tconst firstSelectedClientId = select.getBlockSelectionStart();\n\t\t\tconst sectionRootClientId = select.getSectionRootClientId();\n\n\t\t\tif ( firstSelectedClientId ) {\n\t\t\t\tlet sectionClientId;\n\n\t\t\t\tif ( sectionRootClientId ) {\n\t\t\t\t\tconst sectionClientIds =\n\t\t\t\t\t\tselect.getBlockOrder( sectionRootClientId );\n\n\t\t\t\t\t// If the selected block is a section block, use it.\n\t\t\t\t\tif ( sectionClientIds?.includes( firstSelectedClientId ) ) {\n\t\t\t\t\t\tsectionClientId = firstSelectedClientId;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// If the selected block is not a section block, find\n\t\t\t\t\t\t// the parent section that contains the selected block.\n\t\t\t\t\t\tsectionClientId = select\n\t\t\t\t\t\t\t.getBlockParents( firstSelectedClientId )\n\t\t\t\t\t\t\t.find( ( parent ) =>\n\t\t\t\t\t\t\t\tsectionClientIds.includes( parent )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsectionClientId = select.getBlockHierarchyRootClientId(\n\t\t\t\t\t\tfirstSelectedClientId\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif ( sectionClientId ) {\n\t\t\t\t\tdispatch.selectBlock( sectionClientId );\n\t\t\t\t} else {\n\t\t\t\t\tdispatch.clearSelectedBlock();\n\t\t\t\t}\n\n\t\t\t\tspeak( __( 'You are currently in zoom-out mode.' ) );\n\t\t\t}\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: 'SET_ZOOM_LEVEL',\n\t\t\tzoom,\n\t\t} );\n\t};\n\n/**\n * Resets the Zoom state.\n * @return {Object} Action object.\n */\nexport function resetZoomLevel() {\n\treturn {\n\t\ttype: 'RESET_ZOOM_LEVEL',\n\t};\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"notices\"];","/**\n * WordPress dependencies\n */\nimport { RichTextData } from '@wordpress/rich-text';\n\n/**\n * A robust way to retain selection position through various\n * transforms is to insert a special character at the position and\n * then recover it.\n */\nexport const START_OF_SELECTED_AREA = '\\u0086';\n\n/**\n * Retrieve the block attribute that contains the selection position.\n *\n * @param {Object} blockAttributes Block attributes.\n * @return {string|void} The name of the block attribute that was previously selected.\n */\nexport function retrieveSelectedAttribute( blockAttributes ) {\n\tif ( ! blockAttributes ) {\n\t\treturn;\n\t}\n\n\treturn Object.keys( blockAttributes ).find( ( name ) => {\n\t\tconst value = blockAttributes[ name ];\n\t\treturn (\n\t\t\t( typeof value === 'string' || value instanceof RichTextData ) &&\n\t\t\t// To do: refactor this to use rich text's selection instead, so we\n\t\t\t// no longer have to use on this hack inserting a special character.\n\t\t\tvalue.toString().indexOf( START_OF_SELECTED_AREA ) !== -1\n\t\t);\n\t} );\n}\n\nexport function findRichTextAttributeKey( blockType ) {\n\tfor ( const [ key, value ] of Object.entries( blockType.attributes ) ) {\n\t\tif ( value.source === 'rich-text' || value.source === 'html' ) {\n\t\t\treturn key;\n\t\t}\n\t}\n}\n","/* eslint no-console: [ 'error', { allow: [ 'error', 'warn' ] } ] */\n/**\n * WordPress dependencies\n */\nimport {\n\tcloneBlock,\n\t__experimentalCloneSanitizedBlock,\n\tcreateBlock,\n\tdoBlocksMatchTemplate,\n\tgetBlockType,\n\tgetDefaultBlockName,\n\thasBlockSupport,\n\tswitchToBlockType,\n\tsynchronizeBlocksWithTemplate,\n\tgetBlockSupport,\n\tisUnmodifiedDefaultBlock,\n\tisUnmodifiedBlock,\n} from '@wordpress/blocks';\nimport { speak } from '@wordpress/a11y';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { create, insert, remove, toHTMLString } from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport {\n\tretrieveSelectedAttribute,\n\tfindRichTextAttributeKey,\n\tSTART_OF_SELECTED_AREA,\n} from '../utils/selection';\nimport {\n\t__experimentalUpdateSettings,\n\tprivateRemoveBlocks,\n} from './private-actions';\n\n/** @typedef {import('../components/use-on-block-drop/types').WPDropOperation} WPDropOperation */\n\nconst castArray = ( maybeArray ) =>\n\tArray.isArray( maybeArray ) ? maybeArray : [ maybeArray ];\n\n/**\n * Action that resets blocks state to the specified array of blocks, taking precedence\n * over any other content reflected as an edit in state.\n *\n * @param {Array} blocks Array of blocks.\n */\nexport const resetBlocks =\n\t( blocks ) =>\n\t( { dispatch } ) => {\n\t\tdispatch( { type: 'RESET_BLOCKS', blocks } );\n\t\tdispatch( validateBlocksToTemplate( blocks ) );\n\t};\n\n/**\n * Block validity is a function of blocks state (at the point of a\n * reset) and the template setting. As a compromise to its placement\n * across distinct parts of state, it is implemented here as a side\n * effect of the block reset action.\n *\n * @param {Array} blocks Array of blocks.\n */\nexport const validateBlocksToTemplate =\n\t( blocks ) =>\n\t( { select, dispatch } ) => {\n\t\tconst template = select.getTemplate();\n\t\tconst templateLock = select.getTemplateLock();\n\n\t\t// Unlocked templates are considered always valid because they act\n\t\t// as default values only.\n\t\tconst isBlocksValidToTemplate =\n\t\t\t! template ||\n\t\t\ttemplateLock !== 'all' ||\n\t\t\tdoBlocksMatchTemplate( blocks, template );\n\n\t\t// Update if validity has changed.\n\t\tconst isValidTemplate = select.isValidTemplate();\n\n\t\tif ( isBlocksValidToTemplate !== isValidTemplate ) {\n\t\t\tdispatch.setTemplateValidity( isBlocksValidToTemplate );\n\t\t\treturn isBlocksValidToTemplate;\n\t\t}\n\t};\n\n/**\n * A block selection object.\n *\n * @typedef {Object} WPBlockSelection\n *\n * @property {string} clientId     A block client ID.\n * @property {string} attributeKey A block attribute key.\n * @property {number} offset       An attribute value offset, based on the rich\n *                                 text value. See `wp.richText.create`.\n */\n\n/**\n * A selection object.\n *\n * @typedef {Object} WPSelection\n *\n * @property {WPBlockSelection} start The selection start.\n * @property {WPBlockSelection} end   The selection end.\n */\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that selection state should be\n * reset to the specified selection.\n *\n * @param {WPBlockSelection} selectionStart  The selection start.\n * @param {WPBlockSelection} selectionEnd    The selection end.\n * @param {0|-1|null}        initialPosition Initial block position.\n *\n * @return {Object} Action object.\n */\nexport function resetSelection(\n\tselectionStart,\n\tselectionEnd,\n\tinitialPosition\n) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'RESET_SELECTION',\n\t\tselectionStart,\n\t\tselectionEnd,\n\t\tinitialPosition,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that blocks have been received.\n * Unlike resetBlocks, these should be appended to the existing known set, not\n * replacing.\n *\n * @deprecated\n *\n * @param {Object[]} blocks Array of block objects.\n *\n * @return {Object} Action object.\n */\nexport function receiveBlocks( blocks ) {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).receiveBlocks', {\n\t\tsince: '5.9',\n\t\talternative: 'resetBlocks or insertBlocks',\n\t} );\n\n\treturn {\n\t\ttype: 'RECEIVE_BLOCKS',\n\t\tblocks,\n\t};\n}\n\n/**\n * Action that updates attributes of multiple blocks with the specified client IDs.\n *\n * @param {string|string[]} clientIds     Block client IDs.\n * @param {Object}          attributes    Block attributes to be merged. Should be keyed by clientIds if\n *                                        uniqueByBlock is true.\n * @param {boolean}         uniqueByBlock true if each block in clientIds array has a unique set of attributes\n * @return {Object} Action object.\n */\nexport function updateBlockAttributes(\n\tclientIds,\n\tattributes,\n\tuniqueByBlock = false\n) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK_ATTRIBUTES',\n\t\tclientIds: castArray( clientIds ),\n\t\tattributes,\n\t\tuniqueByBlock,\n\t};\n}\n\n/**\n * Action that updates the block with the specified client ID.\n *\n * @param {string} clientId Block client ID.\n * @param {Object} updates  Block attributes to be merged.\n *\n * @return {Object} Action object.\n */\nexport function updateBlock( clientId, updates ) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK',\n\t\tclientId,\n\t\tupdates,\n\t};\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID has been selected, optionally accepting a position\n * value reflecting its selection directionality. An initialPosition of -1\n * reflects a reverse selection.\n *\n * @param {string}    clientId        Block client ID.\n * @param {0|-1|null} initialPosition Optional initial position. Pass as -1 to\n *                                    reflect reverse selection.\n *\n * @return {Object} Action object.\n */\nexport function selectBlock( clientId, initialPosition = 0 ) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'SELECT_BLOCK',\n\t\tinitialPosition,\n\t\tclientId,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID has been hovered.\n *\n * @deprecated\n */\nexport function hoverBlock() {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).hoverBlock', {\n\t\tsince: '6.9',\n\t\tversion: '7.1',\n\t} );\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Yields action objects used in signalling that the block preceding the given\n * clientId (or optionally, its first parent from bottom to top)\n * should be selected.\n *\n * @param {string}  clientId         Block client ID.\n * @param {boolean} fallbackToParent If true, select the first parent if there is no previous block.\n */\nexport const selectPreviousBlock =\n\t( clientId, fallbackToParent = false ) =>\n\t( { select, dispatch } ) => {\n\t\tconst previousBlockClientId =\n\t\t\tselect.getPreviousBlockClientId( clientId );\n\t\tif ( previousBlockClientId ) {\n\t\t\tdispatch.selectBlock( previousBlockClientId, -1 );\n\t\t} else if ( fallbackToParent ) {\n\t\t\tconst firstParentClientId = select.getBlockRootClientId( clientId );\n\t\t\tif ( firstParentClientId ) {\n\t\t\t\tdispatch.selectBlock( firstParentClientId, -1 );\n\t\t\t}\n\t\t}\n\t};\n\n/**\n * Yields action objects used in signalling that the block following the given\n * clientId should be selected.\n *\n * @param {string} clientId Block client ID.\n */\nexport const selectNextBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tconst nextBlockClientId = select.getNextBlockClientId( clientId );\n\t\tif ( nextBlockClientId ) {\n\t\t\tdispatch.selectBlock( nextBlockClientId );\n\t\t}\n\t};\n\n/**\n * Action that starts block multi-selection.\n *\n * @return {Object} Action object.\n */\nexport function startMultiSelect() {\n\treturn {\n\t\ttype: 'START_MULTI_SELECT',\n\t};\n}\n\n/**\n * Action that stops block multi-selection.\n *\n * @return {Object} Action object.\n */\nexport function stopMultiSelect() {\n\treturn {\n\t\ttype: 'STOP_MULTI_SELECT',\n\t};\n}\n\n/**\n * Action that changes block multi-selection.\n *\n * @param {string}      start                         First block of the multi selection.\n * @param {string}      end                           Last block of the multiselection.\n * @param {number|null} __experimentalInitialPosition Optional initial position. Pass as null to skip focus within editor canvas.\n */\nexport const multiSelect =\n\t( start, end, __experimentalInitialPosition = 0 ) =>\n\t( { select, dispatch } ) => {\n\t\tconst startBlockRootClientId = select.getBlockRootClientId( start );\n\t\tconst endBlockRootClientId = select.getBlockRootClientId( end );\n\n\t\t// Only allow block multi-selections at the same level.\n\t\tif ( startBlockRootClientId !== endBlockRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: 'MULTI_SELECT',\n\t\t\tstart,\n\t\t\tend,\n\t\t\tinitialPosition: __experimentalInitialPosition,\n\t\t} );\n\n\t\tconst blockCount = select.getSelectedBlockCount();\n\n\t\tspeak(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: number of selected blocks */\n\t\t\t\t_n( '%s block selected.', '%s blocks selected.', blockCount ),\n\t\t\t\tblockCount\n\t\t\t),\n\t\t\t'assertive'\n\t\t);\n\t};\n\n/**\n * Action that clears the block selection.\n *\n * @return {Object} Action object.\n */\nexport function clearSelectedBlock() {\n\treturn {\n\t\ttype: 'CLEAR_SELECTED_BLOCK',\n\t};\n}\n\n/**\n * Action that enables or disables block selection.\n *\n * @param {boolean} [isSelectionEnabled=true] Whether block selection should\n *                                            be enabled.\n *\n * @return {Object} Action object.\n */\nexport function toggleSelection( isSelectionEnabled = true ) {\n\treturn {\n\t\ttype: 'TOGGLE_SELECTION',\n\t\tisSelectionEnabled,\n\t};\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Action that replaces given blocks with one or more replacement blocks.\n *\n * @param {(string|string[])} clientIds       Block client ID(s) to replace.\n * @param {(Object|Object[])} blocks          Replacement block(s).\n * @param {number}            indexToSelect   Index of replacement block to select.\n * @param {0|-1|null}         initialPosition Index of caret after in the selected block after the operation.\n * @param {?Object}           meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport const replaceBlocks =\n\t( clientIds, blocks, indexToSelect, initialPosition = 0, meta ) =>\n\t( { select, dispatch, registry } ) => {\n\t\t/* eslint-enable jsdoc/valid-types */\n\t\tclientIds = castArray( clientIds );\n\t\tblocks = castArray( blocks );\n\t\tconst rootClientId = select.getBlockRootClientId( clientIds[ 0 ] );\n\t\t// Replace is valid if the new blocks can be inserted in the root block.\n\t\tfor ( let index = 0; index < blocks.length; index++ ) {\n\t\t\tconst block = blocks[ index ];\n\t\t\tconst canInsertBlock = select.canInsertBlockType(\n\t\t\t\tblock.name,\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tif ( ! canInsertBlock ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// We're batching these two actions because an extra `undo/redo` step can\n\t\t// be created, based on whether we insert a default block or not.\n\t\tregistry.batch( () => {\n\t\t\tdispatch( {\n\t\t\t\ttype: 'REPLACE_BLOCKS',\n\t\t\t\tclientIds,\n\t\t\t\tblocks,\n\t\t\t\ttime: Date.now(),\n\t\t\t\tindexToSelect,\n\t\t\t\tinitialPosition,\n\t\t\t\tmeta,\n\t\t\t} );\n\t\t\t// To avoid a focus loss when removing the last block, assure there is\n\t\t\t// always a default block if the last of the blocks have been removed.\n\t\t\tdispatch.ensureDefaultBlock();\n\t\t} );\n\t};\n\n/**\n * Action that replaces a single block with one or more replacement blocks.\n *\n * @param {(string|string[])} clientId Block client ID to replace.\n * @param {(Object|Object[])} block    Replacement block(s).\n *\n * @return {Object} Action object.\n */\nexport function replaceBlock( clientId, block ) {\n\treturn replaceBlocks( clientId, block );\n}\n\n/**\n * Higher-order action creator which, given the action type to dispatch creates\n * an action creator for managing block movement.\n *\n * @param {string} type Action type to dispatch.\n *\n * @return {Function} Action creator.\n */\nconst createOnMove =\n\t( type ) =>\n\t( clientIds, rootClientId ) =>\n\t( { select, dispatch } ) => {\n\t\t// If one of the blocks is locked or the parent is locked, we cannot move any block.\n\t\tconst canMoveBlocks = select.canMoveBlocks( clientIds );\n\t\tif ( ! canMoveBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch( { type, clientIds: castArray( clientIds ), rootClientId } );\n\t};\n\nexport const moveBlocksDown = createOnMove( 'MOVE_BLOCKS_DOWN' );\nexport const moveBlocksUp = createOnMove( 'MOVE_BLOCKS_UP' );\n\n/**\n * Action that moves given blocks to a new position.\n *\n * @param {?string} clientIds        The client IDs of the blocks.\n * @param {?string} fromRootClientId Root client ID source.\n * @param {?string} toRootClientId   Root client ID destination.\n * @param {number}  index            The index to move the blocks to.\n */\nexport const moveBlocksToPosition =\n\t( clientIds, fromRootClientId = '', toRootClientId = '', index ) =>\n\t( { select, dispatch } ) => {\n\t\tconst canMoveBlocks = select.canMoveBlocks( clientIds );\n\n\t\t// If one of the blocks is locked or the parent is locked, we cannot move any block.\n\t\tif ( ! canMoveBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If moving inside the same root block the move is always possible.\n\t\tif ( fromRootClientId !== toRootClientId ) {\n\t\t\tconst canRemoveBlocks = select.canRemoveBlocks( clientIds );\n\n\t\t\t// If we're moving to another block, it means we're deleting blocks from\n\t\t\t// the original block, so we need to check if removing is possible.\n\t\t\tif ( ! canRemoveBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst canInsertBlocks = select.canInsertBlocks(\n\t\t\t\tclientIds,\n\t\t\t\ttoRootClientId\n\t\t\t);\n\n\t\t\t// If moving to other parent block, the move is possible if we can insert a block of the same type inside the new parent block.\n\t\t\tif ( ! canInsertBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: 'MOVE_BLOCKS_TO_POSITION',\n\t\t\tfromRootClientId,\n\t\t\ttoRootClientId,\n\t\t\tclientIds,\n\t\t\tindex,\n\t\t} );\n\t};\n\n/**\n * Action that moves given block to a new position.\n *\n * @param {?string} clientId         The client ID of the block.\n * @param {?string} fromRootClientId Root client ID source.\n * @param {?string} toRootClientId   Root client ID destination.\n * @param {number}  index            The index to move the block to.\n */\nexport function moveBlockToPosition(\n\tclientId,\n\tfromRootClientId = '',\n\ttoRootClientId = '',\n\tindex\n) {\n\treturn moveBlocksToPosition(\n\t\t[ clientId ],\n\t\tfromRootClientId,\n\t\ttoRootClientId,\n\t\tindex\n\t);\n}\n\n/**\n * Action that inserts a single block, optionally at a specific index respective a root block list.\n *\n * Only allowed blocks are inserted. The action may fail silently for blocks that are not allowed or if\n * a templateLock is active on the block list.\n *\n * @param {Object}   block           Block object to insert.\n * @param {?number}  index           Index at which block should be inserted.\n * @param {?string}  rootClientId    Optional root client ID of block list on which to insert.\n * @param {?boolean} updateSelection If true block selection will be updated. If false, block selection will not change. Defaults to true.\n * @param {?Object}  meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport function insertBlock(\n\tblock,\n\tindex,\n\trootClientId,\n\tupdateSelection,\n\tmeta\n) {\n\treturn insertBlocks(\n\t\t[ block ],\n\t\tindex,\n\t\trootClientId,\n\t\tupdateSelection,\n\t\t0,\n\t\tmeta\n\t);\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Action that inserts an array of blocks, optionally at a specific index respective a root block list.\n *\n * Only allowed blocks are inserted. The action may fail silently for blocks that are not allowed or if\n * a templateLock is active on the block list.\n *\n * @param {Object[]}  blocks          Block objects to insert.\n * @param {?number}   index           Index at which block should be inserted.\n * @param {?string}   rootClientId    Optional root client ID of block list on which to insert.\n * @param {?boolean}  updateSelection If true block selection will be updated.  If false, block selection will not change. Defaults to true.\n * @param {0|-1|null} initialPosition Initial focus position. Setting it to null prevent focusing the inserted block.\n * @param {?Object}   meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport const insertBlocks =\n\t(\n\t\tblocks,\n\t\tindex,\n\t\trootClientId,\n\t\tupdateSelection = true,\n\t\tinitialPosition = 0,\n\t\tmeta\n\t) =>\n\t( { select, dispatch } ) => {\n\t\t/* eslint-enable jsdoc/valid-types */\n\t\tif ( initialPosition !== null && typeof initialPosition === 'object' ) {\n\t\t\tmeta = initialPosition;\n\t\t\tinitialPosition = 0;\n\t\t\tdeprecated(\n\t\t\t\t\"meta argument in wp.data.dispatch('core/block-editor')\",\n\t\t\t\t{\n\t\t\t\t\tsince: '5.8',\n\t\t\t\t\thint: 'The meta argument is now the 6th argument of the function',\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tblocks = castArray( blocks );\n\t\tconst allowedBlocks = [];\n\t\tfor ( const block of blocks ) {\n\t\t\tconst isValid = select.canInsertBlockType(\n\t\t\t\tblock.name,\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tif ( isValid ) {\n\t\t\t\tallowedBlocks.push( block );\n\t\t\t}\n\t\t}\n\t\tif ( allowedBlocks.length ) {\n\t\t\tdispatch( {\n\t\t\t\ttype: 'INSERT_BLOCKS',\n\t\t\t\tblocks: allowedBlocks,\n\t\t\t\tindex,\n\t\t\t\trootClientId,\n\t\t\t\ttime: Date.now(),\n\t\t\t\tupdateSelection,\n\t\t\t\tinitialPosition: updateSelection ? initialPosition : null,\n\t\t\t\tmeta,\n\t\t\t} );\n\t\t}\n\t};\n\n/**\n * Action that shows the insertion point.\n *\n * @param    {?string}         rootClientId           Optional root client ID of block list on\n *                                                    which to insert.\n * @param    {?number}         index                  Index at which block should be inserted.\n * @param    {?Object}         __unstableOptions      Additional options.\n * @property {boolean}         __unstableWithInserter Whether or not to show an inserter button.\n * @property {WPDropOperation} operation              The operation to perform when applied,\n *                                                    either 'insert' or 'replace' for now.\n *\n * @return {Object} Action object.\n */\nexport function showInsertionPoint(\n\trootClientId,\n\tindex,\n\t__unstableOptions = {}\n) {\n\tconst { __unstableWithInserter, operation, nearestSide } =\n\t\t__unstableOptions;\n\treturn {\n\t\ttype: 'SHOW_INSERTION_POINT',\n\t\trootClientId,\n\t\tindex,\n\t\t__unstableWithInserter,\n\t\toperation,\n\t\tnearestSide,\n\t};\n}\n/**\n * Action that hides the insertion point.\n */\nexport const hideInsertionPoint =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! select.isBlockInsertionPointVisible() ) {\n\t\t\treturn;\n\t\t}\n\t\tdispatch( {\n\t\t\ttype: 'HIDE_INSERTION_POINT',\n\t\t} );\n\t};\n\n/**\n * Action that resets the template validity.\n *\n * @param {boolean} isValid template validity flag.\n *\n * @return {Object} Action object.\n */\nexport function setTemplateValidity( isValid ) {\n\treturn {\n\t\ttype: 'SET_TEMPLATE_VALIDITY',\n\t\tisValid,\n\t};\n}\n\n/**\n * Action that synchronizes the template with the list of blocks.\n *\n * @return {Object} Action object.\n */\nexport const synchronizeTemplate =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tdispatch( { type: 'SYNCHRONIZE_TEMPLATE' } );\n\t\tconst blocks = select.getBlocks();\n\t\tconst template = select.getTemplate();\n\t\tconst updatedBlockList = synchronizeBlocksWithTemplate(\n\t\t\tblocks,\n\t\t\ttemplate\n\t\t);\n\n\t\tdispatch.resetBlocks( updatedBlockList );\n\t};\n\n/**\n * Delete the current selection.\n *\n * @param {boolean} isForward\n */\nexport const __unstableDeleteSelection =\n\t( isForward ) =>\n\t( { registry, select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\n\t\tif ( selectionAnchor.clientId === selectionFocus.clientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// It's not mergeable if there's no rich text selection.\n\t\tif (\n\t\t\t! selectionAnchor.attributeKey ||\n\t\t\t! selectionFocus.attributeKey ||\n\t\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\t\ttypeof selectionFocus.offset === 'undefined'\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst anchorRootClientId = select.getBlockRootClientId(\n\t\t\tselectionAnchor.clientId\n\t\t);\n\t\tconst focusRootClientId = select.getBlockRootClientId(\n\t\t\tselectionFocus.clientId\n\t\t);\n\n\t\t// It's not mergeable if the selection doesn't start and end in the same\n\t\t// block list. Maybe in the future it should be allowed.\n\t\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockOrder = select.getBlockOrder( anchorRootClientId );\n\t\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\t\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t\t// Reassign selection start and end based on order.\n\t\tlet selectionStart, selectionEnd;\n\n\t\tif ( anchorIndex > focusIndex ) {\n\t\t\tselectionStart = selectionFocus;\n\t\t\tselectionEnd = selectionAnchor;\n\t\t} else {\n\t\t\tselectionStart = selectionAnchor;\n\t\t\tselectionEnd = selectionFocus;\n\t\t}\n\n\t\tconst targetSelection = isForward ? selectionEnd : selectionStart;\n\t\tconst targetBlock = select.getBlock( targetSelection.clientId );\n\t\tconst targetBlockType = getBlockType( targetBlock.name );\n\n\t\tif ( ! targetBlockType.merge ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectionA = selectionStart;\n\t\tconst selectionB = selectionEnd;\n\n\t\tconst blockA = select.getBlock( selectionA.clientId );\n\t\tconst blockB = select.getBlock( selectionB.clientId );\n\n\t\tconst htmlA = blockA.attributes[ selectionA.attributeKey ];\n\t\tconst htmlB = blockB.attributes[ selectionB.attributeKey ];\n\n\t\tlet valueA = create( { html: htmlA } );\n\t\tlet valueB = create( { html: htmlB } );\n\n\t\tvalueA = remove( valueA, selectionA.offset, valueA.text.length );\n\t\tvalueB = insert( valueB, START_OF_SELECTED_AREA, 0, selectionB.offset );\n\n\t\t// Clone the blocks so we don't manipulate the original.\n\t\tconst cloneA = cloneBlock( blockA, {\n\t\t\t[ selectionA.attributeKey ]: toHTMLString( { value: valueA } ),\n\t\t} );\n\t\tconst cloneB = cloneBlock( blockB, {\n\t\t\t[ selectionB.attributeKey ]: toHTMLString( { value: valueB } ),\n\t\t} );\n\n\t\tconst followingBlock = isForward ? cloneA : cloneB;\n\n\t\t// We can only merge blocks with similar types\n\t\t// thus, we transform the block to merge first\n\t\tconst blocksWithTheSameType =\n\t\t\tblockA.name === blockB.name\n\t\t\t\t? [ followingBlock ]\n\t\t\t\t: switchToBlockType( followingBlock, targetBlockType.name );\n\n\t\t// If the block types can not match, do nothing\n\t\tif ( ! blocksWithTheSameType || ! blocksWithTheSameType.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet updatedAttributes;\n\n\t\tif ( isForward ) {\n\t\t\tconst blockToMerge = blocksWithTheSameType.pop();\n\t\t\tupdatedAttributes = targetBlockType.merge(\n\t\t\t\tblockToMerge.attributes,\n\t\t\t\tcloneB.attributes\n\t\t\t);\n\t\t} else {\n\t\t\tconst blockToMerge = blocksWithTheSameType.shift();\n\t\t\tupdatedAttributes = targetBlockType.merge(\n\t\t\t\tcloneA.attributes,\n\t\t\t\tblockToMerge.attributes\n\t\t\t);\n\t\t}\n\n\t\tconst newAttributeKey = retrieveSelectedAttribute( updatedAttributes );\n\n\t\tconst convertedHtml = updatedAttributes[ newAttributeKey ];\n\t\tconst convertedValue = create( { html: convertedHtml } );\n\t\tconst newOffset = convertedValue.text.indexOf( START_OF_SELECTED_AREA );\n\t\tconst newValue = remove( convertedValue, newOffset, newOffset + 1 );\n\t\tconst newHtml = toHTMLString( { value: newValue } );\n\n\t\tupdatedAttributes[ newAttributeKey ] = newHtml;\n\n\t\tconst selectedBlockClientIds = select.getSelectedBlockClientIds();\n\t\tconst replacement = [\n\t\t\t...( isForward ? blocksWithTheSameType : [] ),\n\t\t\t{\n\t\t\t\t// Preserve the original client ID.\n\t\t\t\t...targetBlock,\n\t\t\t\tattributes: {\n\t\t\t\t\t...targetBlock.attributes,\n\t\t\t\t\t...updatedAttributes,\n\t\t\t\t},\n\t\t\t},\n\t\t\t...( isForward ? [] : blocksWithTheSameType ),\n\t\t];\n\n\t\tregistry.batch( () => {\n\t\t\tdispatch.selectionChange(\n\t\t\t\ttargetBlock.clientId,\n\t\t\t\tnewAttributeKey,\n\t\t\t\tnewOffset,\n\t\t\t\tnewOffset\n\t\t\t);\n\n\t\t\tdispatch.replaceBlocks(\n\t\t\t\tselectedBlockClientIds,\n\t\t\t\treplacement,\n\t\t\t\t0, // If we don't pass the `indexToSelect` it will default to the last block.\n\t\t\t\tselect.getSelectedBlocksInitialCaretPosition()\n\t\t\t);\n\t\t} );\n\t};\n\n/**\n * Split the current selection.\n * @param {?Array} blocks\n */\nexport const __unstableSplitSelection =\n\t( blocks = [] ) =>\n\t( { registry, select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\t\tconst anchorRootClientId = select.getBlockRootClientId(\n\t\t\tselectionAnchor.clientId\n\t\t);\n\t\tconst focusRootClientId = select.getBlockRootClientId(\n\t\t\tselectionFocus.clientId\n\t\t);\n\n\t\t// It's not splittable if the selection doesn't start and end in the same\n\t\t// block list. Maybe in the future it should be allowed.\n\t\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockOrder = select.getBlockOrder( anchorRootClientId );\n\t\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\t\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t\t// Reassign selection start and end based on order.\n\t\tlet selectionStart, selectionEnd;\n\n\t\tif ( anchorIndex > focusIndex ) {\n\t\t\tselectionStart = selectionFocus;\n\t\t\tselectionEnd = selectionAnchor;\n\t\t} else {\n\t\t\tselectionStart = selectionAnchor;\n\t\t\tselectionEnd = selectionFocus;\n\t\t}\n\n\t\tconst selectionA = selectionStart;\n\t\tconst selectionB = selectionEnd;\n\t\tconst blockA = select.getBlock( selectionA.clientId );\n\t\tconst blockB = select.getBlock( selectionB.clientId );\n\t\tconst blockAType = getBlockType( blockA.name );\n\t\tconst blockBType = getBlockType( blockB.name );\n\t\tconst attributeKeyA =\n\t\t\ttypeof selectionA.attributeKey === 'string'\n\t\t\t\t? selectionA.attributeKey\n\t\t\t\t: findRichTextAttributeKey( blockAType );\n\t\tconst attributeKeyB =\n\t\t\ttypeof selectionB.attributeKey === 'string'\n\t\t\t\t? selectionB.attributeKey\n\t\t\t\t: findRichTextAttributeKey( blockBType );\n\t\tconst blockAttributes = select.getBlockAttributes(\n\t\t\tselectionA.clientId\n\t\t);\n\t\tconst bindings = blockAttributes?.metadata?.bindings;\n\n\t\t// If the attribute is bound, don't split the selection and insert a new block instead.\n\t\tif ( bindings?.[ attributeKeyA ] ) {\n\t\t\t// Show warning if user tries to insert a block into another block with bindings.\n\t\t\tif ( blocks.length ) {\n\t\t\t\tconst { createWarningNotice } =\n\t\t\t\t\tregistry.dispatch( noticesStore );\n\t\t\t\tcreateWarningNotice(\n\t\t\t\t\t__(\n\t\t\t\t\t\t\"Blocks can't be inserted into other blocks with bindings\"\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdispatch.insertAfterBlock( selectionA.clientId );\n\t\t\treturn;\n\t\t}\n\n\t\t// Can't split if the selection is not set.\n\t\tif (\n\t\t\t! attributeKeyA ||\n\t\t\t! attributeKeyB ||\n\t\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\t\ttypeof selectionFocus.offset === 'undefined'\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// We can do some short-circuiting if the selection is collapsed.\n\t\tif (\n\t\t\tselectionA.clientId === selectionB.clientId &&\n\t\t\tattributeKeyA === attributeKeyB &&\n\t\t\tselectionA.offset === selectionB.offset\n\t\t) {\n\t\t\t// If an unmodified default block is selected, replace it. We don't\n\t\t\t// want to be converting into a default block.\n\t\t\tif ( blocks.length ) {\n\t\t\t\tif ( isUnmodifiedDefaultBlock( blockA ) ) {\n\t\t\t\t\tdispatch.replaceBlocks(\n\t\t\t\t\t\t[ selectionA.clientId ],\n\t\t\t\t\t\tblocks,\n\t\t\t\t\t\tblocks.length - 1,\n\t\t\t\t\t\t-1\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If selection is at the start or end, we can simply insert an\n\t\t\t// empty block, provided this block has no inner blocks.\n\t\t\telse if ( ! select.getBlockOrder( selectionA.clientId ).length ) {\n\t\t\t\tfunction createEmpty() {\n\t\t\t\t\tconst defaultBlockName = getDefaultBlockName();\n\t\t\t\t\treturn select.canInsertBlockType(\n\t\t\t\t\t\tdefaultBlockName,\n\t\t\t\t\t\tanchorRootClientId\n\t\t\t\t\t)\n\t\t\t\t\t\t? createBlock( defaultBlockName )\n\t\t\t\t\t\t: createBlock(\n\t\t\t\t\t\t\t\tselect.getBlockName( selectionA.clientId )\n\t\t\t\t\t\t  );\n\t\t\t\t}\n\n\t\t\t\tconst length = blockAttributes[ attributeKeyA ].length;\n\n\t\t\t\tif ( selectionA.offset === 0 && length ) {\n\t\t\t\t\tdispatch.insertBlocks(\n\t\t\t\t\t\t[ createEmpty() ],\n\t\t\t\t\t\tselect.getBlockIndex( selectionA.clientId ),\n\t\t\t\t\t\tanchorRootClientId,\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( selectionA.offset === length ) {\n\t\t\t\t\tdispatch.insertBlocks(\n\t\t\t\t\t\t[ createEmpty() ],\n\t\t\t\t\t\tselect.getBlockIndex( selectionA.clientId ) + 1,\n\t\t\t\t\t\tanchorRootClientId\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst htmlA = blockA.attributes[ attributeKeyA ];\n\t\tconst htmlB = blockB.attributes[ attributeKeyB ];\n\n\t\tlet valueA = create( { html: htmlA } );\n\t\tlet valueB = create( { html: htmlB } );\n\n\t\tvalueA = remove( valueA, selectionA.offset, valueA.text.length );\n\t\tvalueB = remove( valueB, 0, selectionB.offset );\n\n\t\tlet head = {\n\t\t\t// Preserve the original client ID.\n\t\t\t...blockA,\n\t\t\t// If both start and end are the same, should only copy innerBlocks\n\t\t\t// once.\n\t\t\tinnerBlocks:\n\t\t\t\tblockA.clientId === blockB.clientId ? [] : blockA.innerBlocks,\n\t\t\tattributes: {\n\t\t\t\t...blockA.attributes,\n\t\t\t\t[ attributeKeyA ]: toHTMLString( { value: valueA } ),\n\t\t\t},\n\t\t};\n\n\t\tlet tail = {\n\t\t\t...blockB,\n\t\t\t// Only preserve the original client ID if the end is different.\n\t\t\tclientId:\n\t\t\t\tblockA.clientId === blockB.clientId\n\t\t\t\t\t? createBlock( blockB.name ).clientId\n\t\t\t\t\t: blockB.clientId,\n\t\t\tattributes: {\n\t\t\t\t...blockB.attributes,\n\t\t\t\t[ attributeKeyB ]: toHTMLString( { value: valueB } ),\n\t\t\t},\n\t\t};\n\n\t\t// When splitting a block, attempt to convert the tail block to the\n\t\t// default block type. For example, when splitting a heading block, the\n\t\t// tail block will be converted to a paragraph block. Note that for\n\t\t// blocks such as a list item and button, this will be skipped because\n\t\t// the default block type cannot be inserted.\n\t\tconst defaultBlockName = getDefaultBlockName();\n\t\tif (\n\t\t\t// A block is only split when the selection is within the same\n\t\t\t// block.\n\t\t\tblockA.clientId === blockB.clientId &&\n\t\t\tdefaultBlockName &&\n\t\t\ttail.name !== defaultBlockName &&\n\t\t\tselect.canInsertBlockType( defaultBlockName, anchorRootClientId )\n\t\t) {\n\t\t\tconst switched = switchToBlockType( tail, defaultBlockName );\n\t\t\tif ( switched?.length === 1 ) {\n\t\t\t\ttail = switched[ 0 ];\n\t\t\t}\n\t\t}\n\n\t\tif ( ! blocks.length ) {\n\t\t\tdispatch.replaceBlocks( select.getSelectedBlockClientIds(), [\n\t\t\t\thead,\n\t\t\t\ttail,\n\t\t\t] );\n\t\t\treturn;\n\t\t}\n\n\t\tlet selection;\n\t\tconst output = [];\n\t\tconst clonedBlocks = [ ...blocks ];\n\t\tconst firstBlock = clonedBlocks.shift();\n\t\tconst headType = getBlockType( head.name );\n\t\tconst firstBlocks =\n\t\t\theadType.merge && firstBlock.name === headType.name\n\t\t\t\t? [ firstBlock ]\n\t\t\t\t: switchToBlockType( firstBlock, headType.name );\n\n\t\tif ( firstBlocks?.length ) {\n\t\t\tconst first = firstBlocks.shift();\n\t\t\thead = {\n\t\t\t\t...head,\n\t\t\t\tattributes: {\n\t\t\t\t\t...head.attributes,\n\t\t\t\t\t...headType.merge( head.attributes, first.attributes ),\n\t\t\t\t},\n\t\t\t};\n\t\t\toutput.push( head );\n\t\t\tselection = {\n\t\t\t\tclientId: head.clientId,\n\t\t\t\tattributeKey: attributeKeyA,\n\t\t\t\toffset: create( { html: head.attributes[ attributeKeyA ] } )\n\t\t\t\t\t.text.length,\n\t\t\t};\n\t\t\tclonedBlocks.unshift( ...firstBlocks );\n\t\t} else {\n\t\t\tif ( ! isUnmodifiedBlock( head ) ) {\n\t\t\t\toutput.push( head );\n\t\t\t}\n\t\t\toutput.push( firstBlock );\n\t\t}\n\n\t\tconst lastBlock = clonedBlocks.pop();\n\t\tconst tailType = getBlockType( tail.name );\n\n\t\tif ( clonedBlocks.length ) {\n\t\t\toutput.push( ...clonedBlocks );\n\t\t}\n\n\t\tif ( lastBlock ) {\n\t\t\tconst lastBlocks =\n\t\t\t\ttailType.merge && tailType.name === lastBlock.name\n\t\t\t\t\t? [ lastBlock ]\n\t\t\t\t\t: switchToBlockType( lastBlock, tailType.name );\n\n\t\t\tif ( lastBlocks?.length ) {\n\t\t\t\tconst last = lastBlocks.pop();\n\t\t\t\toutput.push( {\n\t\t\t\t\t...tail,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\t...tail.attributes,\n\t\t\t\t\t\t...tailType.merge( last.attributes, tail.attributes ),\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t\toutput.push( ...lastBlocks );\n\t\t\t\tselection = {\n\t\t\t\t\tclientId: tail.clientId,\n\t\t\t\t\tattributeKey: attributeKeyB,\n\t\t\t\t\toffset: create( {\n\t\t\t\t\t\thtml: last.attributes[ attributeKeyB ],\n\t\t\t\t\t} ).text.length,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\toutput.push( lastBlock );\n\t\t\t\tif ( ! isUnmodifiedBlock( tail ) ) {\n\t\t\t\t\toutput.push( tail );\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( ! isUnmodifiedBlock( tail ) ) {\n\t\t\toutput.push( tail );\n\t\t}\n\n\t\tregistry.batch( () => {\n\t\t\tdispatch.replaceBlocks(\n\t\t\t\tselect.getSelectedBlockClientIds(),\n\t\t\t\toutput,\n\t\t\t\toutput.length - 1,\n\t\t\t\t0\n\t\t\t);\n\t\t\tif ( selection ) {\n\t\t\t\tdispatch.selectionChange(\n\t\t\t\t\tselection.clientId,\n\t\t\t\t\tselection.attributeKey,\n\t\t\t\t\tselection.offset,\n\t\t\t\t\tselection.offset\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t};\n\n/**\n * Expand the selection to cover the entire blocks, removing partial selection.\n */\nexport const __unstableExpandSelection =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\t\tdispatch.selectionChange( {\n\t\t\tstart: { clientId: selectionAnchor.clientId },\n\t\t\tend: { clientId: selectionFocus.clientId },\n\t\t} );\n\t};\n\n/**\n * Action that merges two blocks.\n *\n * @param {string} firstBlockClientId  Client ID of the first block to merge.\n * @param {string} secondBlockClientId Client ID of the second block to merge.\n */\nexport const mergeBlocks =\n\t( firstBlockClientId, secondBlockClientId ) =>\n\t( { registry, select, dispatch } ) => {\n\t\tconst clientIdA = firstBlockClientId;\n\t\tconst clientIdB = secondBlockClientId;\n\t\tconst blockA = select.getBlock( clientIdA );\n\t\tconst blockAType = getBlockType( blockA.name );\n\n\t\tif (\n\t\t\t! blockAType ||\n\t\t\tselect.getBlockEditingMode( clientIdA ) === 'disabled' ||\n\t\t\tselect.getBlockEditingMode( clientIdB ) === 'disabled'\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockB = select.getBlock( clientIdB );\n\n\t\tif (\n\t\t\t! blockAType.merge &&\n\t\t\tgetBlockSupport( blockA.name, '__experimentalOnMerge' )\n\t\t) {\n\t\t\t// If there's no merge function defined, attempt merging inner\n\t\t\t// blocks.\n\t\t\tconst blocksWithTheSameType = switchToBlockType(\n\t\t\t\tblockB,\n\t\t\t\tblockAType.name\n\t\t\t);\n\t\t\t// Only focus the previous block if it's not mergeable.\n\t\t\tif ( blocksWithTheSameType?.length !== 1 ) {\n\t\t\t\tdispatch.selectBlock( blockA.clientId );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst [ blockWithSameType ] = blocksWithTheSameType;\n\t\t\tif ( blockWithSameType.innerBlocks.length < 1 ) {\n\t\t\t\tdispatch.selectBlock( blockA.clientId );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tregistry.batch( () => {\n\t\t\t\tdispatch.insertBlocks(\n\t\t\t\t\tblockWithSameType.innerBlocks,\n\t\t\t\t\tundefined,\n\t\t\t\t\tclientIdA\n\t\t\t\t);\n\t\t\t\tdispatch.removeBlock( clientIdB );\n\t\t\t\tdispatch.selectBlock(\n\t\t\t\t\tblockWithSameType.innerBlocks[ 0 ].clientId\n\t\t\t\t);\n\n\t\t\t\t// Attempt to merge the next block if it's the same type and\n\t\t\t\t// same attributes. This is useful when merging a paragraph into\n\t\t\t\t// a list, and the next block is also a list. If we don't merge,\n\t\t\t\t// it looks like one list, but it's actually two lists. The same\n\t\t\t\t// applies to other blocks such as a group with the same\n\t\t\t\t// attributes.\n\t\t\t\tconst nextBlockClientId =\n\t\t\t\t\tselect.getNextBlockClientId( clientIdA );\n\n\t\t\t\tif (\n\t\t\t\t\tnextBlockClientId &&\n\t\t\t\t\tselect.getBlockName( clientIdA ) ===\n\t\t\t\t\t\tselect.getBlockName( nextBlockClientId )\n\t\t\t\t) {\n\t\t\t\t\tconst rootAttributes =\n\t\t\t\t\t\tselect.getBlockAttributes( clientIdA );\n\t\t\t\t\tconst previousRootAttributes =\n\t\t\t\t\t\tselect.getBlockAttributes( nextBlockClientId );\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tObject.keys( rootAttributes ).every(\n\t\t\t\t\t\t\t( key ) =>\n\t\t\t\t\t\t\t\trootAttributes[ key ] ===\n\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tdispatch.moveBlocksToPosition(\n\t\t\t\t\t\t\tselect.getBlockOrder( nextBlockClientId ),\n\t\t\t\t\t\t\tnextBlockClientId,\n\t\t\t\t\t\t\tclientIdA\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdispatch.removeBlock( nextBlockClientId, false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isUnmodifiedDefaultBlock( blockA ) ) {\n\t\t\tdispatch.removeBlock(\n\t\t\t\tclientIdA,\n\t\t\t\tselect.isBlockSelected( clientIdA )\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isUnmodifiedDefaultBlock( blockB ) ) {\n\t\t\tdispatch.removeBlock(\n\t\t\t\tclientIdB,\n\t\t\t\tselect.isBlockSelected( clientIdB )\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! blockAType.merge ) {\n\t\t\tif ( isUnmodifiedBlock( blockB, 'content' ) ) {\n\t\t\t\tdispatch.removeBlock(\n\t\t\t\t\tclientIdB,\n\t\t\t\t\tselect.isBlockSelected( clientIdB )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdispatch.selectBlock( blockA.clientId );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockBType = getBlockType( blockB.name );\n\t\tconst { clientId, attributeKey, offset } = select.getSelectionStart();\n\t\tconst selectedBlockType =\n\t\t\tclientId === clientIdA ? blockAType : blockBType;\n\t\tconst attributeDefinition =\n\t\t\tselectedBlockType.attributes[ attributeKey ];\n\t\tconst canRestoreTextSelection =\n\t\t\t( clientId === clientIdA || clientId === clientIdB ) &&\n\t\t\tattributeKey !== undefined &&\n\t\t\toffset !== undefined &&\n\t\t\t// We cannot restore text selection if the RichText identifier\n\t\t\t// is not a defined block attribute key. This can be the case if the\n\t\t\t// fallback instance ID is used to store selection (and no RichText\n\t\t\t// identifier is set), or when the identifier is wrong.\n\t\t\t!! attributeDefinition;\n\n\t\tif ( ! attributeDefinition ) {\n\t\t\tif ( typeof attributeKey === 'number' ) {\n\t\t\t\twindow.console.error(\n\t\t\t\t\t`RichText needs an identifier prop that is the block attribute key of the attribute it controls. Its type is expected to be a string, but was ${ typeof attributeKey }`\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\twindow.console.error(\n\t\t\t\t\t'The RichText identifier prop does not match any attributes defined by the block.'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Clone the blocks so we don't insert the character in a \"live\" block.\n\t\tconst cloneA = cloneBlock( blockA );\n\t\tconst cloneB = cloneBlock( blockB );\n\n\t\tif ( canRestoreTextSelection ) {\n\t\t\tconst selectedBlock = clientId === clientIdA ? cloneA : cloneB;\n\t\t\tconst html = selectedBlock.attributes[ attributeKey ];\n\t\t\tconst value = insert(\n\t\t\t\tcreate( { html } ),\n\t\t\t\tSTART_OF_SELECTED_AREA,\n\t\t\t\toffset,\n\t\t\t\toffset\n\t\t\t);\n\n\t\t\tselectedBlock.attributes[ attributeKey ] = toHTMLString( {\n\t\t\t\tvalue,\n\t\t\t} );\n\t\t}\n\n\t\t// We can only merge blocks with similar types\n\t\t// thus, we transform the block to merge first.\n\t\tconst blocksWithTheSameType =\n\t\t\tblockA.name === blockB.name\n\t\t\t\t? [ cloneB ]\n\t\t\t\t: switchToBlockType( cloneB, blockA.name );\n\n\t\t// If the block types can not match, do nothing.\n\t\tif ( ! blocksWithTheSameType || ! blocksWithTheSameType.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Calling the merge to update the attributes and remove the block to be merged.\n\t\tconst updatedAttributes = blockAType.merge(\n\t\t\tcloneA.attributes,\n\t\t\tblocksWithTheSameType[ 0 ].attributes\n\t\t);\n\n\t\tif ( canRestoreTextSelection ) {\n\t\t\tconst newAttributeKey =\n\t\t\t\tretrieveSelectedAttribute( updatedAttributes );\n\t\t\tconst convertedHtml = updatedAttributes[ newAttributeKey ];\n\t\t\tconst convertedValue = create( { html: convertedHtml } );\n\t\t\tconst newOffset = convertedValue.text.indexOf(\n\t\t\t\tSTART_OF_SELECTED_AREA\n\t\t\t);\n\t\t\tconst newValue = remove( convertedValue, newOffset, newOffset + 1 );\n\t\t\tconst newHtml = toHTMLString( { value: newValue } );\n\n\t\t\tupdatedAttributes[ newAttributeKey ] = newHtml;\n\n\t\t\tdispatch.selectionChange(\n\t\t\t\tblockA.clientId,\n\t\t\t\tnewAttributeKey,\n\t\t\t\tnewOffset,\n\t\t\t\tnewOffset\n\t\t\t);\n\t\t}\n\n\t\tdispatch.replaceBlocks(\n\t\t\t[ blockA.clientId, blockB.clientId ],\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\t...blockA,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\t...blockA.attributes,\n\t\t\t\t\t\t...updatedAttributes,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t...blocksWithTheSameType.slice( 1 ),\n\t\t\t],\n\t\t\t0 // If we don't pass the `indexToSelect` it will default to the last block.\n\t\t);\n\t};\n\n/**\n * Yields action objects used in signalling that the blocks corresponding to\n * the set of specified client IDs are to be removed.\n *\n * @param {string|string[]} clientIds      Client IDs of blocks to remove.\n * @param {boolean}         selectPrevious True if the previous block\n *                                         or the immediate parent\n *                                         (if no previous block exists)\n *                                         should be selected\n *                                         when a block is removed.\n */\nexport const removeBlocks = ( clientIds, selectPrevious = true ) =>\n\tprivateRemoveBlocks( clientIds, selectPrevious );\n\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID is to be removed.\n *\n * @param {string}  clientId       Client ID of block to remove.\n * @param {boolean} selectPrevious True if the previous block should be\n *                                 selected when a block is removed.\n *\n * @return {Object} Action object.\n */\nexport function removeBlock( clientId, selectPrevious ) {\n\treturn removeBlocks( [ clientId ], selectPrevious );\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that the inner blocks with the\n * specified client ID should be replaced.\n *\n * @param {string}    rootClientId    Client ID of the block whose InnerBlocks will re replaced.\n * @param {Object[]}  blocks          Block objects to insert as new InnerBlocks\n * @param {?boolean}  updateSelection If true block selection will be updated. If false, block selection will not change. Defaults to false.\n * @param {0|-1|null} initialPosition Initial block position.\n * @return {Object} Action object.\n */\nexport function replaceInnerBlocks(\n\trootClientId,\n\tblocks,\n\tupdateSelection = false,\n\tinitialPosition = 0\n) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'REPLACE_INNER_BLOCKS',\n\t\trootClientId,\n\t\tblocks,\n\t\tupdateSelection,\n\t\tinitialPosition: updateSelection ? initialPosition : null,\n\t\ttime: Date.now(),\n\t};\n}\n\n/**\n * Returns an action object used to toggle the block editing mode between\n * visual and HTML modes.\n *\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Action object.\n */\nexport function toggleBlockMode( clientId ) {\n\treturn {\n\t\ttype: 'TOGGLE_BLOCK_MODE',\n\t\tclientId,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has begun to type.\n *\n * @return {Object} Action object.\n */\nexport function startTyping() {\n\treturn {\n\t\ttype: 'START_TYPING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has stopped typing.\n *\n * @return {Object} Action object.\n */\nexport function stopTyping() {\n\treturn {\n\t\ttype: 'STOP_TYPING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has begun to drag blocks.\n *\n * @param {string[]} clientIds An array of client ids being dragged\n *\n * @return {Object} Action object.\n */\nexport function startDraggingBlocks( clientIds = [] ) {\n\treturn {\n\t\ttype: 'START_DRAGGING_BLOCKS',\n\t\tclientIds,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has stopped dragging blocks.\n *\n * @return {Object} Action object.\n */\nexport function stopDraggingBlocks() {\n\treturn {\n\t\ttype: 'STOP_DRAGGING_BLOCKS',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the caret has entered formatted text.\n *\n * @deprecated\n *\n * @return {Object} Action object.\n */\nexport function enterFormattedText() {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).enterFormattedText', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t} );\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user caret has exited formatted text.\n *\n * @deprecated\n *\n * @return {Object} Action object.\n */\nexport function exitFormattedText() {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).exitFormattedText', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t} );\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Action that changes the position of the user caret.\n *\n * @param {string|WPSelection} clientId     The selected block client ID.\n * @param {string}             attributeKey The selected block attribute key.\n * @param {number}             startOffset  The start offset.\n * @param {number}             endOffset    The end offset.\n *\n * @return {Object} Action object.\n */\nexport function selectionChange(\n\tclientId,\n\tattributeKey,\n\tstartOffset,\n\tendOffset\n) {\n\tif ( typeof clientId === 'string' ) {\n\t\treturn {\n\t\t\ttype: 'SELECTION_CHANGE',\n\t\t\tclientId,\n\t\t\tattributeKey,\n\t\t\tstartOffset,\n\t\t\tendOffset,\n\t\t};\n\t}\n\n\treturn { type: 'SELECTION_CHANGE', ...clientId };\n}\n\n/**\n * Action that adds a new block of the default type to the block list.\n *\n * @param {?Object} attributes   Optional attributes of the block to assign.\n * @param {?string} rootClientId Optional root client ID of block list on which\n *                               to append.\n * @param {?number} index        Optional index where to insert the default block.\n */\nexport const insertDefaultBlock =\n\t( attributes, rootClientId, index ) =>\n\t( { dispatch } ) => {\n\t\t// Abort if there is no default block type (if it has been unregistered).\n\t\tconst defaultBlockName = getDefaultBlockName();\n\t\tif ( ! defaultBlockName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst block = createBlock( defaultBlockName, attributes );\n\n\t\treturn dispatch.insertBlock( block, index, rootClientId );\n\t};\n\n/**\n * @typedef {Object< string, Object >} SettingsByClientId\n */\n\n/**\n * Action that changes the nested settings of the given block(s).\n *\n * @param {string | SettingsByClientId} clientId Client ID of the block whose\n *                                               nested setting are being\n *                                               received, or object of settings\n *                                               by client ID.\n * @param {Object}                      settings Object with the new settings\n *                                               for the nested block.\n *\n * @return {Object} Action object\n */\nexport function updateBlockListSettings( clientId, settings ) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK_LIST_SETTINGS',\n\t\tclientId,\n\t\tsettings,\n\t};\n}\n\n/**\n * Action that updates the block editor settings.\n *\n * @param {Object} settings Updated settings\n *\n * @return {Object} Action object\n */\nexport function updateSettings( settings ) {\n\treturn __experimentalUpdateSettings( settings, {\n\t\tstripExperimentalSettings: true,\n\t} );\n}\n\n/**\n * Action that signals that a temporary reusable block has been saved\n * in order to switch its temporary id with the real id.\n *\n * @param {string} id        Reusable block's id.\n * @param {string} updatedId Updated block's id.\n *\n * @return {Object} Action object.\n */\nexport function __unstableSaveReusableBlock( id, updatedId ) {\n\treturn {\n\t\ttype: 'SAVE_REUSABLE_BLOCK_SUCCESS',\n\t\tid,\n\t\tupdatedId,\n\t};\n}\n\n/**\n * Action that marks the last block change explicitly as persistent.\n *\n * @return {Object} Action object.\n */\nexport function __unstableMarkLastChangeAsPersistent() {\n\treturn { type: 'MARK_LAST_CHANGE_AS_PERSISTENT' };\n}\n\n/**\n * Action that signals that the next block change should be marked explicitly as not persistent.\n *\n * @return {Object} Action object.\n */\nexport function __unstableMarkNextChangeAsNotPersistent() {\n\treturn { type: 'MARK_NEXT_CHANGE_AS_NOT_PERSISTENT' };\n}\n\n/**\n * Action that marks the last block change as an automatic change, meaning it was not\n * performed by the user, and can be undone using the `Escape` and `Backspace` keys.\n * This action must be called after the change was made, and any actions that are a\n * consequence of it, so it is recommended to be called at the next idle period to ensure all\n * selection changes have been recorded.\n */\nexport const __unstableMarkAutomaticChange =\n\t() =>\n\t( { dispatch } ) => {\n\t\tdispatch( { type: 'MARK_AUTOMATIC_CHANGE' } );\n\t\tconst { requestIdleCallback = ( cb ) => setTimeout( cb, 100 ) } =\n\t\t\twindow;\n\t\trequestIdleCallback( () => {\n\t\t\tdispatch( { type: 'MARK_AUTOMATIC_CHANGE_FINAL' } );\n\t\t} );\n\t};\n\n/**\n * Action that enables or disables the navigation mode.\n *\n * @param {boolean} isNavigationMode Enable/Disable navigation mode.\n */\nexport const setNavigationMode =\n\t( isNavigationMode = true ) =>\n\t( { dispatch } ) => {\n\t\tdispatch.__unstableSetEditorMode(\n\t\t\tisNavigationMode ? 'navigation' : 'edit'\n\t\t);\n\t};\n\n/**\n * Action that sets the editor mode\n *\n * @param {string} mode Editor mode\n */\nexport const __unstableSetEditorMode =\n\t( mode ) =>\n\t( { registry } ) => {\n\t\tregistry.dispatch( preferencesStore ).set( 'core', 'editorTool', mode );\n\n\t\tif ( mode === 'navigation' ) {\n\t\t\tspeak( __( 'You are currently in Write mode.' ) );\n\t\t} else if ( mode === 'edit' ) {\n\t\t\tspeak( __( 'You are currently in Design mode.' ) );\n\t\t}\n\t};\n\n/**\n * Set the block moving client ID.\n *\n * @deprecated\n *\n * @return {Object} Action object.\n */\nexport function setBlockMovingClientId() {\n\tdeprecated(\n\t\t'wp.data.dispatch( \"core/block-editor\" ).setBlockMovingClientId',\n\t\t{\n\t\t\tsince: '6.7',\n\t\t\thint: 'Block moving mode feature has been removed',\n\t\t}\n\t);\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Action that duplicates a list of blocks.\n *\n * @param {string[]} clientIds\n * @param {boolean}  updateSelection\n */\nexport const duplicateBlocks =\n\t( clientIds, updateSelection = true ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientIds || ! clientIds.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return early if blocks don't exist.\n\t\tconst blocks = select.getBlocksByClientId( clientIds );\n\t\tif ( blocks.some( ( block ) => ! block ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return early if blocks don't support multiple usage.\n\t\tconst blockNames = blocks.map( ( block ) => block.name );\n\t\tif (\n\t\t\tblockNames.some(\n\t\t\t\t( blockName ) =>\n\t\t\t\t\t! hasBlockSupport( blockName, 'multiple', true )\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rootClientId = select.getBlockRootClientId( clientIds[ 0 ] );\n\t\tconst clientIdsArray = castArray( clientIds );\n\t\tconst lastSelectedIndex = select.getBlockIndex(\n\t\t\tclientIdsArray[ clientIdsArray.length - 1 ]\n\t\t);\n\t\tconst clonedBlocks = blocks.map( ( block ) =>\n\t\t\t__experimentalCloneSanitizedBlock( block )\n\t\t);\n\t\tdispatch.insertBlocks(\n\t\t\tclonedBlocks,\n\t\t\tlastSelectedIndex + 1,\n\t\t\trootClientId,\n\t\t\tupdateSelection\n\t\t);\n\t\tif ( clonedBlocks.length > 1 && updateSelection ) {\n\t\t\tdispatch.multiSelect(\n\t\t\t\tclonedBlocks[ 0 ].clientId,\n\t\t\t\tclonedBlocks[ clonedBlocks.length - 1 ].clientId\n\t\t\t);\n\t\t}\n\t\treturn clonedBlocks.map( ( block ) => block.clientId );\n\t};\n\n/**\n * Action that inserts a default block before a given block.\n *\n * @param {string} clientId\n */\nexport const insertBeforeBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientId ) {\n\t\t\treturn;\n\t\t}\n\t\tconst rootClientId = select.getBlockRootClientId( clientId );\n\t\tconst isLocked = select.getTemplateLock( rootClientId );\n\t\tif ( isLocked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockIndex = select.getBlockIndex( clientId );\n\t\tconst directInsertBlock = rootClientId\n\t\t\t? select.getDirectInsertBlock( rootClientId )\n\t\t\t: null;\n\n\t\tif ( ! directInsertBlock ) {\n\t\t\treturn dispatch.insertDefaultBlock( {}, rootClientId, blockIndex );\n\t\t}\n\n\t\tconst copiedAttributes = {};\n\t\tif ( directInsertBlock.attributesToCopy ) {\n\t\t\tconst attributes = select.getBlockAttributes( clientId );\n\t\t\tdirectInsertBlock.attributesToCopy.forEach( ( key ) => {\n\t\t\t\tif ( attributes[ key ] ) {\n\t\t\t\t\tcopiedAttributes[ key ] = attributes[ key ];\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tconst block = createBlock( directInsertBlock.name, {\n\t\t\t...directInsertBlock.attributes,\n\t\t\t...copiedAttributes,\n\t\t} );\n\t\treturn dispatch.insertBlock( block, blockIndex, rootClientId );\n\t};\n\n/**\n * Action that inserts a default block after a given block.\n *\n * @param {string} clientId\n */\nexport const insertAfterBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientId ) {\n\t\t\treturn;\n\t\t}\n\t\tconst rootClientId = select.getBlockRootClientId( clientId );\n\t\tconst isLocked = select.getTemplateLock( rootClientId );\n\t\tif ( isLocked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockIndex = select.getBlockIndex( clientId );\n\t\tconst directInsertBlock = rootClientId\n\t\t\t? select.getDirectInsertBlock( rootClientId )\n\t\t\t: null;\n\n\t\tif ( ! directInsertBlock ) {\n\t\t\treturn dispatch.insertDefaultBlock(\n\t\t\t\t{},\n\t\t\t\trootClientId,\n\t\t\t\tblockIndex + 1\n\t\t\t);\n\t\t}\n\n\t\tconst copiedAttributes = {};\n\t\tif ( directInsertBlock.attributesToCopy ) {\n\t\t\tconst attributes = select.getBlockAttributes( clientId );\n\t\t\tdirectInsertBlock.attributesToCopy.forEach( ( key ) => {\n\t\t\t\tif ( attributes[ key ] ) {\n\t\t\t\t\tcopiedAttributes[ key ] = attributes[ key ];\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tconst block = createBlock( directInsertBlock.name, {\n\t\t\t...directInsertBlock.attributes,\n\t\t\t...copiedAttributes,\n\t\t} );\n\t\treturn dispatch.insertBlock( block, blockIndex + 1, rootClientId );\n\t};\n\n/**\n * Action that toggles the highlighted block state.\n *\n * @param {string}  clientId      The block's clientId.\n * @param {boolean} isHighlighted The highlight state.\n */\nexport function toggleBlockHighlight( clientId, isHighlighted ) {\n\treturn {\n\t\ttype: 'TOGGLE_BLOCK_HIGHLIGHT',\n\t\tclientId,\n\t\tisHighlighted,\n\t};\n}\n\n/**\n * Action that \"flashes\" the block with a given `clientId` by rhythmically highlighting it.\n *\n * @param {string} clientId Target block client ID.\n */\nexport const flashBlock =\n\t( clientId ) =>\n\tasync ( { dispatch } ) => {\n\t\tdispatch( toggleBlockHighlight( clientId, true ) );\n\t\tawait new Promise( ( resolve ) => setTimeout( resolve, 150 ) );\n\t\tdispatch( toggleBlockHighlight( clientId, false ) );\n\t};\n\n/**\n * Action that sets whether a block has controlled inner blocks.\n *\n * @param {string}  clientId                 The block's clientId.\n * @param {boolean} hasControlledInnerBlocks True if the block's inner blocks are controlled.\n */\nexport function setHasControlledInnerBlocks(\n\tclientId,\n\thasControlledInnerBlocks\n) {\n\treturn {\n\t\ttype: 'SET_HAS_CONTROLLED_INNER_BLOCKS',\n\t\thasControlledInnerBlocks,\n\t\tclientId,\n\t};\n}\n\n/**\n * Action that sets whether given blocks are visible on the canvas.\n *\n * @param {Record<string,boolean>} updates For each block's clientId, its new visibility setting.\n */\nexport function setBlockVisibility( updates ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_VISIBILITY',\n\t\tupdates,\n\t};\n}\n\n/**\n * Action that sets whether a block is being temporarily edited as blocks.\n *\n * DO-NOT-USE in production.\n * This action is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n *\n * @param {?string} temporarilyEditingAsBlocks The block's clientId being temporarily edited as blocks.\n * @param {?string} focusModeToRevert          The focus mode to revert after temporarily edit as blocks finishes.\n */\nexport function __unstableSetTemporarilyEditingAsBlocks(\n\ttemporarilyEditingAsBlocks,\n\tfocusModeToRevert\n) {\n\treturn {\n\t\ttype: 'SET_TEMPORARILY_EDITING_AS_BLOCKS',\n\t\ttemporarilyEditingAsBlocks,\n\t\tfocusModeToRevert,\n\t};\n}\n\n/**\n * Interface for inserter media requests.\n *\n * @typedef {Object} InserterMediaRequest\n * @property {number} per_page How many items to fetch per page.\n * @property {string} search   The search term to use for filtering the results.\n */\n\n/**\n * Interface for inserter media responses. Any media resource should\n * map their response to this interface, in order to create the core\n * WordPress media blocks (image, video, audio).\n *\n * @typedef {Object} InserterMediaItem\n * @property {string}        title        The title of the media item.\n * @property {string}        url          The source url of the media item.\n * @property {string}        [previewUrl] The preview source url of the media item to display in the media list.\n * @property {number}        [id]         The WordPress id of the media item.\n * @property {number|string} [sourceId]   The id of the media item from external source.\n * @property {string}        [alt]        The alt text of the media item.\n * @property {string}        [caption]    The caption of the media item.\n */\n\n/**\n * Registers a new inserter media category. Once registered, the media category is\n * available in the inserter's media tab.\n *\n * The following interfaces are used:\n *\n * _Type Definition_\n *\n * - _InserterMediaRequest_ `Object`: Interface for inserter media requests.\n *\n * _Properties_\n *\n * - _per_page_ `number`: How many items to fetch per page.\n * - _search_ `string`: The search term to use for filtering the results.\n *\n * _Type Definition_\n *\n * - _InserterMediaItem_ `Object`: Interface for inserter media responses. Any media resource should\n * map their response to this interface, in order to create the core\n * WordPress media blocks (image, video, audio).\n *\n * _Properties_\n *\n * - _title_ `string`: The title of the media item.\n * - _url_ `string: The source url of the media item.\n * - _previewUrl_ `[string]`: The preview source url of the media item to display in the media list.\n * - _id_ `[number]`: The WordPress id of the media item.\n * - _sourceId_ `[number|string]`: The id of the media item from external source.\n * - _alt_ `[string]`: The alt text of the media item.\n * - _caption_ `[string]`: The caption of the media item.\n *\n * @param    {InserterMediaCategory}                                  category                       The inserter media category to register.\n *\n * @example\n * ```js\n *\n * wp.data.dispatch('core/block-editor').registerInserterMediaCategory( {\n * \t name: 'openverse',\n * \t labels: {\n * \t \tname: 'Openverse',\n * \t \tsearch_items: 'Search Openverse',\n * \t },\n * \t mediaType: 'image',\n * \t async fetch( query = {} ) {\n * \t \tconst defaultArgs = {\n * \t \t\tmature: false,\n * \t \t\texcluded_source: 'flickr,inaturalist,wikimedia',\n * \t \t\tlicense: 'pdm,cc0',\n * \t \t};\n * \t \tconst finalQuery = { ...query, ...defaultArgs };\n * \t \t// Sometimes you might need to map the supported request params according to `InserterMediaRequest`.\n * \t \t// interface. In this example the `search` query param is named `q`.\n * \t \tconst mapFromInserterMediaRequest = {\n * \t \t\tper_page: 'page_size',\n * \t \t\tsearch: 'q',\n * \t \t};\n * \t \tconst url = new URL( 'https://api.openverse.org/v1/images/' );\n * \t \tObject.entries( finalQuery ).forEach( ( [ key, value ] ) => {\n * \t \t\tconst queryKey = mapFromInserterMediaRequest[ key ] || key;\n * \t \t\turl.searchParams.set( queryKey, value );\n * \t \t} );\n * \t \tconst response = await window.fetch( url, {\n * \t \t\theaders: {\n * \t \t\t\t'User-Agent': 'WordPress/inserter-media-fetch',\n * \t \t\t},\n * \t \t} );\n * \t \tconst jsonResponse = await response.json();\n * \t \tconst results = jsonResponse.results;\n * \t \treturn results.map( ( result ) => ( {\n * \t \t\t...result,\n * \t \t\t// If your response result includes an `id` prop that you want to access later, it should\n * \t \t\t// be mapped to `InserterMediaItem`'s `sourceId` prop. This can be useful if you provide\n * \t \t\t// a report URL getter.\n * \t \t\t// Additionally you should always clear the `id` value of your response results because\n * \t \t\t// it is used to identify WordPress media items.\n * \t \t\tsourceId: result.id,\n * \t \t\tid: undefined,\n * \t \t\tcaption: result.caption,\n * \t \t\tpreviewUrl: result.thumbnail,\n * \t \t} ) );\n * \t },\n * \t getReportUrl: ( { sourceId } ) =>\n * \t \t`https://wordpress.org/openverse/image/${ sourceId }/report/`,\n * \t isExternalResource: true,\n * } );\n * ```\n *\n * @typedef {Object} InserterMediaCategory Interface for inserter media category.\n * @property {string}                                                 name                           The name of the media category, that should be unique among all media categories.\n * @property {Object}                                                 labels                         Labels for the media category.\n * @property {string}                                                 labels.name                    General name of the media category. It's used in the inserter media items list.\n * @property {string}                                                 [labels.search_items='Search'] Label for searching items. Default is Search Posts / Search Pages.\n * @property {('image'|'audio'|'video')}                              mediaType                      The media type of the media category.\n * @property {(InserterMediaRequest) => Promise<InserterMediaItem[]>} fetch                          The function to fetch media items for the category.\n * @property {(InserterMediaItem) => string}                          [getReportUrl]                 If the media category supports reporting media items, this function should return\n *                                                                                                   the report url for the media item. It accepts the `InserterMediaItem` as an argument.\n * @property {boolean}                                                [isExternalResource]           If the media category is an external resource, this should be set to true.\n *                                                                                                   This is used to avoid making a request to the external resource when the user\n */\nexport const registerInserterMediaCategory =\n\t( category ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! category || typeof category !== 'object' ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should be an `InserterMediaCategory` object.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif ( ! category.name ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should have a `name` that should be unique among all media categories.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif ( ! category.labels?.name ) {\n\t\t\tconsole.error( 'Category should have a `labels.name`.' );\n\t\t\treturn;\n\t\t}\n\t\tif ( ! [ 'image', 'audio', 'video' ].includes( category.mediaType ) ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should have `mediaType` property that is one of `image|audio|video`.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif ( ! category.fetch || typeof category.fetch !== 'function' ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should have a `fetch` function defined with the following signature `(InserterMediaRequest) => Promise<InserterMediaItem[]>`.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tconst registeredInserterMediaCategories =\n\t\t\tselect.getRegisteredInserterMediaCategories();\n\t\tif (\n\t\t\tregisteredInserterMediaCategories.some(\n\t\t\t\t( { name } ) => name === category.name\n\t\t\t)\n\t\t) {\n\t\t\tconsole.error(\n\t\t\t\t`A category is already registered with the same name: \"${ category.name }\".`\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tregisteredInserterMediaCategories.some(\n\t\t\t\t( { labels: { name } = {} } ) => name === category.labels?.name\n\t\t\t)\n\t\t) {\n\t\t\tconsole.error(\n\t\t\t\t`A category is already registered with the same labels.name: \"${ category.labels.name }\".`\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\t// `inserterMediaCategories` is a private block editor setting, which means it cannot\n\t\t// be updated through the public `updateSettings` action. We preserve this setting as\n\t\t// private, so extenders can only add new inserter media categories and don't have any\n\t\t// control over the core media categories.\n\t\tdispatch( {\n\t\t\ttype: 'REGISTER_INSERTER_MEDIA_CATEGORY',\n\t\t\tcategory: { ...category, isExternalResource: true },\n\t\t} );\n\t};\n\n/**\n * @typedef {import('../components/block-editing-mode').BlockEditingMode} BlockEditingMode\n */\n\n/**\n * Sets the block editing mode for a given block.\n *\n * @see useBlockEditingMode\n *\n * @param {string}           clientId The block client ID, or `''` for the root container.\n * @param {BlockEditingMode} mode     The block editing mode. One of `'disabled'`,\n *                                    `'contentOnly'`, or `'default'`.\n *\n * @return {Object} Action object.\n */\nexport function setBlockEditingMode( clientId = '', mode ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_EDITING_MODE',\n\t\tclientId,\n\t\tmode,\n\t};\n}\n\n/**\n * Clears the block editing mode for a given block.\n *\n * @see useBlockEditingMode\n *\n * @param {string} clientId The block client ID, or `''` for the root container.\n *\n * @return {Object} Action object.\n */\nexport function unsetBlockEditingMode( clientId = '' ) {\n\treturn {\n\t\ttype: 'UNSET_BLOCK_EDITING_MODE',\n\t\tclientId,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { createReduxStore, registerStore } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as privateActions from './private-actions';\nimport * as privateSelectors from './private-selectors';\nimport * as actions from './actions';\nimport { STORE_NAME } from './constants';\nimport { unlock } from '../lock-unlock';\n\n/**\n * Block editor data store configuration.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#registerStore\n */\nexport const storeConfig = {\n\treducer,\n\tselectors,\n\tactions,\n};\n\n/**\n * Store definition for the block editor namespace.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\n */\nexport const store = createReduxStore( STORE_NAME, {\n\t...storeConfig,\n\tpersist: [ 'preferences' ],\n} );\n\n// We will be able to use the `register` function once we switch\n// the \"preferences\" persistence to use the new preferences package.\nconst registeredStore = registerStore( STORE_NAME, {\n\t...storeConfig,\n\tpersist: [ 'preferences' ],\n} );\nunlock( registeredStore ).registerPrivateActions( privateActions );\nunlock( registeredStore ).registerPrivateSelectors( privateSelectors );\n\n// TODO: Remove once we switch to the `register` function (see above).\n//\n// Until then, private functions also need to be attached to the original\n// `store` descriptor in order to avoid unit tests failing, which could happen\n// when tests create new registries in which they register stores.\n//\n// @see https://github.com/WordPress/gutenberg/pull/51145#discussion_r1239999590\nunlock( store ).registerPrivateActions( privateActions );\nunlock( store ).registerPrivateSelectors( privateSelectors );\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\n/**\n * Hook that retrieves the given settings for the block instance in use.\n *\n * It looks up the settings first in the block instance hierarchy.\n * If none are found, it'll look them up in the block editor settings.\n *\n * @param {string[]} paths The paths to the settings.\n * @return {any[]} Returns the values defined for the settings.\n * @example\n * ```js\n * const [ fixed, sticky ] = useSettings( 'position.fixed', 'position.sticky' );\n * ```\n */\nexport function useSettings( ...paths ) {\n\tconst { clientId = null } = useBlockEditContext();\n\treturn useSelect(\n\t\t( select ) =>\n\t\t\tunlock( select( blockEditorStore ) ).getBlockSettings(\n\t\t\t\tclientId,\n\t\t\t\t...paths\n\t\t\t),\n\t\t[ clientId, ...paths ]\n\t);\n}\n\n/**\n * Hook that retrieves the given setting for the block instance in use.\n *\n * It looks up the setting first in the block instance hierarchy.\n * If none is found, it'll look it up in the block editor settings.\n *\n * @deprecated 6.5.0 Use useSettings instead.\n *\n * @param {string} path The path to the setting.\n * @return {any} Returns the value defined for the setting.\n * @example\n * ```js\n * const isEnabled = useSetting( 'typography.dropCap' );\n * ```\n */\nexport function useSetting( path ) {\n\tdeprecated( 'wp.blockEditor.useSetting', {\n\t\tsince: '6.5',\n\t\talternative: 'wp.blockEditor.useSettings',\n\t\tnote: 'The new useSettings function can retrieve multiple settings at once, with better performance.',\n\t} );\n\n\tconst [ value ] = useSettings( path );\n\treturn value;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"styleEngine\"];","/**\n * The fluid utilities must match the backend equivalent.\n * See: gutenberg_get_typography_font_size_value() in lib/block-supports/typography.php\n * ---------------------------------------------------------------\n */\n\n// Defaults.\nconst DEFAULT_MAXIMUM_VIEWPORT_WIDTH = '1600px';\nconst DEFAULT_MINIMUM_VIEWPORT_WIDTH = '320px';\nconst DEFAULT_SCALE_FACTOR = 1;\nconst DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MIN = 0.25;\nconst DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MAX = 0.75;\nconst DEFAULT_MINIMUM_FONT_SIZE_LIMIT = '14px';\n\n/**\n * Computes a fluid font-size value that uses clamp(). A minimum and maximum\n * font size OR a single font size can be specified.\n *\n * If a single font size is specified, it is scaled up and down using a logarithmic scale.\n *\n * @example\n * ```js\n * // Calculate fluid font-size value from a minimum and maximum value.\n * const fontSize = getComputedFluidTypographyValue( {\n *     minimumFontSize: '20px',\n *     maximumFontSize: '45px'\n * } );\n * // Calculate fluid font-size value from a single font size.\n * const fontSize = getComputedFluidTypographyValue( {\n *     fontSize: '30px',\n * } );\n * ```\n *\n * @param {Object}        args\n * @param {?string}       args.minimumViewportWidth Minimum viewport size from which type will have fluidity. Optional if fontSize is specified.\n * @param {?string}       args.maximumViewportWidth Maximum size up to which type will have fluidity. Optional if fontSize is specified.\n * @param {string|number} [args.fontSize]           Size to derive maximumFontSize and minimumFontSize from, if necessary. Optional if minimumFontSize and maximumFontSize are specified.\n * @param {?string}       args.maximumFontSize      Maximum font size for any clamp() calculation. Optional.\n * @param {?string}       args.minimumFontSize      Minimum font size for any clamp() calculation. Optional.\n * @param {?number}       args.scaleFactor          A scale factor to determine how fast a font scales within boundaries. Optional.\n * @param {?string}       args.minimumFontSizeLimit The smallest a calculated font size may be. Optional.\n *\n * @return {string|null} A font-size value using clamp().\n */\nexport function getComputedFluidTypographyValue( {\n\tminimumFontSize,\n\tmaximumFontSize,\n\tfontSize,\n\tminimumViewportWidth = DEFAULT_MINIMUM_VIEWPORT_WIDTH,\n\tmaximumViewportWidth = DEFAULT_MAXIMUM_VIEWPORT_WIDTH,\n\tscaleFactor = DEFAULT_SCALE_FACTOR,\n\tminimumFontSizeLimit,\n} ) {\n\t// Validate incoming settings and set defaults.\n\tminimumFontSizeLimit = !! getTypographyValueAndUnit( minimumFontSizeLimit )\n\t\t? minimumFontSizeLimit\n\t\t: DEFAULT_MINIMUM_FONT_SIZE_LIMIT;\n\n\t/*\n\t * Calculates missing minimumFontSize and maximumFontSize from\n\t * defaultFontSize if provided.\n\t */\n\tif ( fontSize ) {\n\t\t// Parses default font size.\n\t\tconst fontSizeParsed = getTypographyValueAndUnit( fontSize );\n\n\t\t// Protect against invalid units.\n\t\tif ( ! fontSizeParsed?.unit ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Parses the minimum font size limit, so we can perform checks using it.\n\t\tconst minimumFontSizeLimitParsed = getTypographyValueAndUnit(\n\t\t\tminimumFontSizeLimit,\n\t\t\t{\n\t\t\t\tcoerceTo: fontSizeParsed.unit,\n\t\t\t}\n\t\t);\n\n\t\t// Don't enforce minimum font size if a font size has explicitly set a min and max value.\n\t\tif (\n\t\t\t!! minimumFontSizeLimitParsed?.value &&\n\t\t\t! minimumFontSize &&\n\t\t\t! maximumFontSize\n\t\t) {\n\t\t\t/*\n\t\t\t * If a minimum size was not passed to this function\n\t\t\t * and the user-defined font size is lower than $minimum_font_size_limit,\n\t\t\t * do not calculate a fluid value.\n\t\t\t */\n\t\t\tif ( fontSizeParsed?.value <= minimumFontSizeLimitParsed?.value ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\t// If no fluid max font size is available use the incoming value.\n\t\tif ( ! maximumFontSize ) {\n\t\t\tmaximumFontSize = `${ fontSizeParsed.value }${ fontSizeParsed.unit }`;\n\t\t}\n\n\t\t/*\n\t\t * If no minimumFontSize is provided, create one using\n\t\t * the given font size multiplied by the min font size scale factor.\n\t\t */\n\t\tif ( ! minimumFontSize ) {\n\t\t\tconst fontSizeValueInPx =\n\t\t\t\tfontSizeParsed.unit === 'px'\n\t\t\t\t\t? fontSizeParsed.value\n\t\t\t\t\t: fontSizeParsed.value * 16;\n\n\t\t\t/*\n\t\t\t * The scale factor is a multiplier that affects how quickly the curve will move towards the minimum,\n\t\t\t * that is, how quickly the size factor reaches 0 given increasing font size values.\n\t\t\t * For a - b * log2(), lower values of b will make the curve move towards the minimum faster.\n\t\t\t * The scale factor is constrained between min and max values.\n\t\t\t */\n\t\t\tconst minimumFontSizeFactor = Math.min(\n\t\t\t\tMath.max(\n\t\t\t\t\t1 - 0.075 * Math.log2( fontSizeValueInPx ),\n\t\t\t\t\tDEFAULT_MINIMUM_FONT_SIZE_FACTOR_MIN\n\t\t\t\t),\n\t\t\t\tDEFAULT_MINIMUM_FONT_SIZE_FACTOR_MAX\n\t\t\t);\n\n\t\t\t// Calculates the minimum font size.\n\t\t\tconst calculatedMinimumFontSize = roundToPrecision(\n\t\t\t\tfontSizeParsed.value * minimumFontSizeFactor,\n\t\t\t\t3\n\t\t\t);\n\n\t\t\t// Only use calculated min font size if it's > $minimum_font_size_limit value.\n\t\t\tif (\n\t\t\t\t!! minimumFontSizeLimitParsed?.value &&\n\t\t\t\tcalculatedMinimumFontSize < minimumFontSizeLimitParsed?.value\n\t\t\t) {\n\t\t\t\tminimumFontSize = `${ minimumFontSizeLimitParsed.value }${ minimumFontSizeLimitParsed.unit }`;\n\t\t\t} else {\n\t\t\t\tminimumFontSize = `${ calculatedMinimumFontSize }${ fontSizeParsed.unit }`;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Grab the minimum font size and normalize it in order to use the value for calculations.\n\tconst minimumFontSizeParsed = getTypographyValueAndUnit( minimumFontSize );\n\n\t// We get a 'preferred' unit to keep units consistent when calculating,\n\t// otherwise the result will not be accurate.\n\tconst fontSizeUnit = minimumFontSizeParsed?.unit || 'rem';\n\n\t// Grabs the maximum font size and normalize it in order to use the value for calculations.\n\tconst maximumFontSizeParsed = getTypographyValueAndUnit( maximumFontSize, {\n\t\tcoerceTo: fontSizeUnit,\n\t} );\n\n\t// Checks for mandatory min and max sizes, and protects against unsupported units.\n\tif ( ! minimumFontSizeParsed || ! maximumFontSizeParsed ) {\n\t\treturn null;\n\t}\n\n\t// Uses rem for accessible fluid target font scaling.\n\tconst minimumFontSizeRem = getTypographyValueAndUnit( minimumFontSize, {\n\t\tcoerceTo: 'rem',\n\t} );\n\n\t// Viewport widths defined for fluid typography. Normalize units\n\tconst maximumViewportWidthParsed = getTypographyValueAndUnit(\n\t\tmaximumViewportWidth,\n\t\t{ coerceTo: fontSizeUnit }\n\t);\n\tconst minimumViewportWidthParsed = getTypographyValueAndUnit(\n\t\tminimumViewportWidth,\n\t\t{ coerceTo: fontSizeUnit }\n\t);\n\n\t// Protect against unsupported units.\n\tif (\n\t\t! maximumViewportWidthParsed ||\n\t\t! minimumViewportWidthParsed ||\n\t\t! minimumFontSizeRem\n\t) {\n\t\treturn null;\n\t}\n\n\t// Calculates the linear factor denominator. If it's 0, we cannot calculate a fluid value.\n\tconst linearDenominator =\n\t\tmaximumViewportWidthParsed.value - minimumViewportWidthParsed.value;\n\tif ( ! linearDenominator ) {\n\t\treturn null;\n\t}\n\n\t// Build CSS rule.\n\t// Borrowed from https://websemantics.uk/tools/responsive-font-calculator/.\n\tconst minViewportWidthOffsetValue = roundToPrecision(\n\t\tminimumViewportWidthParsed.value / 100,\n\t\t3\n\t);\n\n\tconst viewportWidthOffset =\n\t\troundToPrecision( minViewportWidthOffsetValue, 3 ) + fontSizeUnit;\n\tconst linearFactor =\n\t\t100 *\n\t\t( ( maximumFontSizeParsed.value - minimumFontSizeParsed.value ) /\n\t\t\tlinearDenominator );\n\tconst linearFactorScaled = roundToPrecision(\n\t\t( linearFactor || 1 ) * scaleFactor,\n\t\t3\n\t);\n\tconst fluidTargetFontSize = `${ minimumFontSizeRem.value }${ minimumFontSizeRem.unit } + ((1vw - ${ viewportWidthOffset }) * ${ linearFactorScaled })`;\n\n\treturn `clamp(${ minimumFontSize }, ${ fluidTargetFontSize }, ${ maximumFontSize })`;\n}\n\n/**\n * Internal method that checks a string for a unit and value and returns an array consisting of `'value'` and `'unit'`, e.g., [ '42', 'rem' ].\n * A raw font size of `value + unit` is expected. If the value is an integer, it will convert to `value + 'px'`.\n *\n * @param {string|number}    rawValue Raw size value from theme.json.\n * @param {Object|undefined} options  Calculation options.\n *\n * @return {{ unit: string, value: number }|null} An object consisting of `'value'` and `'unit'` properties.\n */\nexport function getTypographyValueAndUnit( rawValue, options = {} ) {\n\tif ( typeof rawValue !== 'string' && typeof rawValue !== 'number' ) {\n\t\treturn null;\n\t}\n\n\t// Converts numeric values to pixel values by default.\n\tif ( isFinite( rawValue ) ) {\n\t\trawValue = `${ rawValue }px`;\n\t}\n\n\tconst { coerceTo, rootSizeValue, acceptableUnits } = {\n\t\tcoerceTo: '',\n\t\t// Default browser font size. Later we could inject some JS to compute this `getComputedStyle( document.querySelector( \"html\" ) ).fontSize`.\n\t\trootSizeValue: 16,\n\t\tacceptableUnits: [ 'rem', 'px', 'em' ],\n\t\t...options,\n\t};\n\n\tconst acceptableUnitsGroup = acceptableUnits?.join( '|' );\n\tconst regexUnits = new RegExp(\n\t\t`^(\\\\d*\\\\.?\\\\d+)(${ acceptableUnitsGroup }){1,1}$`\n\t);\n\n\tconst matches = rawValue.match( regexUnits );\n\n\t// We need a number value and a unit.\n\tif ( ! matches || matches.length < 3 ) {\n\t\treturn null;\n\t}\n\n\tlet [ , value, unit ] = matches;\n\n\tlet returnValue = parseFloat( value );\n\n\tif ( 'px' === coerceTo && ( 'em' === unit || 'rem' === unit ) ) {\n\t\treturnValue = returnValue * rootSizeValue;\n\t\tunit = coerceTo;\n\t}\n\n\tif ( 'px' === unit && ( 'em' === coerceTo || 'rem' === coerceTo ) ) {\n\t\treturnValue = returnValue / rootSizeValue;\n\t\tunit = coerceTo;\n\t}\n\n\t/*\n\t * No calculation is required if swapping between em and rem yet,\n\t * since we assume a root size value. Later we might like to differentiate between\n\t * :root font size (rem) and parent element font size (em) relativity.\n\t */\n\tif (\n\t\t( 'em' === coerceTo || 'rem' === coerceTo ) &&\n\t\t( 'em' === unit || 'rem' === unit )\n\t) {\n\t\tunit = coerceTo;\n\t}\n\n\treturn {\n\t\tvalue: roundToPrecision( returnValue, 3 ),\n\t\tunit,\n\t};\n}\n\n/**\n * Returns a value rounded to defined precision.\n * Returns `undefined` if the value is not a valid finite number.\n *\n * @param {number} value  Raw value.\n * @param {number} digits The number of digits to appear after the decimal point\n *\n * @return {number|undefined} Value rounded to standard precision.\n */\nexport function roundToPrecision( value, digits = 3 ) {\n\tconst base = Math.pow( 10, digits );\n\treturn Number.isFinite( value )\n\t\t? parseFloat( Math.round( value * base ) / base )\n\t\t: undefined;\n}\n","/**\n * WordPress dependencies\n */\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Formats font weights to human readable names.\n *\n * @param {string} fontWeight font weight string\n * @return {Object} new object with formatted font weight\n */\nexport function formatFontWeight( fontWeight ) {\n\tif ( ! fontWeight ) {\n\t\treturn {};\n\t}\n\n\tif ( typeof fontWeight === 'object' ) {\n\t\treturn fontWeight;\n\t}\n\n\tlet name;\n\n\tswitch ( fontWeight ) {\n\t\tcase 'normal':\n\t\tcase '400':\n\t\t\tname = _x( 'Regular', 'font weight' );\n\t\t\tbreak;\n\t\tcase 'bold':\n\t\tcase '700':\n\t\t\tname = _x( 'Bold', 'font weight' );\n\t\t\tbreak;\n\t\tcase '100':\n\t\t\tname = _x( 'Thin', 'font weight' );\n\t\t\tbreak;\n\t\tcase '200':\n\t\t\tname = _x( 'Extra Light', 'font weight' );\n\t\t\tbreak;\n\t\tcase '300':\n\t\t\tname = _x( 'Light', 'font weight' );\n\t\t\tbreak;\n\t\tcase '500':\n\t\t\tname = _x( 'Medium', 'font weight' );\n\t\t\tbreak;\n\t\tcase '600':\n\t\t\tname = _x( 'Semi Bold', 'font weight' );\n\t\t\tbreak;\n\t\tcase '800':\n\t\t\tname = _x( 'Extra Bold', 'font weight' );\n\t\t\tbreak;\n\t\tcase '900':\n\t\t\tname = _x( 'Black', 'font weight' );\n\t\t\tbreak;\n\t\tcase '1000':\n\t\t\tname = _x( 'Extra Black', 'font weight' );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tname = fontWeight;\n\t\t\tbreak;\n\t}\n\n\treturn { name, value: fontWeight };\n}\n","/**\n * WordPress dependencies\n */\nimport { _x, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { formatFontStyle } from './format-font-style';\nimport { formatFontWeight } from './format-font-weight';\n\nconst FONT_STYLES = [\n\t{\n\t\tname: _x( 'Regular', 'font style' ),\n\t\tvalue: 'normal',\n\t},\n\t{\n\t\tname: _x( 'Italic', 'font style' ),\n\t\tvalue: 'italic',\n\t},\n];\n\nconst FONT_WEIGHTS = [\n\t{\n\t\tname: _x( 'Thin', 'font weight' ),\n\t\tvalue: '100',\n\t},\n\t{\n\t\tname: _x( 'Extra Light', 'font weight' ),\n\t\tvalue: '200',\n\t},\n\t{\n\t\tname: _x( 'Light', 'font weight' ),\n\t\tvalue: '300',\n\t},\n\t{\n\t\tname: _x( 'Regular', 'font weight' ),\n\t\tvalue: '400',\n\t},\n\t{\n\t\tname: _x( 'Medium', 'font weight' ),\n\t\tvalue: '500',\n\t},\n\t{\n\t\tname: _x( 'Semi Bold', 'font weight' ),\n\t\tvalue: '600',\n\t},\n\t{\n\t\tname: _x( 'Bold', 'font weight' ),\n\t\tvalue: '700',\n\t},\n\t{\n\t\tname: _x( 'Extra Bold', 'font weight' ),\n\t\tvalue: '800',\n\t},\n\t{\n\t\tname: _x( 'Black', 'font weight' ),\n\t\tvalue: '900',\n\t},\n\t{\n\t\tname: _x( 'Extra Black', 'font weight' ),\n\t\tvalue: '1000',\n\t},\n];\n\n/**\n * Builds a list of font style and weight options based on font family faces.\n * Defaults to the standard font styles and weights if no font family faces are provided.\n *\n * @param {Array} fontFamilyFaces font family faces array\n * @return {Object} new object with combined and separated font style and weight properties\n */\nexport function getFontStylesAndWeights( fontFamilyFaces ) {\n\tlet fontStyles = [];\n\tlet fontWeights = [];\n\tconst combinedStyleAndWeightOptions = [];\n\tconst isSystemFont = ! fontFamilyFaces || fontFamilyFaces?.length === 0;\n\tlet isVariableFont = false;\n\n\tfontFamilyFaces?.forEach( ( face ) => {\n\t\t// Check for variable font by looking for a space in the font weight value. e.g. \"100 900\"\n\t\tif (\n\t\t\t'string' === typeof face.fontWeight &&\n\t\t\t/\\s/.test( face.fontWeight.trim() )\n\t\t) {\n\t\t\tisVariableFont = true;\n\n\t\t\t// Find font weight start and end values.\n\t\t\tlet [ startValue, endValue ] = face.fontWeight.split( ' ' );\n\t\t\tstartValue = parseInt( startValue.slice( 0, 1 ) );\n\t\t\tif ( endValue === '1000' ) {\n\t\t\t\tendValue = 10;\n\t\t\t} else {\n\t\t\t\tendValue = parseInt( endValue.slice( 0, 1 ) );\n\t\t\t}\n\n\t\t\t// Create font weight options for available variable weights.\n\t\t\tfor ( let i = startValue; i <= endValue; i++ ) {\n\t\t\t\tconst fontWeightValue = `${ i.toString() }00`;\n\t\t\t\tif (\n\t\t\t\t\t! fontWeights.some(\n\t\t\t\t\t\t( weight ) => weight.value === fontWeightValue\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tfontWeights.push( formatFontWeight( fontWeightValue ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Format font style and weight values.\n\t\tconst fontWeight = formatFontWeight(\n\t\t\t'number' === typeof face.fontWeight\n\t\t\t\t? face.fontWeight.toString()\n\t\t\t\t: face.fontWeight\n\t\t);\n\t\tconst fontStyle = formatFontStyle( face.fontStyle );\n\n\t\t// Create font style and font weight lists without duplicates.\n\t\tif ( fontStyle && Object.keys( fontStyle ).length ) {\n\t\t\tif (\n\t\t\t\t! fontStyles.some(\n\t\t\t\t\t( style ) => style.value === fontStyle.value\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tfontStyles.push( fontStyle );\n\t\t\t}\n\t\t}\n\n\t\tif ( fontWeight && Object.keys( fontWeight ).length ) {\n\t\t\tif (\n\t\t\t\t! fontWeights.some(\n\t\t\t\t\t( weight ) => weight.value === fontWeight.value\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tif ( ! isVariableFont ) {\n\t\t\t\t\tfontWeights.push( fontWeight );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} );\n\n\t// If there is no font weight of 600 or above, then include faux bold as an option.\n\tif ( ! fontWeights.some( ( weight ) => weight.value >= '600' ) ) {\n\t\tfontWeights.push( {\n\t\t\tname: _x( 'Bold', 'font weight' ),\n\t\t\tvalue: '700',\n\t\t} );\n\t}\n\n\t// If there is no italic font style, then include faux italic as an option.\n\tif ( ! fontStyles.some( ( style ) => style.value === 'italic' ) ) {\n\t\tfontStyles.push( {\n\t\t\tname: _x( 'Italic', 'font style' ),\n\t\t\tvalue: 'italic',\n\t\t} );\n\t}\n\n\t// Use default font styles and weights for system fonts.\n\tif ( isSystemFont ) {\n\t\tfontStyles = FONT_STYLES;\n\t\tfontWeights = FONT_WEIGHTS;\n\t}\n\n\t// Use default styles and weights if there are no available styles or weights from the provided font faces.\n\tfontStyles = fontStyles.length === 0 ? FONT_STYLES : fontStyles;\n\tfontWeights = fontWeights.length === 0 ? FONT_WEIGHTS : fontWeights;\n\n\t// Generate combined font style and weight options for available fonts.\n\tfontStyles.forEach( ( { name: styleName, value: styleValue } ) => {\n\t\tfontWeights.forEach( ( { name: weightName, value: weightValue } ) => {\n\t\t\tconst optionName =\n\t\t\t\tstyleValue === 'normal'\n\t\t\t\t\t? weightName\n\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t/* translators: 1: Font weight name. 2: Font style name. */\n\t\t\t\t\t\t\t_x( '%1$s %2$s', 'font' ),\n\t\t\t\t\t\t\tweightName,\n\t\t\t\t\t\t\tstyleName\n\t\t\t\t\t  );\n\n\t\t\tcombinedStyleAndWeightOptions.push( {\n\t\t\t\tkey: `${ styleValue }-${ weightValue }`,\n\t\t\t\tname: optionName,\n\t\t\t\tstyle: {\n\t\t\t\t\tfontStyle: styleValue,\n\t\t\t\t\tfontWeight: weightValue,\n\t\t\t\t},\n\t\t\t} );\n\t\t} );\n\t} );\n\n\treturn {\n\t\tfontStyles,\n\t\tfontWeights,\n\t\tcombinedStyleAndWeightOptions,\n\t\tisSystemFont,\n\t\tisVariableFont,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Formats font styles to human readable names.\n *\n * @param {string} fontStyle font style string\n * @return {Object} new object with formatted font style\n */\nexport function formatFontStyle( fontStyle ) {\n\tif ( ! fontStyle ) {\n\t\treturn {};\n\t}\n\n\tif ( typeof fontStyle === 'object' ) {\n\t\treturn fontStyle;\n\t}\n\n\tlet name;\n\n\tswitch ( fontStyle ) {\n\t\tcase 'normal':\n\t\t\tname = _x( 'Regular', 'font style' );\n\t\t\tbreak;\n\t\tcase 'italic':\n\t\t\tname = _x( 'Italic', 'font style' );\n\t\t\tbreak;\n\t\tcase 'oblique':\n\t\t\tname = _x( 'Oblique', 'font style' );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tname = fontStyle;\n\t\t\tbreak;\n\t}\n\n\treturn { name, value: fontStyle };\n}\n","/**\n * The fluid utilities must match the backend equivalent.\n * See: gutenberg_get_typography_font_size_value() in lib/block-supports/typography.php\n * ---------------------------------------------------------------\n */\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetComputedFluidTypographyValue,\n\tgetTypographyValueAndUnit,\n} from '../font-sizes/fluid-utils';\nimport { getFontStylesAndWeights } from '../../utils/get-font-styles-and-weights';\n\n/**\n * @typedef {Object} FluidPreset\n * @property {string|undefined}  max A maximum font size value.\n * @property {?string|undefined} min A minimum font size value.\n */\n\n/**\n * @typedef {Object} Preset\n * @property {?string|?number}               size  A default font size.\n * @property {string}                        name  A font size name, displayed in the UI.\n * @property {string}                        slug  A font size slug\n * @property {boolean|FluidPreset|undefined} fluid Specifies the minimum and maximum font size value of a fluid font size.\n */\n\n/**\n * @typedef {Object} TypographySettings\n * @property {?string} minViewportWidth  Minimum viewport size from which type will have fluidity. Optional if size is specified.\n * @property {?string} maxViewportWidth  Maximum size up to which type will have fluidity. Optional if size is specified.\n * @property {?number} scaleFactor       A scale factor to determine how fast a font scales within boundaries. Optional.\n * @property {?number} minFontSizeFactor How much to scale defaultFontSize by to derive minimumFontSize. Optional.\n * @property {?string} minFontSize       The smallest a calculated font size may be. Optional.\n */\n\n/**\n * Returns a font-size value based on a given font-size preset.\n * Takes into account fluid typography parameters and attempts to return a css formula depending on available, valid values.\n *\n * The Core PHP equivalent is wp_get_typography_font_size_value().\n *\n * @param {Preset}                     preset\n * @param {Object}                     settings\n * @param {boolean|TypographySettings} settings.typography.fluid  Whether fluid typography is enabled, and, optionally, fluid font size options.\n * @param {?Object}                    settings.typography.layout Layout options.\n *\n * @return {string|*} A font-size value or the value of preset.size.\n */\nexport function getTypographyFontSizeValue( preset, settings ) {\n\tconst { size: defaultSize } = preset;\n\n\t/*\n\t * Catch falsy values and 0/'0'. Fluid calculations cannot be performed on `0`.\n\t * Also return early when a preset font size explicitly disables fluid typography with `false`.\n\t */\n\tif ( ! defaultSize || '0' === defaultSize || false === preset?.fluid ) {\n\t\treturn defaultSize;\n\t}\n\n\t/*\n\t * Return early when fluid typography is disabled in the settings, and there\n\t * are no local settings to enable it for the individual preset.\n\t *\n\t * If this condition isn't met, either the settings or individual preset settings\n\t * have enabled fluid typography.\n\t */\n\tif (\n\t\t! isFluidTypographyEnabled( settings?.typography ) &&\n\t\t! isFluidTypographyEnabled( preset )\n\t) {\n\t\treturn defaultSize;\n\t}\n\n\tlet fluidTypographySettings =\n\t\tgetFluidTypographyOptionsFromSettings( settings );\n\tfluidTypographySettings =\n\t\ttypeof fluidTypographySettings?.fluid === 'object'\n\t\t\t? fluidTypographySettings?.fluid\n\t\t\t: {};\n\n\tconst fluidFontSizeValue = getComputedFluidTypographyValue( {\n\t\tminimumFontSize: preset?.fluid?.min,\n\t\tmaximumFontSize: preset?.fluid?.max,\n\t\tfontSize: defaultSize,\n\t\tminimumFontSizeLimit: fluidTypographySettings?.minFontSize,\n\t\tmaximumViewportWidth: fluidTypographySettings?.maxViewportWidth,\n\t\tminimumViewportWidth: fluidTypographySettings?.minViewportWidth,\n\t} );\n\n\tif ( !! fluidFontSizeValue ) {\n\t\treturn fluidFontSizeValue;\n\t}\n\n\treturn defaultSize;\n}\n\nfunction isFluidTypographyEnabled( typographySettings ) {\n\tconst fluidSettings = typographySettings?.fluid;\n\treturn (\n\t\ttrue === fluidSettings ||\n\t\t( fluidSettings &&\n\t\t\ttypeof fluidSettings === 'object' &&\n\t\t\tObject.keys( fluidSettings ).length > 0 )\n\t);\n}\n\n/**\n * Returns fluid typography settings from theme.json setting object.\n *\n * @param {Object} settings            Theme.json settings\n * @param {Object} settings.typography Theme.json typography settings\n * @param {Object} settings.layout     Theme.json layout settings\n * @return {TypographySettings} Fluid typography settings\n */\nexport function getFluidTypographyOptionsFromSettings( settings ) {\n\tconst typographySettings = settings?.typography;\n\tconst layoutSettings = settings?.layout;\n\tconst defaultMaxViewportWidth = getTypographyValueAndUnit(\n\t\tlayoutSettings?.wideSize\n\t)\n\t\t? layoutSettings?.wideSize\n\t\t: null;\n\treturn isFluidTypographyEnabled( typographySettings ) &&\n\t\tdefaultMaxViewportWidth\n\t\t? {\n\t\t\t\tfluid: {\n\t\t\t\t\tmaxViewportWidth: defaultMaxViewportWidth,\n\t\t\t\t\t...typographySettings.fluid,\n\t\t\t\t},\n\t\t  }\n\t\t: {\n\t\t\t\tfluid: typographySettings?.fluid,\n\t\t  };\n}\n\n/**\n * Returns an object of merged font families and the font faces from the selected font family\n * based on the theme.json settings object and the currently selected font family.\n *\n * @param {Object} settings           Theme.json settings.\n * @param {string} selectedFontFamily Decoded font family string.\n * @return {Object} Merged font families and font faces from the selected font family.\n */\nexport function getMergedFontFamiliesAndFontFamilyFaces(\n\tsettings,\n\tselectedFontFamily\n) {\n\tconst fontFamiliesFromSettings = settings?.typography?.fontFamilies;\n\n\tconst fontFamilies = [ 'default', 'theme', 'custom' ].flatMap(\n\t\t( key ) => fontFamiliesFromSettings?.[ key ] ?? []\n\t);\n\n\tconst fontFamilyFaces =\n\t\tfontFamilies.find(\n\t\t\t( family ) => family.fontFamily === selectedFontFamily\n\t\t)?.fontFace ?? [];\n\n\treturn { fontFamilies, fontFamilyFaces };\n}\n\n/**\n * Returns the nearest font weight value from the available font weight list based on the new font weight.\n * The nearest font weight is the one with the smallest difference from the new font weight.\n *\n * @param {Array}  availableFontWeights Array of available font weights.\n * @param {string} newFontWeightValue   New font weight value.\n * @return {string} Nearest font weight.\n */\nexport function findNearestFontWeight(\n\tavailableFontWeights,\n\tnewFontWeightValue\n) {\n\tnewFontWeightValue =\n\t\t'number' === typeof newFontWeightValue\n\t\t\t? newFontWeightValue.toString()\n\t\t\t: newFontWeightValue;\n\tif ( ! newFontWeightValue || typeof newFontWeightValue !== 'string' ) {\n\t\treturn '';\n\t}\n\n\tif ( ! availableFontWeights || availableFontWeights.length === 0 ) {\n\t\treturn newFontWeightValue;\n\t}\n\n\tconst nearestFontWeight = availableFontWeights?.reduce(\n\t\t( nearest, { value: fw } ) => {\n\t\t\tconst currentDiff = Math.abs(\n\t\t\t\tparseInt( fw ) - parseInt( newFontWeightValue )\n\t\t\t);\n\t\t\tconst nearestDiff = Math.abs(\n\t\t\t\tparseInt( nearest ) - parseInt( newFontWeightValue )\n\t\t\t);\n\t\t\treturn currentDiff < nearestDiff ? fw : nearest;\n\t\t},\n\t\tavailableFontWeights[ 0 ]?.value\n\t);\n\n\treturn nearestFontWeight;\n}\n\n/**\n * Returns the nearest font style based on the new font style.\n * Defaults to an empty string if the new font style is not valid or available.\n *\n * @param {Array}  availableFontStyles Array of available font weights.\n * @param {string} newFontStyleValue   New font style value.\n * @return {string} Nearest font style or an empty string.\n */\nexport function findNearestFontStyle( availableFontStyles, newFontStyleValue ) {\n\tif ( typeof newFontStyleValue !== 'string' || ! newFontStyleValue ) {\n\t\treturn '';\n\t}\n\n\tconst validStyles = [ 'normal', 'italic', 'oblique' ];\n\tif ( ! validStyles.includes( newFontStyleValue ) ) {\n\t\treturn '';\n\t}\n\n\tif (\n\t\t! availableFontStyles ||\n\t\tavailableFontStyles.length === 0 ||\n\t\tavailableFontStyles.find(\n\t\t\t( style ) => style.value === newFontStyleValue\n\t\t)\n\t) {\n\t\treturn newFontStyleValue;\n\t}\n\n\tif (\n\t\tnewFontStyleValue === 'oblique' &&\n\t\t! availableFontStyles.find( ( style ) => style.value === 'oblique' )\n\t) {\n\t\treturn 'italic';\n\t}\n\n\treturn '';\n}\n\n/**\n * Returns the nearest font style and weight based on the available font family faces and the new font style and weight.\n *\n * @param {Array}  fontFamilyFaces Array of available font family faces.\n * @param {string} fontStyle       New font style. Defaults to previous value.\n * @param {string} fontWeight      New font weight. Defaults to previous value.\n * @return {Object} Nearest font style and font weight.\n */\nexport function findNearestStyleAndWeight(\n\tfontFamilyFaces,\n\tfontStyle,\n\tfontWeight\n) {\n\tlet nearestFontStyle = fontStyle;\n\tlet nearestFontWeight = fontWeight;\n\n\tconst { fontStyles, fontWeights, combinedStyleAndWeightOptions } =\n\t\tgetFontStylesAndWeights( fontFamilyFaces );\n\n\t// Check if the new font style and weight are available in the font family faces.\n\tconst hasFontStyle = fontStyles?.some(\n\t\t( { value: fs } ) => fs === fontStyle\n\t);\n\tconst hasFontWeight = fontWeights?.some(\n\t\t( { value: fw } ) => fw?.toString() === fontWeight?.toString()\n\t);\n\n\tif ( ! hasFontStyle ) {\n\t\t/*\n\t\t * Default to italic if oblique is not available.\n\t\t * Or find the nearest font style based on the nearest font weight.\n\t\t */\n\t\tnearestFontStyle = fontStyle\n\t\t\t? findNearestFontStyle( fontStyles, fontStyle )\n\t\t\t: combinedStyleAndWeightOptions?.find(\n\t\t\t\t\t( option ) =>\n\t\t\t\t\t\toption.style.fontWeight ===\n\t\t\t\t\t\tfindNearestFontWeight( fontWeights, fontWeight )\n\t\t\t  )?.style?.fontStyle;\n\t}\n\n\tif ( ! hasFontWeight ) {\n\t\t/*\n\t\t * Find the nearest font weight based on available weights.\n\t\t * Or find the nearest font weight based on the nearest font style.\n\t\t */\n\t\tnearestFontWeight = fontWeight\n\t\t\t? findNearestFontWeight( fontWeights, fontWeight )\n\t\t\t: combinedStyleAndWeightOptions?.find(\n\t\t\t\t\t( option ) =>\n\t\t\t\t\t\toption.style.fontStyle ===\n\t\t\t\t\t\t( nearestFontStyle || fontStyle )\n\t\t\t  )?.style?.fontWeight;\n\t}\n\n\treturn { nearestFontStyle, nearestFontWeight };\n}\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * WordPress dependencies\n */\nimport { useViewportMatch } from '@wordpress/compose';\nimport { getCSSValueFromRawStyle } from '@wordpress/style-engine';\n\n/**\n * Internal dependencies\n */\nimport { getTypographyFontSizeValue } from './typography-utils';\nimport { getValueFromObjectPath } from '../../utils/object';\n\n/* Supporting data. */\nexport const ROOT_BLOCK_SELECTOR = 'body';\nexport const ROOT_CSS_PROPERTIES_SELECTOR = ':root';\n\nexport const PRESET_METADATA = [\n\t{\n\t\tpath: [ 'color', 'palette' ],\n\t\tvalueKey: 'color',\n\t\tcssVarInfix: 'color',\n\t\tclasses: [\n\t\t\t{ classSuffix: 'color', propertyName: 'color' },\n\t\t\t{\n\t\t\t\tclassSuffix: 'background-color',\n\t\t\t\tpropertyName: 'background-color',\n\t\t\t},\n\t\t\t{\n\t\t\t\tclassSuffix: 'border-color',\n\t\t\t\tpropertyName: 'border-color',\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tpath: [ 'color', 'gradients' ],\n\t\tvalueKey: 'gradient',\n\t\tcssVarInfix: 'gradient',\n\t\tclasses: [\n\t\t\t{\n\t\t\t\tclassSuffix: 'gradient-background',\n\t\t\t\tpropertyName: 'background',\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tpath: [ 'color', 'duotone' ],\n\t\tvalueKey: 'colors',\n\t\tcssVarInfix: 'duotone',\n\t\tvalueFunc: ( { slug } ) => `url( '#wp-duotone-${ slug }' )`,\n\t\tclasses: [],\n\t},\n\t{\n\t\tpath: [ 'shadow', 'presets' ],\n\t\tvalueKey: 'shadow',\n\t\tcssVarInfix: 'shadow',\n\t\tclasses: [],\n\t},\n\t{\n\t\tpath: [ 'typography', 'fontSizes' ],\n\t\tvalueFunc: ( preset, settings ) =>\n\t\t\tgetTypographyFontSizeValue( preset, settings ),\n\t\tvalueKey: 'size',\n\t\tcssVarInfix: 'font-size',\n\t\tclasses: [ { classSuffix: 'font-size', propertyName: 'font-size' } ],\n\t},\n\t{\n\t\tpath: [ 'typography', 'fontFamilies' ],\n\t\tvalueKey: 'fontFamily',\n\t\tcssVarInfix: 'font-family',\n\t\tclasses: [\n\t\t\t{ classSuffix: 'font-family', propertyName: 'font-family' },\n\t\t],\n\t},\n\t{\n\t\tpath: [ 'spacing', 'spacingSizes' ],\n\t\tvalueKey: 'size',\n\t\tcssVarInfix: 'spacing',\n\t\tvalueFunc: ( { size } ) => size,\n\t\tclasses: [],\n\t},\n];\n\nexport const STYLE_PATH_TO_CSS_VAR_INFIX = {\n\t'color.background': 'color',\n\t'color.text': 'color',\n\t'filter.duotone': 'duotone',\n\t'elements.link.color.text': 'color',\n\t'elements.link.:hover.color.text': 'color',\n\t'elements.link.typography.fontFamily': 'font-family',\n\t'elements.link.typography.fontSize': 'font-size',\n\t'elements.button.color.text': 'color',\n\t'elements.button.color.background': 'color',\n\t'elements.caption.color.text': 'color',\n\t'elements.button.typography.fontFamily': 'font-family',\n\t'elements.button.typography.fontSize': 'font-size',\n\t'elements.heading.color': 'color',\n\t'elements.heading.color.background': 'color',\n\t'elements.heading.typography.fontFamily': 'font-family',\n\t'elements.heading.gradient': 'gradient',\n\t'elements.heading.color.gradient': 'gradient',\n\t'elements.h1.color': 'color',\n\t'elements.h1.color.background': 'color',\n\t'elements.h1.typography.fontFamily': 'font-family',\n\t'elements.h1.color.gradient': 'gradient',\n\t'elements.h2.color': 'color',\n\t'elements.h2.color.background': 'color',\n\t'elements.h2.typography.fontFamily': 'font-family',\n\t'elements.h2.color.gradient': 'gradient',\n\t'elements.h3.color': 'color',\n\t'elements.h3.color.background': 'color',\n\t'elements.h3.typography.fontFamily': 'font-family',\n\t'elements.h3.color.gradient': 'gradient',\n\t'elements.h4.color': 'color',\n\t'elements.h4.color.background': 'color',\n\t'elements.h4.typography.fontFamily': 'font-family',\n\t'elements.h4.color.gradient': 'gradient',\n\t'elements.h5.color': 'color',\n\t'elements.h5.color.background': 'color',\n\t'elements.h5.typography.fontFamily': 'font-family',\n\t'elements.h5.color.gradient': 'gradient',\n\t'elements.h6.color': 'color',\n\t'elements.h6.color.background': 'color',\n\t'elements.h6.typography.fontFamily': 'font-family',\n\t'elements.h6.color.gradient': 'gradient',\n\t'color.gradient': 'gradient',\n\tshadow: 'shadow',\n\t'typography.fontSize': 'font-size',\n\t'typography.fontFamily': 'font-family',\n};\n\n// A static list of block attributes that store global style preset slugs.\nexport const STYLE_PATH_TO_PRESET_BLOCK_ATTRIBUTE = {\n\t'color.background': 'backgroundColor',\n\t'color.text': 'textColor',\n\t'color.gradient': 'gradient',\n\t'typography.fontSize': 'fontSize',\n\t'typography.fontFamily': 'fontFamily',\n};\n\nexport function useToolsPanelDropdownMenuProps() {\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\treturn ! isMobile\n\t\t? {\n\t\t\t\tpopoverProps: {\n\t\t\t\t\tplacement: 'left-start',\n\t\t\t\t\t// For non-mobile, inner sidebar width (248px) - button width (24px) - border (1px) + padding (16px) + spacing (20px)\n\t\t\t\t\toffset: 259,\n\t\t\t\t},\n\t\t  }\n\t\t: {};\n}\n\nfunction findInPresetsBy(\n\tfeatures,\n\tblockName,\n\tpresetPath,\n\tpresetProperty,\n\tpresetValueValue\n) {\n\t// Block presets take priority above root level presets.\n\tconst orderedPresetsByOrigin = [\n\t\tgetValueFromObjectPath( features, [\n\t\t\t'blocks',\n\t\t\tblockName,\n\t\t\t...presetPath,\n\t\t] ),\n\t\tgetValueFromObjectPath( features, presetPath ),\n\t];\n\n\tfor ( const presetByOrigin of orderedPresetsByOrigin ) {\n\t\tif ( presetByOrigin ) {\n\t\t\t// Preset origins ordered by priority.\n\t\t\tconst origins = [ 'custom', 'theme', 'default' ];\n\t\t\tfor ( const origin of origins ) {\n\t\t\t\tconst presets = presetByOrigin[ origin ];\n\t\t\t\tif ( presets ) {\n\t\t\t\t\tconst presetObject = presets.find(\n\t\t\t\t\t\t( preset ) =>\n\t\t\t\t\t\t\tpreset[ presetProperty ] === presetValueValue\n\t\t\t\t\t);\n\t\t\t\t\tif ( presetObject ) {\n\t\t\t\t\t\tif ( presetProperty === 'slug' ) {\n\t\t\t\t\t\t\treturn presetObject;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// If there is a highest priority preset with the same slug but different value the preset we found was overwritten and should be ignored.\n\t\t\t\t\t\tconst highestPresetObjectWithSameSlug = findInPresetsBy(\n\t\t\t\t\t\t\tfeatures,\n\t\t\t\t\t\t\tblockName,\n\t\t\t\t\t\t\tpresetPath,\n\t\t\t\t\t\t\t'slug',\n\t\t\t\t\t\t\tpresetObject.slug\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\thighestPresetObjectWithSameSlug[\n\t\t\t\t\t\t\t\tpresetProperty\n\t\t\t\t\t\t\t] === presetObject[ presetProperty ]\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn presetObject;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function getPresetVariableFromValue(\n\tfeatures,\n\tblockName,\n\tvariableStylePath,\n\tpresetPropertyValue\n) {\n\tif ( ! presetPropertyValue ) {\n\t\treturn presetPropertyValue;\n\t}\n\n\tconst cssVarInfix = STYLE_PATH_TO_CSS_VAR_INFIX[ variableStylePath ];\n\n\tconst metadata = PRESET_METADATA.find(\n\t\t( data ) => data.cssVarInfix === cssVarInfix\n\t);\n\n\tif ( ! metadata ) {\n\t\t// The property doesn't have preset data\n\t\t// so the value should be returned as it is.\n\t\treturn presetPropertyValue;\n\t}\n\tconst { valueKey, path } = metadata;\n\n\tconst presetObject = findInPresetsBy(\n\t\tfeatures,\n\t\tblockName,\n\t\tpath,\n\t\tvalueKey,\n\t\tpresetPropertyValue\n\t);\n\n\tif ( ! presetObject ) {\n\t\t// Value wasn't found in the presets,\n\t\t// so it must be a custom value.\n\t\treturn presetPropertyValue;\n\t}\n\n\treturn `var:preset|${ cssVarInfix }|${ presetObject.slug }`;\n}\n\nfunction getValueFromPresetVariable(\n\tfeatures,\n\tblockName,\n\tvariable,\n\t[ presetType, slug ]\n) {\n\tconst metadata = PRESET_METADATA.find(\n\t\t( data ) => data.cssVarInfix === presetType\n\t);\n\tif ( ! metadata ) {\n\t\treturn variable;\n\t}\n\n\tconst presetObject = findInPresetsBy(\n\t\tfeatures.settings,\n\t\tblockName,\n\t\tmetadata.path,\n\t\t'slug',\n\t\tslug\n\t);\n\n\tif ( presetObject ) {\n\t\tconst { valueKey } = metadata;\n\t\tconst result = presetObject[ valueKey ];\n\t\treturn getValueFromVariable( features, blockName, result );\n\t}\n\n\treturn variable;\n}\n\nfunction getValueFromCustomVariable( features, blockName, variable, path ) {\n\tconst result =\n\t\tgetValueFromObjectPath( features.settings, [\n\t\t\t'blocks',\n\t\t\tblockName,\n\t\t\t'custom',\n\t\t\t...path,\n\t\t] ) ??\n\t\tgetValueFromObjectPath( features.settings, [ 'custom', ...path ] );\n\tif ( ! result ) {\n\t\treturn variable;\n\t}\n\t// A variable may reference another variable so we need recursion until we find the value.\n\treturn getValueFromVariable( features, blockName, result );\n}\n\n/**\n * Attempts to fetch the value of a theme.json CSS variable.\n *\n * @param {Object}   features  GlobalStylesContext config, e.g., user, base or merged. Represents the theme.json tree.\n * @param {string}   blockName The name of a block as represented in the styles property. E.g., 'root' for root-level, and 'core/${blockName}' for blocks.\n * @param {string|*} variable  An incoming style value. A CSS var value is expected, but it could be any value.\n * @return {string|*|{ref}} The value of the CSS var, if found. If not found, the passed variable argument.\n */\nexport function getValueFromVariable( features, blockName, variable ) {\n\tif ( ! variable || typeof variable !== 'string' ) {\n\t\tif ( typeof variable?.ref === 'string' ) {\n\t\t\tvariable = getValueFromObjectPath( features, variable.ref );\n\t\t\t// Presence of another ref indicates a reference to another dynamic value.\n\t\t\t// Pointing to another dynamic value is not supported.\n\t\t\tif ( ! variable || !! variable?.ref ) {\n\t\t\t\treturn variable;\n\t\t\t}\n\t\t} else {\n\t\t\treturn variable;\n\t\t}\n\t}\n\tconst USER_VALUE_PREFIX = 'var:';\n\tconst THEME_VALUE_PREFIX = 'var(--wp--';\n\tconst THEME_VALUE_SUFFIX = ')';\n\n\tlet parsedVar;\n\n\tif ( variable.startsWith( USER_VALUE_PREFIX ) ) {\n\t\tparsedVar = variable.slice( USER_VALUE_PREFIX.length ).split( '|' );\n\t} else if (\n\t\tvariable.startsWith( THEME_VALUE_PREFIX ) &&\n\t\tvariable.endsWith( THEME_VALUE_SUFFIX )\n\t) {\n\t\tparsedVar = variable\n\t\t\t.slice( THEME_VALUE_PREFIX.length, -THEME_VALUE_SUFFIX.length )\n\t\t\t.split( '--' );\n\t} else {\n\t\t// We don't know how to parse the value: either is raw of uses complex CSS such as `calc(1px * var(--wp--variable) )`\n\t\treturn variable;\n\t}\n\n\tconst [ type, ...path ] = parsedVar;\n\tif ( type === 'preset' ) {\n\t\treturn getValueFromPresetVariable(\n\t\t\tfeatures,\n\t\t\tblockName,\n\t\t\tvariable,\n\t\t\tpath\n\t\t);\n\t}\n\tif ( type === 'custom' ) {\n\t\treturn getValueFromCustomVariable(\n\t\t\tfeatures,\n\t\t\tblockName,\n\t\t\tvariable,\n\t\t\tpath\n\t\t);\n\t}\n\treturn variable;\n}\n\n/**\n * Function that scopes a selector with another one. This works a bit like\n * SCSS nesting except the `&` operator isn't supported.\n *\n * @example\n * ```js\n * const scope = '.a, .b .c';\n * const selector = '> .x, .y';\n * const merged = scopeSelector( scope, selector );\n * // merged is '.a > .x, .a .y, .b .c > .x, .b .c .y'\n * ```\n *\n * @param {string} scope    Selector to scope to.\n * @param {string} selector Original selector.\n *\n * @return {string} Scoped selector.\n */\nexport function scopeSelector( scope, selector ) {\n\tif ( ! scope || ! selector ) {\n\t\treturn selector;\n\t}\n\n\tconst scopes = scope.split( ',' );\n\tconst selectors = selector.split( ',' );\n\n\tconst selectorsScoped = [];\n\tscopes.forEach( ( outer ) => {\n\t\tselectors.forEach( ( inner ) => {\n\t\t\tselectorsScoped.push( `${ outer.trim() } ${ inner.trim() }` );\n\t\t} );\n\t} );\n\n\treturn selectorsScoped.join( ', ' );\n}\n\n/**\n * Scopes a collection of selectors for features and subfeatures.\n *\n * @example\n * ```js\n * const scope = '.custom-scope';\n * const selectors = {\n *     color: '.wp-my-block p',\n *     typography: { fontSize: '.wp-my-block caption' },\n * };\n * const result = scopeFeatureSelector( scope, selectors );\n * // result is {\n * //     color: '.custom-scope .wp-my-block p',\n * //     typography: { fonSize: '.custom-scope .wp-my-block caption' },\n * // }\n * ```\n *\n * @param {string} scope     Selector to scope collection of selectors with.\n * @param {Object} selectors Collection of feature selectors e.g.\n *\n * @return {Object|undefined} Scoped collection of feature selectors.\n */\nexport function scopeFeatureSelectors( scope, selectors ) {\n\tif ( ! scope || ! selectors ) {\n\t\treturn;\n\t}\n\n\tconst featureSelectors = {};\n\n\tObject.entries( selectors ).forEach( ( [ feature, selector ] ) => {\n\t\tif ( typeof selector === 'string' ) {\n\t\t\tfeatureSelectors[ feature ] = scopeSelector( scope, selector );\n\t\t}\n\n\t\tif ( typeof selector === 'object' ) {\n\t\t\tfeatureSelectors[ feature ] = {};\n\n\t\t\tObject.entries( selector ).forEach(\n\t\t\t\t( [ subfeature, subfeatureSelector ] ) => {\n\t\t\t\t\tfeatureSelectors[ feature ][ subfeature ] = scopeSelector(\n\t\t\t\t\t\tscope,\n\t\t\t\t\t\tsubfeatureSelector\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t} );\n\n\treturn featureSelectors;\n}\n\n/**\n * Appends a sub-selector to an existing one.\n *\n * Given the compounded `selector` \"h1, h2, h3\"\n * and the `toAppend` selector \".some-class\" the result will be\n * \"h1.some-class, h2.some-class, h3.some-class\".\n *\n * @param {string} selector Original selector.\n * @param {string} toAppend Selector to append.\n *\n * @return {string} The new selector.\n */\nexport function appendToSelector( selector, toAppend ) {\n\tif ( ! selector.includes( ',' ) ) {\n\t\treturn selector + toAppend;\n\t}\n\tconst selectors = selector.split( ',' );\n\tconst newSelectors = selectors.map( ( sel ) => sel + toAppend );\n\treturn newSelectors.join( ',' );\n}\n\n/**\n * Compares global style variations according to their styles and settings properties.\n *\n * @example\n * ```js\n * const globalStyles = { styles: { typography: { fontSize: '10px' } }, settings: {} };\n * const variation = { styles: { typography: { fontSize: '10000px' } }, settings: {} };\n * const isEqual = areGlobalStyleConfigsEqual( globalStyles, variation );\n * // false\n * ```\n *\n * @param {Object} original  A global styles object.\n * @param {Object} variation A global styles object.\n *\n * @return {boolean} Whether `original` and `variation` match.\n */\nexport function areGlobalStyleConfigsEqual( original, variation ) {\n\tif ( typeof original !== 'object' || typeof variation !== 'object' ) {\n\t\treturn original === variation;\n\t}\n\treturn (\n\t\tfastDeepEqual( original?.styles, variation?.styles ) &&\n\t\tfastDeepEqual( original?.settings, variation?.settings )\n\t);\n}\n\n/**\n * Generates the selector for a block style variation by creating the\n * appropriate CSS class and adding it to the ancestor portion of the block's\n * selector.\n *\n * For example, take the Button block which has a compound selector:\n * `.wp-block-button .wp-block-button__link`. With a variation named 'custom',\n * the class `.is-style-custom` should be added to the `.wp-block-button`\n * ancestor only.\n *\n * This function will take into account comma separated and complex selectors.\n *\n * @param {string} variation     Name for the variation.\n * @param {string} blockSelector CSS selector for the block.\n *\n * @return {string} CSS selector for the block style variation.\n */\nexport function getBlockStyleVariationSelector( variation, blockSelector ) {\n\tconst variationClass = `.is-style-${ variation }`;\n\n\tif ( ! blockSelector ) {\n\t\treturn variationClass;\n\t}\n\n\tconst ancestorRegex = /((?::\\([^)]+\\))?\\s*)([^\\s:]+)/;\n\tconst addVariationClass = ( _match, group1, group2 ) => {\n\t\treturn group1 + group2 + variationClass;\n\t};\n\n\tconst result = blockSelector\n\t\t.split( ',' )\n\t\t.map( ( part ) => part.replace( ancestorRegex, addVariationClass ) );\n\n\treturn result.join( ',' );\n}\n\n/**\n * Looks up a theme file URI based on a relative path.\n *\n * @param {string}        file          A relative path.\n * @param {Array<Object>} themeFileURIs A collection of absolute theme file URIs and their corresponding file paths.\n * @return {string} A resolved theme file URI, if one is found in the themeFileURIs collection.\n */\nexport function getResolvedThemeFilePath( file, themeFileURIs ) {\n\tif ( ! file || ! themeFileURIs || ! Array.isArray( themeFileURIs ) ) {\n\t\treturn file;\n\t}\n\n\tconst uri = themeFileURIs.find(\n\t\t( themeFileUri ) => themeFileUri?.name === file\n\t);\n\n\tif ( ! uri?.href ) {\n\t\treturn file;\n\t}\n\n\treturn uri?.href;\n}\n\n/**\n * Resolves ref values in theme JSON.\n *\n * @param {Object|string} ruleValue A block style value that may contain a reference to a theme.json value.\n * @param {Object}        tree      A theme.json object.\n * @return {*} The resolved value or incoming ruleValue.\n */\nexport function getResolvedRefValue( ruleValue, tree ) {\n\tif ( ! ruleValue || ! tree ) {\n\t\treturn ruleValue;\n\t}\n\n\t/*\n\t * Where the rule value is an object with a 'ref' property pointing\n\t * to a path, this converts that path into the value at that path.\n\t * For example: { \"ref\": \"style.color.background\" } => \"#fff\".\n\t */\n\tif ( typeof ruleValue !== 'string' && ruleValue?.ref ) {\n\t\tconst resolvedRuleValue = getCSSValueFromRawStyle(\n\t\t\tgetValueFromObjectPath( tree, ruleValue.ref )\n\t\t);\n\n\t\t/*\n\t\t * Presence of another ref indicates a reference to another dynamic value.\n\t\t * Pointing to another dynamic value is not supported.\n\t\t */\n\t\tif ( resolvedRuleValue?.ref ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif ( resolvedRuleValue === undefined ) {\n\t\t\treturn ruleValue;\n\t\t}\n\n\t\treturn resolvedRuleValue;\n\t}\n\treturn ruleValue;\n}\n\n/**\n * Resolves ref and relative path values in theme JSON.\n *\n * @param {Object|string} ruleValue A block style value that may contain a reference to a theme.json value.\n * @param {Object}        tree      A theme.json object.\n * @return {*} The resolved value or incoming ruleValue.\n */\nexport function getResolvedValue( ruleValue, tree ) {\n\tif ( ! ruleValue || ! tree ) {\n\t\treturn ruleValue;\n\t}\n\n\t// Resolve ref values.\n\tconst resolvedValue = getResolvedRefValue( ruleValue, tree );\n\n\t// Resolve relative paths.\n\tif ( resolvedValue?.url ) {\n\t\tresolvedValue.url = getResolvedThemeFilePath(\n\t\t\tresolvedValue.url,\n\t\t\ttree?._links?.[ 'wp:theme-file' ]\n\t\t);\n\t}\n\n\treturn resolvedValue;\n}\n","/**\n * WordPress dependencies\n */\nimport { createContext } from '@wordpress/element';\n\nexport const DEFAULT_GLOBAL_STYLES_CONTEXT = {\n\tuser: {},\n\tbase: {},\n\tmerged: {},\n\tsetUserConfig: () => {},\n};\n\nexport const GlobalStylesContext = createContext(\n\tDEFAULT_GLOBAL_STYLES_CONTEXT\n);\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * WordPress dependencies\n */\nimport { useContext, useCallback, useMemo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromVariable, getPresetVariableFromValue } from './utils';\nimport { getValueFromObjectPath, setImmutably } from '../../utils/object';\nimport { GlobalStylesContext } from './context';\nimport { unlock } from '../../lock-unlock';\n\nconst EMPTY_CONFIG = { settings: {}, styles: {} };\n\nconst VALID_SETTINGS = [\n\t'appearanceTools',\n\t'useRootPaddingAwareAlignments',\n\t'background.backgroundImage',\n\t'background.backgroundRepeat',\n\t'background.backgroundSize',\n\t'background.backgroundPosition',\n\t'border.color',\n\t'border.radius',\n\t'border.style',\n\t'border.width',\n\t'shadow.presets',\n\t'shadow.defaultPresets',\n\t'color.background',\n\t'color.button',\n\t'color.caption',\n\t'color.custom',\n\t'color.customDuotone',\n\t'color.customGradient',\n\t'color.defaultDuotone',\n\t'color.defaultGradients',\n\t'color.defaultPalette',\n\t'color.duotone',\n\t'color.gradients',\n\t'color.heading',\n\t'color.link',\n\t'color.palette',\n\t'color.text',\n\t'custom',\n\t'dimensions.aspectRatio',\n\t'dimensions.minHeight',\n\t'layout.contentSize',\n\t'layout.definitions',\n\t'layout.wideSize',\n\t'lightbox.enabled',\n\t'lightbox.allowEditing',\n\t'position.fixed',\n\t'position.sticky',\n\t'spacing.customSpacingSize',\n\t'spacing.defaultSpacingSizes',\n\t'spacing.spacingSizes',\n\t'spacing.spacingScale',\n\t'spacing.blockGap',\n\t'spacing.margin',\n\t'spacing.padding',\n\t'spacing.units',\n\t'typography.fluid',\n\t'typography.customFontSize',\n\t'typography.defaultFontSizes',\n\t'typography.dropCap',\n\t'typography.fontFamilies',\n\t'typography.fontSizes',\n\t'typography.fontStyle',\n\t'typography.fontWeight',\n\t'typography.letterSpacing',\n\t'typography.lineHeight',\n\t'typography.textAlign',\n\t'typography.textColumns',\n\t'typography.textDecoration',\n\t'typography.textTransform',\n\t'typography.writingMode',\n];\n\nexport const useGlobalStylesReset = () => {\n\tconst { user, setUserConfig } = useContext( GlobalStylesContext );\n\tconst config = {\n\t\tsettings: user.settings,\n\t\tstyles: user.styles,\n\t};\n\tconst canReset = !! config && ! fastDeepEqual( config, EMPTY_CONFIG );\n\treturn [\n\t\tcanReset,\n\t\tuseCallback( () => setUserConfig( EMPTY_CONFIG ), [ setUserConfig ] ),\n\t];\n};\n\nexport function useGlobalSetting( propertyPath, blockName, source = 'all' ) {\n\tconst { setUserConfig, ...configs } = useContext( GlobalStylesContext );\n\tconst appendedBlockPath = blockName ? '.blocks.' + blockName : '';\n\tconst appendedPropertyPath = propertyPath ? '.' + propertyPath : '';\n\tconst contextualPath = `settings${ appendedBlockPath }${ appendedPropertyPath }`;\n\tconst globalPath = `settings${ appendedPropertyPath }`;\n\tconst sourceKey = source === 'all' ? 'merged' : source;\n\n\tconst settingValue = useMemo( () => {\n\t\tconst configToUse = configs[ sourceKey ];\n\t\tif ( ! configToUse ) {\n\t\t\tthrow 'Unsupported source';\n\t\t}\n\n\t\tif ( propertyPath ) {\n\t\t\treturn (\n\t\t\t\tgetValueFromObjectPath( configToUse, contextualPath ) ??\n\t\t\t\tgetValueFromObjectPath( configToUse, globalPath )\n\t\t\t);\n\t\t}\n\n\t\tlet result = {};\n\t\tVALID_SETTINGS.forEach( ( setting ) => {\n\t\t\tconst value =\n\t\t\t\tgetValueFromObjectPath(\n\t\t\t\t\tconfigToUse,\n\t\t\t\t\t`settings${ appendedBlockPath }.${ setting }`\n\t\t\t\t) ??\n\t\t\t\tgetValueFromObjectPath( configToUse, `settings.${ setting }` );\n\t\t\tif ( value !== undefined ) {\n\t\t\t\tresult = setImmutably( result, setting.split( '.' ), value );\n\t\t\t}\n\t\t} );\n\t\treturn result;\n\t}, [\n\t\tconfigs,\n\t\tsourceKey,\n\t\tpropertyPath,\n\t\tcontextualPath,\n\t\tglobalPath,\n\t\tappendedBlockPath,\n\t] );\n\n\tconst setSetting = ( newValue ) => {\n\t\tsetUserConfig( ( currentConfig ) =>\n\t\t\tsetImmutably( currentConfig, contextualPath.split( '.' ), newValue )\n\t\t);\n\t};\n\treturn [ settingValue, setSetting ];\n}\n\nexport function useGlobalStyle(\n\tpath,\n\tblockName,\n\tsource = 'all',\n\t{ shouldDecodeEncode = true } = {}\n) {\n\tconst {\n\t\tmerged: mergedConfig,\n\t\tbase: baseConfig,\n\t\tuser: userConfig,\n\t\tsetUserConfig,\n\t} = useContext( GlobalStylesContext );\n\tconst appendedPath = path ? '.' + path : '';\n\tconst finalPath = ! blockName\n\t\t? `styles${ appendedPath }`\n\t\t: `styles.blocks.${ blockName }${ appendedPath }`;\n\n\tconst setStyle = ( newValue ) => {\n\t\tsetUserConfig( ( currentConfig ) =>\n\t\t\tsetImmutably(\n\t\t\t\tcurrentConfig,\n\t\t\t\tfinalPath.split( '.' ),\n\t\t\t\tshouldDecodeEncode\n\t\t\t\t\t? getPresetVariableFromValue(\n\t\t\t\t\t\t\tmergedConfig.settings,\n\t\t\t\t\t\t\tblockName,\n\t\t\t\t\t\t\tpath,\n\t\t\t\t\t\t\tnewValue\n\t\t\t\t\t  )\n\t\t\t\t\t: newValue\n\t\t\t)\n\t\t);\n\t};\n\n\tlet rawResult, result;\n\tswitch ( source ) {\n\t\tcase 'all':\n\t\t\trawResult = getValueFromObjectPath( mergedConfig, finalPath );\n\t\t\tresult = shouldDecodeEncode\n\t\t\t\t? getValueFromVariable( mergedConfig, blockName, rawResult )\n\t\t\t\t: rawResult;\n\t\t\tbreak;\n\t\tcase 'user':\n\t\t\trawResult = getValueFromObjectPath( userConfig, finalPath );\n\t\t\tresult = shouldDecodeEncode\n\t\t\t\t? getValueFromVariable( mergedConfig, blockName, rawResult )\n\t\t\t\t: rawResult;\n\t\t\tbreak;\n\t\tcase 'base':\n\t\t\trawResult = getValueFromObjectPath( baseConfig, finalPath );\n\t\t\tresult = shouldDecodeEncode\n\t\t\t\t? getValueFromVariable( baseConfig, blockName, rawResult )\n\t\t\t\t: rawResult;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow 'Unsupported source';\n\t}\n\n\treturn [ result, setStyle ];\n}\n\n/**\n * React hook that overrides a global settings object with block and element specific settings.\n *\n * @param {Object}     parentSettings Settings object.\n * @param {blockName?} blockName      Block name.\n * @param {element?}   element        Element name.\n *\n * @return {Object} Merge of settings and supports.\n */\nexport function useSettingsForBlockElement(\n\tparentSettings,\n\tblockName,\n\telement\n) {\n\tconst { supportedStyles, supports } = useSelect(\n\t\t( select ) => {\n\t\t\treturn {\n\t\t\t\tsupportedStyles: unlock(\n\t\t\t\t\tselect( blocksStore )\n\t\t\t\t).getSupportedStyles( blockName, element ),\n\t\t\t\tsupports:\n\t\t\t\t\tselect( blocksStore ).getBlockType( blockName )?.supports,\n\t\t\t};\n\t\t},\n\t\t[ blockName, element ]\n\t);\n\n\treturn useMemo( () => {\n\t\tconst updatedSettings = { ...parentSettings };\n\n\t\tif ( ! supportedStyles.includes( 'fontSize' ) ) {\n\t\t\tupdatedSettings.typography = {\n\t\t\t\t...updatedSettings.typography,\n\t\t\t\tfontSizes: {},\n\t\t\t\tcustomFontSize: false,\n\t\t\t\tdefaultFontSizes: false,\n\t\t\t};\n\t\t}\n\n\t\tif ( ! supportedStyles.includes( 'fontFamily' ) ) {\n\t\t\tupdatedSettings.typography = {\n\t\t\t\t...updatedSettings.typography,\n\t\t\t\tfontFamilies: {},\n\t\t\t};\n\t\t}\n\n\t\tupdatedSettings.color = {\n\t\t\t...updatedSettings.color,\n\t\t\ttext:\n\t\t\t\tupdatedSettings.color?.text &&\n\t\t\t\tsupportedStyles.includes( 'color' ),\n\t\t\tbackground:\n\t\t\t\tupdatedSettings.color?.background &&\n\t\t\t\t( supportedStyles.includes( 'background' ) ||\n\t\t\t\t\tsupportedStyles.includes( 'backgroundColor' ) ),\n\t\t\tbutton:\n\t\t\t\tupdatedSettings.color?.button &&\n\t\t\t\tsupportedStyles.includes( 'buttonColor' ),\n\t\t\theading:\n\t\t\t\tupdatedSettings.color?.heading &&\n\t\t\t\tsupportedStyles.includes( 'headingColor' ),\n\t\t\tlink:\n\t\t\t\tupdatedSettings.color?.link &&\n\t\t\t\tsupportedStyles.includes( 'linkColor' ),\n\t\t\tcaption:\n\t\t\t\tupdatedSettings.color?.caption &&\n\t\t\t\tsupportedStyles.includes( 'captionColor' ),\n\t\t};\n\n\t\t// Some blocks can enable background colors but disable gradients.\n\t\tif ( ! supportedStyles.includes( 'background' ) ) {\n\t\t\tupdatedSettings.color.gradients = [];\n\t\t\tupdatedSettings.color.customGradient = false;\n\t\t}\n\n\t\t// If filters are not supported by the block/element, disable duotone.\n\t\tif ( ! supportedStyles.includes( 'filter' ) ) {\n\t\t\tupdatedSettings.color.defaultDuotone = false;\n\t\t\tupdatedSettings.color.customDuotone = false;\n\t\t}\n\n\t\t[\n\t\t\t'lineHeight',\n\t\t\t'fontStyle',\n\t\t\t'fontWeight',\n\t\t\t'letterSpacing',\n\t\t\t'textAlign',\n\t\t\t'textTransform',\n\t\t\t'textDecoration',\n\t\t\t'writingMode',\n\t\t].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.typography = {\n\t\t\t\t\t...updatedSettings.typography,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\t// The column-count style is named text column to reduce confusion with\n\t\t// the columns block and manage expectations from the support.\n\t\t// See: https://github.com/WordPress/gutenberg/pull/33587\n\t\tif ( ! supportedStyles.includes( 'columnCount' ) ) {\n\t\t\tupdatedSettings.typography = {\n\t\t\t\t...updatedSettings.typography,\n\t\t\t\ttextColumns: false,\n\t\t\t};\n\t\t}\n\n\t\t[ 'contentSize', 'wideSize' ].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.layout = {\n\t\t\t\t\t...updatedSettings.layout,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\t[ 'padding', 'margin', 'blockGap' ].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.spacing = {\n\t\t\t\t\t...updatedSettings.spacing,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst sides = Array.isArray( supports?.spacing?.[ key ] )\n\t\t\t\t? supports?.spacing?.[ key ]\n\t\t\t\t: supports?.spacing?.[ key ]?.sides;\n\t\t\t// Check if spacing type is supported before adding sides.\n\t\t\tif ( sides?.length && updatedSettings.spacing?.[ key ] ) {\n\t\t\t\tupdatedSettings.spacing = {\n\t\t\t\t\t...updatedSettings.spacing,\n\t\t\t\t\t[ key ]: {\n\t\t\t\t\t\t...updatedSettings.spacing?.[ key ],\n\t\t\t\t\t\tsides,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\t[ 'aspectRatio', 'minHeight' ].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.dimensions = {\n\t\t\t\t\t...updatedSettings.dimensions,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\t[ 'radius', 'color', 'style', 'width' ].forEach( ( key ) => {\n\t\t\tif (\n\t\t\t\t! supportedStyles.includes(\n\t\t\t\t\t'border' + key.charAt( 0 ).toUpperCase() + key.slice( 1 )\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tupdatedSettings.border = {\n\t\t\t\t\t...updatedSettings.border,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\t[ 'backgroundImage', 'backgroundSize' ].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.background = {\n\t\t\t\t\t...updatedSettings.background,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\tupdatedSettings.shadow = supportedStyles.includes( 'shadow' )\n\t\t\t? updatedSettings.shadow\n\t\t\t: false;\n\n\t\t// Text alignment is only available for blocks.\n\t\tif ( element ) {\n\t\t\tupdatedSettings.typography.textAlign = false;\n\t\t}\n\n\t\treturn updatedSettings;\n\t}, [ parentSettings, supportedStyles, supports, element ] );\n}\n\nexport function useColorsPerOrigin( settings ) {\n\tconst customColors = settings?.color?.palette?.custom;\n\tconst themeColors = settings?.color?.palette?.theme;\n\tconst defaultColors = settings?.color?.palette?.default;\n\tconst shouldDisplayDefaultColors = settings?.color?.defaultPalette;\n\n\treturn useMemo( () => {\n\t\tconst result = [];\n\t\tif ( themeColors && themeColors.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Theme',\n\t\t\t\t\t'Indicates this palette comes from the theme.'\n\t\t\t\t),\n\t\t\t\tcolors: themeColors,\n\t\t\t} );\n\t\t}\n\t\tif (\n\t\t\tshouldDisplayDefaultColors &&\n\t\t\tdefaultColors &&\n\t\t\tdefaultColors.length\n\t\t) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Default',\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\n\t\t\t\t),\n\t\t\t\tcolors: defaultColors,\n\t\t\t} );\n\t\t}\n\t\tif ( customColors && customColors.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Custom',\n\t\t\t\t\t'Indicates this palette is created by the user.'\n\t\t\t\t),\n\t\t\t\tcolors: customColors,\n\t\t\t} );\n\t\t}\n\t\treturn result;\n\t}, [\n\t\tcustomColors,\n\t\tthemeColors,\n\t\tdefaultColors,\n\t\tshouldDisplayDefaultColors,\n\t] );\n}\n\nexport function useGradientsPerOrigin( settings ) {\n\tconst customGradients = settings?.color?.gradients?.custom;\n\tconst themeGradients = settings?.color?.gradients?.theme;\n\tconst defaultGradients = settings?.color?.gradients?.default;\n\tconst shouldDisplayDefaultGradients = settings?.color?.defaultGradients;\n\n\treturn useMemo( () => {\n\t\tconst result = [];\n\t\tif ( themeGradients && themeGradients.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Theme',\n\t\t\t\t\t'Indicates this palette comes from the theme.'\n\t\t\t\t),\n\t\t\t\tgradients: themeGradients,\n\t\t\t} );\n\t\t}\n\t\tif (\n\t\t\tshouldDisplayDefaultGradients &&\n\t\t\tdefaultGradients &&\n\t\t\tdefaultGradients.length\n\t\t) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Default',\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\n\t\t\t\t),\n\t\t\t\tgradients: defaultGradients,\n\t\t\t} );\n\t\t}\n\t\tif ( customGradients && customGradients.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Custom',\n\t\t\t\t\t'Indicates this palette is created by the user.'\n\t\t\t\t),\n\t\t\t\tgradients: customGradients,\n\t\t\t} );\n\t\t}\n\t\treturn result;\n\t}, [\n\t\tcustomGradients,\n\t\tthemeGradients,\n\t\tdefaultGradients,\n\t\tshouldDisplayDefaultGradients,\n\t] );\n}\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","/**\n * WordPress dependencies\n */\nimport { getBlockSupport } from '@wordpress/blocks';\nimport { memo, useMemo, useEffect, useId, useState } from '@wordpress/element';\nimport { useDispatch, useRegistry } from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tuseBlockEditContext,\n\tmayDisplayControlsKey,\n\tmayDisplayParentControlsKey,\n} from '../components/block-edit/context';\nimport { useSettings } from '../components';\nimport { useSettingsForBlockElement } from '../components/global-styles/hooks';\nimport { getValueFromObjectPath, setImmutably } from '../utils/object';\nimport { store as blockEditorStore } from '../store';\nimport { unlock } from '../lock-unlock';\n/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * Removed falsy values from nested object.\n *\n * @param {*} object\n * @return {*} Object cleaned from falsy values\n */\nexport const cleanEmptyObject = ( object ) => {\n\tif (\n\t\tobject === null ||\n\t\ttypeof object !== 'object' ||\n\t\tArray.isArray( object )\n\t) {\n\t\treturn object;\n\t}\n\n\tconst cleanedNestedObjects = Object.entries( object )\n\t\t.map( ( [ key, value ] ) => [ key, cleanEmptyObject( value ) ] )\n\t\t.filter( ( [ , value ] ) => value !== undefined );\n\treturn ! cleanedNestedObjects.length\n\t\t? undefined\n\t\t: Object.fromEntries( cleanedNestedObjects );\n};\n\nexport function transformStyles(\n\tactiveSupports,\n\tmigrationPaths,\n\tresult,\n\tsource,\n\tindex,\n\tresults\n) {\n\t// If there are no active supports return early.\n\tif (\n\t\tObject.values( activeSupports ?? {} ).every(\n\t\t\t( isActive ) => ! isActive\n\t\t)\n\t) {\n\t\treturn result;\n\t}\n\t// If the condition verifies we are probably in the presence of a wrapping transform\n\t// e.g: nesting paragraphs in a group or columns and in that case the styles should not be transformed.\n\tif ( results.length === 1 && result.innerBlocks.length === source.length ) {\n\t\treturn result;\n\t}\n\t// For cases where we have a transform from one block to multiple blocks\n\t// or multiple blocks to one block we apply the styles of the first source block\n\t// to the result(s).\n\tlet referenceBlockAttributes = source[ 0 ]?.attributes;\n\t// If we are in presence of transform between more than one block in the source\n\t// that has more than one block in the result\n\t// we apply the styles on source N to the result N,\n\t// if source N does not exists we do nothing.\n\tif ( results.length > 1 && source.length > 1 ) {\n\t\tif ( source[ index ] ) {\n\t\t\treferenceBlockAttributes = source[ index ]?.attributes;\n\t\t} else {\n\t\t\treturn result;\n\t\t}\n\t}\n\tlet returnBlock = result;\n\tObject.entries( activeSupports ).forEach( ( [ support, isActive ] ) => {\n\t\tif ( isActive ) {\n\t\t\tmigrationPaths[ support ].forEach( ( path ) => {\n\t\t\t\tconst styleValue = getValueFromObjectPath(\n\t\t\t\t\treferenceBlockAttributes,\n\t\t\t\t\tpath\n\t\t\t\t);\n\t\t\t\tif ( styleValue ) {\n\t\t\t\t\treturnBlock = {\n\t\t\t\t\t\t...returnBlock,\n\t\t\t\t\t\tattributes: setImmutably(\n\t\t\t\t\t\t\treturnBlock.attributes,\n\t\t\t\t\t\t\tpath,\n\t\t\t\t\t\t\tstyleValue\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n\treturn returnBlock;\n}\n\n/**\n * Check whether serialization of specific block support feature or set should\n * be skipped.\n *\n * @param {string|Object} blockNameOrType Block name or block type object.\n * @param {string}        featureSet      Name of block support feature set.\n * @param {string}        feature         Name of the individual feature to check.\n *\n * @return {boolean} Whether serialization should occur.\n */\nexport function shouldSkipSerialization(\n\tblockNameOrType,\n\tfeatureSet,\n\tfeature\n) {\n\tconst support = getBlockSupport( blockNameOrType, featureSet );\n\tconst skipSerialization = support?.__experimentalSkipSerialization;\n\n\tif ( Array.isArray( skipSerialization ) ) {\n\t\treturn skipSerialization.includes( feature );\n\t}\n\n\treturn skipSerialization;\n}\n\nconst pendingStyleOverrides = new WeakMap();\n\n/**\n * Override a block editor settings style. Leave the ID blank to create a new\n * style.\n *\n * @param {Object}  override     Override object.\n * @param {?string} override.id  Id of the style override, leave blank to create\n *                               a new style.\n * @param {string}  override.css CSS to apply.\n */\nexport function useStyleOverride( { id, css } ) {\n\treturn usePrivateStyleOverride( { id, css } );\n}\n\nexport function usePrivateStyleOverride( {\n\tid,\n\tcss,\n\tassets,\n\t__unstableType,\n\tvariation,\n\tclientId,\n} = {} ) {\n\tconst { setStyleOverride, deleteStyleOverride } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\tconst registry = useRegistry();\n\tconst fallbackId = useId();\n\tuseEffect( () => {\n\t\t// Unmount if there is CSS and assets are empty.\n\t\tif ( ! css && ! assets ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst _id = id || fallbackId;\n\t\tconst override = {\n\t\t\tid,\n\t\t\tcss,\n\t\t\tassets,\n\t\t\t__unstableType,\n\t\t\tvariation,\n\t\t\tclientId,\n\t\t};\n\t\t// Batch updates to style overrides to avoid triggering cascading renders\n\t\t// for each style override block included in a tree and optimize initial render.\n\t\tif ( ! pendingStyleOverrides.get( registry ) ) {\n\t\t\tpendingStyleOverrides.set( registry, [] );\n\t\t}\n\t\tpendingStyleOverrides.get( registry ).push( [ _id, override ] );\n\t\twindow.queueMicrotask( () => {\n\t\t\tif ( pendingStyleOverrides.get( registry )?.length ) {\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\tpendingStyleOverrides.get( registry ).forEach( ( args ) => {\n\t\t\t\t\t\tsetStyleOverride( ...args );\n\t\t\t\t\t} );\n\t\t\t\t\tpendingStyleOverrides.set( registry, [] );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\treturn () => {\n\t\t\tconst isPending = pendingStyleOverrides\n\t\t\t\t.get( registry )\n\t\t\t\t?.find( ( [ currentId ] ) => currentId === _id );\n\t\t\tif ( isPending ) {\n\t\t\t\tpendingStyleOverrides.set(\n\t\t\t\t\tregistry,\n\t\t\t\t\tpendingStyleOverrides\n\t\t\t\t\t\t.get( registry )\n\t\t\t\t\t\t.filter( ( [ currentId ] ) => currentId !== _id )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdeleteStyleOverride( _id );\n\t\t\t}\n\t\t};\n\t}, [\n\t\tid,\n\t\tcss,\n\t\tclientId,\n\t\tassets,\n\t\t__unstableType,\n\t\tfallbackId,\n\t\tsetStyleOverride,\n\t\tdeleteStyleOverride,\n\t\tregistry,\n\t] );\n}\n\n/**\n * Based on the block and its context, returns an object of all the block settings.\n * This object can be passed as a prop to all the Styles UI components\n * (TypographyPanel, DimensionsPanel...).\n *\n * @param {string} name         Block name.\n * @param {*}      parentLayout Parent layout.\n *\n * @return {Object} Settings object.\n */\nexport function useBlockSettings( name, parentLayout ) {\n\tconst [\n\t\tbackgroundImage,\n\t\tbackgroundSize,\n\t\tcustomFontFamilies,\n\t\tdefaultFontFamilies,\n\t\tthemeFontFamilies,\n\t\tdefaultFontSizesEnabled,\n\t\tcustomFontSizes,\n\t\tdefaultFontSizes,\n\t\tthemeFontSizes,\n\t\tcustomFontSize,\n\t\tfontStyle,\n\t\tfontWeight,\n\t\tlineHeight,\n\t\ttextAlign,\n\t\ttextColumns,\n\t\ttextDecoration,\n\t\twritingMode,\n\t\ttextTransform,\n\t\tletterSpacing,\n\t\tpadding,\n\t\tmargin,\n\t\tblockGap,\n\t\tdefaultSpacingSizesEnabled,\n\t\tcustomSpacingSize,\n\t\tuserSpacingSizes,\n\t\tdefaultSpacingSizes,\n\t\tthemeSpacingSizes,\n\t\tunits,\n\t\taspectRatio,\n\t\tminHeight,\n\t\tlayout,\n\t\tborderColor,\n\t\tborderRadius,\n\t\tborderStyle,\n\t\tborderWidth,\n\t\tcustomColorsEnabled,\n\t\tcustomColors,\n\t\tcustomDuotone,\n\t\tthemeColors,\n\t\tdefaultColors,\n\t\tdefaultPalette,\n\t\tdefaultDuotone,\n\t\tuserDuotonePalette,\n\t\tthemeDuotonePalette,\n\t\tdefaultDuotonePalette,\n\t\tuserGradientPalette,\n\t\tthemeGradientPalette,\n\t\tdefaultGradientPalette,\n\t\tdefaultGradients,\n\t\tareCustomGradientsEnabled,\n\t\tisBackgroundEnabled,\n\t\tisLinkEnabled,\n\t\tisTextEnabled,\n\t\tisHeadingEnabled,\n\t\tisButtonEnabled,\n\t\tshadow,\n\t] = useSettings(\n\t\t'background.backgroundImage',\n\t\t'background.backgroundSize',\n\t\t'typography.fontFamilies.custom',\n\t\t'typography.fontFamilies.default',\n\t\t'typography.fontFamilies.theme',\n\t\t'typography.defaultFontSizes',\n\t\t'typography.fontSizes.custom',\n\t\t'typography.fontSizes.default',\n\t\t'typography.fontSizes.theme',\n\t\t'typography.customFontSize',\n\t\t'typography.fontStyle',\n\t\t'typography.fontWeight',\n\t\t'typography.lineHeight',\n\t\t'typography.textAlign',\n\t\t'typography.textColumns',\n\t\t'typography.textDecoration',\n\t\t'typography.writingMode',\n\t\t'typography.textTransform',\n\t\t'typography.letterSpacing',\n\t\t'spacing.padding',\n\t\t'spacing.margin',\n\t\t'spacing.blockGap',\n\t\t'spacing.defaultSpacingSizes',\n\t\t'spacing.customSpacingSize',\n\t\t'spacing.spacingSizes.custom',\n\t\t'spacing.spacingSizes.default',\n\t\t'spacing.spacingSizes.theme',\n\t\t'spacing.units',\n\t\t'dimensions.aspectRatio',\n\t\t'dimensions.minHeight',\n\t\t'layout',\n\t\t'border.color',\n\t\t'border.radius',\n\t\t'border.style',\n\t\t'border.width',\n\t\t'color.custom',\n\t\t'color.palette.custom',\n\t\t'color.customDuotone',\n\t\t'color.palette.theme',\n\t\t'color.palette.default',\n\t\t'color.defaultPalette',\n\t\t'color.defaultDuotone',\n\t\t'color.duotone.custom',\n\t\t'color.duotone.theme',\n\t\t'color.duotone.default',\n\t\t'color.gradients.custom',\n\t\t'color.gradients.theme',\n\t\t'color.gradients.default',\n\t\t'color.defaultGradients',\n\t\t'color.customGradient',\n\t\t'color.background',\n\t\t'color.link',\n\t\t'color.text',\n\t\t'color.heading',\n\t\t'color.button',\n\t\t'shadow'\n\t);\n\n\tconst rawSettings = useMemo( () => {\n\t\treturn {\n\t\t\tbackground: {\n\t\t\t\tbackgroundImage,\n\t\t\t\tbackgroundSize,\n\t\t\t},\n\t\t\tcolor: {\n\t\t\t\tpalette: {\n\t\t\t\t\tcustom: customColors,\n\t\t\t\t\ttheme: themeColors,\n\t\t\t\t\tdefault: defaultColors,\n\t\t\t\t},\n\t\t\t\tgradients: {\n\t\t\t\t\tcustom: userGradientPalette,\n\t\t\t\t\ttheme: themeGradientPalette,\n\t\t\t\t\tdefault: defaultGradientPalette,\n\t\t\t\t},\n\t\t\t\tduotone: {\n\t\t\t\t\tcustom: userDuotonePalette,\n\t\t\t\t\ttheme: themeDuotonePalette,\n\t\t\t\t\tdefault: defaultDuotonePalette,\n\t\t\t\t},\n\t\t\t\tdefaultGradients,\n\t\t\t\tdefaultPalette,\n\t\t\t\tdefaultDuotone,\n\t\t\t\tcustom: customColorsEnabled,\n\t\t\t\tcustomGradient: areCustomGradientsEnabled,\n\t\t\t\tcustomDuotone,\n\t\t\t\tbackground: isBackgroundEnabled,\n\t\t\t\tlink: isLinkEnabled,\n\t\t\t\theading: isHeadingEnabled,\n\t\t\t\tbutton: isButtonEnabled,\n\t\t\t\ttext: isTextEnabled,\n\t\t\t},\n\t\t\ttypography: {\n\t\t\t\tfontFamilies: {\n\t\t\t\t\tcustom: customFontFamilies,\n\t\t\t\t\tdefault: defaultFontFamilies,\n\t\t\t\t\ttheme: themeFontFamilies,\n\t\t\t\t},\n\t\t\t\tfontSizes: {\n\t\t\t\t\tcustom: customFontSizes,\n\t\t\t\t\tdefault: defaultFontSizes,\n\t\t\t\t\ttheme: themeFontSizes,\n\t\t\t\t},\n\t\t\t\tcustomFontSize,\n\t\t\t\tdefaultFontSizes: defaultFontSizesEnabled,\n\t\t\t\tfontStyle,\n\t\t\t\tfontWeight,\n\t\t\t\tlineHeight,\n\t\t\t\ttextAlign,\n\t\t\t\ttextColumns,\n\t\t\t\ttextDecoration,\n\t\t\t\ttextTransform,\n\t\t\t\tletterSpacing,\n\t\t\t\twritingMode,\n\t\t\t},\n\t\t\tspacing: {\n\t\t\t\tspacingSizes: {\n\t\t\t\t\tcustom: userSpacingSizes,\n\t\t\t\t\tdefault: defaultSpacingSizes,\n\t\t\t\t\ttheme: themeSpacingSizes,\n\t\t\t\t},\n\t\t\t\tcustomSpacingSize,\n\t\t\t\tdefaultSpacingSizes: defaultSpacingSizesEnabled,\n\t\t\t\tpadding,\n\t\t\t\tmargin,\n\t\t\t\tblockGap,\n\t\t\t\tunits,\n\t\t\t},\n\t\t\tborder: {\n\t\t\t\tcolor: borderColor,\n\t\t\t\tradius: borderRadius,\n\t\t\t\tstyle: borderStyle,\n\t\t\t\twidth: borderWidth,\n\t\t\t},\n\t\t\tdimensions: {\n\t\t\t\taspectRatio,\n\t\t\t\tminHeight,\n\t\t\t},\n\t\t\tlayout,\n\t\t\tparentLayout,\n\t\t\tshadow,\n\t\t};\n\t}, [\n\t\tbackgroundImage,\n\t\tbackgroundSize,\n\t\tcustomFontFamilies,\n\t\tdefaultFontFamilies,\n\t\tthemeFontFamilies,\n\t\tdefaultFontSizesEnabled,\n\t\tcustomFontSizes,\n\t\tdefaultFontSizes,\n\t\tthemeFontSizes,\n\t\tcustomFontSize,\n\t\tfontStyle,\n\t\tfontWeight,\n\t\tlineHeight,\n\t\ttextAlign,\n\t\ttextColumns,\n\t\ttextDecoration,\n\t\ttextTransform,\n\t\tletterSpacing,\n\t\twritingMode,\n\t\tpadding,\n\t\tmargin,\n\t\tblockGap,\n\t\tdefaultSpacingSizesEnabled,\n\t\tcustomSpacingSize,\n\t\tuserSpacingSizes,\n\t\tdefaultSpacingSizes,\n\t\tthemeSpacingSizes,\n\t\tunits,\n\t\taspectRatio,\n\t\tminHeight,\n\t\tlayout,\n\t\tparentLayout,\n\t\tborderColor,\n\t\tborderRadius,\n\t\tborderStyle,\n\t\tborderWidth,\n\t\tcustomColorsEnabled,\n\t\tcustomColors,\n\t\tcustomDuotone,\n\t\tthemeColors,\n\t\tdefaultColors,\n\t\tdefaultPalette,\n\t\tdefaultDuotone,\n\t\tuserDuotonePalette,\n\t\tthemeDuotonePalette,\n\t\tdefaultDuotonePalette,\n\t\tuserGradientPalette,\n\t\tthemeGradientPalette,\n\t\tdefaultGradientPalette,\n\t\tdefaultGradients,\n\t\tareCustomGradientsEnabled,\n\t\tisBackgroundEnabled,\n\t\tisLinkEnabled,\n\t\tisTextEnabled,\n\t\tisHeadingEnabled,\n\t\tisButtonEnabled,\n\t\tshadow,\n\t] );\n\n\treturn useSettingsForBlockElement( rawSettings, name );\n}\n\nexport function createBlockEditFilter( features ) {\n\t// We don't want block controls to re-render when typing inside a block.\n\t// `memo` will prevent re-renders unless props change, so only pass the\n\t// needed props and not the whole attributes object.\n\tfeatures = features.map( ( settings ) => {\n\t\treturn { ...settings, Edit: memo( settings.edit ) };\n\t} );\n\tconst withBlockEditHooks = createHigherOrderComponent(\n\t\t( OriginalBlockEdit ) => ( props ) => {\n\t\t\tconst context = useBlockEditContext();\n\t\t\t// CAUTION: code added before this line will be executed for all\n\t\t\t// blocks, not just those that support the feature! Code added\n\t\t\t// above this line should be carefully evaluated for its impact on\n\t\t\t// performance.\n\t\t\treturn [\n\t\t\t\t...features.map( ( feature, i ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tEdit,\n\t\t\t\t\t\thasSupport,\n\t\t\t\t\t\tattributeKeys = [],\n\t\t\t\t\t\tshareWithChildBlocks,\n\t\t\t\t\t} = feature;\n\t\t\t\t\tconst shouldDisplayControls =\n\t\t\t\t\t\tcontext[ mayDisplayControlsKey ] ||\n\t\t\t\t\t\t( context[ mayDisplayParentControlsKey ] &&\n\t\t\t\t\t\t\tshareWithChildBlocks );\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t! shouldDisplayControls ||\n\t\t\t\t\t\t! hasSupport( props.name )\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst neededProps = {};\n\t\t\t\t\tfor ( const key of attributeKeys ) {\n\t\t\t\t\t\tif ( props.attributes[ key ] ) {\n\t\t\t\t\t\t\tneededProps[ key ] = props.attributes[ key ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Edit\n\t\t\t\t\t\t\t// We can use the index because the array length\n\t\t\t\t\t\t\t// is fixed per page load right now.\n\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\tname={ props.name }\n\t\t\t\t\t\t\tisSelected={ props.isSelected }\n\t\t\t\t\t\t\tclientId={ props.clientId }\n\t\t\t\t\t\t\tsetAttributes={ props.setAttributes }\n\t\t\t\t\t\t\t__unstableParentLayout={\n\t\t\t\t\t\t\t\tprops.__unstableParentLayout\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// This component is pure, so only pass needed\n\t\t\t\t\t\t\t// props!!!\n\t\t\t\t\t\t\t{ ...neededProps }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} ),\n\t\t\t\t<OriginalBlockEdit key=\"edit\" { ...props } />,\n\t\t\t];\n\t\t},\n\t\t'withBlockEditHooks'\n\t);\n\taddFilter( 'editor.BlockEdit', 'core/editor/hooks', withBlockEditHooks );\n}\n\nfunction BlockProps( {\n\tindex,\n\tuseBlockProps: hook,\n\tsetAllWrapperProps,\n\t...props\n} ) {\n\tconst wrapperProps = hook( props );\n\tconst setWrapperProps = ( next ) =>\n\t\tsetAllWrapperProps( ( prev ) => {\n\t\t\tconst nextAll = [ ...prev ];\n\t\t\tnextAll[ index ] = next;\n\t\t\treturn nextAll;\n\t\t} );\n\t// Setting state after every render is fine because this component is\n\t// pure and will only re-render when needed props change.\n\tuseEffect( () => {\n\t\t// We could shallow compare the props, but since this component only\n\t\t// changes when needed attributes change, the benefit is probably small.\n\t\tsetWrapperProps( wrapperProps );\n\t\treturn () => {\n\t\t\tsetWrapperProps( undefined );\n\t\t};\n\t} );\n\treturn null;\n}\n\nconst BlockPropsPure = memo( BlockProps );\n\nexport function createBlockListBlockFilter( features ) {\n\tconst withBlockListBlockHooks = createHigherOrderComponent(\n\t\t( BlockListBlock ) => ( props ) => {\n\t\t\tconst [ allWrapperProps, setAllWrapperProps ] = useState(\n\t\t\t\tArray( features.length ).fill( undefined )\n\t\t\t);\n\t\t\treturn [\n\t\t\t\t...features.map( ( feature, i ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\thasSupport,\n\t\t\t\t\t\tattributeKeys = [],\n\t\t\t\t\t\tuseBlockProps,\n\t\t\t\t\t\tisMatch,\n\t\t\t\t\t} = feature;\n\n\t\t\t\t\tconst neededProps = {};\n\t\t\t\t\tfor ( const key of attributeKeys ) {\n\t\t\t\t\t\tif ( props.attributes[ key ] ) {\n\t\t\t\t\t\t\tneededProps[ key ] = props.attributes[ key ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Skip rendering if none of the needed attributes are\n\t\t\t\t\t\t// set.\n\t\t\t\t\t\t! Object.keys( neededProps ).length ||\n\t\t\t\t\t\t! hasSupport( props.name ) ||\n\t\t\t\t\t\t( isMatch && ! isMatch( neededProps ) )\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<BlockPropsPure\n\t\t\t\t\t\t\t// We can use the index because the array length\n\t\t\t\t\t\t\t// is fixed per page load right now.\n\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\tindex={ i }\n\t\t\t\t\t\t\tuseBlockProps={ useBlockProps }\n\t\t\t\t\t\t\t// This component is pure, so we must pass a stable\n\t\t\t\t\t\t\t// function reference.\n\t\t\t\t\t\t\tsetAllWrapperProps={ setAllWrapperProps }\n\t\t\t\t\t\t\tname={ props.name }\n\t\t\t\t\t\t\tclientId={ props.clientId }\n\t\t\t\t\t\t\t// This component is pure, so only pass needed\n\t\t\t\t\t\t\t// props!!!\n\t\t\t\t\t\t\t{ ...neededProps }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} ),\n\t\t\t\t<BlockListBlock\n\t\t\t\t\tkey=\"edit\"\n\t\t\t\t\t{ ...props }\n\t\t\t\t\twrapperProps={ allWrapperProps\n\t\t\t\t\t\t.filter( Boolean )\n\t\t\t\t\t\t.reduce( ( acc, wrapperProps ) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t\t...wrapperProps,\n\t\t\t\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t\t\t\tacc.className,\n\t\t\t\t\t\t\t\t\twrapperProps.className\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t...acc.style,\n\t\t\t\t\t\t\t\t\t...wrapperProps.style,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}, props.wrapperProps || {} ) }\n\t\t\t\t/>,\n\t\t\t];\n\t\t},\n\t\t'withBlockListBlockHooks'\n\t);\n\taddFilter(\n\t\t'editor.BlockListBlock',\n\t\t'core/editor/hooks',\n\t\twithBlockListBlockHooks\n\t);\n}\n\nexport function createBlockSaveFilter( features ) {\n\tfunction extraPropsFromHooks( props, name, attributes ) {\n\t\treturn features.reduce( ( accu, feature ) => {\n\t\t\tconst { hasSupport, attributeKeys = [], addSaveProps } = feature;\n\n\t\t\tconst neededAttributes = {};\n\t\t\tfor ( const key of attributeKeys ) {\n\t\t\t\tif ( attributes[ key ] ) {\n\t\t\t\t\tneededAttributes[ key ] = attributes[ key ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// Skip rendering if none of the needed attributes are\n\t\t\t\t// set.\n\t\t\t\t! Object.keys( neededAttributes ).length ||\n\t\t\t\t! hasSupport( name )\n\t\t\t) {\n\t\t\t\treturn accu;\n\t\t\t}\n\n\t\t\treturn addSaveProps( accu, name, neededAttributes );\n\t\t}, props );\n\t}\n\taddFilter(\n\t\t'blocks.getSaveContent.extraProps',\n\t\t'core/editor/hooks',\n\t\textraPropsFromHooks,\n\t\t0\n\t);\n\taddFilter(\n\t\t'blocks.getSaveContent.extraProps',\n\t\t'core/editor/hooks',\n\t\t( props ) => {\n\t\t\t// Previously we had a filter deleting the className if it was an empty\n\t\t\t// string. That filter is no longer running, so now we need to delete it\n\t\t\t// here.\n\t\t\tif ( props.hasOwnProperty( 'className' ) && ! props.className ) {\n\t\t\t\tdelete props.className;\n\t\t\t}\n\n\t\t\treturn props;\n\t\t}\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport { addFilter } from '@wordpress/hooks';\n\nfunction migrateLightBlockWrapper( settings ) {\n\tconst { apiVersion = 1 } = settings;\n\tif (\n\t\tapiVersion < 2 &&\n\t\thasBlockSupport( settings, 'lightBlockWrapper', false )\n\t) {\n\t\tsettings.apiVersion = 2;\n\t}\n\n\treturn settings;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/compat/migrateLightBlockWrapper',\n\tmigrateLightBlockWrapper\n);\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst BlockControlsDefault = createSlotFill( 'BlockControls' );\nconst BlockControlsBlock = createSlotFill( 'BlockControlsBlock' );\nconst BlockControlsInline = createSlotFill( 'BlockFormatControls' );\nconst BlockControlsOther = createSlotFill( 'BlockControlsOther' );\nconst BlockControlsParent = createSlotFill( 'BlockControlsParent' );\n\nconst groups = {\n\tdefault: BlockControlsDefault,\n\tblock: BlockControlsBlock,\n\tinline: BlockControlsInline,\n\tother: BlockControlsOther,\n\tparent: BlockControlsParent,\n};\n\nexport default groups;\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalStyleProvider as StyleProvider,\n\tToolbarGroup,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport useBlockControlsFill from './hook';\n\nexport default function BlockControlsFill( {\n\tgroup = 'default',\n\tcontrols,\n\tchildren,\n\t__experimentalShareWithChildBlocks = false,\n} ) {\n\tconst Fill = useBlockControlsFill(\n\t\tgroup,\n\t\t__experimentalShareWithChildBlocks\n\t);\n\tif ( ! Fill ) {\n\t\treturn null;\n\t}\n\n\tconst innerMarkup = (\n\t\t<>\n\t\t\t{ group === 'default' && <ToolbarGroup controls={ controls } /> }\n\t\t\t{ children }\n\t\t</>\n\t);\n\n\treturn (\n\t\t<StyleProvider document={ document }>\n\t\t\t<Fill>\n\t\t\t\t{ ( fillProps ) => {\n\t\t\t\t\t// `fillProps.forwardedContext` is an array of context provider entries, provided by slot,\n\t\t\t\t\t// that should wrap the fill markup.\n\t\t\t\t\tconst { forwardedContext = [] } = fillProps;\n\t\t\t\t\treturn forwardedContext.reduce(\n\t\t\t\t\t\t( inner, [ Provider, props ] ) => (\n\t\t\t\t\t\t\t<Provider { ...props }>{ inner }</Provider>\n\t\t\t\t\t\t),\n\t\t\t\t\t\tinnerMarkup\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Fill>\n\t\t</StyleProvider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\n\n/**\n * Internal dependencies\n */\nimport groups from './groups';\nimport {\n\tuseBlockEditContext,\n\tmayDisplayControlsKey,\n\tmayDisplayParentControlsKey,\n} from '../block-edit/context';\n\nexport default function useBlockControlsFill( group, shareWithChildBlocks ) {\n\tconst context = useBlockEditContext();\n\tif ( context[ mayDisplayControlsKey ] ) {\n\t\treturn groups[ group ]?.Fill;\n\t}\n\tif ( context[ mayDisplayParentControlsKey ] && shareWithChildBlocks ) {\n\t\treturn groups.parent.Fill;\n\t}\n\treturn null;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"warning\"];","/**\n * WordPress dependencies\n */\nimport { useContext, useMemo } from '@wordpress/element';\nimport {\n\tprivateApis,\n\t__experimentalToolbarContext as ToolbarContext,\n\tToolbarGroup,\n\t__experimentalUseSlotFills as useSlotFills,\n} from '@wordpress/components';\nimport warning from '@wordpress/warning';\n\n/**\n * Internal dependencies\n */\nimport groups from './groups';\nimport { unlock } from '../../lock-unlock';\n\nconst { ComponentsContext } = unlock( privateApis );\n\nexport default function BlockControlsSlot( { group = 'default', ...props } ) {\n\tconst toolbarState = useContext( ToolbarContext );\n\tconst contextState = useContext( ComponentsContext );\n\tconst fillProps = useMemo(\n\t\t() => ( {\n\t\t\tforwardedContext: [\n\t\t\t\t[ ToolbarContext.Provider, { value: toolbarState } ],\n\t\t\t\t[ ComponentsContext.Provider, { value: contextState } ],\n\t\t\t],\n\t\t} ),\n\t\t[ toolbarState, contextState ]\n\t);\n\n\tconst slotFill = groups[ group ];\n\tconst fills = useSlotFills( slotFill.name );\n\n\tif ( ! slotFill ) {\n\t\twarning( `Unknown BlockControls group \"${ group }\" provided.` );\n\t\treturn null;\n\t}\n\n\tif ( ! fills?.length ) {\n\t\treturn null;\n\t}\n\n\tconst { Slot } = slotFill;\n\tconst slot = <Slot { ...props } bubblesVirtually fillProps={ fillProps } />;\n\n\tif ( group === 'default' ) {\n\t\treturn slot;\n\t}\n\n\treturn <ToolbarGroup>{ slot }</ToolbarGroup>;\n}\n","/**\n * Internal dependencies\n */\nimport BlockControlsFill from './fill';\nimport BlockControlsSlot from './slot';\n\nconst BlockControls = BlockControlsFill;\n\nBlockControls.Slot = BlockControlsSlot;\n\n// This is just here for backward compatibility.\nexport const BlockFormatControls = ( props ) => {\n\treturn <BlockControlsFill group=\"inline\" { ...props } />;\n};\nBlockFormatControls.Slot = ( props ) => {\n\treturn <BlockControlsSlot group=\"inline\" { ...props } />;\n};\n\nexport default BlockControls;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9 9v6h11V9H9zM4 20h1.5V4H4v16z\" />\n\t</SVG>\n);\n\nexport default justifyLeft;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyCenter = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12.5 15v5H11v-5H4V9h7V4h1.5v5h7v6h-7Z\" />\n\t</SVG>\n);\n\nexport default justifyCenter;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4 15h11V9H4v6zM18.5 4v16H20V4h-1.5z\" />\n\t</SVG>\n);\n\nexport default justifyRight;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifySpaceBetween = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9 15h6V9H9v6zm-5 5h1.5V4H4v16zM18.5 4v16H20V4h-1.5z\" />\n\t</SVG>\n);\n\nexport default justifySpaceBetween;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyStretch = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4 4H5.5V20H4V4ZM7 10L17 10V14L7 14V10ZM20 4H18.5V20H20V4Z\" />\n\t</SVG>\n);\n\nexport default justifyStretch;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst arrowRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z\" />\n\t</SVG>\n);\n\nexport default arrowRight;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst arrowDown = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z\" />\n\t</SVG>\n);\n\nexport default arrowDown;\n","// Layout definitions keyed by layout type.\n// Provides a common definition of slugs, classnames, base styles, and spacing styles for each layout type.\n// If making changes or additions to layout definitions, be sure to update the corresponding PHP definitions in\n// `block-supports/layout.php` so that the server-side and client-side definitions match.\nexport const LAYOUT_DEFINITIONS = {\n\tdefault: {\n\t\tname: 'default',\n\t\tslug: 'flow',\n\t\tclassName: 'is-layout-flow',\n\t\tbaseStyles: [\n\t\t\t{\n\t\t\t\tselector: ' > .alignleft',\n\t\t\t\trules: {\n\t\t\t\t\tfloat: 'left',\n\t\t\t\t\t'margin-inline-start': '0',\n\t\t\t\t\t'margin-inline-end': '2em',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > .alignright',\n\t\t\t\trules: {\n\t\t\t\t\tfloat: 'right',\n\t\t\t\t\t'margin-inline-start': '2em',\n\t\t\t\t\t'margin-inline-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > .aligncenter',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-left': 'auto !important',\n\t\t\t\t\t'margin-right': 'auto !important',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tspacingStyles: [\n\t\t\t{\n\t\t\t\tselector: ' > :first-child',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-start': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > :last-child',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > *',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-start': null,\n\t\t\t\t\t'margin-block-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\tconstrained: {\n\t\tname: 'constrained',\n\t\tslug: 'constrained',\n\t\tclassName: 'is-layout-constrained',\n\t\tbaseStyles: [\n\t\t\t{\n\t\t\t\tselector: ' > .alignleft',\n\t\t\t\trules: {\n\t\t\t\t\tfloat: 'left',\n\t\t\t\t\t'margin-inline-start': '0',\n\t\t\t\t\t'margin-inline-end': '2em',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > .alignright',\n\t\t\t\trules: {\n\t\t\t\t\tfloat: 'right',\n\t\t\t\t\t'margin-inline-start': '2em',\n\t\t\t\t\t'margin-inline-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > .aligncenter',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-left': 'auto !important',\n\t\t\t\t\t'margin-right': 'auto !important',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector:\n\t\t\t\t\t' > :where(:not(.alignleft):not(.alignright):not(.alignfull))',\n\t\t\t\trules: {\n\t\t\t\t\t'max-width': 'var(--wp--style--global--content-size)',\n\t\t\t\t\t'margin-left': 'auto !important',\n\t\t\t\t\t'margin-right': 'auto !important',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > .alignwide',\n\t\t\t\trules: {\n\t\t\t\t\t'max-width': 'var(--wp--style--global--wide-size)',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tspacingStyles: [\n\t\t\t{\n\t\t\t\tselector: ' > :first-child',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-start': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > :last-child',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > *',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-start': null,\n\t\t\t\t\t'margin-block-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\tflex: {\n\t\tname: 'flex',\n\t\tslug: 'flex',\n\t\tclassName: 'is-layout-flex',\n\t\tdisplayMode: 'flex',\n\t\tbaseStyles: [\n\t\t\t{\n\t\t\t\tselector: '',\n\t\t\t\trules: {\n\t\t\t\t\t'flex-wrap': 'wrap',\n\t\t\t\t\t'align-items': 'center',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > :is(*, div)', // :is(*, div) instead of just * increases the specificity by 001.\n\t\t\t\trules: {\n\t\t\t\t\tmargin: '0',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tspacingStyles: [\n\t\t\t{\n\t\t\t\tselector: '',\n\t\t\t\trules: {\n\t\t\t\t\tgap: null,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\tgrid: {\n\t\tname: 'grid',\n\t\tslug: 'grid',\n\t\tclassName: 'is-layout-grid',\n\t\tdisplayMode: 'grid',\n\t\tbaseStyles: [\n\t\t\t{\n\t\t\t\tselector: ' > :is(*, div)', // :is(*, div) instead of just * increases the specificity by 001.\n\t\t\t\trules: {\n\t\t\t\t\tmargin: '0',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tspacingStyles: [\n\t\t\t{\n\t\t\t\tselector: '',\n\t\t\t\trules: {\n\t\t\t\t\tgap: null,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { LAYOUT_DEFINITIONS } from './definitions';\n\n/**\n * Utility to generate the proper CSS selector for layout styles.\n *\n * @param {string} selectors CSS selector, also supports multiple comma-separated selectors.\n * @param {string} append    The string to append.\n *\n * @return {string} - CSS selector.\n */\nexport function appendSelectors( selectors, append = '' ) {\n\treturn selectors\n\t\t.split( ',' )\n\t\t.map(\n\t\t\t( subselector ) =>\n\t\t\t\t`${ subselector }${ append ? ` ${ append }` : '' }`\n\t\t)\n\t\t.join( ',' );\n}\n\n/**\n * Get generated blockGap CSS rules based on layout definitions provided in theme.json\n * Falsy values in the layout definition's spacingStyles rules will be swapped out\n * with the provided `blockGapValue`.\n *\n * @param {string} selector          The CSS selector to target for the generated rules.\n * @param {Object} layoutDefinitions Layout definitions object.\n * @param {string} layoutType        The layout type (e.g. `default` or `flex`).\n * @param {string} blockGapValue     The current blockGap value to be applied.\n * @return {string} The generated CSS rules.\n */\nexport function getBlockGapCSS(\n\tselector,\n\tlayoutDefinitions = LAYOUT_DEFINITIONS,\n\tlayoutType,\n\tblockGapValue\n) {\n\tlet output = '';\n\tif (\n\t\tlayoutDefinitions?.[ layoutType ]?.spacingStyles?.length &&\n\t\tblockGapValue\n\t) {\n\t\tlayoutDefinitions[ layoutType ].spacingStyles.forEach( ( gapStyle ) => {\n\t\t\toutput += `${ appendSelectors(\n\t\t\t\tselector,\n\t\t\t\tgapStyle.selector.trim()\n\t\t\t) } { `;\n\t\t\toutput += Object.entries( gapStyle.rules )\n\t\t\t\t.map(\n\t\t\t\t\t( [ cssProperty, value ] ) =>\n\t\t\t\t\t\t`${ cssProperty }: ${ value ? value : blockGapValue }`\n\t\t\t\t)\n\t\t\t\t.join( '; ' );\n\t\t\toutput += '; }';\n\t\t} );\n\t}\n\treturn output;\n}\n\n/**\n * Helper method to assign contextual info to clarify\n * alignment settings.\n *\n * Besides checking if `contentSize` and `wideSize` have a\n * value, we now show this information only if their values\n * are not a `css var`. This needs to change when parsing\n * css variables land.\n *\n * @see https://github.com/WordPress/gutenberg/pull/34710#issuecomment-918000752\n *\n * @param {Object} layout The layout object.\n * @return {Object} An object with contextual info per alignment.\n */\nexport function getAlignmentsInfo( layout ) {\n\tconst { contentSize, wideSize, type = 'default' } = layout;\n\tconst alignmentInfo = {};\n\tconst sizeRegex =\n\t\t/^(?!0)\\d+(px|em|rem|vw|vh|%|svw|lvw|dvw|svh|lvh|dvh|vi|svi|lvi|dvi|vb|svb|lvb|dvb|vmin|svmin|lvmin|dvmin|vmax|svmax|lvmax|dvmax)?$/i;\n\tif ( sizeRegex.test( contentSize ) && type === 'constrained' ) {\n\t\t// translators: %s: container size (i.e. 600px etc)\n\t\talignmentInfo.none = sprintf( __( 'Max %s wide' ), contentSize );\n\t}\n\tif ( sizeRegex.test( wideSize ) ) {\n\t\t// translators: %s: container size (i.e. 600px etc)\n\t\talignmentInfo.wide = sprintf( __( 'Max %s wide' ), wideSize );\n\t}\n\treturn alignmentInfo;\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesAll = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\" />\n\t</SVG>\n);\n\nexport default sidesAll;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesHorizontal = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\n\t\t\tstyle={ { opacity: 0.25 } }\n\t\t/>\n\t\t<Path d=\"m4.5 7.5v9h1.5v-9z\" />\n\t\t<Path d=\"m18 7.5v9h1.5v-9z\" />\n\t</SVG>\n);\n\nexport default sidesHorizontal;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesVertical = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\n\t\t\tstyle={ { opacity: 0.25 } }\n\t\t/>\n\t\t<Path d=\"m7.5 6h9v-1.5h-9z\" />\n\t\t<Path d=\"m7.5 19.5h9v-1.5h-9z\" />\n\t</SVG>\n);\n\nexport default sidesVertical;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesTop = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\n\t\t\tstyle={ { opacity: 0.25 } }\n\t\t/>\n\t\t<Path d=\"m16.5 6h-9v-1.5h9z\" />\n\t</SVG>\n);\n\nexport default sidesTop;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\n\t\t\tstyle={ { opacity: 0.25 } }\n\t\t/>\n\t\t<Path d=\"m18 16.5v-9h1.5v9z\" />\n\t</SVG>\n);\n\nexport default sidesRight;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesBottom = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\n\t\t\tstyle={ { opacity: 0.25 } }\n\t\t/>\n\t\t<Path d=\"m16.5 19.5h-9v-1.5h9z\" />\n\t</SVG>\n);\n\nexport default sidesBottom;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\n\t\t\tstyle={ { opacity: 0.25 } }\n\t\t/>\n\t\t<Path d=\"m4.5 16.5v-9h1.5v9z\" />\n\t</SVG>\n);\n\nexport default sidesLeft;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tsidesAll,\n\tsidesBottom,\n\tsidesHorizontal,\n\tsidesLeft,\n\tsidesRight,\n\tsidesTop,\n\tsidesVertical,\n} from '@wordpress/icons';\n\nexport const RANGE_CONTROL_MAX_SIZE = 8;\n\nexport const ALL_SIDES = [ 'top', 'right', 'bottom', 'left' ];\n\nexport const DEFAULT_VALUES = {\n\ttop: undefined,\n\tright: undefined,\n\tbottom: undefined,\n\tleft: undefined,\n};\n\nexport const ICONS = {\n\tcustom: sidesAll,\n\taxial: sidesAll,\n\thorizontal: sidesHorizontal,\n\tvertical: sidesVertical,\n\ttop: sidesTop,\n\tright: sidesRight,\n\tbottom: sidesBottom,\n\tleft: sidesLeft,\n};\n\nexport const LABELS = {\n\tdefault: __( 'Spacing control' ),\n\ttop: __( 'Top' ),\n\tbottom: __( 'Bottom' ),\n\tleft: __( 'Left' ),\n\tright: __( 'Right' ),\n\tmixed: __( 'Mixed' ),\n\tvertical: __( 'Vertical' ),\n\thorizontal: __( 'Horizontal' ),\n\taxial: __( 'Horizontal & vertical' ),\n\tcustom: __( 'Custom' ),\n};\n\nexport const VIEWS = {\n\taxial: 'axial',\n\ttop: 'top',\n\tright: 'right',\n\tbottom: 'bottom',\n\tleft: 'left',\n\tcustom: 'custom',\n};\n\n/**\n * Checks is given value is a spacing preset.\n *\n * @param {string} value Value to check\n *\n * @return {boolean} Return true if value is string in format var:preset|spacing|.\n */\nexport function isValueSpacingPreset( value ) {\n\tif ( ! value?.includes ) {\n\t\treturn false;\n\t}\n\treturn value === '0' || value.includes( 'var:preset|spacing|' );\n}\n\n/**\n * Converts a spacing preset into a custom value.\n *\n * @param {string} value        Value to convert\n * @param {Array}  spacingSizes Array of the current spacing preset objects\n *\n * @return {string} Mapping of the spacing preset to its equivalent custom value.\n */\nexport function getCustomValueFromPreset( value, spacingSizes ) {\n\tif ( ! isValueSpacingPreset( value ) ) {\n\t\treturn value;\n\t}\n\n\tconst slug = getSpacingPresetSlug( value );\n\tconst spacingSize = spacingSizes.find(\n\t\t( size ) => String( size.slug ) === slug\n\t);\n\n\treturn spacingSize?.size;\n}\n\n/**\n * Converts a custom value to preset value if one can be found.\n *\n * Returns value as-is if no match is found.\n *\n * @param {string} value        Value to convert\n * @param {Array}  spacingSizes Array of the current spacing preset objects\n *\n * @return {string} The preset value if it can be found.\n */\nexport function getPresetValueFromCustomValue( value, spacingSizes ) {\n\t// Return value as-is if it is undefined or is already a preset, or '0';\n\tif ( ! value || isValueSpacingPreset( value ) || value === '0' ) {\n\t\treturn value;\n\t}\n\n\tconst spacingMatch = spacingSizes.find(\n\t\t( size ) => String( size.size ) === String( value )\n\t);\n\n\tif ( spacingMatch?.slug ) {\n\t\treturn `var:preset|spacing|${ spacingMatch.slug }`;\n\t}\n\n\treturn value;\n}\n\n/**\n * Converts a spacing preset into a custom value.\n *\n * @param {string} value Value to convert.\n *\n * @return {string | undefined} CSS var string for given spacing preset value.\n */\nexport function getSpacingPresetCssVar( value ) {\n\tif ( ! value ) {\n\t\treturn;\n\t}\n\n\tconst slug = value.match( /var:preset\\|spacing\\|(.+)/ );\n\n\tif ( ! slug ) {\n\t\treturn value;\n\t}\n\n\treturn `var(--wp--preset--spacing--${ slug[ 1 ] })`;\n}\n\n/**\n * Returns the slug section of the given spacing preset string.\n *\n * @param {string} value Value to extract slug from.\n *\n * @return {string|undefined} The int value of the slug from given spacing preset.\n */\nexport function getSpacingPresetSlug( value ) {\n\tif ( ! value ) {\n\t\treturn;\n\t}\n\n\tif ( value === '0' || value === 'default' ) {\n\t\treturn value;\n\t}\n\n\tconst slug = value.match( /var:preset\\|spacing\\|(.+)/ );\n\n\treturn slug ? slug[ 1 ] : undefined;\n}\n\n/**\n * Converts spacing preset value into a Range component value .\n *\n * @param {string} presetValue  Value to convert to Range value.\n * @param {Array}  spacingSizes Array of current spacing preset value objects.\n *\n * @return {number} The int value for use in Range control.\n */\nexport function getSliderValueFromPreset( presetValue, spacingSizes ) {\n\tif ( presetValue === undefined ) {\n\t\treturn 0;\n\t}\n\tconst slug =\n\t\tparseFloat( presetValue, 10 ) === 0\n\t\t\t? '0'\n\t\t\t: getSpacingPresetSlug( presetValue );\n\tconst sliderValue = spacingSizes.findIndex( ( spacingSize ) => {\n\t\treturn String( spacingSize.slug ) === slug;\n\t} );\n\n\t// Returning NaN rather than undefined as undefined makes range control thumb sit in center\n\treturn sliderValue !== -1 ? sliderValue : NaN;\n}\n\n/**\n * Determines whether a particular axis has support. If no axis is\n * specified, this function checks if either axis is supported.\n *\n * @param {Array}  sides Supported sides.\n * @param {string} axis  Which axis to check.\n *\n * @return {boolean} Whether there is support for the specified axis or both axes.\n */\nexport function hasAxisSupport( sides, axis ) {\n\tif ( ! sides || ! sides.length ) {\n\t\treturn false;\n\t}\n\n\tconst hasHorizontalSupport =\n\t\tsides.includes( 'horizontal' ) ||\n\t\t( sides.includes( 'left' ) && sides.includes( 'right' ) );\n\n\tconst hasVerticalSupport =\n\t\tsides.includes( 'vertical' ) ||\n\t\t( sides.includes( 'top' ) && sides.includes( 'bottom' ) );\n\n\tif ( axis === 'horizontal' ) {\n\t\treturn hasHorizontalSupport;\n\t}\n\n\tif ( axis === 'vertical' ) {\n\t\treturn hasVerticalSupport;\n\t}\n\n\treturn hasHorizontalSupport || hasVerticalSupport;\n}\n\n/**\n * Checks if the supported sides are balanced for each axis.\n * - Horizontal - both left and right sides are supported.\n * - Vertical - both top and bottom are supported.\n *\n * @param {Array} sides The supported sides which may be axes as well.\n *\n * @return {boolean} Whether or not the supported sides are balanced.\n */\nexport function hasBalancedSidesSupport( sides = [] ) {\n\tconst counts = { top: 0, right: 0, bottom: 0, left: 0 };\n\tsides.forEach( ( side ) => ( counts[ side ] += 1 ) );\n\n\treturn (\n\t\t( counts.top + counts.bottom ) % 2 === 0 &&\n\t\t( counts.left + counts.right ) % 2 === 0\n\t);\n}\n\n/**\n * Determines which view the SpacingSizesControl should default to on its\n * first render; Axial, Custom, or Single side.\n *\n * @param {Object} values Current side values.\n * @param {Array}  sides  Supported sides.\n *\n * @return {string} View to display.\n */\nexport function getInitialView( values = {}, sides ) {\n\tconst { top, right, bottom, left } = values;\n\tconst sideValues = [ top, right, bottom, left ].filter( Boolean );\n\n\t// Axial ( Horizontal & vertical ).\n\t// - Has axial side support\n\t// - Has axial side values which match\n\t// - Has no values and the supported sides are balanced\n\tconst hasMatchingAxialValues =\n\t\ttop === bottom && left === right && ( !! top || !! left );\n\tconst hasNoValuesAndBalancedSides =\n\t\t! sideValues.length && hasBalancedSidesSupport( sides );\n\tconst hasOnlyAxialSides =\n\t\tsides?.includes( 'horizontal' ) &&\n\t\tsides?.includes( 'vertical' ) &&\n\t\tsides?.length === 2;\n\n\tif (\n\t\thasAxisSupport( sides ) &&\n\t\t( hasMatchingAxialValues || hasNoValuesAndBalancedSides )\n\t) {\n\t\treturn VIEWS.axial;\n\t}\n\n\t// Only axial sides are supported and single value defined.\n\t// - Ensure the side returned is the first side that has a value.\n\tif ( hasOnlyAxialSides && sideValues.length === 1 ) {\n\t\tlet side;\n\n\t\tObject.entries( values ).some( ( [ key, value ] ) => {\n\t\t\tside = key;\n\t\t\treturn value !== undefined;\n\t\t} );\n\n\t\treturn side;\n\t}\n\n\t// Only single side supported and no value defined.\n\tif ( sides?.length === 1 && ! sideValues.length ) {\n\t\treturn sides[ 0 ];\n\t}\n\n\t// Default to the Custom (separated sides) view.\n\treturn VIEWS.custom;\n}\n","/**\n * Internal dependencies\n */\nimport { getSpacingPresetCssVar } from '../components/spacing-sizes-control/utils';\n\n/**\n * Returns a BoxControl object value from a given blockGap style value.\n * The string check is for backwards compatibility before Gutenberg supported\n * split gap values (row and column) and the value was a string n + unit.\n *\n * @param {?string | ?Object} blockGapValue A block gap string or axial object value, e.g., '10px' or { top: '10px', left: '10px'}.\n * @return {Object|null}                    A value to pass to the BoxControl component.\n */\nexport function getGapBoxControlValueFromStyle( blockGapValue ) {\n\tif ( ! blockGapValue ) {\n\t\treturn null;\n\t}\n\n\tconst isValueString = typeof blockGapValue === 'string';\n\treturn {\n\t\ttop: isValueString ? blockGapValue : blockGapValue?.top,\n\t\tleft: isValueString ? blockGapValue : blockGapValue?.left,\n\t};\n}\n\n/**\n * Returns a CSS value for the `gap` property from a given blockGap style.\n *\n * @param {?string | ?Object} blockGapValue A block gap string or axial object value, e.g., '10px' or { top: '10px', left: '10px'}.\n * @param {?string}           defaultValue  A default gap value.\n * @return {string|null}                    The concatenated gap value (row and column).\n */\nexport function getGapCSSValue( blockGapValue, defaultValue = '0' ) {\n\tconst blockGapBoxControlValue =\n\t\tgetGapBoxControlValueFromStyle( blockGapValue );\n\tif ( ! blockGapBoxControlValue ) {\n\t\treturn null;\n\t}\n\n\tconst row =\n\t\tgetSpacingPresetCssVar( blockGapBoxControlValue?.top ) || defaultValue;\n\tconst column =\n\t\tgetSpacingPresetCssVar( blockGapBoxControlValue?.left ) || defaultValue;\n\n\treturn row === column ? row : `${ row } ${ column }`;\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyTop = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9 20h6V9H9v11zM4 4v1.5h16V4H4z\" />\n\t</SVG>\n);\n\nexport default justifyTop;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyCenterVertical = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M20 11h-5V4H9v7H4v1.5h5V20h6v-7.5h5z\" />\n\t</SVG>\n);\n\nexport default justifyCenterVertical;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyBottom = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M15 4H9v11h6V4zM4 18.5V20h16v-1.5H4z\" />\n\t</SVG>\n);\n\nexport default justifyBottom;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyStretchVertical = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4 4L20 4L20 5.5L4 5.5L4 4ZM10 7L14 7L14 17L10 17L10 7ZM20 18.5L4 18.5L4 20L20 20L20 18.5Z\" />\n\t</SVG>\n);\n\nexport default justifyStretchVertical;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifySpaceBetweenVertical = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7 4H17V8L7 8V4ZM7 16L17 16V20L7 20V16ZM20 11.25H4V12.75H20V11.25Z\" />\n\t</SVG>\n);\n\nexport default justifySpaceBetweenVertical;\n","/**\n * WordPress dependencies\n */\nimport { _x } from '@wordpress/i18n';\nimport { ToolbarGroup, ToolbarDropdownMenu } from '@wordpress/components';\nimport {\n\tjustifyTop,\n\tjustifyCenterVertical,\n\tjustifyBottom,\n\tjustifyStretchVertical,\n\tjustifySpaceBetweenVertical,\n} from '@wordpress/icons';\n\nconst BLOCK_ALIGNMENTS_CONTROLS = {\n\ttop: {\n\t\ticon: justifyTop,\n\t\ttitle: _x( 'Align top', 'Block vertical alignment setting' ),\n\t},\n\tcenter: {\n\t\ticon: justifyCenterVertical,\n\t\ttitle: _x( 'Align middle', 'Block vertical alignment setting' ),\n\t},\n\tbottom: {\n\t\ticon: justifyBottom,\n\t\ttitle: _x( 'Align bottom', 'Block vertical alignment setting' ),\n\t},\n\tstretch: {\n\t\ticon: justifyStretchVertical,\n\t\ttitle: _x( 'Stretch to fill', 'Block vertical alignment setting' ),\n\t},\n\t'space-between': {\n\t\ticon: justifySpaceBetweenVertical,\n\t\ttitle: _x( 'Space between', 'Block vertical alignment setting' ),\n\t},\n};\n\nconst DEFAULT_CONTROLS = [ 'top', 'center', 'bottom' ];\nconst DEFAULT_CONTROL = 'top';\n\nfunction BlockVerticalAlignmentUI( {\n\tvalue,\n\tonChange,\n\tcontrols = DEFAULT_CONTROLS,\n\tisCollapsed = true,\n\tisToolbar,\n} ) {\n\tfunction applyOrUnset( align ) {\n\t\treturn () => onChange( value === align ? undefined : align );\n\t}\n\n\tconst activeAlignment = BLOCK_ALIGNMENTS_CONTROLS[ value ];\n\tconst defaultAlignmentControl =\n\t\tBLOCK_ALIGNMENTS_CONTROLS[ DEFAULT_CONTROL ];\n\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\n\tconst extraProps = isToolbar ? { isCollapsed } : {};\n\n\treturn (\n\t\t<UIComponent\n\t\t\ticon={\n\t\t\t\tactiveAlignment\n\t\t\t\t\t? activeAlignment.icon\n\t\t\t\t\t: defaultAlignmentControl.icon\n\t\t\t}\n\t\t\tlabel={ _x(\n\t\t\t\t'Change vertical alignment',\n\t\t\t\t'Block vertical alignment setting label'\n\t\t\t) }\n\t\t\tcontrols={ controls.map( ( control ) => {\n\t\t\t\treturn {\n\t\t\t\t\t...BLOCK_ALIGNMENTS_CONTROLS[ control ],\n\t\t\t\t\tisActive: value === control,\n\t\t\t\t\trole: isCollapsed ? 'menuitemradio' : undefined,\n\t\t\t\t\tonClick: applyOrUnset( control ),\n\t\t\t\t};\n\t\t\t} ) }\n\t\t\t{ ...extraProps }\n\t\t/>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-vertical-alignment-toolbar/README.md\n */\nexport default BlockVerticalAlignmentUI;\n","/**\n * Internal dependencies\n */\nimport BlockVerticalAlignmentUI from './ui';\n\nconst BlockVerticalAlignmentControl = ( props ) => {\n\treturn <BlockVerticalAlignmentUI { ...props } isToolbar={ false } />;\n};\n\nconst BlockVerticalAlignmentToolbar = ( props ) => {\n\treturn <BlockVerticalAlignmentUI { ...props } isToolbar />;\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-vertical-alignment-control/README.md\n */\nexport { BlockVerticalAlignmentControl, BlockVerticalAlignmentToolbar };\n","/**\n * WordPress dependencies\n */\nimport { ToolbarDropdownMenu, ToolbarGroup } from '@wordpress/components';\nimport {\n\tjustifyLeft,\n\tjustifyCenter,\n\tjustifyRight,\n\tjustifySpaceBetween,\n\tjustifyStretch,\n} from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\n\nconst icons = {\n\tleft: justifyLeft,\n\tcenter: justifyCenter,\n\tright: justifyRight,\n\t'space-between': justifySpaceBetween,\n\tstretch: justifyStretch,\n};\n\nfunction JustifyContentUI( {\n\tallowedControls = [ 'left', 'center', 'right', 'space-between' ],\n\tisCollapsed = true,\n\tonChange,\n\tvalue,\n\tpopoverProps,\n\tisToolbar,\n} ) {\n\t// If the control is already selected we want a click\n\t// again on the control to deselect the item, so we\n\t// call onChange( undefined )\n\tconst handleClick = ( next ) => {\n\t\tif ( next === value ) {\n\t\t\tonChange( undefined );\n\t\t} else {\n\t\t\tonChange( next );\n\t\t}\n\t};\n\n\tconst icon = value ? icons[ value ] : icons.left;\n\tconst allControls = [\n\t\t{\n\t\t\tname: 'left',\n\t\t\ticon: justifyLeft,\n\t\t\ttitle: __( 'Justify items left' ),\n\t\t\tisActive: 'left' === value,\n\t\t\tonClick: () => handleClick( 'left' ),\n\t\t},\n\t\t{\n\t\t\tname: 'center',\n\t\t\ticon: justifyCenter,\n\t\t\ttitle: __( 'Justify items center' ),\n\t\t\tisActive: 'center' === value,\n\t\t\tonClick: () => handleClick( 'center' ),\n\t\t},\n\t\t{\n\t\t\tname: 'right',\n\t\t\ticon: justifyRight,\n\t\t\ttitle: __( 'Justify items right' ),\n\t\t\tisActive: 'right' === value,\n\t\t\tonClick: () => handleClick( 'right' ),\n\t\t},\n\t\t{\n\t\t\tname: 'space-between',\n\t\t\ticon: justifySpaceBetween,\n\t\t\ttitle: __( 'Space between items' ),\n\t\t\tisActive: 'space-between' === value,\n\t\t\tonClick: () => handleClick( 'space-between' ),\n\t\t},\n\t\t{\n\t\t\tname: 'stretch',\n\t\t\ticon: justifyStretch,\n\t\t\ttitle: __( 'Stretch items' ),\n\t\t\tisActive: 'stretch' === value,\n\t\t\tonClick: () => handleClick( 'stretch' ),\n\t\t},\n\t];\n\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\n\tconst extraProps = isToolbar ? { isCollapsed } : {};\n\n\treturn (\n\t\t<UIComponent\n\t\t\ticon={ icon }\n\t\t\tpopoverProps={ popoverProps }\n\t\t\tlabel={ __( 'Change items justification' ) }\n\t\t\tcontrols={ allControls.filter( ( elem ) =>\n\t\t\t\tallowedControls.includes( elem.name )\n\t\t\t) }\n\t\t\t{ ...extraProps }\n\t\t/>\n\t);\n}\n\nexport default JustifyContentUI;\n","/**\n * Internal dependencies\n */\nimport JustifyContentUI from './ui';\n\nconst JustifyContentControl = ( props ) => {\n\treturn <JustifyContentUI { ...props } isToolbar={ false } />;\n};\n\nconst JustifyToolbar = ( props ) => {\n\treturn <JustifyContentUI { ...props } isToolbar />;\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/justify-content-control/README.md\n */\nexport { JustifyContentControl, JustifyToolbar };\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tjustifyLeft,\n\tjustifyCenter,\n\tjustifyRight,\n\tjustifySpaceBetween,\n\tjustifyStretch,\n\tarrowRight,\n\tarrowDown,\n} from '@wordpress/icons';\nimport {\n\tToggleControl,\n\tFlex,\n\tFlexItem,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { appendSelectors, getBlockGapCSS } from './utils';\nimport { getGapCSSValue } from '../hooks/gap';\nimport {\n\tBlockControls,\n\tJustifyContentControl,\n\tBlockVerticalAlignmentControl,\n} from '../components';\nimport { shouldSkipSerialization } from '../hooks/utils';\nimport { LAYOUT_DEFINITIONS } from './definitions';\n\n// Used with the default, horizontal flex orientation.\nconst justifyContentMap = {\n\tleft: 'flex-start',\n\tright: 'flex-end',\n\tcenter: 'center',\n\t'space-between': 'space-between',\n};\n\n// Used with the vertical (column) flex orientation.\nconst alignItemsMap = {\n\tleft: 'flex-start',\n\tright: 'flex-end',\n\tcenter: 'center',\n\tstretch: 'stretch',\n};\n\nconst verticalAlignmentMap = {\n\ttop: 'flex-start',\n\tcenter: 'center',\n\tbottom: 'flex-end',\n\tstretch: 'stretch',\n\t'space-between': 'space-between',\n};\n\nconst defaultAlignments = {\n\thorizontal: 'center',\n\tvertical: 'top',\n};\n\nconst flexWrapOptions = [ 'wrap', 'nowrap' ];\n\nexport default {\n\tname: 'flex',\n\tlabel: __( 'Flex' ),\n\tinspectorControls: function FlexLayoutInspectorControls( {\n\t\tlayout = {},\n\t\tonChange,\n\t\tlayoutBlockSupport = {},\n\t} ) {\n\t\tconst { allowOrientation = true, allowJustification = true } =\n\t\t\tlayoutBlockSupport;\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Flex>\n\t\t\t\t\t{ allowJustification && (\n\t\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t\t<FlexLayoutJustifyContentControl\n\t\t\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t) }\n\t\t\t\t\t{ allowOrientation && (\n\t\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t\t<OrientationControl\n\t\t\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t) }\n\t\t\t\t</Flex>\n\t\t\t\t<FlexWrapControl layout={ layout } onChange={ onChange } />\n\t\t\t</>\n\t\t);\n\t},\n\ttoolBarControls: function FlexLayoutToolbarControls( {\n\t\tlayout = {},\n\t\tonChange,\n\t\tlayoutBlockSupport,\n\t} ) {\n\t\tconst { allowVerticalAlignment = true, allowJustification = true } =\n\t\t\tlayoutBlockSupport;\n\n\t\tif ( ! allowJustification && ! allowVerticalAlignment ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<BlockControls group=\"block\" __experimentalShareWithChildBlocks>\n\t\t\t\t{ allowJustification && (\n\t\t\t\t\t<FlexLayoutJustifyContentControl\n\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\tisToolbar\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ allowVerticalAlignment && (\n\t\t\t\t\t<FlexLayoutVerticalAlignmentControl\n\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</BlockControls>\n\t\t);\n\t},\n\tgetLayoutStyle: function getLayoutStyle( {\n\t\tselector,\n\t\tlayout,\n\t\tstyle,\n\t\tblockName,\n\t\thasBlockGapSupport,\n\t\tlayoutDefinitions = LAYOUT_DEFINITIONS,\n\t} ) {\n\t\tconst { orientation = 'horizontal' } = layout;\n\n\t\t// If a block's block.json skips serialization for spacing or spacing.blockGap,\n\t\t// don't apply the user-defined value to the styles.\n\t\tconst blockGapValue =\n\t\t\tstyle?.spacing?.blockGap &&\n\t\t\t! shouldSkipSerialization( blockName, 'spacing', 'blockGap' )\n\t\t\t\t? getGapCSSValue( style?.spacing?.blockGap, '0.5em' )\n\t\t\t\t: undefined;\n\t\tconst justifyContent = justifyContentMap[ layout.justifyContent ];\n\t\tconst flexWrap = flexWrapOptions.includes( layout.flexWrap )\n\t\t\t? layout.flexWrap\n\t\t\t: 'wrap';\n\t\tconst verticalAlignment =\n\t\t\tverticalAlignmentMap[ layout.verticalAlignment ];\n\t\tconst alignItems =\n\t\t\talignItemsMap[ layout.justifyContent ] || alignItemsMap.left;\n\n\t\tlet output = '';\n\t\tconst rules = [];\n\n\t\tif ( flexWrap && flexWrap !== 'wrap' ) {\n\t\t\trules.push( `flex-wrap: ${ flexWrap }` );\n\t\t}\n\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\tif ( verticalAlignment ) {\n\t\t\t\trules.push( `align-items: ${ verticalAlignment }` );\n\t\t\t}\n\t\t\tif ( justifyContent ) {\n\t\t\t\trules.push( `justify-content: ${ justifyContent }` );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( verticalAlignment ) {\n\t\t\t\trules.push( `justify-content: ${ verticalAlignment }` );\n\t\t\t}\n\t\t\trules.push( 'flex-direction: column' );\n\t\t\trules.push( `align-items: ${ alignItems }` );\n\t\t}\n\n\t\tif ( rules.length ) {\n\t\t\toutput = `${ appendSelectors( selector ) } {\n\t\t\t\t${ rules.join( '; ' ) };\n\t\t\t}`;\n\t\t}\n\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\n\t\t\toutput += getBlockGapCSS(\n\t\t\t\tselector,\n\t\t\t\tlayoutDefinitions,\n\t\t\t\t'flex',\n\t\t\t\tblockGapValue\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t},\n\tgetOrientation( layout ) {\n\t\tconst { orientation = 'horizontal' } = layout;\n\t\treturn orientation;\n\t},\n\tgetAlignments() {\n\t\treturn [];\n\t},\n};\n\nfunction FlexLayoutVerticalAlignmentControl( { layout, onChange } ) {\n\tconst { orientation = 'horizontal' } = layout;\n\n\tconst defaultVerticalAlignment =\n\t\torientation === 'horizontal'\n\t\t\t? defaultAlignments.horizontal\n\t\t\t: defaultAlignments.vertical;\n\n\tconst { verticalAlignment = defaultVerticalAlignment } = layout;\n\n\tconst onVerticalAlignmentChange = ( value ) => {\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tverticalAlignment: value,\n\t\t} );\n\t};\n\n\treturn (\n\t\t<BlockVerticalAlignmentControl\n\t\t\tonChange={ onVerticalAlignmentChange }\n\t\t\tvalue={ verticalAlignment }\n\t\t\tcontrols={\n\t\t\t\torientation === 'horizontal'\n\t\t\t\t\t? [ 'top', 'center', 'bottom', 'stretch' ]\n\t\t\t\t\t: [ 'top', 'center', 'bottom', 'space-between' ]\n\t\t\t}\n\t\t/>\n\t);\n}\n\nconst POPOVER_PROPS = {\n\tplacement: 'bottom-start',\n};\n\nfunction FlexLayoutJustifyContentControl( {\n\tlayout,\n\tonChange,\n\tisToolbar = false,\n} ) {\n\tconst { justifyContent = 'left', orientation = 'horizontal' } = layout;\n\tconst onJustificationChange = ( value ) => {\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tjustifyContent: value,\n\t\t} );\n\t};\n\tconst allowedControls = [ 'left', 'center', 'right' ];\n\tif ( orientation === 'horizontal' ) {\n\t\tallowedControls.push( 'space-between' );\n\t} else {\n\t\tallowedControls.push( 'stretch' );\n\t}\n\tif ( isToolbar ) {\n\t\treturn (\n\t\t\t<JustifyContentControl\n\t\t\t\tallowedControls={ allowedControls }\n\t\t\t\tvalue={ justifyContent }\n\t\t\t\tonChange={ onJustificationChange }\n\t\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\t/>\n\t\t);\n\t}\n\n\tconst justificationOptions = [\n\t\t{\n\t\t\tvalue: 'left',\n\t\t\ticon: justifyLeft,\n\t\t\tlabel: __( 'Justify items left' ),\n\t\t},\n\t\t{\n\t\t\tvalue: 'center',\n\t\t\ticon: justifyCenter,\n\t\t\tlabel: __( 'Justify items center' ),\n\t\t},\n\t\t{\n\t\t\tvalue: 'right',\n\t\t\ticon: justifyRight,\n\t\t\tlabel: __( 'Justify items right' ),\n\t\t},\n\t];\n\tif ( orientation === 'horizontal' ) {\n\t\tjustificationOptions.push( {\n\t\t\tvalue: 'space-between',\n\t\t\ticon: justifySpaceBetween,\n\t\t\tlabel: __( 'Space between items' ),\n\t\t} );\n\t} else {\n\t\tjustificationOptions.push( {\n\t\t\tvalue: 'stretch',\n\t\t\ticon: justifyStretch,\n\t\t\tlabel: __( 'Stretch items' ),\n\t\t} );\n\t}\n\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\t__next40pxDefaultSize\n\t\t\t__nextHasNoMarginBottom\n\t\t\tlabel={ __( 'Justification' ) }\n\t\t\tvalue={ justifyContent }\n\t\t\tonChange={ onJustificationChange }\n\t\t\tclassName=\"block-editor-hooks__flex-layout-justification-controls\"\n\t\t>\n\t\t\t{ justificationOptions.map( ( { value, icon, label } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\t\t\tkey={ value }\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ToggleGroupControl>\n\t);\n}\n\nfunction FlexWrapControl( { layout, onChange } ) {\n\tconst { flexWrap = 'wrap' } = layout;\n\treturn (\n\t\t<ToggleControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tlabel={ __( 'Allow to wrap to multiple lines' ) }\n\t\t\tonChange={ ( value ) => {\n\t\t\t\tonChange( {\n\t\t\t\t\t...layout,\n\t\t\t\t\tflexWrap: value ? 'wrap' : 'nowrap',\n\t\t\t\t} );\n\t\t\t} }\n\t\t\tchecked={ flexWrap === 'wrap' }\n\t\t/>\n\t);\n}\n\nfunction OrientationControl( { layout, onChange } ) {\n\tconst {\n\t\torientation = 'horizontal',\n\t\tverticalAlignment,\n\t\tjustifyContent,\n\t} = layout;\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\t__next40pxDefaultSize\n\t\t\t__nextHasNoMarginBottom\n\t\t\tclassName=\"block-editor-hooks__flex-layout-orientation-controls\"\n\t\t\tlabel={ __( 'Orientation' ) }\n\t\t\tvalue={ orientation }\n\t\t\tonChange={ ( value ) => {\n\t\t\t\t// Make sure the vertical alignment and justification are compatible with the new orientation.\n\t\t\t\tlet newVerticalAlignment = verticalAlignment;\n\t\t\t\tlet newJustification = justifyContent;\n\t\t\t\tif ( value === 'horizontal' ) {\n\t\t\t\t\tif ( verticalAlignment === 'space-between' ) {\n\t\t\t\t\t\tnewVerticalAlignment = 'center';\n\t\t\t\t\t}\n\t\t\t\t\tif ( justifyContent === 'stretch' ) {\n\t\t\t\t\t\tnewJustification = 'left';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( verticalAlignment === 'stretch' ) {\n\t\t\t\t\t\tnewVerticalAlignment = 'top';\n\t\t\t\t\t}\n\t\t\t\t\tif ( justifyContent === 'space-between' ) {\n\t\t\t\t\t\tnewJustification = 'left';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn onChange( {\n\t\t\t\t\t...layout,\n\t\t\t\t\torientation: value,\n\t\t\t\t\tverticalAlignment: newVerticalAlignment,\n\t\t\t\t\tjustifyContent: newJustification,\n\t\t\t\t} );\n\t\t\t} }\n\t\t>\n\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\ticon={ arrowRight }\n\t\t\t\tvalue=\"horizontal\"\n\t\t\t\tlabel={ __( 'Horizontal' ) }\n\t\t\t/>\n\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\ticon={ arrowDown }\n\t\t\t\tvalue=\"vertical\"\n\t\t\t\tlabel={ __( 'Vertical' ) }\n\t\t\t/>\n\t\t</ToggleGroupControl>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { getBlockGapCSS, getAlignmentsInfo } from './utils';\nimport { getGapCSSValue } from '../hooks/gap';\nimport { shouldSkipSerialization } from '../hooks/utils';\nimport { LAYOUT_DEFINITIONS } from './definitions';\n\nexport default {\n\tname: 'default',\n\tlabel: __( 'Flow' ),\n\tinspectorControls: function DefaultLayoutInspectorControls() {\n\t\treturn null;\n\t},\n\ttoolBarControls: function DefaultLayoutToolbarControls() {\n\t\treturn null;\n\t},\n\tgetLayoutStyle: function getLayoutStyle( {\n\t\tselector,\n\t\tstyle,\n\t\tblockName,\n\t\thasBlockGapSupport,\n\t\tlayoutDefinitions = LAYOUT_DEFINITIONS,\n\t} ) {\n\t\tconst blockGapStyleValue = getGapCSSValue( style?.spacing?.blockGap );\n\n\t\t// If a block's block.json skips serialization for spacing or\n\t\t// spacing.blockGap, don't apply the user-defined value to the styles.\n\t\tlet blockGapValue = '';\n\t\tif ( ! shouldSkipSerialization( blockName, 'spacing', 'blockGap' ) ) {\n\t\t\t// If an object is provided only use the 'top' value for this kind of gap.\n\t\t\tif ( blockGapStyleValue?.top ) {\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue?.top );\n\t\t\t} else if ( typeof blockGapStyleValue === 'string' ) {\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue );\n\t\t\t}\n\t\t}\n\n\t\tlet output = '';\n\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\n\t\t\toutput += getBlockGapCSS(\n\t\t\t\tselector,\n\t\t\t\tlayoutDefinitions,\n\t\t\t\t'default',\n\t\t\t\tblockGapValue\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t},\n\tgetOrientation() {\n\t\treturn 'vertical';\n\t},\n\tgetAlignments( layout, isBlockBasedTheme ) {\n\t\tconst alignmentInfo = getAlignmentsInfo( layout );\n\t\tif ( layout.alignments !== undefined ) {\n\t\t\tif ( ! layout.alignments.includes( 'none' ) ) {\n\t\t\t\tlayout.alignments.unshift( 'none' );\n\t\t\t}\n\t\t\treturn layout.alignments.map( ( alignment ) => ( {\n\t\t\t\tname: alignment,\n\t\t\t\tinfo: alignmentInfo[ alignment ],\n\t\t\t} ) );\n\t\t}\n\n\t\tconst alignments = [\n\t\t\t{ name: 'left' },\n\t\t\t{ name: 'center' },\n\t\t\t{ name: 'right' },\n\t\t];\n\n\t\t// This is for backwards compatibility with hybrid themes.\n\t\tif ( ! isBlockBasedTheme ) {\n\t\t\tconst { contentSize, wideSize } = layout;\n\t\t\tif ( contentSize ) {\n\t\t\t\talignments.unshift( { name: 'full' } );\n\t\t\t}\n\n\t\t\tif ( wideSize ) {\n\t\t\t\talignments.unshift( {\n\t\t\t\t\tname: 'wide',\n\t\t\t\t\tinfo: alignmentInfo.wide,\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\talignments.unshift( { name: 'none', info: alignmentInfo.none } );\n\n\t\treturn alignments;\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { cloneElement, forwardRef } from '@wordpress/element';\n\n/**\n * External dependencies\n */\nimport type { ReactElement } from 'react';\nimport type { SVGProps } from '@wordpress/primitives';\n\nexport interface IconProps extends SVGProps {\n\t/**\n\t * The SVG component to render\n\t */\n\ticon: ReactElement;\n\t/**\n\t * The size of the icon in pixels\n\t *\n\t * @default 24\n\t */\n\tsize?: number;\n}\n\n/**\n * Return an SVG icon.\n *\n * @param props The component props.\n *\n * @return Icon component\n */\nexport default forwardRef< HTMLElement, IconProps >(\n\t( { icon, size = 24, ...props }: IconProps, ref ) => {\n\t\treturn cloneElement( icon, {\n\t\t\twidth: size,\n\t\t\theight: size,\n\t\t\t...props,\n\t\t\tref,\n\t\t} );\n\t}\n);\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst alignNone = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M19 5.5H5V4h14v1.5ZM19 20H5v-1.5h14V20ZM5 9h14v6H5V9Z\" />\n\t</SVG>\n);\n\nexport default alignNone;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst stretchWide = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M16 5.5H8V4h8v1.5ZM16 20H8v-1.5h8V20ZM5 9h14v6H5V9Z\" />\n\t</SVG>\n);\n\nexport default stretchWide;\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n\t__experimentalInputControlPrefixWrapper as InputControlPrefixWrapper,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tIcon,\n\talignNone,\n\tstretchWide,\n\tjustifyLeft,\n\tjustifyCenter,\n\tjustifyRight,\n} from '@wordpress/icons';\nimport { getCSSRules } from '@wordpress/style-engine';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../components/use-settings';\nimport { appendSelectors, getBlockGapCSS, getAlignmentsInfo } from './utils';\nimport { getGapCSSValue } from '../hooks/gap';\nimport { BlockControls, JustifyContentControl } from '../components';\nimport { shouldSkipSerialization } from '../hooks/utils';\nimport { LAYOUT_DEFINITIONS } from './definitions';\n\nexport default {\n\tname: 'constrained',\n\tlabel: __( 'Constrained' ),\n\tinspectorControls: function DefaultLayoutInspectorControls( {\n\t\tlayout,\n\t\tonChange,\n\t\tlayoutBlockSupport = {},\n\t} ) {\n\t\tconst { wideSize, contentSize, justifyContent = 'center' } = layout;\n\t\tconst {\n\t\t\tallowJustification = true,\n\t\t\tallowCustomContentAndWideSize = true,\n\t\t} = layoutBlockSupport;\n\t\tconst onJustificationChange = ( value ) => {\n\t\t\tonChange( {\n\t\t\t\t...layout,\n\t\t\t\tjustifyContent: value,\n\t\t\t} );\n\t\t};\n\t\tconst justificationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'left',\n\t\t\t\ticon: justifyLeft,\n\t\t\t\tlabel: __( 'Justify items left' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'center',\n\t\t\t\ticon: justifyCenter,\n\t\t\t\tlabel: __( 'Justify items center' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'right',\n\t\t\t\ticon: justifyRight,\n\t\t\t\tlabel: __( 'Justify items right' ),\n\t\t\t},\n\t\t];\n\t\tconst [ availableUnits ] = useSettings( 'spacing.units' );\n\t\tconst units = useCustomUnits( {\n\t\t\tavailableUnits: availableUnits || [ '%', 'px', 'em', 'rem', 'vw' ],\n\t\t} );\n\t\treturn (\n\t\t\t<VStack\n\t\t\t\tspacing={ 4 }\n\t\t\t\tclassName=\"block-editor-hooks__layout-constrained\"\n\t\t\t>\n\t\t\t\t{ allowCustomContentAndWideSize && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tlabel={ __( 'Content width' ) }\n\t\t\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\t\t\tvalue={ contentSize || wideSize || '' }\n\t\t\t\t\t\t\tonChange={ ( nextWidth ) => {\n\t\t\t\t\t\t\t\tnextWidth =\n\t\t\t\t\t\t\t\t\t0 > parseFloat( nextWidth )\n\t\t\t\t\t\t\t\t\t\t? '0'\n\t\t\t\t\t\t\t\t\t\t: nextWidth;\n\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\t\tcontentSize: nextWidth,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tprefix={\n\t\t\t\t\t\t\t\t<InputControlPrefixWrapper variant=\"icon\">\n\t\t\t\t\t\t\t\t\t<Icon icon={ alignNone } />\n\t\t\t\t\t\t\t\t</InputControlPrefixWrapper>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tlabel={ __( 'Wide width' ) }\n\t\t\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\t\t\tvalue={ wideSize || contentSize || '' }\n\t\t\t\t\t\t\tonChange={ ( nextWidth ) => {\n\t\t\t\t\t\t\t\tnextWidth =\n\t\t\t\t\t\t\t\t\t0 > parseFloat( nextWidth )\n\t\t\t\t\t\t\t\t\t\t? '0'\n\t\t\t\t\t\t\t\t\t\t: nextWidth;\n\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\t\twideSize: nextWidth,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tprefix={\n\t\t\t\t\t\t\t\t<InputControlPrefixWrapper variant=\"icon\">\n\t\t\t\t\t\t\t\t\t<Icon icon={ stretchWide } />\n\t\t\t\t\t\t\t\t</InputControlPrefixWrapper>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<p className=\"block-editor-hooks__layout-constrained-helptext\">\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'Customize the width for all elements that are assigned to the center or wide columns.'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t{ allowJustification && (\n\t\t\t\t\t<ToggleGroupControl\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Justification' ) }\n\t\t\t\t\t\tvalue={ justifyContent }\n\t\t\t\t\t\tonChange={ onJustificationChange }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ justificationOptions.map(\n\t\t\t\t\t\t\t( { value, icon, label } ) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\t\t\t\t\t\t\tkey={ value }\n\t\t\t\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ToggleGroupControl>\n\t\t\t\t) }\n\t\t\t</VStack>\n\t\t);\n\t},\n\ttoolBarControls: function DefaultLayoutToolbarControls( {\n\t\tlayout = {},\n\t\tonChange,\n\t\tlayoutBlockSupport,\n\t} ) {\n\t\tconst { allowJustification = true } = layoutBlockSupport;\n\n\t\tif ( ! allowJustification ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<BlockControls group=\"block\" __experimentalShareWithChildBlocks>\n\t\t\t\t<DefaultLayoutJustifyContentControl\n\t\t\t\t\tlayout={ layout }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t);\n\t},\n\tgetLayoutStyle: function getLayoutStyle( {\n\t\tselector,\n\t\tlayout = {},\n\t\tstyle,\n\t\tblockName,\n\t\thasBlockGapSupport,\n\t\tlayoutDefinitions = LAYOUT_DEFINITIONS,\n\t} ) {\n\t\tconst { contentSize, wideSize, justifyContent } = layout;\n\t\tconst blockGapStyleValue = getGapCSSValue( style?.spacing?.blockGap );\n\n\t\t// If a block's block.json skips serialization for spacing or\n\t\t// spacing.blockGap, don't apply the user-defined value to the styles.\n\t\tlet blockGapValue = '';\n\t\tif ( ! shouldSkipSerialization( blockName, 'spacing', 'blockGap' ) ) {\n\t\t\t// If an object is provided only use the 'top' value for this kind of gap.\n\t\t\tif ( blockGapStyleValue?.top ) {\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue?.top );\n\t\t\t} else if ( typeof blockGapStyleValue === 'string' ) {\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue );\n\t\t\t}\n\t\t}\n\n\t\tconst marginLeft =\n\t\t\tjustifyContent === 'left' ? '0 !important' : 'auto !important';\n\t\tconst marginRight =\n\t\t\tjustifyContent === 'right' ? '0 !important' : 'auto !important';\n\n\t\tlet output =\n\t\t\t!! contentSize || !! wideSize\n\t\t\t\t? `\n\t\t\t\t\t${ appendSelectors(\n\t\t\t\t\t\tselector,\n\t\t\t\t\t\t'> :where(:not(.alignleft):not(.alignright):not(.alignfull))'\n\t\t\t\t\t) } {\n\t\t\t\t\t\tmax-width: ${ contentSize ?? wideSize };\n\t\t\t\t\t\tmargin-left: ${ marginLeft };\n\t\t\t\t\t\tmargin-right: ${ marginRight };\n\t\t\t\t\t}\n\t\t\t\t\t${ appendSelectors( selector, '> .alignwide' ) }  {\n\t\t\t\t\t\tmax-width: ${ wideSize ?? contentSize };\n\t\t\t\t\t}\n\t\t\t\t\t${ appendSelectors( selector, '> .alignfull' ) } {\n\t\t\t\t\t\tmax-width: none;\n\t\t\t\t\t}\n\t\t\t\t`\n\t\t\t\t: '';\n\n\t\tif ( justifyContent === 'left' ) {\n\t\t\toutput += `${ appendSelectors(\n\t\t\t\tselector,\n\t\t\t\t'> :where(:not(.alignleft):not(.alignright):not(.alignfull))'\n\t\t\t) }\n\t\t\t{ margin-left: ${ marginLeft }; }`;\n\t\t} else if ( justifyContent === 'right' ) {\n\t\t\toutput += `${ appendSelectors(\n\t\t\t\tselector,\n\t\t\t\t'> :where(:not(.alignleft):not(.alignright):not(.alignfull))'\n\t\t\t) }\n\t\t\t{ margin-right: ${ marginRight }; }`;\n\t\t}\n\n\t\t// If there is custom padding, add negative margins for alignfull blocks.\n\t\tif ( style?.spacing?.padding ) {\n\t\t\t// The style object might be storing a preset so we need to make sure we get a usable value.\n\t\t\tconst paddingValues = getCSSRules( style );\n\t\t\tpaddingValues.forEach( ( rule ) => {\n\t\t\t\tif ( rule.key === 'paddingRight' ) {\n\t\t\t\t\t// Add unit if 0, to avoid calc(0 * -1) which is invalid.\n\t\t\t\t\tconst paddingRightValue =\n\t\t\t\t\t\trule.value === '0' ? '0px' : rule.value;\n\n\t\t\t\t\toutput += `\n\t\t\t\t\t${ appendSelectors( selector, '> .alignfull' ) } {\n\t\t\t\t\t\tmargin-right: calc(${ paddingRightValue } * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\t} else if ( rule.key === 'paddingLeft' ) {\n\t\t\t\t\t// Add unit if 0, to avoid calc(0 * -1) which is invalid.\n\t\t\t\t\tconst paddingLeftValue =\n\t\t\t\t\t\trule.value === '0' ? '0px' : rule.value;\n\n\t\t\t\t\toutput += `\n\t\t\t\t\t${ appendSelectors( selector, '> .alignfull' ) } {\n\t\t\t\t\t\tmargin-left: calc(${ paddingLeftValue } * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\n\t\t\toutput += getBlockGapCSS(\n\t\t\t\tselector,\n\t\t\t\tlayoutDefinitions,\n\t\t\t\t'constrained',\n\t\t\t\tblockGapValue\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t},\n\tgetOrientation() {\n\t\treturn 'vertical';\n\t},\n\tgetAlignments( layout ) {\n\t\tconst alignmentInfo = getAlignmentsInfo( layout );\n\t\tif ( layout.alignments !== undefined ) {\n\t\t\tif ( ! layout.alignments.includes( 'none' ) ) {\n\t\t\t\tlayout.alignments.unshift( 'none' );\n\t\t\t}\n\t\t\treturn layout.alignments.map( ( alignment ) => ( {\n\t\t\t\tname: alignment,\n\t\t\t\tinfo: alignmentInfo[ alignment ],\n\t\t\t} ) );\n\t\t}\n\t\tconst { contentSize, wideSize } = layout;\n\n\t\tconst alignments = [\n\t\t\t{ name: 'left' },\n\t\t\t{ name: 'center' },\n\t\t\t{ name: 'right' },\n\t\t];\n\n\t\tif ( contentSize ) {\n\t\t\talignments.unshift( { name: 'full' } );\n\t\t}\n\n\t\tif ( wideSize ) {\n\t\t\talignments.unshift( { name: 'wide', info: alignmentInfo.wide } );\n\t\t}\n\n\t\talignments.unshift( { name: 'none', info: alignmentInfo.none } );\n\n\t\treturn alignments;\n\t},\n};\n\nconst POPOVER_PROPS = {\n\tplacement: 'bottom-start',\n};\n\nfunction DefaultLayoutJustifyContentControl( { layout, onChange } ) {\n\tconst { justifyContent = 'center' } = layout;\n\tconst onJustificationChange = ( value ) => {\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tjustifyContent: value,\n\t\t} );\n\t};\n\tconst allowedControls = [ 'left', 'center', 'right' ];\n\n\treturn (\n\t\t<JustifyContentControl\n\t\t\tallowedControls={ allowedControls }\n\t\t\tvalue={ justifyContent }\n\t\t\tonChange={ onJustificationChange }\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nimport {\n\tBaseControl,\n\tFlex,\n\tFlexItem,\n\tRangeControl,\n\t__experimentalNumberControl as NumberControl,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { appendSelectors, getBlockGapCSS } from './utils';\nimport { getGapCSSValue } from '../hooks/gap';\nimport { shouldSkipSerialization } from '../hooks/utils';\nimport { LAYOUT_DEFINITIONS } from './definitions';\n\nconst RANGE_CONTROL_MAX_VALUES = {\n\tpx: 600,\n\t'%': 100,\n\tvw: 100,\n\tvh: 100,\n\tem: 38,\n\trem: 38,\n\tsvw: 100,\n\tlvw: 100,\n\tdvw: 100,\n\tsvh: 100,\n\tlvh: 100,\n\tdvh: 100,\n\tvi: 100,\n\tsvi: 100,\n\tlvi: 100,\n\tdvi: 100,\n\tvb: 100,\n\tsvb: 100,\n\tlvb: 100,\n\tdvb: 100,\n\tvmin: 100,\n\tsvmin: 100,\n\tlvmin: 100,\n\tdvmin: 100,\n\tvmax: 100,\n\tsvmax: 100,\n\tlvmax: 100,\n\tdvmax: 100,\n};\n\nconst units = [\n\t{ value: 'px', label: 'px', default: 0 },\n\t{ value: 'rem', label: 'rem', default: 0 },\n\t{ value: 'em', label: 'em', default: 0 },\n];\n\nexport default {\n\tname: 'grid',\n\tlabel: __( 'Grid' ),\n\tinspectorControls: function GridLayoutInspectorControls( {\n\t\tlayout = {},\n\t\tonChange,\n\t\tlayoutBlockSupport = {},\n\t} ) {\n\t\tconst { allowSizingOnChildren = false } = layoutBlockSupport;\n\n\t\t// In the experiment we want to also show column control in Auto mode, and\n\t\t// the minimum width control in Manual mode.\n\t\tconst showColumnsControl =\n\t\t\twindow.__experimentalEnableGridInteractivity ||\n\t\t\t!! layout?.columnCount;\n\t\tconst showMinWidthControl =\n\t\t\twindow.__experimentalEnableGridInteractivity ||\n\t\t\t! layout?.columnCount;\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<GridLayoutTypeControl\n\t\t\t\t\tlayout={ layout }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t/>\n\t\t\t\t<VStack spacing={ 4 }>\n\t\t\t\t\t{ showColumnsControl && (\n\t\t\t\t\t\t<GridLayoutColumnsAndRowsControl\n\t\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\tallowSizingOnChildren={ allowSizingOnChildren }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showMinWidthControl && (\n\t\t\t\t\t\t<GridLayoutMinimumWidthControl\n\t\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</VStack>\n\t\t\t</>\n\t\t);\n\t},\n\ttoolBarControls: function GridLayoutToolbarControls() {\n\t\treturn null;\n\t},\n\tgetLayoutStyle: function getLayoutStyle( {\n\t\tselector,\n\t\tlayout,\n\t\tstyle,\n\t\tblockName,\n\t\thasBlockGapSupport,\n\t\tlayoutDefinitions = LAYOUT_DEFINITIONS,\n\t} ) {\n\t\tconst {\n\t\t\tminimumColumnWidth = null,\n\t\t\tcolumnCount = null,\n\t\t\trowCount = null,\n\t\t} = layout;\n\n\t\t// Check that the grid layout attributes are of the correct type, so that we don't accidentally\n\t\t// write code that stores a string attribute instead of a number.\n\t\tif ( process.env.NODE_ENV === 'development' ) {\n\t\t\tif (\n\t\t\t\tminimumColumnWidth &&\n\t\t\t\ttypeof minimumColumnWidth !== 'string'\n\t\t\t) {\n\t\t\t\tthrow new Error( 'minimumColumnWidth must be a string' );\n\t\t\t}\n\t\t\tif ( columnCount && typeof columnCount !== 'number' ) {\n\t\t\t\tthrow new Error( 'columnCount must be a number' );\n\t\t\t}\n\t\t\tif ( rowCount && typeof rowCount !== 'number' ) {\n\t\t\t\tthrow new Error( 'rowCount must be a number' );\n\t\t\t}\n\t\t}\n\n\t\t// If a block's block.json skips serialization for spacing or spacing.blockGap,\n\t\t// don't apply the user-defined value to the styles.\n\t\tconst blockGapValue =\n\t\t\tstyle?.spacing?.blockGap &&\n\t\t\t! shouldSkipSerialization( blockName, 'spacing', 'blockGap' )\n\t\t\t\t? getGapCSSValue( style?.spacing?.blockGap, '0.5em' )\n\t\t\t\t: undefined;\n\n\t\tlet output = '';\n\t\tconst rules = [];\n\n\t\tif ( minimumColumnWidth && columnCount > 0 ) {\n\t\t\tconst maxValue = `max(${ minimumColumnWidth }, ( 100% - (${\n\t\t\t\tblockGapValue || '1.2rem'\n\t\t\t}*${ columnCount - 1 }) ) / ${ columnCount })`;\n\t\t\trules.push(\n\t\t\t\t`grid-template-columns: repeat(auto-fill, minmax(${ maxValue }, 1fr))`,\n\t\t\t\t`container-type: inline-size`\n\t\t\t);\n\t\t\tif ( rowCount ) {\n\t\t\t\trules.push(\n\t\t\t\t\t`grid-template-rows: repeat(${ rowCount }, minmax(1rem, auto))`\n\t\t\t\t);\n\t\t\t}\n\t\t} else if ( columnCount ) {\n\t\t\trules.push(\n\t\t\t\t`grid-template-columns: repeat(${ columnCount }, minmax(0, 1fr))`\n\t\t\t);\n\t\t\tif ( rowCount ) {\n\t\t\t\trules.push(\n\t\t\t\t\t`grid-template-rows: repeat(${ rowCount }, minmax(1rem, auto))`\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\trules.push(\n\t\t\t\t`grid-template-columns: repeat(auto-fill, minmax(min(${\n\t\t\t\t\tminimumColumnWidth || '12rem'\n\t\t\t\t}, 100%), 1fr))`,\n\t\t\t\t'container-type: inline-size'\n\t\t\t);\n\t\t}\n\n\t\tif ( rules.length ) {\n\t\t\t// Reason to disable: the extra line breaks added by prettier mess with the unit tests.\n\t\t\t// eslint-disable-next-line prettier/prettier\n\t\t\toutput = `${ appendSelectors( selector ) } { ${ rules.join(\n\t\t\t\t'; '\n\t\t\t) }; }`;\n\t\t}\n\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\n\t\t\toutput += getBlockGapCSS(\n\t\t\t\tselector,\n\t\t\t\tlayoutDefinitions,\n\t\t\t\t'grid',\n\t\t\t\tblockGapValue\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t},\n\tgetOrientation() {\n\t\treturn 'horizontal';\n\t},\n\tgetAlignments() {\n\t\treturn [];\n\t},\n};\n\n// Enables setting minimum width of grid items.\nfunction GridLayoutMinimumWidthControl( { layout, onChange } ) {\n\tconst { minimumColumnWidth, columnCount, isManualPlacement } = layout;\n\tconst defaultValue = isManualPlacement || columnCount ? null : '12rem';\n\tconst value = minimumColumnWidth || defaultValue;\n\tconst [ quantity, unit = 'rem' ] =\n\t\tparseQuantityAndUnitFromRawValue( value );\n\n\tconst handleSliderChange = ( next ) => {\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tminimumColumnWidth: [ next, unit ].join( '' ),\n\t\t} );\n\t};\n\n\t// Mostly copied from HeightControl.\n\tconst handleUnitChange = ( newUnit ) => {\n\t\t// Attempt to smooth over differences between currentUnit and newUnit.\n\t\t// This should slightly improve the experience of switching between unit types.\n\t\tlet newValue;\n\n\t\tif ( [ 'em', 'rem' ].includes( newUnit ) && unit === 'px' ) {\n\t\t\t// Convert pixel value to an approximate of the new unit, assuming a root size of 16px.\n\t\t\tnewValue = ( quantity / 16 ).toFixed( 2 ) + newUnit;\n\t\t} else if ( [ 'em', 'rem' ].includes( unit ) && newUnit === 'px' ) {\n\t\t\t// Convert to pixel value assuming a root size of 16px.\n\t\t\tnewValue = Math.round( quantity * 16 ) + newUnit;\n\t\t}\n\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tminimumColumnWidth: newValue,\n\t\t} );\n\t};\n\n\treturn (\n\t\t<fieldset className=\"block-editor-hooks__grid-layout-minimum-width-control\">\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t{ __( 'Minimum column width' ) }\n\t\t\t</BaseControl.VisualLabel>\n\t\t\t<Flex gap={ 4 }>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<UnitControl\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\tonChange={ ( newValue ) => {\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\tminimumColumnWidth:\n\t\t\t\t\t\t\t\t\tnewValue === '' ? undefined : newValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonUnitChange={ handleUnitChange }\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tlabel={ __( 'Minimum column width' ) }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tonChange={ handleSliderChange }\n\t\t\t\t\t\tvalue={ quantity || 0 }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tmax={ RANGE_CONTROL_MAX_VALUES[ unit ] || 600 }\n\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t\tlabel={ __( 'Minimum column width' ) }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</fieldset>\n\t);\n}\n\n// Enables setting number of grid columns\nfunction GridLayoutColumnsAndRowsControl( {\n\tlayout,\n\tonChange,\n\tallowSizingOnChildren,\n} ) {\n\t// If the grid interactivity experiment is enabled, allow unsetting the column count.\n\tconst defaultColumnCount = window.__experimentalEnableGridInteractivity\n\t\t? undefined\n\t\t: 3;\n\tconst {\n\t\tcolumnCount = defaultColumnCount,\n\t\trowCount,\n\t\tisManualPlacement,\n\t} = layout;\n\n\treturn (\n\t\t<>\n\t\t\t<fieldset className=\"block-editor-hooks__grid-layout-columns-and-rows-controls\">\n\t\t\t\t{ ( ! window.__experimentalEnableGridInteractivity ||\n\t\t\t\t\t! isManualPlacement ) && (\n\t\t\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t\t\t{ __( 'Columns' ) }\n\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t) }\n\t\t\t\t<Flex gap={ 4 }>\n\t\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t\t<NumberControl\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\twindow.__experimentalEnableGridInteractivity\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t// Allow unsetting the column count when in auto mode.\n\t\t\t\t\t\t\t\t\tconst defaultNewColumnCount =\n\t\t\t\t\t\t\t\t\t\tisManualPlacement ? 1 : undefined;\n\t\t\t\t\t\t\t\t\tconst newColumnCount =\n\t\t\t\t\t\t\t\t\t\tvalue === '' || value === '0'\n\t\t\t\t\t\t\t\t\t\t\t? defaultNewColumnCount\n\t\t\t\t\t\t\t\t\t\t\t: parseInt( value, 10 );\n\t\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\t\t\tcolumnCount: newColumnCount,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// Don't allow unsetting the column count.\n\t\t\t\t\t\t\t\t\tconst newColumnCount =\n\t\t\t\t\t\t\t\t\t\tvalue === '' || value === '0'\n\t\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t\t: parseInt( value, 10 );\n\t\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\t\t\tcolumnCount: newColumnCount,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ columnCount }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\t\thideLabelFromVision={\n\t\t\t\t\t\t\t\t! window.__experimentalEnableGridInteractivity ||\n\t\t\t\t\t\t\t\t! isManualPlacement\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexItem>\n\n\t\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t\t{ window.__experimentalEnableGridInteractivity &&\n\t\t\t\t\t\tallowSizingOnChildren &&\n\t\t\t\t\t\tisManualPlacement ? (\n\t\t\t\t\t\t\t<NumberControl\n\t\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\t\t// Don't allow unsetting the row count.\n\t\t\t\t\t\t\t\t\tconst newRowCount =\n\t\t\t\t\t\t\t\t\t\tvalue === '' || value === '0'\n\t\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t\t: parseInt( value, 10 );\n\t\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\t\t\trowCount: newRowCount,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tvalue={ rowCount }\n\t\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\t\tlabel={ __( 'Rows' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tvalue={ columnCount ?? 1 }\n\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\t\t\tcolumnCount:\n\t\t\t\t\t\t\t\t\t\t\tvalue === '' || value === '0'\n\t\t\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t\t\t: value,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\t\tmax={ 16 }\n\t\t\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</FlexItem>\n\t\t\t\t</Flex>\n\t\t\t</fieldset>\n\t\t</>\n\t);\n}\n\n// Enables switching between grid types\nfunction GridLayoutTypeControl( { layout, onChange } ) {\n\tconst { columnCount, rowCount, minimumColumnWidth, isManualPlacement } =\n\t\tlayout;\n\n\t/**\n\t * When switching, temporarily save any custom values set on the\n\t * previous type so we can switch back without loss.\n\t */\n\tconst [ tempColumnCount, setTempColumnCount ] = useState(\n\t\tcolumnCount || 3\n\t);\n\tconst [ tempRowCount, setTempRowCount ] = useState( rowCount );\n\tconst [ tempMinimumColumnWidth, setTempMinimumColumnWidth ] = useState(\n\t\tminimumColumnWidth || '12rem'\n\t);\n\n\tconst gridPlacement =\n\t\tisManualPlacement ||\n\t\t( !! columnCount && ! window.__experimentalEnableGridInteractivity )\n\t\t\t? 'manual'\n\t\t\t: 'auto';\n\n\tconst onChangeType = ( value ) => {\n\t\tif ( value === 'manual' ) {\n\t\t\tsetTempMinimumColumnWidth( minimumColumnWidth || '12rem' );\n\t\t} else {\n\t\t\tsetTempColumnCount( columnCount || 3 );\n\t\t\tsetTempRowCount( rowCount );\n\t\t}\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tcolumnCount: value === 'manual' ? tempColumnCount : null,\n\t\t\trowCount:\n\t\t\t\tvalue === 'manual' &&\n\t\t\t\twindow.__experimentalEnableGridInteractivity\n\t\t\t\t\t? tempRowCount\n\t\t\t\t\t: undefined,\n\t\t\tisManualPlacement:\n\t\t\t\tvalue === 'manual' &&\n\t\t\t\twindow.__experimentalEnableGridInteractivity\n\t\t\t\t\t? true\n\t\t\t\t\t: undefined,\n\t\t\tminimumColumnWidth:\n\t\t\t\tvalue === 'auto' ? tempMinimumColumnWidth : null,\n\t\t} );\n\t};\n\n\tconst helpText =\n\t\tgridPlacement === 'manual'\n\t\t\t? __(\n\t\t\t\t\t'Grid items can be manually placed in any position on the grid.'\n\t\t\t  )\n\t\t\t: __(\n\t\t\t\t\t'Grid items are placed automatically depending on their order.'\n\t\t\t  );\n\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\t__next40pxDefaultSize\n\t\t\t__nextHasNoMarginBottom\n\t\t\tlabel={ __( 'Grid item position' ) }\n\t\t\tvalue={ gridPlacement }\n\t\t\tonChange={ onChangeType }\n\t\t\tisBlock\n\t\t\thelp={\n\t\t\t\twindow.__experimentalEnableGridInteractivity\n\t\t\t\t\t? helpText\n\t\t\t\t\t: undefined\n\t\t\t}\n\t\t>\n\t\t\t<ToggleGroupControlOption\n\t\t\t\tkey=\"auto\"\n\t\t\t\tvalue=\"auto\"\n\t\t\t\tlabel={ __( 'Auto' ) }\n\t\t\t/>\n\t\t\t<ToggleGroupControlOption\n\t\t\t\tkey=\"manual\"\n\t\t\t\tvalue=\"manual\"\n\t\t\t\tlabel={ __( 'Manual' ) }\n\t\t\t/>\n\t\t</ToggleGroupControl>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport flex from './flex';\nimport flow from './flow';\nimport constrained from './constrained';\nimport grid from './grid';\n\nconst layoutTypes = [ flow, flex, constrained, grid ];\n\n/**\n * Retrieves a layout type by name.\n *\n * @param {string} name - The name of the layout type.\n * @return {Object} Layout type.\n */\nexport function getLayoutType( name = 'default' ) {\n\treturn layoutTypes.find( ( layoutType ) => layoutType.name === name );\n}\n\n/**\n * Retrieves the available layout types.\n *\n * @return {Array} Layout types.\n */\nexport function getLayoutTypes() {\n\treturn layoutTypes;\n}\n","/**\n * WordPress dependencies\n */\nimport { createContext, useContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getLayoutType } from '../../layouts';\nimport { useSettings } from '../use-settings';\n\nexport const defaultLayout = { type: 'default' };\n\nconst Layout = createContext( defaultLayout );\n\n/**\n * Allows to define the layout.\n */\nexport const LayoutProvider = Layout.Provider;\n\n/**\n * React hook used to retrieve the layout config.\n */\nexport function useLayout() {\n\treturn useContext( Layout );\n}\n\nexport function LayoutStyle( { layout = {}, css, ...props } ) {\n\tconst layoutType = getLayoutType( layout.type );\n\tconst [ blockGapSupport ] = useSettings( 'spacing.blockGap' );\n\tconst hasBlockGapSupport = blockGapSupport !== null;\n\n\tif ( layoutType ) {\n\t\tif ( css ) {\n\t\t\treturn <style>{ css }</style>;\n\t\t}\n\t\tconst layoutStyle = layoutType.getLayoutStyle?.( {\n\t\t\thasBlockGapSupport,\n\t\t\tlayout,\n\t\t\t...props,\n\t\t} );\n\t\tif ( layoutStyle ) {\n\t\t\treturn <style>{ layoutStyle }</style>;\n\t\t}\n\t}\n\treturn null;\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useLayout } from '../block-list/layout';\nimport { store as blockEditorStore } from '../../store';\nimport { getLayoutType } from '../../layouts';\n\nconst EMPTY_ARRAY = [];\nconst DEFAULT_CONTROLS = [ 'none', 'left', 'center', 'right', 'wide', 'full' ];\nconst WIDE_CONTROLS = [ 'wide', 'full' ];\n\nexport default function useAvailableAlignments( controls = DEFAULT_CONTROLS ) {\n\t// Always add the `none` option if not exists.\n\tif ( ! controls.includes( 'none' ) ) {\n\t\tcontrols = [ 'none', ...controls ];\n\t}\n\tconst isNoneOnly = controls.length === 1 && controls[ 0 ] === 'none';\n\n\tconst [ wideControlsEnabled, themeSupportsLayout, isBlockBasedTheme ] =\n\t\tuseSelect(\n\t\t\t( select ) => {\n\t\t\t\t// If `isNoneOnly` is true, we'll be returning early because there is\n\t\t\t\t// nothing to filter on an empty array. We won't need the info from\n\t\t\t\t// the `useSelect` but we must call it anyway because Rules of Hooks.\n\t\t\t\t// So the callback returns early to avoid block editor subscription.\n\t\t\t\tif ( isNoneOnly ) {\n\t\t\t\t\treturn [ false, false, false ];\n\t\t\t\t}\n\n\t\t\t\tconst settings = select( blockEditorStore ).getSettings();\n\t\t\t\treturn [\n\t\t\t\t\tsettings.alignWide ?? false,\n\t\t\t\t\tsettings.supportsLayout,\n\t\t\t\t\tsettings.__unstableIsBlockBasedTheme,\n\t\t\t\t];\n\t\t\t},\n\t\t\t[ isNoneOnly ]\n\t\t);\n\tconst layout = useLayout();\n\n\tif ( isNoneOnly ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\tconst layoutType = getLayoutType( layout?.type );\n\n\tif ( themeSupportsLayout ) {\n\t\tconst layoutAlignments = layoutType.getAlignments(\n\t\t\tlayout,\n\t\t\tisBlockBasedTheme\n\t\t);\n\t\tconst alignments = layoutAlignments.filter( ( alignment ) =>\n\t\t\tcontrols.includes( alignment.name )\n\t\t);\n\t\t// While we treat `none` as an alignment, we shouldn't return it if no\n\t\t// other alignments exist.\n\t\tif ( alignments.length === 1 && alignments[ 0 ].name === 'none' ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\t\treturn alignments;\n\t}\n\n\t// Starting here, it's the fallback for themes not supporting the layout config.\n\tif ( layoutType.name !== 'default' && layoutType.name !== 'constrained' ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\tconst alignments = controls\n\t\t.filter( ( control ) => {\n\t\t\tif ( layout.alignments ) {\n\t\t\t\treturn layout.alignments.includes( control );\n\t\t\t}\n\n\t\t\tif ( ! wideControlsEnabled && WIDE_CONTROLS.includes( control ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn DEFAULT_CONTROLS.includes( control );\n\t\t} )\n\t\t.map( ( name ) => ( { name } ) );\n\n\t// While we treat `none` as an alignment, we shouldn't return it if no\n\t// other alignments exist.\n\tif ( alignments.length === 1 && alignments[ 0 ].name === 'none' ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\treturn alignments;\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst positionLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M5 5.5h8V4H5v1.5ZM5 20h8v-1.5H5V20ZM19 9H5v6h14V9Z\" />\n\t</SVG>\n);\n\nexport default positionLeft;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst positionCenter = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M19 5.5H5V4h14v1.5ZM19 20H5v-1.5h14V20ZM7 9h10v6H7V9Z\" />\n\t</SVG>\n);\n\nexport default positionCenter;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst positionRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M19 5.5h-8V4h8v1.5ZM19 20h-8v-1.5h8V20ZM5 9h14v6H5V9Z\" />\n\t</SVG>\n);\n\nexport default positionRight;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst stretchFullWidth = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M5 4h14v11H5V4Zm11 16H8v-1.5h8V20Z\" />\n\t</SVG>\n);\n\nexport default stretchFullWidth;\n","/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport {\n\talignNone,\n\tpositionCenter,\n\tpositionLeft,\n\tpositionRight,\n\tstretchFullWidth,\n\tstretchWide,\n} from '@wordpress/icons';\n\nexport const BLOCK_ALIGNMENTS_CONTROLS = {\n\tnone: {\n\t\ticon: alignNone,\n\t\ttitle: _x( 'None', 'Alignment option' ),\n\t},\n\tleft: {\n\t\ticon: positionLeft,\n\t\ttitle: __( 'Align left' ),\n\t},\n\tcenter: {\n\t\ticon: positionCenter,\n\t\ttitle: __( 'Align center' ),\n\t},\n\tright: {\n\t\ticon: positionRight,\n\t\ttitle: __( 'Align right' ),\n\t},\n\twide: {\n\t\ticon: stretchWide,\n\t\ttitle: __( 'Wide width' ),\n\t},\n\tfull: {\n\t\ticon: stretchFullWidth,\n\t\ttitle: __( 'Full width' ),\n\t},\n};\n\nexport const DEFAULT_CONTROL = 'none';\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tToolbarDropdownMenu,\n\tToolbarGroup,\n\tMenuGroup,\n\tMenuItem,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport useAvailableAlignments from './use-available-alignments';\nimport { BLOCK_ALIGNMENTS_CONTROLS, DEFAULT_CONTROL } from './constants';\n\nfunction BlockAlignmentUI( {\n\tvalue,\n\tonChange,\n\tcontrols,\n\tisToolbar,\n\tisCollapsed = true,\n} ) {\n\tconst enabledControls = useAvailableAlignments( controls );\n\tconst hasEnabledControls = !! enabledControls.length;\n\n\tif ( ! hasEnabledControls ) {\n\t\treturn null;\n\t}\n\n\tfunction onChangeAlignment( align ) {\n\t\tonChange( [ value, 'none' ].includes( align ) ? undefined : align );\n\t}\n\n\tconst activeAlignmentControl = BLOCK_ALIGNMENTS_CONTROLS[ value ];\n\tconst defaultAlignmentControl =\n\t\tBLOCK_ALIGNMENTS_CONTROLS[ DEFAULT_CONTROL ];\n\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\n\tconst commonProps = {\n\t\ticon: activeAlignmentControl\n\t\t\t? activeAlignmentControl.icon\n\t\t\t: defaultAlignmentControl.icon,\n\t\tlabel: __( 'Align' ),\n\t};\n\tconst extraProps = isToolbar\n\t\t? {\n\t\t\t\tisCollapsed,\n\t\t\t\tcontrols: enabledControls.map( ( { name: controlName } ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...BLOCK_ALIGNMENTS_CONTROLS[ controlName ],\n\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\tvalue === controlName ||\n\t\t\t\t\t\t\t( ! value && controlName === 'none' ),\n\t\t\t\t\t\trole: isCollapsed ? 'menuitemradio' : undefined,\n\t\t\t\t\t\tonClick: () => onChangeAlignment( controlName ),\n\t\t\t\t\t};\n\t\t\t\t} ),\n\t\t  }\n\t\t: {\n\t\t\t\ttoggleProps: { description: __( 'Change alignment' ) },\n\t\t\t\tchildren: ( { onClose } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<MenuGroup className=\"block-editor-block-alignment-control__menu-group\">\n\t\t\t\t\t\t\t\t{ enabledControls.map(\n\t\t\t\t\t\t\t\t\t( { name: controlName, info } ) => {\n\t\t\t\t\t\t\t\t\t\tconst { icon, title } =\n\t\t\t\t\t\t\t\t\t\t\tBLOCK_ALIGNMENTS_CONTROLS[\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolName\n\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t// If no value is provided, mark as selected the `none` option.\n\t\t\t\t\t\t\t\t\t\tconst isSelected =\n\t\t\t\t\t\t\t\t\t\t\tcontrolName === value ||\n\t\t\t\t\t\t\t\t\t\t\t( ! value &&\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolName === 'none' );\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\tkey={ controlName }\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'components-dropdown-menu__menu-item',\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'is-active': isSelected,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChangeAlignment(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolName\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\trole=\"menuitemradio\"\n\t\t\t\t\t\t\t\t\t\t\t\tinfo={ info }\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t  };\n\n\treturn <UIComponent { ...commonProps } { ...extraProps } />;\n}\n\nexport default BlockAlignmentUI;\n","/**\n * Internal dependencies\n */\nimport BlockAlignmentUI from './ui';\n\nconst BlockAlignmentControl = ( props ) => {\n\treturn <BlockAlignmentUI { ...props } isToolbar={ false } />;\n};\n\nconst BlockAlignmentToolbar = ( props ) => {\n\treturn <BlockAlignmentUI { ...props } isToolbar />;\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-alignment-control/README.md\n */\nexport { BlockAlignmentControl, BlockAlignmentToolbar };\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport {\n\tuseBlockEditContext,\n\tblockEditingModeKey,\n} from '../block-edit/context';\n\n/**\n * @typedef {'disabled'|'contentOnly'|'default'} BlockEditingMode\n */\n\n/**\n * Allows a block to restrict the user interface that is displayed for editing\n * that block and its inner blocks.\n *\n * @example\n * ```js\n * function MyBlock( { attributes, setAttributes } ) {\n *     useBlockEditingMode( 'disabled' );\n *     return <div { ...useBlockProps() }></div>;\n * }\n * ```\n *\n * `mode` can be one of three options:\n *\n * - `'disabled'`: Prevents editing the block entirely, i.e. it cannot be\n *   selected.\n * - `'contentOnly'`: Hides all non-content UI, e.g. auxiliary controls in the\n *   toolbar, the block movers, block settings.\n * - `'default'`: Allows editing the block as normal.\n *\n * The mode is inherited by all of the block's inner blocks, unless they have\n * their own mode.\n *\n * If called outside of a block context, the mode is applied to all blocks.\n *\n * @param {?BlockEditingMode} mode The editing mode to apply. If undefined, the\n *                                 current editing mode is not changed.\n *\n * @return {BlockEditingMode} The current editing mode.\n */\nexport function useBlockEditingMode( mode ) {\n\tconst context = useBlockEditContext();\n\tconst { clientId = '' } = context;\n\tconst { setBlockEditingMode, unsetBlockEditingMode } =\n\t\tuseDispatch( blockEditorStore );\n\tconst globalBlockEditingMode = useSelect(\n\t\t( select ) =>\n\t\t\t// Avoid adding the subscription if not needed!\n\t\t\tclientId ? null : select( blockEditorStore ).getBlockEditingMode(),\n\t\t[ clientId ]\n\t);\n\tuseEffect( () => {\n\t\tif ( mode ) {\n\t\t\tsetBlockEditingMode( clientId, mode );\n\t\t}\n\t\treturn () => {\n\t\t\tif ( mode ) {\n\t\t\t\tunsetBlockEditingMode( clientId );\n\t\t\t}\n\t\t};\n\t}, [ clientId, mode, setBlockEditingMode, unsetBlockEditingMode ] );\n\treturn clientId ? context[ blockEditingModeKey ] : globalBlockEditingMode;\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport {\n\tgetBlockSupport,\n\tgetBlockType,\n\thasBlockSupport,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { BlockControls, BlockAlignmentControl } from '../components';\nimport useAvailableAlignments from '../components/block-alignment-control/use-available-alignments';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\n/**\n * An array which includes all possible valid alignments,\n * used to validate if an alignment is valid or not.\n *\n * @constant\n * @type {string[]}\n */\nconst ALL_ALIGNMENTS = [ 'left', 'center', 'right', 'wide', 'full' ];\n\n/**\n * An array which includes all wide alignments.\n * In order for this alignments to be valid they need to be supported by the block,\n * and by the theme.\n *\n * @constant\n * @type {string[]}\n */\nconst WIDE_ALIGNMENTS = [ 'wide', 'full' ];\n\n/**\n * Returns the valid alignments.\n * Takes into consideration the aligns supported by a block, if the block supports wide controls or not and if theme supports wide controls or not.\n * Exported just for testing purposes, not exported outside the module.\n *\n * @param {?boolean|string[]} blockAlign          Aligns supported by the block.\n * @param {?boolean}          hasWideBlockSupport True if block supports wide alignments. And False otherwise.\n * @param {?boolean}          hasWideEnabled      True if theme supports wide alignments. And False otherwise.\n *\n * @return {string[]} Valid alignments.\n */\nexport function getValidAlignments(\n\tblockAlign,\n\thasWideBlockSupport = true,\n\thasWideEnabled = true\n) {\n\tlet validAlignments;\n\tif ( Array.isArray( blockAlign ) ) {\n\t\tvalidAlignments = ALL_ALIGNMENTS.filter( ( value ) =>\n\t\t\tblockAlign.includes( value )\n\t\t);\n\t} else if ( blockAlign === true ) {\n\t\t// `true` includes all alignments...\n\t\tvalidAlignments = [ ...ALL_ALIGNMENTS ];\n\t} else {\n\t\tvalidAlignments = [];\n\t}\n\n\tif (\n\t\t! hasWideEnabled ||\n\t\t( blockAlign === true && ! hasWideBlockSupport )\n\t) {\n\t\treturn validAlignments.filter(\n\t\t\t( alignment ) => ! WIDE_ALIGNMENTS.includes( alignment )\n\t\t);\n\t}\n\n\treturn validAlignments;\n}\n\n/**\n * Filters registered block settings, extending attributes to include `align`.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( 'type' in ( settings.attributes?.align ?? {} ) ) {\n\t\treturn settings;\n\t}\n\tif ( hasBlockSupport( settings, 'align' ) ) {\n\t\t// Gracefully handle if settings.attributes is undefined.\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\talign: {\n\t\t\t\ttype: 'string',\n\t\t\t\t// Allow for '' since it is used by the `updateAlignment` function\n\t\t\t\t// in toolbar controls for special cases with defined default values.\n\t\t\t\tenum: [ ...ALL_ALIGNMENTS, '' ],\n\t\t\t},\n\t\t};\n\t}\n\n\treturn settings;\n}\n\nfunction BlockEditAlignmentToolbarControlsPure( {\n\tname: blockName,\n\talign,\n\tsetAttributes,\n} ) {\n\t// Compute the block valid alignments by taking into account,\n\t// if the theme supports wide alignments or not and the layout's\n\t// available alignments. We do that for conditionally rendering\n\t// Slot.\n\tconst blockAllowedAlignments = getValidAlignments(\n\t\tgetBlockSupport( blockName, 'align' ),\n\t\thasBlockSupport( blockName, 'alignWide', true )\n\t);\n\n\tconst validAlignments = useAvailableAlignments(\n\t\tblockAllowedAlignments\n\t).map( ( { name } ) => name );\n\tconst blockEditingMode = useBlockEditingMode();\n\tif ( ! validAlignments.length || blockEditingMode !== 'default' ) {\n\t\treturn null;\n\t}\n\n\tconst updateAlignment = ( nextAlign ) => {\n\t\tif ( ! nextAlign ) {\n\t\t\tconst blockType = getBlockType( blockName );\n\t\t\tconst blockDefaultAlign = blockType?.attributes?.align?.default;\n\t\t\tif ( blockDefaultAlign ) {\n\t\t\t\tnextAlign = '';\n\t\t\t}\n\t\t}\n\t\tsetAttributes( { align: nextAlign } );\n\t};\n\n\treturn (\n\t\t<BlockControls group=\"block\" __experimentalShareWithChildBlocks>\n\t\t\t<BlockAlignmentControl\n\t\t\t\tvalue={ align }\n\t\t\t\tonChange={ updateAlignment }\n\t\t\t\tcontrols={ validAlignments }\n\t\t\t/>\n\t\t</BlockControls>\n\t);\n}\n\nexport default {\n\tshareWithChildBlocks: true,\n\tedit: BlockEditAlignmentToolbarControlsPure,\n\tuseBlockProps,\n\taddSaveProps: addAssignedAlign,\n\tattributeKeys: [ 'align' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, 'align', false );\n\t},\n};\n\nfunction useBlockProps( { name, align } ) {\n\tconst blockAllowedAlignments = getValidAlignments(\n\t\tgetBlockSupport( name, 'align' ),\n\t\thasBlockSupport( name, 'alignWide', true )\n\t);\n\tconst validAlignments = useAvailableAlignments( blockAllowedAlignments );\n\n\tif ( validAlignments.some( ( alignment ) => alignment.name === align ) ) {\n\t\treturn { 'data-align': align };\n\t}\n\n\treturn {};\n}\n\n/**\n * Override props assigned to save component to inject alignment class name if\n * block supports it.\n *\n * @param {Object} props      Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addAssignedAlign( props, blockType, attributes ) {\n\tconst { align } = attributes;\n\tconst blockAlign = getBlockSupport( blockType, 'align' );\n\tconst hasWideBlockSupport = hasBlockSupport( blockType, 'alignWide', true );\n\n\t// Compute valid alignments without taking into account if\n\t// the theme supports wide alignments or not.\n\t// This way changing themes does not impact the block save.\n\tconst isAlignValid = getValidAlignments(\n\t\tblockAlign,\n\t\thasWideBlockSupport\n\t).includes( align );\n\tif ( isAlignValid ) {\n\t\tprops.className = clsx( `align${ align }`, props.className );\n\t}\n\n\treturn props;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/editor/align/addAttribute',\n\taddAttribute\n);\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst InspectorControlsDefault = createSlotFill( 'InspectorControls' );\nconst InspectorControlsAdvanced = createSlotFill( 'InspectorAdvancedControls' );\nconst InspectorControlsBindings = createSlotFill( 'InspectorControlsBindings' );\nconst InspectorControlsBackground = createSlotFill(\n\t'InspectorControlsBackground'\n);\nconst InspectorControlsBorder = createSlotFill( 'InspectorControlsBorder' );\nconst InspectorControlsColor = createSlotFill( 'InspectorControlsColor' );\nconst InspectorControlsFilter = createSlotFill( 'InspectorControlsFilter' );\nconst InspectorControlsDimensions = createSlotFill(\n\t'InspectorControlsDimensions'\n);\nconst InspectorControlsPosition = createSlotFill( 'InspectorControlsPosition' );\nconst InspectorControlsTypography = createSlotFill(\n\t'InspectorControlsTypography'\n);\nconst InspectorControlsListView = createSlotFill( 'InspectorControlsListView' );\nconst InspectorControlsStyles = createSlotFill( 'InspectorControlsStyles' );\nconst InspectorControlsEffects = createSlotFill( 'InspectorControlsEffects' );\n\nconst groups = {\n\tdefault: InspectorControlsDefault,\n\tadvanced: InspectorControlsAdvanced,\n\tbackground: InspectorControlsBackground,\n\tbindings: InspectorControlsBindings,\n\tborder: InspectorControlsBorder,\n\tcolor: InspectorControlsColor,\n\tdimensions: InspectorControlsDimensions,\n\teffects: InspectorControlsEffects,\n\tfilter: InspectorControlsFilter,\n\tlist: InspectorControlsListView,\n\tposition: InspectorControlsPosition,\n\tsettings: InspectorControlsDefault, // Alias for default.\n\tstyles: InspectorControlsStyles,\n\ttypography: InspectorControlsTypography,\n};\n\nexport default groups;\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalStyleProvider as StyleProvider,\n\t__experimentalToolsPanelContext as ToolsPanelContext,\n} from '@wordpress/components';\nimport warning from '@wordpress/warning';\nimport deprecated from '@wordpress/deprecated';\nimport { useEffect, useContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport {\n\tuseBlockEditContext,\n\tmayDisplayControlsKey,\n} from '../block-edit/context';\nimport groups from './groups';\n\nexport default function InspectorControlsFill( {\n\tchildren,\n\tgroup = 'default',\n\t__experimentalGroup,\n\tresetAllFilter,\n} ) {\n\tif ( __experimentalGroup ) {\n\t\tdeprecated(\n\t\t\t'`__experimentalGroup` property in `InspectorControlsFill`',\n\t\t\t{\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.4',\n\t\t\t\talternative: '`group`',\n\t\t\t}\n\t\t);\n\t\tgroup = __experimentalGroup;\n\t}\n\n\tconst context = useBlockEditContext();\n\tconst Fill = groups[ group ]?.Fill;\n\tif ( ! Fill ) {\n\t\twarning( `Unknown InspectorControls group \"${ group }\" provided.` );\n\t\treturn null;\n\t}\n\tif ( ! context[ mayDisplayControlsKey ] ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<StyleProvider document={ document }>\n\t\t\t<Fill>\n\t\t\t\t{ ( fillProps ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ToolsPanelInspectorControl\n\t\t\t\t\t\t\tfillProps={ fillProps }\n\t\t\t\t\t\t\tchildren={ children }\n\t\t\t\t\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Fill>\n\t\t</StyleProvider>\n\t);\n}\n\nfunction RegisterResetAll( { resetAllFilter, children } ) {\n\tconst { registerResetAllFilter, deregisterResetAllFilter } =\n\t\tuseContext( ToolsPanelContext );\n\tuseEffect( () => {\n\t\tif (\n\t\t\tresetAllFilter &&\n\t\t\tregisterResetAllFilter &&\n\t\t\tderegisterResetAllFilter\n\t\t) {\n\t\t\tregisterResetAllFilter( resetAllFilter );\n\t\t\treturn () => {\n\t\t\t\tderegisterResetAllFilter( resetAllFilter );\n\t\t\t};\n\t\t}\n\t}, [ resetAllFilter, registerResetAllFilter, deregisterResetAllFilter ] );\n\treturn children;\n}\n\nfunction ToolsPanelInspectorControl( { children, resetAllFilter, fillProps } ) {\n\t// `fillProps.forwardedContext` is an array of context provider entries, provided by slot,\n\t// that should wrap the fill markup.\n\tconst { forwardedContext = [] } = fillProps;\n\n\t// Children passed to InspectorControlsFill will not have\n\t// access to any React Context whose Provider is part of\n\t// the InspectorControlsSlot tree. So we re-create the\n\t// Provider in this subtree.\n\tconst innerMarkup = (\n\t\t<RegisterResetAll resetAllFilter={ resetAllFilter }>\n\t\t\t{ children }\n\t\t</RegisterResetAll>\n\t);\n\treturn forwardedContext.reduce(\n\t\t( inner, [ Provider, props ] ) => (\n\t\t\t<Provider { ...props }>{ inner }</Provider>\n\t\t),\n\t\tinnerMarkup\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalToolsPanel as ToolsPanel } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { cleanEmptyObject } from '../../hooks/utils';\nimport { useToolsPanelDropdownMenuProps } from '../global-styles/utils';\n\nexport default function BlockSupportToolsPanel( { children, group, label } ) {\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst {\n\t\tgetBlockAttributes,\n\t\tgetMultiSelectedBlockClientIds,\n\t\tgetSelectedBlockClientId,\n\t\thasMultiSelection,\n\t} = useSelect( blockEditorStore );\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\tconst panelId = getSelectedBlockClientId();\n\tconst resetAll = useCallback(\n\t\t( resetFilters = [] ) => {\n\t\t\tconst newAttributes = {};\n\n\t\t\tconst clientIds = hasMultiSelection()\n\t\t\t\t? getMultiSelectedBlockClientIds()\n\t\t\t\t: [ panelId ];\n\n\t\t\tclientIds.forEach( ( clientId ) => {\n\t\t\t\tconst { style } = getBlockAttributes( clientId );\n\t\t\t\tlet newBlockAttributes = { style };\n\n\t\t\t\tresetFilters.forEach( ( resetFilter ) => {\n\t\t\t\t\tnewBlockAttributes = {\n\t\t\t\t\t\t...newBlockAttributes,\n\t\t\t\t\t\t...resetFilter( newBlockAttributes ),\n\t\t\t\t\t};\n\t\t\t\t} );\n\n\t\t\t\t// Enforce a cleaned style object.\n\t\t\t\tnewBlockAttributes = {\n\t\t\t\t\t...newBlockAttributes,\n\t\t\t\t\tstyle: cleanEmptyObject( newBlockAttributes.style ),\n\t\t\t\t};\n\n\t\t\t\tnewAttributes[ clientId ] = newBlockAttributes;\n\t\t\t} );\n\n\t\t\tupdateBlockAttributes( clientIds, newAttributes, true );\n\t\t},\n\t\t[\n\t\t\tgetBlockAttributes,\n\t\t\tgetMultiSelectedBlockClientIds,\n\t\t\thasMultiSelection,\n\t\t\tpanelId,\n\t\t\tupdateBlockAttributes,\n\t\t]\n\t);\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tclassName={ `${ group }-block-support-panel` }\n\t\t\tlabel={ label }\n\t\t\tresetAll={ resetAll }\n\t\t\tkey={ panelId }\n\t\t\tpanelId={ panelId }\n\t\t\thasInnerWrapper\n\t\t\tshouldRenderPlaceholderItems // Required to maintain fills ordering.\n\t\t\t__experimentalFirstVisibleItemClass=\"first\"\n\t\t\t__experimentalLastVisibleItemClass=\"last\"\n\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalToolsPanelContext as ToolsPanelContext } from '@wordpress/components';\nimport { useContext, useMemo } from '@wordpress/element';\n\nexport default function BlockSupportSlotContainer( {\n\tSlot,\n\tfillProps,\n\t...props\n} ) {\n\t// Add the toolspanel context provider and value to existing fill props\n\tconst toolsPanelContext = useContext( ToolsPanelContext );\n\tconst computedFillProps = useMemo(\n\t\t() => ( {\n\t\t\t...( fillProps ?? {} ),\n\t\t\tforwardedContext: [\n\t\t\t\t...( fillProps?.forwardedContext ?? [] ),\n\t\t\t\t[ ToolsPanelContext.Provider, { value: toolsPanelContext } ],\n\t\t\t],\n\t\t} ),\n\t\t[ toolsPanelContext, fillProps ]\n\t);\n\n\treturn (\n\t\t<Slot { ...props } fillProps={ computedFillProps } bubblesVirtually />\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalUseSlotFills as useSlotFills } from '@wordpress/components';\nimport warning from '@wordpress/warning';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport BlockSupportToolsPanel from './block-support-tools-panel';\nimport BlockSupportSlotContainer from './block-support-slot-container';\nimport groups from './groups';\n\nexport default function InspectorControlsSlot( {\n\t__experimentalGroup,\n\tgroup = 'default',\n\tlabel,\n\tfillProps,\n\t...props\n} ) {\n\tif ( __experimentalGroup ) {\n\t\tdeprecated(\n\t\t\t'`__experimentalGroup` property in `InspectorControlsSlot`',\n\t\t\t{\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.4',\n\t\t\t\talternative: '`group`',\n\t\t\t}\n\t\t);\n\t\tgroup = __experimentalGroup;\n\t}\n\tconst slotFill = groups[ group ];\n\tconst fills = useSlotFills( slotFill?.name );\n\n\tif ( ! slotFill ) {\n\t\twarning( `Unknown InspectorControls group \"${ group }\" provided.` );\n\t\treturn null;\n\t}\n\n\tif ( ! fills?.length ) {\n\t\treturn null;\n\t}\n\n\tconst { Slot } = slotFill;\n\n\tif ( label ) {\n\t\treturn (\n\t\t\t<BlockSupportToolsPanel group={ group } label={ label }>\n\t\t\t\t<BlockSupportSlotContainer\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tfillProps={ fillProps }\n\t\t\t\t\tSlot={ Slot }\n\t\t\t\t/>\n\t\t\t</BlockSupportToolsPanel>\n\t\t);\n\t}\n\n\treturn <Slot { ...props } fillProps={ fillProps } bubblesVirtually />;\n}\n","/**\n * Internal dependencies\n */\nimport InspectorControlsFill from './fill';\nimport InspectorControlsSlot from './slot';\n\nconst InspectorControls = InspectorControlsFill;\n\nInspectorControls.Slot = InspectorControlsSlot;\n\n// This is just here for backward compatibility.\nexport const InspectorAdvancedControls = ( props ) => {\n\treturn <InspectorControlsFill { ...props } group=\"advanced\" />;\n};\nInspectorAdvancedControls.Slot = ( props ) => {\n\treturn <InspectorControlsSlot { ...props } group=\"advanced\" />;\n};\nInspectorAdvancedControls.slotName = 'InspectorAdvancedControls';\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/inspector-controls/README.md\n */\nexport default InspectorControls;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"url\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"dom\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blob\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"keycodes\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst media = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m7 6.5 4 2.5-4 2.5z\" />\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"m5 3c-1.10457 0-2 .89543-2 2v14c0 1.1046.89543 2 2 2h14c1.1046 0 2-.8954 2-2v-14c0-1.10457-.8954-2-2-2zm14 1.5h-14c-.27614 0-.5.22386-.5.5v10.7072l3.62953-2.6465c.25108-.1831.58905-.1924.84981-.0234l2.92666 1.8969 3.5712-3.4719c.2911-.2831.7545-.2831 1.0456 0l2.9772 2.8945v-9.3568c0-.27614-.2239-.5-.5-.5zm-14.5 14.5v-1.4364l4.09643-2.987 2.99567 1.9417c.2936.1903.6798.1523.9307-.0917l3.4772-3.3806 3.4772 3.3806.0228-.0234v2.5968c0 .2761-.2239.5-.5.5h-14c-.27614 0-.5-.2239-.5-.5z\"\n\t\t/>\n\t</SVG>\n);\n\nexport default media;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst upload = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z\" />\n\t</SVG>\n);\n\nexport default upload;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst postFeaturedImage = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M19 3H5c-.6 0-1 .4-1 1v7c0 .5.4 1 1 1h14c.5 0 1-.4 1-1V4c0-.6-.4-1-1-1zM5.5 10.5v-.4l1.8-1.3 1.3.8c.3.2.7.2.9-.1L11 8.1l2.4 2.4H5.5zm13 0h-2.9l-4-4c-.3-.3-.8-.3-1.1 0L8.9 8l-1.2-.8c-.3-.2-.6-.2-.9 0l-1.3 1V4.5h13v6zM4 20h9v-1.5H4V20zm0-4h16v-1.5H4V16z\" />\n\t</SVG>\n);\n\nexport default postFeaturedImage;\n","/**\n * WordPress dependencies\n */\nimport { withFilters } from '@wordpress/components';\n\n/**\n * This is a placeholder for the media upload component necessary to make it possible to provide\n * an integration with the core blocks that handle media files. By default it renders nothing but\n * it provides a way to have it overridden with the `editor.MediaUpload` filter.\n *\n * @return {Component} The component to be rendered.\n */\nconst MediaUpload = () => null;\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-upload/README.md\n */\nexport default withFilters( 'editor.MediaUpload' )( MediaUpload );\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport function MediaUploadCheck( { fallback = null, children } ) {\n\tconst hasUploadPermissions = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn !! getSettings().mediaUpload;\n\t}, [] );\n\treturn hasUploadPermissions ? children : fallback;\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-upload/README.md\n */\nexport default MediaUploadCheck;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"isShallowEqual\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst keyboardReturn = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m6.734 16.106 2.176-2.38-1.093-1.028-3.846 4.158 3.846 4.158 1.093-1.028-2.176-2.38h2.811c1.125 0 2.25.03 3.374 0 1.428-.001 3.362-.25 4.963-1.277 1.66-1.065 2.868-2.906 2.868-5.859 0-2.479-1.327-4.896-3.65-5.93-1.82-.813-3.044-.8-4.806-.788l-.567.002v1.5c.184 0 .368 0 .553-.002 1.82-.007 2.704-.014 4.21.657 1.854.827 2.76 2.657 2.76 4.561 0 2.472-.973 3.824-2.178 4.596-1.258.807-2.864 1.04-4.163 1.04h-.02c-1.115.03-2.229 0-3.344 0H6.734Z\" />\n\t</SVG>\n);\n\nexport default keyboardReturn;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronLeftSmall = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z\" />\n\t</SVG>\n);\n\nexport default chevronLeftSmall;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronRightSmall = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z\" />\n\t</SVG>\n);\n\nexport default chevronRightSmall;\n","/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\t__unstableMotion as motion,\n\t__unstableAnimatePresence as AnimatePresence,\n} from '@wordpress/components';\nimport { chevronLeftSmall, chevronRightSmall } from '@wordpress/icons';\nimport { useReducedMotion, useInstanceId } from '@wordpress/compose';\nimport { _x, isRTL } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\n\nfunction LinkSettingsDrawer( { children, settingsOpen, setSettingsOpen } ) {\n\tconst prefersReducedMotion = useReducedMotion();\n\tconst MaybeAnimatePresence = prefersReducedMotion\n\t\t? Fragment\n\t\t: AnimatePresence;\n\tconst MaybeMotionDiv = prefersReducedMotion ? 'div' : motion.div;\n\n\tconst id = useInstanceId( LinkSettingsDrawer );\n\n\tconst settingsDrawerId = `link-control-settings-drawer-${ id }`;\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tclassName=\"block-editor-link-control__drawer-toggle\"\n\t\t\t\taria-expanded={ settingsOpen }\n\t\t\t\tonClick={ () => setSettingsOpen( ! settingsOpen ) }\n\t\t\t\ticon={ isRTL() ? chevronLeftSmall : chevronRightSmall }\n\t\t\t\taria-controls={ settingsDrawerId }\n\t\t\t>\n\t\t\t\t{ _x( 'Advanced', 'Additional link settings' ) }\n\t\t\t</Button>\n\t\t\t<MaybeAnimatePresence>\n\t\t\t\t{ settingsOpen && (\n\t\t\t\t\t<MaybeMotionDiv\n\t\t\t\t\t\tclassName=\"block-editor-link-control__drawer\"\n\t\t\t\t\t\thidden={ ! settingsOpen }\n\t\t\t\t\t\tid={ settingsDrawerId }\n\t\t\t\t\t\tinitial=\"collapsed\"\n\t\t\t\t\t\tanimate=\"open\"\n\t\t\t\t\t\texit=\"collapsed\"\n\t\t\t\t\t\tvariants={ {\n\t\t\t\t\t\t\topen: { opacity: 1, height: 'auto' },\n\t\t\t\t\t\t\tcollapsed: { opacity: 0, height: 0 },\n\t\t\t\t\t\t} }\n\t\t\t\t\t\ttransition={ {\n\t\t\t\t\t\t\tduration: 0.1,\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"block-editor-link-control__drawer-inner\">\n\t\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</MaybeMotionDiv>\n\t\t\t\t) }\n\t\t\t</MaybeAnimatePresence>\n\t\t</>\n\t);\n}\n\nexport default LinkSettingsDrawer;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf, _n } from '@wordpress/i18n';\nimport { Component, createRef } from '@wordpress/element';\nimport { UP, DOWN, ENTER, TAB } from '@wordpress/keycodes';\nimport {\n\tBaseControl,\n\tButton,\n\t__experimentalInputControl as InputControl,\n\tSpinner,\n\twithSpokenMessages,\n\tPopover,\n} from '@wordpress/components';\nimport {\n\tcompose,\n\tdebounce,\n\twithInstanceId,\n\twithSafeTimeout,\n} from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport { isURL } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Whether the argument is a function.\n *\n * @param {*} maybeFunc The argument to check.\n * @return {boolean} True if the argument is a function, false otherwise.\n */\nfunction isFunction( maybeFunc ) {\n\treturn typeof maybeFunc === 'function';\n}\n\nclass URLInput extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.onChange = this.onChange.bind( this );\n\t\tthis.onFocus = this.onFocus.bind( this );\n\t\tthis.onKeyDown = this.onKeyDown.bind( this );\n\t\tthis.selectLink = this.selectLink.bind( this );\n\t\tthis.handleOnClick = this.handleOnClick.bind( this );\n\t\tthis.bindSuggestionNode = this.bindSuggestionNode.bind( this );\n\t\tthis.autocompleteRef = props.autocompleteRef || createRef();\n\t\tthis.inputRef = createRef();\n\t\tthis.updateSuggestions = debounce(\n\t\t\tthis.updateSuggestions.bind( this ),\n\t\t\t200\n\t\t);\n\n\t\tthis.suggestionNodes = [];\n\n\t\tthis.suggestionsRequest = null;\n\n\t\tthis.state = {\n\t\t\tsuggestions: [],\n\t\t\tshowSuggestions: false,\n\t\t\tsuggestionsValue: null,\n\t\t\tselectedSuggestion: null,\n\t\t\tsuggestionsListboxId: '',\n\t\t\tsuggestionOptionIdPrefix: '',\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { showSuggestions, selectedSuggestion } = this.state;\n\t\tconst { value, __experimentalShowInitialSuggestions = false } =\n\t\t\tthis.props;\n\n\t\t// Only have to worry about scrolling selected suggestion into view\n\t\t// when already expanded.\n\t\tif (\n\t\t\tshowSuggestions &&\n\t\t\tselectedSuggestion !== null &&\n\t\t\tthis.suggestionNodes[ selectedSuggestion ]\n\t\t) {\n\t\t\tthis.suggestionNodes[ selectedSuggestion ].scrollIntoView( {\n\t\t\t\tbehavior: 'instant',\n\t\t\t\tblock: 'nearest',\n\t\t\t\tinline: 'nearest',\n\t\t\t} );\n\t\t}\n\n\t\t// Update suggestions when the value changes.\n\t\tif ( prevProps.value !== value && ! this.props.disableSuggestions ) {\n\t\t\tif ( value?.length ) {\n\t\t\t\t// If the new value is not empty we need to update with suggestions for it.\n\t\t\t\tthis.updateSuggestions( value );\n\t\t\t} else if ( __experimentalShowInitialSuggestions ) {\n\t\t\t\t// If the new value is empty and we can show initial suggestions, then show initial suggestions.\n\t\t\t\tthis.updateSuggestions();\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( this.shouldShowInitialSuggestions() ) {\n\t\t\tthis.updateSuggestions();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.suggestionsRequest?.cancel?.();\n\t\tthis.suggestionsRequest = null;\n\t}\n\n\tbindSuggestionNode( index ) {\n\t\treturn ( ref ) => {\n\t\t\tthis.suggestionNodes[ index ] = ref;\n\t\t};\n\t}\n\n\tshouldShowInitialSuggestions() {\n\t\tconst { __experimentalShowInitialSuggestions = false, value } =\n\t\t\tthis.props;\n\t\treturn (\n\t\t\t__experimentalShowInitialSuggestions && ! ( value && value.length )\n\t\t);\n\t}\n\n\tupdateSuggestions( value = '' ) {\n\t\tconst {\n\t\t\t__experimentalFetchLinkSuggestions: fetchLinkSuggestions,\n\t\t\t__experimentalHandleURLSuggestions: handleURLSuggestions,\n\t\t} = this.props;\n\n\t\tif ( ! fetchLinkSuggestions ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Initial suggestions may only show if there is no value\n\t\t// (note: this includes whitespace).\n\t\tconst isInitialSuggestions = ! value?.length;\n\n\t\t// Trim only now we've determined whether or not it originally had a \"length\"\n\t\t// (even if that value was all whitespace).\n\t\tvalue = value.trim();\n\n\t\t// Allow a suggestions request if:\n\t\t// - there are at least 2 characters in the search input (except manual searches where\n\t\t//   search input length is not required to trigger a fetch)\n\t\t// - this is a direct entry (eg: a URL)\n\t\tif (\n\t\t\t! isInitialSuggestions &&\n\t\t\t( value.length < 2 || ( ! handleURLSuggestions && isURL( value ) ) )\n\t\t) {\n\t\t\tthis.suggestionsRequest?.cancel?.();\n\t\t\tthis.suggestionsRequest = null;\n\n\t\t\tthis.setState( {\n\t\t\t\tsuggestions: [],\n\t\t\t\tshowSuggestions: false,\n\t\t\t\tsuggestionsValue: value,\n\t\t\t\tselectedSuggestion: null,\n\t\t\t\tloading: false,\n\t\t\t} );\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tselectedSuggestion: null,\n\t\t\tloading: true,\n\t\t} );\n\n\t\tconst request = fetchLinkSuggestions( value, {\n\t\t\tisInitialSuggestions,\n\t\t} );\n\n\t\trequest\n\t\t\t.then( ( suggestions ) => {\n\t\t\t\t// A fetch Promise doesn't have an abort option. It's mimicked by\n\t\t\t\t// comparing the request reference in on the instance, which is\n\t\t\t\t// reset or deleted on subsequent requests or unmounting.\n\t\t\t\tif ( this.suggestionsRequest !== request ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tsuggestions,\n\t\t\t\t\tsuggestionsValue: value,\n\t\t\t\t\tloading: false,\n\t\t\t\t\tshowSuggestions: !! suggestions.length,\n\t\t\t\t} );\n\n\t\t\t\tif ( !! suggestions.length ) {\n\t\t\t\t\tthis.props.debouncedSpeak(\n\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t/* translators: %d: number of results. */\n\t\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t\t'%d result found, use up and down arrow keys to navigate.',\n\t\t\t\t\t\t\t\t'%d results found, use up and down arrow keys to navigate.',\n\t\t\t\t\t\t\t\tsuggestions.length\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tsuggestions.length\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'assertive'\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.debouncedSpeak(\n\t\t\t\t\t\t__( 'No results.' ),\n\t\t\t\t\t\t'assertive'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tif ( this.suggestionsRequest !== request ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tloading: false,\n\t\t\t\t} );\n\t\t\t} )\n\t\t\t.finally( () => {\n\t\t\t\t// If this is the current promise then reset the reference\n\t\t\t\t// to allow for checking if a new request is made.\n\t\t\t\tif ( this.suggestionsRequest === request ) {\n\t\t\t\t\tthis.suggestionsRequest = null;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t// Note that this assignment is handled *before* the async search request\n\t\t// as a Promise always resolves on the next tick of the event loop.\n\t\tthis.suggestionsRequest = request;\n\t}\n\n\tonChange( newValue ) {\n\t\tthis.props.onChange( newValue );\n\t}\n\n\tonFocus() {\n\t\tconst { suggestions } = this.state;\n\t\tconst { disableSuggestions, value } = this.props;\n\n\t\t// When opening the link editor, if there's a value present, we want to load the suggestions pane with the results for this input search value\n\t\t// Don't re-run the suggestions on focus if there are already suggestions present (prevents searching again when tabbing between the input and buttons)\n\t\t// or there is already a request in progress.\n\t\tif (\n\t\t\tvalue &&\n\t\t\t! disableSuggestions &&\n\t\t\t! ( suggestions && suggestions.length ) &&\n\t\t\tthis.suggestionsRequest === null\n\t\t) {\n\t\t\t// Ensure the suggestions are updated with the current input value.\n\t\t\tthis.updateSuggestions( value );\n\t\t}\n\t}\n\n\tonKeyDown( event ) {\n\t\tthis.props.onKeyDown?.( event );\n\t\tconst { showSuggestions, selectedSuggestion, suggestions, loading } =\n\t\t\tthis.state;\n\n\t\t// If the suggestions are not shown or loading, we shouldn't handle the arrow keys\n\t\t// We shouldn't preventDefault to allow block arrow keys navigation.\n\t\tif ( ! showSuggestions || ! suggestions.length || loading ) {\n\t\t\t// In the Windows version of Firefox the up and down arrows don't move the caret\n\t\t\t// within an input field like they do for Mac Firefox/Chrome/Safari. This causes\n\t\t\t// a form of focus trapping that is disruptive to the user experience. This disruption\n\t\t\t// only happens if the caret is not in the first or last position in the text input.\n\t\t\t// See: https://github.com/WordPress/gutenberg/issues/5693#issuecomment-436684747\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\t// When UP is pressed, if the caret is at the start of the text, move it to the 0\n\t\t\t\t// position.\n\t\t\t\tcase UP: {\n\t\t\t\t\tif ( 0 !== event.target.selectionStart ) {\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Set the input caret to position 0.\n\t\t\t\t\t\tevent.target.setSelectionRange( 0, 0 );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// When DOWN is pressed, if the caret is not at the end of the text, move it to the\n\t\t\t\t// last position.\n\t\t\t\tcase DOWN: {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.props.value.length !== event.target.selectionStart\n\t\t\t\t\t) {\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Set the input caret to the last position.\n\t\t\t\t\t\tevent.target.setSelectionRange(\n\t\t\t\t\t\t\tthis.props.value.length,\n\t\t\t\t\t\t\tthis.props.value.length\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// Submitting while loading should trigger onSubmit.\n\t\t\t\tcase ENTER: {\n\t\t\t\t\tif ( this.props.onSubmit ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tthis.props.onSubmit( null, event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst suggestion =\n\t\t\tthis.state.suggestions[ this.state.selectedSuggestion ];\n\n\t\tswitch ( event.keyCode ) {\n\t\t\tcase UP: {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst previousIndex = ! selectedSuggestion\n\t\t\t\t\t? suggestions.length - 1\n\t\t\t\t\t: selectedSuggestion - 1;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tselectedSuggestion: previousIndex,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase DOWN: {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst nextIndex =\n\t\t\t\t\tselectedSuggestion === null ||\n\t\t\t\t\tselectedSuggestion === suggestions.length - 1\n\t\t\t\t\t\t? 0\n\t\t\t\t\t\t: selectedSuggestion + 1;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tselectedSuggestion: nextIndex,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase TAB: {\n\t\t\t\tif ( this.state.selectedSuggestion !== null ) {\n\t\t\t\t\tthis.selectLink( suggestion );\n\t\t\t\t\t// Announce a link has been selected when tabbing away from the input field.\n\t\t\t\t\tthis.props.speak( __( 'Link selected.' ) );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ENTER: {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( this.state.selectedSuggestion !== null ) {\n\t\t\t\t\tthis.selectLink( suggestion );\n\n\t\t\t\t\tif ( this.props.onSubmit ) {\n\t\t\t\t\t\tthis.props.onSubmit( suggestion, event );\n\t\t\t\t\t}\n\t\t\t\t} else if ( this.props.onSubmit ) {\n\t\t\t\t\tthis.props.onSubmit( null, event );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tselectLink( suggestion ) {\n\t\tthis.props.onChange( suggestion.url, suggestion );\n\t\tthis.setState( {\n\t\t\tselectedSuggestion: null,\n\t\t\tshowSuggestions: false,\n\t\t} );\n\t}\n\n\thandleOnClick( suggestion ) {\n\t\tthis.selectLink( suggestion );\n\t\t// Move focus to the input field when a link suggestion is clicked.\n\t\tthis.inputRef.current.focus();\n\t}\n\n\tstatic getDerivedStateFromProps(\n\t\t{\n\t\t\tvalue,\n\t\t\tinstanceId,\n\t\t\tdisableSuggestions,\n\t\t\t__experimentalShowInitialSuggestions = false,\n\t\t},\n\t\t{ showSuggestions }\n\t) {\n\t\tlet shouldShowSuggestions = showSuggestions;\n\n\t\tconst hasValue = value && value.length;\n\n\t\tif ( ! __experimentalShowInitialSuggestions && ! hasValue ) {\n\t\t\tshouldShowSuggestions = false;\n\t\t}\n\n\t\tif ( disableSuggestions === true ) {\n\t\t\tshouldShowSuggestions = false;\n\t\t}\n\n\t\treturn {\n\t\t\tshowSuggestions: shouldShowSuggestions,\n\t\t\tsuggestionsListboxId: `block-editor-url-input-suggestions-${ instanceId }`,\n\t\t\tsuggestionOptionIdPrefix: `block-editor-url-input-suggestion-${ instanceId }`,\n\t\t};\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ this.renderControl() }\n\t\t\t\t{ this.renderSuggestions() }\n\t\t\t</>\n\t\t);\n\t}\n\n\trenderControl() {\n\t\tconst {\n\t\t\tlabel = null,\n\t\t\tclassName,\n\t\t\tisFullWidth,\n\t\t\tinstanceId,\n\t\t\tplaceholder = __( 'Paste URL or type to search' ),\n\t\t\t__experimentalRenderControl: renderControl,\n\t\t\tvalue = '',\n\t\t\thideLabelFromVision = false,\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tloading,\n\t\t\tshowSuggestions,\n\t\t\tselectedSuggestion,\n\t\t\tsuggestionsListboxId,\n\t\t\tsuggestionOptionIdPrefix,\n\t\t} = this.state;\n\n\t\tconst inputId = `url-input-control-${ instanceId }`;\n\n\t\tconst controlProps = {\n\t\t\tid: inputId, // Passes attribute to label for the for attribute\n\t\t\tlabel,\n\t\t\tclassName: clsx( 'block-editor-url-input', className, {\n\t\t\t\t'is-full-width': isFullWidth,\n\t\t\t} ),\n\t\t\thideLabelFromVision,\n\t\t};\n\n\t\tconst inputProps = {\n\t\t\tid: inputId,\n\t\t\tvalue,\n\t\t\trequired: true,\n\t\t\ttype: 'text',\n\t\t\tonChange: this.onChange,\n\t\t\tonFocus: this.onFocus,\n\t\t\tplaceholder,\n\t\t\tonKeyDown: this.onKeyDown,\n\t\t\trole: 'combobox',\n\t\t\t'aria-label': label ? undefined : __( 'URL' ), // Ensure input always has an accessible label\n\t\t\t'aria-expanded': showSuggestions,\n\t\t\t'aria-autocomplete': 'list',\n\t\t\t'aria-owns': suggestionsListboxId,\n\t\t\t'aria-activedescendant':\n\t\t\t\tselectedSuggestion !== null\n\t\t\t\t\t? `${ suggestionOptionIdPrefix }-${ selectedSuggestion }`\n\t\t\t\t\t: undefined,\n\t\t\tref: this.inputRef,\n\t\t\tsuffix: this.props.suffix,\n\t\t};\n\n\t\tif ( renderControl ) {\n\t\t\treturn renderControl( controlProps, inputProps, loading );\n\t\t}\n\n\t\treturn (\n\t\t\t<BaseControl __nextHasNoMarginBottom { ...controlProps }>\n\t\t\t\t<InputControl { ...inputProps } __next40pxDefaultSize />\n\t\t\t\t{ loading && <Spinner /> }\n\t\t\t</BaseControl>\n\t\t);\n\t}\n\n\trenderSuggestions() {\n\t\tconst {\n\t\t\tclassName,\n\t\t\t__experimentalRenderSuggestions: renderSuggestions,\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tshowSuggestions,\n\t\t\tsuggestions,\n\t\t\tsuggestionsValue,\n\t\t\tselectedSuggestion,\n\t\t\tsuggestionsListboxId,\n\t\t\tsuggestionOptionIdPrefix,\n\t\t\tloading,\n\t\t} = this.state;\n\n\t\tif ( ! showSuggestions || suggestions.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst suggestionsListProps = {\n\t\t\tid: suggestionsListboxId,\n\t\t\tref: this.autocompleteRef,\n\t\t\trole: 'listbox',\n\t\t};\n\n\t\tconst buildSuggestionItemProps = ( suggestion, index ) => {\n\t\t\treturn {\n\t\t\t\trole: 'option',\n\t\t\t\ttabIndex: '-1',\n\t\t\t\tid: `${ suggestionOptionIdPrefix }-${ index }`,\n\t\t\t\tref: this.bindSuggestionNode( index ),\n\t\t\t\t'aria-selected':\n\t\t\t\t\tindex === selectedSuggestion ? true : undefined,\n\t\t\t};\n\t\t};\n\n\t\tif ( isFunction( renderSuggestions ) ) {\n\t\t\treturn renderSuggestions( {\n\t\t\t\tsuggestions,\n\t\t\t\tselectedSuggestion,\n\t\t\t\tsuggestionsListProps,\n\t\t\t\tbuildSuggestionItemProps,\n\t\t\t\tisLoading: loading,\n\t\t\t\thandleSuggestionClick: this.handleOnClick,\n\t\t\t\tisInitialSuggestions: ! suggestionsValue?.length,\n\t\t\t\tcurrentInputValue: suggestionsValue,\n\t\t\t} );\n\t\t}\n\n\t\treturn (\n\t\t\t<Popover placement=\"bottom\" focusOnMount={ false }>\n\t\t\t\t<div\n\t\t\t\t\t{ ...suggestionsListProps }\n\t\t\t\t\tclassName={ clsx( 'block-editor-url-input__suggestions', {\n\t\t\t\t\t\t[ `${ className }__suggestions` ]: className,\n\t\t\t\t\t} ) }\n\t\t\t\t>\n\t\t\t\t\t{ suggestions.map( ( suggestion, index ) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t{ ...buildSuggestionItemProps( suggestion, index ) }\n\t\t\t\t\t\t\tkey={ suggestion.id }\n\t\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t\t'block-editor-url-input__suggestion',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'is-selected': index === selectedSuggestion,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tonClick={ () => this.handleOnClick( suggestion ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ suggestion.title }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) ) }\n\t\t\t\t</div>\n\t\t\t</Popover>\n\t\t);\n\t}\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/url-input/README.md\n */\nexport default compose(\n\twithSafeTimeout,\n\twithSpokenMessages,\n\twithInstanceId,\n\twithSelect( ( select, props ) => {\n\t\t// If a link suggestions handler is already provided then\n\t\t// bail.\n\t\tif ( isFunction( props.__experimentalFetchLinkSuggestions ) ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn {\n\t\t\t__experimentalFetchLinkSuggestions:\n\t\t\t\tgetSettings().__experimentalFetchLinkSuggestions,\n\t\t};\n\t} )\n)( URLInput );\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst plus = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z\" />\n\t</SVG>\n);\n\nexport default plus;\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { MenuItem } from '@wordpress/components';\nimport { createInterpolateElement } from '@wordpress/element';\nimport { plus } from '@wordpress/icons';\n\nexport const LinkControlSearchCreate = ( {\n\tsearchTerm,\n\tonClick,\n\titemProps,\n\tbuttonText,\n} ) => {\n\tif ( ! searchTerm ) {\n\t\treturn null;\n\t}\n\n\tlet text;\n\tif ( buttonText ) {\n\t\ttext =\n\t\t\ttypeof buttonText === 'function'\n\t\t\t\t? buttonText( searchTerm )\n\t\t\t\t: buttonText;\n\t} else {\n\t\ttext = createInterpolateElement(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: search term. */\n\t\t\t\t__( 'Create: <mark>%s</mark>' ),\n\t\t\t\tsearchTerm\n\t\t\t),\n\t\t\t{ mark: <mark /> }\n\t\t);\n\t}\n\n\treturn (\n\t\t<MenuItem\n\t\t\t{ ...itemProps }\n\t\t\ticonPosition=\"left\"\n\t\t\ticon={ plus }\n\t\t\tclassName=\"block-editor-link-control__search-item\"\n\t\t\tonClick={ onClick }\n\t\t>\n\t\t\t{ text }\n\t\t</MenuItem>\n\t);\n};\n\nexport default LinkControlSearchCreate;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst postList = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M18 5.5H6a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 .5-.5V6a.5.5 0 0 0-.5-.5ZM6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm1 5h1.5v1.5H7V9Zm1.5 4.5H7V15h1.5v-1.5ZM10 9h7v1.5h-7V9Zm7 4.5h-7V15h7v-1.5Z\" />\n\t</SVG>\n);\n\nexport default postList;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst page = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M15.5 7.5h-7V9h7V7.5Zm-7 3.5h7v1.5h-7V11Zm7 3.5h-7V16h7v-1.5Z\" />\n\t\t<Path d=\"M17 4H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM7 5.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5Z\" />\n\t</SVG>\n);\n\nexport default page;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst tag = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4.75 4a.75.75 0 0 0-.75.75v7.826c0 .2.08.39.22.53l6.72 6.716a2.313 2.313 0 0 0 3.276-.001l5.61-5.611-.531-.53.532.528a2.315 2.315 0 0 0 0-3.264L13.104 4.22a.75.75 0 0 0-.53-.22H4.75ZM19 12.576a.815.815 0 0 1-.236.574l-5.61 5.611a.814.814 0 0 1-1.153 0L5.5 12.264V5.5h6.763l6.5 6.502a.816.816 0 0 1 .237.574ZM8.75 9.75a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z\" />\n\t</SVG>\n);\n\nexport default tag;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst category = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path\n\t\t\td=\"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z\"\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t/>\n\t</SVG>\n);\n\nexport default category;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst file = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M12.848 8a1 1 0 0 1-.914-.594l-.723-1.63a.5.5 0 0 0-.447-.276H5a.5.5 0 0 0-.5.5v11.5a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5v-9A.5.5 0 0 0 19 8h-6.152Zm.612-1.5a.5.5 0 0 1-.462-.31l-.445-1.084A2 2 0 0 0 10.763 4H5a2 2 0 0 0-2 2v11.5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-5.54Z\"\n\t\t/>\n\t</SVG>\n);\n\nexport default file;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst globe = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12 4c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8Zm6.5 8c0 .6 0 1.2-.2 1.8h-2.7c0-.6.2-1.1.2-1.8s0-1.2-.2-1.8h2.7c.2.6.2 1.1.2 1.8Zm-.9-3.2h-2.4c-.3-.9-.7-1.8-1.1-2.4-.1-.2-.2-.4-.3-.5 1.6.5 3 1.6 3.8 3ZM12.8 17c-.3.5-.6 1-.8 1.3-.2-.3-.5-.8-.8-1.3-.3-.5-.6-1.1-.8-1.7h3.3c-.2.6-.5 1.2-.8 1.7Zm-2.9-3.2c-.1-.6-.2-1.1-.2-1.8s0-1.2.2-1.8H14c.1.6.2 1.1.2 1.8s0 1.2-.2 1.8H9.9ZM11.2 7c.3-.5.6-1 .8-1.3.2.3.5.8.8 1.3.3.5.6 1.1.8 1.7h-3.3c.2-.6.5-1.2.8-1.7Zm-1-1.2c-.1.2-.2.3-.3.5-.4.7-.8 1.5-1.1 2.4H6.4c.8-1.4 2.2-2.5 3.8-3Zm-1.8 8H5.7c-.2-.6-.2-1.1-.2-1.8s0-1.2.2-1.8h2.7c0 .6-.2 1.1-.2 1.8s0 1.2.2 1.8Zm-2 1.4h2.4c.3.9.7 1.8 1.1 2.4.1.2.2.4.3.5-1.6-.5-3-1.6-3.8-3Zm7.4 3c.1-.2.2-.3.3-.5.4-.7.8-1.5 1.1-2.4h2.4c-.8 1.4-2.2 2.5-3.8 3Z\" />\n\t</SVG>\n);\n\nexport default globe;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst home = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12 4L4 7.9V20h16V7.9L12 4zm6.5 14.5H14V13h-4v5.5H5.5V8.8L12 5.7l6.5 3.1v9.7z\" />\n\t</SVG>\n);\n\nexport default home;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst verse = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M17.8 2l-.9.3c-.1 0-3.6 1-5.2 2.1C10 5.5 9.3 6.5 8.9 7.1c-.6.9-1.7 4.7-1.7 6.3l-.9 2.3c-.2.4 0 .8.4 1 .1 0 .2.1.3.1.3 0 .6-.2.7-.5l.6-1.5c.3 0 .7-.1 1.2-.2.7-.1 1.4-.3 2.2-.5.8-.2 1.6-.5 2.4-.8.7-.3 1.4-.7 1.9-1.2s.8-1.2 1-1.9c.2-.7.3-1.6.4-2.4.1-.8.1-1.7.2-2.5 0-.8.1-1.5.2-2.1V2zm-1.9 5.6c-.1.8-.2 1.5-.3 2.1-.2.6-.4 1-.6 1.3-.3.3-.8.6-1.4.9-.7.3-1.4.5-2.2.8-.6.2-1.3.3-1.8.4L15 7.5c.3-.3.6-.7 1-1.1 0 .4 0 .8-.1 1.2zM6 20h8v-1.5H6V20z\" />\n\t</SVG>\n);\n\nexport default verse;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuItem, TextHighlight } from '@wordpress/components';\nimport {\n\tIcon,\n\tglobe,\n\tpage,\n\ttag,\n\tpostList,\n\tcategory,\n\tfile,\n\thome,\n\tverse,\n} from '@wordpress/icons';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\nimport { safeDecodeURI, filterURLForDisplay, getPath } from '@wordpress/url';\nimport { pipe } from '@wordpress/compose';\nimport deprecated from '@wordpress/deprecated';\n\nconst ICONS_MAP = {\n\tpost: postList,\n\tpage,\n\tpost_tag: tag,\n\tcategory,\n\tattachment: file,\n};\n\nfunction SearchItemIcon( { isURL, suggestion } ) {\n\tlet icon = null;\n\n\tif ( isURL ) {\n\t\ticon = globe;\n\t} else if ( suggestion.type in ICONS_MAP ) {\n\t\ticon = ICONS_MAP[ suggestion.type ];\n\t\tif ( suggestion.type === 'page' ) {\n\t\t\tif ( suggestion.isFrontPage ) {\n\t\t\t\ticon = home;\n\t\t\t}\n\t\t\tif ( suggestion.isBlogHome ) {\n\t\t\t\ticon = verse;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( icon ) {\n\t\treturn (\n\t\t\t<Icon\n\t\t\t\tclassName=\"block-editor-link-control__search-item-icon\"\n\t\t\t\ticon={ icon }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n}\n\n/**\n * Adds a leading slash to a url if it doesn't already have one.\n * @param {string} url the url to add a leading slash to.\n * @return {string} the url with a leading slash.\n */\nfunction addLeadingSlash( url ) {\n\tconst trimmedURL = url?.trim();\n\n\tif ( ! trimmedURL?.length ) {\n\t\treturn url;\n\t}\n\n\treturn url?.replace( /^\\/?/, '/' );\n}\n\nfunction removeTrailingSlash( url ) {\n\tconst trimmedURL = url?.trim();\n\n\tif ( ! trimmedURL?.length ) {\n\t\treturn url;\n\t}\n\n\treturn url?.replace( /\\/$/, '' );\n}\n\nconst partialRight =\n\t( fn, ...partialArgs ) =>\n\t( ...args ) =>\n\t\tfn( ...args, ...partialArgs );\n\nconst defaultTo = ( d ) => ( v ) => {\n\treturn v === null || v === undefined || v !== v ? d : v;\n};\n\n/**\n * Prepares a URL for display in the UI.\n * - decodes the URL.\n * - filters it (removes protocol, www, etc.).\n * - truncates it if necessary.\n * - adds a leading slash.\n * @param {string} url the url.\n * @return {string} the processed url to display.\n */\nfunction getURLForDisplay( url ) {\n\tif ( ! url ) {\n\t\treturn url;\n\t}\n\n\treturn pipe(\n\t\tsafeDecodeURI,\n\t\tgetPath,\n\t\tdefaultTo( '' ),\n\t\tpartialRight( filterURLForDisplay, 24 ),\n\t\tremoveTrailingSlash,\n\t\taddLeadingSlash\n\t)( url );\n}\n\nexport const LinkControlSearchItem = ( {\n\titemProps,\n\tsuggestion,\n\tsearchTerm,\n\tonClick,\n\tisURL = false,\n\tshouldShowType = false,\n} ) => {\n\tconst info = isURL\n\t\t? __( 'Press ENTER to add this link' )\n\t\t: getURLForDisplay( suggestion.url );\n\n\treturn (\n\t\t<MenuItem\n\t\t\t{ ...itemProps }\n\t\t\tinfo={ info }\n\t\t\ticonPosition=\"left\"\n\t\t\ticon={\n\t\t\t\t<SearchItemIcon suggestion={ suggestion } isURL={ isURL } />\n\t\t\t}\n\t\t\tonClick={ onClick }\n\t\t\tshortcut={ shouldShowType && getVisualTypeName( suggestion ) }\n\t\t\tclassName=\"block-editor-link-control__search-item\"\n\t\t>\n\t\t\t<TextHighlight\n\t\t\t\t// The component expects a plain text string.\n\t\t\t\ttext={ stripHTML( suggestion.title ) }\n\t\t\t\thighlight={ searchTerm }\n\t\t\t/>\n\t\t</MenuItem>\n\t);\n};\n\nfunction getVisualTypeName( suggestion ) {\n\tif ( suggestion.isFrontPage ) {\n\t\treturn 'front page';\n\t}\n\n\tif ( suggestion.isBlogHome ) {\n\t\treturn 'blog home';\n\t}\n\n\t// Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label.\n\treturn suggestion.type === 'post_tag' ? 'tag' : suggestion.type;\n}\n\nexport default LinkControlSearchItem;\n\nexport const __experimentalLinkControlSearchItem = ( props ) => {\n\tdeprecated( 'wp.blockEditor.__experimentalLinkControlSearchItem', {\n\t\tsince: '6.8',\n\t} );\n\n\treturn <LinkControlSearchItem { ...props } />;\n};\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n// Used as a unique identifier for the \"Create\" option within search results.\n// Used to help distinguish the \"Create\" suggestion within the search results in\n// order to handle it as a unique case.\nexport const CREATE_TYPE = '__CREATE__';\nexport const TEL_TYPE = 'tel';\nexport const URL_TYPE = 'link';\nexport const MAILTO_TYPE = 'mailto';\nexport const INTERNAL_TYPE = 'internal';\n\nexport const LINK_ENTRY_TYPES = [\n\tURL_TYPE,\n\tMAILTO_TYPE,\n\tTEL_TYPE,\n\tINTERNAL_TYPE,\n];\n\nexport const DEFAULT_LINK_SETTINGS = [\n\t{\n\t\tid: 'opensInNewTab',\n\t\ttitle: __( 'Open in new tab' ),\n\t},\n];\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { MenuGroup } from '@wordpress/components';\n\n/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * Internal dependencies\n */\nimport LinkControlSearchCreate from './search-create-button';\nimport LinkControlSearchItem from './search-item';\nimport { CREATE_TYPE, LINK_ENTRY_TYPES } from './constants';\nimport deprecated from '@wordpress/deprecated';\n\nfunction LinkControlSearchResults( {\n\twithCreateSuggestion,\n\tcurrentInputValue,\n\thandleSuggestionClick,\n\tsuggestionsListProps,\n\tbuildSuggestionItemProps,\n\tsuggestions,\n\tselectedSuggestion,\n\tisLoading,\n\tisInitialSuggestions,\n\tcreateSuggestionButtonText,\n\tsuggestionsQuery,\n} ) {\n\tconst resultsListClasses = clsx(\n\t\t'block-editor-link-control__search-results',\n\t\t{\n\t\t\t'is-loading': isLoading,\n\t\t}\n\t);\n\n\tconst isSingleDirectEntryResult =\n\t\tsuggestions.length === 1 &&\n\t\tLINK_ENTRY_TYPES.includes( suggestions[ 0 ].type );\n\tconst shouldShowCreateSuggestion =\n\t\twithCreateSuggestion &&\n\t\t! isSingleDirectEntryResult &&\n\t\t! isInitialSuggestions;\n\t// If the query has a specified type, then we can skip showing them in the result. See #24839.\n\tconst shouldShowSuggestionsTypes = ! suggestionsQuery?.type;\n\n\tconst labelText = isInitialSuggestions\n\t\t? __( 'Suggestions' )\n\t\t: sprintf(\n\t\t\t\t/* translators: %s: search term. */\n\t\t\t\t__( 'Search results for \"%s\"' ),\n\t\t\t\tcurrentInputValue\n\t\t  );\n\n\treturn (\n\t\t<div className=\"block-editor-link-control__search-results-wrapper\">\n\t\t\t<div\n\t\t\t\t{ ...suggestionsListProps }\n\t\t\t\tclassName={ resultsListClasses }\n\t\t\t\taria-label={ labelText }\n\t\t\t>\n\t\t\t\t<MenuGroup>\n\t\t\t\t\t{ suggestions.map( ( suggestion, index ) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tshouldShowCreateSuggestion &&\n\t\t\t\t\t\t\tCREATE_TYPE === suggestion.type\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<LinkControlSearchCreate\n\t\t\t\t\t\t\t\t\tsearchTerm={ currentInputValue }\n\t\t\t\t\t\t\t\t\tbuttonText={ createSuggestionButtonText }\n\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\thandleSuggestionClick( suggestion )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// Intentionally only using `type` here as\n\t\t\t\t\t\t\t\t\t// the constant is enough to uniquely\n\t\t\t\t\t\t\t\t\t// identify the single \"CREATE\" suggestion.\n\t\t\t\t\t\t\t\t\tkey={ suggestion.type }\n\t\t\t\t\t\t\t\t\titemProps={ buildSuggestionItemProps(\n\t\t\t\t\t\t\t\t\t\tsuggestion,\n\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\tisSelected={ index === selectedSuggestion }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If we're not handling \"Create\" suggestions above then\n\t\t\t\t\t\t// we don't want them in the main results so exit early.\n\t\t\t\t\t\tif ( CREATE_TYPE === suggestion.type ) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<LinkControlSearchItem\n\t\t\t\t\t\t\t\tkey={ `${ suggestion.id }-${ suggestion.type }` }\n\t\t\t\t\t\t\t\titemProps={ buildSuggestionItemProps(\n\t\t\t\t\t\t\t\t\tsuggestion,\n\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tsuggestion={ suggestion }\n\t\t\t\t\t\t\t\tindex={ index }\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\thandleSuggestionClick( suggestion );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tisSelected={ index === selectedSuggestion }\n\t\t\t\t\t\t\t\tisURL={ LINK_ENTRY_TYPES.includes(\n\t\t\t\t\t\t\t\t\tsuggestion.type\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tsearchTerm={ currentInputValue }\n\t\t\t\t\t\t\t\tshouldShowType={ shouldShowSuggestionsTypes }\n\t\t\t\t\t\t\t\tisFrontPage={ suggestion?.isFrontPage }\n\t\t\t\t\t\t\t\tisBlogHome={ suggestion?.isBlogHome }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t} ) }\n\t\t\t\t</MenuGroup>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default LinkControlSearchResults;\n\nexport const __experimentalLinkControlSearchResults = ( props ) => {\n\tdeprecated( 'wp.blockEditor.__experimentalLinkControlSearchResults', {\n\t\tsince: '6.8',\n\t} );\n\n\treturn <LinkControlSearchResults { ...props } />;\n};\n","/**\n * WordPress dependencies\n */\nimport { getProtocol, isValidProtocol, isValidFragment } from '@wordpress/url';\n\n/**\n * Determines whether a given value could be a URL. Note this does not\n * guarantee the value is a URL only that it looks like it might be one. For\n * example, just because a string has `www.` in it doesn't make it a URL,\n * but it does make it highly likely that it will be so in the context of\n * creating a link it makes sense to treat it like one.\n *\n * @param {string} val the candidate for being URL-like (or not).\n *\n * @return {boolean} whether or not the value is potentially a URL.\n */\nexport default function isURLLike( val ) {\n\tconst hasSpaces = val.includes( ' ' );\n\n\tif ( hasSpaces ) {\n\t\treturn false;\n\t}\n\n\tconst protocol = getProtocol( val );\n\tconst protocolIsValid = isValidProtocol( protocol );\n\n\tconst mayBeTLD = hasPossibleTLD( val );\n\n\tconst isWWW = val?.startsWith( 'www.' );\n\n\tconst isInternal = val?.startsWith( '#' ) && isValidFragment( val );\n\n\treturn protocolIsValid || isWWW || isInternal || mayBeTLD;\n}\n\n/**\n * Checks if a given URL has a valid Top-Level Domain (TLD).\n *\n * @param {string} url       - The URL to check.\n * @param {number} maxLength - The maximum length of the TLD.\n * @return {boolean} Returns true if the URL has a valid TLD, false otherwise.\n */\nfunction hasPossibleTLD( url, maxLength = 6 ) {\n\t// Clean the URL by removing anything after the first occurrence of \"?\" or \"#\".\n\tconst cleanedURL = url.split( /[?#]/ )[ 0 ];\n\n\t// Regular expression explanation:\n\t// - (?<=\\S)                  : Positive lookbehind assertion to ensure there is at least one non-whitespace character before the TLD\n\t// - \\.                       : Matches a literal dot (.)\n\t// - [a-zA-Z_]{2,maxLength}   : Matches 2 to maxLength letters or underscores, representing the TLD\n\t// - (?:\\/|$)                 : Non-capturing group that matches either a forward slash (/) or the end of the string\n\tconst regex = new RegExp(\n\t\t`(?<=\\\\S)\\\\.(?:[a-zA-Z_]{2,${ maxLength }})(?:\\\\/|$)`\n\t);\n\n\treturn regex.test( cleanedURL );\n}\n","/**\n * WordPress dependencies\n */\nimport { getProtocol, prependHTTP } from '@wordpress/url';\nimport { useCallback } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport isURLLike from './is-url-like';\nimport {\n\tCREATE_TYPE,\n\tTEL_TYPE,\n\tMAILTO_TYPE,\n\tINTERNAL_TYPE,\n\tURL_TYPE,\n} from './constants';\nimport { store as blockEditorStore } from '../../store';\n\nexport const handleNoop = () => Promise.resolve( [] );\n\nexport const handleDirectEntry = ( val ) => {\n\tlet type = URL_TYPE;\n\n\tconst protocol = getProtocol( val ) || '';\n\n\tif ( protocol.includes( 'mailto' ) ) {\n\t\ttype = MAILTO_TYPE;\n\t}\n\n\tif ( protocol.includes( 'tel' ) ) {\n\t\ttype = TEL_TYPE;\n\t}\n\n\tif ( val?.startsWith( '#' ) ) {\n\t\ttype = INTERNAL_TYPE;\n\t}\n\n\treturn Promise.resolve( [\n\t\t{\n\t\t\tid: val,\n\t\t\ttitle: val,\n\t\t\turl: type === 'URL' ? prependHTTP( val ) : val,\n\t\t\ttype,\n\t\t},\n\t] );\n};\n\nconst handleEntitySearch = async (\n\tval,\n\tsuggestionsQuery,\n\tfetchSearchSuggestions,\n\twithCreateSuggestion,\n\tpageOnFront,\n\tpageForPosts\n) => {\n\tconst { isInitialSuggestions } = suggestionsQuery;\n\n\tconst results = await fetchSearchSuggestions( val, suggestionsQuery );\n\n\t// Identify front page and update type to match.\n\tresults.map( ( result ) => {\n\t\tif ( Number( result.id ) === pageOnFront ) {\n\t\t\tresult.isFrontPage = true;\n\t\t\treturn result;\n\t\t} else if ( Number( result.id ) === pageForPosts ) {\n\t\t\tresult.isBlogHome = true;\n\t\t\treturn result;\n\t\t}\n\n\t\treturn result;\n\t} );\n\n\t// If displaying initial suggestions just return plain results.\n\tif ( isInitialSuggestions ) {\n\t\treturn results;\n\t}\n\n\t// Here we append a faux suggestion to represent a \"CREATE\" option. This\n\t// is detected in the rendering of the search results and handled as a\n\t// special case. This is currently necessary because the suggestions\n\t// dropdown will only appear if there are valid suggestions and\n\t// therefore unless the create option is a suggestion it will not\n\t// display in scenarios where there are no results returned from the\n\t// API. In addition promoting CREATE to a first class suggestion affords\n\t// the a11y benefits afforded by `URLInput` to all suggestions (eg:\n\t// keyboard handling, ARIA roles...etc).\n\t//\n\t// Note also that the value of the `title` and `url` properties must correspond\n\t// to the text value of the `<input>`. This is because `title` is used\n\t// when creating the suggestion. Similarly `url` is used when using keyboard to select\n\t// the suggestion (the <form> `onSubmit` handler falls-back to `url`).\n\treturn isURLLike( val ) || ! withCreateSuggestion\n\t\t? results\n\t\t: results.concat( {\n\t\t\t\t// the `id` prop is intentionally omitted here because it\n\t\t\t\t// is never exposed as part of the component's public API.\n\t\t\t\t// see: https://github.com/WordPress/gutenberg/pull/19775#discussion_r378931316.\n\t\t\t\ttitle: val, // Must match the existing `<input>`s text value.\n\t\t\t\turl: val, // Must match the existing `<input>`s text value.\n\t\t\t\ttype: CREATE_TYPE,\n\t\t  } );\n};\n\nexport default function useSearchHandler(\n\tsuggestionsQuery,\n\tallowDirectEntry,\n\twithCreateSuggestion\n) {\n\tconst { fetchSearchSuggestions, pageOnFront, pageForPosts } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getSettings } = select( blockEditorStore );\n\n\t\t\treturn {\n\t\t\t\tpageOnFront: getSettings().pageOnFront,\n\t\t\t\tpageForPosts: getSettings().pageForPosts,\n\t\t\t\tfetchSearchSuggestions:\n\t\t\t\t\tgetSettings().__experimentalFetchLinkSuggestions,\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\n\tconst directEntryHandler = allowDirectEntry\n\t\t? handleDirectEntry\n\t\t: handleNoop;\n\n\treturn useCallback(\n\t\t( val, { isInitialSuggestions } ) => {\n\t\t\treturn isURLLike( val )\n\t\t\t\t? directEntryHandler( val, { isInitialSuggestions } )\n\t\t\t\t: handleEntitySearch(\n\t\t\t\t\t\tval,\n\t\t\t\t\t\t{ ...suggestionsQuery, isInitialSuggestions },\n\t\t\t\t\t\tfetchSearchSuggestions,\n\t\t\t\t\t\twithCreateSuggestion,\n\t\t\t\t\t\tpageOnFront,\n\t\t\t\t\t\tpageForPosts\n\t\t\t\t  );\n\t\t},\n\t\t[\n\t\t\tdirectEntryHandler,\n\t\t\tfetchSearchSuggestions,\n\t\t\tpageOnFront,\n\t\t\tpageForPosts,\n\t\t\tsuggestionsQuery,\n\t\t\twithCreateSuggestion,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { forwardRef, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { URLInput } from '../';\nimport LinkControlSearchResults from './search-results';\nimport { CREATE_TYPE } from './constants';\nimport useSearchHandler from './use-search-handler';\nimport deprecated from '@wordpress/deprecated';\n\n// Must be a function as otherwise URLInput will default\n// to the fetchLinkSuggestions passed in block editor settings\n// which will cause an unintended http request.\nconst noopSearchHandler = () => Promise.resolve( [] );\n\nconst noop = () => {};\n\nconst LinkControlSearchInput = forwardRef(\n\t(\n\t\t{\n\t\t\tvalue,\n\t\t\tchildren,\n\t\t\tcurrentLink = {},\n\t\t\tclassName = null,\n\t\t\tplaceholder = null,\n\t\t\twithCreateSuggestion = false,\n\t\t\tonCreateSuggestion = noop,\n\t\t\tonChange = noop,\n\t\t\tonSelect = noop,\n\t\t\tshowSuggestions = true,\n\t\t\trenderSuggestions = ( props ) => (\n\t\t\t\t<LinkControlSearchResults { ...props } />\n\t\t\t),\n\t\t\tfetchSuggestions = null,\n\t\t\tallowDirectEntry = true,\n\t\t\tshowInitialSuggestions = false,\n\t\t\tsuggestionsQuery = {},\n\t\t\twithURLSuggestion = true,\n\t\t\tcreateSuggestionButtonText,\n\t\t\thideLabelFromVision = false,\n\t\t\tsuffix,\n\t\t},\n\t\tref\n\t) => {\n\t\tconst genericSearchHandler = useSearchHandler(\n\t\t\tsuggestionsQuery,\n\t\t\tallowDirectEntry,\n\t\t\twithCreateSuggestion,\n\t\t\twithURLSuggestion\n\t\t);\n\n\t\tconst searchHandler = showSuggestions\n\t\t\t? fetchSuggestions || genericSearchHandler\n\t\t\t: noopSearchHandler;\n\n\t\tconst [ focusedSuggestion, setFocusedSuggestion ] = useState();\n\n\t\t/**\n\t\t * Handles the user moving between different suggestions. Does not handle\n\t\t * choosing an individual item.\n\t\t *\n\t\t * @param {string} selection  the url of the selected suggestion.\n\t\t * @param {Object} suggestion the suggestion object.\n\t\t */\n\t\tconst onInputChange = ( selection, suggestion ) => {\n\t\t\tonChange( selection );\n\t\t\tsetFocusedSuggestion( suggestion );\n\t\t};\n\n\t\tconst handleRenderSuggestions = ( props ) =>\n\t\t\trenderSuggestions( {\n\t\t\t\t...props,\n\t\t\t\twithCreateSuggestion,\n\t\t\t\tcreateSuggestionButtonText,\n\t\t\t\tsuggestionsQuery,\n\t\t\t\thandleSuggestionClick: ( suggestion ) => {\n\t\t\t\t\tif ( props.handleSuggestionClick ) {\n\t\t\t\t\t\tprops.handleSuggestionClick( suggestion );\n\t\t\t\t\t}\n\t\t\t\t\tonSuggestionSelected( suggestion );\n\t\t\t\t},\n\t\t\t} );\n\n\t\tconst onSuggestionSelected = async ( selectedSuggestion ) => {\n\t\t\tlet suggestion = selectedSuggestion;\n\t\t\tif ( CREATE_TYPE === selectedSuggestion.type ) {\n\t\t\t\t// Create a new page and call onSelect with the output from the onCreateSuggestion callback.\n\t\t\t\ttry {\n\t\t\t\t\tsuggestion = await onCreateSuggestion(\n\t\t\t\t\t\tselectedSuggestion.title\n\t\t\t\t\t);\n\t\t\t\t\tif ( suggestion?.url ) {\n\t\t\t\t\t\tonSelect( suggestion );\n\t\t\t\t\t}\n\t\t\t\t} catch ( e ) {}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tallowDirectEntry ||\n\t\t\t\t( suggestion && Object.keys( suggestion ).length >= 1 )\n\t\t\t) {\n\t\t\t\tconst { id, url, ...restLinkProps } = currentLink ?? {};\n\t\t\t\tonSelect(\n\t\t\t\t\t// Some direct entries don't have types or IDs, and we still need to clear the previous ones.\n\t\t\t\t\t{ ...restLinkProps, ...suggestion },\n\t\t\t\t\tsuggestion\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\tconst _placeholder = placeholder ?? __( 'Search or type URL' );\n\n\t\tconst label =\n\t\t\thideLabelFromVision && placeholder !== ''\n\t\t\t\t? _placeholder\n\t\t\t\t: __( 'Link' );\n\n\t\treturn (\n\t\t\t<div className=\"block-editor-link-control__search-input-container\">\n\t\t\t\t<URLInput\n\t\t\t\t\tdisableSuggestions={ currentLink?.url === value }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\thideLabelFromVision={ hideLabelFromVision }\n\t\t\t\t\tclassName={ className }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ onInputChange }\n\t\t\t\t\tplaceholder={ _placeholder }\n\t\t\t\t\t__experimentalRenderSuggestions={\n\t\t\t\t\t\tshowSuggestions ? handleRenderSuggestions : null\n\t\t\t\t\t}\n\t\t\t\t\t__experimentalFetchLinkSuggestions={ searchHandler }\n\t\t\t\t\t__experimentalHandleURLSuggestions\n\t\t\t\t\t__experimentalShowInitialSuggestions={\n\t\t\t\t\t\tshowInitialSuggestions\n\t\t\t\t\t}\n\t\t\t\t\tonSubmit={ ( suggestion, event ) => {\n\t\t\t\t\t\tconst hasSuggestion = suggestion || focusedSuggestion;\n\n\t\t\t\t\t\t// If there is no suggestion and the value (ie: any manually entered URL) is empty\n\t\t\t\t\t\t// then don't allow submission otherwise we get empty links.\n\t\t\t\t\t\tif ( ! hasSuggestion && ! value?.trim()?.length ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tonSuggestionSelected(\n\t\t\t\t\t\t\t\thasSuggestion || { url: value }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tref={ ref }\n\t\t\t\t\tsuffix={ suffix }\n\t\t\t\t/>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nexport default LinkControlSearchInput;\n\nexport const __experimentalLinkControlSearchInput = ( props ) => {\n\tdeprecated( 'wp.blockEditor.__experimentalLinkControlSearchInput', {\n\t\tsince: '6.8',\n\t} );\n\n\treturn <LinkControlSearchInput { ...props } />;\n};\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst info = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M5.5 12a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm.75 4v1.5h-1.5V8h1.5Zm0 8v-5h-1.5v5h1.5Z\"\n\t\t/>\n\t</SVG>\n);\n\nexport default info;\n","/**\n * Internal dependencies\n */\n\nimport { default as pencil } from './pencil';\nexport default pencil;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst pencil = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z\" />\n\t</SVG>\n);\n\nexport default pencil;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst linkOff = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M17.031 4.703 15.576 4l-1.56 3H14v.03l-2.324 4.47H9.5V13h1.396l-1.502 2.889h-.95a3.694 3.694 0 0 1 0-7.389H10V7H8.444a5.194 5.194 0 1 0 0 10.389h.17L7.5 19.53l1.416.719L15.049 8.5h.507a3.694 3.694 0 0 1 0 7.39H14v1.5h1.556a5.194 5.194 0 0 0 .273-10.383l1.202-2.304Z\" />\n\t</SVG>\n);\n\nexport default linkOff;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst copySmall = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M5.625 5.5h9.75c.069 0 .125.056.125.125v9.75a.125.125 0 0 1-.125.125h-9.75a.125.125 0 0 1-.125-.125v-9.75c0-.069.056-.125.125-.125ZM4 5.625C4 4.728 4.728 4 5.625 4h9.75C16.273 4 17 4.728 17 5.625v9.75c0 .898-.727 1.625-1.625 1.625h-9.75A1.625 1.625 0 0 1 4 15.375v-9.75Zm14.5 11.656v-9H20v9C20 18.8 18.77 20 17.251 20H6.25v-1.5h11.001c.69 0 1.249-.528 1.249-1.219Z\"\n\t\t/>\n\t</SVG>\n);\n\nexport default copySmall;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst { Slot: ViewerSlot, Fill: ViewerFill } = createSlotFill(\n\t'BlockEditorLinkControlViewer'\n);\n\nexport { ViewerSlot, ViewerFill };\nexport default ViewerSlot;\n","/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useEffect, useReducer } from '@wordpress/element';\n\nfunction reducer( state, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RESOLVED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: false,\n\t\t\t\trichData: action.richData,\n\t\t\t};\n\t\tcase 'ERROR':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: false,\n\t\t\t\trichData: null,\n\t\t\t};\n\t\tcase 'LOADING':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: true,\n\t\t\t};\n\t\tdefault:\n\t\t\tthrow new Error( `Unexpected action type ${ action.type }` );\n\t}\n}\n\nfunction useRemoteUrlData( url ) {\n\tconst [ state, dispatch ] = useReducer( reducer, {\n\t\trichData: null,\n\t\tisFetching: false,\n\t} );\n\n\tconst { fetchRichUrlData } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn {\n\t\t\tfetchRichUrlData: getSettings().__experimentalFetchRichUrlData,\n\t\t};\n\t}, [] );\n\n\tuseEffect( () => {\n\t\t// Only make the request if we have an actual URL\n\t\t// and the fetching util is available. In some editors\n\t\t// there may not be such a util.\n\t\tif (\n\t\t\turl?.length &&\n\t\t\tfetchRichUrlData &&\n\t\t\ttypeof AbortController !== 'undefined'\n\t\t) {\n\t\t\tdispatch( {\n\t\t\t\ttype: 'LOADING',\n\t\t\t} );\n\n\t\t\tconst controller = new window.AbortController();\n\n\t\t\tconst signal = controller.signal;\n\n\t\t\tfetchRichUrlData( url, {\n\t\t\t\tsignal,\n\t\t\t} )\n\t\t\t\t.then( ( urlData ) => {\n\t\t\t\t\tdispatch( {\n\t\t\t\t\t\ttype: 'RESOLVED',\n\t\t\t\t\t\trichData: urlData,\n\t\t\t\t\t} );\n\t\t\t\t} )\n\t\t\t\t.catch( () => {\n\t\t\t\t\t// Avoid setting state on unmounted component\n\t\t\t\t\tif ( ! signal.aborted ) {\n\t\t\t\t\t\tdispatch( {\n\t\t\t\t\t\t\ttype: 'ERROR',\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t// Cleanup: when the URL changes the abort the current request.\n\t\t\treturn () => {\n\t\t\t\tcontroller.abort();\n\t\t\t};\n\t\t}\n\t}, [ url ] );\n\n\treturn state;\n}\n\nexport default useRemoteUrlData;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tButton,\n\tExternalLink,\n\t__experimentalTruncate as Truncate,\n} from '@wordpress/components';\nimport { useCopyToClipboard } from '@wordpress/compose';\nimport { filterURLForDisplay, safeDecodeURI } from '@wordpress/url';\nimport { Icon, globe, info, linkOff, edit, copySmall } from '@wordpress/icons';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport { ViewerSlot } from './viewer-slot';\n\nimport useRichUrlData from './use-rich-url-data';\n\n/**\n * Filters the title for display. Removes the protocol and www prefix.\n *\n * @param {string} title The title to be filtered.\n *\n * @return {string} The filtered title.\n */\nfunction filterTitleForDisplay( title ) {\n\t// Derived from `filterURLForDisplay` in `@wordpress/url`.\n\treturn title\n\t\t.replace( /^[a-z\\-.\\+]+[0-9]*:(\\/\\/)?/i, '' )\n\t\t.replace( /^www\\./i, '' );\n}\n\nexport default function LinkPreview( {\n\tvalue,\n\tonEditClick,\n\thasRichPreviews = false,\n\thasUnlinkControl = false,\n\tonRemove,\n} ) {\n\tconst showIconLabels = useSelect(\n\t\t( select ) =>\n\t\t\tselect( preferencesStore ).get( 'core', 'showIconLabels' ),\n\t\t[]\n\t);\n\n\t// Avoid fetching if rich previews are not desired.\n\tconst showRichPreviews = hasRichPreviews ? value?.url : null;\n\n\tconst { richData, isFetching } = useRichUrlData( showRichPreviews );\n\n\t// Rich data may be an empty object so test for that.\n\tconst hasRichData = richData && Object.keys( richData ).length;\n\n\tconst displayURL =\n\t\t( value && filterURLForDisplay( safeDecodeURI( value.url ), 24 ) ) ||\n\t\t'';\n\n\t// url can be undefined if the href attribute is unset\n\tconst isEmptyURL = ! value?.url?.length;\n\n\tconst displayTitle =\n\t\t! isEmptyURL &&\n\t\tstripHTML( richData?.title || value?.title || displayURL );\n\n\tconst isUrlRedundant =\n\t\t! value?.url || filterTitleForDisplay( displayTitle ) === displayURL;\n\n\tlet icon;\n\n\tif ( richData?.icon ) {\n\t\ticon = <img src={ richData?.icon } alt=\"\" />;\n\t} else if ( isEmptyURL ) {\n\t\ticon = <Icon icon={ info } size={ 32 } />;\n\t} else {\n\t\ticon = <Icon icon={ globe } />;\n\t}\n\n\tconst { createNotice } = useDispatch( noticesStore );\n\tconst ref = useCopyToClipboard( value.url, () => {\n\t\tcreateNotice( 'info', __( 'Link copied to clipboard.' ), {\n\t\t\tisDismissible: true,\n\t\t\ttype: 'snackbar',\n\t\t} );\n\t} );\n\n\treturn (\n\t\t<div\n\t\t\trole=\"group\"\n\t\t\taria-label={ __( 'Manage link' ) }\n\t\t\tclassName={ clsx( 'block-editor-link-control__search-item', {\n\t\t\t\t'is-current': true,\n\t\t\t\t'is-rich': hasRichData,\n\t\t\t\t'is-fetching': !! isFetching,\n\t\t\t\t'is-preview': true,\n\t\t\t\t'is-error': isEmptyURL,\n\t\t\t\t'is-url-title': displayTitle === displayURL,\n\t\t\t} ) }\n\t\t>\n\t\t\t<div className=\"block-editor-link-control__search-item-top\">\n\t\t\t\t<span\n\t\t\t\t\tclassName=\"block-editor-link-control__search-item-header\"\n\t\t\t\t\trole=\"figure\"\n\t\t\t\t\taria-label={\n\t\t\t\t\t\t/* translators: Accessibility text for the link preview when editing a link. */\n\t\t\t\t\t\t__( 'Link information' )\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t'block-editor-link-control__search-item-icon',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-image': richData?.icon,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ icon }\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"block-editor-link-control__search-item-details\">\n\t\t\t\t\t\t{ ! isEmptyURL ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-title\"\n\t\t\t\t\t\t\t\t\thref={ value.url }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Truncate numberOfLines={ 1 }>\n\t\t\t\t\t\t\t\t\t\t{ displayTitle }\n\t\t\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t\t{ ! isUrlRedundant && (\n\t\t\t\t\t\t\t\t\t<span className=\"block-editor-link-control__search-item-info\">\n\t\t\t\t\t\t\t\t\t\t<Truncate numberOfLines={ 1 }>\n\t\t\t\t\t\t\t\t\t\t\t{ displayURL }\n\t\t\t\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className=\"block-editor-link-control__search-item-error-notice\">\n\t\t\t\t\t\t\t\t{ __( 'Link is empty' ) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<Button\n\t\t\t\t\ticon={ edit }\n\t\t\t\t\tlabel={ __( 'Edit link' ) }\n\t\t\t\t\tonClick={ onEditClick }\n\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t/>\n\t\t\t\t{ hasUnlinkControl && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ linkOff }\n\t\t\t\t\t\tlabel={ __( 'Remove link' ) }\n\t\t\t\t\t\tonClick={ onRemove }\n\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<Button\n\t\t\t\t\ticon={ copySmall }\n\t\t\t\t\tlabel={ __( 'Copy link' ) }\n\t\t\t\t\tref={ ref }\n\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\tdisabled={ isEmptyURL }\n\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t/>\n\t\t\t\t<ViewerSlot fillProps={ value } />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { CheckboxControl, VisuallyHidden } from '@wordpress/components';\n\nconst noop = () => {};\n\nconst LinkControlSettings = ( { value, onChange = noop, settings } ) => {\n\tif ( ! settings || ! settings.length ) {\n\t\treturn null;\n\t}\n\n\tconst handleSettingChange = ( setting ) => ( newValue ) => {\n\t\tonChange( {\n\t\t\t...value,\n\t\t\t[ setting.id ]: newValue,\n\t\t} );\n\t};\n\n\tconst theSettings = settings.map( ( setting ) => (\n\t\t<CheckboxControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tclassName=\"block-editor-link-control__setting\"\n\t\t\tkey={ setting.id }\n\t\t\tlabel={ setting.title }\n\t\t\tonChange={ handleSettingChange( setting ) }\n\t\t\tchecked={ value ? !! value[ setting.id ] : false }\n\t\t\thelp={ setting?.help }\n\t\t/>\n\t) );\n\n\treturn (\n\t\t<fieldset className=\"block-editor-link-control__settings\">\n\t\t\t<VisuallyHidden as=\"legend\">\n\t\t\t\t{ __( 'Currently selected link settings' ) }\n\t\t\t</VisuallyHidden>\n\t\t\t{ theSettings }\n\t\t</fieldset>\n\t);\n};\n\nexport default LinkControlSettings;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tSpinner,\n\tNotice,\n\tTextControl,\n\t__experimentalHStack as HStack,\n\t__experimentalInputControlSuffixWrapper as InputControlSuffixWrapper,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useRef, useState, useEffect } from '@wordpress/element';\nimport { focus } from '@wordpress/dom';\nimport { ENTER } from '@wordpress/keycodes';\nimport { isShallowEqualObjects } from '@wordpress/is-shallow-equal';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as preferencesStore } from '@wordpress/preferences';\nimport { keyboardReturn } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport LinkControlSettingsDrawer from './settings-drawer';\nimport LinkControlSearchInput from './search-input';\nimport LinkPreview from './link-preview';\nimport LinkSettings from './settings';\nimport useCreatePage from './use-create-page';\nimport useInternalValue from './use-internal-value';\nimport { ViewerFill } from './viewer-slot';\nimport { DEFAULT_LINK_SETTINGS } from './constants';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Default properties associated with a link control value.\n *\n * @typedef WPLinkControlDefaultValue\n *\n * @property {string}   url           Link URL.\n * @property {string=}  title         Link title.\n * @property {boolean=} opensInNewTab Whether link should open in a new browser\n *                                    tab. This value is only assigned if not\n *                                    providing a custom `settings` prop.\n */\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Custom settings values associated with a link.\n *\n * @typedef {{[setting:string]:any}} WPLinkControlSettingsValue\n */\n/* eslint-enable */\n\n/**\n * Custom settings values associated with a link.\n *\n * @typedef WPLinkControlSetting\n *\n * @property {string} id    Identifier to use as property for setting value.\n * @property {string} title Human-readable label to show in user interface.\n */\n\n/**\n * Properties associated with a link control value, composed as a union of the\n * default properties and any custom settings values.\n *\n * @typedef {WPLinkControlDefaultValue&WPLinkControlSettingsValue} WPLinkControlValue\n */\n\n/** @typedef {(nextValue:WPLinkControlValue)=>void} WPLinkControlOnChangeProp */\n\n/**\n * Properties associated with a search suggestion used within the LinkControl.\n *\n * @typedef WPLinkControlSuggestion\n *\n * @property {string} id    Identifier to use to uniquely identify the suggestion.\n * @property {string} type  Identifies the type of the suggestion (eg: `post`,\n *                          `page`, `url`...etc)\n * @property {string} title Human-readable label to show in user interface.\n * @property {string} url   A URL for the suggestion.\n */\n\n/** @typedef {(title:string)=>WPLinkControlSuggestion} WPLinkControlCreateSuggestionProp */\n\n/**\n * @typedef WPLinkControlProps\n *\n * @property {(WPLinkControlSetting[])=}  settings                   An array of settings objects. Each object will used to\n *                                                                   render a `ToggleControl` for that setting.\n * @property {boolean=}                   forceIsEditingLink         If passed as either `true` or `false`, controls the\n *                                                                   internal editing state of the component to respective\n *                                                                   show or not show the URL input field.\n * @property {WPLinkControlValue=}        value                      Current link value.\n * @property {WPLinkControlOnChangeProp=} onChange                   Value change handler, called with the updated value if\n *                                                                   the user selects a new link or updates settings.\n * @property {boolean=}                   noDirectEntry              Whether to allow turning a URL-like search query directly into a link.\n * @property {boolean=}                   showSuggestions            Whether to present suggestions when typing the URL.\n * @property {boolean=}                   showInitialSuggestions     Whether to present initial suggestions immediately.\n * @property {boolean=}                   withCreateSuggestion       Whether to allow creation of link value from suggestion.\n * @property {Object=}                    suggestionsQuery           Query parameters to pass along to wp.blockEditor.__experimentalFetchLinkSuggestions.\n * @property {boolean=}                   noURLSuggestion            Whether to add a fallback suggestion which treats the search query as a URL.\n * @property {boolean=}                   hasTextControl             Whether to add a text field to the UI to update the value.title.\n * @property {string|Function|undefined}  createSuggestionButtonText The text to use in the button that calls createSuggestion.\n * @property {Function}                   renderControlBottom        Optional controls to be rendered at the bottom of the component.\n */\n\nconst noop = () => {};\n\nconst PREFERENCE_SCOPE = 'core/block-editor';\nconst PREFERENCE_KEY = 'linkControlSettingsDrawer';\n\n/**\n * Renders a link control. A link control is a controlled input which maintains\n * a value associated with a link (HTML anchor element) and relevant settings\n * for how that link is expected to behave.\n *\n * @param {WPLinkControlProps} props Component props.\n */\nfunction LinkControl( {\n\tsearchInputPlaceholder,\n\tvalue,\n\tsettings = DEFAULT_LINK_SETTINGS,\n\tonChange = noop,\n\tonRemove,\n\tonCancel,\n\tnoDirectEntry = false,\n\tshowSuggestions = true,\n\tshowInitialSuggestions,\n\tforceIsEditingLink,\n\tcreateSuggestion,\n\twithCreateSuggestion,\n\tinputValue: propInputValue = '',\n\tsuggestionsQuery = {},\n\tnoURLSuggestion = false,\n\tcreateSuggestionButtonText,\n\thasRichPreviews = false,\n\thasTextControl = false,\n\trenderControlBottom = null,\n} ) {\n\tif ( withCreateSuggestion === undefined && createSuggestion ) {\n\t\twithCreateSuggestion = true;\n\t}\n\n\tconst [ settingsOpen, setSettingsOpen ] = useState( false );\n\n\tconst { advancedSettingsPreference } = useSelect( ( select ) => {\n\t\tconst prefsStore = select( preferencesStore );\n\n\t\treturn {\n\t\t\tadvancedSettingsPreference:\n\t\t\t\tprefsStore.get( PREFERENCE_SCOPE, PREFERENCE_KEY ) ?? false,\n\t\t};\n\t}, [] );\n\n\tconst { set: setPreference } = useDispatch( preferencesStore );\n\n\t/**\n\t * Sets the open/closed state of the Advanced Settings Drawer,\n\t * optionlly persisting the state to the user's preferences.\n\t *\n\t * Note that Block Editor components can be consumed by non-WordPress\n\t * environments which may not have preferences setup.\n\t * Therefore a local state is also  used as a fallback.\n\t *\n\t * @param {boolean} prefVal the open/closed state of the Advanced Settings Drawer.\n\t */\n\tconst setSettingsOpenWithPreference = ( prefVal ) => {\n\t\tif ( setPreference ) {\n\t\t\tsetPreference( PREFERENCE_SCOPE, PREFERENCE_KEY, prefVal );\n\t\t}\n\t\tsetSettingsOpen( prefVal );\n\t};\n\n\t// Block Editor components can be consumed by non-WordPress environments\n\t// which may not have these preferences setup.\n\t// Therefore a local state is used as a fallback.\n\tconst isSettingsOpen = advancedSettingsPreference || settingsOpen;\n\n\tconst isMountingRef = useRef( true );\n\tconst wrapperNode = useRef();\n\tconst textInputRef = useRef();\n\tconst isEndingEditWithFocusRef = useRef( false );\n\n\tconst settingsKeys = settings.map( ( { id } ) => id );\n\n\tconst [\n\t\tinternalControlValue,\n\t\tsetInternalControlValue,\n\t\tsetInternalURLInputValue,\n\t\tsetInternalTextInputValue,\n\t\tcreateSetInternalSettingValueHandler,\n\t] = useInternalValue( value );\n\n\tconst valueHasChanges =\n\t\tvalue && ! isShallowEqualObjects( internalControlValue, value );\n\n\tconst [ isEditingLink, setIsEditingLink ] = useState(\n\t\tforceIsEditingLink !== undefined\n\t\t\t? forceIsEditingLink\n\t\t\t: ! value || ! value.url\n\t);\n\n\tconst { createPage, isCreatingPage, errorMessage } =\n\t\tuseCreatePage( createSuggestion );\n\n\tuseEffect( () => {\n\t\tif ( forceIsEditingLink === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsEditingLink( forceIsEditingLink );\n\t}, [ forceIsEditingLink ] );\n\n\tuseEffect( () => {\n\t\t// We don't auto focus into the Link UI on mount\n\t\t// because otherwise using the keyboard to select text\n\t\t// *within* the link format is not possible.\n\t\tif ( isMountingRef.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Scenario - when:\n\t\t// - switching between editable and non editable LinkControl\n\t\t// - clicking on a link\n\t\t// ...then move focus to the *first* element to avoid focus loss\n\t\t// and to ensure focus is *within* the Link UI.\n\t\tconst nextFocusTarget =\n\t\t\tfocus.focusable.find( wrapperNode.current )[ 0 ] ||\n\t\t\twrapperNode.current;\n\n\t\tnextFocusTarget.focus();\n\n\t\tisEndingEditWithFocusRef.current = false;\n\t}, [ isEditingLink, isCreatingPage ] );\n\n\t// The component mounting reference is maintained separately\n\t// to correctly reset values in `StrictMode`.\n\tuseEffect( () => {\n\t\tisMountingRef.current = false;\n\n\t\treturn () => {\n\t\t\tisMountingRef.current = true;\n\t\t};\n\t}, [] );\n\n\tconst hasLinkValue = value?.url?.trim()?.length > 0;\n\n\t/**\n\t * Cancels editing state and marks that focus may need to be restored after\n\t * the next render, if focus was within the wrapper when editing finished.\n\t */\n\tconst stopEditing = () => {\n\t\tisEndingEditWithFocusRef.current = !! wrapperNode.current?.contains(\n\t\t\twrapperNode.current.ownerDocument.activeElement\n\t\t);\n\n\t\tsetIsEditingLink( false );\n\t};\n\n\tconst handleSelectSuggestion = ( updatedValue ) => {\n\t\t// Suggestions may contains \"settings\" values (e.g. `opensInNewTab`)\n\t\t// which should not override any existing settings values set by the\n\t\t// user. This filters out any settings values from the suggestion.\n\t\tconst nonSettingsChanges = Object.keys( updatedValue ).reduce(\n\t\t\t( acc, key ) => {\n\t\t\t\tif ( ! settingsKeys.includes( key ) ) {\n\t\t\t\t\tacc[ key ] = updatedValue[ key ];\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t{}\n\t\t);\n\n\t\tonChange( {\n\t\t\t...internalControlValue,\n\t\t\t...nonSettingsChanges,\n\t\t\t// As title is not a setting, it must be manually applied\n\t\t\t// in such a way as to preserve the users changes over\n\t\t\t// any \"title\" value provided by the \"suggestion\".\n\t\t\ttitle: internalControlValue?.title || updatedValue?.title,\n\t\t} );\n\n\t\tstopEditing();\n\t};\n\n\tconst handleSubmit = () => {\n\t\tif ( valueHasChanges ) {\n\t\t\t// Submit the original value with new stored values applied\n\t\t\t// on top. URL is a special case as it may also be a prop.\n\t\t\tonChange( {\n\t\t\t\t...value,\n\t\t\t\t...internalControlValue,\n\t\t\t\turl: currentUrlInputValue,\n\t\t\t} );\n\t\t}\n\t\tstopEditing();\n\t};\n\n\tconst handleSubmitWithEnter = ( event ) => {\n\t\tconst { keyCode } = event;\n\n\t\tif (\n\t\t\tkeyCode === ENTER &&\n\t\t\t! currentInputIsEmpty // Disallow submitting empty values.\n\t\t) {\n\t\t\tevent.preventDefault();\n\t\t\thandleSubmit();\n\t\t}\n\t};\n\n\tconst resetInternalValues = () => {\n\t\tsetInternalControlValue( value );\n\t};\n\n\tconst handleCancel = ( event ) => {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t// Ensure that any unsubmitted input changes are reset.\n\t\tresetInternalValues();\n\n\t\tif ( hasLinkValue ) {\n\t\t\t// If there is a link then exist editing mode and show preview.\n\t\t\tstopEditing();\n\t\t} else {\n\t\t\t// If there is no link value, then remove the link entirely.\n\t\t\tonRemove?.();\n\t\t}\n\n\t\tonCancel?.();\n\t};\n\n\tconst currentUrlInputValue =\n\t\tpropInputValue || internalControlValue?.url || '';\n\n\tconst currentInputIsEmpty = ! currentUrlInputValue?.trim()?.length;\n\n\tconst shownUnlinkControl =\n\t\tonRemove && value && ! isEditingLink && ! isCreatingPage;\n\n\tconst showActions = isEditingLink && hasLinkValue;\n\n\t// Only show text control once a URL value has been committed\n\t// and it isn't just empty whitespace.\n\t// See https://github.com/WordPress/gutenberg/pull/33849/#issuecomment-932194927.\n\tconst showTextControl = hasLinkValue && hasTextControl;\n\n\tconst isEditing = ( isEditingLink || ! value ) && ! isCreatingPage;\n\tconst isDisabled = ! valueHasChanges || currentInputIsEmpty;\n\tconst showSettings = !! settings?.length && isEditingLink && hasLinkValue;\n\n\treturn (\n\t\t<div\n\t\t\ttabIndex={ -1 }\n\t\t\tref={ wrapperNode }\n\t\t\tclassName=\"block-editor-link-control\"\n\t\t>\n\t\t\t{ isCreatingPage && (\n\t\t\t\t<div className=\"block-editor-link-control__loading\">\n\t\t\t\t\t<Spinner /> { __( 'Creating' ) }\n\t\t\t\t</div>\n\t\t\t) }\n\n\t\t\t{ isEditing && (\n\t\t\t\t<>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ clsx( {\n\t\t\t\t\t\t\t'block-editor-link-control__search-input-wrapper': true,\n\t\t\t\t\t\t\t'has-text-control': showTextControl,\n\t\t\t\t\t\t\t'has-actions': showActions,\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ showTextControl && (\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tref={ textInputRef }\n\t\t\t\t\t\t\t\tclassName=\"block-editor-link-control__field block-editor-link-control__text-content\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Text' ) }\n\t\t\t\t\t\t\t\tvalue={ internalControlValue?.title }\n\t\t\t\t\t\t\t\tonChange={ setInternalTextInputValue }\n\t\t\t\t\t\t\t\tonKeyDown={ handleSubmitWithEnter }\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<LinkControlSearchInput\n\t\t\t\t\t\t\tcurrentLink={ value }\n\t\t\t\t\t\t\tclassName=\"block-editor-link-control__field block-editor-link-control__search-input\"\n\t\t\t\t\t\t\tplaceholder={ searchInputPlaceholder }\n\t\t\t\t\t\t\tvalue={ currentUrlInputValue }\n\t\t\t\t\t\t\twithCreateSuggestion={ withCreateSuggestion }\n\t\t\t\t\t\t\tonCreateSuggestion={ createPage }\n\t\t\t\t\t\t\tonChange={ setInternalURLInputValue }\n\t\t\t\t\t\t\tonSelect={ handleSelectSuggestion }\n\t\t\t\t\t\t\tshowInitialSuggestions={ showInitialSuggestions }\n\t\t\t\t\t\t\tallowDirectEntry={ ! noDirectEntry }\n\t\t\t\t\t\t\tshowSuggestions={ showSuggestions }\n\t\t\t\t\t\t\tsuggestionsQuery={ suggestionsQuery }\n\t\t\t\t\t\t\twithURLSuggestion={ ! noURLSuggestion }\n\t\t\t\t\t\t\tcreateSuggestionButtonText={\n\t\t\t\t\t\t\t\tcreateSuggestionButtonText\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thideLabelFromVision={ ! showTextControl }\n\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\tshowActions ? undefined : (\n\t\t\t\t\t\t\t\t\t<InputControlSuffixWrapper variant=\"control\">\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t\t\tisDisabled ? noop : handleSubmit\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Submit' ) }\n\t\t\t\t\t\t\t\t\t\t\ticon={ keyboardReturn }\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-link-control__search-submit\"\n\t\t\t\t\t\t\t\t\t\t\taria-disabled={ isDisabled }\n\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</InputControlSuffixWrapper>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ errorMessage && (\n\t\t\t\t\t\t<Notice\n\t\t\t\t\t\t\tclassName=\"block-editor-link-control__search-error\"\n\t\t\t\t\t\t\tstatus=\"error\"\n\t\t\t\t\t\t\tisDismissible={ false }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ errorMessage }\n\t\t\t\t\t\t</Notice>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\n\t\t\t{ value && ! isEditingLink && ! isCreatingPage && (\n\t\t\t\t<LinkPreview\n\t\t\t\t\tkey={ value?.url } // force remount when URL changes to avoid race conditions for rich previews\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonEditClick={ () => setIsEditingLink( true ) }\n\t\t\t\t\thasRichPreviews={ hasRichPreviews }\n\t\t\t\t\thasUnlinkControl={ shownUnlinkControl }\n\t\t\t\t\tonRemove={ () => {\n\t\t\t\t\t\tonRemove();\n\t\t\t\t\t\tsetIsEditingLink( true );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\n\t\t\t{ showSettings && (\n\t\t\t\t<div className=\"block-editor-link-control__tools\">\n\t\t\t\t\t{ ! currentInputIsEmpty && (\n\t\t\t\t\t\t<LinkControlSettingsDrawer\n\t\t\t\t\t\t\tsettingsOpen={ isSettingsOpen }\n\t\t\t\t\t\t\tsetSettingsOpen={ setSettingsOpenWithPreference }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<LinkSettings\n\t\t\t\t\t\t\t\tvalue={ internalControlValue }\n\t\t\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t\t\t\tonChange={ createSetInternalSettingValueHandler(\n\t\t\t\t\t\t\t\t\tsettingsKeys\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</LinkControlSettingsDrawer>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t) }\n\n\t\t\t{ showActions && (\n\t\t\t\t<HStack\n\t\t\t\t\tjustify=\"right\"\n\t\t\t\t\tclassName=\"block-editor-link-control__search-actions\"\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tonClick={ handleCancel }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tonClick={ isDisabled ? noop : handleSubmit }\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-submit\"\n\t\t\t\t\t\taria-disabled={ isDisabled }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</HStack>\n\t\t\t) }\n\n\t\t\t{ ! isCreatingPage && renderControlBottom && renderControlBottom() }\n\t\t</div>\n\t);\n}\n\nLinkControl.ViewerFill = ViewerFill;\nLinkControl.DEFAULT_LINK_SETTINGS = DEFAULT_LINK_SETTINGS;\n\nconst DeprecatedExperimentalLinkControl = ( props ) => {\n\tdeprecated( 'wp.blockEditor.__experimentalLinkControl', {\n\t\tsince: '6.8',\n\t\talternative: 'wp.blockEditor.LinkControl',\n\t} );\n\n\treturn <LinkControl { ...props } />;\n};\n\nDeprecatedExperimentalLinkControl.ViewerFill = LinkControl.ViewerFill;\nDeprecatedExperimentalLinkControl.DEFAULT_LINK_SETTINGS =\n\tLinkControl.DEFAULT_LINK_SETTINGS;\n\nexport { DeprecatedExperimentalLinkControl };\nexport default LinkControl;\n","/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\n\n/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal';\n\nexport default function useInternalValue( value ) {\n\tconst [ internalValue, setInternalValue ] = useState( value || {} );\n\tconst [ previousValue, setPreviousValue ] = useState( value );\n\n\t// If the value prop changes, update the internal state.\n\t// See:\n\t// - https://github.com/WordPress/gutenberg/pull/51387#issuecomment-1722927384.\n\t// - https://react.dev/reference/react/useState#storing-information-from-previous-renders.\n\tif ( ! fastDeepEqual( value, previousValue ) ) {\n\t\tsetPreviousValue( value );\n\t\tsetInternalValue( value );\n\t}\n\n\tconst setInternalURLInputValue = ( nextValue ) => {\n\t\tsetInternalValue( {\n\t\t\t...internalValue,\n\t\t\turl: nextValue,\n\t\t} );\n\t};\n\n\tconst setInternalTextInputValue = ( nextValue ) => {\n\t\tsetInternalValue( {\n\t\t\t...internalValue,\n\t\t\ttitle: nextValue,\n\t\t} );\n\t};\n\n\tconst createSetInternalSettingValueHandler =\n\t\t( settingsKeys ) => ( nextValue ) => {\n\t\t\t// Only apply settings values which are defined in the settings prop.\n\t\t\tconst settingsUpdates = Object.keys( nextValue ).reduce(\n\t\t\t\t( acc, key ) => {\n\t\t\t\t\tif ( settingsKeys.includes( key ) ) {\n\t\t\t\t\t\tacc[ key ] = nextValue[ key ];\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t);\n\n\t\t\tsetInternalValue( {\n\t\t\t\t...internalValue,\n\t\t\t\t...settingsUpdates,\n\t\t\t} );\n\t\t};\n\n\treturn [\n\t\tinternalValue,\n\t\tsetInternalValue,\n\t\tsetInternalURLInputValue,\n\t\tsetInternalTextInputValue,\n\t\tcreateSetInternalSettingValueHandler,\n\t];\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useEffect, useState, useRef } from '@wordpress/element';\n\nexport default function useCreatePage( handleCreatePage ) {\n\tconst cancelableCreateSuggestion = useRef();\n\tconst [ isCreatingPage, setIsCreatingPage ] = useState( false );\n\tconst [ errorMessage, setErrorMessage ] = useState( null );\n\n\tconst createPage = async function ( suggestionTitle ) {\n\t\tsetIsCreatingPage( true );\n\t\tsetErrorMessage( null );\n\n\t\ttry {\n\t\t\t// Make cancellable in order that we can avoid setting State\n\t\t\t// if the component unmounts during the call to `createSuggestion`\n\t\t\tcancelableCreateSuggestion.current = makeCancelable(\n\t\t\t\t// Using Promise.resolve to allow createSuggestion to return a\n\t\t\t\t// non-Promise based value.\n\t\t\t\tPromise.resolve( handleCreatePage( suggestionTitle ) )\n\t\t\t);\n\n\t\t\treturn await cancelableCreateSuggestion.current.promise;\n\t\t} catch ( error ) {\n\t\t\tif ( error && error.isCanceled ) {\n\t\t\t\treturn; // bail if canceled to avoid setting state\n\t\t\t}\n\n\t\t\tsetErrorMessage(\n\t\t\t\terror.message ||\n\t\t\t\t\t__(\n\t\t\t\t\t\t'An unknown error occurred during creation. Please try again.'\n\t\t\t\t\t)\n\t\t\t);\n\t\t\tthrow error;\n\t\t} finally {\n\t\t\tsetIsCreatingPage( false );\n\t\t}\n\t};\n\n\t/**\n\t * Handles cancelling any pending Promises that have been made cancelable.\n\t */\n\tuseEffect( () => {\n\t\treturn () => {\n\t\t\t// componentDidUnmount\n\t\t\tif ( cancelableCreateSuggestion.current ) {\n\t\t\t\tcancelableCreateSuggestion.current.cancel();\n\t\t\t}\n\t\t};\n\t}, [] );\n\n\treturn {\n\t\tcreatePage,\n\t\tisCreatingPage,\n\t\terrorMessage,\n\t};\n}\n\n/**\n * Creates a wrapper around a promise which allows it to be programmatically\n * cancelled.\n * See: https://reactjs.org/blog/2015/12/16/ismounted-antipattern.html\n *\n * @param {Promise} promise the Promise to make cancelable\n */\nconst makeCancelable = ( promise ) => {\n\tlet hasCanceled_ = false;\n\n\tconst wrappedPromise = new Promise( ( resolve, reject ) => {\n\t\tpromise.then(\n\t\t\t( val ) =>\n\t\t\t\thasCanceled_ ? reject( { isCanceled: true } ) : resolve( val ),\n\t\t\t( error ) =>\n\t\t\t\thasCanceled_ ? reject( { isCanceled: true } ) : reject( error )\n\t\t);\n\t} );\n\n\treturn {\n\t\tpromise: wrappedPromise,\n\t\tcancel() {\n\t\t\thasCanceled_ = true;\n\t\t},\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport { speak } from '@wordpress/a11y';\nimport {\n\tFormFileUpload,\n\tNavigableMenu,\n\tMenuItem,\n\tDropdown,\n\twithFilters,\n\tToolbarButton,\n} from '@wordpress/components';\nimport { useSelect, withDispatch } from '@wordpress/data';\nimport { DOWN } from '@wordpress/keycodes';\nimport {\n\tpostFeaturedImage,\n\tupload,\n\tmedia as mediaIcon,\n} from '@wordpress/icons';\nimport { compose } from '@wordpress/compose';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport MediaUpload from '../media-upload';\nimport MediaUploadCheck from '../media-upload/check';\nimport LinkControl from '../link-control';\nimport { store as blockEditorStore } from '../../store';\n\nconst noop = () => {};\nlet uniqueId = 0;\n\nconst MediaReplaceFlow = ( {\n\tmediaURL,\n\tmediaId,\n\tmediaIds,\n\tallowedTypes,\n\taccept,\n\tonError,\n\tonSelect,\n\tonSelectURL,\n\tonReset,\n\tonToggleFeaturedImage,\n\tuseFeaturedImage,\n\tonFilesUpload = noop,\n\tname = __( 'Replace' ),\n\tcreateNotice,\n\tremoveNotice,\n\tchildren,\n\tmultiple = false,\n\taddToGallery,\n\thandleUpload = true,\n\tpopoverProps,\n\trenderToggle,\n} ) => {\n\tconst { getSettings } = useSelect( blockEditorStore );\n\tconst errorNoticeID = `block-editor/media-replace-flow/error-notice/${ ++uniqueId }`;\n\n\tconst onUploadError = ( message ) => {\n\t\tconst safeMessage = stripHTML( message );\n\t\tif ( onError ) {\n\t\t\tonError( safeMessage );\n\t\t\treturn;\n\t\t}\n\t\t// We need to set a timeout for showing the notice\n\t\t// so that VoiceOver and possibly other screen readers\n\t\t// can announce the error after the toolbar button\n\t\t// regains focus once the upload dialog closes.\n\t\t// Otherwise VO simply skips over the notice and announces\n\t\t// the focused element and the open menu.\n\t\tsetTimeout( () => {\n\t\t\tcreateNotice( 'error', safeMessage, {\n\t\t\t\tspeak: true,\n\t\t\t\tid: errorNoticeID,\n\t\t\t\tisDismissible: true,\n\t\t\t} );\n\t\t}, 1000 );\n\t};\n\n\tconst selectMedia = ( media, closeMenu ) => {\n\t\tif ( useFeaturedImage && onToggleFeaturedImage ) {\n\t\t\tonToggleFeaturedImage();\n\t\t}\n\t\tcloseMenu();\n\t\t// Calling `onSelect` after the state update since it might unmount the component.\n\t\tonSelect( media );\n\t\tspeak( __( 'The media file has been replaced' ) );\n\t\tremoveNotice( errorNoticeID );\n\t};\n\n\tconst uploadFiles = ( event, closeMenu ) => {\n\t\tconst files = event.target.files;\n\t\tif ( ! handleUpload ) {\n\t\t\tcloseMenu();\n\t\t\treturn onSelect( files );\n\t\t}\n\t\tonFilesUpload( files );\n\t\tgetSettings().mediaUpload( {\n\t\t\tallowedTypes,\n\t\t\tfilesList: files,\n\t\t\tonFileChange: ( [ media ] ) => {\n\t\t\t\tselectMedia( media, closeMenu );\n\t\t\t},\n\t\t\tonError: onUploadError,\n\t\t} );\n\t};\n\n\tconst openOnArrowDown = ( event ) => {\n\t\tif ( event.keyCode === DOWN ) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.target.click();\n\t\t}\n\t};\n\n\tconst onlyAllowsImages = () => {\n\t\tif ( ! allowedTypes || allowedTypes.length === 0 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn allowedTypes.every(\n\t\t\t( allowedType ) =>\n\t\t\t\tallowedType === 'image' || allowedType.startsWith( 'image/' )\n\t\t);\n\t};\n\n\tconst gallery = multiple && onlyAllowsImages();\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ popoverProps }\n\t\t\tcontentClassName=\"block-editor-media-replace-flow__options\"\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => {\n\t\t\t\tif ( renderToggle ) {\n\t\t\t\t\treturn renderToggle( {\n\t\t\t\t\t\t'aria-expanded': isOpen,\n\t\t\t\t\t\t'aria-haspopup': 'true',\n\t\t\t\t\t\tonClick: onToggle,\n\t\t\t\t\t\tonKeyDown: openOnArrowDown,\n\t\t\t\t\t\tchildren: name,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\tonKeyDown={ openOnArrowDown }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ name }\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t);\n\t\t\t} }\n\t\t\trenderContent={ ( { onClose } ) => (\n\t\t\t\t<>\n\t\t\t\t\t<NavigableMenu className=\"block-editor-media-replace-flow__media-upload-menu\">\n\t\t\t\t\t\t<MediaUploadCheck>\n\t\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\tgallery={ gallery }\n\t\t\t\t\t\t\t\taddToGallery={ addToGallery }\n\t\t\t\t\t\t\t\tmultiple={ multiple }\n\t\t\t\t\t\t\t\tvalue={ multiple ? mediaIds : mediaId }\n\t\t\t\t\t\t\t\tonSelect={ ( media ) =>\n\t\t\t\t\t\t\t\t\tselectMedia( media, onClose )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tallowedTypes={ allowedTypes }\n\t\t\t\t\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\ticon={ mediaIcon }\n\t\t\t\t\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Open Media Library' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormFileUpload\n\t\t\t\t\t\t\t\tonChange={ ( event ) => {\n\t\t\t\t\t\t\t\t\tuploadFiles( event, onClose );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\taccept={ accept }\n\t\t\t\t\t\t\t\tmultiple={ !! multiple }\n\t\t\t\t\t\t\t\trender={ ( { openFileDialog } ) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\ticon={ upload }\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\topenFileDialog();\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ _x( 'Upload', 'verb' ) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MediaUploadCheck>\n\t\t\t\t\t\t{ onToggleFeaturedImage && (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\ticon={ postFeaturedImage }\n\t\t\t\t\t\t\t\tonClick={ onToggleFeaturedImage }\n\t\t\t\t\t\t\t\tisPressed={ useFeaturedImage }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Use featured image' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ mediaURL && onReset && (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tonReset();\n\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ typeof children === 'function'\n\t\t\t\t\t\t\t? children( { onClose } )\n\t\t\t\t\t\t\t: children }\n\t\t\t\t\t</NavigableMenu>\n\t\t\t\t\t{ onSelectURL && (\n\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\n\t\t\t\t\t\t<form className=\"block-editor-media-flow__url-input\">\n\t\t\t\t\t\t\t<span className=\"block-editor-media-replace-flow__image-url-label\">\n\t\t\t\t\t\t\t\t{ __( 'Current media URL:' ) }\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<LinkControl\n\t\t\t\t\t\t\t\tvalue={ { url: mediaURL } }\n\t\t\t\t\t\t\t\tsettings={ [] }\n\t\t\t\t\t\t\t\tshowSuggestions={ false }\n\t\t\t\t\t\t\t\tonChange={ ( { url } ) => {\n\t\t\t\t\t\t\t\t\tonSelectURL( url );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tsearchInputPlaceholder={ __(\n\t\t\t\t\t\t\t\t\t'Paste or type URL'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\t\t/>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-replace-flow/README.md\n */\nexport default compose( [\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice, removeNotice } = dispatch( noticesStore );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tremoveNotice,\n\t\t};\n\t} ),\n\twithFilters( 'editor.MediaReplaceFlow' ),\n] )( MediaReplaceFlow );\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tToggleControl,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalVStack as VStack,\n\tDropZone,\n\tFlexItem,\n\tFocalPointPicker,\n\tMenuItem,\n\tVisuallyHidden,\n\t__experimentalHStack as HStack,\n\t__experimentalTruncate as Truncate,\n\tDropdown,\n\tPlaceholder,\n\tSpinner,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\tButton,\n} from '@wordpress/components';\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { getFilename } from '@wordpress/url';\nimport { useRef, useState, useEffect, useMemo } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { focus } from '@wordpress/dom';\nimport { isBlobURL } from '@wordpress/blob';\n\n/**\n * Internal dependencies\n */\nimport { getResolvedValue } from '../global-styles/utils';\nimport { hasBackgroundImageValue } from '../global-styles/background-panel';\nimport { setImmutably } from '../../utils/object';\nimport MediaReplaceFlow from '../media-replace-flow';\nimport { store as blockEditorStore } from '../../store';\n\nimport {\n\tglobalStylesDataKey,\n\tglobalStylesLinksDataKey,\n} from '../../store/private-keys';\n\nconst IMAGE_BACKGROUND_TYPE = 'image';\n\nconst BACKGROUND_POPOVER_PROPS = {\n\tplacement: 'left-start',\n\toffset: 36,\n\tshift: true,\n\tclassName: 'block-editor-global-styles-background-panel__popover',\n};\nconst noop = () => {};\n\n/**\n * Get the help text for the background size control.\n *\n * @param {string} value backgroundSize value.\n * @return {string}      Translated help text.\n */\nfunction backgroundSizeHelpText( value ) {\n\tif ( value === 'cover' || value === undefined ) {\n\t\treturn __( 'Image covers the space evenly.' );\n\t}\n\tif ( value === 'contain' ) {\n\t\treturn __( 'Image is contained without distortion.' );\n\t}\n\treturn __( 'Image has a fixed width.' );\n}\n\n/**\n * Converts decimal x and y coords from FocalPointPicker to percentage-based values\n * to use as backgroundPosition value.\n *\n * @param {{x?:number, y?:number}} value FocalPointPicker coords.\n * @return {string}      \t\t\t\t backgroundPosition value.\n */\nexport const coordsToBackgroundPosition = ( value ) => {\n\tif ( ! value || ( isNaN( value.x ) && isNaN( value.y ) ) ) {\n\t\treturn undefined;\n\t}\n\n\tconst x = isNaN( value.x ) ? 0.5 : value.x;\n\tconst y = isNaN( value.y ) ? 0.5 : value.y;\n\n\treturn `${ x * 100 }% ${ y * 100 }%`;\n};\n\n/**\n * Converts backgroundPosition value to x and y coords for FocalPointPicker.\n *\n * @param {string} value backgroundPosition value.\n * @return {{x?:number, y?:number}}       FocalPointPicker coords.\n */\nexport const backgroundPositionToCoords = ( value ) => {\n\tif ( ! value ) {\n\t\treturn { x: undefined, y: undefined };\n\t}\n\n\tlet [ x, y ] = value.split( ' ' ).map( ( v ) => parseFloat( v ) / 100 );\n\tx = isNaN( x ) ? undefined : x;\n\ty = isNaN( y ) ? x : y;\n\n\treturn { x, y };\n};\n\nfunction InspectorImagePreviewItem( {\n\tas = 'span',\n\timgUrl,\n\ttoggleProps = {},\n\tfilename,\n\tlabel,\n\tonToggleCallback = noop,\n} ) {\n\tconst { isOpen, ...restToggleProps } = toggleProps;\n\n\tuseEffect( () => {\n\t\tif ( typeof isOpen !== 'undefined' ) {\n\t\t\tonToggleCallback( isOpen );\n\t\t}\n\t}, [ isOpen, onToggleCallback ] );\n\n\tconst renderPreviewContent = () => {\n\t\treturn (\n\t\t\t<HStack\n\t\t\t\tjustify=\"flex-start\"\n\t\t\t\tas=\"span\"\n\t\t\t\tclassName=\"block-editor-global-styles-background-panel__inspector-preview-inner\"\n\t\t\t>\n\t\t\t\t{ imgUrl && (\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"block-editor-global-styles-background-panel__inspector-image-indicator-wrapper\"\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName=\"block-editor-global-styles-background-panel__inspector-image-indicator\"\n\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\tbackgroundImage: `url(${ imgUrl })`,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t\t<FlexItem as=\"span\" style={ imgUrl ? {} : { flexGrow: 1 } }>\n\t\t\t\t\t<Truncate\n\t\t\t\t\t\tnumberOfLines={ 1 }\n\t\t\t\t\t\tclassName=\"block-editor-global-styles-background-panel__inspector-media-replace-title\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ label }\n\t\t\t\t\t</Truncate>\n\t\t\t\t\t<VisuallyHidden as=\"span\">\n\t\t\t\t\t\t{ imgUrl\n\t\t\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t\t\t/* translators: %s: file name */\n\t\t\t\t\t\t\t\t\t__( 'Background image: %s' ),\n\t\t\t\t\t\t\t\t\tfilename || label\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: __( 'No background image selected' ) }\n\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t</FlexItem>\n\t\t\t</HStack>\n\t\t);\n\t};\n\n\treturn as === 'button' ? (\n\t\t<Button __next40pxDefaultSize { ...restToggleProps }>\n\t\t\t{ renderPreviewContent() }\n\t\t</Button>\n\t) : (\n\t\trenderPreviewContent()\n\t);\n}\n\nfunction BackgroundControlsPanel( {\n\tlabel,\n\tfilename,\n\turl: imgUrl,\n\tchildren,\n\tonToggle: onToggleCallback = noop,\n\thasImageValue,\n} ) {\n\tif ( ! hasImageValue ) {\n\t\treturn;\n\t}\n\n\tconst imgLabel =\n\t\tlabel || getFilename( imgUrl ) || __( 'Add background image' );\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ BACKGROUND_POPOVER_PROPS }\n\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\tconst toggleProps = {\n\t\t\t\t\tonClick: onToggle,\n\t\t\t\t\tclassName:\n\t\t\t\t\t\t'block-editor-global-styles-background-panel__dropdown-toggle',\n\t\t\t\t\t'aria-expanded': isOpen,\n\t\t\t\t\t'aria-label': __(\n\t\t\t\t\t\t'Background size, position and repeat options.'\n\t\t\t\t\t),\n\t\t\t\t\tisOpen,\n\t\t\t\t};\n\t\t\t\treturn (\n\t\t\t\t\t<InspectorImagePreviewItem\n\t\t\t\t\t\timgUrl={ imgUrl }\n\t\t\t\t\t\tfilename={ filename }\n\t\t\t\t\t\tlabel={ imgLabel }\n\t\t\t\t\t\ttoggleProps={ toggleProps }\n\t\t\t\t\t\tas=\"button\"\n\t\t\t\t\t\tonToggleCallback={ onToggleCallback }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} }\n\t\t\trenderContent={ () => (\n\t\t\t\t<DropdownContentWrapper\n\t\t\t\t\tclassName=\"block-editor-global-styles-background-panel__dropdown-content-wrapper\"\n\t\t\t\t\tpaddingSize=\"medium\"\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</DropdownContentWrapper>\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nfunction LoadingSpinner() {\n\treturn (\n\t\t<Placeholder className=\"block-editor-global-styles-background-panel__loading\">\n\t\t\t<Spinner />\n\t\t</Placeholder>\n\t);\n}\n\nfunction BackgroundImageControls( {\n\tonChange,\n\tstyle,\n\tinheritedValue,\n\tonRemoveImage = noop,\n\tonResetImage = noop,\n\tdisplayInPanel,\n\tdefaultValues,\n\tcontainerRef,\n} ) {\n\tconst [ isUploading, setIsUploading ] = useState( false );\n\tconst { getSettings } = useSelect( blockEditorStore );\n\n\tconst { id, title, url } = style?.background?.backgroundImage || {\n\t\t...inheritedValue?.background?.backgroundImage,\n\t};\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\tconst onUploadError = ( message ) => {\n\t\tcreateErrorNotice( message, { type: 'snackbar' } );\n\t\tsetIsUploading( false );\n\t};\n\n\tconst resetBackgroundImage = () =>\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tstyle,\n\t\t\t\t[ 'background', 'backgroundImage' ],\n\t\t\t\tundefined\n\t\t\t)\n\t\t);\n\n\tconst onSelectMedia = ( media ) => {\n\t\tif ( ! media || ! media.url ) {\n\t\t\tresetBackgroundImage();\n\t\t\tsetIsUploading( false );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isBlobURL( media.url ) ) {\n\t\t\tsetIsUploading( true );\n\t\t\treturn;\n\t\t}\n\n\t\t// For media selections originated from a file upload.\n\t\tif (\n\t\t\t( media.media_type &&\n\t\t\t\tmedia.media_type !== IMAGE_BACKGROUND_TYPE ) ||\n\t\t\t( ! media.media_type &&\n\t\t\t\tmedia.type &&\n\t\t\t\tmedia.type !== IMAGE_BACKGROUND_TYPE )\n\t\t) {\n\t\t\tonUploadError(\n\t\t\t\t__( 'Only images can be used as a background image.' )\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst sizeValue =\n\t\t\tstyle?.background?.backgroundSize || defaultValues?.backgroundSize;\n\t\tconst positionValue = style?.background?.backgroundPosition;\n\t\tonChange(\n\t\t\tsetImmutably( style, [ 'background' ], {\n\t\t\t\t...style?.background,\n\t\t\t\tbackgroundImage: {\n\t\t\t\t\turl: media.url,\n\t\t\t\t\tid: media.id,\n\t\t\t\t\tsource: 'file',\n\t\t\t\t\ttitle: media.title || undefined,\n\t\t\t\t},\n\t\t\t\tbackgroundPosition:\n\t\t\t\t\t/*\n\t\t\t\t\t * A background image uploaded and set in the editor receives a default background position of '50% 0',\n\t\t\t\t\t * when the background image size is the equivalent of \"Tile\".\n\t\t\t\t\t * This is to increase the chance that the image's focus point is visible.\n\t\t\t\t\t * This is in-editor only to assist with the user experience.\n\t\t\t\t\t */\n\t\t\t\t\t! positionValue && ( 'auto' === sizeValue || ! sizeValue )\n\t\t\t\t\t\t? '50% 0'\n\t\t\t\t\t\t: positionValue,\n\t\t\t\tbackgroundSize: sizeValue,\n\t\t\t} )\n\t\t);\n\t\tsetIsUploading( false );\n\t\t// Close the dropdown and focus the toggle button.\n\t\tcloseAndFocus();\n\t};\n\n\t// Drag and drop callback, restricting image to one.\n\tconst onFilesDrop = ( filesList ) => {\n\t\tgetSettings().mediaUpload( {\n\t\t\tallowedTypes: [ IMAGE_BACKGROUND_TYPE ],\n\t\t\tfilesList,\n\t\t\tonFileChange( [ image ] ) {\n\t\t\t\tonSelectMedia( image );\n\t\t\t},\n\t\t\tonError: onUploadError,\n\t\t\tmultiple: false,\n\t\t} );\n\t};\n\n\tconst hasValue = hasBackgroundImageValue( style );\n\n\tconst closeAndFocus = () => {\n\t\t// Use requestAnimationFrame to ensure DOM updates are complete\n\t\twindow.requestAnimationFrame( () => {\n\t\t\tconst [ toggleButton ] = focus.tabbable.find(\n\t\t\t\tcontainerRef?.current\n\t\t\t);\n\t\t\tif ( ! toggleButton ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Focus the toggle button and close the dropdown menu.\n\t\t\t// This ensures similar behaviour as to selecting an image, where the dropdown is\n\t\t\t// closed and focus is redirected to the dropdown toggle button.\n\t\t\ttoggleButton.focus();\n\t\t} );\n\t};\n\n\tconst onRemove = () =>\n\t\tonChange(\n\t\t\tsetImmutably( style, [ 'background' ], {\n\t\t\t\tbackgroundImage: 'none',\n\t\t\t} )\n\t\t);\n\tconst canRemove = ! hasValue && hasBackgroundImageValue( inheritedValue );\n\tconst imgLabel =\n\t\ttitle || getFilename( url ) || __( 'Add background image' );\n\n\treturn (\n\t\t<div className=\"block-editor-global-styles-background-panel__image-tools-panel-item\">\n\t\t\t{ isUploading && <LoadingSpinner /> }\n\t\t\t<MediaReplaceFlow\n\t\t\t\tmediaId={ id }\n\t\t\t\tmediaURL={ url }\n\t\t\t\tallowedTypes={ [ IMAGE_BACKGROUND_TYPE ] }\n\t\t\t\taccept=\"image/*\"\n\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tclassName: clsx( {\n\t\t\t\t\t\t'block-editor-global-styles-background-panel__media-replace-popover':\n\t\t\t\t\t\t\tdisplayInPanel,\n\t\t\t\t\t} ),\n\t\t\t\t} }\n\t\t\t\tname={\n\t\t\t\t\t<InspectorImagePreviewItem\n\t\t\t\t\t\timgUrl={ url }\n\t\t\t\t\t\tfilename={ title }\n\t\t\t\t\t\tlabel={ imgLabel }\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\trenderToggle={ ( props ) => (\n\t\t\t\t\t<Button { ...props } __next40pxDefaultSize />\n\t\t\t\t) }\n\t\t\t\tonError={ onUploadError }\n\t\t\t\tonReset={ () => {\n\t\t\t\t\tcloseAndFocus();\n\t\t\t\t\tonResetImage();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ canRemove && (\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tcloseAndFocus();\n\t\t\t\t\t\t\tonRemove();\n\t\t\t\t\t\t\tonRemoveImage();\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Remove' ) }\n\t\t\t\t\t</MenuItem>\n\t\t\t\t) }\n\t\t\t</MediaReplaceFlow>\n\t\t\t<DropZone\n\t\t\t\tonFilesDrop={ onFilesDrop }\n\t\t\t\tlabel={ __( 'Drop to upload' ) }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nfunction BackgroundSizeControls( {\n\tonChange,\n\tstyle,\n\tinheritedValue,\n\tdefaultValues,\n} ) {\n\tconst sizeValue =\n\t\tstyle?.background?.backgroundSize ||\n\t\tinheritedValue?.background?.backgroundSize;\n\tconst repeatValue =\n\t\tstyle?.background?.backgroundRepeat ||\n\t\tinheritedValue?.background?.backgroundRepeat;\n\tconst imageValue =\n\t\tstyle?.background?.backgroundImage?.url ||\n\t\tinheritedValue?.background?.backgroundImage?.url;\n\tconst isUploadedImage = style?.background?.backgroundImage?.id;\n\tconst positionValue =\n\t\tstyle?.background?.backgroundPosition ||\n\t\tinheritedValue?.background?.backgroundPosition;\n\tconst attachmentValue =\n\t\tstyle?.background?.backgroundAttachment ||\n\t\tinheritedValue?.background?.backgroundAttachment;\n\n\t/*\n\t * Set default values for uploaded images.\n\t * The default values are passed by the consumer.\n\t * Block-level controls may have different defaults to root-level controls.\n\t * A falsy value is treated by default as `auto` (Tile).\n\t */\n\tlet currentValueForToggle =\n\t\t! sizeValue && isUploadedImage\n\t\t\t? defaultValues?.backgroundSize\n\t\t\t: sizeValue || 'auto';\n\t/*\n\t * The incoming value could be a value + unit, e.g. '20px'.\n\t * In this case set the value to 'tile'.\n\t */\n\tcurrentValueForToggle = ! [ 'cover', 'contain', 'auto' ].includes(\n\t\tcurrentValueForToggle\n\t)\n\t\t? 'auto'\n\t\t: currentValueForToggle;\n\t/*\n\t * If the current value is `cover` and the repeat value is `undefined`, then\n\t * the toggle should be unchecked as the default state. Otherwise, the toggle\n\t * should reflect the current repeat value.\n\t */\n\tconst repeatCheckedValue = ! (\n\t\trepeatValue === 'no-repeat' ||\n\t\t( currentValueForToggle === 'cover' && repeatValue === undefined )\n\t);\n\n\tconst updateBackgroundSize = ( next ) => {\n\t\t// When switching to 'contain' toggle the repeat off.\n\t\tlet nextRepeat = repeatValue;\n\t\tlet nextPosition = positionValue;\n\n\t\tif ( next === 'contain' ) {\n\t\t\tnextRepeat = 'no-repeat';\n\t\t\tnextPosition = undefined;\n\t\t}\n\n\t\tif ( next === 'cover' ) {\n\t\t\tnextRepeat = undefined;\n\t\t\tnextPosition = undefined;\n\t\t}\n\n\t\tif (\n\t\t\t( currentValueForToggle === 'cover' ||\n\t\t\t\tcurrentValueForToggle === 'contain' ) &&\n\t\t\tnext === 'auto'\n\t\t) {\n\t\t\tnextRepeat = undefined;\n\t\t\t/*\n\t\t\t * A background image uploaded and set in the editor (an image with a record id),\n\t\t\t * receives a default background position of '50% 0',\n\t\t\t * when the toggle switches to \"Tile\". This is to increase the chance that\n\t\t\t * the image's focus point is visible.\n\t\t\t * This is in-editor only to assist with the user experience.\n\t\t\t */\n\t\t\tif ( !! style?.background?.backgroundImage?.id ) {\n\t\t\t\tnextPosition = '50% 0';\n\t\t\t}\n\t\t}\n\n\t\t/*\n\t\t * Next will be null when the input is cleared,\n\t\t * in which case the value should be 'auto'.\n\t\t */\n\t\tif ( ! next && currentValueForToggle === 'auto' ) {\n\t\t\tnext = 'auto';\n\t\t}\n\n\t\tonChange(\n\t\t\tsetImmutably( style, [ 'background' ], {\n\t\t\t\t...style?.background,\n\t\t\t\tbackgroundPosition: nextPosition,\n\t\t\t\tbackgroundRepeat: nextRepeat,\n\t\t\t\tbackgroundSize: next,\n\t\t\t} )\n\t\t);\n\t};\n\n\tconst updateBackgroundPosition = ( next ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tstyle,\n\t\t\t\t[ 'background', 'backgroundPosition' ],\n\t\t\t\tcoordsToBackgroundPosition( next )\n\t\t\t)\n\t\t);\n\t};\n\n\tconst toggleIsRepeated = () =>\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tstyle,\n\t\t\t\t[ 'background', 'backgroundRepeat' ],\n\t\t\t\trepeatCheckedValue === true ? 'no-repeat' : 'repeat'\n\t\t\t)\n\t\t);\n\n\tconst toggleScrollWithPage = () =>\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tstyle,\n\t\t\t\t[ 'background', 'backgroundAttachment' ],\n\t\t\t\tattachmentValue === 'fixed' ? 'scroll' : 'fixed'\n\t\t\t)\n\t\t);\n\n\t// Set a default background position for non-site-wide, uploaded images with a size of 'contain'.\n\tconst backgroundPositionValue =\n\t\t! positionValue && isUploadedImage && 'contain' === sizeValue\n\t\t\t? defaultValues?.backgroundPosition\n\t\t\t: positionValue;\n\n\treturn (\n\t\t<VStack spacing={ 3 } className=\"single-column\">\n\t\t\t<FocalPointPicker\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Focal point' ) }\n\t\t\t\turl={ imageValue }\n\t\t\t\tvalue={ backgroundPositionToCoords( backgroundPositionValue ) }\n\t\t\t\tonChange={ updateBackgroundPosition }\n\t\t\t/>\n\t\t\t<ToggleControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Fixed background' ) }\n\t\t\t\tchecked={ attachmentValue === 'fixed' }\n\t\t\t\tonChange={ toggleScrollWithPage }\n\t\t\t/>\n\t\t\t<ToggleGroupControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\tlabel={ __( 'Size' ) }\n\t\t\t\tvalue={ currentValueForToggle }\n\t\t\t\tonChange={ updateBackgroundSize }\n\t\t\t\tisBlock\n\t\t\t\thelp={ backgroundSizeHelpText(\n\t\t\t\t\tsizeValue || defaultValues?.backgroundSize\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey=\"cover\"\n\t\t\t\t\tvalue=\"cover\"\n\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t'Cover',\n\t\t\t\t\t\t'Size option for background image control'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey=\"contain\"\n\t\t\t\t\tvalue=\"contain\"\n\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t'Contain',\n\t\t\t\t\t\t'Size option for background image control'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey=\"tile\"\n\t\t\t\t\tvalue=\"auto\"\n\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t'Tile',\n\t\t\t\t\t\t'Size option for background image control'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</ToggleGroupControl>\n\t\t\t<HStack justify=\"flex-start\" spacing={ 2 } as=\"span\">\n\t\t\t\t<UnitControl\n\t\t\t\t\taria-label={ __( 'Background image width' ) }\n\t\t\t\t\tonChange={ updateBackgroundSize }\n\t\t\t\t\tvalue={ sizeValue }\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t__unstableInputWidth=\"100px\"\n\t\t\t\t\tmin={ 0 }\n\t\t\t\t\tplaceholder={ __( 'Auto' ) }\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tcurrentValueForToggle !== 'auto' ||\n\t\t\t\t\t\tcurrentValueForToggle === undefined\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<ToggleControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Repeat' ) }\n\t\t\t\t\tchecked={ repeatCheckedValue }\n\t\t\t\t\tonChange={ toggleIsRepeated }\n\t\t\t\t\tdisabled={ currentValueForToggle === 'cover' }\n\t\t\t\t/>\n\t\t\t</HStack>\n\t\t</VStack>\n\t);\n}\n\nexport default function BackgroundImagePanel( {\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tdefaultValues = {},\n} ) {\n\t/*\n\t * Resolve any inherited \"ref\" pointers.\n\t * Should the block editor need resolved, inherited values\n\t * across all controls, this could be abstracted into a hook,\n\t * e.g., useResolveGlobalStyle\n\t */\n\tconst { globalStyles, _links } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\tconst _settings = getSettings();\n\t\treturn {\n\t\t\tglobalStyles: _settings[ globalStylesDataKey ],\n\t\t\t_links: _settings[ globalStylesLinksDataKey ],\n\t\t};\n\t}, [] );\n\tconst resolvedInheritedValue = useMemo( () => {\n\t\tconst resolvedValues = {\n\t\t\tbackground: {},\n\t\t};\n\n\t\tif ( ! inheritedValue?.background ) {\n\t\t\treturn inheritedValue;\n\t\t}\n\n\t\tObject.entries( inheritedValue?.background ).forEach(\n\t\t\t( [ key, backgroundValue ] ) => {\n\t\t\t\tresolvedValues.background[ key ] = getResolvedValue(\n\t\t\t\t\tbackgroundValue,\n\t\t\t\t\t{\n\t\t\t\t\t\tstyles: globalStyles,\n\t\t\t\t\t\t_links,\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t\treturn resolvedValues;\n\t}, [ globalStyles, _links, inheritedValue ] );\n\n\tconst resetBackground = () =>\n\t\tonChange( setImmutably( value, [ 'background' ], {} ) );\n\n\tconst { title, url } = value?.background?.backgroundImage || {\n\t\t...resolvedInheritedValue?.background?.backgroundImage,\n\t};\n\tconst hasImageValue =\n\t\thasBackgroundImageValue( value ) ||\n\t\thasBackgroundImageValue( resolvedInheritedValue );\n\n\tconst imageValue =\n\t\tvalue?.background?.backgroundImage ||\n\t\tinheritedValue?.background?.backgroundImage;\n\n\tconst shouldShowBackgroundImageControls =\n\t\thasImageValue &&\n\t\t'none' !== imageValue &&\n\t\t( settings?.background?.backgroundSize ||\n\t\t\tsettings?.background?.backgroundPosition ||\n\t\t\tsettings?.background?.backgroundRepeat );\n\n\tconst [ isDropDownOpen, setIsDropDownOpen ] = useState( false );\n\tconst containerRef = useRef();\n\n\treturn (\n\t\t<div\n\t\t\tref={ containerRef }\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-global-styles-background-panel__inspector-media-replace-container',\n\t\t\t\t{\n\t\t\t\t\t'is-open': isDropDownOpen,\n\t\t\t\t}\n\t\t\t) }\n\t\t>\n\t\t\t{ shouldShowBackgroundImageControls ? (\n\t\t\t\t<BackgroundControlsPanel\n\t\t\t\t\tlabel={ title }\n\t\t\t\t\tfilename={ title }\n\t\t\t\t\turl={ url }\n\t\t\t\t\tonToggle={ setIsDropDownOpen }\n\t\t\t\t\thasImageValue={ hasImageValue }\n\t\t\t\t>\n\t\t\t\t\t<VStack spacing={ 3 } className=\"single-column\">\n\t\t\t\t\t\t<BackgroundImageControls\n\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\tstyle={ value }\n\t\t\t\t\t\t\tinheritedValue={ resolvedInheritedValue }\n\t\t\t\t\t\t\tdisplayInPanel\n\t\t\t\t\t\t\tonResetImage={ () => {\n\t\t\t\t\t\t\t\tsetIsDropDownOpen( false );\n\t\t\t\t\t\t\t\tresetBackground();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonRemoveImage={ () => setIsDropDownOpen( false ) }\n\t\t\t\t\t\t\tdefaultValues={ defaultValues }\n\t\t\t\t\t\t\tcontainerRef={ containerRef }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BackgroundSizeControls\n\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\tstyle={ value }\n\t\t\t\t\t\t\tdefaultValues={ defaultValues }\n\t\t\t\t\t\t\tinheritedValue={ resolvedInheritedValue }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</VStack>\n\t\t\t\t</BackgroundControlsPanel>\n\t\t\t) : (\n\t\t\t\t<BackgroundImageControls\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tstyle={ value }\n\t\t\t\t\tinheritedValue={ resolvedInheritedValue }\n\t\t\t\t\tdefaultValues={ defaultValues }\n\t\t\t\t\tonResetImage={ () => {\n\t\t\t\t\t\tsetIsDropDownOpen( false );\n\t\t\t\t\t\tresetBackground();\n\t\t\t\t\t} }\n\t\t\t\t\tonRemoveImage={ () => setIsDropDownOpen( false ) }\n\t\t\t\t\tcontainerRef={ containerRef }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport { useCallback, Platform } from '@wordpress/element';\n/**\n * Internal dependencies\n */\nimport BackgroundImageControl from '../background-image-control';\nimport { useToolsPanelDropdownMenuProps } from './utils';\nimport { setImmutably } from '../../utils/object';\nimport { __ } from '@wordpress/i18n';\n\nconst DEFAULT_CONTROLS = {\n\tbackgroundImage: true,\n};\n\n/**\n * Checks site settings to see if the background panel may be used.\n * `settings.background.backgroundSize` exists also,\n * but can only be used if settings?.background?.backgroundImage is `true`.\n *\n * @param {Object} settings Site settings\n * @return {boolean}        Whether site settings has activated background panel.\n */\nexport function useHasBackgroundPanel( settings ) {\n\treturn Platform.OS === 'web' && settings?.background?.backgroundImage;\n}\n\n/**\n * Checks if there is a current value in the background size block support\n * attributes. Background size values include background size as well\n * as background position.\n *\n * @param {Object} style Style attribute.\n * @return {boolean}     Whether the block has a background size value set.\n */\nexport function hasBackgroundSizeValue( style ) {\n\treturn (\n\t\tstyle?.background?.backgroundPosition !== undefined ||\n\t\tstyle?.background?.backgroundSize !== undefined\n\t);\n}\n\n/**\n * Checks if there is a current value in the background image block support\n * attributes.\n *\n * @param {Object} style Style attribute.\n * @return {boolean}     Whether the block has a background image value set.\n */\nexport function hasBackgroundImageValue( style ) {\n\treturn (\n\t\t!! style?.background?.backgroundImage?.id ||\n\t\t// Supports url() string values in theme.json.\n\t\t'string' === typeof style?.background?.backgroundImage ||\n\t\t!! style?.background?.backgroundImage?.url\n\t);\n}\n\nfunction BackgroundToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n\theaderLabel,\n} ) {\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ headerLabel }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nexport default function BackgroundImagePanel( {\n\tas: Wrapper = BackgroundToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n\tdefaultValues = {},\n\theaderLabel = __( 'Background image' ),\n} ) {\n\tconst showBackgroundImageControl = useHasBackgroundPanel( settings );\n\tconst resetBackground = () =>\n\t\tonChange( setImmutably( value, [ 'background' ], {} ) );\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tbackground: {},\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t\theaderLabel={ headerLabel }\n\t\t>\n\t\t\t{ showBackgroundImageControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ () => !! value?.background }\n\t\t\t\t\tlabel={ __( 'Image' ) }\n\t\t\t\t\tonDeselect={ resetBackground }\n\t\t\t\t\tisShownByDefault={ defaultControls.backgroundImage }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<BackgroundImageControl\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t\tinheritedValue={ inheritedValue }\n\t\t\t\t\t\tdefaultControls={ defaultControls }\n\t\t\t\t\t\tdefaultValues={ defaultValues }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { getBlockSupport } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport InspectorControls from '../components/inspector-controls';\nimport { cleanEmptyObject } from './utils';\nimport { store as blockEditorStore } from '../store';\nimport {\n\tdefault as StylesBackgroundPanel,\n\tuseHasBackgroundPanel,\n\thasBackgroundImageValue,\n} from '../components/global-styles/background-panel';\nimport { globalStylesDataKey } from '../store/private-keys';\n\nexport const BACKGROUND_SUPPORT_KEY = 'background';\n\n// Initial control values.\nexport const BACKGROUND_BLOCK_DEFAULT_VALUES = {\n\tbackgroundSize: 'cover',\n\tbackgroundPosition: '50% 50%', // used only when backgroundSize is 'contain'.\n};\n\n/**\n * Determine whether there is block support for background.\n *\n * @param {string} blockName Block name.\n * @param {string} feature   Background image feature to check for.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasBackgroundSupport( blockName, feature = 'any' ) {\n\tconst support = getBlockSupport( blockName, BACKGROUND_SUPPORT_KEY );\n\n\tif ( support === true ) {\n\t\treturn true;\n\t}\n\n\tif ( feature === 'any' ) {\n\t\treturn (\n\t\t\t!! support?.backgroundImage ||\n\t\t\t!! support?.backgroundSize ||\n\t\t\t!! support?.backgroundRepeat\n\t\t);\n\t}\n\n\treturn !! support?.[ feature ];\n}\n\nexport function setBackgroundStyleDefaults( backgroundStyle ) {\n\tif ( ! backgroundStyle || ! backgroundStyle?.backgroundImage?.url ) {\n\t\treturn;\n\t}\n\n\tlet backgroundStylesWithDefaults;\n\n\t// Set block background defaults.\n\tif ( ! backgroundStyle?.backgroundSize ) {\n\t\tbackgroundStylesWithDefaults = {\n\t\t\tbackgroundSize: BACKGROUND_BLOCK_DEFAULT_VALUES.backgroundSize,\n\t\t};\n\t}\n\n\tif (\n\t\t'contain' === backgroundStyle?.backgroundSize &&\n\t\t! backgroundStyle?.backgroundPosition\n\t) {\n\t\tbackgroundStylesWithDefaults = {\n\t\t\tbackgroundPosition:\n\t\t\t\tBACKGROUND_BLOCK_DEFAULT_VALUES.backgroundPosition,\n\t\t};\n\t}\n\treturn backgroundStylesWithDefaults;\n}\n\nfunction useBlockProps( { name, style } ) {\n\tif (\n\t\t! hasBackgroundSupport( name ) ||\n\t\t! style?.background?.backgroundImage\n\t) {\n\t\treturn;\n\t}\n\n\tconst backgroundStyles = setBackgroundStyleDefaults( style?.background );\n\n\tif ( ! backgroundStyles ) {\n\t\treturn;\n\t}\n\n\treturn {\n\t\tstyle: {\n\t\t\t...backgroundStyles,\n\t\t},\n\t};\n}\n\n/**\n * Generates a CSS class name if an background image is set.\n *\n * @param {Object} style A block's style attribute.\n *\n * @return {string} CSS class name.\n */\nexport function getBackgroundImageClasses( style ) {\n\treturn hasBackgroundImageValue( style ) ? 'has-background' : '';\n}\n\nfunction BackgroundInspectorControl( { children } ) {\n\tconst resetAllFilter = useCallback( ( attributes ) => {\n\t\treturn {\n\t\t\t...attributes,\n\t\t\tstyle: {\n\t\t\t\t...attributes.style,\n\t\t\t\tbackground: undefined,\n\t\t\t},\n\t\t};\n\t}, [] );\n\treturn (\n\t\t<InspectorControls group=\"background\" resetAllFilter={ resetAllFilter }>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function BackgroundImagePanel( {\n\tclientId,\n\tname,\n\tsetAttributes,\n\tsettings,\n} ) {\n\tconst { style, inheritedValue } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockAttributes, getSettings } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst _settings = getSettings();\n\t\t\treturn {\n\t\t\t\tstyle: getBlockAttributes( clientId )?.style,\n\t\t\t\t/*\n\t\t\t\t * To ensure we pass down the right inherited values:\n\t\t\t\t * @TODO 1. Pass inherited value down to all block style controls,\n\t\t\t\t *   See: packages/block-editor/src/hooks/style.js\n\t\t\t\t * @TODO 2. Add support for block style variations,\n\t\t\t\t *   See implementation: packages/block-editor/src/hooks/block-style-variation.js\n\t\t\t\t */\n\t\t\t\tinheritedValue:\n\t\t\t\t\t_settings[ globalStylesDataKey ]?.blocks?.[ name ],\n\t\t\t};\n\t\t},\n\t\t[ clientId, name ]\n\t);\n\n\tif (\n\t\t! useHasBackgroundPanel( settings ) ||\n\t\t! hasBackgroundSupport( name, 'backgroundImage' )\n\t) {\n\t\treturn null;\n\t}\n\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( newStyle ),\n\t\t} );\n\t};\n\n\tconst updatedSettings = {\n\t\t...settings,\n\t\tbackground: {\n\t\t\t...settings.background,\n\t\t\tbackgroundSize:\n\t\t\t\tsettings?.background?.backgroundSize &&\n\t\t\t\thasBackgroundSupport( name, 'backgroundSize' ),\n\t\t},\n\t};\n\n\tconst defaultControls = getBlockSupport( name, [\n\t\tBACKGROUND_SUPPORT_KEY,\n\t\t'defaultControls',\n\t] );\n\n\treturn (\n\t\t<StylesBackgroundPanel\n\t\t\tinheritedValue={ inheritedValue }\n\t\t\tas={ BackgroundInspectorControl }\n\t\t\tpanelId={ clientId }\n\t\t\tdefaultValues={ BACKGROUND_BLOCK_DEFAULT_VALUES }\n\t\t\tsettings={ updatedSettings }\n\t\t\tonChange={ onChange }\n\t\t\tdefaultControls={ defaultControls }\n\t\t\tvalue={ style }\n\t\t/>\n\t);\n}\n\nexport default {\n\tuseBlockProps,\n\tattributeKeys: [ 'style' ],\n\thasSupport: hasBackgroundSupport,\n};\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Filters registered block settings, extending attributes to include `lock`.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( 'type' in ( settings.attributes?.lock ?? {} ) ) {\n\t\treturn settings;\n\t}\n\t// Gracefully handle if settings.attributes is undefined.\n\tsettings.attributes = {\n\t\t...settings.attributes,\n\t\tlock: {\n\t\t\ttype: 'object',\n\t\t},\n\t};\n\n\treturn settings;\n}\n\naddFilter( 'blocks.registerBlockType', 'core/lock/addAttribute', addAttribute );\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { TextControl, ExternalLink } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport { Platform } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { InspectorControls } from '../components';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\n/**\n * Regular expression matching invalid anchor characters for replacement.\n *\n * @type {RegExp}\n */\nconst ANCHOR_REGEX = /[\\s#]/g;\n\nconst ANCHOR_SCHEMA = {\n\ttype: 'string',\n\tsource: 'attribute',\n\tattribute: 'id',\n\tselector: '*',\n};\n\n/**\n * Filters registered block settings, extending attributes with anchor using ID\n * of the first node.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( 'type' in ( settings.attributes?.anchor ?? {} ) ) {\n\t\treturn settings;\n\t}\n\tif ( hasBlockSupport( settings, 'anchor' ) ) {\n\t\t// Gracefully handle if settings.attributes is undefined.\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tanchor: ANCHOR_SCHEMA,\n\t\t};\n\t}\n\n\treturn settings;\n}\n\nfunction BlockEditAnchorControlPure( { anchor, setAttributes } ) {\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tif ( blockEditingMode !== 'default' ) {\n\t\treturn null;\n\t}\n\n\tconst isWeb = Platform.OS === 'web';\n\n\treturn (\n\t\t<InspectorControls group=\"advanced\">\n\t\t\t<TextControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tclassName=\"html-anchor-control\"\n\t\t\t\tlabel={ __( 'HTML anchor' ) }\n\t\t\t\thelp={\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Enter a word or two  without spaces  to make a unique web address just for this block, called an anchor. Then, youll be able to link directly to this section of your page.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ isWeb && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{ ' ' }\n\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t\t\t\t'https://wordpress.org/documentation/article/page-jumps/'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Learn more about anchors' ) }\n\t\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t\tvalue={ anchor || '' }\n\t\t\t\tplaceholder={ ! isWeb ? __( 'Add an anchor' ) : null }\n\t\t\t\tonChange={ ( nextValue ) => {\n\t\t\t\t\tnextValue = nextValue.replace( ANCHOR_REGEX, '-' );\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tanchor: nextValue,\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\tautoComplete=\"off\"\n\t\t\t/>\n\t\t</InspectorControls>\n\t);\n}\n\nexport default {\n\taddSaveProps,\n\tedit: BlockEditAnchorControlPure,\n\tattributeKeys: [ 'anchor' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, 'anchor' );\n\t},\n};\n\n/**\n * Override props assigned to save component to inject anchor ID, if block\n * supports anchor. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Current block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( extraProps, blockType, attributes ) {\n\tif ( hasBlockSupport( blockType, 'anchor' ) ) {\n\t\textraProps.id = attributes.anchor === '' ? null : attributes.anchor;\n\t}\n\n\treturn extraProps;\n}\n\naddFilter( 'blocks.registerBlockType', 'core/anchor/attribute', addAttribute );\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport } from '@wordpress/blocks';\n\n/**\n * Filters registered block settings, extending attributes with ariaLabel using aria-label\n * of the first node.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( settings?.attributes?.ariaLabel?.type ) {\n\t\treturn settings;\n\t}\n\tif ( hasBlockSupport( settings, 'ariaLabel' ) ) {\n\t\t// Gracefully handle if settings.attributes is undefined.\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tariaLabel: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t};\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override props assigned to save component to inject aria-label, if block\n * supports ariaLabel. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Current block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( extraProps, blockType, attributes ) {\n\tif ( hasBlockSupport( blockType, 'ariaLabel' ) ) {\n\t\textraProps[ 'aria-label' ] =\n\t\t\tattributes.ariaLabel === '' ? null : attributes.ariaLabel;\n\t}\n\n\treturn extraProps;\n}\n\nexport default {\n\taddSaveProps,\n\tattributeKeys: [ 'ariaLabel' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, 'ariaLabel' );\n\t},\n};\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/ariaLabel/attribute',\n\taddAttribute\n);\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { TextControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { hasBlockSupport } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { InspectorControls } from '../components';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\n/**\n * Filters registered block settings, extending attributes to include `className`.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\tif ( hasBlockSupport( settings, 'customClassName', true ) ) {\n\t\t// Gracefully handle if settings.attributes is undefined.\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tclassName: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t};\n\t}\n\n\treturn settings;\n}\n\nfunction CustomClassNameControlsPure( { className, setAttributes } ) {\n\tconst blockEditingMode = useBlockEditingMode();\n\tif ( blockEditingMode !== 'default' ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<InspectorControls group=\"advanced\">\n\t\t\t<TextControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tlabel={ __( 'Additional CSS class(es)' ) }\n\t\t\t\tvalue={ className || '' }\n\t\t\t\tonChange={ ( nextValue ) => {\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tclassName: nextValue !== '' ? nextValue : undefined,\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t\thelp={ __( 'Separate multiple classes with spaces.' ) }\n\t\t\t/>\n\t\t</InspectorControls>\n\t);\n}\n\nexport default {\n\tedit: CustomClassNameControlsPure,\n\taddSaveProps,\n\tattributeKeys: [ 'className' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, 'customClassName', true );\n\t},\n};\n\n/**\n * Override props assigned to save component to inject the className, if block\n * supports customClassName. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Current block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( extraProps, blockType, attributes ) {\n\tif (\n\t\thasBlockSupport( blockType, 'customClassName', true ) &&\n\t\tattributes.className\n\t) {\n\t\textraProps.className = clsx(\n\t\t\textraProps.className,\n\t\t\tattributes.className\n\t\t);\n\t}\n\n\treturn extraProps;\n}\n\nexport function addTransforms( result, source, index, results ) {\n\tif ( ! hasBlockSupport( result.name, 'customClassName', true ) ) {\n\t\treturn result;\n\t}\n\n\t// If the condition verifies we are probably in the presence of a wrapping transform\n\t// e.g: nesting paragraphs in a group or columns and in that case the class should not be kept.\n\tif ( results.length === 1 && result.innerBlocks.length === source.length ) {\n\t\treturn result;\n\t}\n\n\t// If we are transforming one block to multiple blocks or multiple blocks to one block,\n\t// we ignore the class during the transform.\n\tif (\n\t\t( results.length === 1 && source.length > 1 ) ||\n\t\t( results.length > 1 && source.length === 1 )\n\t) {\n\t\treturn result;\n\t}\n\n\t// If we are in presence of transform between one or more block in the source\n\t// that have one or more blocks in the result\n\t// we apply the class on source N to the result N,\n\t// if source N does not exists we do nothing.\n\tif ( source[ index ] ) {\n\t\tconst originClassName = source[ index ]?.attributes.className;\n\t\t// Avoid overriding classes if the transformed block already includes them.\n\t\tif ( originClassName && result.attributes.className === undefined ) {\n\t\t\treturn {\n\t\t\t\t...result,\n\t\t\t\tattributes: {\n\t\t\t\t\t...result.attributes,\n\t\t\t\t\tclassName: originClassName,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\treturn result;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/editor/custom-class-name/attribute',\n\taddAttribute\n);\n\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/color/addTransforms',\n\taddTransforms\n);\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport, getBlockDefaultClassName } from '@wordpress/blocks';\n\n/**\n * Override props assigned to save component to inject generated className if\n * block supports it. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addGeneratedClassName( extraProps, blockType ) {\n\t// Adding the generated className.\n\tif ( hasBlockSupport( blockType, 'className', true ) ) {\n\t\tif ( typeof extraProps.className === 'string' ) {\n\t\t\t// We have some extra classes and want to add the default classname\n\t\t\t// We use uniq to prevent duplicate classnames.\n\n\t\t\textraProps.className = [\n\t\t\t\t...new Set( [\n\t\t\t\t\tgetBlockDefaultClassName( blockType.name ),\n\t\t\t\t\t...extraProps.className.split( ' ' ),\n\t\t\t\t] ),\n\t\t\t]\n\t\t\t\t.join( ' ' )\n\t\t\t\t.trim();\n\t\t} else {\n\t\t\t// There is no string in the className variable,\n\t\t\t// so we just dump the default name in there.\n\t\t\textraProps.className = getBlockDefaultClassName( blockType.name );\n\t\t}\n\t}\n\treturn extraProps;\n}\n\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/generated-class-name/save-props',\n\taddGeneratedClassName\n);\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n","var o=function(o){var t=o/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},t=function(t){return.2126*o(t.r)+.7152*o(t.g)+.0722*o(t.b)};export default function(o){o.prototype.luminance=function(){return o=t(this.rgba),void 0===(r=2)&&(r=0),void 0===n&&(n=Math.pow(10,r)),Math.round(n*o)/n+0;var o,r,n},o.prototype.contrast=function(r){void 0===r&&(r=\"#FFF\");var n,a,i,e,v,u,d,c=r instanceof o?r:new o(r);return e=this.rgba,v=c.toRgb(),u=t(e),d=t(v),n=u>d?(u+.05)/(d+.05):(d+.05)/(u+.05),void 0===(a=2)&&(a=0),void 0===i&&(i=Math.pow(10,a)),Math.floor(i*n)/i+0},o.prototype.isReadable=function(o,t){return void 0===o&&(o=\"#FFF\"),void 0===t&&(t={}),this.contrast(o)>=(e=void 0===(i=(r=t).size)?\"normal\":i,\"AAA\"===(a=void 0===(n=r.level)?\"AA\":n)&&\"normal\"===e?7:\"AA\"===a&&\"large\"===e?3:4.5);var r,n,a,i,e}}\n","/**\n * External dependencies\n */\nimport { colord, extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\nimport a11yPlugin from 'colord/plugins/a11y';\n\n/**\n * WordPress dependencies\n */\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\n\nextend( [ namesPlugin, a11yPlugin ] );\n\nconst { kebabCase } = unlock( componentsPrivateApis );\n\n/**\n * Provided an array of color objects as set by the theme or by the editor defaults,\n * and the values of the defined color or custom color returns a color object describing the color.\n *\n * @param {Array}   colors       Array of color objects as set by the theme or by the editor defaults.\n * @param {?string} definedColor A string containing the color slug.\n * @param {?string} customColor  A string containing the customColor value.\n *\n * @return {?Object} If definedColor is passed and the name is found in colors,\n *                   the color object exactly as set by the theme or editor defaults is returned.\n *                   Otherwise, an object that just sets the color is defined.\n */\nexport const getColorObjectByAttributeValues = (\n\tcolors,\n\tdefinedColor,\n\tcustomColor\n) => {\n\tif ( definedColor ) {\n\t\tconst colorObj = colors?.find(\n\t\t\t( color ) => color.slug === definedColor\n\t\t);\n\n\t\tif ( colorObj ) {\n\t\t\treturn colorObj;\n\t\t}\n\t}\n\treturn {\n\t\tcolor: customColor,\n\t};\n};\n\n/**\n * Provided an array of color objects as set by the theme or by the editor defaults, and a color value returns the color object matching that value or undefined.\n *\n * @param {Array}   colors     Array of color objects as set by the theme or by the editor defaults.\n * @param {?string} colorValue A string containing the color value.\n *\n * @return {?Object} Color object included in the colors array whose color property equals colorValue.\n *                   Returns undefined if no color object matches this requirement.\n */\nexport const getColorObjectByColorValue = ( colors, colorValue ) => {\n\treturn colors?.find( ( color ) => color.color === colorValue );\n};\n\n/**\n * Returns a class based on the context a color is being used and its slug.\n *\n * @param {string} colorContextName Context/place where color is being used e.g: background, text etc...\n * @param {string} colorSlug        Slug of the color.\n *\n * @return {?string} String with the class corresponding to the color in the provided context.\n *                   Returns undefined if either colorContextName or colorSlug are not provided.\n */\nexport function getColorClassName( colorContextName, colorSlug ) {\n\tif ( ! colorContextName || ! colorSlug ) {\n\t\treturn undefined;\n\t}\n\n\treturn `has-${ kebabCase( colorSlug ) }-${ colorContextName }`;\n}\n\n/**\n * Given an array of color objects and a color value returns the color value of the most readable color in the array.\n *\n * @param {Array}   colors     Array of color objects as set by the theme or by the editor defaults.\n * @param {?string} colorValue A string containing the color value.\n *\n * @return {string} String with the color value of the most readable color.\n */\nexport function getMostReadableColor( colors, colorValue ) {\n\tconst colordColor = colord( colorValue );\n\tconst getColorContrast = ( { color } ) => colordColor.contrast( color );\n\n\tconst maxContrast = Math.max( ...colors.map( getColorContrast ) );\n\treturn colors.find( ( color ) => getColorContrast( color ) === maxContrast )\n\t\t.color;\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\n\n/**\n * Retrieves color and gradient related settings.\n *\n * The arrays for colors and gradients are made up of color palettes from each\n * origin i.e. \"Core\", \"Theme\", and \"User\".\n *\n * @return {Object} Color and gradient related settings.\n */\nexport default function useMultipleOriginColorsAndGradients() {\n\tconst [\n\t\tenableCustomColors,\n\t\tcustomColors,\n\t\tthemeColors,\n\t\tdefaultColors,\n\t\tshouldDisplayDefaultColors,\n\t\tenableCustomGradients,\n\t\tcustomGradients,\n\t\tthemeGradients,\n\t\tdefaultGradients,\n\t\tshouldDisplayDefaultGradients,\n\t] = useSettings(\n\t\t'color.custom',\n\t\t'color.palette.custom',\n\t\t'color.palette.theme',\n\t\t'color.palette.default',\n\t\t'color.defaultPalette',\n\t\t'color.customGradient',\n\t\t'color.gradients.custom',\n\t\t'color.gradients.theme',\n\t\t'color.gradients.default',\n\t\t'color.defaultGradients'\n\t);\n\n\tconst colorGradientSettings = {\n\t\tdisableCustomColors: ! enableCustomColors,\n\t\tdisableCustomGradients: ! enableCustomGradients,\n\t};\n\n\tcolorGradientSettings.colors = useMemo( () => {\n\t\tconst result = [];\n\t\tif ( themeColors && themeColors.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Theme',\n\t\t\t\t\t'Indicates this palette comes from the theme.'\n\t\t\t\t),\n\t\t\t\tslug: 'theme',\n\t\t\t\tcolors: themeColors,\n\t\t\t} );\n\t\t}\n\t\tif (\n\t\t\tshouldDisplayDefaultColors &&\n\t\t\tdefaultColors &&\n\t\t\tdefaultColors.length\n\t\t) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Default',\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\n\t\t\t\t),\n\t\t\t\tslug: 'default',\n\t\t\t\tcolors: defaultColors,\n\t\t\t} );\n\t\t}\n\t\tif ( customColors && customColors.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Custom',\n\t\t\t\t\t'Indicates this palette is created by the user.'\n\t\t\t\t),\n\t\t\t\tslug: 'custom',\n\t\t\t\tcolors: customColors,\n\t\t\t} );\n\t\t}\n\t\treturn result;\n\t}, [\n\t\tcustomColors,\n\t\tthemeColors,\n\t\tdefaultColors,\n\t\tshouldDisplayDefaultColors,\n\t] );\n\n\tcolorGradientSettings.gradients = useMemo( () => {\n\t\tconst result = [];\n\t\tif ( themeGradients && themeGradients.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Theme',\n\t\t\t\t\t'Indicates this palette comes from the theme.'\n\t\t\t\t),\n\t\t\t\tslug: 'theme',\n\t\t\t\tgradients: themeGradients,\n\t\t\t} );\n\t\t}\n\t\tif (\n\t\t\tshouldDisplayDefaultGradients &&\n\t\t\tdefaultGradients &&\n\t\t\tdefaultGradients.length\n\t\t) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Default',\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\n\t\t\t\t),\n\t\t\t\tslug: 'default',\n\t\t\t\tgradients: defaultGradients,\n\t\t\t} );\n\t\t}\n\t\tif ( customGradients && customGradients.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Custom',\n\t\t\t\t\t'Indicates this palette is created by the user.'\n\t\t\t\t),\n\t\t\t\tslug: 'custom',\n\t\t\t\tgradients: customGradients,\n\t\t\t} );\n\t\t}\n\t\treturn result;\n\t}, [\n\t\tcustomGradients,\n\t\tthemeGradients,\n\t\tdefaultGradients,\n\t\tshouldDisplayDefaultGradients,\n\t] );\n\n\tcolorGradientSettings.hasColorsOrGradients =\n\t\t!! colorGradientSettings.colors.length ||\n\t\t!! colorGradientSettings.gradients.length;\n\n\treturn colorGradientSettings;\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue } from '@wordpress/components';\n\n/**\n * Gets the (non-undefined) item with the highest occurrence within an array\n * Based in part on: https://stackoverflow.com/a/20762713\n *\n * Undefined values are always sorted to the end by `sort`, so this function\n * returns the first element, to always prioritize real values over undefined\n * values.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#description\n *\n * @param {Array<any>} inputArray Array of items to check.\n * @return {any}                  The item with the most occurrences.\n */\nexport function mode( inputArray ) {\n\tconst arr = [ ...inputArray ];\n\treturn arr\n\t\t.sort(\n\t\t\t( a, b ) =>\n\t\t\t\tinputArray.filter( ( v ) => v === b ).length -\n\t\t\t\tinputArray.filter( ( v ) => v === a ).length\n\t\t)\n\t\t.shift();\n}\n\n/**\n * Returns the most common CSS unit from the current CSS unit selections.\n *\n * - If a single flat border radius is set, its unit will be used\n * - If individual corner selections, the most common of those will be used\n * - Failing any unit selections a default of 'px' is returned.\n *\n * @param {Object} selectedUnits Unit selections for flat radius & each corner.\n * @return {string} Most common CSS unit from current selections. Default: `px`.\n */\nexport function getAllUnit( selectedUnits = {} ) {\n\tconst { flat, ...cornerUnits } = selectedUnits;\n\treturn (\n\t\tflat || mode( Object.values( cornerUnits ).filter( Boolean ) ) || 'px'\n\t);\n}\n\n/**\n * Gets the 'all' input value and unit from values data.\n *\n * @param {Object|string} values Radius values.\n * @return {string}              A value + unit for the 'all' input.\n */\nexport function getAllValue( values = {} ) {\n\t/**\n\t * Border radius support was originally a single pixel value.\n\t *\n\t * To maintain backwards compatibility treat this case as the all value.\n\t */\n\tif ( typeof values === 'string' ) {\n\t\treturn values;\n\t}\n\n\tconst parsedQuantitiesAndUnits = Object.values( values ).map( ( value ) =>\n\t\tparseQuantityAndUnitFromRawValue( value )\n\t);\n\n\tconst allValues = parsedQuantitiesAndUnits.map(\n\t\t( value ) => value[ 0 ] ?? ''\n\t);\n\tconst allUnits = parsedQuantitiesAndUnits.map( ( value ) => value[ 1 ] );\n\n\tconst value = allValues.every( ( v ) => v === allValues[ 0 ] )\n\t\t? allValues[ 0 ]\n\t\t: '';\n\tconst unit = mode( allUnits );\n\n\tconst allValue = value === 0 || value ? `${ value }${ unit }` : undefined;\n\n\treturn allValue;\n}\n\n/**\n * Checks to determine if values are mixed.\n *\n * @param {Object} values Radius values.\n * @return {boolean}      Whether values are mixed.\n */\nexport function hasMixedValues( values = {} ) {\n\tconst allValue = getAllValue( values );\n\tconst isMixed =\n\t\ttypeof values === 'string' ? false : isNaN( parseFloat( allValue ) );\n\n\treturn isMixed;\n}\n\n/**\n * Checks to determine if values are defined.\n *\n * @param {Object} values Radius values.\n * @return {boolean}      Whether values are mixed.\n */\nexport function hasDefinedValues( values ) {\n\tif ( ! values ) {\n\t\treturn false;\n\t}\n\n\t// A string value represents a shorthand value.\n\tif ( typeof values === 'string' ) {\n\t\treturn true;\n\t}\n\n\t// An object represents longhand border radius values, if any are set\n\t// flag values as being defined.\n\tconst filteredValues = Object.values( values ).filter( ( value ) => {\n\t\treturn !! value || value === 0;\n\t} );\n\n\treturn !! filteredValues.length;\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalUnitControl as UnitControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetAllValue,\n\tgetAllUnit,\n\thasMixedValues,\n\thasDefinedValues,\n} from './utils';\n\nexport default function AllInputControl( {\n\tonChange,\n\tselectedUnits,\n\tsetSelectedUnits,\n\tvalues,\n\t...props\n} ) {\n\tlet allValue = getAllValue( values );\n\n\tif ( allValue === undefined ) {\n\t\t// If we don't have any value set the unit to any current selection\n\t\t// or the most common unit from the individual radii values.\n\t\tallValue = getAllUnit( selectedUnits );\n\t}\n\n\tconst hasValues = hasDefinedValues( values );\n\tconst isMixed = hasValues && hasMixedValues( values );\n\tconst allPlaceholder = isMixed ? __( 'Mixed' ) : null;\n\n\t// Filter out CSS-unit-only values to prevent invalid styles.\n\tconst handleOnChange = ( next ) => {\n\t\tconst isNumeric = ! isNaN( parseFloat( next ) );\n\t\tconst nextValue = isNumeric ? next : undefined;\n\t\tonChange( nextValue );\n\t};\n\n\t// Store current unit selection for use as fallback for individual\n\t// radii controls.\n\tconst handleOnUnitChange = ( unit ) => {\n\t\tsetSelectedUnits( {\n\t\t\ttopLeft: unit,\n\t\t\ttopRight: unit,\n\t\t\tbottomLeft: unit,\n\t\t\tbottomRight: unit,\n\t\t} );\n\t};\n\n\treturn (\n\t\t<UnitControl\n\t\t\t{ ...props }\n\t\t\taria-label={ __( 'Border radius' ) }\n\t\t\tdisableUnits={ isMixed }\n\t\t\tisOnly\n\t\t\tvalue={ allValue }\n\t\t\tonChange={ handleOnChange }\n\t\t\tonUnitChange={ handleOnUnitChange }\n\t\t\tplaceholder={ allPlaceholder }\n\t\t\tsize=\"__unstable-large\"\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n\t__experimentalUnitControl as UnitControl,\n\tTooltip,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\nconst CORNERS = {\n\ttopLeft: __( 'Top left' ),\n\ttopRight: __( 'Top right' ),\n\tbottomLeft: __( 'Bottom left' ),\n\tbottomRight: __( 'Bottom right' ),\n};\n\nexport default function BoxInputControls( {\n\tonChange,\n\tselectedUnits,\n\tsetSelectedUnits,\n\tvalues: valuesProp,\n\t...props\n} ) {\n\tconst createHandleOnChange = ( corner ) => ( next ) => {\n\t\tif ( ! onChange ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Filter out CSS-unit-only values to prevent invalid styles.\n\t\tconst isNumeric = ! isNaN( parseFloat( next ) );\n\t\tconst nextValue = isNumeric ? next : undefined;\n\n\t\tonChange( {\n\t\t\t...values,\n\t\t\t[ corner ]: nextValue,\n\t\t} );\n\t};\n\n\tconst createHandleOnUnitChange = ( side ) => ( next ) => {\n\t\tconst newUnits = { ...selectedUnits };\n\t\tnewUnits[ side ] = next;\n\t\tsetSelectedUnits( newUnits );\n\t};\n\n\t// For shorthand style & backwards compatibility, handle flat string value.\n\tconst values =\n\t\ttypeof valuesProp !== 'string'\n\t\t\t? valuesProp\n\t\t\t: {\n\t\t\t\t\ttopLeft: valuesProp,\n\t\t\t\t\ttopRight: valuesProp,\n\t\t\t\t\tbottomLeft: valuesProp,\n\t\t\t\t\tbottomRight: valuesProp,\n\t\t\t  };\n\n\t// Controls are wrapped in tooltips as visible labels aren't desired here.\n\t// Tooltip rendering also requires the UnitControl to be wrapped. See:\n\t// https://github.com/WordPress/gutenberg/pull/24966#issuecomment-685875026\n\treturn (\n\t\t<div className=\"components-border-radius-control__input-controls-wrapper\">\n\t\t\t{ Object.entries( CORNERS ).map( ( [ corner, label ] ) => {\n\t\t\t\tconst [ parsedQuantity, parsedUnit ] =\n\t\t\t\t\tparseQuantityAndUnitFromRawValue( values[ corner ] );\n\n\t\t\t\tconst computedUnit = values[ corner ]\n\t\t\t\t\t? parsedUnit\n\t\t\t\t\t: selectedUnits[ corner ] || selectedUnits.flat;\n\n\t\t\t\treturn (\n\t\t\t\t\t<Tooltip text={ label } placement=\"top\" key={ corner }>\n\t\t\t\t\t\t<div className=\"components-border-radius-control__tooltip-wrapper\">\n\t\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t\t\taria-label={ label }\n\t\t\t\t\t\t\t\tvalue={ [ parsedQuantity, computedUnit ].join(\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tonChange={ createHandleOnChange( corner ) }\n\t\t\t\t\t\t\t\tonUnitChange={ createHandleOnUnitChange(\n\t\t\t\t\t\t\t\t\tcorner\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst link = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z\" />\n\t</SVG>\n);\n\nexport default link;\n","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { link, linkOff } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\n\nexport default function LinkedButton( { isLinked, ...props } ) {\n\tconst label = isLinked ? __( 'Unlink radii' ) : __( 'Link radii' );\n\n\treturn (\n\t\t<Button\n\t\t\t{ ...props }\n\t\t\tclassName=\"component-border-radius-control__linked-button\"\n\t\t\tsize=\"small\"\n\t\t\ticon={ isLinked ? link : linkOff }\n\t\t\ticonSize={ 24 }\n\t\t\tlabel={ label }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tBaseControl,\n\tRangeControl,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n\t__experimentalUseCustomUnits as useCustomUnits,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport AllInputControl from './all-input-control';\nimport InputControls from './input-controls';\nimport LinkedButton from './linked-button';\nimport { useSettings } from '../use-settings';\nimport {\n\tgetAllValue,\n\tgetAllUnit,\n\thasDefinedValues,\n\thasMixedValues,\n} from './utils';\n\nconst DEFAULT_VALUES = {\n\ttopLeft: undefined,\n\ttopRight: undefined,\n\tbottomLeft: undefined,\n\tbottomRight: undefined,\n};\nconst MIN_BORDER_RADIUS_VALUE = 0;\nconst MAX_BORDER_RADIUS_VALUES = {\n\tpx: 100,\n\tem: 20,\n\trem: 20,\n};\n\n/**\n * Control to display border radius options.\n *\n * @param {Object}   props          Component props.\n * @param {Function} props.onChange Callback to handle onChange.\n * @param {Object}   props.values   Border radius values.\n *\n * @return {Element}              Custom border radius control.\n */\nexport default function BorderRadiusControl( { onChange, values } ) {\n\tconst [ isLinked, setIsLinked ] = useState(\n\t\t! hasDefinedValues( values ) || ! hasMixedValues( values )\n\t);\n\n\t// Tracking selected units via internal state allows filtering of CSS unit\n\t// only values from being saved while maintaining preexisting unit selection\n\t// behaviour. Filtering CSS unit only values prevents invalid style values.\n\tconst [ selectedUnits, setSelectedUnits ] = useState( {\n\t\tflat:\n\t\t\ttypeof values === 'string'\n\t\t\t\t? parseQuantityAndUnitFromRawValue( values )[ 1 ]\n\t\t\t\t: undefined,\n\t\ttopLeft: parseQuantityAndUnitFromRawValue( values?.topLeft )[ 1 ],\n\t\ttopRight: parseQuantityAndUnitFromRawValue( values?.topRight )[ 1 ],\n\t\tbottomLeft: parseQuantityAndUnitFromRawValue( values?.bottomLeft )[ 1 ],\n\t\tbottomRight: parseQuantityAndUnitFromRawValue(\n\t\t\tvalues?.bottomRight\n\t\t)[ 1 ],\n\t} );\n\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: availableUnits || [ 'px', 'em', 'rem' ],\n\t} );\n\n\tconst unit = getAllUnit( selectedUnits );\n\tconst unitConfig = units && units.find( ( item ) => item.value === unit );\n\tconst step = unitConfig?.step || 1;\n\n\tconst [ allValue ] = parseQuantityAndUnitFromRawValue(\n\t\tgetAllValue( values )\n\t);\n\n\tconst toggleLinked = () => setIsLinked( ! isLinked );\n\n\tconst handleSliderChange = ( next ) => {\n\t\tonChange( next !== undefined ? `${ next }${ unit }` : undefined );\n\t};\n\n\treturn (\n\t\t<fieldset className=\"components-border-radius-control\">\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t{ __( 'Radius' ) }\n\t\t\t</BaseControl.VisualLabel>\n\t\t\t<div className=\"components-border-radius-control__wrapper\">\n\t\t\t\t{ isLinked ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<AllInputControl\n\t\t\t\t\t\t\tclassName=\"components-border-radius-control__unit-control\"\n\t\t\t\t\t\t\tvalues={ values }\n\t\t\t\t\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\n\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\tselectedUnits={ selectedUnits }\n\t\t\t\t\t\t\tsetSelectedUnits={ setSelectedUnits }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tlabel={ __( 'Border radius' ) }\n\t\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\t\tclassName=\"components-border-radius-control__range-control\"\n\t\t\t\t\t\t\tvalue={ allValue ?? '' }\n\t\t\t\t\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\n\t\t\t\t\t\t\tmax={ MAX_BORDER_RADIUS_VALUES[ unit ] }\n\t\t\t\t\t\t\tinitialPosition={ 0 }\n\t\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t\t\tonChange={ handleSliderChange }\n\t\t\t\t\t\t\tstep={ step }\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<InputControls\n\t\t\t\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\tselectedUnits={ selectedUnits }\n\t\t\t\t\t\tsetSelectedUnits={ setSelectedUnits }\n\t\t\t\t\t\tvalues={ values || DEFAULT_VALUES }\n\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<LinkedButton onClick={ toggleLinked } isLinked={ isLinked } />\n\t\t\t</div>\n\t\t</fieldset>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst check = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z\" />\n\t</SVG>\n);\n\nexport default check;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst shadow = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M12 8c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm0 6.5c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zM12.8 3h-1.5v3h1.5V3zm-1.6 18h1.5v-3h-1.5v3zm6.8-9.8v1.5h3v-1.5h-3zm-12 0H3v1.5h3v-1.5zm9.7 5.6 2.1 2.1 1.1-1.1-2.1-2.1-1.1 1.1zM8.3 7.2 6.2 5.1 5.1 6.2l2.1 2.1 1.1-1.1zM5.1 17.8l1.1 1.1 2.1-2.1-1.1-1.1-2.1 2.1zM18.9 6.2l-1.1-1.1-2.1 2.1 1.1 1.1 2.1-2.1z\" />\n\t</SVG>\n);\n\nexport default shadow;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst reset = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7 11.5h10V13H7z\" />\n\t</SVG>\n);\n\nexport default reset;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\t__experimentalVStack as VStack,\n\t__experimentalHeading as Heading,\n\t__experimentalHStack as HStack,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\tButton,\n\tFlexItem,\n\tDropdown,\n\tComposite,\n\tTooltip,\n} from '@wordpress/components';\nimport { useMemo, useRef } from '@wordpress/element';\nimport { shadow as shadowIcon, Icon, check, reset } from '@wordpress/icons';\n\n/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\nexport function ShadowPopoverContainer( { shadow, onShadowChange, settings } ) {\n\tconst shadows = useShadowPresets( settings );\n\n\treturn (\n\t\t<div className=\"block-editor-global-styles__shadow-popover-container\">\n\t\t\t<VStack spacing={ 4 }>\n\t\t\t\t<Heading level={ 5 }>{ __( 'Drop shadow' ) }</Heading>\n\t\t\t\t<ShadowPresets\n\t\t\t\t\tpresets={ shadows }\n\t\t\t\t\tactiveShadow={ shadow }\n\t\t\t\t\tonSelect={ onShadowChange }\n\t\t\t\t/>\n\t\t\t\t<div className=\"block-editor-global-styles__clear-shadow\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tonClick={ () => onShadowChange( undefined ) }\n\t\t\t\t\t\tdisabled={ ! shadow }\n\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Clear' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</VStack>\n\t\t</div>\n\t);\n}\n\nexport function ShadowPresets( { presets, activeShadow, onSelect } ) {\n\treturn ! presets ? null : (\n\t\t<Composite\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-global-styles__shadow__list\"\n\t\t\taria-label={ __( 'Drop shadows' ) }\n\t\t>\n\t\t\t{ presets.map( ( { name, slug, shadow } ) => (\n\t\t\t\t<ShadowIndicator\n\t\t\t\t\tkey={ slug }\n\t\t\t\t\tlabel={ name }\n\t\t\t\t\tisActive={ shadow === activeShadow }\n\t\t\t\t\ttype={ slug === 'unset' ? 'unset' : 'preset' }\n\t\t\t\t\tonSelect={ () =>\n\t\t\t\t\t\tonSelect( shadow === activeShadow ? undefined : shadow )\n\t\t\t\t\t}\n\t\t\t\t\tshadow={ shadow }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</Composite>\n\t);\n}\n\nexport function ShadowIndicator( { type, label, isActive, onSelect, shadow } ) {\n\treturn (\n\t\t<Tooltip text={ label }>\n\t\t\t<Composite.Item\n\t\t\t\trole=\"option\"\n\t\t\t\taria-label={ label }\n\t\t\t\taria-selected={ isActive }\n\t\t\t\tclassName={ clsx( 'block-editor-global-styles__shadow__item', {\n\t\t\t\t\t'is-active': isActive,\n\t\t\t\t} ) }\n\t\t\t\trender={\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t'block-editor-global-styles__shadow-indicator',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tunset: type === 'unset',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonClick={ onSelect }\n\t\t\t\t\t\tstyle={ { boxShadow: shadow } }\n\t\t\t\t\t\taria-label={ label }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ isActive && <Icon icon={ check } /> }\n\t\t\t\t\t</button>\n\t\t\t\t}\n\t\t\t/>\n\t\t</Tooltip>\n\t);\n}\n\nexport function ShadowPopover( { shadow, onShadowChange, settings } ) {\n\tconst popoverProps = {\n\t\tplacement: 'left-start',\n\t\toffset: 36,\n\t\tshift: true,\n\t};\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ popoverProps }\n\t\t\tclassName=\"block-editor-global-styles__shadow-dropdown\"\n\t\t\trenderToggle={ renderShadowToggle( shadow, onShadowChange ) }\n\t\t\trenderContent={ () => (\n\t\t\t\t<DropdownContentWrapper paddingSize=\"medium\">\n\t\t\t\t\t<ShadowPopoverContainer\n\t\t\t\t\t\tshadow={ shadow }\n\t\t\t\t\t\tonShadowChange={ onShadowChange }\n\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t/>\n\t\t\t\t</DropdownContentWrapper>\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nfunction renderShadowToggle( shadow, onShadowChange ) {\n\treturn ( { onToggle, isOpen } ) => {\n\t\tconst shadowButtonRef = useRef( undefined );\n\n\t\tconst toggleProps = {\n\t\t\tonClick: onToggle,\n\t\t\tclassName: clsx(\n\t\t\t\t'block-editor-global-styles__shadow-dropdown-toggle',\n\t\t\t\t{ 'is-open': isOpen }\n\t\t\t),\n\t\t\t'aria-expanded': isOpen,\n\t\t\tref: shadowButtonRef,\n\t\t};\n\n\t\tconst removeButtonProps = {\n\t\t\tonClick: () => {\n\t\t\t\tif ( isOpen ) {\n\t\t\t\t\tonToggle();\n\t\t\t\t}\n\t\t\t\tonShadowChange( undefined );\n\t\t\t\t// Return focus to parent button.\n\t\t\t\tshadowButtonRef.current?.focus();\n\t\t\t},\n\t\t\tclassName: clsx(\n\t\t\t\t'block-editor-global-styles__shadow-editor__remove-button',\n\t\t\t\t{ 'is-open': isOpen }\n\t\t\t),\n\t\t\tlabel: __( 'Remove' ),\n\t\t};\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button __next40pxDefaultSize { ...toggleProps }>\n\t\t\t\t\t<HStack justify=\"flex-start\">\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tclassName=\"block-editor-global-styles__toggle-icon\"\n\t\t\t\t\t\t\ticon={ shadowIcon }\n\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FlexItem>{ __( 'Drop shadow' ) }</FlexItem>\n\t\t\t\t\t</HStack>\n\t\t\t\t</Button>\n\t\t\t\t{ !! shadow && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\ticon={ reset }\n\t\t\t\t\t\t{ ...removeButtonProps }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t};\n}\n\nexport function useShadowPresets( settings ) {\n\treturn useMemo( () => {\n\t\tif ( ! settings?.shadow ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\tconst defaultPresetsEnabled = settings?.shadow?.defaultPresets;\n\t\tconst {\n\t\t\tdefault: defaultShadows,\n\t\t\ttheme: themeShadows,\n\t\t\tcustom: customShadows,\n\t\t} = settings?.shadow?.presets ?? {};\n\t\tconst unsetShadow = {\n\t\t\tname: __( 'Unset' ),\n\t\t\tslug: 'unset',\n\t\t\tshadow: 'none',\n\t\t};\n\n\t\tconst shadowPresets = [\n\t\t\t...( ( defaultPresetsEnabled && defaultShadows ) || EMPTY_ARRAY ),\n\t\t\t...( themeShadows || EMPTY_ARRAY ),\n\t\t\t...( customShadows || EMPTY_ARRAY ),\n\t\t];\n\t\tif ( shadowPresets.length ) {\n\t\t\tshadowPresets.unshift( unsetShadow );\n\t\t}\n\n\t\treturn shadowPresets;\n\t}, [ settings ] );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tBorderBoxControl,\n\t__experimentalHasSplitBorders as hasSplitBorders,\n\t__experimentalIsDefinedBorder as isDefinedBorder,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\tBaseControl,\n} from '@wordpress/components';\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BorderRadiusControl from '../border-radius-control';\nimport { useColorsPerOrigin } from './hooks';\nimport { getValueFromVariable, useToolsPanelDropdownMenuProps } from './utils';\nimport { setImmutably } from '../../utils/object';\nimport { useBorderPanelLabel } from '../../hooks/border';\nimport { ShadowPopover, useShadowPresets } from './shadow-panel-components';\n\nexport function useHasBorderPanel( settings ) {\n\tconst controls = Object.values( useHasBorderPanelControls( settings ) );\n\treturn controls.some( Boolean );\n}\n\nexport function useHasBorderPanelControls( settings ) {\n\tconst controls = {\n\t\thasBorderColor: useHasBorderColorControl( settings ),\n\t\thasBorderRadius: useHasBorderRadiusControl( settings ),\n\t\thasBorderStyle: useHasBorderStyleControl( settings ),\n\t\thasBorderWidth: useHasBorderWidthControl( settings ),\n\t\thasShadow: useHasShadowControl( settings ),\n\t};\n\n\treturn controls;\n}\n\nfunction useHasBorderColorControl( settings ) {\n\treturn settings?.border?.color;\n}\n\nfunction useHasBorderRadiusControl( settings ) {\n\treturn settings?.border?.radius;\n}\n\nfunction useHasBorderStyleControl( settings ) {\n\treturn settings?.border?.style;\n}\n\nfunction useHasBorderWidthControl( settings ) {\n\treturn settings?.border?.width;\n}\n\nfunction useHasShadowControl( settings ) {\n\tconst shadows = useShadowPresets( settings );\n\treturn !! settings?.shadow && shadows.length > 0;\n}\n\nfunction BorderToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n\tlabel,\n} ) {\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ label }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tradius: true,\n\tcolor: true,\n\twidth: true,\n\tshadow: true,\n};\n\nexport default function BorderPanel( {\n\tas: Wrapper = BorderToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tname,\n\tdefaultControls = DEFAULT_CONTROLS,\n} ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst decodeValue = useCallback(\n\t\t( rawValue ) => getValueFromVariable( { settings }, '', rawValue ),\n\t\t[ settings ]\n\t);\n\tconst encodeColorValue = ( colorValue ) => {\n\t\tconst allColors = colors.flatMap(\n\t\t\t( { colors: originColors } ) => originColors\n\t\t);\n\t\tconst colorObject = allColors.find(\n\t\t\t( { color } ) => color === colorValue\n\t\t);\n\t\treturn colorObject\n\t\t\t? 'var:preset|color|' + colorObject.slug\n\t\t\t: colorValue;\n\t};\n\tconst border = useMemo( () => {\n\t\tif ( hasSplitBorders( inheritedValue?.border ) ) {\n\t\t\tconst borderValue = { ...inheritedValue?.border };\n\t\t\t[ 'top', 'right', 'bottom', 'left' ].forEach( ( side ) => {\n\t\t\t\tborderValue[ side ] = {\n\t\t\t\t\t...borderValue[ side ],\n\t\t\t\t\tcolor: decodeValue( borderValue[ side ]?.color ),\n\t\t\t\t};\n\t\t\t} );\n\t\t\treturn borderValue;\n\t\t}\n\t\treturn {\n\t\t\t...inheritedValue?.border,\n\t\t\tcolor: inheritedValue?.border?.color\n\t\t\t\t? decodeValue( inheritedValue?.border?.color )\n\t\t\t\t: undefined,\n\t\t};\n\t}, [ inheritedValue?.border, decodeValue ] );\n\tconst setBorder = ( newBorder ) =>\n\t\tonChange( { ...value, border: newBorder } );\n\tconst showBorderColor = useHasBorderColorControl( settings );\n\tconst showBorderStyle = useHasBorderStyleControl( settings );\n\tconst showBorderWidth = useHasBorderWidthControl( settings );\n\n\t// Border radius.\n\tconst showBorderRadius = useHasBorderRadiusControl( settings );\n\tconst borderRadiusValues = decodeValue( border?.radius );\n\tconst setBorderRadius = ( newBorderRadius ) =>\n\t\tsetBorder( { ...border, radius: newBorderRadius } );\n\tconst hasBorderRadius = () => {\n\t\tconst borderValues = value?.border?.radius;\n\t\tif ( typeof borderValues === 'object' ) {\n\t\t\treturn Object.entries( borderValues ).some( Boolean );\n\t\t}\n\t\treturn !! borderValues;\n\t};\n\tconst hasShadowControl = useHasShadowControl( settings );\n\n\t// Shadow\n\tconst shadow = decodeValue( inheritedValue?.shadow );\n\tconst shadowPresets = settings?.shadow?.presets ?? {};\n\tconst mergedShadowPresets =\n\t\tshadowPresets.custom ??\n\t\tshadowPresets.theme ??\n\t\tshadowPresets.default ??\n\t\t[];\n\tconst setShadow = ( newValue ) => {\n\t\tconst slug = mergedShadowPresets?.find(\n\t\t\t( { shadow: shadowName } ) => shadowName === newValue\n\t\t)?.slug;\n\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'shadow' ],\n\t\t\t\tslug ? `var:preset|shadow|${ slug }` : newValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasShadow = () => !! value?.shadow;\n\tconst resetShadow = () => setShadow( undefined );\n\n\tconst resetBorder = () => {\n\t\tif ( hasBorderRadius() ) {\n\t\t\treturn setBorder( { radius: value?.border?.radius } );\n\t\t}\n\n\t\tsetBorder( undefined );\n\t};\n\n\tconst onBorderChange = ( newBorder ) => {\n\t\t// Ensure we have a visible border style when a border width or\n\t\t// color is being selected.\n\t\tconst updatedBorder = { ...newBorder };\n\n\t\tif ( hasSplitBorders( updatedBorder ) ) {\n\t\t\t[ 'top', 'right', 'bottom', 'left' ].forEach( ( side ) => {\n\t\t\t\tif ( updatedBorder[ side ] ) {\n\t\t\t\t\tupdatedBorder[ side ] = {\n\t\t\t\t\t\t...updatedBorder[ side ],\n\t\t\t\t\t\tcolor: encodeColorValue( updatedBorder[ side ]?.color ),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} );\n\t\t} else if ( updatedBorder ) {\n\t\t\tupdatedBorder.color = encodeColorValue( updatedBorder.color );\n\t\t}\n\n\t\t// As radius is maintained separately to color, style, and width\n\t\t// maintain its value. Undefined values here will be cleaned when\n\t\t// global styles are saved.\n\t\tsetBorder( { radius: border?.radius, ...updatedBorder } );\n\t};\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tborder: undefined,\n\t\t\tshadow: undefined,\n\t\t};\n\t}, [] );\n\n\tconst showBorderByDefault =\n\t\tdefaultControls?.color || defaultControls?.width;\n\n\tconst hasBorderControl =\n\t\tshowBorderColor ||\n\t\tshowBorderStyle ||\n\t\tshowBorderWidth ||\n\t\tshowBorderRadius;\n\n\tconst label = useBorderPanelLabel( {\n\t\tblockName: name,\n\t\thasShadowControl,\n\t\thasBorderControl,\n\t} );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t\tlabel={ label }\n\t\t>\n\t\t\t{ ( showBorderWidth || showBorderColor ) && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ () => isDefinedBorder( value?.border ) }\n\t\t\t\t\tlabel={ __( 'Border' ) }\n\t\t\t\t\tonDeselect={ () => resetBorder() }\n\t\t\t\t\tisShownByDefault={ showBorderByDefault }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<BorderBoxControl\n\t\t\t\t\t\tcolors={ colors }\n\t\t\t\t\t\tenableAlpha\n\t\t\t\t\t\tenableStyle={ showBorderStyle }\n\t\t\t\t\t\tonChange={ onBorderChange }\n\t\t\t\t\t\tpopoverOffset={ 40 }\n\t\t\t\t\t\tpopoverPlacement=\"left-start\"\n\t\t\t\t\t\tvalue={ border }\n\t\t\t\t\t\t__experimentalIsRenderedInSidebar\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\thideLabelFromVision={ ! hasShadowControl }\n\t\t\t\t\t\tlabel={ __( 'Border' ) }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showBorderRadius && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasBorderRadius }\n\t\t\t\t\tlabel={ __( 'Radius' ) }\n\t\t\t\t\tonDeselect={ () => setBorderRadius( undefined ) }\n\t\t\t\t\tisShownByDefault={ defaultControls.radius }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<BorderRadiusControl\n\t\t\t\t\t\tvalues={ borderRadiusValues }\n\t\t\t\t\t\tonChange={ ( newValue ) => {\n\t\t\t\t\t\t\tsetBorderRadius( newValue || undefined );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasShadowControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Shadow' ) }\n\t\t\t\t\thasValue={ hasShadow }\n\t\t\t\t\tonDeselect={ resetShadow }\n\t\t\t\t\tisShownByDefault={ defaultControls.shadow }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t{ hasBorderControl ? (\n\t\t\t\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t\t\t\t{ __( 'Shadow' ) }\n\t\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t) : null }\n\n\t\t\t\t\t<ShadowPopover\n\t\t\t\t\t\tshadow={ shadow }\n\t\t\t\t\t\tonShadowChange={ setShadow }\n\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { hasBlockSupport, getBlockSupport } from '@wordpress/blocks';\nimport { __experimentalHasSplitBorders as hasSplitBorders } from '@wordpress/components';\nimport { Platform, useCallback, useMemo } from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { getColorClassName } from '../components/colors';\nimport InspectorControls from '../components/inspector-controls';\nimport useMultipleOriginColorsAndGradients from '../components/colors-gradients/use-multiple-origin-colors-and-gradients';\nimport {\n\tcleanEmptyObject,\n\tshouldSkipSerialization,\n\tuseBlockSettings,\n} from './utils';\nimport {\n\tuseHasBorderPanel,\n\tuseHasBorderPanelControls,\n\tBorderPanel as StylesBorderPanel,\n} from '../components/global-styles';\nimport { store as blockEditorStore } from '../store';\nimport { __ } from '@wordpress/i18n';\n\nexport const BORDER_SUPPORT_KEY = '__experimentalBorder';\nexport const SHADOW_SUPPORT_KEY = 'shadow';\n\nconst getColorByProperty = ( colors, property, value ) => {\n\tlet matchedColor;\n\n\tcolors.some( ( origin ) =>\n\t\torigin.colors.some( ( color ) => {\n\t\t\tif ( color[ property ] === value ) {\n\t\t\t\tmatchedColor = color;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t} )\n\t);\n\n\treturn matchedColor;\n};\n\nexport const getMultiOriginColor = ( { colors, namedColor, customColor } ) => {\n\t// Search each origin (default, theme, or user) for matching color by name.\n\tif ( namedColor ) {\n\t\tconst colorObject = getColorByProperty( colors, 'slug', namedColor );\n\t\tif ( colorObject ) {\n\t\t\treturn colorObject;\n\t\t}\n\t}\n\n\t// Skip if no custom color or matching named color.\n\tif ( ! customColor ) {\n\t\treturn { color: undefined };\n\t}\n\n\t// Attempt to find color via custom color value or build new object.\n\tconst colorObject = getColorByProperty( colors, 'color', customColor );\n\treturn colorObject ? colorObject : { color: customColor };\n};\n\nfunction getColorSlugFromVariable( value ) {\n\tconst namedColor = /var:preset\\|color\\|(.+)/.exec( value );\n\tif ( namedColor && namedColor[ 1 ] ) {\n\t\treturn namedColor[ 1 ];\n\t}\n\treturn null;\n}\n\nfunction styleToAttributes( style ) {\n\tif ( hasSplitBorders( style?.border ) ) {\n\t\treturn {\n\t\t\tstyle,\n\t\t\tborderColor: undefined,\n\t\t};\n\t}\n\n\tconst borderColorValue = style?.border?.color;\n\tconst borderColorSlug = borderColorValue?.startsWith( 'var:preset|color|' )\n\t\t? borderColorValue.substring( 'var:preset|color|'.length )\n\t\t: undefined;\n\tconst updatedStyle = { ...style };\n\tupdatedStyle.border = {\n\t\t...updatedStyle.border,\n\t\tcolor: borderColorSlug ? undefined : borderColorValue,\n\t};\n\treturn {\n\t\tstyle: cleanEmptyObject( updatedStyle ),\n\t\tborderColor: borderColorSlug,\n\t};\n}\n\nfunction attributesToStyle( attributes ) {\n\tif ( hasSplitBorders( attributes.style?.border ) ) {\n\t\treturn attributes.style;\n\t}\n\treturn {\n\t\t...attributes.style,\n\t\tborder: {\n\t\t\t...attributes.style?.border,\n\t\t\tcolor: attributes.borderColor\n\t\t\t\t? 'var:preset|color|' + attributes.borderColor\n\t\t\t\t: attributes.style?.border?.color,\n\t\t},\n\t};\n}\n\nfunction BordersInspectorControl( { label, children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributesToStyle( attributes );\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\t...styleToAttributes( updatedStyle ),\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"border\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t\tlabel={ label }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function BorderPanel( { clientId, name, setAttributes, settings } ) {\n\tconst isEnabled = useHasBorderPanel( settings );\n\tfunction selector( select ) {\n\t\tconst { style, borderColor } =\n\t\t\tselect( blockEditorStore ).getBlockAttributes( clientId ) || {};\n\t\treturn { style, borderColor };\n\t}\n\tconst { style, borderColor } = useSelect( selector, [ clientId ] );\n\tconst value = useMemo( () => {\n\t\treturn attributesToStyle( { style, borderColor } );\n\t}, [ style, borderColor ] );\n\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( styleToAttributes( newStyle ) );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultControls = {\n\t\t...getBlockSupport( name, [\n\t\t\tBORDER_SUPPORT_KEY,\n\t\t\t'__experimentalDefaultControls',\n\t\t] ),\n\t\t...getBlockSupport( name, [\n\t\t\tSHADOW_SUPPORT_KEY,\n\t\t\t'__experimentalDefaultControls',\n\t\t] ),\n\t};\n\n\treturn (\n\t\t<StylesBorderPanel\n\t\t\tas={ BordersInspectorControl }\n\t\t\tpanelId={ clientId }\n\t\t\tsettings={ settings }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tdefaultControls={ defaultControls }\n\t\t/>\n\t);\n}\n\n/**\n * Determine whether there is block support for border properties.\n *\n * @param {string} blockName Block name.\n * @param {string} feature   Border feature to check support for.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasBorderSupport( blockName, feature = 'any' ) {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst support = getBlockSupport( blockName, BORDER_SUPPORT_KEY );\n\n\tif ( support === true ) {\n\t\treturn true;\n\t}\n\n\tif ( feature === 'any' ) {\n\t\treturn !! (\n\t\t\tsupport?.color ||\n\t\t\tsupport?.radius ||\n\t\t\tsupport?.width ||\n\t\t\tsupport?.style\n\t\t);\n\t}\n\n\treturn !! support?.[ feature ];\n}\n\n/**\n * Determine whether there is block support for shadow properties.\n *\n * @param {string} blockName Block name.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasShadowSupport( blockName ) {\n\treturn hasBlockSupport( blockName, SHADOW_SUPPORT_KEY );\n}\n\nexport function useBorderPanelLabel( {\n\tblockName,\n\thasBorderControl,\n\thasShadowControl,\n} = {} ) {\n\tconst settings = useBlockSettings( blockName );\n\tconst controls = useHasBorderPanelControls( settings );\n\n\tif ( ! hasBorderControl && ! hasShadowControl && blockName ) {\n\t\thasBorderControl =\n\t\t\tcontrols?.hasBorderColor ||\n\t\t\tcontrols?.hasBorderStyle ||\n\t\t\tcontrols?.hasBorderWidth ||\n\t\t\tcontrols?.hasBorderRadius;\n\t\thasShadowControl = controls?.hasShadow;\n\t}\n\n\tif ( hasBorderControl && hasShadowControl ) {\n\t\treturn __( 'Border & Shadow' );\n\t}\n\n\tif ( hasShadowControl ) {\n\t\treturn __( 'Shadow' );\n\t}\n\n\treturn __( 'Border' );\n}\n\n/**\n * Returns a new style object where the specified border attribute has been\n * removed.\n *\n * @param {Object} style     Styles from block attributes.\n * @param {string} attribute The border style attribute to clear.\n *\n * @return {Object} Style object with the specified attribute removed.\n */\nexport function removeBorderAttribute( style, attribute ) {\n\treturn cleanEmptyObject( {\n\t\t...style,\n\t\tborder: {\n\t\t\t...style?.border,\n\t\t\t[ attribute ]: undefined,\n\t\t},\n\t} );\n}\n\n/**\n * Filters registered block settings, extending attributes to include\n * `borderColor` if needed.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Updated block settings.\n */\nfunction addAttributes( settings ) {\n\tif ( ! hasBorderSupport( settings, 'color' ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify default value if needed.\n\tif ( settings.attributes.borderColor ) {\n\t\treturn settings;\n\t}\n\n\t// Add new borderColor attribute to block settings.\n\treturn {\n\t\t...settings,\n\t\tattributes: {\n\t\t\t...settings.attributes,\n\t\t\tborderColor: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t},\n\t};\n}\n\n/**\n * Override props assigned to save component to inject border color.\n *\n * @param {Object}        props           Additional props applied to save element.\n * @param {Object|string} blockNameOrType Block type definition.\n * @param {Object}        attributes      Block's attributes.\n *\n * @return {Object} Filtered props to apply to save element.\n */\nfunction addSaveProps( props, blockNameOrType, attributes ) {\n\tif (\n\t\t! hasBorderSupport( blockNameOrType, 'color' ) ||\n\t\tshouldSkipSerialization( blockNameOrType, BORDER_SUPPORT_KEY, 'color' )\n\t) {\n\t\treturn props;\n\t}\n\n\tconst borderClasses = getBorderClasses( attributes );\n\tconst newClassName = clsx( props.className, borderClasses );\n\n\t// If we are clearing the last of the previous classes in `className`\n\t// set it to `undefined` to avoid rendering empty DOM attributes.\n\tprops.className = newClassName ? newClassName : undefined;\n\n\treturn props;\n}\n\n/**\n * Generates a CSS class name consisting of all the applicable border color\n * classes given the current block attributes.\n *\n * @param {Object} attributes Block's attributes.\n *\n * @return {string} CSS class name.\n */\nexport function getBorderClasses( attributes ) {\n\tconst { borderColor, style } = attributes;\n\tconst borderColorClass = getColorClassName( 'border-color', borderColor );\n\n\treturn clsx( {\n\t\t'has-border-color': borderColor || style?.border?.color,\n\t\t[ borderColorClass ]: !! borderColorClass,\n\t} );\n}\n\nfunction useBlockProps( { name, borderColor, style } ) {\n\tconst { colors } = useMultipleOriginColorsAndGradients();\n\n\tif (\n\t\t! hasBorderSupport( name, 'color' ) ||\n\t\tshouldSkipSerialization( name, BORDER_SUPPORT_KEY, 'color' )\n\t) {\n\t\treturn {};\n\t}\n\n\tconst { color: borderColorValue } = getMultiOriginColor( {\n\t\tcolors,\n\t\tnamedColor: borderColor,\n\t} );\n\tconst { color: borderTopColor } = getMultiOriginColor( {\n\t\tcolors,\n\t\tnamedColor: getColorSlugFromVariable( style?.border?.top?.color ),\n\t} );\n\tconst { color: borderRightColor } = getMultiOriginColor( {\n\t\tcolors,\n\t\tnamedColor: getColorSlugFromVariable( style?.border?.right?.color ),\n\t} );\n\n\tconst { color: borderBottomColor } = getMultiOriginColor( {\n\t\tcolors,\n\t\tnamedColor: getColorSlugFromVariable( style?.border?.bottom?.color ),\n\t} );\n\tconst { color: borderLeftColor } = getMultiOriginColor( {\n\t\tcolors,\n\t\tnamedColor: getColorSlugFromVariable( style?.border?.left?.color ),\n\t} );\n\n\tconst extraStyles = {\n\t\tborderTopColor: borderTopColor || borderColorValue,\n\t\tborderRightColor: borderRightColor || borderColorValue,\n\t\tborderBottomColor: borderBottomColor || borderColorValue,\n\t\tborderLeftColor: borderLeftColor || borderColorValue,\n\t};\n\n\treturn addSaveProps(\n\t\t{ style: cleanEmptyObject( extraStyles ) || {} },\n\t\tname,\n\t\t{ borderColor, style }\n\t);\n}\n\nexport default {\n\tuseBlockProps,\n\taddSaveProps,\n\tattributeKeys: [ 'borderColor', 'style' ],\n\thasSupport( name ) {\n\t\treturn hasBorderSupport( name, 'color' );\n\t},\n};\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/border/addAttributes',\n\taddAttributes\n);\n","/**\n * WordPress dependencies\n */\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit';\nimport { useSettings } from '../use-settings';\nimport { store as blockEditorStore } from '../../store';\n\nexport function __experimentalGetGradientClass( gradientSlug ) {\n\tif ( ! gradientSlug ) {\n\t\treturn undefined;\n\t}\n\treturn `has-${ gradientSlug }-gradient-background`;\n}\n\n/**\n * Retrieves the gradient value per slug.\n *\n * @param {Array}  gradients Gradient Palette\n * @param {string} slug      Gradient slug\n *\n * @return {string} Gradient value.\n */\nexport function getGradientValueBySlug( gradients, slug ) {\n\tconst gradient = gradients?.find( ( g ) => g.slug === slug );\n\treturn gradient && gradient.gradient;\n}\n\nexport function __experimentalGetGradientObjectByGradientValue(\n\tgradients,\n\tvalue\n) {\n\tconst gradient = gradients?.find( ( g ) => g.gradient === value );\n\treturn gradient;\n}\n\n/**\n * Retrieves the gradient slug per slug.\n *\n * @param {Array}  gradients Gradient Palette\n * @param {string} value     Gradient value\n * @return {string} Gradient slug.\n */\nexport function getGradientSlugByValue( gradients, value ) {\n\tconst gradient = __experimentalGetGradientObjectByGradientValue(\n\t\tgradients,\n\t\tvalue\n\t);\n\treturn gradient && gradient.slug;\n}\n\nexport function __experimentalUseGradient( {\n\tgradientAttribute = 'gradient',\n\tcustomGradientAttribute = 'customGradient',\n} = {} ) {\n\tconst { clientId } = useBlockEditContext();\n\n\tconst [\n\t\tuserGradientPalette,\n\t\tthemeGradientPalette,\n\t\tdefaultGradientPalette,\n\t] = useSettings(\n\t\t'color.gradients.custom',\n\t\t'color.gradients.theme',\n\t\t'color.gradients.default'\n\t);\n\tconst allGradients = useMemo(\n\t\t() => [\n\t\t\t...( userGradientPalette || [] ),\n\t\t\t...( themeGradientPalette || [] ),\n\t\t\t...( defaultGradientPalette || [] ),\n\t\t],\n\t\t[ userGradientPalette, themeGradientPalette, defaultGradientPalette ]\n\t);\n\tconst { gradient, customGradient } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockAttributes } = select( blockEditorStore );\n\t\t\tconst attributes = getBlockAttributes( clientId ) || {};\n\t\t\treturn {\n\t\t\t\tcustomGradient: attributes[ customGradientAttribute ],\n\t\t\t\tgradient: attributes[ gradientAttribute ],\n\t\t\t};\n\t\t},\n\t\t[ clientId, gradientAttribute, customGradientAttribute ]\n\t);\n\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst setGradient = useCallback(\n\t\t( newGradientValue ) => {\n\t\t\tconst slug = getGradientSlugByValue(\n\t\t\t\tallGradients,\n\t\t\t\tnewGradientValue\n\t\t\t);\n\t\t\tif ( slug ) {\n\t\t\t\tupdateBlockAttributes( clientId, {\n\t\t\t\t\t[ gradientAttribute ]: slug,\n\t\t\t\t\t[ customGradientAttribute ]: undefined,\n\t\t\t\t} );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdateBlockAttributes( clientId, {\n\t\t\t\t[ gradientAttribute ]: undefined,\n\t\t\t\t[ customGradientAttribute ]: newGradientValue,\n\t\t\t} );\n\t\t},\n\t\t[ allGradients, clientId, updateBlockAttributes ]\n\t);\n\n\tconst gradientClass = __experimentalGetGradientClass( gradient );\n\tlet gradientValue;\n\tif ( gradient ) {\n\t\tgradientValue = getGradientValueBySlug( allGradients, gradient );\n\t} else {\n\t\tgradientValue = customGradient;\n\t}\n\treturn { gradientClass, gradientValue, setGradient };\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tBaseControl,\n\t__experimentalVStack as VStack,\n\tColorPalette,\n\tGradientPicker,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\nimport { unlock } from '../../lock-unlock';\n\nconst { Tabs } = unlock( componentsPrivateApis );\nconst colorsAndGradientKeys = [\n\t'colors',\n\t'disableCustomColors',\n\t'gradients',\n\t'disableCustomGradients',\n];\n\nconst TAB_IDS = { color: 'color', gradient: 'gradient' };\n\nfunction ColorGradientControlInner( {\n\tcolors,\n\tgradients,\n\tdisableCustomColors,\n\tdisableCustomGradients,\n\t__experimentalIsRenderedInSidebar,\n\tclassName,\n\tlabel,\n\tonColorChange,\n\tonGradientChange,\n\tcolorValue,\n\tgradientValue,\n\tclearable,\n\tshowTitle = true,\n\tenableAlpha,\n\theadingLevel,\n} ) {\n\tconst canChooseAColor =\n\t\tonColorChange &&\n\t\t( ( colors && colors.length > 0 ) || ! disableCustomColors );\n\tconst canChooseAGradient =\n\t\tonGradientChange &&\n\t\t( ( gradients && gradients.length > 0 ) || ! disableCustomGradients );\n\n\tif ( ! canChooseAColor && ! canChooseAGradient ) {\n\t\treturn null;\n\t}\n\n\tconst tabPanels = {\n\t\t[ TAB_IDS.color ]: (\n\t\t\t<ColorPalette\n\t\t\t\tvalue={ colorValue }\n\t\t\t\tonChange={\n\t\t\t\t\tcanChooseAGradient\n\t\t\t\t\t\t? ( newColor ) => {\n\t\t\t\t\t\t\t\tonColorChange( newColor );\n\t\t\t\t\t\t\t\tonGradientChange();\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: onColorChange\n\t\t\t\t}\n\t\t\t\t{ ...{ colors, disableCustomColors } }\n\t\t\t\t__experimentalIsRenderedInSidebar={\n\t\t\t\t\t__experimentalIsRenderedInSidebar\n\t\t\t\t}\n\t\t\t\tclearable={ clearable }\n\t\t\t\tenableAlpha={ enableAlpha }\n\t\t\t\theadingLevel={ headingLevel }\n\t\t\t/>\n\t\t),\n\t\t[ TAB_IDS.gradient ]: (\n\t\t\t<GradientPicker\n\t\t\t\tvalue={ gradientValue }\n\t\t\t\tonChange={\n\t\t\t\t\tcanChooseAColor\n\t\t\t\t\t\t? ( newGradient ) => {\n\t\t\t\t\t\t\t\tonGradientChange( newGradient );\n\t\t\t\t\t\t\t\tonColorChange();\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: onGradientChange\n\t\t\t\t}\n\t\t\t\t{ ...{ gradients, disableCustomGradients } }\n\t\t\t\t__experimentalIsRenderedInSidebar={\n\t\t\t\t\t__experimentalIsRenderedInSidebar\n\t\t\t\t}\n\t\t\t\tclearable={ clearable }\n\t\t\t\theadingLevel={ headingLevel }\n\t\t\t/>\n\t\t),\n\t};\n\n\tconst renderPanelType = ( type ) => (\n\t\t<div className=\"block-editor-color-gradient-control__panel\">\n\t\t\t{ tabPanels[ type ] }\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<BaseControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-color-gradient-control',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t>\n\t\t\t<fieldset className=\"block-editor-color-gradient-control__fieldset\">\n\t\t\t\t<VStack spacing={ 1 }>\n\t\t\t\t\t{ showTitle && (\n\t\t\t\t\t\t<legend>\n\t\t\t\t\t\t\t<div className=\"block-editor-color-gradient-control__color-indicator\">\n\t\t\t\t\t\t\t\t<BaseControl.VisualLabel>\n\t\t\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</legend>\n\t\t\t\t\t) }\n\t\t\t\t\t{ canChooseAColor && canChooseAGradient && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\t\tdefaultTabId={\n\t\t\t\t\t\t\t\t\tgradientValue\n\t\t\t\t\t\t\t\t\t\t? TAB_IDS.gradient\n\t\t\t\t\t\t\t\t\t\t: !! canChooseAColor && TAB_IDS.color\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Tabs.TabList>\n\t\t\t\t\t\t\t\t\t<Tabs.Tab tabId={ TAB_IDS.color }>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Color' ) }\n\t\t\t\t\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t\t\t\t\t\t<Tabs.Tab tabId={ TAB_IDS.gradient }>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Gradient' ) }\n\t\t\t\t\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t\t\t\t\t</Tabs.TabList>\n\t\t\t\t\t\t\t\t<Tabs.TabPanel\n\t\t\t\t\t\t\t\t\ttabId={ TAB_IDS.color }\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-color-gradient-control__panel\"\n\t\t\t\t\t\t\t\t\tfocusable={ false }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ tabPanels.color }\n\t\t\t\t\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t\t\t\t\t<Tabs.TabPanel\n\t\t\t\t\t\t\t\t\ttabId={ TAB_IDS.gradient }\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-color-gradient-control__panel\"\n\t\t\t\t\t\t\t\t\tfocusable={ false }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ tabPanels.gradient }\n\t\t\t\t\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ ! canChooseAGradient && renderPanelType( TAB_IDS.color ) }\n\t\t\t\t\t{ ! canChooseAColor && renderPanelType( TAB_IDS.gradient ) }\n\t\t\t\t</VStack>\n\t\t\t</fieldset>\n\t\t</BaseControl>\n\t);\n}\n\nfunction ColorGradientControlSelect( props ) {\n\tconst [ colors, gradients, customColors, customGradients ] = useSettings(\n\t\t'color.palette',\n\t\t'color.gradients',\n\t\t'color.custom',\n\t\t'color.customGradient'\n\t);\n\n\treturn (\n\t\t<ColorGradientControlInner\n\t\t\tcolors={ colors }\n\t\t\tgradients={ gradients }\n\t\t\tdisableCustomColors={ ! customColors }\n\t\t\tdisableCustomGradients={ ! customGradients }\n\t\t\t{ ...props }\n\t\t/>\n\t);\n}\n\nfunction ColorGradientControl( props ) {\n\tif (\n\t\tcolorsAndGradientKeys.every( ( key ) => props.hasOwnProperty( key ) )\n\t) {\n\t\treturn <ColorGradientControlInner { ...props } />;\n\t}\n\treturn <ColorGradientControlSelect { ...props } />;\n}\n\nexport default ColorGradientControl;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalHStack as HStack,\n\t__experimentalZStack as ZStack,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\tColorIndicator,\n\tFlex,\n\tFlexItem,\n\tDropdown,\n\tButton,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { useCallback, useRef } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport ColorGradientControl from '../colors-gradients/control';\nimport { useColorsPerOrigin, useGradientsPerOrigin } from './hooks';\nimport { getValueFromVariable, useToolsPanelDropdownMenuProps } from './utils';\nimport { setImmutably } from '../../utils/object';\nimport { unlock } from '../../lock-unlock';\nimport { reset as resetIcon } from '@wordpress/icons';\n\nexport function useHasColorPanel( settings ) {\n\tconst hasTextPanel = useHasTextPanel( settings );\n\tconst hasBackgroundPanel = useHasBackgroundColorPanel( settings );\n\tconst hasLinkPanel = useHasLinkPanel( settings );\n\tconst hasHeadingPanel = useHasHeadingPanel( settings );\n\tconst hasButtonPanel = useHasButtonPanel( settings );\n\tconst hasCaptionPanel = useHasCaptionPanel( settings );\n\n\treturn (\n\t\thasTextPanel ||\n\t\thasBackgroundPanel ||\n\t\thasLinkPanel ||\n\t\thasHeadingPanel ||\n\t\thasButtonPanel ||\n\t\thasCaptionPanel\n\t);\n}\n\nexport function useHasTextPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.text &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasLinkPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.link &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasCaptionPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.caption &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasHeadingPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.heading &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nexport function useHasButtonPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.button &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nexport function useHasBackgroundColorPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.background &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nfunction ColorToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Elements' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\thasInnerWrapper\n\t\t\theadingLevel={ 3 }\n\t\t\tclassName=\"color-block-support-panel\"\n\t\t\t__experimentalFirstVisibleItemClass=\"first\"\n\t\t\t__experimentalLastVisibleItemClass=\"last\"\n\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t>\n\t\t\t<div className=\"color-block-support-panel__inner-wrapper\">\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\ttext: true,\n\tbackground: true,\n\tlink: true,\n\theading: true,\n\tbutton: true,\n\tcaption: true,\n};\n\nconst popoverProps = {\n\tplacement: 'left-start',\n\toffset: 36,\n\tshift: true,\n};\n\nconst { Tabs } = unlock( componentsPrivateApis );\n\nconst LabeledColorIndicators = ( { indicators, label } ) => (\n\t<HStack justify=\"flex-start\">\n\t\t<ZStack isLayered={ false } offset={ -8 }>\n\t\t\t{ indicators.map( ( indicator, index ) => (\n\t\t\t\t<Flex key={ index } expanded={ false }>\n\t\t\t\t\t<ColorIndicator colorValue={ indicator } />\n\t\t\t\t</Flex>\n\t\t\t) ) }\n\t\t</ZStack>\n\t\t<FlexItem className=\"block-editor-panel-color-gradient-settings__color-name\">\n\t\t\t{ label }\n\t\t</FlexItem>\n\t</HStack>\n);\n\nfunction ColorPanelTab( {\n\tisGradient,\n\tinheritedValue,\n\tuserValue,\n\tsetValue,\n\tcolorGradientControlSettings,\n} ) {\n\treturn (\n\t\t<ColorGradientControl\n\t\t\t{ ...colorGradientControlSettings }\n\t\t\tshowTitle={ false }\n\t\t\tenableAlpha\n\t\t\t__experimentalIsRenderedInSidebar\n\t\t\tcolorValue={ isGradient ? undefined : inheritedValue }\n\t\t\tgradientValue={ isGradient ? inheritedValue : undefined }\n\t\t\tonColorChange={ isGradient ? undefined : setValue }\n\t\t\tonGradientChange={ isGradient ? setValue : undefined }\n\t\t\tclearable={ inheritedValue === userValue }\n\t\t\theadingLevel={ 3 }\n\t\t/>\n\t);\n}\n\nfunction ColorPanelDropdown( {\n\tlabel,\n\thasValue,\n\tresetValue,\n\tisShownByDefault,\n\tindicators,\n\ttabs,\n\tcolorGradientControlSettings,\n\tpanelId,\n} ) {\n\tconst currentTab = tabs.find( ( tab ) => tab.userValue !== undefined );\n\tconst { key: firstTabKey, ...firstTab } = tabs[ 0 ] ?? {};\n\tconst colorGradientDropdownButtonRef = useRef( undefined );\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__item\"\n\t\t\thasValue={ hasValue }\n\t\t\tlabel={ label }\n\t\t\tonDeselect={ resetValue }\n\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t<Dropdown\n\t\t\t\tpopoverProps={ popoverProps }\n\t\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__dropdown\"\n\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\t\tconst toggleProps = {\n\t\t\t\t\t\tonClick: onToggle,\n\t\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t\t'block-editor-panel-color-gradient-settings__dropdown',\n\t\t\t\t\t\t\t{ 'is-open': isOpen }\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'aria-expanded': isOpen,\n\t\t\t\t\t\tref: colorGradientDropdownButtonRef,\n\t\t\t\t\t};\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Button { ...toggleProps } __next40pxDefaultSize>\n\t\t\t\t\t\t\t\t<LabeledColorIndicators\n\t\t\t\t\t\t\t\t\tindicators={ indicators }\n\t\t\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{ hasValue() && (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Reset' ) }\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-panel-color-gradient-settings__reset\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\ticon={ resetIcon }\n\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\tresetValue();\n\t\t\t\t\t\t\t\t\t\tif ( isOpen ) {\n\t\t\t\t\t\t\t\t\t\t\tonToggle();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Return focus to parent button\n\t\t\t\t\t\t\t\t\t\tcolorGradientDropdownButtonRef.current?.focus();\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\trenderContent={ () => (\n\t\t\t\t\t<DropdownContentWrapper paddingSize=\"none\">\n\t\t\t\t\t\t<div className=\"block-editor-panel-color-gradient-settings__dropdown-content\">\n\t\t\t\t\t\t\t{ tabs.length === 1 && (\n\t\t\t\t\t\t\t\t<ColorPanelTab\n\t\t\t\t\t\t\t\t\tkey={ firstTabKey }\n\t\t\t\t\t\t\t\t\t{ ...firstTab }\n\t\t\t\t\t\t\t\t\tcolorGradientControlSettings={\n\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ tabs.length > 1 && (\n\t\t\t\t\t\t\t\t<Tabs defaultTabId={ currentTab?.key }>\n\t\t\t\t\t\t\t\t\t<Tabs.TabList>\n\t\t\t\t\t\t\t\t\t\t{ tabs.map( ( tab ) => (\n\t\t\t\t\t\t\t\t\t\t\t<Tabs.Tab\n\t\t\t\t\t\t\t\t\t\t\t\tkey={ tab.key }\n\t\t\t\t\t\t\t\t\t\t\t\ttabId={ tab.key }\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ tab.label }\n\t\t\t\t\t\t\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t\t\t</Tabs.TabList>\n\n\t\t\t\t\t\t\t\t\t{ tabs.map( ( tab ) => {\n\t\t\t\t\t\t\t\t\t\tconst { key: tabKey, ...restTabProps } =\n\t\t\t\t\t\t\t\t\t\t\ttab;\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Tabs.TabPanel\n\t\t\t\t\t\t\t\t\t\t\t\tkey={ tabKey }\n\t\t\t\t\t\t\t\t\t\t\t\ttabId={ tabKey }\n\t\t\t\t\t\t\t\t\t\t\t\tfocusable={ false }\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<ColorPanelTab\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={ tabKey }\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ ...restTabProps }\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</DropdownContentWrapper>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</ToolsPanelItem>\n\t);\n}\n\nexport default function ColorPanel( {\n\tas: Wrapper = ColorToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n\tchildren,\n} ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\tconst areCustomSolidsEnabled = settings?.color?.custom;\n\tconst areCustomGradientsEnabled = settings?.color?.customGradient;\n\tconst hasSolidColors = colors.length > 0 || areCustomSolidsEnabled;\n\tconst hasGradientColors = gradients.length > 0 || areCustomGradientsEnabled;\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\tconst encodeColorValue = ( colorValue ) => {\n\t\tconst allColors = colors.flatMap(\n\t\t\t( { colors: originColors } ) => originColors\n\t\t);\n\t\tconst colorObject = allColors.find(\n\t\t\t( { color } ) => color === colorValue\n\t\t);\n\t\treturn colorObject\n\t\t\t? 'var:preset|color|' + colorObject.slug\n\t\t\t: colorValue;\n\t};\n\tconst encodeGradientValue = ( gradientValue ) => {\n\t\tconst allGradients = gradients.flatMap(\n\t\t\t( { gradients: originGradients } ) => originGradients\n\t\t);\n\t\tconst gradientObject = allGradients.find(\n\t\t\t( { gradient } ) => gradient === gradientValue\n\t\t);\n\t\treturn gradientObject\n\t\t\t? 'var:preset|gradient|' + gradientObject.slug\n\t\t\t: gradientValue;\n\t};\n\n\t// BackgroundColor\n\tconst showBackgroundPanel = useHasBackgroundColorPanel( settings );\n\tconst backgroundColor = decodeValue( inheritedValue?.color?.background );\n\tconst userBackgroundColor = decodeValue( value?.color?.background );\n\tconst gradient = decodeValue( inheritedValue?.color?.gradient );\n\tconst userGradient = decodeValue( value?.color?.gradient );\n\tconst hasBackground = () => !! userBackgroundColor || !! userGradient;\n\tconst setBackgroundColor = ( newColor ) => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'background' ],\n\t\t\tencodeColorValue( newColor )\n\t\t);\n\t\tnewValue.color.gradient = undefined;\n\t\tonChange( newValue );\n\t};\n\tconst setGradient = ( newGradient ) => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'gradient' ],\n\t\t\tencodeGradientValue( newGradient )\n\t\t);\n\t\tnewValue.color.background = undefined;\n\t\tonChange( newValue );\n\t};\n\tconst resetBackground = () => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'background' ],\n\t\t\tundefined\n\t\t);\n\t\tnewValue.color.gradient = undefined;\n\t\tonChange( newValue );\n\t};\n\n\t// Links\n\tconst showLinkPanel = useHasLinkPanel( settings );\n\tconst linkColor = decodeValue(\n\t\tinheritedValue?.elements?.link?.color?.text\n\t);\n\tconst userLinkColor = decodeValue( value?.elements?.link?.color?.text );\n\tconst setLinkColor = ( newColor ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', 'link', 'color', 'text' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t)\n\t\t);\n\t};\n\tconst hoverLinkColor = decodeValue(\n\t\tinheritedValue?.elements?.link?.[ ':hover' ]?.color?.text\n\t);\n\tconst userHoverLinkColor = decodeValue(\n\t\tvalue?.elements?.link?.[ ':hover' ]?.color?.text\n\t);\n\tconst setHoverLinkColor = ( newColor ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', 'link', ':hover', 'color', 'text' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t)\n\t\t);\n\t};\n\tconst hasLink = () => !! userLinkColor || !! userHoverLinkColor;\n\tconst resetLink = () => {\n\t\tlet newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'elements', 'link', ':hover', 'color', 'text' ],\n\t\t\tundefined\n\t\t);\n\t\tnewValue = setImmutably(\n\t\t\tnewValue,\n\t\t\t[ 'elements', 'link', 'color', 'text' ],\n\t\t\tundefined\n\t\t);\n\t\tonChange( newValue );\n\t};\n\n\t// Text Color\n\tconst showTextPanel = useHasTextPanel( settings );\n\tconst textColor = decodeValue( inheritedValue?.color?.text );\n\tconst userTextColor = decodeValue( value?.color?.text );\n\tconst hasTextColor = () => !! userTextColor;\n\tconst setTextColor = ( newColor ) => {\n\t\tlet changedObject = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'text' ],\n\t\t\tencodeColorValue( newColor )\n\t\t);\n\t\tif ( textColor === linkColor ) {\n\t\t\tchangedObject = setImmutably(\n\t\t\t\tchangedObject,\n\t\t\t\t[ 'elements', 'link', 'color', 'text' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t);\n\t\t}\n\n\t\tonChange( changedObject );\n\t};\n\tconst resetTextColor = () => setTextColor( undefined );\n\n\t// Elements\n\tconst elements = [\n\t\t{\n\t\t\tname: 'caption',\n\t\t\tlabel: __( 'Captions' ),\n\t\t\tshowPanel: useHasCaptionPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'button',\n\t\t\tlabel: __( 'Button' ),\n\t\t\tshowPanel: useHasButtonPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'heading',\n\t\t\tlabel: __( 'Heading' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h1',\n\t\t\tlabel: __( 'H1' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h2',\n\t\t\tlabel: __( 'H2' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h3',\n\t\t\tlabel: __( 'H3' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h4',\n\t\t\tlabel: __( 'H4' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h5',\n\t\t\tlabel: __( 'H5' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h6',\n\t\t\tlabel: __( 'H6' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t];\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tcolor: undefined,\n\t\t\telements: {\n\t\t\t\t...previousValue?.elements,\n\t\t\t\tlink: {\n\t\t\t\t\t...previousValue?.elements?.link,\n\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t':hover': {\n\t\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t...elements.reduce( ( acc, element ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t[ element.name ]: {\n\t\t\t\t\t\t\t...previousValue?.elements?.[ element.name ],\n\t\t\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}, {} ),\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\tconst items = [\n\t\tshowTextPanel && {\n\t\t\tkey: 'text',\n\t\t\tlabel: __( 'Text' ),\n\t\t\thasValue: hasTextColor,\n\t\t\tresetValue: resetTextColor,\n\t\t\tisShownByDefault: defaultControls.text,\n\t\t\tindicators: [ textColor ],\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'text',\n\t\t\t\t\tlabel: __( 'Text' ),\n\t\t\t\t\tinheritedValue: textColor,\n\t\t\t\t\tsetValue: setTextColor,\n\t\t\t\t\tuserValue: userTextColor,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tshowBackgroundPanel && {\n\t\t\tkey: 'background',\n\t\t\tlabel: __( 'Background' ),\n\t\t\thasValue: hasBackground,\n\t\t\tresetValue: resetBackground,\n\t\t\tisShownByDefault: defaultControls.background,\n\t\t\tindicators: [ gradient ?? backgroundColor ],\n\t\t\ttabs: [\n\t\t\t\thasSolidColors && {\n\t\t\t\t\tkey: 'background',\n\t\t\t\t\tlabel: __( 'Color' ),\n\t\t\t\t\tinheritedValue: backgroundColor,\n\t\t\t\t\tsetValue: setBackgroundColor,\n\t\t\t\t\tuserValue: userBackgroundColor,\n\t\t\t\t},\n\t\t\t\thasGradientColors && {\n\t\t\t\t\tkey: 'gradient',\n\t\t\t\t\tlabel: __( 'Gradient' ),\n\t\t\t\t\tinheritedValue: gradient,\n\t\t\t\t\tsetValue: setGradient,\n\t\t\t\t\tuserValue: userGradient,\n\t\t\t\t\tisGradient: true,\n\t\t\t\t},\n\t\t\t].filter( Boolean ),\n\t\t},\n\t\tshowLinkPanel && {\n\t\t\tkey: 'link',\n\t\t\tlabel: __( 'Link' ),\n\t\t\thasValue: hasLink,\n\t\t\tresetValue: resetLink,\n\t\t\tisShownByDefault: defaultControls.link,\n\t\t\tindicators: [ linkColor, hoverLinkColor ],\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'link',\n\t\t\t\t\tlabel: __( 'Default' ),\n\t\t\t\t\tinheritedValue: linkColor,\n\t\t\t\t\tsetValue: setLinkColor,\n\t\t\t\t\tuserValue: userLinkColor,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'hover',\n\t\t\t\t\tlabel: __( 'Hover' ),\n\t\t\t\t\tinheritedValue: hoverLinkColor,\n\t\t\t\t\tsetValue: setHoverLinkColor,\n\t\t\t\t\tuserValue: userHoverLinkColor,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t].filter( Boolean );\n\n\telements.forEach( ( { name, label, showPanel } ) => {\n\t\tif ( ! showPanel ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst elementBackgroundColor = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.background\n\t\t);\n\t\tconst elementGradient = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.gradient\n\t\t);\n\t\tconst elementTextColor = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.text\n\t\t);\n\t\tconst elementBackgroundUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.background\n\t\t);\n\t\tconst elementGradientUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.gradient\n\t\t);\n\t\tconst elementTextUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.text\n\t\t);\n\t\tconst hasElement = () =>\n\t\t\t!! (\n\t\t\t\telementTextUserColor ||\n\t\t\t\telementBackgroundUserColor ||\n\t\t\t\telementGradientUserColor\n\t\t\t);\n\t\tconst resetElement = () => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'background' ],\n\t\t\t\tundefined\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.gradient = undefined;\n\t\t\tnewValue.elements[ name ].color.text = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\n\t\tconst setElementTextColor = ( newTextColor ) => {\n\t\t\tonChange(\n\t\t\t\tsetImmutably(\n\t\t\t\t\tvalue,\n\t\t\t\t\t[ 'elements', name, 'color', 'text' ],\n\t\t\t\t\tencodeColorValue( newTextColor )\n\t\t\t\t)\n\t\t\t);\n\t\t};\n\t\tconst setElementBackgroundColor = ( newBackgroundColor ) => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'background' ],\n\t\t\t\tencodeColorValue( newBackgroundColor )\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.gradient = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\t\tconst setElementGradient = ( newGradient ) => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'gradient' ],\n\t\t\t\tencodeGradientValue( newGradient )\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.background = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\t\tconst supportsTextColor = true;\n\t\t// Background color is not supported for `caption`\n\t\t// as there isn't yet a way to set padding for the element.\n\t\tconst supportsBackground = name !== 'caption';\n\n\t\titems.push( {\n\t\t\tkey: name,\n\t\t\tlabel,\n\t\t\thasValue: hasElement,\n\t\t\tresetValue: resetElement,\n\t\t\tisShownByDefault: defaultControls[ name ],\n\t\t\tindicators:\n\t\t\t\tsupportsTextColor && supportsBackground\n\t\t\t\t\t? [\n\t\t\t\t\t\t\telementTextColor,\n\t\t\t\t\t\t\telementGradient ?? elementBackgroundColor,\n\t\t\t\t\t  ]\n\t\t\t\t\t: [\n\t\t\t\t\t\t\tsupportsTextColor\n\t\t\t\t\t\t\t\t? elementTextColor\n\t\t\t\t\t\t\t\t: elementGradient ?? elementBackgroundColor,\n\t\t\t\t\t  ],\n\t\t\ttabs: [\n\t\t\t\thasSolidColors &&\n\t\t\t\t\tsupportsTextColor && {\n\t\t\t\t\t\tkey: 'text',\n\t\t\t\t\t\tlabel: __( 'Text' ),\n\t\t\t\t\t\tinheritedValue: elementTextColor,\n\t\t\t\t\t\tsetValue: setElementTextColor,\n\t\t\t\t\t\tuserValue: elementTextUserColor,\n\t\t\t\t\t},\n\t\t\t\thasSolidColors &&\n\t\t\t\t\tsupportsBackground && {\n\t\t\t\t\t\tkey: 'background',\n\t\t\t\t\t\tlabel: __( 'Background' ),\n\t\t\t\t\t\tinheritedValue: elementBackgroundColor,\n\t\t\t\t\t\tsetValue: setElementBackgroundColor,\n\t\t\t\t\t\tuserValue: elementBackgroundUserColor,\n\t\t\t\t\t},\n\t\t\t\thasGradientColors &&\n\t\t\t\t\tsupportsBackground && {\n\t\t\t\t\t\tkey: 'gradient',\n\t\t\t\t\t\tlabel: __( 'Gradient' ),\n\t\t\t\t\t\tinheritedValue: elementGradient,\n\t\t\t\t\t\tsetValue: setElementGradient,\n\t\t\t\t\t\tuserValue: elementGradientUserColor,\n\t\t\t\t\t\tisGradient: true,\n\t\t\t\t\t},\n\t\t\t].filter( Boolean ),\n\t\t} );\n\t} );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ items.map( ( item ) => {\n\t\t\t\tconst { key, ...restItem } = item;\n\t\t\t\treturn (\n\t\t\t\t\t<ColorPanelDropdown\n\t\t\t\t\t\tkey={ key }\n\t\t\t\t\t\t{ ...restItem }\n\t\t\t\t\t\tcolorGradientControlSettings={ {\n\t\t\t\t\t\t\tcolors,\n\t\t\t\t\t\t\tdisableCustomColors: ! areCustomSolidsEnabled,\n\t\t\t\t\t\t\tgradients,\n\t\t\t\t\t\t\tdisableCustomGradients: ! areCustomGradientsEnabled,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t\t{ children }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * External dependencies\n */\nimport a11yPlugin from 'colord/plugins/a11y';\nimport namesPlugin from 'colord/plugins/names';\nimport { colord, extend } from 'colord';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Notice } from '@wordpress/components';\nimport { speak } from '@wordpress/a11y';\n\nextend( [ namesPlugin, a11yPlugin ] );\n\nfunction ContrastChecker( {\n\tbackgroundColor,\n\tfallbackBackgroundColor,\n\tfallbackTextColor,\n\tfallbackLinkColor,\n\tfontSize, // Font size value in pixels.\n\tisLargeText,\n\ttextColor,\n\tlinkColor,\n\tenableAlphaChecker = false,\n} ) {\n\tconst currentBackgroundColor = backgroundColor || fallbackBackgroundColor;\n\n\t// Must have a background color.\n\tif ( ! currentBackgroundColor ) {\n\t\treturn null;\n\t}\n\n\tconst currentTextColor = textColor || fallbackTextColor;\n\tconst currentLinkColor = linkColor || fallbackLinkColor;\n\n\t// Must have at least one text color.\n\tif ( ! currentTextColor && ! currentLinkColor ) {\n\t\treturn null;\n\t}\n\n\tconst textColors = [\n\t\t{\n\t\t\tcolor: currentTextColor,\n\t\t\tdescription: __( 'text color' ),\n\t\t},\n\t\t{\n\t\t\tcolor: currentLinkColor,\n\t\t\tdescription: __( 'link color' ),\n\t\t},\n\t];\n\tconst colordBackgroundColor = colord( currentBackgroundColor );\n\tconst backgroundColorHasTransparency = colordBackgroundColor.alpha() < 1;\n\tconst backgroundColorBrightness = colordBackgroundColor.brightness();\n\tconst isReadableOptions = {\n\t\tlevel: 'AA',\n\t\tsize:\n\t\t\tisLargeText || ( isLargeText !== false && fontSize >= 24 )\n\t\t\t\t? 'large'\n\t\t\t\t: 'small',\n\t};\n\n\tlet message = '';\n\tlet speakMessage = '';\n\tfor ( const item of textColors ) {\n\t\t// If there is no color, go no further.\n\t\tif ( ! item.color ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst colordTextColor = colord( item.color );\n\t\tconst isColordTextReadable = colordTextColor.isReadable(\n\t\t\tcolordBackgroundColor,\n\t\t\tisReadableOptions\n\t\t);\n\t\tconst textHasTransparency = colordTextColor.alpha() < 1;\n\n\t\t// If the contrast is not readable.\n\t\tif ( ! isColordTextReadable ) {\n\t\t\t// Don't show the message if the background or text is transparent.\n\t\t\tif ( backgroundColorHasTransparency || textHasTransparency ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tmessage =\n\t\t\t\tbackgroundColorBrightness < colordTextColor.brightness()\n\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t// translators: %s is a type of text color, e.g., \"text color\" or \"link color\".\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t'This color combination may be hard for people to read. Try using a darker background color and/or a brighter %s.'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\titem.description\n\t\t\t\t\t  )\n\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t// translators: %s is a type of text color, e.g., \"text color\" or \"link color\".\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t'This color combination may be hard for people to read. Try using a brighter background color and/or a darker %s.'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\titem.description\n\t\t\t\t\t  );\n\t\t\tspeakMessage = __(\n\t\t\t\t'This color combination may be hard for people to read.'\n\t\t\t);\n\t\t\t// Break from the loop when we have a contrast warning.\n\t\t\t// These messages take priority over the transparency warning.\n\t\t\tbreak;\n\t\t}\n\n\t\t// If there is no contrast warning and the text is transparent,\n\t\t// show the transparent warning if alpha check is enabled.\n\t\tif ( textHasTransparency && enableAlphaChecker ) {\n\t\t\tmessage = __( 'Transparent text may be hard for people to read.' );\n\t\t\tspeakMessage = __(\n\t\t\t\t'Transparent text may be hard for people to read.'\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( ! message ) {\n\t\treturn null;\n\t}\n\n\t// Note: The `Notice` component can speak messages via its `spokenMessage`\n\t// prop, but the contrast checker requires granular control over when the\n\t// announcements are made. Notably, the message will be re-announced if a\n\t// new color combination is selected and the contrast is still insufficient.\n\tspeak( speakMessage );\n\n\treturn (\n\t\t<div className=\"block-editor-contrast-checker\">\n\t\t\t<Notice\n\t\t\t\tspokenMessage={ null }\n\t\t\t\tstatus=\"warning\"\n\t\t\t\tisDismissible={ false }\n\t\t\t>\n\t\t\t\t{ message }\n\t\t\t</Notice>\n\t\t</div>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/contrast-checker/README.md\n */\nexport default ContrastChecker;\n","/**\n * WordPress dependencies\n */\nimport { createContext, useMemo } from '@wordpress/element';\nimport { observableMap } from '@wordpress/compose';\n\nexport const BlockRefs = createContext( { refsMap: observableMap() } );\n\nexport function BlockRefsProvider( { children } ) {\n\tconst value = useMemo( () => ( { refsMap: observableMap() } ), [] );\n\treturn (\n\t\t<BlockRefs.Provider value={ value }>{ children }</BlockRefs.Provider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useContext, useState, useLayoutEffect } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { BlockRefs } from '../../provider/block-refs-provider';\n\n/** @typedef {import('@wordpress/element').RefCallback} RefCallback */\n/** @typedef {import('@wordpress/element').Ref} Ref */\n\n/**\n * Provides a ref to the BlockRefs context.\n *\n * @param {string} clientId The client ID of the element ref.\n *\n * @return {RefCallback} Ref callback.\n */\nexport function useBlockRefProvider( clientId ) {\n\tconst { refsMap } = useContext( BlockRefs );\n\treturn useRefEffect(\n\t\t( element ) => {\n\t\t\trefsMap.set( clientId, element );\n\t\t\treturn () => refsMap.delete( clientId );\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n\nfunction assignRef( ref, value ) {\n\tif ( typeof ref === 'function' ) {\n\t\tref( value );\n\t} else if ( ref ) {\n\t\tref.current = value;\n\t}\n}\n\n/**\n * Tracks the DOM element for the block identified by `clientId` and assigns it to the `ref`\n * whenever it changes.\n *\n * @param {string} clientId The client ID to track.\n * @param {Ref}    ref      The ref object/callback to assign to.\n */\nexport function useBlockElementRef( clientId, ref ) {\n\tconst { refsMap } = useContext( BlockRefs );\n\tuseLayoutEffect( () => {\n\t\tassignRef( ref, refsMap.get( clientId ) );\n\t\tconst unsubscribe = refsMap.subscribe( clientId, () =>\n\t\t\tassignRef( ref, refsMap.get( clientId ) )\n\t\t);\n\t\treturn () => {\n\t\t\tunsubscribe();\n\t\t\tassignRef( ref, null );\n\t\t};\n\t}, [ refsMap, clientId, ref ] );\n}\n\n/**\n * Return the element for a given client ID. Updates whenever the element\n * changes, becomes available, or disappears.\n *\n * @param {string} clientId The client ID to an element for.\n *\n * @return {Element|null} The block's wrapper element.\n */\nexport function useBlockElement( clientId ) {\n\tconst [ blockElement, setBlockElement ] = useState( null );\n\tuseBlockElementRef( clientId, setBlockElement );\n\treturn blockElement;\n}\n","/**\n * WordPress dependencies\n */\nimport { useLayoutEffect, useReducer } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport ContrastChecker from '../components/contrast-checker';\nimport { useBlockElement } from '../components/block-list/use-block-props/use-block-refs';\n\nfunction getComputedValue( node, property ) {\n\treturn node.ownerDocument.defaultView\n\t\t.getComputedStyle( node )\n\t\t.getPropertyValue( property );\n}\n\nfunction getBlockElementColors( blockEl ) {\n\tif ( ! blockEl ) {\n\t\treturn {};\n\t}\n\n\tconst firstLinkElement = blockEl.querySelector( 'a' );\n\tconst linkColor = !! firstLinkElement?.innerText\n\t\t? getComputedValue( firstLinkElement, 'color' )\n\t\t: undefined;\n\n\tconst textColor = getComputedValue( blockEl, 'color' );\n\n\tlet backgroundColorNode = blockEl;\n\tlet backgroundColor = getComputedValue(\n\t\tbackgroundColorNode,\n\t\t'background-color'\n\t);\n\twhile (\n\t\tbackgroundColor === 'rgba(0, 0, 0, 0)' &&\n\t\tbackgroundColorNode.parentNode &&\n\t\tbackgroundColorNode.parentNode.nodeType ===\n\t\t\tbackgroundColorNode.parentNode.ELEMENT_NODE\n\t) {\n\t\tbackgroundColorNode = backgroundColorNode.parentNode;\n\t\tbackgroundColor = getComputedValue(\n\t\t\tbackgroundColorNode,\n\t\t\t'background-color'\n\t\t);\n\t}\n\n\treturn {\n\t\ttextColor,\n\t\tbackgroundColor,\n\t\tlinkColor,\n\t};\n}\n\nfunction reducer( prevColors, newColors ) {\n\tconst hasChanged = Object.keys( newColors ).some(\n\t\t( key ) => prevColors[ key ] !== newColors[ key ]\n\t);\n\n\t// Do not re-render if the colors have not changed.\n\treturn hasChanged ? newColors : prevColors;\n}\n\nexport default function BlockColorContrastChecker( { clientId } ) {\n\tconst blockEl = useBlockElement( clientId );\n\tconst [ colors, setColors ] = useReducer( reducer, {} );\n\n\t// There are so many things that can change the color of a block\n\t// So we perform this check on every render.\n\tuseLayoutEffect( () => {\n\t\tif ( ! blockEl ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction updateColors() {\n\t\t\tsetColors( getBlockElementColors( blockEl ) );\n\t\t}\n\n\t\t// Combine `useLayoutEffect` and two rAF calls to ensure that values are read\n\t\t// after the current paint but before the next paint.\n\t\twindow.requestAnimationFrame( () =>\n\t\t\twindow.requestAnimationFrame( updateColors )\n\t\t);\n\t} );\n\n\treturn (\n\t\t<ContrastChecker\n\t\t\tbackgroundColor={ colors.backgroundColor }\n\t\t\ttextColor={ colors.textColor }\n\t\t\tlinkColor={ colors.linkColor }\n\t\t\tenableAlphaChecker\n\t\t/>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { getBlockSupport } from '@wordpress/blocks';\nimport { useMemo, Platform, useCallback } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetColorClassName,\n\tgetColorObjectByAttributeValues,\n} from '../components/colors';\nimport { __experimentalGetGradientClass } from '../components/gradients';\nimport {\n\tcleanEmptyObject,\n\ttransformStyles,\n\tshouldSkipSerialization,\n} from './utils';\nimport { getBackgroundImageClasses } from './background';\nimport { useSettings } from '../components/use-settings';\nimport InspectorControls from '../components/inspector-controls';\nimport {\n\tuseHasColorPanel,\n\tdefault as StylesColorPanel,\n} from '../components/global-styles/color-panel';\nimport BlockColorContrastChecker from './contrast-checker';\nimport { store as blockEditorStore } from '../store';\n\nexport const COLOR_SUPPORT_KEY = 'color';\n\nconst hasColorSupport = ( blockNameOrType ) => {\n\tconst colorSupport = getBlockSupport( blockNameOrType, COLOR_SUPPORT_KEY );\n\treturn (\n\t\tcolorSupport &&\n\t\t( colorSupport.link === true ||\n\t\t\tcolorSupport.gradient === true ||\n\t\t\tcolorSupport.background !== false ||\n\t\t\tcolorSupport.text !== false )\n\t);\n};\n\nconst hasLinkColorSupport = ( blockType ) => {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.link\n\t);\n};\n\nconst hasGradientSupport = ( blockNameOrType ) => {\n\tconst colorSupport = getBlockSupport( blockNameOrType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.gradients\n\t);\n};\n\nconst hasBackgroundColorSupport = ( blockType ) => {\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.background !== false;\n};\n\nconst hasTextColorSupport = ( blockType ) => {\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.text !== false;\n};\n\n/**\n * Filters registered block settings, extending attributes to include\n * `backgroundColor` and `textColor` attribute.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addAttributes( settings ) {\n\tif ( ! hasColorSupport( settings ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( ! settings.attributes.backgroundColor ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tbackgroundColor: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\tif ( ! settings.attributes.textColor ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\ttextColor: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\tif ( hasGradientSupport( settings ) && ! settings.attributes.gradient ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tgradient: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override props assigned to save component to inject colors classnames.\n *\n * @param {Object}        props           Additional props applied to save element.\n * @param {Object|string} blockNameOrType Block type.\n * @param {Object}        attributes      Block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( props, blockNameOrType, attributes ) {\n\tif (\n\t\t! hasColorSupport( blockNameOrType ) ||\n\t\tshouldSkipSerialization( blockNameOrType, COLOR_SUPPORT_KEY )\n\t) {\n\t\treturn props;\n\t}\n\n\tconst hasGradient = hasGradientSupport( blockNameOrType );\n\n\t// I'd have preferred to avoid the \"style\" attribute usage here\n\tconst { backgroundColor, textColor, gradient, style } = attributes;\n\n\tconst shouldSerialize = ( feature ) =>\n\t\t! shouldSkipSerialization(\n\t\t\tblockNameOrType,\n\t\t\tCOLOR_SUPPORT_KEY,\n\t\t\tfeature\n\t\t);\n\n\t// Primary color classes must come before the `has-text-color`,\n\t// `has-background` and `has-link-color` classes to maintain backwards\n\t// compatibility and avoid block invalidations.\n\tconst textClass = shouldSerialize( 'text' )\n\t\t? getColorClassName( 'color', textColor )\n\t\t: undefined;\n\n\tconst gradientClass = shouldSerialize( 'gradients' )\n\t\t? __experimentalGetGradientClass( gradient )\n\t\t: undefined;\n\n\tconst backgroundClass = shouldSerialize( 'background' )\n\t\t? getColorClassName( 'background-color', backgroundColor )\n\t\t: undefined;\n\n\tconst serializeHasBackground =\n\t\tshouldSerialize( 'background' ) || shouldSerialize( 'gradients' );\n\tconst hasBackground =\n\t\tbackgroundColor ||\n\t\tstyle?.color?.background ||\n\t\t( hasGradient && ( gradient || style?.color?.gradient ) );\n\n\tconst newClassName = clsx( props.className, textClass, gradientClass, {\n\t\t// Don't apply the background class if there's a custom gradient.\n\t\t[ backgroundClass ]:\n\t\t\t( ! hasGradient || ! style?.color?.gradient ) && !! backgroundClass,\n\t\t'has-text-color':\n\t\t\tshouldSerialize( 'text' ) && ( textColor || style?.color?.text ),\n\t\t'has-background': serializeHasBackground && hasBackground,\n\t\t'has-link-color':\n\t\t\tshouldSerialize( 'link' ) && style?.elements?.link?.color,\n\t} );\n\tprops.className = newClassName ? newClassName : undefined;\n\n\treturn props;\n}\n\nfunction styleToAttributes( style ) {\n\tconst textColorValue = style?.color?.text;\n\tconst textColorSlug = textColorValue?.startsWith( 'var:preset|color|' )\n\t\t? textColorValue.substring( 'var:preset|color|'.length )\n\t\t: undefined;\n\tconst backgroundColorValue = style?.color?.background;\n\tconst backgroundColorSlug = backgroundColorValue?.startsWith(\n\t\t'var:preset|color|'\n\t)\n\t\t? backgroundColorValue.substring( 'var:preset|color|'.length )\n\t\t: undefined;\n\tconst gradientValue = style?.color?.gradient;\n\tconst gradientSlug = gradientValue?.startsWith( 'var:preset|gradient|' )\n\t\t? gradientValue.substring( 'var:preset|gradient|'.length )\n\t\t: undefined;\n\tconst updatedStyle = { ...style };\n\tupdatedStyle.color = {\n\t\t...updatedStyle.color,\n\t\ttext: textColorSlug ? undefined : textColorValue,\n\t\tbackground: backgroundColorSlug ? undefined : backgroundColorValue,\n\t\tgradient: gradientSlug ? undefined : gradientValue,\n\t};\n\treturn {\n\t\tstyle: cleanEmptyObject( updatedStyle ),\n\t\ttextColor: textColorSlug,\n\t\tbackgroundColor: backgroundColorSlug,\n\t\tgradient: gradientSlug,\n\t};\n}\n\nfunction attributesToStyle( attributes ) {\n\treturn {\n\t\t...attributes.style,\n\t\tcolor: {\n\t\t\t...attributes.style?.color,\n\t\t\ttext: attributes.textColor\n\t\t\t\t? 'var:preset|color|' + attributes.textColor\n\t\t\t\t: attributes.style?.color?.text,\n\t\t\tbackground: attributes.backgroundColor\n\t\t\t\t? 'var:preset|color|' + attributes.backgroundColor\n\t\t\t\t: attributes.style?.color?.background,\n\t\t\tgradient: attributes.gradient\n\t\t\t\t? 'var:preset|gradient|' + attributes.gradient\n\t\t\t\t: attributes.style?.color?.gradient,\n\t\t},\n\t};\n}\n\nfunction ColorInspectorControl( { children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributesToStyle( attributes );\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\t...styleToAttributes( updatedStyle ),\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"color\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function ColorEdit( { clientId, name, setAttributes, settings } ) {\n\tconst isEnabled = useHasColorPanel( settings );\n\tfunction selector( select ) {\n\t\tconst { style, textColor, backgroundColor, gradient } =\n\t\t\tselect( blockEditorStore ).getBlockAttributes( clientId ) || {};\n\t\treturn { style, textColor, backgroundColor, gradient };\n\t}\n\tconst { style, textColor, backgroundColor, gradient } = useSelect(\n\t\tselector,\n\t\t[ clientId ]\n\t);\n\tconst value = useMemo( () => {\n\t\treturn attributesToStyle( {\n\t\t\tstyle,\n\t\t\ttextColor,\n\t\t\tbackgroundColor,\n\t\t\tgradient,\n\t\t} );\n\t}, [ style, textColor, backgroundColor, gradient ] );\n\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( styleToAttributes( newStyle ) );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultControls = getBlockSupport( name, [\n\t\tCOLOR_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\n\tconst enableContrastChecking =\n\t\tPlatform.OS === 'web' &&\n\t\t! value?.color?.gradient &&\n\t\t( settings?.color?.text || settings?.color?.link ) &&\n\t\t// Contrast checking is enabled by default.\n\t\t// Deactivating it requires `enableContrastChecker` to have\n\t\t// an explicit value of `false`.\n\t\tfalse !==\n\t\t\tgetBlockSupport( name, [\n\t\t\t\tCOLOR_SUPPORT_KEY,\n\t\t\t\t'enableContrastChecker',\n\t\t\t] );\n\n\treturn (\n\t\t<StylesColorPanel\n\t\t\tas={ ColorInspectorControl }\n\t\t\tpanelId={ clientId }\n\t\t\tsettings={ settings }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tdefaultControls={ defaultControls }\n\t\t\tenableContrastChecker={\n\t\t\t\tfalse !==\n\t\t\t\tgetBlockSupport( name, [\n\t\t\t\t\tCOLOR_SUPPORT_KEY,\n\t\t\t\t\t'enableContrastChecker',\n\t\t\t\t] )\n\t\t\t}\n\t\t>\n\t\t\t{ enableContrastChecking && (\n\t\t\t\t<BlockColorContrastChecker clientId={ clientId } />\n\t\t\t) }\n\t\t</StylesColorPanel>\n\t);\n}\n\nfunction useBlockProps( {\n\tname,\n\tbackgroundColor,\n\ttextColor,\n\tgradient,\n\tstyle,\n} ) {\n\tconst [ userPalette, themePalette, defaultPalette ] = useSettings(\n\t\t'color.palette.custom',\n\t\t'color.palette.theme',\n\t\t'color.palette.default'\n\t);\n\n\tconst colors = useMemo(\n\t\t() => [\n\t\t\t...( userPalette || [] ),\n\t\t\t...( themePalette || [] ),\n\t\t\t...( defaultPalette || [] ),\n\t\t],\n\t\t[ userPalette, themePalette, defaultPalette ]\n\t);\n\tif (\n\t\t! hasColorSupport( name ) ||\n\t\tshouldSkipSerialization( name, COLOR_SUPPORT_KEY )\n\t) {\n\t\treturn {};\n\t}\n\tconst extraStyles = {};\n\n\tif (\n\t\ttextColor &&\n\t\t! shouldSkipSerialization( name, COLOR_SUPPORT_KEY, 'text' )\n\t) {\n\t\textraStyles.color = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\ttextColor\n\t\t)?.color;\n\t}\n\tif (\n\t\tbackgroundColor &&\n\t\t! shouldSkipSerialization( name, COLOR_SUPPORT_KEY, 'background' )\n\t) {\n\t\textraStyles.backgroundColor = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\tbackgroundColor\n\t\t)?.color;\n\t}\n\n\tconst saveProps = addSaveProps( { style: extraStyles }, name, {\n\t\ttextColor,\n\t\tbackgroundColor,\n\t\tgradient,\n\t\tstyle,\n\t} );\n\n\tconst hasBackgroundValue =\n\t\tbackgroundColor ||\n\t\tstyle?.color?.background ||\n\t\tgradient ||\n\t\tstyle?.color?.gradient;\n\n\treturn {\n\t\t...saveProps,\n\t\tclassName: clsx(\n\t\t\tsaveProps.className,\n\t\t\t// Add background image classes in the editor, if not already handled by background color values.\n\t\t\t! hasBackgroundValue && getBackgroundImageClasses( style )\n\t\t),\n\t};\n}\n\nexport default {\n\tuseBlockProps,\n\taddSaveProps,\n\tattributeKeys: [ 'backgroundColor', 'textColor', 'gradient', 'style' ],\n\thasSupport: hasColorSupport,\n};\n\nconst MIGRATION_PATHS = {\n\tlinkColor: [ [ 'style', 'elements', 'link', 'color', 'text' ] ],\n\ttextColor: [ [ 'textColor' ], [ 'style', 'color', 'text' ] ],\n\tbackgroundColor: [\n\t\t[ 'backgroundColor' ],\n\t\t[ 'style', 'color', 'background' ],\n\t],\n\tgradient: [ [ 'gradient' ], [ 'style', 'color', 'gradient' ] ],\n};\n\nexport function addTransforms( result, source, index, results ) {\n\tconst destinationBlockType = result.name;\n\tconst activeSupports = {\n\t\tlinkColor: hasLinkColorSupport( destinationBlockType ),\n\t\ttextColor: hasTextColorSupport( destinationBlockType ),\n\t\tbackgroundColor: hasBackgroundColorSupport( destinationBlockType ),\n\t\tgradient: hasGradientSupport( destinationBlockType ),\n\t};\n\treturn transformStyles(\n\t\tactiveSupports,\n\t\tMIGRATION_PATHS,\n\t\tresult,\n\t\tsource,\n\t\tindex,\n\t\tresults\n\t);\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/color/addAttribute',\n\taddAttributes\n);\n\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/color/addTransforms',\n\taddTransforms\n);\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { CustomSelectControl } from '@wordpress/components';\nimport deprecated from '@wordpress/deprecated';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\n\nexport default function FontFamilyControl( {\n\t/** Start opting into the larger default height that will become the default size in a future version. */\n\t__next40pxDefaultSize = false,\n\t/** Start opting into the new margin-free styles that will become the default in a future version. */\n\t__nextHasNoMarginBottom = false,\n\tvalue = '',\n\tonChange,\n\tfontFamilies,\n\tclassName,\n\t...props\n} ) {\n\tconst [ blockLevelFontFamilies ] = useSettings( 'typography.fontFamilies' );\n\tif ( ! fontFamilies ) {\n\t\tfontFamilies = blockLevelFontFamilies;\n\t}\n\n\tif ( ! fontFamilies || fontFamilies.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst options = [\n\t\t{\n\t\t\tkey: '',\n\t\t\tname: __( 'Default' ),\n\t\t},\n\t\t...fontFamilies.map( ( { fontFamily, name } ) => ( {\n\t\t\tkey: fontFamily,\n\t\t\tname: name || fontFamily,\n\t\t\tstyle: { fontFamily },\n\t\t} ) ),\n\t];\n\n\tif ( ! __nextHasNoMarginBottom ) {\n\t\tdeprecated(\n\t\t\t'Bottom margin styles for wp.blockEditor.FontFamilyControl',\n\t\t\t{\n\t\t\t\tsince: '6.7',\n\t\t\t\tversion: '7.0',\n\t\t\t\thint: 'Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version',\n\t\t\t}\n\t\t);\n\t}\n\n\tif (\n\t\t! __next40pxDefaultSize &&\n\t\t( props.size === undefined || props.size === 'default' )\n\t) {\n\t\tdeprecated(\n\t\t\t`36px default size for wp.blockEditor.__experimentalFontFamilyControl`,\n\t\t\t{\n\t\t\t\tsince: '6.8',\n\t\t\t\tversion: '7.1',\n\t\t\t\thint: 'Set the `__next40pxDefaultSize` prop to true to start opting into the new default size, which will become the default in a future version.',\n\t\t\t}\n\t\t);\n\t}\n\n\tconst selectedValue =\n\t\toptions.find( ( option ) => option.key === value ) ?? '';\n\treturn (\n\t\t<CustomSelectControl\n\t\t\t__next40pxDefaultSize={ __next40pxDefaultSize }\n\t\t\t__shouldNotWarnDeprecated36pxSize\n\t\t\tlabel={ __( 'Font' ) }\n\t\t\tvalue={ selectedValue }\n\t\t\tonChange={ ( { selectedItem } ) => onChange( selectedItem.key ) }\n\t\t\toptions={ options }\n\t\t\tclassName={ clsx( 'block-editor-font-family-control', className, {\n\t\t\t\t'is-next-has-no-margin-bottom': __nextHasNoMarginBottom,\n\t\t\t} ) }\n\t\t\t{ ...props }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { CustomSelectControl } from '@wordpress/components';\nimport deprecated from '@wordpress/deprecated';\nimport { useMemo } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { getFontStylesAndWeights } from '../../utils/get-font-styles-and-weights';\n\n/**\n * Adjusts font appearance field label in case either font styles or weights\n * are disabled.\n *\n * @param {boolean} hasFontStyles  Whether font styles are enabled and present.\n * @param {boolean} hasFontWeights Whether font weights are enabled and present.\n * @return {string} A label representing what font appearance is being edited.\n */\nconst getFontAppearanceLabel = ( hasFontStyles, hasFontWeights ) => {\n\tif ( ! hasFontStyles ) {\n\t\treturn __( 'Font weight' );\n\t}\n\n\tif ( ! hasFontWeights ) {\n\t\treturn __( 'Font style' );\n\t}\n\n\treturn __( 'Appearance' );\n};\n\n/**\n * Control to display font style and weight options of the active font.\n *\n * @param {Object} props Component props.\n *\n * @return {Element} Font appearance control.\n */\nexport default function FontAppearanceControl( props ) {\n\tconst {\n\t\t/** Start opting into the larger default height that will become the default size in a future version. */\n\t\t__next40pxDefaultSize = false,\n\t\tonChange,\n\t\thasFontStyles = true,\n\t\thasFontWeights = true,\n\t\tfontFamilyFaces,\n\t\tvalue: { fontStyle, fontWeight },\n\t\t...otherProps\n\t} = props;\n\tconst hasStylesOrWeights = hasFontStyles || hasFontWeights;\n\tconst label = getFontAppearanceLabel( hasFontStyles, hasFontWeights );\n\tconst defaultOption = {\n\t\tkey: 'default',\n\t\tname: __( 'Default' ),\n\t\tstyle: { fontStyle: undefined, fontWeight: undefined },\n\t};\n\tconst { fontStyles, fontWeights, combinedStyleAndWeightOptions } =\n\t\tgetFontStylesAndWeights( fontFamilyFaces );\n\n\t// Generates select options for combined font styles and weights.\n\tconst combineOptions = () => {\n\t\tconst combinedOptions = [ defaultOption ];\n\t\tif ( combinedStyleAndWeightOptions ) {\n\t\t\tcombinedOptions.push( ...combinedStyleAndWeightOptions );\n\t\t}\n\t\treturn combinedOptions;\n\t};\n\n\t// Generates select options for font styles only.\n\tconst styleOptions = () => {\n\t\tconst combinedOptions = [ defaultOption ];\n\t\tfontStyles.forEach( ( { name, value } ) => {\n\t\t\tcombinedOptions.push( {\n\t\t\t\tkey: value,\n\t\t\t\tname,\n\t\t\t\tstyle: { fontStyle: value, fontWeight: undefined },\n\t\t\t} );\n\t\t} );\n\t\treturn combinedOptions;\n\t};\n\n\t// Generates select options for font weights only.\n\tconst weightOptions = () => {\n\t\tconst combinedOptions = [ defaultOption ];\n\t\tfontWeights.forEach( ( { name, value } ) => {\n\t\t\tcombinedOptions.push( {\n\t\t\t\tkey: value,\n\t\t\t\tname,\n\t\t\t\tstyle: { fontStyle: undefined, fontWeight: value },\n\t\t\t} );\n\t\t} );\n\t\treturn combinedOptions;\n\t};\n\n\t// Map font styles and weights to select options.\n\tconst selectOptions = useMemo( () => {\n\t\t// Display combined available font style and weight options.\n\t\tif ( hasFontStyles && hasFontWeights ) {\n\t\t\treturn combineOptions();\n\t\t}\n\n\t\t// Display only font style options or font weight options.\n\t\treturn hasFontStyles ? styleOptions() : weightOptions();\n\t}, [\n\t\tprops.options,\n\t\tfontStyles,\n\t\tfontWeights,\n\t\tcombinedStyleAndWeightOptions,\n\t] );\n\n\t// Find current selection by comparing font style & weight against options,\n\t// and fall back to the Default option if there is no matching option.\n\tconst currentSelection =\n\t\tselectOptions.find(\n\t\t\t( option ) =>\n\t\t\t\toption.style.fontStyle === fontStyle &&\n\t\t\t\toption.style.fontWeight === fontWeight\n\t\t) || selectOptions[ 0 ];\n\n\t// Adjusts screen reader description based on styles or weights.\n\tconst getDescribedBy = () => {\n\t\tif ( ! currentSelection ) {\n\t\t\treturn __( 'No selected font appearance' );\n\t\t}\n\n\t\tif ( ! hasFontStyles ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: %s: Currently selected font weight.\n\t\t\t\t__( 'Currently selected font weight: %s' ),\n\t\t\t\tcurrentSelection.name\n\t\t\t);\n\t\t}\n\n\t\tif ( ! hasFontWeights ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: %s: Currently selected font style.\n\t\t\t\t__( 'Currently selected font style: %s' ),\n\t\t\t\tcurrentSelection.name\n\t\t\t);\n\t\t}\n\n\t\treturn sprintf(\n\t\t\t// translators: %s: Currently selected font appearance.\n\t\t\t__( 'Currently selected font appearance: %s' ),\n\t\t\tcurrentSelection.name\n\t\t);\n\t};\n\n\tif (\n\t\t! __next40pxDefaultSize &&\n\t\t( otherProps.size === undefined || otherProps.size === 'default' )\n\t) {\n\t\tdeprecated(\n\t\t\t`36px default size for wp.blockEditor.__experimentalFontAppearanceControl`,\n\t\t\t{\n\t\t\t\tsince: '6.8',\n\t\t\t\tversion: '7.1',\n\t\t\t\thint: 'Set the `__next40pxDefaultSize` prop to true to start opting into the new default size, which will become the default in a future version.',\n\t\t\t}\n\t\t);\n\t}\n\n\treturn (\n\t\thasStylesOrWeights && (\n\t\t\t<CustomSelectControl\n\t\t\t\t{ ...otherProps }\n\t\t\t\tclassName=\"components-font-appearance-control\"\n\t\t\t\t__next40pxDefaultSize={ __next40pxDefaultSize }\n\t\t\t\t__shouldNotWarnDeprecated36pxSize\n\t\t\t\tlabel={ label }\n\t\t\t\tdescribedBy={ getDescribedBy() }\n\t\t\t\toptions={ selectOptions }\n\t\t\t\tvalue={ currentSelection }\n\t\t\t\tonChange={ ( { selectedItem } ) =>\n\t\t\t\t\tonChange( selectedItem.style )\n\t\t\t\t}\n\t\t\t/>\n\t\t)\n\t);\n}\n","export const BASE_DEFAULT_VALUE = 1.5;\nexport const STEP = 0.01;\n/**\n * A spin factor of 10 allows the spin controls to increment/decrement by 0.1.\n * e.g. A line-height value of 1.55 will increment to 1.65.\n */\nexport const SPIN_FACTOR = 10;\n/**\n * There are varying value types within LineHeightControl:\n *\n * {undefined} Initial value. No changes from the user.\n * {string} Input value. Value consumed/outputted by the input. Empty would be ''.\n * {number} Block attribute type. Input value needs to be converted for attribute setting.\n *\n * Note: If the value is undefined, the input requires it to be an empty string ('')\n * in order to be considered \"controlled\" by props (rather than internal state).\n */\nexport const RESET_VALUE = '';\n\n/**\n * Determines if the lineHeight attribute has been properly defined.\n *\n * @param {any} lineHeight The value to check.\n *\n * @return {boolean} Whether the lineHeight attribute is valid.\n */\nexport function isLineHeightDefined( lineHeight ) {\n\treturn lineHeight !== undefined && lineHeight !== RESET_VALUE;\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalNumberControl as NumberControl } from '@wordpress/components';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport {\n\tBASE_DEFAULT_VALUE,\n\tRESET_VALUE,\n\tSTEP,\n\tSPIN_FACTOR,\n\tisLineHeightDefined,\n} from './utils';\n\nconst LineHeightControl = ( {\n\t/** Start opting into the larger default height that will become the default size in a future version. */\n\t__next40pxDefaultSize = false,\n\tvalue: lineHeight,\n\tonChange,\n\t__unstableInputWidth = '60px',\n\t...otherProps\n} ) => {\n\tconst isDefined = isLineHeightDefined( lineHeight );\n\n\tconst adjustNextValue = ( nextValue, wasTypedOrPasted ) => {\n\t\t// Set the next value without modification if lineHeight has been defined.\n\t\tif ( isDefined ) {\n\t\t\treturn nextValue;\n\t\t}\n\n\t\t/**\n\t\t * The following logic handles the initial spin up/down action\n\t\t * (from an undefined value state) so that the next values are better suited for\n\t\t * line-height rendering. For example, the first spin up should immediately\n\t\t * go to 1.6, rather than the normally expected 0.1.\n\t\t *\n\t\t * Spin up/down actions can be triggered by keydowns of the up/down arrow keys,\n\t\t * dragging the input or by clicking the spin buttons.\n\t\t */\n\t\tconst spin = STEP * SPIN_FACTOR;\n\t\tswitch ( `${ nextValue }` ) {\n\t\t\tcase `${ spin }`:\n\t\t\t\t// Increment by spin value.\n\t\t\t\treturn BASE_DEFAULT_VALUE + spin;\n\t\t\tcase '0': {\n\t\t\t\t// This means the user explicitly input '0', rather than using the\n\t\t\t\t// spin down action from an undefined value state.\n\t\t\t\tif ( wasTypedOrPasted ) {\n\t\t\t\t\treturn nextValue;\n\t\t\t\t}\n\t\t\t\t// Decrement by spin value.\n\t\t\t\treturn BASE_DEFAULT_VALUE - spin;\n\t\t\t}\n\t\t\tcase '':\n\t\t\t\treturn BASE_DEFAULT_VALUE;\n\t\t\tdefault:\n\t\t\t\treturn nextValue;\n\t\t}\n\t};\n\n\tconst stateReducer = ( state, action ) => {\n\t\t// Be careful when changing this  cross-browser behavior of the\n\t\t// `inputType` field in `input` events are inconsistent.\n\t\t// For example, Firefox emits an input event with inputType=\"insertReplacementText\"\n\t\t// on spin button clicks, while other browsers do not even emit an input event.\n\t\tconst wasTypedOrPasted = [ 'insertText', 'insertFromPaste' ].includes(\n\t\t\taction.payload.event.nativeEvent?.inputType\n\t\t);\n\t\tconst value = adjustNextValue( state.value, wasTypedOrPasted );\n\t\treturn { ...state, value };\n\t};\n\n\tconst value = isDefined ? lineHeight : RESET_VALUE;\n\n\tconst handleOnChange = ( nextValue, { event } ) => {\n\t\tif ( nextValue === '' ) {\n\t\t\tonChange();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( event.type === 'click' ) {\n\t\t\tonChange( adjustNextValue( `${ nextValue }`, false ) );\n\t\t\treturn;\n\t\t}\n\n\t\tonChange( `${ nextValue }` );\n\t};\n\n\tif (\n\t\t! __next40pxDefaultSize &&\n\t\t( otherProps.size === undefined || otherProps.size === 'default' )\n\t) {\n\t\tdeprecated( `36px default size for wp.blockEditor.LineHeightControl`, {\n\t\t\tsince: '6.8',\n\t\t\tversion: '7.1',\n\t\t\thint: 'Set the `__next40pxDefaultSize` prop to true to start opting into the new default size, which will become the default in a future version.',\n\t\t} );\n\t}\n\n\treturn (\n\t\t<div className=\"block-editor-line-height-control\">\n\t\t\t<NumberControl\n\t\t\t\t{ ...otherProps }\n\t\t\t\t__shouldNotWarnDeprecated36pxSize\n\t\t\t\t__next40pxDefaultSize={ __next40pxDefaultSize }\n\t\t\t\t__unstableInputWidth={ __unstableInputWidth }\n\t\t\t\t__unstableStateReducer={ stateReducer }\n\t\t\t\tonChange={ handleOnChange }\n\t\t\t\tlabel={ __( 'Line height' ) }\n\t\t\t\tplaceholder={ BASE_DEFAULT_VALUE }\n\t\t\t\tstep={ STEP }\n\t\t\t\tspinFactor={ SPIN_FACTOR }\n\t\t\t\tvalue={ value }\n\t\t\t\tmin={ 0 }\n\t\t\t\tspinControls=\"custom\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/line-height-control/README.md\n */\nexport default LineHeightControl;\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalUseCustomUnits as useCustomUnits,\n} from '@wordpress/components';\nimport deprecated from '@wordpress/deprecated';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../../components/use-settings';\n\n/**\n * Control for letter-spacing.\n *\n * @param {Object}                  props                       Component props.\n * @param {boolean}                 props.__next40pxDefaultSize Start opting into the larger default height that will become the default size in a future version.\n * @param {string}                  props.value                 Currently selected letter-spacing.\n * @param {Function}                props.onChange              Handles change in letter-spacing selection.\n * @param {string|number|undefined} props.__unstableInputWidth  Input width to pass through to inner UnitControl. Should be a valid CSS value.\n *\n * @return {Element} Letter-spacing control.\n */\nexport default function LetterSpacingControl( {\n\t__next40pxDefaultSize = false,\n\tvalue,\n\tonChange,\n\t__unstableInputWidth = '60px',\n\t...otherProps\n} ) {\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: availableUnits || [ 'px', 'em', 'rem' ],\n\t\tdefaultValues: { px: 2, em: 0.2, rem: 0.2 },\n\t} );\n\n\tif (\n\t\t! __next40pxDefaultSize &&\n\t\t( otherProps.size === undefined || otherProps.size === 'default' )\n\t) {\n\t\tdeprecated(\n\t\t\t`36px default size for wp.blockEditor.__experimentalLetterSpacingControl`,\n\t\t\t{\n\t\t\t\tsince: '6.8',\n\t\t\t\tversion: '7.1',\n\t\t\t\thint: 'Set the `__next40pxDefaultSize` prop to true to start opting into the new default size, which will become the default in a future version.',\n\t\t\t}\n\t\t);\n\t}\n\n\treturn (\n\t\t<UnitControl\n\t\t\t__next40pxDefaultSize={ __next40pxDefaultSize }\n\t\t\t__shouldNotWarnDeprecated36pxSize\n\t\t\t{ ...otherProps }\n\t\t\tlabel={ __( 'Letter spacing' ) }\n\t\t\tvalue={ value }\n\t\t\t__unstableInputWidth={ __unstableInputWidth }\n\t\t\tunits={ units }\n\t\t\tonChange={ onChange }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst alignLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M13 5.5H4V4h9v1.5Zm7 7H4V11h16v1.5Zm-7 7H4V18h9v1.5Z\" />\n\t</SVG>\n);\n\nexport default alignLeft;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst alignCenter = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7.5 5.5h9V4h-9v1.5Zm-3.5 7h16V11H4v1.5Zm3.5 7h9V18h-9v1.5Z\" />\n\t</SVG>\n);\n\nexport default alignCenter;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst alignRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M11.111 5.5H20V4h-8.889v1.5ZM4 12.5h16V11H4v1.5Zm7.111 7H20V18h-8.889v1.5Z\" />\n\t</SVG>\n);\n\nexport default alignRight;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst alignJustify = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4 12.8h16v-1.5H4v1.5zm0 7h12.4v-1.5H4v1.5zM4 4.3v1.5h16V4.3H4z\" />\n\t</SVG>\n);\n\nexport default alignJustify;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\talignLeft,\n\talignCenter,\n\talignRight,\n\talignJustify,\n} from '@wordpress/icons';\nimport { useMemo } from '@wordpress/element';\nimport {\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n} from '@wordpress/components';\n\nconst TEXT_ALIGNMENT_OPTIONS = [\n\t{\n\t\tlabel: __( 'Align text left' ),\n\t\tvalue: 'left',\n\t\ticon: alignLeft,\n\t},\n\t{\n\t\tlabel: __( 'Align text center' ),\n\t\tvalue: 'center',\n\t\ticon: alignCenter,\n\t},\n\t{\n\t\tlabel: __( 'Align text right' ),\n\t\tvalue: 'right',\n\t\ticon: alignRight,\n\t},\n\t{\n\t\tlabel: __( 'Justify text' ),\n\t\tvalue: 'justify',\n\t\ticon: alignJustify,\n\t},\n];\n\nconst DEFAULT_OPTIONS = [ 'left', 'center', 'right' ];\n\n/**\n * Control to facilitate text alignment selections.\n *\n * @param {Object}   props           Component props.\n * @param {string}   props.className Class name to add to the control.\n * @param {string}   props.value     Currently selected text alignment.\n * @param {Function} props.onChange  Handles change in text alignment selection.\n * @param {string[]} props.options   Array of text alignment options to display.\n *\n * @return {Element} Text alignment control.\n */\nexport default function TextAlignmentControl( {\n\tclassName,\n\tvalue,\n\tonChange,\n\toptions = DEFAULT_OPTIONS,\n} ) {\n\tconst validOptions = useMemo(\n\t\t() =>\n\t\t\tTEXT_ALIGNMENT_OPTIONS.filter( ( option ) =>\n\t\t\t\toptions.includes( option.value )\n\t\t\t),\n\t\t[ options ]\n\t);\n\n\tif ( ! validOptions.length ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\tisDeselectable\n\t\t\t__nextHasNoMarginBottom\n\t\t\t__next40pxDefaultSize\n\t\t\tlabel={ __( 'Text alignment' ) }\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-text-alignment-control',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\tvalue={ value }\n\t\t\tonChange={ ( newValue ) => {\n\t\t\t\tonChange( newValue === value ? undefined : newValue );\n\t\t\t} }\n\t\t>\n\t\t\t{ validOptions.map( ( option ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\t\t\tkey={ option.value }\n\t\t\t\t\t\tvalue={ option.value }\n\t\t\t\t\t\ticon={ option.icon }\n\t\t\t\t\t\tlabel={ option.label }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ToggleGroupControl>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatUppercase = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M6.1 6.8L2.1 18h1.6l1.1-3h4.3l1.1 3h1.6l-4-11.2H6.1zm-.8 6.8L7 8.9l1.7 4.7H5.3zm15.1-.7c-.4-.5-.9-.8-1.6-1 .4-.2.7-.5.8-.9.2-.4.3-.9.3-1.4 0-.9-.3-1.6-.8-2-.6-.5-1.3-.7-2.4-.7h-3.5V18h4.2c1.1 0 2-.3 2.6-.8.6-.6 1-1.4 1-2.4-.1-.8-.3-1.4-.6-1.9zm-5.7-4.7h1.8c.6 0 1.1.1 1.4.4.3.2.5.7.5 1.3 0 .6-.2 1.1-.5 1.3-.3.2-.8.4-1.4.4h-1.8V8.2zm4 8c-.4.3-.9.5-1.5.5h-2.6v-3.8h2.6c1.4 0 2 .6 2 1.9.1.6-.1 1-.5 1.4z\" />\n\t</SVG>\n);\n\nexport default formatUppercase;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatLowercase = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M11 16.8c-.1-.1-.2-.3-.3-.5v-2.6c0-.9-.1-1.7-.3-2.2-.2-.5-.5-.9-.9-1.2-.4-.2-.9-.3-1.6-.3-.5 0-1 .1-1.5.2s-.9.3-1.2.6l.2 1.2c.4-.3.7-.4 1.1-.5.3-.1.7-.2 1-.2.6 0 1 .1 1.3.4.3.2.4.7.4 1.4-1.2 0-2.3.2-3.3.7s-1.4 1.1-1.4 2.1c0 .7.2 1.2.7 1.6.4.4 1 .6 1.8.6.9 0 1.7-.4 2.4-1.2.1.3.2.5.4.7.1.2.3.3.6.4.3.1.6.1 1.1.1h.1l.2-1.2h-.1c-.4.1-.6 0-.7-.1zM9.2 16c-.2.3-.5.6-.9.8-.3.1-.7.2-1.1.2-.4 0-.7-.1-.9-.3-.2-.2-.3-.5-.3-.9 0-.6.2-1 .7-1.3.5-.3 1.3-.4 2.5-.5v2zm10.6-3.9c-.3-.6-.7-1.1-1.2-1.5-.6-.4-1.2-.6-1.9-.6-.5 0-.9.1-1.4.3-.4.2-.8.5-1.1.8V6h-1.4v12h1.3l.2-1c.2.4.6.6 1 .8.4.2.9.3 1.4.3.7 0 1.2-.2 1.8-.5.5-.4 1-.9 1.3-1.5.3-.6.5-1.3.5-2.1-.1-.6-.2-1.3-.5-1.9zm-1.7 4c-.4.5-.9.8-1.6.8s-1.2-.2-1.7-.7c-.4-.5-.7-1.2-.7-2.1 0-.9.2-1.6.7-2.1.4-.5 1-.7 1.7-.7s1.2.3 1.6.8c.4.5.6 1.2.6 2s-.2 1.4-.6 2z\" />\n\t</SVG>\n);\n\nexport default formatLowercase;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatCapitalize = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7.1 6.8L3.1 18h1.6l1.1-3h4.3l1.1 3h1.6l-4-11.2H7.1zm-.8 6.8L8 8.9l1.7 4.7H6.3zm14.5-1.5c-.3-.6-.7-1.1-1.2-1.5-.6-.4-1.2-.6-1.9-.6-.5 0-.9.1-1.4.3-.4.2-.8.5-1.1.8V6h-1.4v12h1.3l.2-1c.2.4.6.6 1 .8.4.2.9.3 1.4.3.7 0 1.2-.2 1.8-.5.5-.4 1-.9 1.3-1.5.3-.6.5-1.3.5-2.1-.1-.6-.2-1.3-.5-1.9zm-1.7 4c-.4.5-.9.8-1.6.8s-1.2-.2-1.7-.7c-.4-.5-.7-1.2-.7-2.1 0-.9.2-1.6.7-2.1.4-.5 1-.7 1.7-.7s1.2.3 1.6.8c.4.5.6 1.2.6 2 .1.8-.2 1.4-.6 2z\" />\n\t</SVG>\n);\n\nexport default formatCapitalize;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\treset,\n\tformatCapitalize,\n\tformatLowercase,\n\tformatUppercase,\n} from '@wordpress/icons';\nimport {\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n} from '@wordpress/components';\n\nconst TEXT_TRANSFORMS = [\n\t{\n\t\tlabel: __( 'None' ),\n\t\tvalue: 'none',\n\t\ticon: reset,\n\t},\n\t{\n\t\tlabel: __( 'Uppercase' ),\n\t\tvalue: 'uppercase',\n\t\ticon: formatUppercase,\n\t},\n\t{\n\t\tlabel: __( 'Lowercase' ),\n\t\tvalue: 'lowercase',\n\t\ticon: formatLowercase,\n\t},\n\t{\n\t\tlabel: __( 'Capitalize' ),\n\t\tvalue: 'capitalize',\n\t\ticon: formatCapitalize,\n\t},\n];\n\n/**\n * Control to facilitate text transform selections.\n *\n * @param {Object}   props           Component props.\n * @param {string}   props.className Class name to add to the control.\n * @param {string}   props.value     Currently selected text transform.\n * @param {Function} props.onChange  Handles change in text transform selection.\n *\n * @return {Element} Text transform control.\n */\nexport default function TextTransformControl( { className, value, onChange } ) {\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\tisDeselectable\n\t\t\t__nextHasNoMarginBottom\n\t\t\t__next40pxDefaultSize\n\t\t\tlabel={ __( 'Letter case' ) }\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-text-transform-control',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\tvalue={ value }\n\t\t\tonChange={ ( newValue ) => {\n\t\t\t\tonChange( newValue === value ? undefined : newValue );\n\t\t\t} }\n\t\t>\n\t\t\t{ TEXT_TRANSFORMS.map( ( option ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\t\t\tkey={ option.value }\n\t\t\t\t\t\tvalue={ option.value }\n\t\t\t\t\t\ticon={ option.icon }\n\t\t\t\t\t\tlabel={ option.label }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ToggleGroupControl>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatUnderline = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7 18v1h10v-1H7zm5-2c1.5 0 2.6-.4 3.4-1.2.8-.8 1.1-2 1.1-3.5V5H15v5.8c0 1.2-.2 2.1-.6 2.8-.4.7-1.2 1-2.4 1s-2-.3-2.4-1c-.4-.7-.6-1.6-.6-2.8V5H7.5v6.2c0 1.5.4 2.7 1.1 3.5.8.9 1.9 1.3 3.4 1.3z\" />\n\t</SVG>\n);\n\nexport default formatUnderline;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatStrikethrough = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9.1 9v-.5c0-.6.2-1.1.7-1.4.5-.3 1.2-.5 2-.5.7 0 1.4.1 2.1.3.7.2 1.4.5 2.1.9l.2-1.9c-.6-.3-1.2-.5-1.9-.7-.8-.1-1.6-.2-2.4-.2-1.5 0-2.7.3-3.6 1-.8.7-1.2 1.5-1.2 2.6V9h2zM20 12H4v1h8.3c.3.1.6.2.8.3.5.2.9.5 1.1.8.3.3.4.7.4 1.2 0 .7-.2 1.1-.8 1.5-.5.3-1.2.5-2.1.5-.8 0-1.6-.1-2.4-.3-.8-.2-1.5-.5-2.2-.8L7 18.1c.5.2 1.2.4 2 .6.8.2 1.6.3 2.4.3 1.7 0 3-.3 3.9-1 .9-.7 1.3-1.6 1.3-2.8 0-.9-.2-1.7-.7-2.2H20v-1z\" />\n\t</SVG>\n);\n\nexport default formatStrikethrough;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { reset, formatStrikethrough, formatUnderline } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\nimport {\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n} from '@wordpress/components';\n\nconst TEXT_DECORATIONS = [\n\t{\n\t\tlabel: __( 'None' ),\n\t\tvalue: 'none',\n\t\ticon: reset,\n\t},\n\t{\n\t\tlabel: __( 'Underline' ),\n\t\tvalue: 'underline',\n\t\ticon: formatUnderline,\n\t},\n\t{\n\t\tlabel: __( 'Strikethrough' ),\n\t\tvalue: 'line-through',\n\t\ticon: formatStrikethrough,\n\t},\n];\n\n/**\n * Control to facilitate text decoration selections.\n *\n * @param {Object}   props           Component props.\n * @param {string}   props.value     Currently selected text decoration.\n * @param {Function} props.onChange  Handles change in text decoration selection.\n * @param {string}   props.className Additional class name to apply.\n *\n * @return {Element} Text decoration control.\n */\nexport default function TextDecorationControl( {\n\tvalue,\n\tonChange,\n\tclassName,\n} ) {\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\tisDeselectable\n\t\t\t__nextHasNoMarginBottom\n\t\t\t__next40pxDefaultSize\n\t\t\tlabel={ __( 'Decoration' ) }\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-text-decoration-control',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\tvalue={ value }\n\t\t\tonChange={ ( newValue ) => {\n\t\t\t\tonChange( newValue === value ? undefined : newValue );\n\t\t\t} }\n\t\t>\n\t\t\t{ TEXT_DECORATIONS.map( ( option ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\t\t\tkey={ option.value }\n\t\t\t\t\t\tvalue={ option.value }\n\t\t\t\t\t\ticon={ option.icon }\n\t\t\t\t\t\tlabel={ option.label }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ToggleGroupControl>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst textHorizontal = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M8.2 14.4h3.9L13 17h1.7L11 6.5H9.3L5.6 17h1.7l.9-2.6zm2-5.5 1.4 4H8.8l1.4-4zm7.4 7.5-1.3.8.8 1.4H5.5V20h14.3l-2.2-3.6z\" />\n\t</SVG>\n);\n\nexport default textHorizontal;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst textVertical = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7 5.6v1.7l2.6.9v3.9L7 13v1.7L17.5 11V9.3L7 5.6zm4.2 6V8.8l4 1.4-4 1.4zm-5.7 5.6V5.5H4v14.3l3.6-2.2-.8-1.3-1.3.9z\" />\n\t</SVG>\n);\n\nexport default textVertical;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __, isRTL } from '@wordpress/i18n';\nimport { textHorizontal, textVertical } from '@wordpress/icons';\nimport {\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n} from '@wordpress/components';\n\nconst WRITING_MODES = [\n\t{\n\t\tlabel: __( 'Horizontal' ),\n\t\tvalue: 'horizontal-tb',\n\t\ticon: textHorizontal,\n\t},\n\t{\n\t\tlabel: __( 'Vertical' ),\n\t\tvalue: isRTL() ? 'vertical-lr' : 'vertical-rl',\n\t\ticon: textVertical,\n\t},\n];\n\n/**\n * Control to facilitate writing mode selections.\n *\n * @param {Object}   props           Component props.\n * @param {string}   props.className Class name to add to the control.\n * @param {string}   props.value     Currently selected writing mode.\n * @param {Function} props.onChange  Handles change in the writing mode selection.\n *\n * @return {Element} Writing Mode control.\n */\nexport default function WritingModeControl( { className, value, onChange } ) {\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\tisDeselectable\n\t\t\t__nextHasNoMarginBottom\n\t\t\t__next40pxDefaultSize\n\t\t\tlabel={ __( 'Orientation' ) }\n\t\t\tclassName={ clsx( 'block-editor-writing-mode-control', className ) }\n\t\t\tvalue={ value }\n\t\t\tonChange={ ( newValue ) => {\n\t\t\t\tonChange( newValue === value ? undefined : newValue );\n\t\t\t} }\n\t\t>\n\t\t\t{ WRITING_MODES.map( ( option ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\t\t\tkey={ option.value }\n\t\t\t\t\t\tvalue={ option.value }\n\t\t\t\t\t\ticon={ option.icon }\n\t\t\t\t\t\tlabel={ option.label }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ToggleGroupControl>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tFontSizePicker,\n\t__experimentalNumberControl as NumberControl,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useCallback, useMemo, useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport FontFamilyControl from '../font-family';\nimport FontAppearanceControl from '../font-appearance-control';\nimport LineHeightControl from '../line-height-control';\nimport LetterSpacingControl from '../letter-spacing-control';\nimport TextAlignmentControl from '../text-alignment-control';\nimport TextTransformControl from '../text-transform-control';\nimport TextDecorationControl from '../text-decoration-control';\nimport WritingModeControl from '../writing-mode-control';\nimport { getValueFromVariable, useToolsPanelDropdownMenuProps } from './utils';\nimport { setImmutably } from '../../utils/object';\nimport {\n\tgetMergedFontFamiliesAndFontFamilyFaces,\n\tfindNearestStyleAndWeight,\n} from './typography-utils';\n\nconst MIN_TEXT_COLUMNS = 1;\nconst MAX_TEXT_COLUMNS = 6;\n\nexport function useHasTypographyPanel( settings ) {\n\tconst hasFontFamily = useHasFontFamilyControl( settings );\n\tconst hasLineHeight = useHasLineHeightControl( settings );\n\tconst hasFontAppearance = useHasAppearanceControl( settings );\n\tconst hasLetterSpacing = useHasLetterSpacingControl( settings );\n\tconst hasTextAlign = useHasTextAlignmentControl( settings );\n\tconst hasTextTransform = useHasTextTransformControl( settings );\n\tconst hasTextDecoration = useHasTextDecorationControl( settings );\n\tconst hasWritingMode = useHasWritingModeControl( settings );\n\tconst hasTextColumns = useHasTextColumnsControl( settings );\n\tconst hasFontSize = useHasFontSizeControl( settings );\n\n\treturn (\n\t\thasFontFamily ||\n\t\thasLineHeight ||\n\t\thasFontAppearance ||\n\t\thasLetterSpacing ||\n\t\thasTextAlign ||\n\t\thasTextTransform ||\n\t\thasFontSize ||\n\t\thasTextDecoration ||\n\t\thasWritingMode ||\n\t\thasTextColumns\n\t);\n}\n\nfunction useHasFontSizeControl( settings ) {\n\treturn (\n\t\t( settings?.typography?.defaultFontSizes !== false &&\n\t\t\tsettings?.typography?.fontSizes?.default?.length ) ||\n\t\tsettings?.typography?.fontSizes?.theme?.length ||\n\t\tsettings?.typography?.fontSizes?.custom?.length ||\n\t\tsettings?.typography?.customFontSize\n\t);\n}\n\nfunction useHasFontFamilyControl( settings ) {\n\treturn [ 'default', 'theme', 'custom' ].some(\n\t\t( key ) => settings?.typography?.fontFamilies?.[ key ]?.length\n\t);\n}\n\nfunction useHasLineHeightControl( settings ) {\n\treturn settings?.typography?.lineHeight;\n}\n\nfunction useHasAppearanceControl( settings ) {\n\treturn settings?.typography?.fontStyle || settings?.typography?.fontWeight;\n}\n\nfunction useAppearanceControlLabel( settings ) {\n\tif ( ! settings?.typography?.fontStyle ) {\n\t\treturn __( 'Font weight' );\n\t}\n\tif ( ! settings?.typography?.fontWeight ) {\n\t\treturn __( 'Font style' );\n\t}\n\treturn __( 'Appearance' );\n}\n\nfunction useHasLetterSpacingControl( settings ) {\n\treturn settings?.typography?.letterSpacing;\n}\n\nfunction useHasTextTransformControl( settings ) {\n\treturn settings?.typography?.textTransform;\n}\n\nfunction useHasTextAlignmentControl( settings ) {\n\treturn settings?.typography?.textAlign;\n}\n\nfunction useHasTextDecorationControl( settings ) {\n\treturn settings?.typography?.textDecoration;\n}\n\nfunction useHasWritingModeControl( settings ) {\n\treturn settings?.typography?.writingMode;\n}\n\nfunction useHasTextColumnsControl( settings ) {\n\treturn settings?.typography?.textColumns;\n}\n\n/**\n * Concatenate all the font sizes into a single list for the font size picker.\n *\n * @param {Object} settings The global styles settings.\n *\n * @return {Array} The merged font sizes.\n */\nfunction getMergedFontSizes( settings ) {\n\tconst fontSizes = settings?.typography?.fontSizes;\n\tconst defaultFontSizesEnabled = !! settings?.typography?.defaultFontSizes;\n\treturn [\n\t\t...( fontSizes?.custom ?? [] ),\n\t\t...( fontSizes?.theme ?? [] ),\n\t\t...( defaultFontSizesEnabled ? fontSizes?.default ?? [] : [] ),\n\t];\n}\n\nfunction TypographyToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Typography' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tfontFamily: true,\n\tfontSize: true,\n\tfontAppearance: true,\n\tlineHeight: true,\n\tletterSpacing: true,\n\ttextAlign: true,\n\ttextTransform: true,\n\ttextDecoration: true,\n\twritingMode: true,\n\ttextColumns: true,\n};\n\nexport default function TypographyPanel( {\n\tas: Wrapper = TypographyToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n} ) {\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\n\t// Font Family\n\tconst hasFontFamilyEnabled = useHasFontFamilyControl( settings );\n\tconst fontFamily = decodeValue( inheritedValue?.typography?.fontFamily );\n\tconst { fontFamilies, fontFamilyFaces } = useMemo( () => {\n\t\treturn getMergedFontFamiliesAndFontFamilyFaces( settings, fontFamily );\n\t}, [ settings, fontFamily ] );\n\n\tconst setFontFamily = ( newValue ) => {\n\t\tconst slug = fontFamilies?.find(\n\t\t\t( { fontFamily: f } ) => f === newValue\n\t\t)?.slug;\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'fontFamily' ],\n\t\t\t\tslug\n\t\t\t\t\t? `var:preset|font-family|${ slug }`\n\t\t\t\t\t: newValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasFontFamily = () => !! value?.typography?.fontFamily;\n\tconst resetFontFamily = () => setFontFamily( undefined );\n\n\t// Font Size\n\tconst hasFontSizeEnabled = useHasFontSizeControl( settings );\n\tconst disableCustomFontSizes = ! settings?.typography?.customFontSize;\n\tconst mergedFontSizes = getMergedFontSizes( settings );\n\n\tconst fontSize = decodeValue( inheritedValue?.typography?.fontSize );\n\tconst setFontSize = ( newValue, metadata ) => {\n\t\tconst actualValue = !! metadata?.slug\n\t\t\t? `var:preset|font-size|${ metadata?.slug }`\n\t\t\t: newValue;\n\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'fontSize' ],\n\t\t\t\tactualValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasFontSize = () => !! value?.typography?.fontSize;\n\tconst resetFontSize = () => setFontSize( undefined );\n\n\t// Appearance\n\tconst hasAppearanceControl = useHasAppearanceControl( settings );\n\tconst appearanceControlLabel = useAppearanceControlLabel( settings );\n\tconst hasFontStyles = settings?.typography?.fontStyle;\n\tconst hasFontWeights = settings?.typography?.fontWeight;\n\tconst fontStyle = decodeValue( inheritedValue?.typography?.fontStyle );\n\tconst fontWeight = decodeValue( inheritedValue?.typography?.fontWeight );\n\tconst { nearestFontStyle, nearestFontWeight } = findNearestStyleAndWeight(\n\t\tfontFamilyFaces,\n\t\tfontStyle,\n\t\tfontWeight\n\t);\n\tconst setFontAppearance = useCallback(\n\t\t( { fontStyle: newFontStyle, fontWeight: newFontWeight } ) => {\n\t\t\t// Only update the font style and weight if they have changed.\n\t\t\tif ( newFontStyle !== fontStyle || newFontWeight !== fontWeight ) {\n\t\t\t\tonChange( {\n\t\t\t\t\t...value,\n\t\t\t\t\ttypography: {\n\t\t\t\t\t\t...value?.typography,\n\t\t\t\t\t\tfontStyle: newFontStyle || undefined,\n\t\t\t\t\t\tfontWeight: newFontWeight || undefined,\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\t\t[ fontStyle, fontWeight, onChange, value ]\n\t);\n\tconst hasFontAppearance = () =>\n\t\t!! value?.typography?.fontStyle || !! value?.typography?.fontWeight;\n\tconst resetFontAppearance = useCallback( () => {\n\t\tsetFontAppearance( {} );\n\t}, [ setFontAppearance ] );\n\n\t// Check if previous font style and weight values are available in the new font family.\n\tuseEffect( () => {\n\t\tif ( nearestFontStyle && nearestFontWeight ) {\n\t\t\tsetFontAppearance( {\n\t\t\t\tfontStyle: nearestFontStyle,\n\t\t\t\tfontWeight: nearestFontWeight,\n\t\t\t} );\n\t\t} else {\n\t\t\t// Reset font appearance if there are no available styles or weights.\n\t\t\tresetFontAppearance();\n\t\t}\n\t}, [\n\t\tnearestFontStyle,\n\t\tnearestFontWeight,\n\t\tresetFontAppearance,\n\t\tsetFontAppearance,\n\t] );\n\n\t// Line Height\n\tconst hasLineHeightEnabled = useHasLineHeightControl( settings );\n\tconst lineHeight = decodeValue( inheritedValue?.typography?.lineHeight );\n\tconst setLineHeight = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'lineHeight' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasLineHeight = () => value?.typography?.lineHeight !== undefined;\n\tconst resetLineHeight = () => setLineHeight( undefined );\n\n\t// Letter Spacing\n\tconst hasLetterSpacingControl = useHasLetterSpacingControl( settings );\n\tconst letterSpacing = decodeValue(\n\t\tinheritedValue?.typography?.letterSpacing\n\t);\n\tconst setLetterSpacing = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'letterSpacing' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasLetterSpacing = () => !! value?.typography?.letterSpacing;\n\tconst resetLetterSpacing = () => setLetterSpacing( undefined );\n\n\t// Text Columns\n\tconst hasTextColumnsControl = useHasTextColumnsControl( settings );\n\tconst textColumns = decodeValue( inheritedValue?.typography?.textColumns );\n\tconst setTextColumns = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'textColumns' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasTextColumns = () => !! value?.typography?.textColumns;\n\tconst resetTextColumns = () => setTextColumns( undefined );\n\n\t// Text Transform\n\tconst hasTextTransformControl = useHasTextTransformControl( settings );\n\tconst textTransform = decodeValue(\n\t\tinheritedValue?.typography?.textTransform\n\t);\n\tconst setTextTransform = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'textTransform' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasTextTransform = () => !! value?.typography?.textTransform;\n\tconst resetTextTransform = () => setTextTransform( undefined );\n\n\t// Text Decoration\n\tconst hasTextDecorationControl = useHasTextDecorationControl( settings );\n\tconst textDecoration = decodeValue(\n\t\tinheritedValue?.typography?.textDecoration\n\t);\n\tconst setTextDecoration = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'textDecoration' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasTextDecoration = () => !! value?.typography?.textDecoration;\n\tconst resetTextDecoration = () => setTextDecoration( undefined );\n\n\t// Text Orientation\n\tconst hasWritingModeControl = useHasWritingModeControl( settings );\n\tconst writingMode = decodeValue( inheritedValue?.typography?.writingMode );\n\tconst setWritingMode = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'writingMode' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasWritingMode = () => !! value?.typography?.writingMode;\n\tconst resetWritingMode = () => setWritingMode( undefined );\n\n\t// Text Alignment\n\tconst hasTextAlignmentControl = useHasTextAlignmentControl( settings );\n\n\tconst textAlign = decodeValue( inheritedValue?.typography?.textAlign );\n\tconst setTextAlign = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'textAlign' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasTextAlign = () => !! value?.typography?.textAlign;\n\tconst resetTextAlign = () => setTextAlign( undefined );\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\ttypography: {},\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ hasFontFamilyEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Font' ) }\n\t\t\t\t\thasValue={ hasFontFamily }\n\t\t\t\t\tonDeselect={ resetFontFamily }\n\t\t\t\t\tisShownByDefault={ defaultControls.fontFamily }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<FontFamilyControl\n\t\t\t\t\t\tfontFamilies={ fontFamilies }\n\t\t\t\t\t\tvalue={ fontFamily }\n\t\t\t\t\t\tonChange={ setFontFamily }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasFontSizeEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Size' ) }\n\t\t\t\t\thasValue={ hasFontSize }\n\t\t\t\t\tonDeselect={ resetFontSize }\n\t\t\t\t\tisShownByDefault={ defaultControls.fontSize }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<FontSizePicker\n\t\t\t\t\t\tvalue={ fontSize }\n\t\t\t\t\t\tonChange={ setFontSize }\n\t\t\t\t\t\tfontSizes={ mergedFontSizes }\n\t\t\t\t\t\tdisableCustomFontSizes={ disableCustomFontSizes }\n\t\t\t\t\t\twithReset={ false }\n\t\t\t\t\t\twithSlider\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasAppearanceControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ appearanceControlLabel }\n\t\t\t\t\thasValue={ hasFontAppearance }\n\t\t\t\t\tonDeselect={ resetFontAppearance }\n\t\t\t\t\tisShownByDefault={ defaultControls.fontAppearance }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<FontAppearanceControl\n\t\t\t\t\t\tvalue={ {\n\t\t\t\t\t\t\tfontStyle,\n\t\t\t\t\t\t\tfontWeight,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonChange={ setFontAppearance }\n\t\t\t\t\t\thasFontStyles={ hasFontStyles }\n\t\t\t\t\t\thasFontWeights={ hasFontWeights }\n\t\t\t\t\t\tfontFamilyFaces={ fontFamilyFaces }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasLineHeightEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Line height' ) }\n\t\t\t\t\thasValue={ hasLineHeight }\n\t\t\t\t\tonDeselect={ resetLineHeight }\n\t\t\t\t\tisShownByDefault={ defaultControls.lineHeight }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<LineHeightControl\n\t\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t\t\tvalue={ lineHeight }\n\t\t\t\t\t\tonChange={ setLineHeight }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasLetterSpacingControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Letter spacing' ) }\n\t\t\t\t\thasValue={ hasLetterSpacing }\n\t\t\t\t\tonDeselect={ resetLetterSpacing }\n\t\t\t\t\tisShownByDefault={ defaultControls.letterSpacing }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<LetterSpacingControl\n\t\t\t\t\t\tvalue={ letterSpacing }\n\t\t\t\t\t\tonChange={ setLetterSpacing }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasTextColumnsControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\thasValue={ hasTextColumns }\n\t\t\t\t\tonDeselect={ resetTextColumns }\n\t\t\t\t\tisShownByDefault={ defaultControls.textColumns }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<NumberControl\n\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\tmax={ MAX_TEXT_COLUMNS }\n\t\t\t\t\t\tmin={ MIN_TEXT_COLUMNS }\n\t\t\t\t\t\tonChange={ setTextColumns }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\tspinControls=\"custom\"\n\t\t\t\t\t\tvalue={ textColumns }\n\t\t\t\t\t\tinitialPosition={ 1 }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasTextDecorationControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Decoration' ) }\n\t\t\t\t\thasValue={ hasTextDecoration }\n\t\t\t\t\tonDeselect={ resetTextDecoration }\n\t\t\t\t\tisShownByDefault={ defaultControls.textDecoration }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<TextDecorationControl\n\t\t\t\t\t\tvalue={ textDecoration }\n\t\t\t\t\t\tonChange={ setTextDecoration }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasWritingModeControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Orientation' ) }\n\t\t\t\t\thasValue={ hasWritingMode }\n\t\t\t\t\tonDeselect={ resetWritingMode }\n\t\t\t\t\tisShownByDefault={ defaultControls.writingMode }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<WritingModeControl\n\t\t\t\t\t\tvalue={ writingMode }\n\t\t\t\t\t\tonChange={ setWritingMode }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasTextTransformControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Letter case' ) }\n\t\t\t\t\thasValue={ hasTextTransform }\n\t\t\t\t\tonDeselect={ resetTextTransform }\n\t\t\t\t\tisShownByDefault={ defaultControls.textTransform }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<TextTransformControl\n\t\t\t\t\t\tvalue={ textTransform }\n\t\t\t\t\t\tonChange={ setTextTransform }\n\t\t\t\t\t\tshowNone\n\t\t\t\t\t\tisBlock\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasTextAlignmentControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Text alignment' ) }\n\t\t\t\t\thasValue={ hasTextAlign }\n\t\t\t\t\tonDeselect={ resetTextAlign }\n\t\t\t\t\tisShownByDefault={ defaultControls.textAlign }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<TextAlignmentControl\n\t\t\t\t\t\tvalue={ textAlign }\n\t\t\t\t\t\tonChange={ setTextAlign }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { hasBlockSupport } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport LineHeightControl from '../components/line-height-control';\nimport { cleanEmptyObject } from './utils';\nimport { useSettings } from '../components/use-settings';\n\nexport const LINE_HEIGHT_SUPPORT_KEY = 'typography.lineHeight';\n\n/**\n * Inspector control panel containing the line height related configuration\n *\n * @param {Object} props\n *\n * @return {Element} Line height edit element.\n */\nexport function LineHeightEdit( props ) {\n\tconst {\n\t\tattributes: { style },\n\t\tsetAttributes,\n\t} = props;\n\n\tconst onChange = ( newLineHeightValue ) => {\n\t\tconst newStyle = {\n\t\t\t...style,\n\t\t\ttypography: {\n\t\t\t\t...style?.typography,\n\t\t\t\tlineHeight: newLineHeightValue,\n\t\t\t},\n\t\t};\n\n\t\tsetAttributes( { style: cleanEmptyObject( newStyle ) } );\n\t};\n\treturn (\n\t\t<LineHeightControl\n\t\t\t__unstableInputWidth=\"100%\"\n\t\t\tvalue={ style?.typography?.lineHeight }\n\t\t\tonChange={ onChange }\n\t\t\tsize=\"__unstable-large\"\n\t\t/>\n\t);\n}\n\n/**\n * Custom hook that checks if line-height settings have been disabled.\n *\n * @param {string} name The name of the block.\n * @return {boolean} Whether setting is disabled.\n */\nexport function useIsLineHeightDisabled( { name: blockName } = {} ) {\n\tconst [ isEnabled ] = useSettings( 'typography.lineHeight' );\n\n\treturn (\n\t\t! isEnabled || ! hasBlockSupport( blockName, LINE_HEIGHT_SUPPORT_KEY )\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"tokenList\"];","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport TokenList from '@wordpress/token-list';\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { shouldSkipSerialization } from './utils';\nimport { TYPOGRAPHY_SUPPORT_KEY } from './typography';\nimport { unlock } from '../lock-unlock';\n\nexport const FONT_FAMILY_SUPPORT_KEY = 'typography.__experimentalFontFamily';\nconst { kebabCase } = unlock( componentsPrivateApis );\n\n/**\n * Filters registered block settings, extending attributes to include\n * the `fontFamily` attribute.\n *\n * @param {Object} settings Original block settings\n * @return {Object}         Filtered block settings\n */\nfunction addAttributes( settings ) {\n\tif ( ! hasBlockSupport( settings, FONT_FAMILY_SUPPORT_KEY ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify a default value if needed.\n\tif ( ! settings.attributes.fontFamily ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tfontFamily: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override props assigned to save component to inject font family.\n *\n * @param {Object} props      Additional props applied to save element\n * @param {Object} blockType  Block type\n * @param {Object} attributes Block attributes\n * @return {Object}           Filtered props applied to save element\n */\nfunction addSaveProps( props, blockType, attributes ) {\n\tif ( ! hasBlockSupport( blockType, FONT_FAMILY_SUPPORT_KEY ) ) {\n\t\treturn props;\n\t}\n\n\tif (\n\t\tshouldSkipSerialization(\n\t\t\tblockType,\n\t\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t\t\t'fontFamily'\n\t\t)\n\t) {\n\t\treturn props;\n\t}\n\n\tif ( ! attributes?.fontFamily ) {\n\t\treturn props;\n\t}\n\n\t// Use TokenList to dedupe classes.\n\tconst classes = new TokenList( props.className );\n\tclasses.add( `has-${ kebabCase( attributes?.fontFamily ) }-font-family` );\n\tconst newClassName = classes.value;\n\tprops.className = newClassName ? newClassName : undefined;\n\n\treturn props;\n}\n\nfunction useBlockProps( { name, fontFamily } ) {\n\treturn addSaveProps( {}, name, { fontFamily } );\n}\n\nexport default {\n\tuseBlockProps,\n\taddSaveProps,\n\tattributeKeys: [ 'fontFamily' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, FONT_FAMILY_SUPPORT_KEY );\n\t},\n};\n\n/**\n * Resets the font family block support attribute. This can be used when\n * disabling the font family support controls for a block via a progressive\n * discovery panel.\n *\n * @param {Object} props               Block props.\n * @param {Object} props.setAttributes Function to set block's attributes.\n */\nexport function resetFontFamily( { setAttributes } ) {\n\tsetAttributes( { fontFamily: undefined } );\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/fontFamily/addAttribute',\n\taddAttributes\n);\n","/**\n * WordPress dependencies\n */\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\n\nconst { kebabCase } = unlock( componentsPrivateApis );\n\n/**\n *  Returns the font size object based on an array of named font sizes and the namedFontSize and customFontSize values.\n * \tIf namedFontSize is undefined or not found in fontSizes an object with just the size value based on customFontSize is returned.\n *\n * @param {Array}   fontSizes               Array of font size objects containing at least the \"name\" and \"size\" values as properties.\n * @param {?string} fontSizeAttribute       Content of the font size attribute (slug).\n * @param {?number} customFontSizeAttribute Contents of the custom font size attribute (value).\n *\n * @return {?Object} If fontSizeAttribute is set and an equal slug is found in fontSizes it returns the font size object for that slug.\n * \t\t\t\t\t Otherwise, an object with just the size value based on customFontSize is returned.\n */\nexport const getFontSize = (\n\tfontSizes,\n\tfontSizeAttribute,\n\tcustomFontSizeAttribute\n) => {\n\tif ( fontSizeAttribute ) {\n\t\tconst fontSizeObject = fontSizes?.find(\n\t\t\t( { slug } ) => slug === fontSizeAttribute\n\t\t);\n\t\tif ( fontSizeObject ) {\n\t\t\treturn fontSizeObject;\n\t\t}\n\t}\n\treturn {\n\t\tsize: customFontSizeAttribute,\n\t};\n};\n\n/**\n * Returns the corresponding font size object for a given value.\n *\n * @param {Array}  fontSizes Array of font size objects.\n * @param {number} value     Font size value.\n *\n * @return {Object} Font size object.\n */\nexport function getFontSizeObjectByValue( fontSizes, value ) {\n\tconst fontSizeObject = fontSizes?.find( ( { size } ) => size === value );\n\tif ( fontSizeObject ) {\n\t\treturn fontSizeObject;\n\t}\n\n\treturn {\n\t\tsize: value,\n\t};\n}\n\n/**\n * Returns a class based on fontSizeName.\n *\n * @param {string} fontSizeSlug Slug of the fontSize.\n *\n * @return {string | undefined} String with the class corresponding to the fontSize passed.\n *                  The class is generated by appending 'has-' followed by fontSizeSlug in kebabCase and ending with '-font-size'.\n */\nexport function getFontSizeClass( fontSizeSlug ) {\n\tif ( ! fontSizeSlug ) {\n\t\treturn;\n\t}\n\n\treturn `has-${ kebabCase( fontSizeSlug ) }-font-size`;\n}\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport TokenList from '@wordpress/token-list';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetFontSize,\n\tgetFontSizeClass,\n\tgetFontSizeObjectByValue,\n\tFontSizePicker,\n} from '../components/font-sizes';\nimport { TYPOGRAPHY_SUPPORT_KEY } from './typography';\nimport {\n\tcleanEmptyObject,\n\ttransformStyles,\n\tshouldSkipSerialization,\n} from './utils';\nimport { useSettings } from '../components/use-settings';\nimport { getTypographyFontSizeValue } from '../components/global-styles/typography-utils';\n\nexport const FONT_SIZE_SUPPORT_KEY = 'typography.fontSize';\n\n/**\n * Filters registered block settings, extending attributes to include\n * `fontSize` and `fontWeight` attributes.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addAttributes( settings ) {\n\tif ( ! hasBlockSupport( settings, FONT_SIZE_SUPPORT_KEY ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify a default value if needed.\n\tif ( ! settings.attributes.fontSize ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tfontSize: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override props assigned to save component to inject font size.\n *\n * @param {Object} props           Additional props applied to save element.\n * @param {Object} blockNameOrType Block type.\n * @param {Object} attributes      Block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nfunction addSaveProps( props, blockNameOrType, attributes ) {\n\tif ( ! hasBlockSupport( blockNameOrType, FONT_SIZE_SUPPORT_KEY ) ) {\n\t\treturn props;\n\t}\n\n\tif (\n\t\tshouldSkipSerialization(\n\t\t\tblockNameOrType,\n\t\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t\t\t'fontSize'\n\t\t)\n\t) {\n\t\treturn props;\n\t}\n\n\t// Use TokenList to dedupe classes.\n\tconst classes = new TokenList( props.className );\n\tclasses.add( getFontSizeClass( attributes.fontSize ) );\n\tconst newClassName = classes.value;\n\tprops.className = newClassName ? newClassName : undefined;\n\n\treturn props;\n}\n\n/**\n * Inspector control panel containing the font size related configuration\n *\n * @param {Object} props\n *\n * @return {Element} Font size edit element.\n */\nexport function FontSizeEdit( props ) {\n\tconst {\n\t\tattributes: { fontSize, style },\n\t\tsetAttributes,\n\t} = props;\n\tconst [ fontSizes ] = useSettings( 'typography.fontSizes' );\n\n\tconst onChange = ( value ) => {\n\t\tconst fontSizeSlug = getFontSizeObjectByValue( fontSizes, value ).slug;\n\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( {\n\t\t\t\t...style,\n\t\t\t\ttypography: {\n\t\t\t\t\t...style?.typography,\n\t\t\t\t\tfontSize: fontSizeSlug ? undefined : value,\n\t\t\t\t},\n\t\t\t} ),\n\t\t\tfontSize: fontSizeSlug,\n\t\t} );\n\t};\n\n\tconst fontSizeObject = getFontSize(\n\t\tfontSizes,\n\t\tfontSize,\n\t\tstyle?.typography?.fontSize\n\t);\n\n\tconst fontSizeValue =\n\t\tfontSizeObject?.size || style?.typography?.fontSize || fontSize;\n\n\treturn (\n\t\t<FontSizePicker\n\t\t\tonChange={ onChange }\n\t\t\tvalue={ fontSizeValue }\n\t\t\twithReset={ false }\n\t\t\twithSlider\n\t\t\tsize=\"__unstable-large\"\n\t\t/>\n\t);\n}\n\n/**\n * Custom hook that checks if font-size settings have been disabled.\n *\n * @param {string} name The name of the block.\n * @return {boolean} Whether setting is disabled.\n */\nexport function useIsFontSizeDisabled( { name: blockName } = {} ) {\n\tconst [ fontSizes ] = useSettings( 'typography.fontSizes' );\n\tconst hasFontSizes = !! fontSizes?.length;\n\n\treturn (\n\t\t! hasBlockSupport( blockName, FONT_SIZE_SUPPORT_KEY ) || ! hasFontSizes\n\t);\n}\n\nfunction useBlockProps( { name, fontSize, style } ) {\n\tconst [ fontSizes, fluidTypographySettings, layoutSettings ] = useSettings(\n\t\t'typography.fontSizes',\n\t\t'typography.fluid',\n\t\t'layout'\n\t);\n\n\t/*\n\t * Only add inline styles if the block supports font sizes,\n\t * doesn't skip serialization of font sizes,\n\t * and has either a custom font size or a preset font size.\n\t */\n\tif (\n\t\t! hasBlockSupport( name, FONT_SIZE_SUPPORT_KEY ) ||\n\t\tshouldSkipSerialization( name, TYPOGRAPHY_SUPPORT_KEY, 'fontSize' ) ||\n\t\t( ! fontSize && ! style?.typography?.fontSize )\n\t) {\n\t\treturn;\n\t}\n\n\tlet props;\n\n\tif ( style?.typography?.fontSize ) {\n\t\tprops = {\n\t\t\tstyle: {\n\t\t\t\tfontSize: getTypographyFontSizeValue(\n\t\t\t\t\t{ size: style.typography.fontSize },\n\t\t\t\t\t{\n\t\t\t\t\t\ttypography: {\n\t\t\t\t\t\t\tfluid: fluidTypographySettings,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlayout: layoutSettings,\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t},\n\t\t};\n\t}\n\n\tif ( fontSize ) {\n\t\tprops = {\n\t\t\tstyle: {\n\t\t\t\tfontSize: getFontSize(\n\t\t\t\t\tfontSizes,\n\t\t\t\t\tfontSize,\n\t\t\t\t\tstyle?.typography?.fontSize\n\t\t\t\t).size,\n\t\t\t},\n\t\t};\n\t}\n\n\tif ( ! props ) {\n\t\treturn;\n\t}\n\n\treturn addSaveProps( props, name, { fontSize } );\n}\n\nexport default {\n\tuseBlockProps,\n\taddSaveProps,\n\tattributeKeys: [ 'fontSize', 'style' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, FONT_SIZE_SUPPORT_KEY );\n\t},\n};\n\nconst MIGRATION_PATHS = {\n\tfontSize: [ [ 'fontSize' ], [ 'style', 'typography', 'fontSize' ] ],\n};\n\nfunction addTransforms( result, source, index, results ) {\n\tconst destinationBlockType = result.name;\n\tconst activeSupports = {\n\t\tfontSize: hasBlockSupport(\n\t\t\tdestinationBlockType,\n\t\t\tFONT_SIZE_SUPPORT_KEY\n\t\t),\n\t};\n\treturn transformStyles(\n\t\tactiveSupports,\n\t\tMIGRATION_PATHS,\n\t\tresult,\n\t\tsource,\n\t\tindex,\n\t\tresults\n\t);\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/font/addAttribute',\n\taddAttributes\n);\n\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/font-size/addTransforms',\n\taddTransforms\n);\n","/**\n * WordPress dependencies\n */\nimport { __, isRTL } from '@wordpress/i18n';\nimport { ToolbarDropdownMenu, ToolbarGroup } from '@wordpress/components';\nimport { alignLeft, alignRight, alignCenter } from '@wordpress/icons';\n\nconst DEFAULT_ALIGNMENT_CONTROLS = [\n\t{\n\t\ticon: alignLeft,\n\t\ttitle: __( 'Align text left' ),\n\t\talign: 'left',\n\t},\n\t{\n\t\ticon: alignCenter,\n\t\ttitle: __( 'Align text center' ),\n\t\talign: 'center',\n\t},\n\t{\n\t\ticon: alignRight,\n\t\ttitle: __( 'Align text right' ),\n\t\talign: 'right',\n\t},\n];\n\nconst POPOVER_PROPS = {\n\tplacement: 'bottom-start',\n};\n\nfunction AlignmentUI( {\n\tvalue,\n\tonChange,\n\talignmentControls = DEFAULT_ALIGNMENT_CONTROLS,\n\tlabel = __( 'Align text' ),\n\tdescription = __( 'Change text alignment' ),\n\tisCollapsed = true,\n\tisToolbar,\n} ) {\n\tfunction applyOrUnset( align ) {\n\t\treturn () => onChange( value === align ? undefined : align );\n\t}\n\n\tconst activeAlignment = alignmentControls.find(\n\t\t( control ) => control.align === value\n\t);\n\n\tfunction setIcon() {\n\t\tif ( activeAlignment ) {\n\t\t\treturn activeAlignment.icon;\n\t\t}\n\t\treturn isRTL() ? alignRight : alignLeft;\n\t}\n\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\n\tconst extraProps = isToolbar\n\t\t? { isCollapsed }\n\t\t: {\n\t\t\t\ttoggleProps: {\n\t\t\t\t\tdescription,\n\t\t\t\t},\n\t\t\t\tpopoverProps: POPOVER_PROPS,\n\t\t  };\n\n\treturn (\n\t\t<UIComponent\n\t\t\ticon={ setIcon() }\n\t\t\tlabel={ label }\n\t\t\tcontrols={ alignmentControls.map( ( control ) => {\n\t\t\t\tconst { align } = control;\n\t\t\t\tconst isActive = value === align;\n\n\t\t\t\treturn {\n\t\t\t\t\t...control,\n\t\t\t\t\tisActive,\n\t\t\t\t\trole: isCollapsed ? 'menuitemradio' : undefined,\n\t\t\t\t\tonClick: applyOrUnset( align ),\n\t\t\t\t};\n\t\t\t} ) }\n\t\t\t{ ...extraProps }\n\t\t/>\n\t);\n}\n\nexport default AlignmentUI;\n","/**\n * Internal dependencies\n */\nimport AlignmentUI from './ui';\n\nconst AlignmentControl = ( props ) => {\n\treturn <AlignmentUI { ...props } isToolbar={ false } />;\n};\n\nconst AlignmentToolbar = ( props ) => {\n\treturn <AlignmentUI { ...props } isToolbar />;\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/alignment-control/README.md\n */\nexport { AlignmentControl, AlignmentToolbar };\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { alignLeft, alignRight, alignCenter } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { AlignmentControl, BlockControls } from '../components';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\nimport {\n\tcleanEmptyObject,\n\tshouldSkipSerialization,\n\tuseBlockSettings,\n} from './utils';\nimport { TYPOGRAPHY_SUPPORT_KEY } from './typography';\n\nexport const TEXT_ALIGN_SUPPORT_KEY = 'typography.textAlign';\n\nconst TEXT_ALIGNMENT_OPTIONS = [\n\t{\n\t\ticon: alignLeft,\n\t\ttitle: __( 'Align text left' ),\n\t\talign: 'left',\n\t},\n\t{\n\t\ticon: alignCenter,\n\t\ttitle: __( 'Align text center' ),\n\t\talign: 'center',\n\t},\n\t{\n\t\ticon: alignRight,\n\t\ttitle: __( 'Align text right' ),\n\t\talign: 'right',\n\t},\n];\n\nconst VALID_TEXT_ALIGNMENTS = [ 'left', 'center', 'right' ];\nconst NO_TEXT_ALIGNMENTS = [];\n\n/**\n * Returns the valid text alignments.\n * Takes into consideration the text aligns supported by a block.\n * Exported just for testing purposes, not exported outside the module.\n *\n * @param {?boolean|string[]} blockTextAlign Text aligns supported by the block.\n *\n * @return {string[]} Valid text alignments.\n */\nexport function getValidTextAlignments( blockTextAlign ) {\n\tif ( Array.isArray( blockTextAlign ) ) {\n\t\treturn VALID_TEXT_ALIGNMENTS.filter( ( textAlign ) =>\n\t\t\tblockTextAlign.includes( textAlign )\n\t\t);\n\t}\n\n\treturn blockTextAlign === true ? VALID_TEXT_ALIGNMENTS : NO_TEXT_ALIGNMENTS;\n}\n\nfunction BlockEditTextAlignmentToolbarControlsPure( {\n\tstyle,\n\tname: blockName,\n\tsetAttributes,\n} ) {\n\tconst settings = useBlockSettings( blockName );\n\tconst hasTextAlignControl = settings?.typography?.textAlign;\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tif ( ! hasTextAlignControl || blockEditingMode !== 'default' ) {\n\t\treturn null;\n\t}\n\n\tconst validTextAlignments = getValidTextAlignments(\n\t\tgetBlockSupport( blockName, TEXT_ALIGN_SUPPORT_KEY )\n\t);\n\tif ( ! validTextAlignments.length ) {\n\t\treturn null;\n\t}\n\n\tconst textAlignmentControls = TEXT_ALIGNMENT_OPTIONS.filter( ( control ) =>\n\t\tvalidTextAlignments.includes( control.align )\n\t);\n\n\tconst onChange = ( newTextAlignValue ) => {\n\t\tconst newStyle = {\n\t\t\t...style,\n\t\t\ttypography: {\n\t\t\t\t...style?.typography,\n\t\t\t\ttextAlign: newTextAlignValue,\n\t\t\t},\n\t\t};\n\n\t\tsetAttributes( { style: cleanEmptyObject( newStyle ) } );\n\t};\n\n\treturn (\n\t\t<BlockControls group=\"block\">\n\t\t\t<AlignmentControl\n\t\t\t\tvalue={ style?.typography?.textAlign }\n\t\t\t\tonChange={ onChange }\n\t\t\t\talignmentControls={ textAlignmentControls }\n\t\t\t/>\n\t\t</BlockControls>\n\t);\n}\n\nexport default {\n\tedit: BlockEditTextAlignmentToolbarControlsPure,\n\tuseBlockProps,\n\taddSaveProps: addAssignedTextAlign,\n\tattributeKeys: [ 'style' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, TEXT_ALIGN_SUPPORT_KEY, false );\n\t},\n};\n\nfunction useBlockProps( { name, style } ) {\n\tif ( ! style?.typography?.textAlign ) {\n\t\treturn null;\n\t}\n\n\tconst validTextAlignments = getValidTextAlignments(\n\t\tgetBlockSupport( name, TEXT_ALIGN_SUPPORT_KEY )\n\t);\n\n\tif ( ! validTextAlignments.length ) {\n\t\treturn null;\n\t}\n\n\tif (\n\t\tshouldSkipSerialization( name, TYPOGRAPHY_SUPPORT_KEY, 'textAlign' )\n\t) {\n\t\treturn null;\n\t}\n\n\tconst textAlign = style.typography.textAlign;\n\n\tconst className = clsx( {\n\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\n\t} );\n\treturn { className };\n}\n\n/**\n * Override props assigned to save component to inject text alignment class\n * name if block supports it.\n *\n * @param {Object} props      Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addAssignedTextAlign( props, blockType, attributes ) {\n\tif ( ! attributes?.style?.typography?.textAlign ) {\n\t\treturn props;\n\t}\n\n\tconst { textAlign } = attributes.style.typography;\n\tconst blockTextAlign = getBlockSupport( blockType, TEXT_ALIGN_SUPPORT_KEY );\n\tconst isTextAlignValid =\n\t\tgetValidTextAlignments( blockTextAlign ).includes( textAlign );\n\tif (\n\t\tisTextAlignValid &&\n\t\t! shouldSkipSerialization(\n\t\t\tblockType,\n\t\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t\t\t'textAlign'\n\t\t)\n\t) {\n\t\tprops.className = clsx(\n\t\t\t`has-text-align-${ textAlign }`,\n\t\t\tprops.className\n\t\t);\n\t}\n\treturn props;\n}\n","/**\n * WordPress dependencies\n */\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { useMemo, useCallback } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport InspectorControls from '../components/inspector-controls';\nimport {\n\tdefault as StylesTypographyPanel,\n\tuseHasTypographyPanel,\n} from '../components/global-styles/typography-panel';\n\nimport { LINE_HEIGHT_SUPPORT_KEY } from './line-height';\nimport { FONT_FAMILY_SUPPORT_KEY } from './font-family';\nimport { FONT_SIZE_SUPPORT_KEY } from './font-size';\nimport { TEXT_ALIGN_SUPPORT_KEY } from './text-align';\nimport { cleanEmptyObject } from './utils';\nimport { store as blockEditorStore } from '../store';\n\nfunction omit( object, keys ) {\n\treturn Object.fromEntries(\n\t\tObject.entries( object ).filter( ( [ key ] ) => ! keys.includes( key ) )\n\t);\n}\n\nconst LETTER_SPACING_SUPPORT_KEY = 'typography.__experimentalLetterSpacing';\nconst TEXT_TRANSFORM_SUPPORT_KEY = 'typography.__experimentalTextTransform';\nconst TEXT_DECORATION_SUPPORT_KEY = 'typography.__experimentalTextDecoration';\nconst TEXT_COLUMNS_SUPPORT_KEY = 'typography.textColumns';\nconst FONT_STYLE_SUPPORT_KEY = 'typography.__experimentalFontStyle';\nconst FONT_WEIGHT_SUPPORT_KEY = 'typography.__experimentalFontWeight';\nconst WRITING_MODE_SUPPORT_KEY = 'typography.__experimentalWritingMode';\nexport const TYPOGRAPHY_SUPPORT_KEY = 'typography';\nexport const TYPOGRAPHY_SUPPORT_KEYS = [\n\tLINE_HEIGHT_SUPPORT_KEY,\n\tFONT_SIZE_SUPPORT_KEY,\n\tFONT_STYLE_SUPPORT_KEY,\n\tFONT_WEIGHT_SUPPORT_KEY,\n\tFONT_FAMILY_SUPPORT_KEY,\n\tTEXT_ALIGN_SUPPORT_KEY,\n\tTEXT_COLUMNS_SUPPORT_KEY,\n\tTEXT_DECORATION_SUPPORT_KEY,\n\tWRITING_MODE_SUPPORT_KEY,\n\tTEXT_TRANSFORM_SUPPORT_KEY,\n\tLETTER_SPACING_SUPPORT_KEY,\n];\n\nfunction styleToAttributes( style ) {\n\tconst updatedStyle = { ...omit( style, [ 'fontFamily' ] ) };\n\tconst fontSizeValue = style?.typography?.fontSize;\n\tconst fontFamilyValue = style?.typography?.fontFamily;\n\tconst fontSizeSlug =\n\t\ttypeof fontSizeValue === 'string' &&\n\t\tfontSizeValue?.startsWith( 'var:preset|font-size|' )\n\t\t\t? fontSizeValue.substring( 'var:preset|font-size|'.length )\n\t\t\t: undefined;\n\tconst fontFamilySlug = fontFamilyValue?.startsWith(\n\t\t'var:preset|font-family|'\n\t)\n\t\t? fontFamilyValue.substring( 'var:preset|font-family|'.length )\n\t\t: undefined;\n\tupdatedStyle.typography = {\n\t\t...omit( updatedStyle.typography, [ 'fontFamily' ] ),\n\t\tfontSize: fontSizeSlug ? undefined : fontSizeValue,\n\t};\n\treturn {\n\t\tstyle: cleanEmptyObject( updatedStyle ),\n\t\tfontFamily: fontFamilySlug,\n\t\tfontSize: fontSizeSlug,\n\t};\n}\n\nfunction attributesToStyle( attributes ) {\n\treturn {\n\t\t...attributes.style,\n\t\ttypography: {\n\t\t\t...attributes.style?.typography,\n\t\t\tfontFamily: attributes.fontFamily\n\t\t\t\t? 'var:preset|font-family|' + attributes.fontFamily\n\t\t\t\t: undefined,\n\t\t\tfontSize: attributes.fontSize\n\t\t\t\t? 'var:preset|font-size|' + attributes.fontSize\n\t\t\t\t: attributes.style?.typography?.fontSize,\n\t\t},\n\t};\n}\n\nfunction TypographyInspectorControl( { children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributesToStyle( attributes );\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\t...styleToAttributes( updatedStyle ),\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"typography\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function TypographyPanel( { clientId, name, setAttributes, settings } ) {\n\tfunction selector( select ) {\n\t\tconst { style, fontFamily, fontSize } =\n\t\t\tselect( blockEditorStore ).getBlockAttributes( clientId ) || {};\n\t\treturn { style, fontFamily, fontSize };\n\t}\n\tconst { style, fontFamily, fontSize } = useSelect( selector, [ clientId ] );\n\tconst isEnabled = useHasTypographyPanel( settings );\n\tconst value = useMemo(\n\t\t() => attributesToStyle( { style, fontFamily, fontSize } ),\n\t\t[ style, fontSize, fontFamily ]\n\t);\n\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( styleToAttributes( newStyle ) );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultControls = getBlockSupport( name, [\n\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\n\treturn (\n\t\t<StylesTypographyPanel\n\t\t\tas={ TypographyInspectorControl }\n\t\t\tpanelId={ clientId }\n\t\t\tsettings={ settings }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tdefaultControls={ defaultControls }\n\t\t/>\n\t);\n}\n\nexport const hasTypographySupport = ( blockName ) => {\n\treturn TYPOGRAPHY_SUPPORT_KEYS.some( ( key ) =>\n\t\thasBlockSupport( blockName, key )\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../../use-settings';\nimport { RANGE_CONTROL_MAX_SIZE } from '../utils';\n\nconst EMPTY_ARRAY = [];\n\nconst compare = new Intl.Collator( 'und', { numeric: true } ).compare;\n\nexport default function useSpacingSizes() {\n\tconst [\n\t\tcustomSpacingSizes,\n\t\tthemeSpacingSizes,\n\t\tdefaultSpacingSizes,\n\t\tdefaultSpacingSizesEnabled,\n\t] = useSettings(\n\t\t'spacing.spacingSizes.custom',\n\t\t'spacing.spacingSizes.theme',\n\t\t'spacing.spacingSizes.default',\n\t\t'spacing.defaultSpacingSizes'\n\t);\n\n\tconst customSizes = customSpacingSizes ?? EMPTY_ARRAY;\n\n\tconst themeSizes = themeSpacingSizes ?? EMPTY_ARRAY;\n\n\tconst defaultSizes =\n\t\tdefaultSpacingSizes && defaultSpacingSizesEnabled !== false\n\t\t\t? defaultSpacingSizes\n\t\t\t: EMPTY_ARRAY;\n\n\treturn useMemo( () => {\n\t\tconst sizes = [\n\t\t\t{ name: __( 'None' ), slug: '0', size: 0 },\n\t\t\t...customSizes,\n\t\t\t...themeSizes,\n\t\t\t...defaultSizes,\n\t\t];\n\n\t\t// Using numeric slugs opts-in to sorting by slug.\n\t\tif ( sizes.every( ( { slug } ) => /^[0-9]/.test( slug ) ) ) {\n\t\t\tsizes.sort( ( a, b ) => compare( a.slug, b.slug ) );\n\t\t}\n\n\t\treturn sizes.length > RANGE_CONTROL_MAX_SIZE\n\t\t\t? [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: __( 'Default' ),\n\t\t\t\t\t\tslug: 'default',\n\t\t\t\t\t\tsize: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t...sizes,\n\t\t\t  ]\n\t\t\t: sizes;\n\t}, [ customSizes, themeSizes, defaultSizes ] );\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst settings = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z\" />\n\t\t<Path d=\"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z\" />\n\t</SVG>\n);\n\nexport default settings;\n","/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tIcon,\n\tRangeControl,\n\t__experimentalHStack as HStack,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n\tCustomSelectControl,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { useState, useMemo } from '@wordpress/element';\nimport { usePrevious } from '@wordpress/compose';\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport { settings } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../../use-settings';\nimport { store as blockEditorStore } from '../../../store';\nimport {\n\tRANGE_CONTROL_MAX_SIZE,\n\tALL_SIDES,\n\tLABELS,\n\tgetSliderValueFromPreset,\n\tgetCustomValueFromPreset,\n\tgetPresetValueFromCustomValue,\n\tisValueSpacingPreset,\n} from '../utils';\n\nconst CUSTOM_VALUE_SETTINGS = {\n\tpx: { max: 300, steps: 1 },\n\t'%': { max: 100, steps: 1 },\n\tvw: { max: 100, steps: 1 },\n\tvh: { max: 100, steps: 1 },\n\tem: { max: 10, steps: 0.1 },\n\trm: { max: 10, steps: 0.1 },\n\tsvw: { max: 100, steps: 1 },\n\tlvw: { max: 100, steps: 1 },\n\tdvw: { max: 100, steps: 1 },\n\tsvh: { max: 100, steps: 1 },\n\tlvh: { max: 100, steps: 1 },\n\tdvh: { max: 100, steps: 1 },\n\tvi: { max: 100, steps: 1 },\n\tsvi: { max: 100, steps: 1 },\n\tlvi: { max: 100, steps: 1 },\n\tdvi: { max: 100, steps: 1 },\n\tvb: { max: 100, steps: 1 },\n\tsvb: { max: 100, steps: 1 },\n\tlvb: { max: 100, steps: 1 },\n\tdvb: { max: 100, steps: 1 },\n\tvmin: { max: 100, steps: 1 },\n\tsvmin: { max: 100, steps: 1 },\n\tlvmin: { max: 100, steps: 1 },\n\tdvmin: { max: 100, steps: 1 },\n\tvmax: { max: 100, steps: 1 },\n\tsvmax: { max: 100, steps: 1 },\n\tlvmax: { max: 100, steps: 1 },\n\tdvmax: { max: 100, steps: 1 },\n};\n\nexport default function SpacingInputControl( {\n\ticon,\n\tisMixed = false,\n\tminimumCustomValue,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tshowSideInLabel = true,\n\tside,\n\tspacingSizes,\n\ttype,\n\tvalue,\n} ) {\n\t// Treat value as a preset value if the passed in value matches the value of one of the spacingSizes.\n\tvalue = getPresetValueFromCustomValue( value, spacingSizes );\n\n\tlet selectListSizes = spacingSizes;\n\tconst showRangeControl = spacingSizes.length <= RANGE_CONTROL_MAX_SIZE;\n\n\tconst disableCustomSpacingSizes = useSelect( ( select ) => {\n\t\tconst editorSettings = select( blockEditorStore ).getSettings();\n\t\treturn editorSettings?.disableCustomSpacingSizes;\n\t} );\n\n\tconst [ showCustomValueControl, setShowCustomValueControl ] = useState(\n\t\t! disableCustomSpacingSizes &&\n\t\t\tvalue !== undefined &&\n\t\t\t! isValueSpacingPreset( value )\n\t);\n\n\tconst [ minValue, setMinValue ] = useState( minimumCustomValue );\n\n\tconst previousValue = usePrevious( value );\n\tif (\n\t\t!! value &&\n\t\tpreviousValue !== value &&\n\t\t! isValueSpacingPreset( value ) &&\n\t\tshowCustomValueControl !== true\n\t) {\n\t\tsetShowCustomValueControl( true );\n\t}\n\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: availableUnits || [ 'px', 'em', 'rem' ],\n\t} );\n\n\tlet currentValue = null;\n\n\tconst showCustomValueInSelectList =\n\t\t! showRangeControl &&\n\t\t! showCustomValueControl &&\n\t\tvalue !== undefined &&\n\t\t( ! isValueSpacingPreset( value ) ||\n\t\t\t( isValueSpacingPreset( value ) && isMixed ) );\n\n\tif ( showCustomValueInSelectList ) {\n\t\tselectListSizes = [\n\t\t\t...spacingSizes,\n\t\t\t{\n\t\t\t\tname: ! isMixed\n\t\t\t\t\t? // translators: %s: A custom measurement, e.g. a number followed by a unit like 12px.\n\t\t\t\t\t  sprintf( __( 'Custom (%s)' ), value )\n\t\t\t\t\t: __( 'Mixed' ),\n\t\t\t\tslug: 'custom',\n\t\t\t\tsize: value,\n\t\t\t},\n\t\t];\n\t\tcurrentValue = selectListSizes.length - 1;\n\t} else if ( ! isMixed ) {\n\t\tcurrentValue = ! showCustomValueControl\n\t\t\t? getSliderValueFromPreset( value, spacingSizes )\n\t\t\t: getCustomValueFromPreset( value, spacingSizes );\n\t}\n\n\tconst selectedUnit =\n\t\tuseMemo(\n\t\t\t() => parseQuantityAndUnitFromRawValue( currentValue ),\n\t\t\t[ currentValue ]\n\t\t)[ 1 ] || units[ 0 ]?.value;\n\n\tconst setInitialValue = () => {\n\t\tif ( value === undefined ) {\n\t\t\tonChange( '0' );\n\t\t}\n\t};\n\n\tconst customTooltipContent = ( newValue ) =>\n\t\tvalue === undefined ? undefined : spacingSizes[ newValue ]?.name;\n\n\tconst customRangeValue = parseFloat( currentValue, 10 );\n\n\tconst getNewCustomValue = ( newSize ) => {\n\t\tconst isNumeric = ! isNaN( parseFloat( newSize ) );\n\t\tconst nextValue = isNumeric ? newSize : undefined;\n\t\treturn nextValue;\n\t};\n\n\tconst getNewPresetValue = ( newSize, controlType ) => {\n\t\tconst size = parseInt( newSize, 10 );\n\n\t\tif ( controlType === 'selectList' ) {\n\t\t\tif ( size === 0 ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tif ( size === 1 ) {\n\t\t\t\treturn '0';\n\t\t\t}\n\t\t} else if ( size === 0 ) {\n\t\t\treturn '0';\n\t\t}\n\t\treturn `var:preset|spacing|${ spacingSizes[ newSize ]?.slug }`;\n\t};\n\n\tconst handleCustomValueSliderChange = ( next ) => {\n\t\tonChange( [ next, selectedUnit ].join( '' ) );\n\t};\n\n\tconst allPlaceholder = isMixed ? __( 'Mixed' ) : null;\n\n\tconst options = selectListSizes.map( ( size, index ) => ( {\n\t\tkey: index,\n\t\tname: size.name,\n\t} ) );\n\n\tconst marks = spacingSizes\n\t\t.slice( 1, spacingSizes.length - 1 )\n\t\t.map( ( _newValue, index ) => ( {\n\t\t\tvalue: index + 1,\n\t\t\tlabel: undefined,\n\t\t} ) );\n\n\tconst sideLabel =\n\t\tALL_SIDES.includes( side ) && showSideInLabel ? LABELS[ side ] : '';\n\tconst typeLabel = showSideInLabel ? type?.toLowerCase() : type;\n\n\tconst ariaLabel = sprintf(\n\t\t// translators: 1: The side of the block being modified (top, bottom, left etc.). 2. Type of spacing being modified (padding, margin, etc).\n\t\t_x( '%1$s %2$s', 'spacing' ),\n\t\tsideLabel,\n\t\ttypeLabel\n\t).trim();\n\n\treturn (\n\t\t<HStack className=\"spacing-sizes-control__wrapper\">\n\t\t\t{ icon && (\n\t\t\t\t<Icon\n\t\t\t\t\tclassName=\"spacing-sizes-control__icon\"\n\t\t\t\t\ticon={ icon }\n\t\t\t\t\tsize={ 24 }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ showCustomValueControl && (\n\t\t\t\t<>\n\t\t\t\t\t<UnitControl\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t\t\tonChange={ ( newSize ) =>\n\t\t\t\t\t\t\tonChange( getNewCustomValue( newSize ) )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue={ currentValue }\n\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\tmin={ minValue }\n\t\t\t\t\t\tplaceholder={ allPlaceholder }\n\t\t\t\t\t\tdisableUnits={ isMixed }\n\t\t\t\t\t\tlabel={ ariaLabel }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\tclassName=\"spacing-sizes-control__custom-value-input\"\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\tonDragStart={ () => {\n\t\t\t\t\t\t\tif ( value?.charAt( 0 ) === '-' ) {\n\t\t\t\t\t\t\t\tsetMinValue( 0 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonDrag={ () => {\n\t\t\t\t\t\t\tif ( value?.charAt( 0 ) === '-' ) {\n\t\t\t\t\t\t\t\tsetMinValue( 0 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonDragEnd={ () => {\n\t\t\t\t\t\t\tsetMinValue( minimumCustomValue );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t\t\tvalue={ customRangeValue }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tmax={ CUSTOM_VALUE_SETTINGS[ selectedUnit ]?.max ?? 10 }\n\t\t\t\t\t\tstep={\n\t\t\t\t\t\t\tCUSTOM_VALUE_SETTINGS[ selectedUnit ]?.steps ?? 0.1\n\t\t\t\t\t\t}\n\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t\tonChange={ handleCustomValueSliderChange }\n\t\t\t\t\t\tclassName=\"spacing-sizes-control__custom-value-range\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ ariaLabel }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t{ showRangeControl && ! showCustomValueControl && (\n\t\t\t\t<RangeControl\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\tclassName=\"spacing-sizes-control__range-control\"\n\t\t\t\t\tvalue={ currentValue }\n\t\t\t\t\tonChange={ ( newSize ) =>\n\t\t\t\t\t\tonChange( getNewPresetValue( newSize ) )\n\t\t\t\t\t}\n\t\t\t\t\tonMouseDown={ ( event ) => {\n\t\t\t\t\t\t// If mouse down is near start of range set initial value to 0, which\n\t\t\t\t\t\t// prevents the user have to drag right then left to get 0 setting.\n\t\t\t\t\t\tif ( event?.nativeEvent?.offsetX < 35 ) {\n\t\t\t\t\t\t\tsetInitialValue();\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\twithInputField={ false }\n\t\t\t\t\taria-valuenow={ currentValue }\n\t\t\t\t\taria-valuetext={ spacingSizes[ currentValue ]?.name }\n\t\t\t\t\trenderTooltipContent={ customTooltipContent }\n\t\t\t\t\tmin={ 0 }\n\t\t\t\t\tmax={ spacingSizes.length - 1 }\n\t\t\t\t\tmarks={ marks }\n\t\t\t\t\tlabel={ ariaLabel }\n\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ ! showRangeControl && ! showCustomValueControl && (\n\t\t\t\t<CustomSelectControl\n\t\t\t\t\tclassName=\"spacing-sizes-control__custom-select-control\"\n\t\t\t\t\tvalue={\n\t\t\t\t\t\t// passing empty string as a fallback to continue using the\n\t\t\t\t\t\t// component in controlled mode\n\t\t\t\t\t\toptions.find(\n\t\t\t\t\t\t\t( option ) => option.key === currentValue\n\t\t\t\t\t\t) || ''\n\t\t\t\t\t}\n\t\t\t\t\tonChange={ ( selection ) => {\n\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\tgetNewPresetValue(\n\t\t\t\t\t\t\t\tselection.selectedItem.key,\n\t\t\t\t\t\t\t\t'selectList'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\toptions={ options }\n\t\t\t\t\tlabel={ ariaLabel }\n\t\t\t\t\thideLabelFromVision\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ ! disableCustomSpacingSizes && (\n\t\t\t\t<Button\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tshowCustomValueControl\n\t\t\t\t\t\t\t? __( 'Use size preset' )\n\t\t\t\t\t\t\t: __( 'Set custom size' )\n\t\t\t\t\t}\n\t\t\t\t\ticon={ settings }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tsetShowCustomValueControl( ! showCustomValueControl );\n\t\t\t\t\t} }\n\t\t\t\t\tisPressed={ showCustomValueControl }\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tclassName=\"spacing-sizes-control__custom-toggle\"\n\t\t\t\t\ticonSize={ 24 }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</HStack>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport SpacingInputControl from './spacing-input-control';\nimport {\n\tLABELS,\n\tICONS,\n\tgetPresetValueFromCustomValue,\n\thasAxisSupport,\n} from '../utils';\n\nconst groupedSides = [ 'vertical', 'horizontal' ];\n\nexport default function AxialInputControls( {\n\tminimumCustomValue,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tsides,\n\tspacingSizes,\n\ttype,\n\tvalues,\n} ) {\n\tconst createHandleOnChange = ( side ) => ( next ) => {\n\t\tif ( ! onChange ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Encode the existing value into the preset value if the passed in value matches the value of one of the spacingSizes.\n\t\tconst nextValues = {\n\t\t\t...Object.keys( values ).reduce( ( acc, key ) => {\n\t\t\t\tacc[ key ] = getPresetValueFromCustomValue(\n\t\t\t\t\tvalues[ key ],\n\t\t\t\t\tspacingSizes\n\t\t\t\t);\n\t\t\t\treturn acc;\n\t\t\t}, {} ),\n\t\t};\n\n\t\tif ( side === 'vertical' ) {\n\t\t\tnextValues.top = next;\n\t\t\tnextValues.bottom = next;\n\t\t}\n\n\t\tif ( side === 'horizontal' ) {\n\t\t\tnextValues.left = next;\n\t\t\tnextValues.right = next;\n\t\t}\n\n\t\tonChange( nextValues );\n\t};\n\n\t// Filter sides if custom configuration provided, maintaining default order.\n\tconst filteredSides = sides?.length\n\t\t? groupedSides.filter( ( side ) => hasAxisSupport( sides, side ) )\n\t\t: groupedSides;\n\n\treturn (\n\t\t<>\n\t\t\t{ filteredSides.map( ( side ) => {\n\t\t\t\tconst axisValue =\n\t\t\t\t\tside === 'vertical' ? values.top : values.left;\n\t\t\t\treturn (\n\t\t\t\t\t<SpacingInputControl\n\t\t\t\t\t\tkey={ `spacing-sizes-control-${ side }` }\n\t\t\t\t\t\ticon={ ICONS[ side ] }\n\t\t\t\t\t\tlabel={ LABELS[ side ] }\n\t\t\t\t\t\tminimumCustomValue={ minimumCustomValue }\n\t\t\t\t\t\tonChange={ createHandleOnChange( side ) }\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\t\tside={ side }\n\t\t\t\t\t\tspacingSizes={ spacingSizes }\n\t\t\t\t\t\ttype={ type }\n\t\t\t\t\t\tvalue={ axisValue }\n\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport SpacingInputControl from './spacing-input-control';\nimport {\n\tALL_SIDES,\n\tLABELS,\n\tICONS,\n\tgetPresetValueFromCustomValue,\n} from '../utils';\n\nexport default function SeparatedInputControls( {\n\tminimumCustomValue,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tsides,\n\tspacingSizes,\n\ttype,\n\tvalues,\n} ) {\n\t// Filter sides if custom configuration provided, maintaining default order.\n\tconst filteredSides = sides?.length\n\t\t? ALL_SIDES.filter( ( side ) => sides.includes( side ) )\n\t\t: ALL_SIDES;\n\n\tconst createHandleOnChange = ( side ) => ( next ) => {\n\t\t// Encode the existing value into the preset value if the passed in value matches the value of one of the spacingSizes.\n\t\tconst nextValues = {\n\t\t\t...Object.keys( values ).reduce( ( acc, key ) => {\n\t\t\t\tacc[ key ] = getPresetValueFromCustomValue(\n\t\t\t\t\tvalues[ key ],\n\t\t\t\t\tspacingSizes\n\t\t\t\t);\n\t\t\t\treturn acc;\n\t\t\t}, {} ),\n\t\t};\n\n\t\tnextValues[ side ] = next;\n\n\t\tonChange( nextValues );\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{ filteredSides.map( ( side ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<SpacingInputControl\n\t\t\t\t\t\tkey={ `spacing-sizes-control-${ side }` }\n\t\t\t\t\t\ticon={ ICONS[ side ] }\n\t\t\t\t\t\tlabel={ LABELS[ side ] }\n\t\t\t\t\t\tminimumCustomValue={ minimumCustomValue }\n\t\t\t\t\t\tonChange={ createHandleOnChange( side ) }\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\t\tside={ side }\n\t\t\t\t\t\tspacingSizes={ spacingSizes }\n\t\t\t\t\t\ttype={ type }\n\t\t\t\t\t\tvalue={ values[ side ] }\n\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport SpacingInputControl from './spacing-input-control';\nimport { LABELS, getPresetValueFromCustomValue } from '../utils';\n\nexport default function SingleInputControl( {\n\tminimumCustomValue,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tshowSideInLabel,\n\tside,\n\tspacingSizes,\n\ttype,\n\tvalues,\n} ) {\n\tconst createHandleOnChange = ( currentSide ) => ( next ) => {\n\t\t// Encode the existing value into the preset value if the passed in value matches the value of one of the spacingSizes.\n\t\tconst nextValues = {\n\t\t\t...Object.keys( values ).reduce( ( acc, key ) => {\n\t\t\t\tacc[ key ] = getPresetValueFromCustomValue(\n\t\t\t\t\tvalues[ key ],\n\t\t\t\t\tspacingSizes\n\t\t\t\t);\n\t\t\t\treturn acc;\n\t\t\t}, {} ),\n\t\t};\n\n\t\tnextValues[ currentSide ] = next;\n\n\t\tonChange( nextValues );\n\t};\n\n\treturn (\n\t\t<SpacingInputControl\n\t\t\tlabel={ LABELS[ side ] }\n\t\t\tminimumCustomValue={ minimumCustomValue }\n\t\t\tonChange={ createHandleOnChange( side ) }\n\t\t\tonMouseOut={ onMouseOut }\n\t\t\tonMouseOver={ onMouseOver }\n\t\t\tshowSideInLabel={ showSideInLabel }\n\t\t\tside={ side }\n\t\t\tspacingSizes={ spacingSizes }\n\t\t\ttype={ type }\n\t\t\tvalue={ values[ side ] }\n\t\t\twithInputField={ false }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { link, linkOff } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\n\nexport default function LinkedButton( { isLinked, ...props } ) {\n\tconst label = isLinked ? __( 'Unlink sides' ) : __( 'Link sides' );\n\n\treturn (\n\t\t<Button\n\t\t\t{ ...props }\n\t\t\tsize=\"small\"\n\t\t\ticon={ isLinked ? link : linkOff }\n\t\t\ticonSize={ 24 }\n\t\t\tlabel={ label }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tBaseControl,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { _x, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useSpacingSizes from './hooks/use-spacing-sizes';\nimport AxialInputControls from './input-controls/axial';\nimport SeparatedInputControls from './input-controls/separated';\nimport SingleInputControl from './input-controls/single';\nimport LinkedButton from './linked-button';\nimport {\n\tALL_SIDES,\n\tDEFAULT_VALUES,\n\tLABELS,\n\tVIEWS,\n\tgetInitialView,\n} from './utils';\n\n/**\n * A flexible control for managing spacing values in the block editor. Supports single, axial,\n * and separated input controls for different spacing configurations with automatic view selection\n * based on current values and available sides.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/spacing-sizes-control/README.md\n *\n * @example\n * ```jsx\n * import { __experimentalSpacingSizesControl as SpacingSizesControl } from '@wordpress/block-editor';\n * import { useState } from '@wordpress/element';\n *\n * function Example() {\n *   const [ sides, setSides ] = useState( {\n *     top: '0px',\n *     right: '0px',\n *     bottom: '0px',\n *     left: '0px',\n *   } );\n *\n *   return (\n *     <SpacingSizesControl\n *       values={ sides }\n *       onChange={ setSides }\n *       label=\"Sides\"\n *     />\n *   );\n * }\n * ```\n *\n * @param {Object}   props                    Component props.\n * @param {Object}   props.inputProps         Additional props for input controls.\n * @param {string}   props.label              Label for the control.\n * @param {number}   props.minimumCustomValue Minimum value for custom input.\n * @param {Function} props.onChange           Called when spacing values change.\n * @param {Function} props.onMouseOut         Called when mouse leaves the control.\n * @param {Function} props.onMouseOver        Called when mouse enters the control.\n * @param {boolean}  props.showSideInLabel    Show side in control label.\n * @param {Array}    props.sides              Available sides for control.\n * @param {boolean}  props.useSelect          Use select control for predefined values.\n * @param {Object}   props.values             Current spacing values.\n * @return {Element}                         Spacing sizes control component.\n */\nexport default function SpacingSizesControl( {\n\tinputProps,\n\tlabel: labelProp,\n\tminimumCustomValue = 0,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tshowSideInLabel = true,\n\tsides = ALL_SIDES,\n\tuseSelect,\n\tvalues,\n} ) {\n\tconst spacingSizes = useSpacingSizes();\n\tconst inputValues = values || DEFAULT_VALUES;\n\tconst hasOneSide = sides?.length === 1;\n\tconst hasOnlyAxialSides =\n\t\tsides?.includes( 'horizontal' ) &&\n\t\tsides?.includes( 'vertical' ) &&\n\t\tsides?.length === 2;\n\n\tconst [ view, setView ] = useState( getInitialView( inputValues, sides ) );\n\n\tconst toggleLinked = () => {\n\t\tsetView( view === VIEWS.axial ? VIEWS.custom : VIEWS.axial );\n\t};\n\n\tconst handleOnChange = ( nextValue ) => {\n\t\tconst newValues = { ...values, ...nextValue };\n\t\tonChange( newValues );\n\t};\n\n\tconst inputControlProps = {\n\t\t...inputProps,\n\t\tminimumCustomValue,\n\t\tonChange: handleOnChange,\n\t\tonMouseOut,\n\t\tonMouseOver,\n\t\tsides,\n\t\tspacingSizes,\n\t\ttype: labelProp,\n\t\tuseSelect,\n\t\tvalues: inputValues,\n\t};\n\n\tconst renderControls = () => {\n\t\tif ( view === VIEWS.axial ) {\n\t\t\treturn <AxialInputControls { ...inputControlProps } />;\n\t\t}\n\t\tif ( view === VIEWS.custom ) {\n\t\t\treturn <SeparatedInputControls { ...inputControlProps } />;\n\t\t}\n\t\treturn (\n\t\t\t<SingleInputControl\n\t\t\t\tside={ view }\n\t\t\t\t{ ...inputControlProps }\n\t\t\t\tshowSideInLabel={ showSideInLabel }\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst sideLabel =\n\t\tALL_SIDES.includes( view ) && showSideInLabel ? LABELS[ view ] : '';\n\n\tconst label = sprintf(\n\t\t// translators: 1: The side of the block being modified (top, bottom, left etc.). 2. Type of spacing being modified (padding, margin, etc).\n\t\t_x( '%1$s %2$s', 'spacing' ),\n\t\tlabelProp,\n\t\tsideLabel\n\t).trim();\n\n\treturn (\n\t\t<fieldset className=\"spacing-sizes-control\">\n\t\t\t<HStack className=\"spacing-sizes-control__header\">\n\t\t\t\t<BaseControl.VisualLabel\n\t\t\t\t\tas=\"legend\"\n\t\t\t\t\tclassName=\"spacing-sizes-control__label\"\n\t\t\t\t>\n\t\t\t\t\t{ label }\n\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t{ ! hasOneSide && ! hasOnlyAxialSides && (\n\t\t\t\t\t<LinkedButton\n\t\t\t\t\t\tlabel={ labelProp }\n\t\t\t\t\t\tonClick={ toggleLinked }\n\t\t\t\t\t\tisLinked={ view === VIEWS.axial }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</HStack>\n\t\t\t<VStack spacing={ 0.5 }>{ renderControls() }</VStack>\n\t\t</fieldset>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport {\n\tBaseControl,\n\tRangeControl,\n\tFlex,\n\tFlexItem,\n\t__experimentalSpacer as Spacer,\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\n\nconst RANGE_CONTROL_CUSTOM_SETTINGS = {\n\tpx: { max: 1000, step: 1 },\n\t'%': { max: 100, step: 1 },\n\tvw: { max: 100, step: 1 },\n\tvh: { max: 100, step: 1 },\n\tem: { max: 50, step: 0.1 },\n\trem: { max: 50, step: 0.1 },\n\tsvw: { max: 100, step: 1 },\n\tlvw: { max: 100, step: 1 },\n\tdvw: { max: 100, step: 1 },\n\tsvh: { max: 100, step: 1 },\n\tlvh: { max: 100, step: 1 },\n\tdvh: { max: 100, step: 1 },\n\tvi: { max: 100, step: 1 },\n\tsvi: { max: 100, step: 1 },\n\tlvi: { max: 100, step: 1 },\n\tdvi: { max: 100, step: 1 },\n\tvb: { max: 100, step: 1 },\n\tsvb: { max: 100, step: 1 },\n\tlvb: { max: 100, step: 1 },\n\tdvb: { max: 100, step: 1 },\n\tvmin: { max: 100, step: 1 },\n\tsvmin: { max: 100, step: 1 },\n\tlvmin: { max: 100, step: 1 },\n\tdvmin: { max: 100, step: 1 },\n\tvmax: { max: 100, step: 1 },\n\tsvmax: { max: 100, step: 1 },\n\tlvmax: { max: 100, step: 1 },\n\tdvmax: { max: 100, step: 1 },\n};\n\n/**\n * HeightControl renders a linked unit control and range control for adjusting the height of a block.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/height-control/README.md\n *\n * @param {Object}                     props\n * @param {?string}                    props.label    A label for the control.\n * @param {( value: string ) => void } props.onChange Called when the height changes.\n * @param {string}                     props.value    The current height value.\n *\n * @return {Component} The component to be rendered.\n */\nexport default function HeightControl( {\n\tlabel = __( 'Height' ),\n\tonChange,\n\tvalue,\n} ) {\n\tconst customRangeValue = parseFloat( value );\n\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: availableUnits || [\n\t\t\t'%',\n\t\t\t'px',\n\t\t\t'em',\n\t\t\t'rem',\n\t\t\t'vh',\n\t\t\t'vw',\n\t\t],\n\t} );\n\n\tconst selectedUnit =\n\t\tuseMemo(\n\t\t\t() => parseQuantityAndUnitFromRawValue( value ),\n\t\t\t[ value ]\n\t\t)[ 1 ] ||\n\t\tunits[ 0 ]?.value ||\n\t\t'px';\n\n\tconst handleSliderChange = ( next ) => {\n\t\tonChange( [ next, selectedUnit ].join( '' ) );\n\t};\n\n\tconst handleUnitChange = ( newUnit ) => {\n\t\t// Attempt to smooth over differences between currentUnit and newUnit.\n\t\t// This should slightly improve the experience of switching between unit types.\n\t\tconst [ currentValue, currentUnit ] =\n\t\t\tparseQuantityAndUnitFromRawValue( value );\n\n\t\tif ( [ 'em', 'rem' ].includes( newUnit ) && currentUnit === 'px' ) {\n\t\t\t// Convert pixel value to an approximate of the new unit, assuming a root size of 16px.\n\t\t\tonChange( ( currentValue / 16 ).toFixed( 2 ) + newUnit );\n\t\t} else if (\n\t\t\t[ 'em', 'rem' ].includes( currentUnit ) &&\n\t\t\tnewUnit === 'px'\n\t\t) {\n\t\t\t// Convert to pixel value assuming a root size of 16px.\n\t\t\tonChange( Math.round( currentValue * 16 ) + newUnit );\n\t\t} else if (\n\t\t\t[\n\t\t\t\t'%',\n\t\t\t\t'vw',\n\t\t\t\t'svw',\n\t\t\t\t'lvw',\n\t\t\t\t'dvw',\n\t\t\t\t'vh',\n\t\t\t\t'svh',\n\t\t\t\t'lvh',\n\t\t\t\t'dvh',\n\t\t\t\t'vi',\n\t\t\t\t'svi',\n\t\t\t\t'lvi',\n\t\t\t\t'dvi',\n\t\t\t\t'vb',\n\t\t\t\t'svb',\n\t\t\t\t'lvb',\n\t\t\t\t'dvb',\n\t\t\t\t'vmin',\n\t\t\t\t'svmin',\n\t\t\t\t'lvmin',\n\t\t\t\t'dvmin',\n\t\t\t\t'vmax',\n\t\t\t\t'svmax',\n\t\t\t\t'lvmax',\n\t\t\t\t'dvmax',\n\t\t\t].includes( newUnit ) &&\n\t\t\tcurrentValue > 100\n\t\t) {\n\t\t\t// When converting to `%` or viewport-relative units, cap the new value at 100.\n\t\t\tonChange( 100 + newUnit );\n\t\t}\n\t};\n\n\treturn (\n\t\t<fieldset className=\"block-editor-height-control\">\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t{ label }\n\t\t\t</BaseControl.VisualLabel>\n\t\t\t<Flex>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<UnitControl\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\tonUnitChange={ handleUnitChange }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<Spacer marginX={ 2 } marginBottom={ 0 }>\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tvalue={ customRangeValue }\n\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\tmax={\n\t\t\t\t\t\t\t\tRANGE_CONTROL_CUSTOM_SETTINGS[ selectedUnit ]\n\t\t\t\t\t\t\t\t\t?.max ?? 100\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstep={\n\t\t\t\t\t\t\t\tRANGE_CONTROL_CUSTOM_SETTINGS[ selectedUnit ]\n\t\t\t\t\t\t\t\t\t?.step ?? 0.1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t\t\tonChange={ handleSliderChange }\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Spacer>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</fieldset>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport function useGetNumberOfBlocksBeforeCell( gridClientId, numColumns ) {\n\tconst { getBlockOrder, getBlockAttributes } = useSelect( blockEditorStore );\n\n\tconst getNumberOfBlocksBeforeCell = ( column, row ) => {\n\t\tconst targetIndex = ( row - 1 ) * numColumns + column - 1;\n\n\t\tlet count = 0;\n\t\tfor ( const clientId of getBlockOrder( gridClientId ) ) {\n\t\t\tconst { columnStart, rowStart } =\n\t\t\t\tgetBlockAttributes( clientId ).style?.layout ?? {};\n\t\t\tconst cellIndex = ( rowStart - 1 ) * numColumns + columnStart - 1;\n\t\t\tif ( cellIndex < targetIndex ) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t};\n\n\treturn getNumberOfBlocksBeforeCell;\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalInputControl as InputControl,\n\t__experimentalVStack as VStack,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalUseCustomUnits as useCustomUnits,\n\tFlex,\n\tFlexItem,\n} from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\nimport { useEffect } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useGetNumberOfBlocksBeforeCell } from '../grid/use-get-number-of-blocks-before-cell';\nimport { store as blockEditorStore } from '../../store';\nimport { useSettings } from '../use-settings';\n\nfunction helpText( selfStretch, parentLayout ) {\n\tconst { orientation = 'horizontal' } = parentLayout;\n\n\tif ( selfStretch === 'fill' ) {\n\t\treturn __( 'Stretch to fill available space.' );\n\t}\n\tif ( selfStretch === 'fixed' && orientation === 'horizontal' ) {\n\t\treturn __( 'Specify a fixed width.' );\n\t} else if ( selfStretch === 'fixed' ) {\n\t\treturn __( 'Specify a fixed height.' );\n\t}\n\treturn __( 'Fit contents.' );\n}\n\n/**\n * Form to edit the child layout value.\n *\n * @param {Object}   props                  Props.\n * @param {Object}   props.value            The child layout value.\n * @param {Function} props.onChange         Function to update the child layout value.\n * @param {Object}   props.parentLayout     The parent layout value.\n *\n * @param {boolean}  props.isShownByDefault\n * @param {string}   props.panelId\n * @return {Element} child layout edit element.\n */\nexport default function ChildLayoutControl( {\n\tvalue: childLayout = {},\n\tonChange,\n\tparentLayout,\n\tisShownByDefault,\n\tpanelId,\n} ) {\n\tconst {\n\t\ttype: parentType,\n\t\tdefault: { type: defaultParentType = 'default' } = {},\n\t} = parentLayout ?? {};\n\tconst parentLayoutType = parentType || defaultParentType;\n\n\tif ( parentLayoutType === 'flex' ) {\n\t\treturn (\n\t\t\t<FlexControls\n\t\t\t\tchildLayout={ childLayout }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tparentLayout={ parentLayout }\n\t\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\t\tpanelId={ panelId }\n\t\t\t/>\n\t\t);\n\t} else if ( parentLayoutType === 'grid' ) {\n\t\treturn (\n\t\t\t<GridControls\n\t\t\t\tchildLayout={ childLayout }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tparentLayout={ parentLayout }\n\t\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\t\tpanelId={ panelId }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n}\n\nfunction FlexControls( {\n\tchildLayout,\n\tonChange,\n\tparentLayout,\n\tisShownByDefault,\n\tpanelId,\n} ) {\n\tconst { selfStretch, flexSize } = childLayout;\n\tconst { orientation = 'horizontal' } = parentLayout ?? {};\n\tconst hasFlexValue = () => !! selfStretch;\n\tconst flexResetLabel =\n\t\torientation === 'horizontal' ? __( 'Width' ) : __( 'Height' );\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: availableUnits || [\n\t\t\t'%',\n\t\t\t'px',\n\t\t\t'em',\n\t\t\t'rem',\n\t\t\t'vh',\n\t\t\t'vw',\n\t\t],\n\t} );\n\tconst resetFlex = () => {\n\t\tonChange( {\n\t\t\tselfStretch: undefined,\n\t\t\tflexSize: undefined,\n\t\t} );\n\t};\n\n\tuseEffect( () => {\n\t\tif ( selfStretch === 'fixed' && ! flexSize ) {\n\t\t\tonChange( {\n\t\t\t\t...childLayout,\n\t\t\t\tselfStretch: 'fit',\n\t\t\t} );\n\t\t}\n\t}, [] );\n\n\treturn (\n\t\t<VStack\n\t\t\tas={ ToolsPanelItem }\n\t\t\tspacing={ 2 }\n\t\t\thasValue={ hasFlexValue }\n\t\t\tlabel={ flexResetLabel }\n\t\t\tonDeselect={ resetFlex }\n\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t<ToggleGroupControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\tlabel={ childLayoutOrientation( parentLayout ) }\n\t\t\t\tvalue={ selfStretch || 'fit' }\n\t\t\t\thelp={ helpText( selfStretch, parentLayout ) }\n\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\tconst newFlexSize = value !== 'fixed' ? null : flexSize;\n\t\t\t\t\tonChange( {\n\t\t\t\t\t\tselfStretch: value,\n\t\t\t\t\t\tflexSize: newFlexSize,\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t\tisBlock\n\t\t\t>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey=\"fit\"\n\t\t\t\t\tvalue=\"fit\"\n\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t'Fit',\n\t\t\t\t\t\t'Intrinsic block width in flex layout'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey=\"fill\"\n\t\t\t\t\tvalue=\"fill\"\n\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t'Grow',\n\t\t\t\t\t\t'Block with expanding width in flex layout'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey=\"fixed\"\n\t\t\t\t\tvalue=\"fixed\"\n\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t'Fixed',\n\t\t\t\t\t\t'Block with fixed width in flex layout'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</ToggleGroupControl>\n\t\t\t{ selfStretch === 'fixed' && (\n\t\t\t\t<UnitControl\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\tunits={ units }\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\tselfStretch,\n\t\t\t\t\t\t\tflexSize: value,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\tvalue={ flexSize }\n\t\t\t\t\tmin={ 0 }\n\t\t\t\t\tlabel={ flexResetLabel }\n\t\t\t\t\thideLabelFromVision\n\t\t\t\t/>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n\nexport function childLayoutOrientation( parentLayout ) {\n\tconst { orientation = 'horizontal' } = parentLayout;\n\treturn orientation === 'horizontal' ? __( 'Width' ) : __( 'Height' );\n}\n\nfunction GridControls( {\n\tchildLayout,\n\tonChange,\n\tparentLayout,\n\tisShownByDefault,\n\tpanelId,\n} ) {\n\tconst { columnStart, rowStart, columnSpan, rowSpan } = childLayout;\n\tconst { columnCount, rowCount } = parentLayout ?? {};\n\tconst rootClientId = useSelect( ( select ) =>\n\t\tselect( blockEditorStore ).getBlockRootClientId( panelId )\n\t);\n\tconst { moveBlocksToPosition, __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\tconst getNumberOfBlocksBeforeCell = useGetNumberOfBlocksBeforeCell(\n\t\trootClientId,\n\t\tcolumnCount || 3\n\t);\n\tconst hasStartValue = () => !! columnStart || !! rowStart;\n\tconst hasSpanValue = () => !! columnSpan || !! rowSpan;\n\tconst resetGridStarts = () => {\n\t\tonChange( {\n\t\t\tcolumnStart: undefined,\n\t\t\trowStart: undefined,\n\t\t} );\n\t};\n\tconst resetGridSpans = () => {\n\t\tonChange( {\n\t\t\tcolumnSpan: undefined,\n\t\t\trowSpan: undefined,\n\t\t} );\n\t};\n\n\t// Calculate max column span based on current position and grid width\n\tconst maxColumnSpan = columnCount\n\t\t? columnCount - ( columnStart ?? 1 ) + 1\n\t\t: undefined;\n\n\t// Calculate max row span based on current position and grid height\n\tconst maxRowSpan =\n\t\twindow.__experimentalEnableGridInteractivity && rowCount\n\t\t\t? rowCount - ( rowStart ?? 1 ) + 1\n\t\t\t: undefined;\n\n\treturn (\n\t\t<>\n\t\t\t<Flex\n\t\t\t\tas={ ToolsPanelItem }\n\t\t\t\thasValue={ hasSpanValue }\n\t\t\t\tlabel={ __( 'Grid span' ) }\n\t\t\t\tonDeselect={ resetGridSpans }\n\t\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\t\tpanelId={ panelId }\n\t\t\t>\n\t\t\t\t<FlexItem style={ { width: '50%' } }>\n\t\t\t\t\t<InputControl\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\tlabel={ __( 'Column span' ) }\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t// Don't allow unsetting.\n\t\t\t\t\t\t\tconst newColumnSpan =\n\t\t\t\t\t\t\t\tvalue === '' ? 1 : parseInt( value, 10 );\n\t\t\t\t\t\t\tconst constrainedValue = maxColumnSpan\n\t\t\t\t\t\t\t\t? Math.min( newColumnSpan, maxColumnSpan )\n\t\t\t\t\t\t\t\t: newColumnSpan;\n\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\tcolumnStart,\n\t\t\t\t\t\t\t\trowStart,\n\t\t\t\t\t\t\t\trowSpan,\n\t\t\t\t\t\t\t\tcolumnSpan: constrainedValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ columnSpan ?? 1 }\n\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\tmax={ maxColumnSpan }\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem style={ { width: '50%' } }>\n\t\t\t\t\t<InputControl\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\tlabel={ __( 'Row span' ) }\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\tconst newRowSpan =\n\t\t\t\t\t\t\t\tvalue === '' ? 1 : parseInt( value, 10 );\n\t\t\t\t\t\t\tconst constrainedValue = maxRowSpan\n\t\t\t\t\t\t\t\t? Math.min( newRowSpan, maxRowSpan )\n\t\t\t\t\t\t\t\t: newRowSpan;\n\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\tcolumnStart,\n\t\t\t\t\t\t\t\trowStart,\n\t\t\t\t\t\t\t\tcolumnSpan,\n\t\t\t\t\t\t\t\trowSpan: constrainedValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ rowSpan ?? 1 }\n\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\tmax={ maxRowSpan }\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\n\t\t\t{ window.__experimentalEnableGridInteractivity && (\n\t\t\t\t// Use Flex with an explicit width on the FlexItem instead of HStack to\n\t\t\t\t// work around an issue in webkit where inputs with a max attribute are\n\t\t\t\t// sized incorrectly.\n\t\t\t\t<Flex\n\t\t\t\t\tas={ ToolsPanelItem }\n\t\t\t\t\thasValue={ hasStartValue }\n\t\t\t\t\tlabel={ __( 'Grid placement' ) }\n\t\t\t\t\tonDeselect={ resetGridStarts }\n\t\t\t\t\tisShownByDefault={ false }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<FlexItem style={ { width: '50%' } }>\n\t\t\t\t\t\t<InputControl\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t\tlabel={ __( 'Column' ) }\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\t// Don't allow unsetting.\n\t\t\t\t\t\t\t\tconst newColumnStart =\n\t\t\t\t\t\t\t\t\tvalue === '' ? 1 : parseInt( value, 10 );\n\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\tcolumnStart: newColumnStart,\n\t\t\t\t\t\t\t\t\trowStart,\n\t\t\t\t\t\t\t\t\tcolumnSpan,\n\t\t\t\t\t\t\t\t\trowSpan,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t\t[ panelId ],\n\t\t\t\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\t\t\t\tgetNumberOfBlocksBeforeCell(\n\t\t\t\t\t\t\t\t\t\tnewColumnStart,\n\t\t\t\t\t\t\t\t\t\trowStart\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ columnStart ?? 1 }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\tmax={\n\t\t\t\t\t\t\t\tcolumnCount\n\t\t\t\t\t\t\t\t\t? columnCount - ( columnSpan ?? 1 ) + 1\n\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexItem>\n\t\t\t\t\t<FlexItem style={ { width: '50%' } }>\n\t\t\t\t\t\t<InputControl\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t\tlabel={ __( 'Row' ) }\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\t// Don't allow unsetting.\n\t\t\t\t\t\t\t\tconst newRowStart =\n\t\t\t\t\t\t\t\t\tvalue === '' ? 1 : parseInt( value, 10 );\n\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\tcolumnStart,\n\t\t\t\t\t\t\t\t\trowStart: newRowStart,\n\t\t\t\t\t\t\t\t\tcolumnSpan,\n\t\t\t\t\t\t\t\t\trowSpan,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t\t[ panelId ],\n\t\t\t\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\t\t\t\tgetNumberOfBlocksBeforeCell(\n\t\t\t\t\t\t\t\t\t\tcolumnStart,\n\t\t\t\t\t\t\t\t\t\tnewRowStart\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ rowStart ?? 1 }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\tmax={\n\t\t\t\t\t\t\t\trowCount\n\t\t\t\t\t\t\t\t\t? rowCount - ( rowSpan ?? 1 ) + 1\n\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexItem>\n\t\t\t\t</Flex>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tSelectControl,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\n\n/**\n * @typedef {import('@wordpress/components/build-types/select-control/types').SelectControlProps} SelectControlProps\n */\n\n/**\n * @callback AspectRatioToolPropsOnChange\n * @param {string} [value] New aspect ratio value.\n * @return {void} No return.\n */\n\n/**\n * @typedef {Object} AspectRatioToolProps\n * @property {string}                       [panelId]          ID of the panel this tool is associated with.\n * @property {string}                       [value]            Current aspect ratio value.\n * @property {AspectRatioToolPropsOnChange} [onChange]         Callback to update the aspect ratio value.\n * @property {SelectControlProps[]}         [options]          Aspect ratio options.\n * @property {string}                       [defaultValue]     Default aspect ratio value.\n * @property {boolean}                      [isShownByDefault] Whether the tool is shown by default.\n */\n\nexport default function AspectRatioTool( {\n\tpanelId,\n\tvalue,\n\tonChange = () => {},\n\toptions,\n\tdefaultValue = 'auto',\n\thasValue,\n\tisShownByDefault = true,\n} ) {\n\t// Match the CSS default so if the value is used directly in CSS it will look correct in the control.\n\tconst displayValue = value ?? 'auto';\n\n\tconst [ defaultRatios, themeRatios, showDefaultRatios ] = useSettings(\n\t\t'dimensions.aspectRatios.default',\n\t\t'dimensions.aspectRatios.theme',\n\t\t'dimensions.defaultAspectRatios'\n\t);\n\n\tconst themeOptions = themeRatios?.map( ( { name, ratio } ) => ( {\n\t\tlabel: name,\n\t\tvalue: ratio,\n\t} ) );\n\n\tconst defaultOptions = defaultRatios?.map( ( { name, ratio } ) => ( {\n\t\tlabel: name,\n\t\tvalue: ratio,\n\t} ) );\n\n\tconst aspectRatioOptions = [\n\t\t{\n\t\t\tlabel: _x(\n\t\t\t\t'Original',\n\t\t\t\t'Aspect ratio option for dimensions control'\n\t\t\t),\n\t\t\tvalue: 'auto',\n\t\t},\n\t\t...( showDefaultRatios ? defaultOptions : [] ),\n\t\t...( themeOptions ? themeOptions : [] ),\n\t\t{\n\t\t\tlabel: _x( 'Custom', 'Aspect ratio option for dimensions control' ),\n\t\t\tvalue: 'custom',\n\t\t\tdisabled: true,\n\t\t\thidden: true,\n\t\t},\n\t];\n\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\thasValue={\n\t\t\t\thasValue ? hasValue : () => displayValue !== defaultValue\n\t\t\t}\n\t\t\tlabel={ __( 'Aspect ratio' ) }\n\t\t\tonDeselect={ () => onChange( undefined ) }\n\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t<SelectControl\n\t\t\t\tlabel={ __( 'Aspect ratio' ) }\n\t\t\t\tvalue={ displayValue }\n\t\t\t\toptions={ options ?? aspectRatioOptions }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t/>\n\t\t</ToolsPanelItem>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\tBoxControl,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalInputControlPrefixWrapper as InputControlPrefixWrapper,\n} from '@wordpress/components';\nimport { Icon, alignNone, stretchWide } from '@wordpress/icons';\nimport { useCallback, useState, Platform } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromVariable, useToolsPanelDropdownMenuProps } from './utils';\nimport SpacingSizesControl from '../spacing-sizes-control';\nimport HeightControl from '../height-control';\nimport ChildLayoutControl from '../child-layout-control';\nimport AspectRatioTool from '../dimensions-tool/aspect-ratio-tool';\nimport { cleanEmptyObject } from '../../hooks/utils';\nimport { setImmutably } from '../../utils/object';\n\nconst AXIAL_SIDES = [ 'horizontal', 'vertical' ];\n\nexport function useHasDimensionsPanel( settings ) {\n\tconst hasContentSize = useHasContentSize( settings );\n\tconst hasWideSize = useHasWideSize( settings );\n\tconst hasPadding = useHasPadding( settings );\n\tconst hasMargin = useHasMargin( settings );\n\tconst hasGap = useHasGap( settings );\n\tconst hasMinHeight = useHasMinHeight( settings );\n\tconst hasAspectRatio = useHasAspectRatio( settings );\n\tconst hasChildLayout = useHasChildLayout( settings );\n\n\treturn (\n\t\tPlatform.OS === 'web' &&\n\t\t( hasContentSize ||\n\t\t\thasWideSize ||\n\t\t\thasPadding ||\n\t\t\thasMargin ||\n\t\t\thasGap ||\n\t\t\thasMinHeight ||\n\t\t\thasAspectRatio ||\n\t\t\thasChildLayout )\n\t);\n}\n\nfunction useHasContentSize( settings ) {\n\treturn settings?.layout?.contentSize;\n}\n\nfunction useHasWideSize( settings ) {\n\treturn settings?.layout?.wideSize;\n}\n\nfunction useHasPadding( settings ) {\n\treturn settings?.spacing?.padding;\n}\n\nfunction useHasMargin( settings ) {\n\treturn settings?.spacing?.margin;\n}\n\nfunction useHasGap( settings ) {\n\treturn settings?.spacing?.blockGap;\n}\n\nfunction useHasMinHeight( settings ) {\n\treturn settings?.dimensions?.minHeight;\n}\n\nfunction useHasAspectRatio( settings ) {\n\treturn settings?.dimensions?.aspectRatio;\n}\n\nfunction useHasChildLayout( settings ) {\n\tconst {\n\t\ttype: parentLayoutType = 'default',\n\t\tdefault: { type: defaultParentLayoutType = 'default' } = {},\n\t\tallowSizingOnChildren = false,\n\t} = settings?.parentLayout ?? {};\n\n\tconst support =\n\t\t( defaultParentLayoutType === 'flex' ||\n\t\t\tparentLayoutType === 'flex' ||\n\t\t\tdefaultParentLayoutType === 'grid' ||\n\t\t\tparentLayoutType === 'grid' ) &&\n\t\tallowSizingOnChildren;\n\treturn !! settings?.layout && support;\n}\n\nfunction useHasSpacingPresets( settings ) {\n\tconst { defaultSpacingSizes, spacingSizes } = settings?.spacing || {};\n\treturn (\n\t\t( defaultSpacingSizes !== false &&\n\t\t\tspacingSizes?.default?.length > 0 ) ||\n\t\tspacingSizes?.theme?.length > 0 ||\n\t\tspacingSizes?.custom?.length > 0\n\t);\n}\n\nfunction filterValuesBySides( values, sides ) {\n\t// If no custom side configuration, all sides are opted into by default.\n\t// Without any values, we have nothing to filter either.\n\tif ( ! sides || ! values ) {\n\t\treturn values;\n\t}\n\n\t// Only include sides opted into within filtered values.\n\tconst filteredValues = {};\n\tsides.forEach( ( side ) => {\n\t\tif ( side === 'vertical' ) {\n\t\t\tfilteredValues.top = values.top;\n\t\t\tfilteredValues.bottom = values.bottom;\n\t\t}\n\t\tif ( side === 'horizontal' ) {\n\t\t\tfilteredValues.left = values.left;\n\t\t\tfilteredValues.right = values.right;\n\t\t}\n\t\tfilteredValues[ side ] = values?.[ side ];\n\t} );\n\n\treturn filteredValues;\n}\n\nfunction splitStyleValue( value ) {\n\t// Check for shorthand value (a string value).\n\tif ( value && typeof value === 'string' ) {\n\t\t// Convert to value for individual sides for BoxControl.\n\t\treturn {\n\t\t\ttop: value,\n\t\t\tright: value,\n\t\t\tbottom: value,\n\t\t\tleft: value,\n\t\t};\n\t}\n\n\treturn value;\n}\n\nfunction splitGapValue( value, isAxialGap ) {\n\tif ( ! value ) {\n\t\treturn value;\n\t}\n\n\t// Check for shorthand value (a string value).\n\tif ( typeof value === 'string' ) {\n\t\t/*\n\t\t * Map the string value to appropriate sides for the spacing control depending\n\t\t * on whether the current block has axial gap support or not.\n\t\t *\n\t\t * Note: The axial value pairs must match for the spacing control to display\n\t\t * the appropriate horizontal/vertical sliders.\n\t\t */\n\t\treturn isAxialGap\n\t\t\t? { top: value, right: value, bottom: value, left: value }\n\t\t\t: { top: value };\n\t}\n\n\treturn {\n\t\t...value,\n\t\tright: value?.left,\n\t\tbottom: value?.top,\n\t};\n}\n\nfunction DimensionsToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tcontentSize: true,\n\twideSize: true,\n\tpadding: true,\n\tmargin: true,\n\tblockGap: true,\n\tminHeight: true,\n\taspectRatio: true,\n\tchildLayout: true,\n};\n\nexport default function DimensionsPanel( {\n\tas: Wrapper = DimensionsToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n\tonVisualize = () => {},\n\t// Special case because the layout controls are not part of the dimensions panel\n\t// in global styles but not in block inspector.\n\tincludeLayoutControls = false,\n} ) {\n\tconst { dimensions, spacing } = settings;\n\n\tconst decodeValue = ( rawValue ) => {\n\t\tif ( rawValue && typeof rawValue === 'object' ) {\n\t\t\treturn Object.keys( rawValue ).reduce( ( acc, key ) => {\n\t\t\t\tacc[ key ] = getValueFromVariable(\n\t\t\t\t\t{ settings: { dimensions, spacing } },\n\t\t\t\t\t'',\n\t\t\t\t\trawValue[ key ]\n\t\t\t\t);\n\t\t\t\treturn acc;\n\t\t\t}, {} );\n\t\t}\n\t\treturn getValueFromVariable(\n\t\t\t{ settings: { dimensions, spacing } },\n\t\t\t'',\n\t\t\trawValue\n\t\t);\n\t};\n\n\tconst showSpacingPresetsControl = useHasSpacingPresets( settings );\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: settings?.spacing?.units || [\n\t\t\t'%',\n\t\t\t'px',\n\t\t\t'em',\n\t\t\t'rem',\n\t\t\t'vw',\n\t\t],\n\t} );\n\n\t//Minimum Margin Value\n\tconst minimumMargin = -Infinity;\n\tconst [ minMarginValue, setMinMarginValue ] = useState( minimumMargin );\n\n\t// Content Width\n\tconst showContentSizeControl =\n\t\tuseHasContentSize( settings ) && includeLayoutControls;\n\tconst contentSizeValue = decodeValue( inheritedValue?.layout?.contentSize );\n\tconst setContentSizeValue = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'layout', 'contentSize' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasUserSetContentSizeValue = () => !! value?.layout?.contentSize;\n\tconst resetContentSizeValue = () => setContentSizeValue( undefined );\n\n\t// Wide Width\n\tconst showWideSizeControl =\n\t\tuseHasWideSize( settings ) && includeLayoutControls;\n\tconst wideSizeValue = decodeValue( inheritedValue?.layout?.wideSize );\n\tconst setWideSizeValue = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'layout', 'wideSize' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasUserSetWideSizeValue = () => !! value?.layout?.wideSize;\n\tconst resetWideSizeValue = () => setWideSizeValue( undefined );\n\n\t// Padding\n\tconst showPaddingControl = useHasPadding( settings );\n\tconst rawPadding = decodeValue( inheritedValue?.spacing?.padding );\n\tconst paddingValues = splitStyleValue( rawPadding );\n\tconst paddingSides = Array.isArray( settings?.spacing?.padding )\n\t\t? settings?.spacing?.padding\n\t\t: settings?.spacing?.padding?.sides;\n\tconst isAxialPadding =\n\t\tpaddingSides &&\n\t\tpaddingSides.some( ( side ) => AXIAL_SIDES.includes( side ) );\n\tconst setPaddingValues = ( newPaddingValues ) => {\n\t\tconst padding = filterValuesBySides( newPaddingValues, paddingSides );\n\t\tonChange( setImmutably( value, [ 'spacing', 'padding' ], padding ) );\n\t};\n\tconst hasPaddingValue = () =>\n\t\t!! value?.spacing?.padding &&\n\t\tObject.keys( value?.spacing?.padding ).length;\n\tconst resetPaddingValue = () => setPaddingValues( undefined );\n\tconst onMouseOverPadding = () => onVisualize( 'padding' );\n\n\t// Margin\n\tconst showMarginControl = useHasMargin( settings );\n\tconst rawMargin = decodeValue( inheritedValue?.spacing?.margin );\n\tconst marginValues = splitStyleValue( rawMargin );\n\tconst marginSides = Array.isArray( settings?.spacing?.margin )\n\t\t? settings?.spacing?.margin\n\t\t: settings?.spacing?.margin?.sides;\n\tconst isAxialMargin =\n\t\tmarginSides &&\n\t\tmarginSides.some( ( side ) => AXIAL_SIDES.includes( side ) );\n\tconst setMarginValues = ( newMarginValues ) => {\n\t\tconst margin = filterValuesBySides( newMarginValues, marginSides );\n\t\tonChange( setImmutably( value, [ 'spacing', 'margin' ], margin ) );\n\t};\n\tconst hasMarginValue = () =>\n\t\t!! value?.spacing?.margin &&\n\t\tObject.keys( value?.spacing?.margin ).length;\n\tconst resetMarginValue = () => setMarginValues( undefined );\n\tconst onMouseOverMargin = () => onVisualize( 'margin' );\n\n\t// Block Gap\n\tconst showGapControl = useHasGap( settings );\n\tconst gapSides = Array.isArray( settings?.spacing?.blockGap )\n\t\t? settings?.spacing?.blockGap\n\t\t: settings?.spacing?.blockGap?.sides;\n\tconst isAxialGap =\n\t\tgapSides && gapSides.some( ( side ) => AXIAL_SIDES.includes( side ) );\n\tconst gapValue = decodeValue( inheritedValue?.spacing?.blockGap );\n\tconst gapValues = splitGapValue( gapValue, isAxialGap );\n\tconst setGapValue = ( newGapValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably( value, [ 'spacing', 'blockGap' ], newGapValue )\n\t\t);\n\t};\n\tconst setGapValues = ( nextBoxGapValue ) => {\n\t\tif ( ! nextBoxGapValue ) {\n\t\t\tsetGapValue( null );\n\t\t}\n\t\t// If axial gap is not enabled, treat the 'top' value as the shorthand gap value.\n\t\tif ( ! isAxialGap && nextBoxGapValue?.hasOwnProperty( 'top' ) ) {\n\t\t\tsetGapValue( nextBoxGapValue.top );\n\t\t} else {\n\t\t\tsetGapValue( {\n\t\t\t\ttop: nextBoxGapValue?.top,\n\t\t\t\tleft: nextBoxGapValue?.left,\n\t\t\t} );\n\t\t}\n\t};\n\tconst resetGapValue = () => setGapValue( undefined );\n\tconst hasGapValue = () => !! value?.spacing?.blockGap;\n\n\t// Min Height\n\tconst showMinHeightControl = useHasMinHeight( settings );\n\tconst minHeightValue = decodeValue( inheritedValue?.dimensions?.minHeight );\n\tconst setMinHeightValue = ( newValue ) => {\n\t\tconst tempValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'dimensions', 'minHeight' ],\n\t\t\tnewValue\n\t\t);\n\t\t// Apply min-height, while removing any applied aspect ratio.\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\ttempValue,\n\t\t\t\t[ 'dimensions', 'aspectRatio' ],\n\t\t\t\tundefined\n\t\t\t)\n\t\t);\n\t};\n\tconst resetMinHeightValue = () => {\n\t\tsetMinHeightValue( undefined );\n\t};\n\tconst hasMinHeightValue = () => !! value?.dimensions?.minHeight;\n\n\t// Aspect Ratio\n\tconst showAspectRatioControl = useHasAspectRatio( settings );\n\tconst aspectRatioValue = decodeValue(\n\t\tinheritedValue?.dimensions?.aspectRatio\n\t);\n\tconst setAspectRatioValue = ( newValue ) => {\n\t\tconst tempValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'dimensions', 'aspectRatio' ],\n\t\t\tnewValue\n\t\t);\n\t\t// Apply aspect-ratio, while removing any applied min-height.\n\t\tonChange(\n\t\t\tsetImmutably( tempValue, [ 'dimensions', 'minHeight' ], undefined )\n\t\t);\n\t};\n\tconst hasAspectRatioValue = () => !! value?.dimensions?.aspectRatio;\n\n\t// Child Layout\n\tconst showChildLayoutControl = useHasChildLayout( settings );\n\tconst childLayout = inheritedValue?.layout;\n\n\tconst setChildLayout = ( newChildLayout ) => {\n\t\tonChange( {\n\t\t\t...value,\n\t\t\tlayout: {\n\t\t\t\t...newChildLayout,\n\t\t\t},\n\t\t} );\n\t};\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tlayout: cleanEmptyObject( {\n\t\t\t\t...previousValue?.layout,\n\t\t\t\tcontentSize: undefined,\n\t\t\t\twideSize: undefined,\n\t\t\t\tselfStretch: undefined,\n\t\t\t\tflexSize: undefined,\n\t\t\t\tcolumnStart: undefined,\n\t\t\t\trowStart: undefined,\n\t\t\t\tcolumnSpan: undefined,\n\t\t\t\trowSpan: undefined,\n\t\t\t} ),\n\t\t\tspacing: {\n\t\t\t\t...previousValue?.spacing,\n\t\t\t\tpadding: undefined,\n\t\t\t\tmargin: undefined,\n\t\t\t\tblockGap: undefined,\n\t\t\t},\n\t\t\tdimensions: {\n\t\t\t\t...previousValue?.dimensions,\n\t\t\t\tminHeight: undefined,\n\t\t\t\taspectRatio: undefined,\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\tconst onMouseLeaveControls = () => onVisualize( false );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ ( showContentSizeControl || showWideSizeControl ) && (\n\t\t\t\t<span className=\"span-columns\">\n\t\t\t\t\t{ __( 'Set the width of the main content area.' ) }\n\t\t\t\t</span>\n\t\t\t) }\n\t\t\t{ showContentSizeControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Content width' ) }\n\t\t\t\t\thasValue={ hasUserSetContentSizeValue }\n\t\t\t\t\tonDeselect={ resetContentSizeValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.contentSize ??\n\t\t\t\t\t\tDEFAULT_CONTROLS.contentSize\n\t\t\t\t\t}\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tlabel={ __( 'Content width' ) }\n\t\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\t\tvalue={ contentSizeValue || '' }\n\t\t\t\t\t\tonChange={ ( nextContentSize ) => {\n\t\t\t\t\t\t\tsetContentSizeValue( nextContentSize );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\tprefix={\n\t\t\t\t\t\t\t<InputControlPrefixWrapper variant=\"icon\">\n\t\t\t\t\t\t\t\t<Icon icon={ alignNone } />\n\t\t\t\t\t\t\t</InputControlPrefixWrapper>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showWideSizeControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Wide width' ) }\n\t\t\t\t\thasValue={ hasUserSetWideSizeValue }\n\t\t\t\t\tonDeselect={ resetWideSizeValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.wideSize ?? DEFAULT_CONTROLS.wideSize\n\t\t\t\t\t}\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tlabel={ __( 'Wide width' ) }\n\t\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\t\tvalue={ wideSizeValue || '' }\n\t\t\t\t\t\tonChange={ ( nextWideSize ) => {\n\t\t\t\t\t\t\tsetWideSizeValue( nextWideSize );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\tprefix={\n\t\t\t\t\t\t\t<InputControlPrefixWrapper variant=\"icon\">\n\t\t\t\t\t\t\t\t<Icon icon={ stretchWide } />\n\t\t\t\t\t\t\t</InputControlPrefixWrapper>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showPaddingControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasPaddingValue }\n\t\t\t\t\tlabel={ __( 'Padding' ) }\n\t\t\t\t\tonDeselect={ resetPaddingValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.padding ?? DEFAULT_CONTROLS.padding\n\t\t\t\t\t}\n\t\t\t\t\tclassName={ clsx( {\n\t\t\t\t\t\t'tools-panel-item-spacing': showSpacingPresetsControl,\n\t\t\t\t\t} ) }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t{ ! showSpacingPresetsControl && (\n\t\t\t\t\t\t<BoxControl\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tvalues={ paddingValues }\n\t\t\t\t\t\t\tonChange={ setPaddingValues }\n\t\t\t\t\t\t\tlabel={ __( 'Padding' ) }\n\t\t\t\t\t\t\tsides={ paddingSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tsplitOnAxis={ isAxialPadding }\n\t\t\t\t\t\t\tinputProps={ {\n\t\t\t\t\t\t\t\tonMouseOver: onMouseOverPadding,\n\t\t\t\t\t\t\t\tonMouseOut: onMouseLeaveControls,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showSpacingPresetsControl && (\n\t\t\t\t\t\t<SpacingSizesControl\n\t\t\t\t\t\t\tvalues={ paddingValues }\n\t\t\t\t\t\t\tonChange={ setPaddingValues }\n\t\t\t\t\t\t\tlabel={ __( 'Padding' ) }\n\t\t\t\t\t\t\tsides={ paddingSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tonMouseOver={ onMouseOverPadding }\n\t\t\t\t\t\t\tonMouseOut={ onMouseLeaveControls }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showMarginControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasMarginValue }\n\t\t\t\t\tlabel={ __( 'Margin' ) }\n\t\t\t\t\tonDeselect={ resetMarginValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.margin ?? DEFAULT_CONTROLS.margin\n\t\t\t\t\t}\n\t\t\t\t\tclassName={ clsx( {\n\t\t\t\t\t\t'tools-panel-item-spacing': showSpacingPresetsControl,\n\t\t\t\t\t} ) }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t{ ! showSpacingPresetsControl && (\n\t\t\t\t\t\t<BoxControl\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tvalues={ marginValues }\n\t\t\t\t\t\t\tonChange={ setMarginValues }\n\t\t\t\t\t\t\tinputProps={ {\n\t\t\t\t\t\t\t\tmin: minMarginValue,\n\t\t\t\t\t\t\t\tonDragStart: () => {\n\t\t\t\t\t\t\t\t\t// Reset to 0 in case the value was negative.\n\t\t\t\t\t\t\t\t\tsetMinMarginValue( 0 );\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonDragEnd: () => {\n\t\t\t\t\t\t\t\t\tsetMinMarginValue( minimumMargin );\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonMouseOver: onMouseOverMargin,\n\t\t\t\t\t\t\t\tonMouseOut: onMouseLeaveControls,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={ __( 'Margin' ) }\n\t\t\t\t\t\t\tsides={ marginSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tsplitOnAxis={ isAxialMargin }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showSpacingPresetsControl && (\n\t\t\t\t\t\t<SpacingSizesControl\n\t\t\t\t\t\t\tvalues={ marginValues }\n\t\t\t\t\t\t\tonChange={ setMarginValues }\n\t\t\t\t\t\t\tminimumCustomValue={ -Infinity }\n\t\t\t\t\t\t\tlabel={ __( 'Margin' ) }\n\t\t\t\t\t\t\tsides={ marginSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tonMouseOver={ onMouseOverMargin }\n\t\t\t\t\t\t\tonMouseOut={ onMouseLeaveControls }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showGapControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasGapValue }\n\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\tonDeselect={ resetGapValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.blockGap ?? DEFAULT_CONTROLS.blockGap\n\t\t\t\t\t}\n\t\t\t\t\tclassName={ clsx( {\n\t\t\t\t\t\t'tools-panel-item-spacing': showSpacingPresetsControl,\n\t\t\t\t\t\t'single-column':\n\t\t\t\t\t\t\t// If UnitControl is used, should be single-column.\n\t\t\t\t\t\t\t! showSpacingPresetsControl && ! isAxialGap,\n\t\t\t\t\t} ) }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t{ ! showSpacingPresetsControl &&\n\t\t\t\t\t\t( isAxialGap ? (\n\t\t\t\t\t\t\t<BoxControl\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\t\tonChange={ setGapValues }\n\t\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\t\tsides={ gapSides }\n\t\t\t\t\t\t\t\tvalues={ gapValues }\n\t\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\t\tsplitOnAxis={ isAxialGap }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\t\tonChange={ setGapValue }\n\t\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\t\tvalue={ gapValue }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t{ showSpacingPresetsControl && (\n\t\t\t\t\t\t<SpacingSizesControl\n\t\t\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\tonChange={ setGapValues }\n\t\t\t\t\t\t\tshowSideInLabel={ false }\n\t\t\t\t\t\t\tsides={ isAxialGap ? gapSides : [ 'top' ] } // Use 'top' as the shorthand property in non-axial configurations.\n\t\t\t\t\t\t\tvalues={ gapValues }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showChildLayoutControl && (\n\t\t\t\t<ChildLayoutControl\n\t\t\t\t\tvalue={ childLayout }\n\t\t\t\t\tonChange={ setChildLayout }\n\t\t\t\t\tparentLayout={ settings?.parentLayout }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.childLayout ??\n\t\t\t\t\t\tDEFAULT_CONTROLS.childLayout\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ showMinHeightControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasMinHeightValue }\n\t\t\t\t\tlabel={ __( 'Minimum height' ) }\n\t\t\t\t\tonDeselect={ resetMinHeightValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.minHeight ?? DEFAULT_CONTROLS.minHeight\n\t\t\t\t\t}\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<HeightControl\n\t\t\t\t\t\tlabel={ __( 'Minimum height' ) }\n\t\t\t\t\t\tvalue={ minHeightValue }\n\t\t\t\t\t\tonChange={ setMinHeightValue }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showAspectRatioControl && (\n\t\t\t\t<AspectRatioTool\n\t\t\t\t\thasValue={ hasAspectRatioValue }\n\t\t\t\t\tvalue={ aspectRatioValue }\n\t\t\t\t\tonChange={ setAspectRatioValue }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.aspectRatio ??\n\t\t\t\t\t\tDEFAULT_CONTROLS.aspectRatio\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { getScrollContainer } from '@wordpress/dom';\n\nconst scrollContainerCache = new WeakMap();\n\n/**\n * Allow scrolling \"through\" popovers over the canvas. This is only called for\n * as long as the pointer is over a popover. Do not use React events because it\n * will bubble through portals.\n *\n * @param {Object} contentRef\n */\nfunction usePopoverScroll( contentRef ) {\n\tconst effect = useRefEffect(\n\t\t( node ) => {\n\t\t\tfunction onWheel( event ) {\n\t\t\t\tconst { deltaX, deltaY } = event;\n\t\t\t\tconst contentEl = contentRef.current;\n\t\t\t\tlet scrollContainer = scrollContainerCache.get( contentEl );\n\t\t\t\tif ( ! scrollContainer ) {\n\t\t\t\t\tscrollContainer = getScrollContainer( contentEl );\n\t\t\t\t\tscrollContainerCache.set( contentEl, scrollContainer );\n\t\t\t\t}\n\t\t\t\tscrollContainer.scrollBy( deltaX, deltaY );\n\t\t\t}\n\t\t\t// Tell the browser that we do not call event.preventDefault\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#improving_scrolling_performance_with_passive_listeners\n\t\t\tconst options = { passive: true };\n\t\t\tnode.addEventListener( 'wheel', onWheel, options );\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'wheel', onWheel, options );\n\t\t\t};\n\t\t},\n\t\t[ contentRef ]\n\t);\n\treturn contentRef ? effect : null;\n}\n\nexport default usePopoverScroll;\n","const BLOCK_SELECTOR = '.block-editor-block-list__block';\nconst APPENDER_SELECTOR = '.block-list-appender';\nconst BLOCK_APPENDER_CLASS = '.block-editor-button-block-appender';\n\n/**\n * Returns true if two elements are contained within the same block.\n *\n * @param {Element} a First element.\n * @param {Element} b Second element.\n *\n * @return {boolean} Whether elements are in the same block.\n */\nexport function isInSameBlock( a, b ) {\n\treturn a.closest( BLOCK_SELECTOR ) === b.closest( BLOCK_SELECTOR );\n}\n\n/**\n * Returns true if an element is considered part of the block and not its inner\n * blocks or appender.\n *\n * @param {Element} blockElement Block container element.\n * @param {Element} element      Element.\n *\n * @return {boolean} Whether an element is considered part of the block and not\n *                   its inner blocks or appender.\n */\nexport function isInsideRootBlock( blockElement, element ) {\n\tconst parentBlock = element.closest(\n\t\t[ BLOCK_SELECTOR, APPENDER_SELECTOR, BLOCK_APPENDER_CLASS ].join( ',' )\n\t);\n\treturn parentBlock === blockElement;\n}\n\n/**\n * Finds the block client ID given any DOM node inside the block.\n *\n * @param {Node?} node DOM node.\n *\n * @return {string|undefined} Client ID or undefined if the node is not part of\n *                            a block.\n */\nexport function getBlockClientId( node ) {\n\twhile ( node && node.nodeType !== node.ELEMENT_NODE ) {\n\t\tnode = node.parentNode;\n\t}\n\n\tif ( ! node ) {\n\t\treturn;\n\t}\n\n\tconst elementNode = /** @type {Element} */ ( node );\n\tconst blockNode = elementNode.closest( BLOCK_SELECTOR );\n\n\tif ( ! blockNode ) {\n\t\treturn;\n\t}\n\n\treturn blockNode.id.slice( 'block-'.length );\n}\n\n/**\n * Calculates the union of two rectangles.\n *\n * @param {DOMRect} rect1 First rectangle.\n * @param {DOMRect} rect2 Second rectangle.\n * @return {DOMRect} Union of the two rectangles.\n */\nexport function rectUnion( rect1, rect2 ) {\n\tconst left = Math.min( rect1.left, rect2.left );\n\tconst right = Math.max( rect1.right, rect2.right );\n\tconst bottom = Math.max( rect1.bottom, rect2.bottom );\n\tconst top = Math.min( rect1.top, rect2.top );\n\n\treturn new window.DOMRectReadOnly( left, top, right - left, bottom - top );\n}\n\n/**\n * Returns whether an element is visible.\n *\n * @param {Element} element Element.\n * @return {boolean} Whether the element is visible.\n */\nfunction isElementVisible( element ) {\n\tconst viewport = element.ownerDocument.defaultView;\n\tif ( ! viewport ) {\n\t\treturn false;\n\t}\n\n\t// Check for <VisuallyHidden> component.\n\tif ( element.classList.contains( 'components-visually-hidden' ) ) {\n\t\treturn false;\n\t}\n\n\tconst bounds = element.getBoundingClientRect();\n\tif ( bounds.width === 0 || bounds.height === 0 ) {\n\t\treturn false;\n\t}\n\n\t// Older browsers, e.g. Safari < 17.4 may not support the `checkVisibility` method.\n\tif ( element.checkVisibility ) {\n\t\treturn element.checkVisibility?.( {\n\t\t\topacityProperty: true,\n\t\t\tcontentVisibilityAuto: true,\n\t\t\tvisibilityProperty: true,\n\t\t} );\n\t}\n\n\tconst style = viewport.getComputedStyle( element );\n\n\tif (\n\t\tstyle.display === 'none' ||\n\t\tstyle.visibility === 'hidden' ||\n\t\tstyle.opacity === '0'\n\t) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n/**\n * Checks if the element is scrollable.\n *\n * @param {Element} element Element.\n * @return {boolean} True if the element is scrollable.\n */\nfunction isScrollable( element ) {\n\tconst style = window.getComputedStyle( element );\n\treturn (\n\t\tstyle.overflowX === 'auto' ||\n\t\tstyle.overflowX === 'scroll' ||\n\t\tstyle.overflowY === 'auto' ||\n\t\tstyle.overflowY === 'scroll'\n\t);\n}\n\nexport const WITH_OVERFLOW_ELEMENT_BLOCKS = [ 'core/navigation' ];\n/**\n * Returns the bounding rectangle of an element, with special handling for blocks\n * that have visible overflowing children (defined in WITH_OVERFLOW_ELEMENT_BLOCKS).\n *\n * For blocks like Navigation that can have overflowing elements (e.g. submenus),\n * this function calculates the combined bounds of both the parent and its visible\n * children. The returned rect may extend beyond the viewport.\n * The returned rect represents the full extent of the element and its visible\n * children, which may extend beyond the viewport.\n *\n * @param {Element} element Element.\n * @return {DOMRect} Bounding client rect of the element and its visible children.\n */\nexport function getElementBounds( element ) {\n\tconst viewport = element.ownerDocument.defaultView;\n\n\tif ( ! viewport ) {\n\t\treturn new window.DOMRectReadOnly();\n\t}\n\n\tlet bounds = element.getBoundingClientRect();\n\tconst dataType = element.getAttribute( 'data-type' );\n\n\t/*\n\t * For blocks with overflowing elements (like Navigation), include the bounds\n\t * of visible children that extend beyond the parent container.\n\t */\n\tif ( dataType && WITH_OVERFLOW_ELEMENT_BLOCKS.includes( dataType ) ) {\n\t\tconst stack = [ element ];\n\t\tlet currentElement;\n\n\t\twhile ( ( currentElement = stack.pop() ) ) {\n\t\t\t// Children wont affect bounds unless the element is not scrollable.\n\t\t\tif ( ! isScrollable( currentElement ) ) {\n\t\t\t\tfor ( const child of currentElement.children ) {\n\t\t\t\t\tif ( isElementVisible( child ) ) {\n\t\t\t\t\t\tconst childBounds = child.getBoundingClientRect();\n\t\t\t\t\t\tbounds = rectUnion( bounds, childBounds );\n\t\t\t\t\t\tstack.push( child );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/*\n\t * Take into account the outer horizontal limits of the container in which\n\t * an element is supposed to be \"visible\". For example, if an element is\n\t * positioned -10px to the left of the window x value (0), this function\n\t * discounts the negative overhang because it's not visible and therefore\n\t * not to be counted in the visibility calculations. Top and bottom values\n\t * are not accounted for to accommodate vertical scroll.\n\t */\n\tconst left = Math.max( bounds.left, 0 );\n\tconst right = Math.min( bounds.right, viewport.innerWidth );\n\tbounds = new window.DOMRectReadOnly(\n\t\tleft,\n\t\tbounds.top,\n\t\tright - left,\n\t\tbounds.height\n\t);\n\n\treturn bounds;\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useMergeRefs } from '@wordpress/compose';\nimport { Popover } from '@wordpress/components';\nimport {\n\tforwardRef,\n\tuseMemo,\n\tuseReducer,\n\tuseLayoutEffect,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport usePopoverScroll from './use-popover-scroll';\nimport { rectUnion, getElementBounds } from '../../utils/dom';\n\nconst MAX_POPOVER_RECOMPUTE_COUNTER = Number.MAX_SAFE_INTEGER;\n\nfunction BlockPopover(\n\t{\n\t\tclientId,\n\t\tbottomClientId,\n\t\tchildren,\n\t\t__unstablePopoverSlot,\n\t\t__unstableContentRef,\n\t\tshift = true,\n\t\t...props\n\t},\n\tref\n) {\n\tconst selectedElement = useBlockElement( clientId );\n\tconst lastSelectedElement = useBlockElement( bottomClientId ?? clientId );\n\tconst mergedRefs = useMergeRefs( [\n\t\tref,\n\t\tusePopoverScroll( __unstableContentRef ),\n\t] );\n\n\tconst [\n\t\tpopoverDimensionsRecomputeCounter,\n\t\tforceRecomputePopoverDimensions,\n\t] = useReducer(\n\t\t// Module is there to make sure that the counter doesn't overflow.\n\t\t( s ) => ( s + 1 ) % MAX_POPOVER_RECOMPUTE_COUNTER,\n\t\t0\n\t);\n\n\t// When blocks are moved up/down, they are animated to their new position by\n\t// updating the `transform` property manually (i.e. without using CSS\n\t// transitions or animations). The animation, which can also scroll the block\n\t// editor, can sometimes cause the position of the Popover to get out of sync.\n\t// A MutationObserver is therefore used to make sure that changes to the\n\t// selectedElement's attribute (i.e. `transform`) can be tracked and used to\n\t// trigger the Popover to rerender.\n\tuseLayoutEffect( () => {\n\t\tif ( ! selectedElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst observer = new window.MutationObserver(\n\t\t\tforceRecomputePopoverDimensions\n\t\t);\n\t\tobserver.observe( selectedElement, { attributes: true } );\n\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t}, [ selectedElement ] );\n\n\tconst popoverAnchor = useMemo( () => {\n\t\tif (\n\t\t\t// popoverDimensionsRecomputeCounter is by definition always equal or greater\n\t\t\t// than 0. This check is only there to satisfy the correctness of the\n\t\t\t// exhaustive-deps rule for the `useMemo` hook.\n\t\t\tpopoverDimensionsRecomputeCounter < 0 ||\n\t\t\t! selectedElement ||\n\t\t\t( bottomClientId && ! lastSelectedElement )\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tgetBoundingClientRect() {\n\t\t\t\treturn lastSelectedElement\n\t\t\t\t\t? rectUnion(\n\t\t\t\t\t\t\tgetElementBounds( selectedElement ),\n\t\t\t\t\t\t\tgetElementBounds( lastSelectedElement )\n\t\t\t\t\t  )\n\t\t\t\t\t: getElementBounds( selectedElement );\n\t\t\t},\n\t\t\tcontextElement: selectedElement,\n\t\t};\n\t}, [\n\t\tpopoverDimensionsRecomputeCounter,\n\t\tselectedElement,\n\t\tbottomClientId,\n\t\tlastSelectedElement,\n\t] );\n\n\tif ( ! selectedElement || ( bottomClientId && ! lastSelectedElement ) ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Popover\n\t\t\tref={ mergedRefs }\n\t\t\tanimate={ false }\n\t\t\tfocusOnMount={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\t// Render in the old slot if needed for backward compatibility,\n\t\t\t// otherwise render in place (not in the default popover slot).\n\t\t\t__unstableSlotName={ __unstablePopoverSlot }\n\t\t\tinline={ ! __unstablePopoverSlot }\n\t\t\tplacement=\"top-start\"\n\t\t\tresize={ false }\n\t\t\tflip={ false }\n\t\t\tshift={ shift }\n\t\t\t{ ...props }\n\t\t\tclassName={ clsx( 'block-editor-block-popover', props.className ) }\n\t\t\tvariant=\"unstyled\"\n\t\t>\n\t\t\t{ children }\n\t\t</Popover>\n\t);\n}\n\nexport const PrivateBlockPopover = forwardRef( BlockPopover );\n\nconst PublicBlockPopover = (\n\t{ clientId, bottomClientId, children, ...props },\n\tref\n) => (\n\t<PrivateBlockPopover\n\t\t{ ...props }\n\t\tbottomClientId={ bottomClientId }\n\t\tclientId={ clientId }\n\t\t__unstableContentRef={ undefined }\n\t\t__unstablePopoverSlot={ undefined }\n\t\tref={ ref }\n\t>\n\t\t{ children }\n\t</PrivateBlockPopover>\n);\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-popover/README.md\n */\nexport default forwardRef( PublicBlockPopover );\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useState, useMemo, forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport { PrivateBlockPopover } from '.';\n\nfunction BlockPopoverCover(\n\t{\n\t\tclientId,\n\t\tbottomClientId,\n\t\tchildren,\n\t\tshift = false,\n\t\tadditionalStyles,\n\t\t...props\n\t},\n\tref\n) {\n\tbottomClientId ??= clientId;\n\n\tconst selectedElement = useBlockElement( clientId );\n\n\treturn (\n\t\t<PrivateBlockPopover\n\t\t\tref={ ref }\n\t\t\tclientId={ clientId }\n\t\t\tbottomClientId={ bottomClientId }\n\t\t\tshift={ shift }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ selectedElement && clientId === bottomClientId ? (\n\t\t\t\t<CoverContainer\n\t\t\t\t\tselectedElement={ selectedElement }\n\t\t\t\t\tadditionalStyles={ additionalStyles }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</CoverContainer>\n\t\t\t) : (\n\t\t\t\tchildren\n\t\t\t) }\n\t\t</PrivateBlockPopover>\n\t);\n}\n\nfunction CoverContainer( {\n\tselectedElement,\n\tadditionalStyles = {},\n\tchildren,\n} ) {\n\tconst [ width, setWidth ] = useState( selectedElement.offsetWidth );\n\tconst [ height, setHeight ] = useState( selectedElement.offsetHeight );\n\n\tuseEffect( () => {\n\t\tconst observer = new window.ResizeObserver( () => {\n\t\t\tsetWidth( selectedElement.offsetWidth );\n\t\t\tsetHeight( selectedElement.offsetHeight );\n\t\t} );\n\t\tobserver.observe( selectedElement, { box: 'border-box' } );\n\t\treturn () => observer.disconnect();\n\t}, [ selectedElement ] );\n\n\tconst style = useMemo( () => {\n\t\treturn {\n\t\t\tposition: 'absolute',\n\t\t\twidth,\n\t\t\theight,\n\t\t\t...additionalStyles,\n\t\t};\n\t}, [ width, height, additionalStyles ] );\n\n\treturn <div style={ style }>{ children }</div>;\n}\n\nexport default forwardRef( BlockPopoverCover );\n","/**\n * WordPress dependencies\n */\nimport { useState, useRef, useEffect, useReducer } from '@wordpress/element';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport BlockPopoverCover from '../components/block-popover/cover';\nimport { useBlockElement } from '../components/block-list/use-block-props/use-block-refs';\n\nfunction SpacingVisualizer( { clientId, value, computeStyle, forceShow } ) {\n\tconst blockElement = useBlockElement( clientId );\n\tconst [ style, updateStyle ] = useReducer( () =>\n\t\tcomputeStyle( blockElement )\n\t);\n\n\t// It's not sufficient to read the blocks computed style when `value` changes because\n\t// the effect would run before the blocks style has updated. Thus observing mutations\n\t// to the blocks attributes is used to trigger updates to the visualizers styles.\n\tuseEffect( () => {\n\t\tif ( ! blockElement ) {\n\t\t\treturn;\n\t\t}\n\t\tconst observer = new window.MutationObserver( updateStyle );\n\t\tobserver.observe( blockElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [ 'style', 'class' ],\n\t\t} );\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t}, [ blockElement ] );\n\n\tconst previousValueRef = useRef( value );\n\tconst [ isActive, setIsActive ] = useState( false );\n\n\tuseEffect( () => {\n\t\tif ( isShallowEqual( value, previousValueRef.current ) || forceShow ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsActive( true );\n\t\tpreviousValueRef.current = value;\n\n\t\tconst timeout = setTimeout( () => {\n\t\t\tsetIsActive( false );\n\t\t}, 400 );\n\n\t\treturn () => {\n\t\t\tsetIsActive( false );\n\t\t\tclearTimeout( timeout );\n\t\t};\n\t}, [ value, forceShow ] );\n\n\tif ( ! isActive && ! forceShow ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<BlockPopoverCover\n\t\t\tclientId={ clientId }\n\t\t\t__unstablePopoverSlot=\"block-toolbar\"\n\t\t>\n\t\t\t<div className=\"block-editor__spacing-visualizer\" style={ style } />\n\t\t</BlockPopoverCover>\n\t);\n}\n\nfunction getComputedCSS( element, property ) {\n\treturn element.ownerDocument.defaultView\n\t\t.getComputedStyle( element )\n\t\t.getPropertyValue( property );\n}\n\nexport function MarginVisualizer( { clientId, value, forceShow } ) {\n\treturn (\n\t\t<SpacingVisualizer\n\t\t\tclientId={ clientId }\n\t\t\tvalue={ value?.spacing?.margin }\n\t\t\tcomputeStyle={ ( blockElement ) => {\n\t\t\t\tconst top = getComputedCSS( blockElement, 'margin-top' );\n\t\t\t\tconst right = getComputedCSS( blockElement, 'margin-right' );\n\t\t\t\tconst bottom = getComputedCSS( blockElement, 'margin-bottom' );\n\t\t\t\tconst left = getComputedCSS( blockElement, 'margin-left' );\n\t\t\t\treturn {\n\t\t\t\t\tborderTopWidth: top,\n\t\t\t\t\tborderRightWidth: right,\n\t\t\t\t\tborderBottomWidth: bottom,\n\t\t\t\t\tborderLeftWidth: left,\n\t\t\t\t\ttop: top ? `-${ top }` : 0,\n\t\t\t\t\tright: right ? `-${ right }` : 0,\n\t\t\t\t\tbottom: bottom ? `-${ bottom }` : 0,\n\t\t\t\t\tleft: left ? `-${ left }` : 0,\n\t\t\t\t};\n\t\t\t} }\n\t\t\tforceShow={ forceShow }\n\t\t/>\n\t);\n}\n\nexport function PaddingVisualizer( { clientId, value, forceShow } ) {\n\treturn (\n\t\t<SpacingVisualizer\n\t\t\tclientId={ clientId }\n\t\t\tvalue={ value?.spacing?.padding }\n\t\t\tcomputeStyle={ ( blockElement ) => ( {\n\t\t\t\tborderTopWidth: getComputedCSS( blockElement, 'padding-top' ),\n\t\t\t\tborderRightWidth: getComputedCSS(\n\t\t\t\t\tblockElement,\n\t\t\t\t\t'padding-right'\n\t\t\t\t),\n\t\t\t\tborderBottomWidth: getComputedCSS(\n\t\t\t\t\tblockElement,\n\t\t\t\t\t'padding-bottom'\n\t\t\t\t),\n\t\t\t\tborderLeftWidth: getComputedCSS( blockElement, 'padding-left' ),\n\t\t\t} ) }\n\t\t\tforceShow={ forceShow }\n\t\t/>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { Platform, useState, useEffect, useCallback } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { getBlockSupport } from '@wordpress/blocks';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport InspectorControls from '../components/inspector-controls';\nimport {\n\tDimensionsPanel as StylesDimensionsPanel,\n\tuseHasDimensionsPanel,\n} from '../components/global-styles';\nimport { MarginVisualizer, PaddingVisualizer } from './spacing-visualizer';\nimport { store as blockEditorStore } from '../store';\nimport { unlock } from '../lock-unlock';\nimport { cleanEmptyObject, shouldSkipSerialization } from './utils';\n\nexport const DIMENSIONS_SUPPORT_KEY = 'dimensions';\nexport const SPACING_SUPPORT_KEY = 'spacing';\nexport const ALL_SIDES = [ 'top', 'right', 'bottom', 'left' ];\nexport const AXIAL_SIDES = [ 'vertical', 'horizontal' ];\n\nfunction useVisualizer() {\n\tconst [ property, setProperty ] = useState( false );\n\tconst { hideBlockInterface, showBlockInterface } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\tuseEffect( () => {\n\t\tif ( ! property ) {\n\t\t\tshowBlockInterface();\n\t\t} else {\n\t\t\thideBlockInterface();\n\t\t}\n\t}, [ property, showBlockInterface, hideBlockInterface ] );\n\n\treturn [ property, setProperty ];\n}\n\nfunction DimensionsInspectorControl( { children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributes.style;\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\tstyle: updatedStyle,\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"dimensions\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function DimensionsPanel( { clientId, name, setAttributes, settings } ) {\n\tconst isEnabled = useHasDimensionsPanel( settings );\n\tconst value = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getBlockAttributes( clientId )?.style,\n\t\t[ clientId ]\n\t);\n\tconst [ visualizedProperty, setVisualizedProperty ] = useVisualizer();\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( newStyle ),\n\t\t} );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultDimensionsControls = getBlockSupport( name, [\n\t\tDIMENSIONS_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\tconst defaultSpacingControls = getBlockSupport( name, [\n\t\tSPACING_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\tconst defaultControls = {\n\t\t...defaultDimensionsControls,\n\t\t...defaultSpacingControls,\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<StylesDimensionsPanel\n\t\t\t\tas={ DimensionsInspectorControl }\n\t\t\t\tpanelId={ clientId }\n\t\t\t\tsettings={ settings }\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tdefaultControls={ defaultControls }\n\t\t\t\tonVisualize={ setVisualizedProperty }\n\t\t\t/>\n\t\t\t{ !! settings?.spacing?.padding && (\n\t\t\t\t<PaddingVisualizer\n\t\t\t\t\tforceShow={ visualizedProperty === 'padding' }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ !! settings?.spacing?.margin && (\n\t\t\t\t<MarginVisualizer\n\t\t\t\t\tforceShow={ visualizedProperty === 'margin' }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\n/**\n * Determine whether there is block support for dimensions.\n *\n * @param {string} blockName Block name.\n * @param {string} feature   Background image feature to check for.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasDimensionsSupport( blockName, feature = 'any' ) {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst support = getBlockSupport( blockName, DIMENSIONS_SUPPORT_KEY );\n\n\tif ( support === true ) {\n\t\treturn true;\n\t}\n\n\tif ( feature === 'any' ) {\n\t\treturn !! ( support?.aspectRatio || !! support?.minHeight );\n\t}\n\n\treturn !! support?.[ feature ];\n}\n\nexport default {\n\tuseBlockProps,\n\tattributeKeys: [ 'minHeight', 'style' ],\n\thasSupport( name ) {\n\t\treturn hasDimensionsSupport( name, 'aspectRatio' );\n\t},\n};\n\nfunction useBlockProps( { name, minHeight, style } ) {\n\tif (\n\t\t! hasDimensionsSupport( name, 'aspectRatio' ) ||\n\t\tshouldSkipSerialization( name, DIMENSIONS_SUPPORT_KEY, 'aspectRatio' )\n\t) {\n\t\treturn {};\n\t}\n\n\tconst className = clsx( {\n\t\t'has-aspect-ratio': !! style?.dimensions?.aspectRatio,\n\t} );\n\n\t// Allow dimensions-based inline style overrides to override any global styles rules that\n\t// might be set for the block, and therefore affect the display of the aspect ratio.\n\tconst inlineStyleOverrides = {};\n\n\t// Apply rules to unset incompatible styles.\n\t// Note that a set `aspectRatio` will win out if both an aspect ratio and a minHeight are set.\n\t// This is because the aspect ratio is a newer block support, so (in theory) any aspect ratio\n\t// that is set should be intentional and should override any existing minHeight. The Cover block\n\t// and dimensions controls have logic that will manually clear the aspect ratio if a minHeight\n\t// is set.\n\tif ( style?.dimensions?.aspectRatio ) {\n\t\t// To ensure the aspect ratio does not get overridden by `minHeight` unset any existing rule.\n\t\tinlineStyleOverrides.minHeight = 'unset';\n\t} else if ( minHeight || style?.dimensions?.minHeight ) {\n\t\t// To ensure the minHeight does not get overridden by `aspectRatio` unset any existing rule.\n\t\tinlineStyleOverrides.aspectRatio = 'unset';\n\t}\n\n\treturn { className, style: inlineStyleOverrides };\n}\n\n/**\n * @deprecated\n */\nexport function useCustomSides() {\n\tdeprecated( 'wp.blockEditor.__experimentalUseCustomSides', {\n\t\tsince: '6.3',\n\t\tversion: '6.4',\n\t} );\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\nimport {\n\tgetBlockSupport,\n\thasBlockSupport,\n\t__EXPERIMENTAL_ELEMENTS as ELEMENTS,\n} from '@wordpress/blocks';\nimport { useInstanceId } from '@wordpress/compose';\nimport { getCSSRules, compileCSS } from '@wordpress/style-engine';\n\n/**\n * Internal dependencies\n */\nimport { BACKGROUND_SUPPORT_KEY, BackgroundImagePanel } from './background';\nimport { BORDER_SUPPORT_KEY, BorderPanel, SHADOW_SUPPORT_KEY } from './border';\nimport { COLOR_SUPPORT_KEY, ColorEdit } from './color';\nimport {\n\tTypographyPanel,\n\tTYPOGRAPHY_SUPPORT_KEY,\n\tTYPOGRAPHY_SUPPORT_KEYS,\n} from './typography';\nimport {\n\tDIMENSIONS_SUPPORT_KEY,\n\tSPACING_SUPPORT_KEY,\n\tDimensionsPanel,\n} from './dimensions';\nimport {\n\tshouldSkipSerialization,\n\tuseStyleOverride,\n\tuseBlockSettings,\n} from './utils';\nimport { scopeSelector } from '../components/global-styles/utils';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\nconst styleSupportKeys = [\n\t...TYPOGRAPHY_SUPPORT_KEYS,\n\tBORDER_SUPPORT_KEY,\n\tCOLOR_SUPPORT_KEY,\n\tDIMENSIONS_SUPPORT_KEY,\n\tBACKGROUND_SUPPORT_KEY,\n\tSPACING_SUPPORT_KEY,\n\tSHADOW_SUPPORT_KEY,\n];\n\nconst hasStyleSupport = ( nameOrType ) =>\n\tstyleSupportKeys.some( ( key ) => hasBlockSupport( nameOrType, key ) );\n\n/**\n * Returns the inline styles to add depending on the style object\n *\n * @param {Object} styles Styles configuration.\n *\n * @return {Object} Flattened CSS variables declaration.\n */\nexport function getInlineStyles( styles = {} ) {\n\tconst output = {};\n\t// The goal is to move everything to server side generated engine styles\n\t// This is temporary as we absorb more and more styles into the engine.\n\tgetCSSRules( styles ).forEach( ( rule ) => {\n\t\toutput[ rule.key ] = rule.value;\n\t} );\n\n\treturn output;\n}\n\n/**\n * Filters registered block settings, extending attributes to include `style` attribute.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addAttribute( settings ) {\n\tif ( ! hasStyleSupport( settings ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( ! settings.attributes.style ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tstyle: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * A dictionary of paths to flag skipping block support serialization as the key,\n * with values providing the style paths to be omitted from serialization.\n *\n * @constant\n * @type {Record<string, string[]>}\n */\nconst skipSerializationPathsEdit = {\n\t[ `${ BORDER_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [ 'border' ],\n\t[ `${ COLOR_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tCOLOR_SUPPORT_KEY,\n\t],\n\t[ `${ TYPOGRAPHY_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t],\n\t[ `${ DIMENSIONS_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tDIMENSIONS_SUPPORT_KEY,\n\t],\n\t[ `${ SPACING_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tSPACING_SUPPORT_KEY,\n\t],\n\t[ `${ SHADOW_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tSHADOW_SUPPORT_KEY,\n\t],\n};\n\n/**\n * A dictionary of paths to flag skipping block support serialization as the key,\n * with values providing the style paths to be omitted from serialization.\n *\n * Extends the Edit skip paths to enable skipping additional paths in just\n * the Save component. This allows a block support to be serialized within the\n * editor, while using an alternate approach, such as server-side rendering, when\n * the support is saved.\n *\n * @constant\n * @type {Record<string, string[]>}\n */\nconst skipSerializationPathsSave = {\n\t...skipSerializationPathsEdit,\n\t[ `${ DIMENSIONS_SUPPORT_KEY }.aspectRatio` ]: [\n\t\t`${ DIMENSIONS_SUPPORT_KEY }.aspectRatio`,\n\t], // Skip serialization of aspect ratio in save mode.\n\t[ `${ BACKGROUND_SUPPORT_KEY }` ]: [ BACKGROUND_SUPPORT_KEY ], // Skip serialization of background support in save mode.\n};\n\nconst skipSerializationPathsSaveChecks = {\n\t[ `${ DIMENSIONS_SUPPORT_KEY }.aspectRatio` ]: true,\n\t[ `${ BACKGROUND_SUPPORT_KEY }` ]: true,\n};\n\n/**\n * A dictionary used to normalize feature names between support flags, style\n * object properties and __experimentSkipSerialization configuration arrays.\n *\n * This allows not having to provide a migration for a support flag and possible\n * backwards compatibility bridges, while still achieving consistency between\n * the support flag and the skip serialization array.\n *\n * @constant\n * @type {Record<string, string>}\n */\nconst renamedFeatures = { gradients: 'gradient' };\n\n/**\n * A utility function used to remove one or more paths from a style object.\n * Works in a way similar to Lodash's `omit()`. See unit tests and examples below.\n *\n * It supports a single string path:\n *\n * ```\n * omitStyle( { color: 'red' }, 'color' ); // {}\n * ```\n *\n * or an array of paths:\n *\n * ```\n * omitStyle( { color: 'red', background: '#fff' }, [ 'color', 'background' ] ); // {}\n * ```\n *\n * It also allows you to specify paths at multiple levels in a string.\n *\n * ```\n * omitStyle( { typography: { textDecoration: 'underline' } }, 'typography.textDecoration' ); // {}\n * ```\n *\n * You can remove multiple paths at the same time:\n *\n * ```\n * omitStyle(\n * \t\t{\n * \t\t\ttypography: {\n * \t\t\t\ttextDecoration: 'underline',\n * \t\t\t\ttextTransform: 'uppercase',\n * \t\t\t}\n *\t\t},\n *\t\t[\n * \t\t\t'typography.textDecoration',\n * \t\t\t'typography.textTransform',\n *\t\t]\n * );\n * // {}\n * ```\n *\n * You can also specify nested paths as arrays:\n *\n * ```\n * omitStyle(\n * \t\t{\n * \t\t\ttypography: {\n * \t\t\t\ttextDecoration: 'underline',\n * \t\t\t\ttextTransform: 'uppercase',\n * \t\t\t}\n *\t\t},\n *\t\t[\n * \t\t\t[ 'typography', 'textDecoration' ],\n * \t\t\t[ 'typography', 'textTransform' ],\n *\t\t]\n * );\n * // {}\n * ```\n *\n * With regards to nesting of styles, infinite depth is supported:\n *\n * ```\n * omitStyle(\n * \t\t{\n * \t\t\tborder: {\n * \t\t\t\tradius: {\n * \t\t\t\t\ttopLeft: '10px',\n * \t\t\t\t\ttopRight: '0.5rem',\n * \t\t\t\t}\n * \t\t\t}\n *\t\t},\n *\t\t[\n * \t\t\t[ 'border', 'radius', 'topRight' ],\n *\t\t]\n * );\n * // { border: { radius: { topLeft: '10px' } } }\n * ```\n *\n * The third argument, `preserveReference`, defines how to treat the input style object.\n * It is mostly necessary to properly handle mutation when recursively handling the style object.\n * Defaulting to `false`, this will always create a new object, avoiding to mutate `style`.\n * However, when recursing, we change that value to `true` in order to work with a single copy\n * of the original style object.\n *\n * @see https://lodash.com/docs/4.17.15#omit\n *\n * @param {Object}       style             Styles object.\n * @param {Array|string} paths             Paths to remove.\n * @param {boolean}      preserveReference True to mutate the `style` object, false otherwise.\n * @return {Object}      Styles object with the specified paths removed.\n */\nexport function omitStyle( style, paths, preserveReference = false ) {\n\tif ( ! style ) {\n\t\treturn style;\n\t}\n\n\tlet newStyle = style;\n\tif ( ! preserveReference ) {\n\t\tnewStyle = JSON.parse( JSON.stringify( style ) );\n\t}\n\n\tif ( ! Array.isArray( paths ) ) {\n\t\tpaths = [ paths ];\n\t}\n\n\tpaths.forEach( ( path ) => {\n\t\tif ( ! Array.isArray( path ) ) {\n\t\t\tpath = path.split( '.' );\n\t\t}\n\n\t\tif ( path.length > 1 ) {\n\t\t\tconst [ firstSubpath, ...restPath ] = path;\n\t\t\tomitStyle( newStyle[ firstSubpath ], [ restPath ], true );\n\t\t} else if ( path.length === 1 ) {\n\t\t\tdelete newStyle[ path[ 0 ] ];\n\t\t}\n\t} );\n\n\treturn newStyle;\n}\n\n/**\n * Override props assigned to save component to inject the CSS variables definition.\n *\n * @param {Object}                    props           Additional props applied to save element.\n * @param {Object|string}             blockNameOrType Block type.\n * @param {Object}                    attributes      Block attributes.\n * @param {?Record<string, string[]>} skipPaths       An object of keys and paths to skip serialization.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps(\n\tprops,\n\tblockNameOrType,\n\tattributes,\n\tskipPaths = skipSerializationPathsSave\n) {\n\tif ( ! hasStyleSupport( blockNameOrType ) ) {\n\t\treturn props;\n\t}\n\n\tlet { style } = attributes;\n\tObject.entries( skipPaths ).forEach( ( [ indicator, path ] ) => {\n\t\tconst skipSerialization =\n\t\t\tskipSerializationPathsSaveChecks[ indicator ] ||\n\t\t\tgetBlockSupport( blockNameOrType, indicator );\n\n\t\tif ( skipSerialization === true ) {\n\t\t\tstyle = omitStyle( style, path );\n\t\t}\n\n\t\tif ( Array.isArray( skipSerialization ) ) {\n\t\t\tskipSerialization.forEach( ( featureName ) => {\n\t\t\t\tconst feature = renamedFeatures[ featureName ] || featureName;\n\t\t\t\tstyle = omitStyle( style, [ [ ...path, feature ] ] );\n\t\t\t} );\n\t\t}\n\t} );\n\n\tprops.style = {\n\t\t...getInlineStyles( style ),\n\t\t...props.style,\n\t};\n\n\treturn props;\n}\n\nfunction BlockStyleControls( {\n\tclientId,\n\tname,\n\tsetAttributes,\n\t__unstableParentLayout,\n} ) {\n\tconst settings = useBlockSettings( name, __unstableParentLayout );\n\tconst blockEditingMode = useBlockEditingMode();\n\tconst passedProps = {\n\t\tclientId,\n\t\tname,\n\t\tsetAttributes,\n\t\tsettings: {\n\t\t\t...settings,\n\t\t\ttypography: {\n\t\t\t\t...settings.typography,\n\t\t\t\t// The text alignment UI for individual blocks is rendered in\n\t\t\t\t// the block toolbar, so disable it here.\n\t\t\t\ttextAlign: false,\n\t\t\t},\n\t\t},\n\t};\n\tif ( blockEditingMode !== 'default' ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<>\n\t\t\t<ColorEdit { ...passedProps } />\n\t\t\t<BackgroundImagePanel { ...passedProps } />\n\t\t\t<TypographyPanel { ...passedProps } />\n\t\t\t<BorderPanel { ...passedProps } />\n\t\t\t<DimensionsPanel { ...passedProps } />\n\t\t</>\n\t);\n}\n\nexport default {\n\tedit: BlockStyleControls,\n\thasSupport: hasStyleSupport,\n\taddSaveProps,\n\tattributeKeys: [ 'style' ],\n\tuseBlockProps,\n};\n\n// Defines which element types are supported, including their hover styles or\n// any other elements that have been included under a single element type\n// e.g. heading and h1-h6.\nconst elementTypes = [\n\t{ elementType: 'button' },\n\t{ elementType: 'link', pseudo: [ ':hover' ] },\n\t{\n\t\telementType: 'heading',\n\t\telements: [ 'h1', 'h2', 'h3', 'h4', 'h5', 'h6' ],\n\t},\n];\n\n// Used for generating the instance ID\nconst STYLE_BLOCK_PROPS_REFERENCE = {};\n\nfunction useBlockProps( { name, style } ) {\n\tconst blockElementsContainerIdentifier = useInstanceId(\n\t\tSTYLE_BLOCK_PROPS_REFERENCE,\n\t\t'wp-elements'\n\t);\n\n\tconst baseElementSelector = `.${ blockElementsContainerIdentifier }`;\n\tconst blockElementStyles = style?.elements;\n\n\tconst styles = useMemo( () => {\n\t\tif ( ! blockElementStyles ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst elementCSSRules = [];\n\n\t\telementTypes.forEach( ( { elementType, pseudo, elements } ) => {\n\t\t\tconst skipSerialization = shouldSkipSerialization(\n\t\t\t\tname,\n\t\t\t\tCOLOR_SUPPORT_KEY,\n\t\t\t\telementType\n\t\t\t);\n\n\t\t\tif ( skipSerialization ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst elementStyles = blockElementStyles?.[ elementType ];\n\n\t\t\t// Process primary element type styles.\n\t\t\tif ( elementStyles ) {\n\t\t\t\tconst selector = scopeSelector(\n\t\t\t\t\tbaseElementSelector,\n\t\t\t\t\tELEMENTS[ elementType ]\n\t\t\t\t);\n\n\t\t\t\telementCSSRules.push(\n\t\t\t\t\tcompileCSS( elementStyles, { selector } )\n\t\t\t\t);\n\n\t\t\t\t// Process any interactive states for the element type.\n\t\t\t\tif ( pseudo ) {\n\t\t\t\t\tpseudo.forEach( ( pseudoSelector ) => {\n\t\t\t\t\t\tif ( elementStyles[ pseudoSelector ] ) {\n\t\t\t\t\t\t\telementCSSRules.push(\n\t\t\t\t\t\t\t\tcompileCSS( elementStyles[ pseudoSelector ], {\n\t\t\t\t\t\t\t\t\tselector: scopeSelector(\n\t\t\t\t\t\t\t\t\t\tbaseElementSelector,\n\t\t\t\t\t\t\t\t\t\t`${ ELEMENTS[ elementType ] }${ pseudoSelector }`\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Process related elements e.g. h1-h6 for headings\n\t\t\tif ( elements ) {\n\t\t\t\telements.forEach( ( element ) => {\n\t\t\t\t\tif ( blockElementStyles[ element ] ) {\n\t\t\t\t\t\telementCSSRules.push(\n\t\t\t\t\t\t\tcompileCSS( blockElementStyles[ element ], {\n\t\t\t\t\t\t\t\tselector: scopeSelector(\n\t\t\t\t\t\t\t\t\tbaseElementSelector,\n\t\t\t\t\t\t\t\t\tELEMENTS[ element ]\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\treturn elementCSSRules.length > 0\n\t\t\t? elementCSSRules.join( '' )\n\t\t\t: undefined;\n\t}, [ baseElementSelector, blockElementStyles, name ] );\n\n\tuseStyleOverride( { css: styles } );\n\n\treturn addSaveProps(\n\t\t{ className: blockElementsContainerIdentifier },\n\t\tname,\n\t\t{ style },\n\t\tskipSerializationPathsEdit\n\t);\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/style/addAttribute',\n\taddAttribute\n);\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport } from '@wordpress/blocks';\n\nconst hasSettingsSupport = ( blockType ) =>\n\thasBlockSupport( blockType, '__experimentalSettings', false );\n\nfunction addAttribute( settings ) {\n\tif ( ! hasSettingsSupport( settings ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( ! settings?.attributes?.settings ) {\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tsettings: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t};\n\t}\n\n\treturn settings;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/settings/addAttribute',\n\taddAttribute\n);\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst filter = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12 4 4 19h16L12 4zm0 3.2 5.5 10.3H12V7.2z\" />\n\t</SVG>\n);\n\nexport default filter;\n","/**\n * WordPress dependencies\n */\nimport {\n\tColorIndicator,\n\tDropdown,\n\tDuotonePicker,\n\tDuotoneSwatch,\n\tMenuGroup,\n\tToolbarButton,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { DOWN } from '@wordpress/keycodes';\nimport { Icon, filter } from '@wordpress/icons';\nimport { useInstanceId } from '@wordpress/compose';\n\nfunction DuotoneControl( {\n\tid: idProp,\n\tcolorPalette,\n\tduotonePalette,\n\tdisableCustomColors,\n\tdisableCustomDuotone,\n\tvalue,\n\tonChange,\n} ) {\n\tlet toolbarIcon;\n\tif ( value === 'unset' ) {\n\t\ttoolbarIcon = (\n\t\t\t<ColorIndicator className=\"block-editor-duotone-control__unset-indicator\" />\n\t\t);\n\t} else if ( value ) {\n\t\ttoolbarIcon = <DuotoneSwatch values={ value } />;\n\t} else {\n\t\ttoolbarIcon = <Icon icon={ filter } />;\n\t}\n\n\tconst actionLabel = __( 'Apply duotone filter' );\n\tconst id = useInstanceId( DuotoneControl, 'duotone-control', idProp );\n\tconst descriptionId = `${ id }__description`;\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ {\n\t\t\t\tclassName: 'block-editor-duotone-control__popover',\n\t\t\t\theaderTitle: __( 'Duotone' ),\n\t\t\t} }\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => {\n\t\t\t\tconst openOnArrowDown = ( event ) => {\n\t\t\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tonToggle();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\tonKeyDown={ openOnArrowDown }\n\t\t\t\t\t\tlabel={ actionLabel }\n\t\t\t\t\t\ticon={ toolbarIcon }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} }\n\t\t\trenderContent={ () => (\n\t\t\t\t<MenuGroup label={ __( 'Duotone' ) }>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Create a two-tone color effect without losing your original image.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t\t<DuotonePicker\n\t\t\t\t\t\taria-label={ actionLabel }\n\t\t\t\t\t\taria-describedby={ descriptionId }\n\t\t\t\t\t\tcolorPalette={ colorPalette }\n\t\t\t\t\t\tduotonePalette={ duotonePalette }\n\t\t\t\t\t\tdisableCustomColors={ disableCustomColors }\n\t\t\t\t\t\tdisableCustomDuotone={ disableCustomDuotone }\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t/>\n\t\t\t\t</MenuGroup>\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nexport default DuotoneControl;\n","/**\n * External dependencies\n */\nimport { colord } from 'colord';\n\n/**\n * Convert a list of colors to an object of R, G, and B values.\n *\n * @param {string[]} colors Array of RBG color strings.\n *\n * @return {Object} R, G, and B values.\n */\nexport function getValuesFromColors( colors = [] ) {\n\tconst values = { r: [], g: [], b: [], a: [] };\n\n\tcolors.forEach( ( color ) => {\n\t\tconst rgbColor = colord( color ).toRgb();\n\t\tvalues.r.push( rgbColor.r / 255 );\n\t\tvalues.g.push( rgbColor.g / 255 );\n\t\tvalues.b.push( rgbColor.b / 255 );\n\t\tvalues.a.push( rgbColor.a );\n\t} );\n\n\treturn values;\n}\n\n/**\n * Stylesheet for disabling a global styles duotone filter.\n *\n * @param {string} selector Selector to disable the filter for.\n *\n * @return {string} Filter none style.\n */\nexport function getDuotoneUnsetStylesheet( selector ) {\n\treturn `${ selector }{filter:none}`;\n}\n\n/**\n * SVG and stylesheet needed for rendering the duotone filter.\n *\n * @param {string} selector Selector to apply the filter to.\n * @param {string} id       Unique id for this duotone filter.\n *\n * @return {string} Duotone filter style.\n */\nexport function getDuotoneStylesheet( selector, id ) {\n\treturn `${ selector }{filter:url(#${ id })}`;\n}\n\n/**\n * The SVG part of the duotone filter.\n *\n * @param {string}   id     Unique id for this duotone filter.\n * @param {string[]} colors Color strings from dark to light.\n *\n * @return {string} Duotone SVG.\n */\nexport function getDuotoneFilter( id, colors ) {\n\tconst values = getValuesFromColors( colors );\n\treturn `\n<svg\n\txmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\tviewBox=\"0 0 0 0\"\n\twidth=\"0\"\n\theight=\"0\"\n\tfocusable=\"false\"\n\trole=\"none\"\n\taria-hidden=\"true\"\n\tstyle=\"visibility: hidden; position: absolute; left: -9999px; overflow: hidden;\"\n>\n\t<defs>\n\t\t<filter id=\"${ id }\">\n\t\t\t<!--\n\t\t\t\tUse sRGB instead of linearRGB so transparency looks correct.\n\t\t\t\tUse perceptual brightness to convert to grayscale.\n\t\t\t-->\n\t\t\t<feColorMatrix color-interpolation-filters=\"sRGB\" type=\"matrix\" values=\" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 \"></feColorMatrix>\n\t\t\t<!-- Use sRGB instead of linearRGB to be consistent with how CSS gradients work. -->\n\t\t\t<feComponentTransfer color-interpolation-filters=\"sRGB\">\n\t\t\t\t<feFuncR type=\"table\" tableValues=\"${ values.r.join( ' ' ) }\"></feFuncR>\n\t\t\t\t<feFuncG type=\"table\" tableValues=\"${ values.g.join( ' ' ) }\"></feFuncG>\n\t\t\t\t<feFuncB type=\"table\" tableValues=\"${ values.b.join( ' ' ) }\"></feFuncB>\n\t\t\t\t<feFuncA type=\"table\" tableValues=\"${ values.a.join( ' ' ) }\"></feFuncA>\n\t\t\t</feComponentTransfer>\n\t\t\t<!-- Re-mask the image with the original transparency since the feColorMatrix above loses that information. -->\n\t\t\t<feComposite in2=\"SourceGraphic\" operator=\"in\"></feComposite>\n\t\t</filter>\n\t</defs>\n</svg>`;\n}\n","/**\n * Internal dependencies\n */\nimport { scopeSelector } from './utils';\nimport { getValueFromObjectPath } from '../../utils/object';\n\n/**\n * Determine the CSS selector for the block type and target provided, returning\n * it if available.\n *\n * @param {import('@wordpress/blocks').Block} blockType        The block's type.\n * @param {string|string[]}                   target           The desired selector's target e.g. `root`, delimited string, or array path.\n * @param {Object}                            options          Options object.\n * @param {boolean}                           options.fallback Whether or not to fallback to broader selector.\n *\n * @return {?string} The CSS selector or `null` if no selector available.\n */\nexport function getBlockCSSSelector(\n\tblockType,\n\ttarget = 'root',\n\toptions = {}\n) {\n\tif ( ! target ) {\n\t\treturn null;\n\t}\n\n\tconst { fallback = false } = options;\n\tconst { name, selectors, supports } = blockType;\n\n\tconst hasSelectors = selectors && Object.keys( selectors ).length > 0;\n\tconst path = Array.isArray( target ) ? target.join( '.' ) : target;\n\n\t// Root selector.\n\n\t// Calculated before returning as it can be used as a fallback for feature\n\t// selectors later on.\n\tlet rootSelector = null;\n\n\tif ( hasSelectors && selectors.root ) {\n\t\t// Use the selectors API if available.\n\t\trootSelector = selectors?.root;\n\t} else if ( supports?.__experimentalSelector ) {\n\t\t// Use the old experimental selector supports property if set.\n\t\trootSelector = supports.__experimentalSelector;\n\t} else {\n\t\t// If no root selector found, generate default block class selector.\n\t\trootSelector =\n\t\t\t'.wp-block-' + name.replace( 'core/', '' ).replace( '/', '-' );\n\t}\n\n\t// Return selector if it's the root target we are looking for.\n\tif ( path === 'root' ) {\n\t\treturn rootSelector;\n\t}\n\n\t// If target is not `root` or `duotone` we have a feature or subfeature\n\t// as the target. If the target is a string convert to an array.\n\tconst pathArray = Array.isArray( target ) ? target : target.split( '.' );\n\n\t// Feature selectors ( may fallback to root selector );\n\tif ( pathArray.length === 1 ) {\n\t\tconst fallbackSelector = fallback ? rootSelector : null;\n\n\t\t// Prefer the selectors API if available.\n\t\tif ( hasSelectors ) {\n\t\t\t// Get selector from either `feature.root` or shorthand path.\n\t\t\tconst featureSelector =\n\t\t\t\tgetValueFromObjectPath( selectors, `${ path }.root`, null ) ||\n\t\t\t\tgetValueFromObjectPath( selectors, path, null );\n\n\t\t\t// Return feature selector if found or any available fallback.\n\t\t\treturn featureSelector || fallbackSelector;\n\t\t}\n\n\t\t// Try getting old experimental supports selector value.\n\t\tconst featureSelector = getValueFromObjectPath(\n\t\t\tsupports,\n\t\t\t`${ path }.__experimentalSelector`,\n\t\t\tnull\n\t\t);\n\n\t\t// If nothing to work with, provide fallback selector if available.\n\t\tif ( ! featureSelector ) {\n\t\t\treturn fallbackSelector;\n\t\t}\n\n\t\t// Scope the feature selector by the block's root selector.\n\t\treturn scopeSelector( rootSelector, featureSelector );\n\t}\n\n\t// Subfeature selector.\n\t// This may fallback either to parent feature or root selector.\n\tlet subfeatureSelector;\n\n\t// Use selectors API if available.\n\tif ( hasSelectors ) {\n\t\tsubfeatureSelector = getValueFromObjectPath( selectors, path, null );\n\t}\n\n\t// Only return if we have a subfeature selector.\n\tif ( subfeatureSelector ) {\n\t\treturn subfeatureSelector;\n\t}\n\n\t// To this point we don't have a subfeature selector. If a fallback has been\n\t// requested, remove subfeature from target path and return results of a\n\t// call for the parent feature's selector.\n\tif ( fallback ) {\n\t\treturn getBlockCSSSelector( blockType, pathArray[ 0 ], options );\n\t}\n\n\t// We tried.\n\treturn null;\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalHStack as HStack,\n\t__experimentalZStack as ZStack,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\tMenuGroup,\n\tColorIndicator,\n\tDuotonePicker,\n\tDuotoneSwatch,\n\tDropdown,\n\tFlex,\n\tFlexItem,\n\tButton,\n} from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\nimport { useCallback, useMemo, useRef } from '@wordpress/element';\nimport { reset as resetIcon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromVariable, useToolsPanelDropdownMenuProps } from './utils';\nimport { setImmutably } from '../../utils/object';\n\nconst EMPTY_ARRAY = [];\nfunction useMultiOriginColorPresets(\n\tsettings,\n\t{ presetSetting, defaultSetting }\n) {\n\tconst disableDefault = ! settings?.color?.[ defaultSetting ];\n\tconst userPresets =\n\t\tsettings?.color?.[ presetSetting ]?.custom || EMPTY_ARRAY;\n\tconst themePresets =\n\t\tsettings?.color?.[ presetSetting ]?.theme || EMPTY_ARRAY;\n\tconst defaultPresets =\n\t\tsettings?.color?.[ presetSetting ]?.default || EMPTY_ARRAY;\n\treturn useMemo(\n\t\t() => [\n\t\t\t...userPresets,\n\t\t\t...themePresets,\n\t\t\t...( disableDefault ? EMPTY_ARRAY : defaultPresets ),\n\t\t],\n\t\t[ disableDefault, userPresets, themePresets, defaultPresets ]\n\t);\n}\n\nexport function useHasFiltersPanel( settings ) {\n\treturn useHasDuotoneControl( settings );\n}\n\nfunction useHasDuotoneControl( settings ) {\n\treturn (\n\t\tsettings.color.customDuotone ||\n\t\tsettings.color.defaultDuotone ||\n\t\tsettings.color.duotone.length > 0\n\t);\n}\n\nfunction FiltersToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ _x( 'Filters', 'Name for applying graphical effects' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tduotone: true,\n};\n\nconst popoverProps = {\n\tplacement: 'left-start',\n\toffset: 36,\n\tshift: true,\n\tclassName: 'block-editor-duotone-control__popover',\n\theaderTitle: __( 'Duotone' ),\n};\n\nconst LabeledColorIndicator = ( { indicator, label } ) => (\n\t<HStack justify=\"flex-start\">\n\t\t<ZStack isLayered={ false } offset={ -8 }>\n\t\t\t<Flex expanded={ false }>\n\t\t\t\t{ indicator === 'unset' || ! indicator ? (\n\t\t\t\t\t<ColorIndicator className=\"block-editor-duotone-control__unset-indicator\" />\n\t\t\t\t) : (\n\t\t\t\t\t<DuotoneSwatch values={ indicator } />\n\t\t\t\t) }\n\t\t\t</Flex>\n\t\t</ZStack>\n\t\t<FlexItem title={ label }>{ label }</FlexItem>\n\t</HStack>\n);\n\nconst renderToggle =\n\t( duotone, resetDuotone ) =>\n\t( { onToggle, isOpen } ) => {\n\t\tconst duotoneButtonRef = useRef( undefined );\n\n\t\tconst toggleProps = {\n\t\t\tonClick: onToggle,\n\t\t\tclassName: clsx(\n\t\t\t\t'block-editor-global-styles-filters-panel__dropdown-toggle',\n\t\t\t\t{ 'is-open': isOpen }\n\t\t\t),\n\t\t\t'aria-expanded': isOpen,\n\t\t\tref: duotoneButtonRef,\n\t\t};\n\n\t\tconst removeButtonProps = {\n\t\t\tonClick: () => {\n\t\t\t\tif ( isOpen ) {\n\t\t\t\t\tonToggle();\n\t\t\t\t}\n\t\t\t\tresetDuotone();\n\t\t\t\t// Return focus to parent button.\n\t\t\t\tduotoneButtonRef.current?.focus();\n\t\t\t},\n\t\t\tclassName: 'block-editor-panel-duotone-settings__reset',\n\t\t\tlabel: __( 'Reset' ),\n\t\t};\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button __next40pxDefaultSize { ...toggleProps }>\n\t\t\t\t\t<LabeledColorIndicator\n\t\t\t\t\t\tindicator={ duotone }\n\t\t\t\t\t\tlabel={ __( 'Duotone' ) }\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t\t{ duotone && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\ticon={ resetIcon }\n\t\t\t\t\t\t{ ...removeButtonProps }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t};\n\nexport default function FiltersPanel( {\n\tas: Wrapper = FiltersToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n} ) {\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\n\t// Duotone\n\tconst hasDuotoneEnabled = useHasDuotoneControl( settings );\n\tconst duotonePalette = useMultiOriginColorPresets( settings, {\n\t\tpresetSetting: 'duotone',\n\t\tdefaultSetting: 'defaultDuotone',\n\t} );\n\tconst colorPalette = useMultiOriginColorPresets( settings, {\n\t\tpresetSetting: 'palette',\n\t\tdefaultSetting: 'defaultPalette',\n\t} );\n\tconst duotone = decodeValue( inheritedValue?.filter?.duotone );\n\tconst setDuotone = ( newValue ) => {\n\t\tconst duotonePreset = duotonePalette.find( ( { colors } ) => {\n\t\t\treturn colors === newValue;\n\t\t} );\n\t\tconst duotoneValue = duotonePreset\n\t\t\t? `var:preset|duotone|${ duotonePreset.slug }`\n\t\t\t: newValue;\n\t\tonChange(\n\t\t\tsetImmutably( value, [ 'filter', 'duotone' ], duotoneValue )\n\t\t);\n\t};\n\tconst hasDuotone = () => !! value?.filter?.duotone;\n\tconst resetDuotone = () => setDuotone( undefined );\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tfilter: {\n\t\t\t\t...previousValue.filter,\n\t\t\t\tduotone: undefined,\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ hasDuotoneEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Duotone' ) }\n\t\t\t\t\thasValue={ hasDuotone }\n\t\t\t\t\tonDeselect={ resetDuotone }\n\t\t\t\t\tisShownByDefault={ defaultControls.duotone }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\tpopoverProps={ popoverProps }\n\t\t\t\t\t\tclassName=\"block-editor-global-styles-filters-panel__dropdown\"\n\t\t\t\t\t\trenderToggle={ renderToggle( duotone, resetDuotone ) }\n\t\t\t\t\t\trenderContent={ () => (\n\t\t\t\t\t\t\t<DropdownContentWrapper paddingSize=\"small\">\n\t\t\t\t\t\t\t\t<MenuGroup label={ __( 'Duotone' ) }>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t'Create a two-tone color effect without losing your original image.'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<DuotonePicker\n\t\t\t\t\t\t\t\t\t\tcolorPalette={ colorPalette }\n\t\t\t\t\t\t\t\t\t\tduotonePalette={ duotonePalette }\n\t\t\t\t\t\t\t\t\t\t// TODO: Re-enable both when custom colors are supported for block-level styles.\n\t\t\t\t\t\t\t\t\t\tdisableCustomColors\n\t\t\t\t\t\t\t\t\t\tdisableCustomDuotone\n\t\t\t\t\t\t\t\t\t\tvalue={ duotone }\n\t\t\t\t\t\t\t\t\t\tonChange={ setDuotone }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t</DropdownContentWrapper>\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tgetBlockSupport,\n\tgetBlockType,\n\thasBlockSupport,\n} from '@wordpress/blocks';\nimport { useInstanceId } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport { useMemo, useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport {\n\tBlockControls,\n\tInspectorControls,\n\t__experimentalDuotoneControl as DuotoneControl,\n\tuseSettings,\n} from '../components';\nimport {\n\tgetDuotoneFilter,\n\tgetDuotoneStylesheet,\n\tgetDuotoneUnsetStylesheet,\n} from '../components/duotone/utils';\nimport { getBlockCSSSelector } from '../components/global-styles/get-block-css-selector';\nimport { scopeSelector } from '../components/global-styles/utils';\nimport { useBlockSettings, usePrivateStyleOverride } from './utils';\nimport { default as StylesFiltersPanel } from '../components/global-styles/filters-panel';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\nimport { useBlockElement } from '../components/block-list/use-block-props/use-block-refs';\n\nconst EMPTY_ARRAY = [];\n\n// Safari does not always update the duotone filter when the duotone colors\n// are changed. This browser check is later used to force a re-render of the block\n// element to ensure the duotone filter is updated. The check is included at the\n// root of this file as it only needs to be run once per page load.\nconst isSafari =\n\twindow?.navigator.userAgent &&\n\twindow.navigator.userAgent.includes( 'Safari' ) &&\n\t! window.navigator.userAgent.includes( 'Chrome' ) &&\n\t! window.navigator.userAgent.includes( 'Chromium' );\n\nextend( [ namesPlugin ] );\n\nfunction useMultiOriginPresets( { presetSetting, defaultSetting } ) {\n\tconst [ enableDefault, userPresets, themePresets, defaultPresets ] =\n\t\tuseSettings(\n\t\t\tdefaultSetting,\n\t\t\t`${ presetSetting }.custom`,\n\t\t\t`${ presetSetting }.theme`,\n\t\t\t`${ presetSetting }.default`\n\t\t);\n\treturn useMemo(\n\t\t() => [\n\t\t\t...( userPresets || EMPTY_ARRAY ),\n\t\t\t...( themePresets || EMPTY_ARRAY ),\n\t\t\t...( ( enableDefault && defaultPresets ) || EMPTY_ARRAY ),\n\t\t],\n\t\t[ enableDefault, userPresets, themePresets, defaultPresets ]\n\t);\n}\n\nexport function getColorsFromDuotonePreset( duotone, duotonePalette ) {\n\tif ( ! duotone ) {\n\t\treturn;\n\t}\n\tconst preset = duotonePalette?.find( ( { slug } ) => {\n\t\treturn duotone === `var:preset|duotone|${ slug }`;\n\t} );\n\n\treturn preset ? preset.colors : undefined;\n}\n\nexport function getDuotonePresetFromColors( colors, duotonePalette ) {\n\tif ( ! colors || ! Array.isArray( colors ) ) {\n\t\treturn;\n\t}\n\n\tconst preset = duotonePalette?.find( ( duotonePreset ) => {\n\t\treturn duotonePreset?.colors?.every(\n\t\t\t( val, index ) => val === colors[ index ]\n\t\t);\n\t} );\n\n\treturn preset ? `var:preset|duotone|${ preset.slug }` : undefined;\n}\n\nfunction DuotonePanelPure( { style, setAttributes, name } ) {\n\tconst duotoneStyle = style?.color?.duotone;\n\tconst settings = useBlockSettings( name );\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tconst duotonePalette = useMultiOriginPresets( {\n\t\tpresetSetting: 'color.duotone',\n\t\tdefaultSetting: 'color.defaultDuotone',\n\t} );\n\tconst colorPalette = useMultiOriginPresets( {\n\t\tpresetSetting: 'color.palette',\n\t\tdefaultSetting: 'color.defaultPalette',\n\t} );\n\tconst [ enableCustomColors, enableCustomDuotone ] = useSettings(\n\t\t'color.custom',\n\t\t'color.customDuotone'\n\t);\n\tconst disableCustomColors = ! enableCustomColors;\n\tconst disableCustomDuotone =\n\t\t! enableCustomDuotone ||\n\t\t( colorPalette?.length === 0 && disableCustomColors );\n\n\tif ( duotonePalette?.length === 0 && disableCustomDuotone ) {\n\t\treturn null;\n\t}\n\n\tif ( blockEditingMode !== 'default' ) {\n\t\treturn null;\n\t}\n\n\tconst duotonePresetOrColors =\n\t\tduotoneStyle === 'unset' || Array.isArray( duotoneStyle )\n\t\t\t? duotoneStyle\n\t\t\t: getColorsFromDuotonePreset( duotoneStyle, duotonePalette );\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls group=\"filter\">\n\t\t\t\t<StylesFiltersPanel\n\t\t\t\t\tvalue={ { filter: { duotone: duotonePresetOrColors } } }\n\t\t\t\t\tonChange={ ( newDuotone ) => {\n\t\t\t\t\t\tconst newStyle = {\n\t\t\t\t\t\t\t...style,\n\t\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t\t...newDuotone?.filter,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsetAttributes( { style: newStyle } );\n\t\t\t\t\t} }\n\t\t\t\t\tsettings={ settings }\n\t\t\t\t/>\n\t\t\t</InspectorControls>\n\t\t\t<BlockControls group=\"block\" __experimentalShareWithChildBlocks>\n\t\t\t\t<DuotoneControl\n\t\t\t\t\tduotonePalette={ duotonePalette }\n\t\t\t\t\tcolorPalette={ colorPalette }\n\t\t\t\t\tdisableCustomDuotone={ disableCustomDuotone }\n\t\t\t\t\tdisableCustomColors={ disableCustomColors }\n\t\t\t\t\tvalue={ duotonePresetOrColors }\n\t\t\t\t\tonChange={ ( newDuotone ) => {\n\t\t\t\t\t\tconst maybePreset = getDuotonePresetFromColors(\n\t\t\t\t\t\t\tnewDuotone,\n\t\t\t\t\t\t\tduotonePalette\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst newStyle = {\n\t\t\t\t\t\t\t...style,\n\t\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t\t...style?.color,\n\t\t\t\t\t\t\t\tduotone: maybePreset ?? newDuotone, // use preset or fallback to custom colors.\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsetAttributes( { style: newStyle } );\n\t\t\t\t\t} }\n\t\t\t\t\tsettings={ settings }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t</>\n\t);\n}\n\nexport default {\n\tshareWithChildBlocks: true,\n\tedit: DuotonePanelPure,\n\tuseBlockProps,\n\tattributeKeys: [ 'style' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, 'filter.duotone' );\n\t},\n};\n\n/**\n * Filters registered block settings, extending attributes to include\n * the `duotone` attribute.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addDuotoneAttributes( settings ) {\n\t// Previous `color.__experimentalDuotone` support flag is migrated via\n\t// block_type_metadata_settings filter in `lib/block-supports/duotone.php`.\n\tif ( ! hasBlockSupport( settings, 'filter.duotone' ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify their own attribute definition with default\n\t// values if needed.\n\tif ( ! settings.attributes.style ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tstyle: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\nfunction useDuotoneStyles( {\n\tclientId,\n\tid: filterId,\n\tselector: duotoneSelector,\n\tattribute: duotoneAttr,\n} ) {\n\tconst duotonePalette = useMultiOriginPresets( {\n\t\tpresetSetting: 'color.duotone',\n\t\tdefaultSetting: 'color.defaultDuotone',\n\t} );\n\n\t// Possible values for duotone attribute:\n\t// 1. Array of colors - e.g. ['#000000', '#ffffff'].\n\t// 2. Variable for an existing Duotone preset - e.g. 'var:preset|duotone|green-blue' or 'var(--wp--preset--duotone--green-blue)''\n\t// 3. A CSS string - e.g. 'unset' to remove globally applied duotone.\n\tconst isCustom = Array.isArray( duotoneAttr );\n\tconst duotonePreset = isCustom\n\t\t? undefined\n\t\t: getColorsFromDuotonePreset( duotoneAttr, duotonePalette );\n\tconst isPreset = typeof duotoneAttr === 'string' && duotonePreset;\n\tconst isCSS = typeof duotoneAttr === 'string' && ! isPreset;\n\n\t// Match the structure of WP_Duotone_Gutenberg::render_duotone_support() in PHP.\n\tlet colors = null;\n\tif ( isPreset ) {\n\t\t// Array of colors.\n\t\tcolors = duotonePreset;\n\t} else if ( isCSS ) {\n\t\t// CSS filter property string (e.g. 'unset').\n\t\tcolors = duotoneAttr;\n\t} else if ( isCustom ) {\n\t\t// Array of colors.\n\t\tcolors = duotoneAttr;\n\t}\n\n\t// Build the CSS selectors to which the filter will be applied.\n\tconst selectors = duotoneSelector.split( ',' );\n\n\tconst selectorsScoped = selectors.map( ( selectorPart ) => {\n\t\t// Assuming the selector part is a subclass selector (not a tag name)\n\t\t// so we can prepend the filter id class. If we want to support elements\n\t\t// such as `img` or namespaces, we'll need to add a case for that here.\n\t\treturn `.${ filterId }${ selectorPart.trim() }`;\n\t} );\n\n\tconst selector = selectorsScoped.join( ', ' );\n\n\tconst isValidFilter = Array.isArray( colors ) || colors === 'unset';\n\n\tusePrivateStyleOverride(\n\t\tisValidFilter\n\t\t\t? {\n\t\t\t\t\tcss:\n\t\t\t\t\t\tcolors !== 'unset'\n\t\t\t\t\t\t\t? getDuotoneStylesheet( selector, filterId )\n\t\t\t\t\t\t\t: getDuotoneUnsetStylesheet( selector ),\n\t\t\t\t\t__unstableType: 'presets',\n\t\t\t  }\n\t\t\t: undefined\n\t);\n\tusePrivateStyleOverride(\n\t\tisValidFilter\n\t\t\t? {\n\t\t\t\t\tassets:\n\t\t\t\t\t\tcolors !== 'unset'\n\t\t\t\t\t\t\t? getDuotoneFilter( filterId, colors )\n\t\t\t\t\t\t\t: '',\n\t\t\t\t\t__unstableType: 'svgs',\n\t\t\t  }\n\t\t\t: undefined\n\t);\n\n\tconst blockElement = useBlockElement( clientId );\n\n\tuseEffect( () => {\n\t\tif ( ! isValidFilter ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Safari does not always update the duotone filter when the duotone\n\t\t// colors are changed. When using Safari, force the block element to be\n\t\t// repainted by the browser to ensure any changes are reflected\n\t\t// visually. This logic matches that used on the site frontend in\n\t\t// `block-supports/duotone.php`.\n\t\tif ( blockElement && isSafari ) {\n\t\t\tconst display = blockElement.style.display;\n\t\t\t// Switch to `inline-block` to force a repaint. In the editor,\n\t\t\t// `inline-block` is used instead of `none` to ensure that scroll\n\t\t\t// position is not affected, as `none` results in the editor\n\t\t\t// scrolling to the top of the block.\n\t\t\tblockElement.style.setProperty( 'display', 'inline-block' );\n\t\t\t// Simply accessing el.offsetHeight flushes layout and style changes\n\t\t\t// in WebKit without having to wait for setTimeout.\n\t\t\t// eslint-disable-next-line no-unused-expressions\n\t\t\tblockElement.offsetHeight;\n\t\t\tblockElement.style.setProperty( 'display', display );\n\t\t}\n\t\t// `colors` must be a dependency so this effect runs when the colors\n\t\t// change in Safari.\n\t}, [ isValidFilter, blockElement, colors ] );\n}\n\n// Used for generating the instance ID\nconst DUOTONE_BLOCK_PROPS_REFERENCE = {};\n\nfunction useBlockProps( { clientId, name, style } ) {\n\tconst id = useInstanceId( DUOTONE_BLOCK_PROPS_REFERENCE );\n\tconst selector = useMemo( () => {\n\t\tconst blockType = getBlockType( name );\n\n\t\tif ( blockType ) {\n\t\t\t// Backwards compatibility for `supports.color.__experimentalDuotone`\n\t\t\t// is provided via the `block_type_metadata_settings` filter. If\n\t\t\t// `supports.filter.duotone` has not been set and the\n\t\t\t// experimental property has been, the experimental property\n\t\t\t// value is copied into `supports.filter.duotone`.\n\t\t\tconst duotoneSupport = getBlockSupport(\n\t\t\t\tblockType,\n\t\t\t\t'filter.duotone',\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tif ( ! duotoneSupport ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// If the experimental duotone support was set, that value is\n\t\t\t// to be treated as a selector and requires scoping.\n\t\t\tconst experimentalDuotone = getBlockSupport(\n\t\t\t\tblockType,\n\t\t\t\t'color.__experimentalDuotone',\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tif ( experimentalDuotone ) {\n\t\t\t\tconst rootSelector = getBlockCSSSelector( blockType );\n\t\t\t\treturn typeof experimentalDuotone === 'string'\n\t\t\t\t\t? scopeSelector( rootSelector, experimentalDuotone )\n\t\t\t\t\t: rootSelector;\n\t\t\t}\n\n\t\t\t// Regular filter.duotone support uses filter.duotone selectors with fallbacks.\n\t\t\treturn getBlockCSSSelector( blockType, 'filter.duotone', {\n\t\t\t\tfallback: true,\n\t\t\t} );\n\t\t}\n\t}, [ name ] );\n\n\tconst attribute = style?.color?.duotone;\n\n\tconst filterClass = `wp-duotone-${ id }`;\n\n\tconst shouldRender = selector && attribute;\n\n\tuseDuotoneStyles( {\n\t\tclientId,\n\t\tid: filterClass,\n\t\tselector,\n\t\tattribute,\n\t} );\n\n\treturn {\n\t\tclassName: shouldRender ? filterClass : '',\n\t};\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/editor/duotone/add-attributes',\n\taddDuotoneAttributes\n);\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tstore as blocksStore,\n\tisReusableBlock,\n\tisTemplatePart,\n\t__experimentalGetBlockLabel as getBlockLabel,\n} from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/** @typedef {import('@wordpress/blocks').WPIcon} WPIcon */\n\n/**\n * Contains basic block's information for display reasons.\n *\n * @typedef {Object} WPBlockDisplayInformation\n *\n * @property {boolean} isSynced    True if is a reusable block or template part\n * @property {string}  title       Human-readable block type label.\n * @property {WPIcon}  icon        Block type icon.\n * @property {string}  description A detailed block type description.\n * @property {string}  anchor      HTML anchor.\n * @property {name}    name        A custom, human readable name for the block.\n */\n\n/**\n * Get the display label for a block's position type.\n *\n * @param {Object} attributes Block attributes.\n * @return {string} The position type label.\n */\nfunction getPositionTypeLabel( attributes ) {\n\tconst positionType = attributes?.style?.position?.type;\n\n\tif ( positionType === 'sticky' ) {\n\t\treturn __( 'Sticky' );\n\t}\n\n\tif ( positionType === 'fixed' ) {\n\t\treturn __( 'Fixed' );\n\t}\n\n\treturn null;\n}\n\n/**\n * Hook used to try to find a matching block variation and return\n * the appropriate information for display reasons. In order to\n * to try to find a match we need to things:\n * 1. Block's client id to extract it's current attributes.\n * 2. A block variation should have set `isActive` prop to a proper function.\n *\n * If for any reason a block variation match cannot be found,\n * the returned information come from the Block Type.\n * If no blockType is found with the provided clientId, returns null.\n *\n * @param {string} clientId Block's client id.\n * @return {?WPBlockDisplayInformation} Block's display information, or `null` when the block or its type not found.\n */\n\nexport default function useBlockDisplayInformation( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst { getBlockName, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst { getBlockType, getActiveBlockVariation } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst blockType = getBlockType( blockName );\n\t\t\tif ( ! blockType ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\n\t\t\tconst isSynced =\n\t\t\t\tisReusableBlock( blockType ) || isTemplatePart( blockType );\n\t\t\tconst syncedTitle = isSynced\n\t\t\t\t? getBlockLabel( blockType, attributes )\n\t\t\t\t: undefined;\n\t\t\tconst title = syncedTitle || blockType.title;\n\t\t\tconst positionLabel = getPositionTypeLabel( attributes );\n\t\t\tconst blockTypeInfo = {\n\t\t\t\tisSynced,\n\t\t\t\ttitle,\n\t\t\t\ticon: blockType.icon,\n\t\t\t\tdescription: blockType.description,\n\t\t\t\tanchor: attributes?.anchor,\n\t\t\t\tpositionLabel,\n\t\t\t\tpositionType: attributes?.style?.position?.type,\n\t\t\t\tname: attributes?.metadata?.name,\n\t\t\t};\n\t\t\tif ( ! match ) {\n\t\t\t\treturn blockTypeInfo;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisSynced,\n\t\t\t\ttitle: match.title || blockType.title,\n\t\t\t\ticon: match.icon || blockType.icon,\n\t\t\t\tdescription: match.description || blockType.description,\n\t\t\t\tanchor: attributes?.anchor,\n\t\t\t\tpositionLabel,\n\t\t\t\tpositionType: attributes?.style?.position?.type,\n\t\t\t\tname: attributes?.metadata?.name,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { BaseControl, CustomSelectControl } from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { useMemo, Platform } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../components/use-settings';\nimport InspectorControls from '../components/inspector-controls';\nimport useBlockDisplayInformation from '../components/use-block-display-information';\nimport { cleanEmptyObject, useStyleOverride } from './utils';\nimport { store as blockEditorStore } from '../store';\n\nconst POSITION_SUPPORT_KEY = 'position';\n\nconst DEFAULT_OPTION = {\n\tkey: 'default',\n\tvalue: '',\n\tname: __( 'Default' ),\n};\n\nconst STICKY_OPTION = {\n\tkey: 'sticky',\n\tvalue: 'sticky',\n\tname: _x( 'Sticky', 'Name for the value of the CSS position property' ),\n\thint: __(\n\t\t'The block will stick to the top of the window instead of scrolling.'\n\t),\n};\n\nconst FIXED_OPTION = {\n\tkey: 'fixed',\n\tvalue: 'fixed',\n\tname: _x( 'Fixed', 'Name for the value of the CSS position property' ),\n\thint: __( 'The block will not move when the page is scrolled.' ),\n};\n\nconst POSITION_SIDES = [ 'top', 'right', 'bottom', 'left' ];\nconst VALID_POSITION_TYPES = [ 'sticky', 'fixed' ];\n\n/**\n * Get calculated position CSS.\n *\n * @param {Object} props          Component props.\n * @param {string} props.selector Selector to use.\n * @param {Object} props.style    Style object.\n * @return {string} The generated CSS rules.\n */\nexport function getPositionCSS( { selector, style } ) {\n\tlet output = '';\n\n\tconst { type: positionType } = style?.position || {};\n\n\tif ( ! VALID_POSITION_TYPES.includes( positionType ) ) {\n\t\treturn output;\n\t}\n\n\toutput += `${ selector } {`;\n\toutput += `position: ${ positionType };`;\n\n\tPOSITION_SIDES.forEach( ( side ) => {\n\t\tif ( style?.position?.[ side ] !== undefined ) {\n\t\t\toutput += `${ side }: ${ style.position[ side ] };`;\n\t\t}\n\t} );\n\n\tif ( positionType === 'sticky' || positionType === 'fixed' ) {\n\t\t// TODO: Replace hard-coded z-index value with a z-index preset approach in theme.json.\n\t\toutput += `z-index: 10`;\n\t}\n\toutput += `}`;\n\n\treturn output;\n}\n\n/**\n * Determines if there is sticky position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasStickyPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! ( true === support || support?.sticky );\n}\n\n/**\n * Determines if there is fixed position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasFixedPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! ( true === support || support?.fixed );\n}\n\n/**\n * Determines if there is position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! support;\n}\n\n/**\n * Checks if there is a current value in the position block support attributes.\n *\n * @param {Object} props Block props.\n * @return {boolean} Whether or not the block has a position value set.\n */\nexport function hasPositionValue( props ) {\n\treturn props.attributes.style?.position?.type !== undefined;\n}\n\n/**\n * Checks if the block is currently set to a sticky or fixed position.\n * This check is helpful for determining how to position block toolbars or other elements.\n *\n * @param {Object} attributes Block attributes.\n * @return {boolean} Whether or not the block is set to a sticky or fixed position.\n */\nexport function hasStickyOrFixedPositionValue( attributes ) {\n\tconst positionType = attributes?.style?.position?.type;\n\treturn positionType === 'sticky' || positionType === 'fixed';\n}\n\n/**\n * Resets the position block support attributes. This can be used when disabling\n * the position support controls for a block via a `ToolsPanel`.\n *\n * @param {Object} props               Block props.\n * @param {Object} props.attributes    Block's attributes.\n * @param {Object} props.setAttributes Function to set block's attributes.\n */\nexport function resetPosition( { attributes = {}, setAttributes } ) {\n\tconst { style = {} } = attributes;\n\n\tsetAttributes( {\n\t\tstyle: cleanEmptyObject( {\n\t\t\t...style,\n\t\t\tposition: {\n\t\t\t\t...style?.position,\n\t\t\t\ttype: undefined,\n\t\t\t\ttop: undefined,\n\t\t\t\tright: undefined,\n\t\t\t\tbottom: undefined,\n\t\t\t\tleft: undefined,\n\t\t\t},\n\t\t} ),\n\t} );\n}\n\n/**\n * Custom hook that checks if position settings have been disabled.\n *\n * @param {string} name The name of the block.\n *\n * @return {boolean} Whether padding setting is disabled.\n */\nexport function useIsPositionDisabled( { name: blockName } = {} ) {\n\tconst [ allowFixed, allowSticky ] = useSettings(\n\t\t'position.fixed',\n\t\t'position.sticky'\n\t);\n\tconst isDisabled = ! allowFixed && ! allowSticky;\n\n\treturn ! hasPositionSupport( blockName ) || isDisabled;\n}\n\n/*\n * Position controls rendered in an inspector control panel.\n *\n * @param {Object} props\n *\n * @return {Element} Position panel.\n */\nexport function PositionPanelPure( {\n\tstyle = {},\n\tclientId,\n\tname: blockName,\n\tsetAttributes,\n} ) {\n\tconst allowFixed = hasFixedPositionSupport( blockName );\n\tconst allowSticky = hasStickyPositionSupport( blockName );\n\tconst value = style?.position?.type;\n\n\tconst { firstParentClientId } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockParents } = select( blockEditorStore );\n\t\t\tconst parents = getBlockParents( clientId );\n\t\t\treturn { firstParentClientId: parents[ parents.length - 1 ] };\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst blockInformation = useBlockDisplayInformation( firstParentClientId );\n\tconst stickyHelpText =\n\t\tallowSticky && value === STICKY_OPTION.value && blockInformation\n\t\t\t? sprintf(\n\t\t\t\t\t/* translators: %s: the name of the parent block. */\n\t\t\t\t\t__(\n\t\t\t\t\t\t'The block will stick to the scrollable area of the parent %s block.'\n\t\t\t\t\t),\n\t\t\t\t\tblockInformation.title\n\t\t\t  )\n\t\t\t: null;\n\n\tconst options = useMemo( () => {\n\t\tconst availableOptions = [ DEFAULT_OPTION ];\n\t\t// Display options if they are allowed, or if a block already has a valid value set.\n\t\t// This allows for a block to be switched off from a position type that is not allowed.\n\t\tif ( allowSticky || value === STICKY_OPTION.value ) {\n\t\t\tavailableOptions.push( STICKY_OPTION );\n\t\t}\n\t\tif ( allowFixed || value === FIXED_OPTION.value ) {\n\t\t\tavailableOptions.push( FIXED_OPTION );\n\t\t}\n\t\treturn availableOptions;\n\t}, [ allowFixed, allowSticky, value ] );\n\n\tconst onChangeType = ( next ) => {\n\t\t// For now, use a hard-coded `0px` value for the position.\n\t\t// `0px` is preferred over `0` as it can be used in `calc()` functions.\n\t\t// In the future, it could be useful to allow for an offset value.\n\t\tconst placementValue = '0px';\n\n\t\tconst newStyle = {\n\t\t\t...style,\n\t\t\tposition: {\n\t\t\t\t...style?.position,\n\t\t\t\ttype: next,\n\t\t\t\ttop:\n\t\t\t\t\tnext === 'sticky' || next === 'fixed'\n\t\t\t\t\t\t? placementValue\n\t\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t};\n\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( newStyle ),\n\t\t} );\n\t};\n\n\tconst selectedOption = value\n\t\t? options.find( ( option ) => option.value === value ) || DEFAULT_OPTION\n\t\t: DEFAULT_OPTION;\n\n\t// Only display position controls if there is at least one option to choose from.\n\treturn Platform.select( {\n\t\tweb:\n\t\t\toptions.length > 1 ? (\n\t\t\t\t<InspectorControls group=\"position\">\n\t\t\t\t\t<BaseControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\thelp={ stickyHelpText }\n\t\t\t\t\t>\n\t\t\t\t\t\t<CustomSelectControl\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tlabel={ __( 'Position' ) }\n\t\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\t\tdescribedBy={ sprintf(\n\t\t\t\t\t\t\t\t// translators: %s: Currently selected position.\n\t\t\t\t\t\t\t\t__( 'Currently selected position: %s' ),\n\t\t\t\t\t\t\t\tselectedOption.name\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\toptions={ options }\n\t\t\t\t\t\t\tvalue={ selectedOption }\n\t\t\t\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\t\t\t\tonChangeType( selectedItem.value );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</BaseControl>\n\t\t\t\t</InspectorControls>\n\t\t\t) : null,\n\t\tnative: null,\n\t} );\n}\n\nexport default {\n\tedit: function Edit( props ) {\n\t\tconst isPositionDisabled = useIsPositionDisabled( props );\n\t\tif ( isPositionDisabled ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn <PositionPanelPure { ...props } />;\n\t},\n\tuseBlockProps,\n\tattributeKeys: [ 'style' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, POSITION_SUPPORT_KEY );\n\t},\n};\n\n// Used for generating the instance ID\nconst POSITION_BLOCK_PROPS_REFERENCE = {};\n\nfunction useBlockProps( { name, style } ) {\n\tconst hasPositionBlockSupport = hasBlockSupport(\n\t\tname,\n\t\tPOSITION_SUPPORT_KEY\n\t);\n\tconst isPositionDisabled = useIsPositionDisabled( { name } );\n\tconst allowPositionStyles = hasPositionBlockSupport && ! isPositionDisabled;\n\n\tconst id = useInstanceId( POSITION_BLOCK_PROPS_REFERENCE );\n\n\t// Higher specificity to override defaults in editor UI.\n\tconst positionSelector = `.wp-container-${ id }.wp-container-${ id }`;\n\n\t// Get CSS string for the current position values.\n\tlet css;\n\tif ( allowPositionStyles ) {\n\t\tcss =\n\t\t\tgetPositionCSS( {\n\t\t\t\tselector: positionSelector,\n\t\t\t\tstyle,\n\t\t\t} ) || '';\n\t}\n\n\t// Attach a `wp-container-` id-based class name.\n\tconst className = clsx( {\n\t\t[ `wp-container-${ id }` ]: allowPositionStyles && !! css, // Only attach a container class if there is generated CSS to be attached.\n\t\t[ `is-position-${ style?.position?.type }` ]:\n\t\t\tallowPositionStyles && !! css && !! style?.position?.type,\n\t} );\n\n\tuseStyleOverride( { css } );\n\n\treturn { className };\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__EXPERIMENTAL_STYLE_PROPERTY as STYLE_PROPERTY,\n\t__EXPERIMENTAL_ELEMENTS as ELEMENTS,\n\tgetBlockSupport,\n\tgetBlockTypes,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { useContext, useMemo } from '@wordpress/element';\nimport { getCSSRules, getCSSValueFromRawStyle } from '@wordpress/style-engine';\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport {\n\tPRESET_METADATA,\n\tROOT_BLOCK_SELECTOR,\n\tROOT_CSS_PROPERTIES_SELECTOR,\n\tscopeSelector,\n\tscopeFeatureSelectors,\n\tappendToSelector,\n\tgetBlockStyleVariationSelector,\n\tgetResolvedValue,\n} from './utils';\nimport { getBlockCSSSelector } from './get-block-css-selector';\nimport { getTypographyFontSizeValue } from './typography-utils';\nimport { GlobalStylesContext } from './context';\nimport { useGlobalSetting } from './hooks';\nimport { getDuotoneFilter } from '../duotone/utils';\nimport { getGapCSSValue } from '../../hooks/gap';\nimport { setBackgroundStyleDefaults } from '../../hooks/background';\nimport { store as blockEditorStore } from '../../store';\nimport { LAYOUT_DEFINITIONS } from '../../layouts/definitions';\nimport { getValueFromObjectPath, setImmutably } from '../../utils/object';\nimport { unlock } from '../../lock-unlock';\n\n// Elements that rely on class names in their selectors.\nconst ELEMENT_CLASS_NAMES = {\n\tbutton: 'wp-element-button',\n\tcaption: 'wp-element-caption',\n};\n\n// List of block support features that can have their related styles\n// generated under their own feature level selector rather than the block's.\nconst BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS = {\n\t__experimentalBorder: 'border',\n\tcolor: 'color',\n\tspacing: 'spacing',\n\ttypography: 'typography',\n};\nconst { kebabCase } = unlock( componentsPrivateApis );\n\n/**\n * Transform given preset tree into a set of style declarations.\n *\n * @param {Object} blockPresets\n * @param {Object} mergedSettings Merged theme.json settings.\n *\n * @return {Array<Object>} An array of style declarations.\n */\nfunction getPresetsDeclarations( blockPresets = {}, mergedSettings ) {\n\treturn PRESET_METADATA.reduce(\n\t\t( declarations, { path, valueKey, valueFunc, cssVarInfix } ) => {\n\t\t\tconst presetByOrigin = getValueFromObjectPath(\n\t\t\t\tblockPresets,\n\t\t\t\tpath,\n\t\t\t\t[]\n\t\t\t);\n\t\t\t[ 'default', 'theme', 'custom' ].forEach( ( origin ) => {\n\t\t\t\tif ( presetByOrigin[ origin ] ) {\n\t\t\t\t\tpresetByOrigin[ origin ].forEach( ( value ) => {\n\t\t\t\t\t\tif ( valueKey && ! valueFunc ) {\n\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t`--wp--preset--${ cssVarInfix }--${ kebabCase(\n\t\t\t\t\t\t\t\t\tvalue.slug\n\t\t\t\t\t\t\t\t) }: ${ value[ valueKey ] }`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tvalueFunc &&\n\t\t\t\t\t\t\ttypeof valueFunc === 'function'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t`--wp--preset--${ cssVarInfix }--${ kebabCase(\n\t\t\t\t\t\t\t\t\tvalue.slug\n\t\t\t\t\t\t\t\t) }: ${ valueFunc( value, mergedSettings ) }`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn declarations;\n\t\t},\n\t\t[]\n\t);\n}\n\n/**\n * Transform given preset tree into a set of preset class declarations.\n *\n * @param {?string} blockSelector\n * @param {Object}  blockPresets\n * @return {string} CSS declarations for the preset classes.\n */\nfunction getPresetsClasses( blockSelector = '*', blockPresets = {} ) {\n\treturn PRESET_METADATA.reduce(\n\t\t( declarations, { path, cssVarInfix, classes } ) => {\n\t\t\tif ( ! classes ) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\n\t\t\tconst presetByOrigin = getValueFromObjectPath(\n\t\t\t\tblockPresets,\n\t\t\t\tpath,\n\t\t\t\t[]\n\t\t\t);\n\t\t\t[ 'default', 'theme', 'custom' ].forEach( ( origin ) => {\n\t\t\t\tif ( presetByOrigin[ origin ] ) {\n\t\t\t\t\tpresetByOrigin[ origin ].forEach( ( { slug } ) => {\n\t\t\t\t\t\tclasses.forEach( ( { classSuffix, propertyName } ) => {\n\t\t\t\t\t\t\tconst classSelectorToUse = `.has-${ kebabCase(\n\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t) }-${ classSuffix }`;\n\t\t\t\t\t\t\tconst selectorToUse = blockSelector\n\t\t\t\t\t\t\t\t.split( ',' ) // Selector can be \"h1, h2, h3\"\n\t\t\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\t\t\t( selector ) =>\n\t\t\t\t\t\t\t\t\t\t`${ selector }${ classSelectorToUse }`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.join( ',' );\n\t\t\t\t\t\t\tconst value = `var(--wp--preset--${ cssVarInfix }--${ kebabCase(\n\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t) })`;\n\t\t\t\t\t\t\tdeclarations += `${ selectorToUse }{${ propertyName }: ${ value } !important;}`;\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn declarations;\n\t\t},\n\t\t''\n\t);\n}\n\nfunction getPresetsSvgFilters( blockPresets = {} ) {\n\treturn PRESET_METADATA.filter(\n\t\t// Duotone are the only type of filters for now.\n\t\t( metadata ) => metadata.path.at( -1 ) === 'duotone'\n\t).flatMap( ( metadata ) => {\n\t\tconst presetByOrigin = getValueFromObjectPath(\n\t\t\tblockPresets,\n\t\t\tmetadata.path,\n\t\t\t{}\n\t\t);\n\t\treturn [ 'default', 'theme' ]\n\t\t\t.filter( ( origin ) => presetByOrigin[ origin ] )\n\t\t\t.flatMap( ( origin ) =>\n\t\t\t\tpresetByOrigin[ origin ].map( ( preset ) =>\n\t\t\t\t\tgetDuotoneFilter(\n\t\t\t\t\t\t`wp-duotone-${ preset.slug }`,\n\t\t\t\t\t\tpreset.colors\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t\t.join( '' );\n\t} );\n}\n\nfunction flattenTree( input = {}, prefix, token ) {\n\tlet result = [];\n\tObject.keys( input ).forEach( ( key ) => {\n\t\tconst newKey = prefix + kebabCase( key.replace( '/', '-' ) );\n\t\tconst newLeaf = input[ key ];\n\n\t\tif ( newLeaf instanceof Object ) {\n\t\t\tconst newPrefix = newKey + token;\n\t\t\tresult = [ ...result, ...flattenTree( newLeaf, newPrefix, token ) ];\n\t\t} else {\n\t\t\tresult.push( `${ newKey }: ${ newLeaf }` );\n\t\t}\n\t} );\n\treturn result;\n}\n\n/**\n * Gets variation selector string from feature selector.\n *\n * @param {string} featureSelector        The feature selector.\n *\n * @param {string} styleVariationSelector The style variation selector.\n * @return {string} Combined selector string.\n */\nfunction concatFeatureVariationSelectorString(\n\tfeatureSelector,\n\tstyleVariationSelector\n) {\n\tconst featureSelectors = featureSelector.split( ',' );\n\tconst combinedSelectors = [];\n\tfeatureSelectors.forEach( ( selector ) => {\n\t\tcombinedSelectors.push(\n\t\t\t`${ styleVariationSelector.trim() }${ selector.trim() }`\n\t\t);\n\t} );\n\treturn combinedSelectors.join( ', ' );\n}\n\n/**\n * Generate style declarations for a block's custom feature and subfeature\n * selectors.\n *\n * NOTE: The passed `styles` object will be mutated by this function.\n *\n * @param {Object} selectors Custom selectors object for a block.\n * @param {Object} styles    A block's styles object.\n *\n * @return {Object} Style declarations.\n */\nconst getFeatureDeclarations = ( selectors, styles ) => {\n\tconst declarations = {};\n\n\tObject.entries( selectors ).forEach( ( [ feature, selector ] ) => {\n\t\t// We're only processing features/subfeatures that have styles.\n\t\tif ( feature === 'root' || ! styles?.[ feature ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isShorthand = typeof selector === 'string';\n\n\t\t// If we have a selector object instead of shorthand process it.\n\t\tif ( ! isShorthand ) {\n\t\t\tObject.entries( selector ).forEach(\n\t\t\t\t( [ subfeature, subfeatureSelector ] ) => {\n\t\t\t\t\t// Don't process root feature selector yet or any\n\t\t\t\t\t// subfeature that doesn't have a style.\n\t\t\t\t\tif (\n\t\t\t\t\t\tsubfeature === 'root' ||\n\t\t\t\t\t\t! styles?.[ feature ][ subfeature ]\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create a temporary styles object and build\n\t\t\t\t\t// declarations for subfeature.\n\t\t\t\t\tconst subfeatureStyles = {\n\t\t\t\t\t\t[ feature ]: {\n\t\t\t\t\t\t\t[ subfeature ]: styles[ feature ][ subfeature ],\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\tconst newDeclarations =\n\t\t\t\t\t\tgetStylesDeclarations( subfeatureStyles );\n\n\t\t\t\t\t// Merge new declarations in with any others that\n\t\t\t\t\t// share the same selector.\n\t\t\t\t\tdeclarations[ subfeatureSelector ] = [\n\t\t\t\t\t\t...( declarations[ subfeatureSelector ] || [] ),\n\t\t\t\t\t\t...newDeclarations,\n\t\t\t\t\t];\n\n\t\t\t\t\t// Remove the subfeature's style now it will be\n\t\t\t\t\t// included under its own selector not the block's.\n\t\t\t\t\tdelete styles[ feature ][ subfeature ];\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t// Now subfeatures have been processed and removed, we can\n\t\t// process root, or shorthand, feature selectors.\n\t\tif ( isShorthand || selector.root ) {\n\t\t\tconst featureSelector = isShorthand ? selector : selector.root;\n\n\t\t\t// Create temporary style object and build declarations for feature.\n\t\t\tconst featureStyles = { [ feature ]: styles[ feature ] };\n\t\t\tconst newDeclarations = getStylesDeclarations( featureStyles );\n\n\t\t\t// Merge new declarations with any others that share the selector.\n\t\t\tdeclarations[ featureSelector ] = [\n\t\t\t\t...( declarations[ featureSelector ] || [] ),\n\t\t\t\t...newDeclarations,\n\t\t\t];\n\n\t\t\t// Remove the feature from the block's styles now as it will be\n\t\t\t// included under its own selector not the block's.\n\t\t\tdelete styles[ feature ];\n\t\t}\n\t} );\n\n\treturn declarations;\n};\n\n/**\n * Transform given style tree into a set of style declarations.\n *\n * @param {Object}  blockStyles         Block styles.\n *\n * @param {string}  selector            The selector these declarations should attach to.\n *\n * @param {boolean} useRootPaddingAlign Whether to use CSS custom properties in root selector.\n *\n * @param {Object}  tree                A theme.json tree containing layout definitions.\n *\n * @param {boolean} disableRootPadding  Whether to force disable the root padding styles.\n * @return {Array} An array of style declarations.\n */\nexport function getStylesDeclarations(\n\tblockStyles = {},\n\tselector = '',\n\tuseRootPaddingAlign,\n\ttree = {},\n\tdisableRootPadding = false\n) {\n\tconst isRoot = ROOT_BLOCK_SELECTOR === selector;\n\tconst output = Object.entries( STYLE_PROPERTY ).reduce(\n\t\t(\n\t\t\tdeclarations,\n\t\t\t[ key, { value, properties, useEngine, rootOnly } ]\n\t\t) => {\n\t\t\tif ( rootOnly && ! isRoot ) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\t\t\tconst pathToValue = value;\n\t\t\tif ( pathToValue[ 0 ] === 'elements' || useEngine ) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\n\t\t\tconst styleValue = getValueFromObjectPath(\n\t\t\t\tblockStyles,\n\t\t\t\tpathToValue\n\t\t\t);\n\n\t\t\t// Root-level padding styles don't currently support strings with CSS shorthand values.\n\t\t\t// This may change: https://github.com/WordPress/gutenberg/issues/40132.\n\t\t\tif (\n\t\t\t\tkey === '--wp--style--root--padding' &&\n\t\t\t\t( typeof styleValue === 'string' || ! useRootPaddingAlign )\n\t\t\t) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\n\t\t\tif ( properties && typeof styleValue !== 'string' ) {\n\t\t\t\tObject.entries( properties ).forEach( ( entry ) => {\n\t\t\t\t\tconst [ name, prop ] = entry;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t! getValueFromObjectPath( styleValue, [ prop ], false )\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Do not create a declaration\n\t\t\t\t\t\t// for sub-properties that don't have any value.\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cssProperty = name.startsWith( '--' )\n\t\t\t\t\t\t? name\n\t\t\t\t\t\t: kebabCase( name );\n\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t`${ cssProperty }: ${ getCSSValueFromRawStyle(\n\t\t\t\t\t\t\tgetValueFromObjectPath( styleValue, [ prop ] )\n\t\t\t\t\t\t) }`\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} else if (\n\t\t\t\tgetValueFromObjectPath( blockStyles, pathToValue, false )\n\t\t\t) {\n\t\t\t\tconst cssProperty = key.startsWith( '--' )\n\t\t\t\t\t? key\n\t\t\t\t\t: kebabCase( key );\n\t\t\t\tdeclarations.push(\n\t\t\t\t\t`${ cssProperty }: ${ getCSSValueFromRawStyle(\n\t\t\t\t\t\tgetValueFromObjectPath( blockStyles, pathToValue )\n\t\t\t\t\t) }`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn declarations;\n\t\t},\n\t\t[]\n\t);\n\n\t/*\n\t * Preprocess background image values.\n\t *\n\t * Note: As we absorb more and more styles into the engine, we could simplify this function.\n\t * A refactor is for the style engine to handle ref resolution (and possibly defaults)\n\t * via a public util used internally and externally. Theme.json tree and defaults could be passed\n\t * as options.\n\t */\n\tif ( !! blockStyles.background ) {\n\t\t/*\n\t\t * Resolve dynamic values before they are compiled by the style engine,\n\t\t * which doesn't (yet) resolve dynamic values.\n\t\t */\n\t\tif ( blockStyles.background?.backgroundImage ) {\n\t\t\tblockStyles.background.backgroundImage = getResolvedValue(\n\t\t\t\tblockStyles.background.backgroundImage,\n\t\t\t\ttree\n\t\t\t);\n\t\t}\n\n\t\t/*\n\t\t * Set default values for block background styles.\n\t\t * Top-level styles are an exception as they are applied to the body.\n\t\t */\n\t\tif ( ! isRoot && !! blockStyles.background?.backgroundImage?.id ) {\n\t\t\tblockStyles = {\n\t\t\t\t...blockStyles,\n\t\t\t\tbackground: {\n\t\t\t\t\t...blockStyles.background,\n\t\t\t\t\t...setBackgroundStyleDefaults( blockStyles.background ),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\n\tconst extraRules = getCSSRules( blockStyles );\n\textraRules.forEach( ( rule ) => {\n\t\t// Don't output padding properties if padding variables are set or if we're not editing a full template.\n\t\tif (\n\t\t\tisRoot &&\n\t\t\t( useRootPaddingAlign || disableRootPadding ) &&\n\t\t\trule.key.startsWith( 'padding' )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tconst cssProperty = rule.key.startsWith( '--' )\n\t\t\t? rule.key\n\t\t\t: kebabCase( rule.key );\n\n\t\tlet ruleValue = getResolvedValue( rule.value, tree, null );\n\n\t\t// Calculate fluid typography rules where available.\n\t\tif ( cssProperty === 'font-size' ) {\n\t\t\t/*\n\t\t\t * getTypographyFontSizeValue() will check\n\t\t\t * if fluid typography has been activated and also\n\t\t\t * whether the incoming value can be converted to a fluid value.\n\t\t\t * Values that already have a \"clamp()\" function will not pass the test,\n\t\t\t * and therefore the original $value will be returned.\n\t\t\t */\n\t\t\truleValue = getTypographyFontSizeValue(\n\t\t\t\t{ size: ruleValue },\n\t\t\t\ttree?.settings\n\t\t\t);\n\t\t}\n\n\t\t// For aspect ratio to work, other dimensions rules (and Cover block defaults) must be unset.\n\t\t// This ensures that a fixed height does not override the aspect ratio.\n\t\tif ( cssProperty === 'aspect-ratio' ) {\n\t\t\toutput.push( 'min-height: unset' );\n\t\t}\n\n\t\toutput.push( `${ cssProperty }: ${ ruleValue }` );\n\t} );\n\n\treturn output;\n}\n\n/**\n * Get generated CSS for layout styles by looking up layout definitions provided\n * in theme.json, and outputting common layout styles, and specific blockGap values.\n *\n * @param {Object}  props\n * @param {Object}  props.layoutDefinitions     Layout definitions, keyed by layout type.\n * @param {Object}  props.style                 A style object containing spacing values.\n * @param {string}  props.selector              Selector used to group together layout styling rules.\n * @param {boolean} props.hasBlockGapSupport    Whether or not the theme opts-in to blockGap support.\n * @param {boolean} props.hasFallbackGapSupport Whether or not the theme allows fallback gap styles.\n * @param {?string} props.fallbackGapValue      An optional fallback gap value if no real gap value is available.\n * @return {string} Generated CSS rules for the layout styles.\n */\nexport function getLayoutStyles( {\n\tlayoutDefinitions = LAYOUT_DEFINITIONS,\n\tstyle,\n\tselector,\n\thasBlockGapSupport,\n\thasFallbackGapSupport,\n\tfallbackGapValue,\n} ) {\n\tlet ruleset = '';\n\tlet gapValue = hasBlockGapSupport\n\t\t? getGapCSSValue( style?.spacing?.blockGap )\n\t\t: '';\n\n\t// Ensure a fallback gap value for the root layout definitions,\n\t// and use a fallback value if one is provided for the current block.\n\tif ( hasFallbackGapSupport ) {\n\t\tif ( selector === ROOT_BLOCK_SELECTOR ) {\n\t\t\tgapValue = ! gapValue ? '0.5em' : gapValue;\n\t\t} else if ( ! hasBlockGapSupport && fallbackGapValue ) {\n\t\t\tgapValue = fallbackGapValue;\n\t\t}\n\t}\n\n\tif ( gapValue && layoutDefinitions ) {\n\t\tObject.values( layoutDefinitions ).forEach(\n\t\t\t( { className, name, spacingStyles } ) => {\n\t\t\t\t// Allow outputting fallback gap styles for flex layout type when block gap support isn't available.\n\t\t\t\tif (\n\t\t\t\t\t! hasBlockGapSupport &&\n\t\t\t\t\t'flex' !== name &&\n\t\t\t\t\t'grid' !== name\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( spacingStyles?.length ) {\n\t\t\t\t\tspacingStyles.forEach( ( spacingStyle ) => {\n\t\t\t\t\t\tconst declarations = [];\n\n\t\t\t\t\t\tif ( spacingStyle.rules ) {\n\t\t\t\t\t\t\tObject.entries( spacingStyle.rules ).forEach(\n\t\t\t\t\t\t\t\t( [ cssProperty, cssValue ] ) => {\n\t\t\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t\t\t`${ cssProperty }: ${\n\t\t\t\t\t\t\t\t\t\t\tcssValue ? cssValue : gapValue\n\t\t\t\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\tlet combinedSelector = '';\n\n\t\t\t\t\t\t\tif ( ! hasBlockGapSupport ) {\n\t\t\t\t\t\t\t\t// For fallback gap styles, use lower specificity, to ensure styles do not unintentionally override theme styles.\n\t\t\t\t\t\t\t\tcombinedSelector =\n\t\t\t\t\t\t\t\t\tselector === ROOT_BLOCK_SELECTOR\n\t\t\t\t\t\t\t\t\t\t? `:where(.${ className }${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  })`\n\t\t\t\t\t\t\t\t\t\t: `:where(${ selector }.${ className }${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  })`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcombinedSelector =\n\t\t\t\t\t\t\t\t\tselector === ROOT_BLOCK_SELECTOR\n\t\t\t\t\t\t\t\t\t\t? `:root :where(.${ className })${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  }`\n\t\t\t\t\t\t\t\t\t\t: `:root :where(${ selector }-${ className })${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  }`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\truleset += `${ combinedSelector } { ${ declarations.join(\n\t\t\t\t\t\t\t\t'; '\n\t\t\t\t\t\t\t) }; }`;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t// For backwards compatibility, ensure the legacy block gap CSS variable is still available.\n\t\tif ( selector === ROOT_BLOCK_SELECTOR && hasBlockGapSupport ) {\n\t\t\truleset += `${ ROOT_CSS_PROPERTIES_SELECTOR } { --wp--style--block-gap: ${ gapValue }; }`;\n\t\t}\n\t}\n\n\t// Output base styles\n\tif ( selector === ROOT_BLOCK_SELECTOR && layoutDefinitions ) {\n\t\tconst validDisplayModes = [ 'block', 'flex', 'grid' ];\n\t\tObject.values( layoutDefinitions ).forEach(\n\t\t\t( { className, displayMode, baseStyles } ) => {\n\t\t\t\tif (\n\t\t\t\t\tdisplayMode &&\n\t\t\t\t\tvalidDisplayModes.includes( displayMode )\n\t\t\t\t) {\n\t\t\t\t\truleset += `${ selector } .${ className } { display:${ displayMode }; }`;\n\t\t\t\t}\n\n\t\t\t\tif ( baseStyles?.length ) {\n\t\t\t\t\tbaseStyles.forEach( ( baseStyle ) => {\n\t\t\t\t\t\tconst declarations = [];\n\n\t\t\t\t\t\tif ( baseStyle.rules ) {\n\t\t\t\t\t\t\tObject.entries( baseStyle.rules ).forEach(\n\t\t\t\t\t\t\t\t( [ cssProperty, cssValue ] ) => {\n\t\t\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t\t\t`${ cssProperty }: ${ cssValue }`\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\tconst combinedSelector = `.${ className }${\n\t\t\t\t\t\t\t\tbaseStyle?.selector || ''\n\t\t\t\t\t\t\t}`;\n\t\t\t\t\t\t\truleset += `${ combinedSelector } { ${ declarations.join(\n\t\t\t\t\t\t\t\t'; '\n\t\t\t\t\t\t\t) }; }`;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\treturn ruleset;\n}\n\nconst STYLE_KEYS = [\n\t'border',\n\t'color',\n\t'dimensions',\n\t'spacing',\n\t'typography',\n\t'filter',\n\t'outline',\n\t'shadow',\n\t'background',\n];\n\nfunction pickStyleKeys( treeToPickFrom ) {\n\tif ( ! treeToPickFrom ) {\n\t\treturn {};\n\t}\n\tconst entries = Object.entries( treeToPickFrom );\n\tconst pickedEntries = entries.filter( ( [ key ] ) =>\n\t\tSTYLE_KEYS.includes( key )\n\t);\n\t// clone the style objects so that `getFeatureDeclarations` can remove consumed keys from it\n\tconst clonedEntries = pickedEntries.map( ( [ key, style ] ) => [\n\t\tkey,\n\t\tJSON.parse( JSON.stringify( style ) ),\n\t] );\n\treturn Object.fromEntries( clonedEntries );\n}\n\nexport const getNodesWithStyles = ( tree, blockSelectors ) => {\n\tconst nodes = [];\n\n\tif ( ! tree?.styles ) {\n\t\treturn nodes;\n\t}\n\n\t// Top-level.\n\tconst styles = pickStyleKeys( tree.styles );\n\tif ( styles ) {\n\t\tnodes.push( {\n\t\t\tstyles,\n\t\t\tselector: ROOT_BLOCK_SELECTOR,\n\t\t\t// Root selector (body) styles should not be wrapped in `:root where()` to keep\n\t\t\t// specificity at (0,0,1) and maintain backwards compatibility.\n\t\t\tskipSelectorWrapper: true,\n\t\t} );\n\t}\n\n\tObject.entries( ELEMENTS ).forEach( ( [ name, selector ] ) => {\n\t\tif ( tree.styles?.elements?.[ name ] ) {\n\t\t\tnodes.push( {\n\t\t\t\tstyles: tree.styles?.elements?.[ name ],\n\t\t\t\tselector,\n\t\t\t\t// Top level elements that don't use a class name should not receive the\n\t\t\t\t// `:root :where()` wrapper to maintain backwards compatibility.\n\t\t\t\tskipSelectorWrapper: ! ELEMENT_CLASS_NAMES[ name ],\n\t\t\t} );\n\t\t}\n\t} );\n\n\t// Iterate over blocks: they can have styles & elements.\n\tObject.entries( tree.styles?.blocks ?? {} ).forEach(\n\t\t( [ blockName, node ] ) => {\n\t\t\tconst blockStyles = pickStyleKeys( node );\n\n\t\t\tif ( node?.variations ) {\n\t\t\t\tconst variations = {};\n\t\t\t\tObject.entries( node.variations ).forEach(\n\t\t\t\t\t( [ variationName, variation ] ) => {\n\t\t\t\t\t\tvariations[ variationName ] =\n\t\t\t\t\t\t\tpickStyleKeys( variation );\n\t\t\t\t\t\tif ( variation?.css ) {\n\t\t\t\t\t\t\tvariations[ variationName ].css = variation.css;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst variationSelector =\n\t\t\t\t\t\t\tblockSelectors[ blockName ]\n\t\t\t\t\t\t\t\t?.styleVariationSelectors?.[ variationName ];\n\n\t\t\t\t\t\t// Process the variation's inner element styles.\n\t\t\t\t\t\t// This comes before the inner block styles so the\n\t\t\t\t\t\t// element styles within the block type styles take\n\t\t\t\t\t\t// precedence over these.\n\t\t\t\t\t\tObject.entries( variation?.elements ?? {} ).forEach(\n\t\t\t\t\t\t\t( [ element, elementStyles ] ) => {\n\t\t\t\t\t\t\t\tif ( elementStyles && ELEMENTS[ element ] ) {\n\t\t\t\t\t\t\t\t\tnodes.push( {\n\t\t\t\t\t\t\t\t\t\tstyles: elementStyles,\n\t\t\t\t\t\t\t\t\t\tselector: scopeSelector(\n\t\t\t\t\t\t\t\t\t\t\tvariationSelector,\n\t\t\t\t\t\t\t\t\t\t\tELEMENTS[ element ]\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Process the variations inner block type styles.\n\t\t\t\t\t\tObject.entries( variation?.blocks ?? {} ).forEach(\n\t\t\t\t\t\t\t( [\n\t\t\t\t\t\t\t\tvariationBlockName,\n\t\t\t\t\t\t\t\tvariationBlockStyles,\n\t\t\t\t\t\t\t] ) => {\n\t\t\t\t\t\t\t\tconst variationBlockSelector = scopeSelector(\n\t\t\t\t\t\t\t\t\tvariationSelector,\n\t\t\t\t\t\t\t\t\tblockSelectors[ variationBlockName ]\n\t\t\t\t\t\t\t\t\t\t?.selector\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tconst variationDuotoneSelector = scopeSelector(\n\t\t\t\t\t\t\t\t\tvariationSelector,\n\t\t\t\t\t\t\t\t\tblockSelectors[ variationBlockName ]\n\t\t\t\t\t\t\t\t\t\t?.duotoneSelector\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tconst variationFeatureSelectors =\n\t\t\t\t\t\t\t\t\tscopeFeatureSelectors(\n\t\t\t\t\t\t\t\t\t\tvariationSelector,\n\t\t\t\t\t\t\t\t\t\tblockSelectors[ variationBlockName ]\n\t\t\t\t\t\t\t\t\t\t\t?.featureSelectors\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tconst variationBlockStyleNodes =\n\t\t\t\t\t\t\t\t\tpickStyleKeys( variationBlockStyles );\n\n\t\t\t\t\t\t\t\tif ( variationBlockStyles?.css ) {\n\t\t\t\t\t\t\t\t\tvariationBlockStyleNodes.css =\n\t\t\t\t\t\t\t\t\t\tvariationBlockStyles.css;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tnodes.push( {\n\t\t\t\t\t\t\t\t\tselector: variationBlockSelector,\n\t\t\t\t\t\t\t\t\tduotoneSelector: variationDuotoneSelector,\n\t\t\t\t\t\t\t\t\tfeatureSelectors: variationFeatureSelectors,\n\t\t\t\t\t\t\t\t\tfallbackGapValue:\n\t\t\t\t\t\t\t\t\t\tblockSelectors[ variationBlockName ]\n\t\t\t\t\t\t\t\t\t\t\t?.fallbackGapValue,\n\t\t\t\t\t\t\t\t\thasLayoutSupport:\n\t\t\t\t\t\t\t\t\t\tblockSelectors[ variationBlockName ]\n\t\t\t\t\t\t\t\t\t\t\t?.hasLayoutSupport,\n\t\t\t\t\t\t\t\t\tstyles: variationBlockStyleNodes,\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t// Process element styles for the inner blocks\n\t\t\t\t\t\t\t\t// of the variation.\n\t\t\t\t\t\t\t\tObject.entries(\n\t\t\t\t\t\t\t\t\tvariationBlockStyles.elements ?? {}\n\t\t\t\t\t\t\t\t).forEach(\n\t\t\t\t\t\t\t\t\t( [\n\t\t\t\t\t\t\t\t\t\tvariationBlockElement,\n\t\t\t\t\t\t\t\t\t\tvariationBlockElementStyles,\n\t\t\t\t\t\t\t\t\t] ) => {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tvariationBlockElementStyles &&\n\t\t\t\t\t\t\t\t\t\t\tELEMENTS[ variationBlockElement ]\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tnodes.push( {\n\t\t\t\t\t\t\t\t\t\t\t\tstyles: variationBlockElementStyles,\n\t\t\t\t\t\t\t\t\t\t\t\tselector: scopeSelector(\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariationBlockSelector,\n\t\t\t\t\t\t\t\t\t\t\t\t\tELEMENTS[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariationBlockElement\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tblockStyles.variations = variations;\n\t\t\t}\n\n\t\t\tif ( blockSelectors?.[ blockName ]?.selector ) {\n\t\t\t\tnodes.push( {\n\t\t\t\t\tduotoneSelector:\n\t\t\t\t\t\tblockSelectors[ blockName ].duotoneSelector,\n\t\t\t\t\tfallbackGapValue:\n\t\t\t\t\t\tblockSelectors[ blockName ].fallbackGapValue,\n\t\t\t\t\thasLayoutSupport:\n\t\t\t\t\t\tblockSelectors[ blockName ].hasLayoutSupport,\n\t\t\t\t\tselector: blockSelectors[ blockName ].selector,\n\t\t\t\t\tstyles: blockStyles,\n\t\t\t\t\tfeatureSelectors:\n\t\t\t\t\t\tblockSelectors[ blockName ].featureSelectors,\n\t\t\t\t\tstyleVariationSelectors:\n\t\t\t\t\t\tblockSelectors[ blockName ].styleVariationSelectors,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tObject.entries( node?.elements ?? {} ).forEach(\n\t\t\t\t( [ elementName, value ] ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvalue &&\n\t\t\t\t\t\tblockSelectors?.[ blockName ] &&\n\t\t\t\t\t\tELEMENTS[ elementName ]\n\t\t\t\t\t) {\n\t\t\t\t\t\tnodes.push( {\n\t\t\t\t\t\t\tstyles: value,\n\t\t\t\t\t\t\tselector: blockSelectors[ blockName ]?.selector\n\t\t\t\t\t\t\t\t.split( ',' )\n\t\t\t\t\t\t\t\t.map( ( sel ) => {\n\t\t\t\t\t\t\t\t\tconst elementSelectors =\n\t\t\t\t\t\t\t\t\t\tELEMENTS[ elementName ].split( ',' );\n\t\t\t\t\t\t\t\t\treturn elementSelectors.map(\n\t\t\t\t\t\t\t\t\t\t( elementSelector ) =>\n\t\t\t\t\t\t\t\t\t\t\tsel + ' ' + elementSelector\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t.join( ',' ),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n\n\treturn nodes;\n};\n\nexport const getNodesWithSettings = ( tree, blockSelectors ) => {\n\tconst nodes = [];\n\n\tif ( ! tree?.settings ) {\n\t\treturn nodes;\n\t}\n\n\tconst pickPresets = ( treeToPickFrom ) => {\n\t\tlet presets = {};\n\t\tPRESET_METADATA.forEach( ( { path } ) => {\n\t\t\tconst value = getValueFromObjectPath( treeToPickFrom, path, false );\n\t\t\tif ( value !== false ) {\n\t\t\t\tpresets = setImmutably( presets, path, value );\n\t\t\t}\n\t\t} );\n\t\treturn presets;\n\t};\n\n\t// Top-level.\n\tconst presets = pickPresets( tree.settings );\n\tconst custom = tree.settings?.custom;\n\tif ( Object.keys( presets ).length > 0 || custom ) {\n\t\tnodes.push( {\n\t\t\tpresets,\n\t\t\tcustom,\n\t\t\tselector: ROOT_CSS_PROPERTIES_SELECTOR,\n\t\t} );\n\t}\n\n\t// Blocks.\n\tObject.entries( tree.settings?.blocks ?? {} ).forEach(\n\t\t( [ blockName, node ] ) => {\n\t\t\tconst blockPresets = pickPresets( node );\n\t\t\tconst blockCustom = node.custom;\n\t\t\tif ( Object.keys( blockPresets ).length > 0 || blockCustom ) {\n\t\t\t\tnodes.push( {\n\t\t\t\t\tpresets: blockPresets,\n\t\t\t\t\tcustom: blockCustom,\n\t\t\t\t\tselector: blockSelectors[ blockName ]?.selector,\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t);\n\n\treturn nodes;\n};\n\nexport const toCustomProperties = ( tree, blockSelectors ) => {\n\tconst settings = getNodesWithSettings( tree, blockSelectors );\n\tlet ruleset = '';\n\tsettings.forEach( ( { presets, custom, selector } ) => {\n\t\tconst declarations = getPresetsDeclarations( presets, tree?.settings );\n\t\tconst customProps = flattenTree( custom, '--wp--custom--', '--' );\n\t\tif ( customProps.length > 0 ) {\n\t\t\tdeclarations.push( ...customProps );\n\t\t}\n\n\t\tif ( declarations.length > 0 ) {\n\t\t\truleset += `${ selector }{${ declarations.join( ';' ) };}`;\n\t\t}\n\t} );\n\n\treturn ruleset;\n};\n\nexport const toStyles = (\n\ttree,\n\tblockSelectors,\n\thasBlockGapSupport,\n\thasFallbackGapSupport,\n\tdisableLayoutStyles = false,\n\tdisableRootPadding = false,\n\tstyleOptions = undefined\n) => {\n\t// These allow opting out of certain sets of styles.\n\tconst options = {\n\t\tblockGap: true,\n\t\tblockStyles: true,\n\t\tlayoutStyles: true,\n\t\tmarginReset: true,\n\t\tpresets: true,\n\t\trootPadding: true,\n\t\tvariationStyles: false,\n\t\t...styleOptions,\n\t};\n\tconst nodesWithStyles = getNodesWithStyles( tree, blockSelectors );\n\tconst nodesWithSettings = getNodesWithSettings( tree, blockSelectors );\n\tconst useRootPaddingAlign = tree?.settings?.useRootPaddingAwareAlignments;\n\tconst { contentSize, wideSize } = tree?.settings?.layout || {};\n\tconst hasBodyStyles =\n\t\toptions.marginReset || options.rootPadding || options.layoutStyles;\n\n\tlet ruleset = '';\n\n\tif ( options.presets && ( contentSize || wideSize ) ) {\n\t\truleset += `${ ROOT_CSS_PROPERTIES_SELECTOR } {`;\n\t\truleset = contentSize\n\t\t\t? ruleset + ` --wp--style--global--content-size: ${ contentSize };`\n\t\t\t: ruleset;\n\t\truleset = wideSize\n\t\t\t? ruleset + ` --wp--style--global--wide-size: ${ wideSize };`\n\t\t\t: ruleset;\n\t\truleset += '}';\n\t}\n\n\tif ( hasBodyStyles ) {\n\t\t/*\n\t\t * Reset default browser margin on the body element.\n\t\t * This is set on the body selector **before** generating the ruleset\n\t\t * from the `theme.json`. This is to ensure that if the `theme.json` declares\n\t\t * `margin` in its `spacing` declaration for the `body` element then these\n\t\t * user-generated values take precedence in the CSS cascade.\n\t\t * @link https://github.com/WordPress/gutenberg/issues/36147.\n\t\t */\n\t\truleset += ':where(body) {margin: 0;';\n\n\t\t// Root padding styles should be output for full templates, patterns and template parts.\n\t\tif ( options.rootPadding && useRootPaddingAlign ) {\n\t\t\t/*\n\t\t\t * These rules reproduce the ones from https://github.com/WordPress/gutenberg/blob/79103f124925d1f457f627e154f52a56228ed5ad/lib/class-wp-theme-json-gutenberg.php#L2508\n\t\t\t * almost exactly, but for the selectors that target block wrappers in the front end. This code only runs in the editor, so it doesn't need those selectors.\n\t\t\t */\n\t\t\truleset += `padding-right: 0; padding-left: 0; padding-top: var(--wp--style--root--padding-top); padding-bottom: var(--wp--style--root--padding-bottom) }\n\t\t\t\t.has-global-padding { padding-right: var(--wp--style--root--padding-right); padding-left: var(--wp--style--root--padding-left); }\n\t\t\t\t.has-global-padding > .alignfull { margin-right: calc(var(--wp--style--root--padding-right) * -1); margin-left: calc(var(--wp--style--root--padding-left) * -1); }\n\t\t\t\t.has-global-padding :where(:not(.alignfull.is-layout-flow) > .has-global-padding:not(.wp-block-block, .alignfull)) { padding-right: 0; padding-left: 0; }\n\t\t\t\t.has-global-padding :where(:not(.alignfull.is-layout-flow) > .has-global-padding:not(.wp-block-block, .alignfull)) > .alignfull { margin-left: 0; margin-right: 0;\n\t\t\t\t`;\n\t\t}\n\n\t\truleset += '}';\n\t}\n\n\tif ( options.blockStyles ) {\n\t\tnodesWithStyles.forEach(\n\t\t\t( {\n\t\t\t\tselector,\n\t\t\t\tduotoneSelector,\n\t\t\t\tstyles,\n\t\t\t\tfallbackGapValue,\n\t\t\t\thasLayoutSupport,\n\t\t\t\tfeatureSelectors,\n\t\t\t\tstyleVariationSelectors,\n\t\t\t\tskipSelectorWrapper,\n\t\t\t} ) => {\n\t\t\t\t// Process styles for block support features with custom feature level\n\t\t\t\t// CSS selectors set.\n\t\t\t\tif ( featureSelectors ) {\n\t\t\t\t\tconst featureDeclarations = getFeatureDeclarations(\n\t\t\t\t\t\tfeatureSelectors,\n\t\t\t\t\t\tstyles\n\t\t\t\t\t);\n\n\t\t\t\t\tObject.entries( featureDeclarations ).forEach(\n\t\t\t\t\t\t( [ cssSelector, declarations ] ) => {\n\t\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\t\tconst rules = declarations.join( ';' );\n\t\t\t\t\t\t\t\truleset += `:root :where(${ cssSelector }){${ rules };}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Process duotone styles.\n\t\t\t\tif ( duotoneSelector ) {\n\t\t\t\t\tconst duotoneStyles = {};\n\t\t\t\t\tif ( styles?.filter ) {\n\t\t\t\t\t\tduotoneStyles.filter = styles.filter;\n\t\t\t\t\t\tdelete styles.filter;\n\t\t\t\t\t}\n\t\t\t\t\tconst duotoneDeclarations =\n\t\t\t\t\t\tgetStylesDeclarations( duotoneStyles );\n\t\t\t\t\tif ( duotoneDeclarations.length ) {\n\t\t\t\t\t\truleset += `${ duotoneSelector }{${ duotoneDeclarations.join(\n\t\t\t\t\t\t\t';'\n\t\t\t\t\t\t) };}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Process blockGap and layout styles.\n\t\t\t\tif (\n\t\t\t\t\t! disableLayoutStyles &&\n\t\t\t\t\t( ROOT_BLOCK_SELECTOR === selector || hasLayoutSupport )\n\t\t\t\t) {\n\t\t\t\t\truleset += getLayoutStyles( {\n\t\t\t\t\t\tstyle: styles,\n\t\t\t\t\t\tselector,\n\t\t\t\t\t\thasBlockGapSupport,\n\t\t\t\t\t\thasFallbackGapSupport,\n\t\t\t\t\t\tfallbackGapValue,\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t// Process the remaining block styles (they use either normal block class or __experimentalSelector).\n\t\t\t\tconst styleDeclarations = getStylesDeclarations(\n\t\t\t\t\tstyles,\n\t\t\t\t\tselector,\n\t\t\t\t\tuseRootPaddingAlign,\n\t\t\t\t\ttree,\n\t\t\t\t\tdisableRootPadding\n\t\t\t\t);\n\t\t\t\tif ( styleDeclarations?.length ) {\n\t\t\t\t\tconst generalSelector = skipSelectorWrapper\n\t\t\t\t\t\t? selector\n\t\t\t\t\t\t: `:root :where(${ selector })`;\n\t\t\t\t\truleset += `${ generalSelector }{${ styleDeclarations.join(\n\t\t\t\t\t\t';'\n\t\t\t\t\t) };}`;\n\t\t\t\t}\n\t\t\t\tif ( styles?.css ) {\n\t\t\t\t\truleset += processCSSNesting(\n\t\t\t\t\t\tstyles.css,\n\t\t\t\t\t\t`:root :where(${ selector })`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif ( options.variationStyles && styleVariationSelectors ) {\n\t\t\t\t\tObject.entries( styleVariationSelectors ).forEach(\n\t\t\t\t\t\t( [ styleVariationName, styleVariationSelector ] ) => {\n\t\t\t\t\t\t\tconst styleVariations =\n\t\t\t\t\t\t\t\tstyles?.variations?.[ styleVariationName ];\n\t\t\t\t\t\t\tif ( styleVariations ) {\n\t\t\t\t\t\t\t\t// If the block uses any custom selectors for block support, add those first.\n\t\t\t\t\t\t\t\tif ( featureSelectors ) {\n\t\t\t\t\t\t\t\t\tconst featureDeclarations =\n\t\t\t\t\t\t\t\t\t\tgetFeatureDeclarations(\n\t\t\t\t\t\t\t\t\t\t\tfeatureSelectors,\n\t\t\t\t\t\t\t\t\t\t\tstyleVariations\n\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tObject.entries(\n\t\t\t\t\t\t\t\t\t\tfeatureDeclarations\n\t\t\t\t\t\t\t\t\t).forEach(\n\t\t\t\t\t\t\t\t\t\t( [ baseSelector, declarations ] ) => {\n\t\t\t\t\t\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst cssSelector =\n\t\t\t\t\t\t\t\t\t\t\t\t\tconcatFeatureVariationSelectorString(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbaseSelector,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyleVariationSelector\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tconst rules =\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeclarations.join( ';' );\n\t\t\t\t\t\t\t\t\t\t\t\truleset += `:root :where(${ cssSelector }){${ rules };}`;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Otherwise add regular selectors.\n\t\t\t\t\t\t\t\tconst styleVariationDeclarations =\n\t\t\t\t\t\t\t\t\tgetStylesDeclarations(\n\t\t\t\t\t\t\t\t\t\tstyleVariations,\n\t\t\t\t\t\t\t\t\t\tstyleVariationSelector,\n\t\t\t\t\t\t\t\t\t\tuseRootPaddingAlign,\n\t\t\t\t\t\t\t\t\t\ttree\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif ( styleVariationDeclarations.length ) {\n\t\t\t\t\t\t\t\t\truleset += `:root :where(${ styleVariationSelector }){${ styleVariationDeclarations.join(\n\t\t\t\t\t\t\t\t\t\t';'\n\t\t\t\t\t\t\t\t\t) };}`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( styleVariations?.css ) {\n\t\t\t\t\t\t\t\t\truleset += processCSSNesting(\n\t\t\t\t\t\t\t\t\t\tstyleVariations.css,\n\t\t\t\t\t\t\t\t\t\t`:root :where(${ styleVariationSelector })`\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Check for pseudo selector in `styles` and handle separately.\n\t\t\t\tconst pseudoSelectorStyles = Object.entries( styles ).filter(\n\t\t\t\t\t( [ key ] ) => key.startsWith( ':' )\n\t\t\t\t);\n\n\t\t\t\tif ( pseudoSelectorStyles?.length ) {\n\t\t\t\t\tpseudoSelectorStyles.forEach(\n\t\t\t\t\t\t( [ pseudoKey, pseudoStyle ] ) => {\n\t\t\t\t\t\t\tconst pseudoDeclarations =\n\t\t\t\t\t\t\t\tgetStylesDeclarations( pseudoStyle );\n\n\t\t\t\t\t\t\tif ( ! pseudoDeclarations?.length ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// `selector` may be provided in a form\n\t\t\t\t\t\t\t// where block level selectors have sub element\n\t\t\t\t\t\t\t// selectors appended to them as a comma separated\n\t\t\t\t\t\t\t// string.\n\t\t\t\t\t\t\t// e.g. `h1 a,h2 a,h3 a,h4 a,h5 a,h6 a`;\n\t\t\t\t\t\t\t// Split and append pseudo selector to create\n\t\t\t\t\t\t\t// the proper rules to target the elements.\n\t\t\t\t\t\t\tconst _selector = selector\n\t\t\t\t\t\t\t\t.split( ',' )\n\t\t\t\t\t\t\t\t.map( ( sel ) => sel + pseudoKey )\n\t\t\t\t\t\t\t\t.join( ',' );\n\n\t\t\t\t\t\t\t// As pseudo classes such as :hover, :focus etc. have class-level\n\t\t\t\t\t\t\t// specificity, they must use the `:root :where()` wrapper. This.\n\t\t\t\t\t\t\t// caps the specificity at `0-1-0` to allow proper nesting of variations\n\t\t\t\t\t\t\t// and block type element styles.\n\t\t\t\t\t\t\tconst pseudoRule = `:root :where(${ _selector }){${ pseudoDeclarations.join(\n\t\t\t\t\t\t\t\t';'\n\t\t\t\t\t\t\t) };}`;\n\n\t\t\t\t\t\t\truleset += pseudoRule;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tif ( options.layoutStyles ) {\n\t\t/* Add alignment / layout styles */\n\t\truleset =\n\t\t\truleset +\n\t\t\t'.wp-site-blocks > .alignleft { float: left; margin-right: 2em; }';\n\t\truleset =\n\t\t\truleset +\n\t\t\t'.wp-site-blocks > .alignright { float: right; margin-left: 2em; }';\n\t\truleset =\n\t\t\truleset +\n\t\t\t'.wp-site-blocks > .aligncenter { justify-content: center; margin-left: auto; margin-right: auto; }';\n\t}\n\n\tif ( options.blockGap && hasBlockGapSupport ) {\n\t\t// Use fallback of `0.5em` just in case, however if there is blockGap support, there should nearly always be a real value.\n\t\tconst gapValue =\n\t\t\tgetGapCSSValue( tree?.styles?.spacing?.blockGap ) || '0.5em';\n\t\truleset =\n\t\t\truleset +\n\t\t\t`:root :where(.wp-site-blocks) > * { margin-block-start: ${ gapValue }; margin-block-end: 0; }`;\n\t\truleset =\n\t\t\truleset +\n\t\t\t':root :where(.wp-site-blocks) > :first-child { margin-block-start: 0; }';\n\t\truleset =\n\t\t\truleset +\n\t\t\t':root :where(.wp-site-blocks) > :last-child { margin-block-end: 0; }';\n\t}\n\n\tif ( options.presets ) {\n\t\tnodesWithSettings.forEach( ( { selector, presets } ) => {\n\t\t\tif (\n\t\t\t\tROOT_BLOCK_SELECTOR === selector ||\n\t\t\t\tROOT_CSS_PROPERTIES_SELECTOR === selector\n\t\t\t) {\n\t\t\t\t// Do not add extra specificity for top-level classes.\n\t\t\t\tselector = '';\n\t\t\t}\n\n\t\t\tconst classes = getPresetsClasses( selector, presets );\n\t\t\tif ( classes.length > 0 ) {\n\t\t\t\truleset += classes;\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn ruleset;\n};\n\nexport function toSvgFilters( tree, blockSelectors ) {\n\tconst nodesWithSettings = getNodesWithSettings( tree, blockSelectors );\n\treturn nodesWithSettings.flatMap( ( { presets } ) => {\n\t\treturn getPresetsSvgFilters( presets );\n\t} );\n}\n\nconst getSelectorsConfig = ( blockType, rootSelector ) => {\n\tif (\n\t\tblockType?.selectors &&\n\t\tObject.keys( blockType.selectors ).length > 0\n\t) {\n\t\treturn blockType.selectors;\n\t}\n\n\tconst config = { root: rootSelector };\n\tObject.entries( BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS ).forEach(\n\t\t( [ featureKey, featureName ] ) => {\n\t\t\tconst featureSelector = getBlockCSSSelector(\n\t\t\t\tblockType,\n\t\t\t\tfeatureKey\n\t\t\t);\n\n\t\t\tif ( featureSelector ) {\n\t\t\t\tconfig[ featureName ] = featureSelector;\n\t\t\t}\n\t\t}\n\t);\n\n\treturn config;\n};\n\nexport const getBlockSelectors = (\n\tblockTypes,\n\tgetBlockStyles,\n\tvariationInstanceId\n) => {\n\tconst result = {};\n\tblockTypes.forEach( ( blockType ) => {\n\t\tconst name = blockType.name;\n\t\tconst selector = getBlockCSSSelector( blockType );\n\t\tlet duotoneSelector = getBlockCSSSelector(\n\t\t\tblockType,\n\t\t\t'filter.duotone'\n\t\t);\n\n\t\t// Keep backwards compatibility for support.color.__experimentalDuotone.\n\t\tif ( ! duotoneSelector ) {\n\t\t\tconst rootSelector = getBlockCSSSelector( blockType );\n\t\t\tconst duotoneSupport = getBlockSupport(\n\t\t\t\tblockType,\n\t\t\t\t'color.__experimentalDuotone',\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tduotoneSelector =\n\t\t\t\tduotoneSupport && scopeSelector( rootSelector, duotoneSupport );\n\t\t}\n\n\t\tconst hasLayoutSupport =\n\t\t\t!! blockType?.supports?.layout ||\n\t\t\t!! blockType?.supports?.__experimentalLayout;\n\t\tconst fallbackGapValue =\n\t\t\tblockType?.supports?.spacing?.blockGap?.__experimentalDefault;\n\n\t\tconst blockStyleVariations = getBlockStyles( name );\n\t\tconst styleVariationSelectors = {};\n\t\tblockStyleVariations?.forEach( ( variation ) => {\n\t\t\tconst variationSuffix = variationInstanceId\n\t\t\t\t? `-${ variationInstanceId }`\n\t\t\t\t: '';\n\t\t\tconst variationName = `${ variation.name }${ variationSuffix }`;\n\t\t\tconst styleVariationSelector = getBlockStyleVariationSelector(\n\t\t\t\tvariationName,\n\t\t\t\tselector\n\t\t\t);\n\n\t\t\tstyleVariationSelectors[ variationName ] = styleVariationSelector;\n\t\t} );\n\n\t\t// For each block support feature add any custom selectors.\n\t\tconst featureSelectors = getSelectorsConfig( blockType, selector );\n\n\t\tresult[ name ] = {\n\t\t\tduotoneSelector,\n\t\t\tfallbackGapValue,\n\t\t\tfeatureSelectors: Object.keys( featureSelectors ).length\n\t\t\t\t? featureSelectors\n\t\t\t\t: undefined,\n\t\t\thasLayoutSupport,\n\t\t\tname,\n\t\t\tselector,\n\t\t\tstyleVariationSelectors: blockStyleVariations?.length\n\t\t\t\t? styleVariationSelectors\n\t\t\t\t: undefined,\n\t\t};\n\t} );\n\n\treturn result;\n};\n\n/**\n * If there is a separator block whose color is defined in theme.json via background,\n * update the separator color to the same value by using border color.\n *\n * @param {Object} config Theme.json configuration file object.\n * @return {Object} configTheme.json configuration file object updated.\n */\nfunction updateConfigWithSeparator( config ) {\n\tconst needsSeparatorStyleUpdate =\n\t\tconfig.styles?.blocks?.[ 'core/separator' ] &&\n\t\tconfig.styles?.blocks?.[ 'core/separator' ].color?.background &&\n\t\t! config.styles?.blocks?.[ 'core/separator' ].color?.text &&\n\t\t! config.styles?.blocks?.[ 'core/separator' ].border?.color;\n\tif ( needsSeparatorStyleUpdate ) {\n\t\treturn {\n\t\t\t...config,\n\t\t\tstyles: {\n\t\t\t\t...config.styles,\n\t\t\t\tblocks: {\n\t\t\t\t\t...config.styles.blocks,\n\t\t\t\t\t'core/separator': {\n\t\t\t\t\t\t...config.styles.blocks[ 'core/separator' ],\n\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t...config.styles.blocks[ 'core/separator' ].color,\n\t\t\t\t\t\t\ttext: config.styles?.blocks[ 'core/separator' ]\n\t\t\t\t\t\t\t\t.color.background,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\treturn config;\n}\n\nexport function processCSSNesting( css, blockSelector ) {\n\tlet processedCSS = '';\n\n\tif ( ! css || css.trim() === '' ) {\n\t\treturn processedCSS;\n\t}\n\n\t// Split CSS nested rules.\n\tconst parts = css.split( '&' );\n\tparts.forEach( ( part ) => {\n\t\tif ( ! part || part.trim() === '' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isRootCss = ! part.includes( '{' );\n\t\tif ( isRootCss ) {\n\t\t\t// If the part doesn't contain braces, it applies to the root level.\n\t\t\tprocessedCSS += `:root :where(${ blockSelector }){${ part.trim() }}`;\n\t\t} else {\n\t\t\t// If the part contains braces, it's a nested CSS rule.\n\t\t\tconst splitPart = part.replace( '}', '' ).split( '{' );\n\t\t\tif ( splitPart.length !== 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst [ nestedSelector, cssValue ] = splitPart;\n\n\t\t\t// Handle pseudo elements such as ::before, ::after, etc. Regex will also\n\t\t\t// capture any leading combinator such as >, +, or ~, as well as spaces.\n\t\t\t// This allows pseudo elements as descendants e.g. `.parent ::before`.\n\t\t\tconst matches = nestedSelector.match( /([>+~\\s]*::[a-zA-Z-]+)/ );\n\t\t\tconst pseudoPart = matches ? matches[ 1 ] : '';\n\t\t\tconst withoutPseudoElement = matches\n\t\t\t\t? nestedSelector.replace( pseudoPart, '' ).trim()\n\t\t\t\t: nestedSelector.trim();\n\n\t\t\tlet combinedSelector;\n\t\t\tif ( withoutPseudoElement === '' ) {\n\t\t\t\t// Only contained a pseudo element to use the block selector to form\n\t\t\t\t// the final `:root :where()` selector.\n\t\t\t\tcombinedSelector = blockSelector;\n\t\t\t} else {\n\t\t\t\t// If the nested selector is a descendant of the block scope it with the\n\t\t\t\t// block selector. Otherwise append it to the block selector.\n\t\t\t\tcombinedSelector = nestedSelector.startsWith( ' ' )\n\t\t\t\t\t? scopeSelector( blockSelector, withoutPseudoElement )\n\t\t\t\t\t: appendToSelector( blockSelector, withoutPseudoElement );\n\t\t\t}\n\n\t\t\t// Build final rule, re-adding any pseudo element outside the `:where()`\n\t\t\t// to maintain valid CSS selector.\n\t\t\tprocessedCSS += `:root :where(${ combinedSelector })${ pseudoPart }{${ cssValue.trim() }}`;\n\t\t}\n\t} );\n\treturn processedCSS;\n}\n\n/**\n * Returns the global styles output using a global styles configuration.\n * If wishing to generate global styles and settings based on the\n * global styles config loaded in the editor context, use `useGlobalStylesOutput()`.\n * The use case for a custom config is to generate bespoke styles\n * and settings for previews, or other out-of-editor experiences.\n *\n * @param {Object}  mergedConfig       Global styles configuration.\n * @param {boolean} disableRootPadding Disable root padding styles.\n *\n * @return {Array} Array of stylesheets and settings.\n */\nexport function useGlobalStylesOutputWithConfig(\n\tmergedConfig = {},\n\tdisableRootPadding\n) {\n\tconst [ blockGap ] = useGlobalSetting( 'spacing.blockGap' );\n\tconst hasBlockGapSupport = blockGap !== null;\n\tconst hasFallbackGapSupport = ! hasBlockGapSupport; // This setting isn't useful yet: it exists as a placeholder for a future explicit fallback styles support.\n\tconst disableLayoutStyles = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn !! getSettings().disableLayoutStyles;\n\t} );\n\n\tconst { getBlockStyles } = useSelect( blocksStore );\n\n\treturn useMemo( () => {\n\t\tif ( ! mergedConfig?.styles || ! mergedConfig?.settings ) {\n\t\t\treturn [];\n\t\t}\n\t\tconst updatedConfig = updateConfigWithSeparator( mergedConfig );\n\n\t\tconst blockSelectors = getBlockSelectors(\n\t\t\tgetBlockTypes(),\n\t\t\tgetBlockStyles\n\t\t);\n\n\t\tconst customProperties = toCustomProperties(\n\t\t\tupdatedConfig,\n\t\t\tblockSelectors\n\t\t);\n\n\t\tconst globalStyles = toStyles(\n\t\t\tupdatedConfig,\n\t\t\tblockSelectors,\n\t\t\thasBlockGapSupport,\n\t\t\thasFallbackGapSupport,\n\t\t\tdisableLayoutStyles,\n\t\t\tdisableRootPadding\n\t\t);\n\t\tconst svgs = toSvgFilters( updatedConfig, blockSelectors );\n\n\t\tconst styles = [\n\t\t\t{\n\t\t\t\tcss: customProperties,\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tcss: globalStyles,\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t\t// Load custom CSS in own stylesheet so that any invalid CSS entered in the input won't break all the global styles in the editor.\n\t\t\t{\n\t\t\t\tcss: updatedConfig.styles.css ?? '',\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tassets: svgs,\n\t\t\t\t__unstableType: 'svg',\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t];\n\n\t\t// Loop through the blocks to check if there are custom CSS values.\n\t\t// If there are, get the block selector and push the selector together with\n\t\t// the CSS value to the 'stylesheets' array.\n\t\tgetBlockTypes().forEach( ( blockType ) => {\n\t\t\tif ( updatedConfig.styles.blocks[ blockType.name ]?.css ) {\n\t\t\t\tconst selector = blockSelectors[ blockType.name ].selector;\n\t\t\t\tstyles.push( {\n\t\t\t\t\tcss: processCSSNesting(\n\t\t\t\t\t\tupdatedConfig.styles.blocks[ blockType.name ]?.css,\n\t\t\t\t\t\tselector\n\t\t\t\t\t),\n\t\t\t\t\tisGlobalStyles: true,\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\treturn [ styles, updatedConfig.settings ];\n\t}, [\n\t\thasBlockGapSupport,\n\t\thasFallbackGapSupport,\n\t\tmergedConfig,\n\t\tdisableLayoutStyles,\n\t\tdisableRootPadding,\n\t\tgetBlockStyles,\n\t] );\n}\n\n/**\n * Returns the global styles output based on the current state of global styles config loaded in the editor context.\n *\n * @param {boolean} disableRootPadding Disable root padding styles.\n *\n * @return {Array} Array of stylesheets and settings.\n */\nexport function useGlobalStylesOutput( disableRootPadding = false ) {\n\tconst { merged: mergedConfig } = useContext( GlobalStylesContext );\n\treturn useGlobalStylesOutputWithConfig( mergedConfig, disableRootPadding );\n}\n","/**\n * WordPress dependencies\n */\nimport { getBlockTypes, store as blocksStore } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { useContext, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport {\n\tGlobalStylesContext,\n\ttoStyles,\n\tgetBlockSelectors,\n} from '../components/global-styles';\nimport { usePrivateStyleOverride } from './utils';\nimport { getValueFromObjectPath } from '../utils/object';\nimport { store as blockEditorStore } from '../store';\nimport { globalStylesDataKey } from '../store/private-keys';\nimport { unlock } from '../lock-unlock';\n\nconst VARIATION_PREFIX = 'is-style-';\n\nfunction getVariationMatches( className ) {\n\tif ( ! className ) {\n\t\treturn [];\n\t}\n\treturn className.split( /\\s+/ ).reduce( ( matches, name ) => {\n\t\tif ( name.startsWith( VARIATION_PREFIX ) ) {\n\t\t\tconst match = name.slice( VARIATION_PREFIX.length );\n\t\t\tif ( match !== 'default' ) {\n\t\t\t\tmatches.push( match );\n\t\t\t}\n\t\t}\n\t\treturn matches;\n\t}, [] );\n}\n\n/**\n * Get the first block style variation that has been registered from the class string.\n *\n * @param {string} className        CSS class string for a block.\n * @param {Array}  registeredStyles Currently registered block styles.\n *\n * @return {string|null} The name of the first registered variation.\n */\nfunction getVariationNameFromClass( className, registeredStyles = [] ) {\n\t// The global flag affects how capturing groups work in JS. So the regex\n\t// below will only return full CSS classes not just the variation name.\n\tconst matches = getVariationMatches( className );\n\n\tif ( ! matches ) {\n\t\treturn null;\n\t}\n\n\tfor ( const variation of matches ) {\n\t\tif ( registeredStyles.some( ( style ) => style.name === variation ) ) {\n\t\t\treturn variation;\n\t\t}\n\t}\n\treturn null;\n}\n\n// A helper component to apply a style override using the useStyleOverride hook.\nfunction OverrideStyles( { override } ) {\n\tusePrivateStyleOverride( override );\n}\n\n/**\n * This component is used to generate new block style variation overrides\n * based on an incoming theme config. If a matching style is found in the config,\n * a new override is created and returned. The overrides can be used in conjunction with\n * useStyleOverride to apply the new styles to the editor. Its use is\n * subject to change.\n *\n * @param {Object} props        Props.\n * @param {Object} props.config A global styles object, containing settings and styles.\n * @return {JSX.Element|undefined} An array of new block variation overrides.\n */\nexport function __unstableBlockStyleVariationOverridesWithConfig( { config } ) {\n\tconst { getBlockStyles, overrides } = useSelect(\n\t\t( select ) => ( {\n\t\t\tgetBlockStyles: select( blocksStore ).getBlockStyles,\n\t\t\toverrides: unlock( select( blockEditorStore ) ).getStyleOverrides(),\n\t\t} ),\n\t\t[]\n\t);\n\tconst { getBlockName } = useSelect( blockEditorStore );\n\n\tconst overridesWithConfig = useMemo( () => {\n\t\tif ( ! overrides?.length ) {\n\t\t\treturn;\n\t\t}\n\t\tconst newOverrides = [];\n\t\tconst overriddenClientIds = [];\n\t\tfor ( const [ , override ] of overrides ) {\n\t\t\tif (\n\t\t\t\toverride?.variation &&\n\t\t\t\toverride?.clientId &&\n\t\t\t\t/*\n\t\t\t\t * Because this component overwrites existing style overrides,\n\t\t\t\t * filter out any overrides that are already present in the store.\n\t\t\t\t */\n\t\t\t\t! overriddenClientIds.includes( override.clientId )\n\t\t\t) {\n\t\t\t\tconst blockName = getBlockName( override.clientId );\n\t\t\t\tconst configStyles =\n\t\t\t\t\tconfig?.styles?.blocks?.[ blockName ]?.variations?.[\n\t\t\t\t\t\toverride.variation\n\t\t\t\t\t];\n\t\t\t\tif ( configStyles ) {\n\t\t\t\t\tconst variationConfig = {\n\t\t\t\t\t\tsettings: config?.settings,\n\t\t\t\t\t\t// The variation style data is all that is needed to generate\n\t\t\t\t\t\t// the styles for the current application to a block. The variation\n\t\t\t\t\t\t// name is updated to match the instance specific class name.\n\t\t\t\t\t\tstyles: {\n\t\t\t\t\t\t\tblocks: {\n\t\t\t\t\t\t\t\t[ blockName ]: {\n\t\t\t\t\t\t\t\t\tvariations: {\n\t\t\t\t\t\t\t\t\t\t[ `${ override.variation }-${ override.clientId }` ]:\n\t\t\t\t\t\t\t\t\t\t\tconfigStyles,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\tconst blockSelectors = getBlockSelectors(\n\t\t\t\t\t\tgetBlockTypes(),\n\t\t\t\t\t\tgetBlockStyles,\n\t\t\t\t\t\toverride.clientId\n\t\t\t\t\t);\n\t\t\t\t\tconst hasBlockGapSupport = false;\n\t\t\t\t\tconst hasFallbackGapSupport = true;\n\t\t\t\t\tconst disableLayoutStyles = true;\n\t\t\t\t\tconst disableRootPadding = true;\n\t\t\t\t\tconst variationStyles = toStyles(\n\t\t\t\t\t\tvariationConfig,\n\t\t\t\t\t\tblockSelectors,\n\t\t\t\t\t\thasBlockGapSupport,\n\t\t\t\t\t\thasFallbackGapSupport,\n\t\t\t\t\t\tdisableLayoutStyles,\n\t\t\t\t\t\tdisableRootPadding,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tblockGap: false,\n\t\t\t\t\t\t\tblockStyles: true,\n\t\t\t\t\t\t\tlayoutStyles: false,\n\t\t\t\t\t\t\tmarginReset: false,\n\t\t\t\t\t\t\tpresets: false,\n\t\t\t\t\t\t\trootPadding: false,\n\t\t\t\t\t\t\tvariationStyles: true,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tnewOverrides.push( {\n\t\t\t\t\t\tid: `${ override.variation }-${ override.clientId }`,\n\t\t\t\t\t\tcss: variationStyles,\n\t\t\t\t\t\t__unstableType: 'variation',\n\t\t\t\t\t\tvariation: override.variation,\n\t\t\t\t\t\t// The clientId will be stored with the override and used to ensure\n\t\t\t\t\t\t// the order of overrides matches the order of blocks so that the\n\t\t\t\t\t\t// correct CSS cascade is maintained.\n\t\t\t\t\t\tclientId: override.clientId,\n\t\t\t\t\t} );\n\t\t\t\t\toverriddenClientIds.push( override.clientId );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn newOverrides;\n\t}, [ config, overrides, getBlockStyles, getBlockName ] );\n\n\tif ( ! overridesWithConfig || ! overridesWithConfig.length ) {\n\t\treturn;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ overridesWithConfig.map( ( override ) => (\n\t\t\t\t<OverrideStyles key={ override.id } override={ override } />\n\t\t\t) ) }\n\t\t</>\n\t);\n}\n\n/**\n * Retrieves any variation styles data and resolves any referenced values.\n *\n * @param {Object}    globalStyles A complete global styles object, containing settings and styles.\n * @param {string}    name         The name of the desired block type.\n * @param {variation} variation    The of the block style variation to retrieve data for.\n *\n * @return {Object|undefined} The global styles data for the specified variation.\n */\nexport function getVariationStylesWithRefValues(\n\tglobalStyles,\n\tname,\n\tvariation\n) {\n\tif ( ! globalStyles?.styles?.blocks?.[ name ]?.variations?.[ variation ] ) {\n\t\treturn;\n\t}\n\n\t// Helper to recursively look for `ref` values to resolve.\n\tconst replaceRefs = ( variationStyles ) => {\n\t\tObject.keys( variationStyles ).forEach( ( key ) => {\n\t\t\tconst value = variationStyles[ key ];\n\n\t\t\t// Only process objects.\n\t\t\tif ( typeof value === 'object' && value !== null ) {\n\t\t\t\t// Process `ref` value if present.\n\t\t\t\tif ( value.ref !== undefined ) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof value.ref !== 'string' ||\n\t\t\t\t\t\tvalue.ref.trim() === ''\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Remove invalid ref.\n\t\t\t\t\t\tdelete variationStyles[ key ];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Resolve `ref` value.\n\t\t\t\t\t\tconst refValue = getValueFromObjectPath(\n\t\t\t\t\t\t\tglobalStyles,\n\t\t\t\t\t\t\tvalue.ref\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif ( refValue ) {\n\t\t\t\t\t\t\tvariationStyles[ key ] = refValue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdelete variationStyles[ key ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Recursively resolve `ref` values in nested objects.\n\t\t\t\t\treplaceRefs( value );\n\n\t\t\t\t\t// After recursion, if value is empty due to explicitly\n\t\t\t\t\t// `undefined` ref value, remove it.\n\t\t\t\t\tif ( Object.keys( value ).length === 0 ) {\n\t\t\t\t\t\tdelete variationStyles[ key ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t};\n\n\t// Deep clone variation node to avoid mutating it within global styles and losing refs.\n\tconst styles = JSON.parse(\n\t\tJSON.stringify(\n\t\t\tglobalStyles.styles.blocks[ name ].variations[ variation ]\n\t\t)\n\t);\n\treplaceRefs( styles );\n\n\treturn styles;\n}\n\nfunction useBlockStyleVariation( name, variation, clientId ) {\n\t// Prefer global styles data in GlobalStylesContext, which are available\n\t// if in the site editor. Otherwise fall back to whatever is in the\n\t// editor settings and available in the post editor.\n\tconst { merged: mergedConfig } = useContext( GlobalStylesContext );\n\tconst { globalSettings, globalStyles } = useSelect( ( select ) => {\n\t\tconst settings = select( blockEditorStore ).getSettings();\n\t\treturn {\n\t\t\tglobalSettings: settings.__experimentalFeatures,\n\t\t\tglobalStyles: settings[ globalStylesDataKey ],\n\t\t};\n\t}, [] );\n\n\treturn useMemo( () => {\n\t\tconst variationStyles = getVariationStylesWithRefValues(\n\t\t\t{\n\t\t\t\tsettings: mergedConfig?.settings ?? globalSettings,\n\t\t\t\tstyles: mergedConfig?.styles ?? globalStyles,\n\t\t\t},\n\t\t\tname,\n\t\t\tvariation\n\t\t);\n\n\t\treturn {\n\t\t\tsettings: mergedConfig?.settings ?? globalSettings,\n\t\t\t// The variation style data is all that is needed to generate\n\t\t\t// the styles for the current application to a block. The variation\n\t\t\t// name is updated to match the instance specific class name.\n\t\t\tstyles: {\n\t\t\t\tblocks: {\n\t\t\t\t\t[ name ]: {\n\t\t\t\t\t\tvariations: {\n\t\t\t\t\t\t\t[ `${ variation }-${ clientId }` ]: variationStyles,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}, [\n\t\tmergedConfig,\n\t\tglobalSettings,\n\t\tglobalStyles,\n\t\tvariation,\n\t\tclientId,\n\t\tname,\n\t] );\n}\n\n// Rather than leveraging `useInstanceId` here, the `clientId` is used.\n// This is so that the variation style override's ID is predictable\n// when the order of applied style variations changes.\nfunction useBlockProps( { name, className, clientId } ) {\n\tconst { getBlockStyles } = useSelect( blocksStore );\n\n\tconst registeredStyles = getBlockStyles( name );\n\tconst variation = getVariationNameFromClass( className, registeredStyles );\n\tconst variationClass = `${ VARIATION_PREFIX }${ variation }-${ clientId }`;\n\n\tconst { settings, styles } = useBlockStyleVariation(\n\t\tname,\n\t\tvariation,\n\t\tclientId\n\t);\n\n\tconst variationStyles = useMemo( () => {\n\t\tif ( ! variation ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst variationConfig = { settings, styles };\n\t\tconst blockSelectors = getBlockSelectors(\n\t\t\tgetBlockTypes(),\n\t\t\tgetBlockStyles,\n\t\t\tclientId\n\t\t);\n\t\tconst hasBlockGapSupport = false;\n\t\tconst hasFallbackGapSupport = true;\n\t\tconst disableLayoutStyles = true;\n\t\tconst disableRootPadding = true;\n\n\t\treturn toStyles(\n\t\t\tvariationConfig,\n\t\t\tblockSelectors,\n\t\t\thasBlockGapSupport,\n\t\t\thasFallbackGapSupport,\n\t\t\tdisableLayoutStyles,\n\t\t\tdisableRootPadding,\n\t\t\t{\n\t\t\t\tblockGap: false,\n\t\t\t\tblockStyles: true,\n\t\t\t\tlayoutStyles: false,\n\t\t\t\tmarginReset: false,\n\t\t\t\tpresets: false,\n\t\t\t\trootPadding: false,\n\t\t\t\tvariationStyles: true,\n\t\t\t}\n\t\t);\n\t}, [ variation, settings, styles, getBlockStyles, clientId ] );\n\n\tusePrivateStyleOverride( {\n\t\tid: `variation-${ clientId }`,\n\t\tcss: variationStyles,\n\t\t__unstableType: 'variation',\n\t\tvariation,\n\t\t// The clientId will be stored with the override and used to ensure\n\t\t// the order of overrides matches the order of blocks so that the\n\t\t// correct CSS cascade is maintained.\n\t\tclientId,\n\t} );\n\n\treturn variation ? { className: variationClass } : {};\n}\n\nexport default {\n\thasSupport: () => true,\n\tattributeKeys: [ 'className' ],\n\tisMatch: ( { className } ) => getVariationMatches( className ).length > 0,\n\tuseBlockProps,\n};\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent, useInstanceId } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport {\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n\tToggleControl,\n\tPanelBody,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { InspectorControls } from '../components';\nimport { useSettings } from '../components/use-settings';\nimport { getLayoutType, getLayoutTypes } from '../layouts';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\nimport { LAYOUT_DEFINITIONS } from '../layouts/definitions';\nimport { useBlockSettings, useStyleOverride } from './utils';\nimport { unlock } from '../lock-unlock';\n\nconst layoutBlockSupportKey = 'layout';\nconst { kebabCase } = unlock( componentsPrivateApis );\n\nfunction hasLayoutBlockSupport( blockName ) {\n\treturn (\n\t\thasBlockSupport( blockName, 'layout' ) ||\n\t\thasBlockSupport( blockName, '__experimentalLayout' )\n\t);\n}\n\n/**\n * Generates the utility classnames for the given block's layout attributes.\n *\n * @param { Object } blockAttributes Block attributes.\n * @param { string } blockName       Block name.\n *\n * @return { Array } Array of CSS classname strings.\n */\nexport function useLayoutClasses( blockAttributes = {}, blockName = '' ) {\n\tconst { layout } = blockAttributes;\n\tconst { default: defaultBlockLayout } =\n\t\tgetBlockSupport( blockName, layoutBlockSupportKey ) || {};\n\tconst usedLayout =\n\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t: layout || defaultBlockLayout || {};\n\n\tconst layoutClassnames = [];\n\n\tif ( LAYOUT_DEFINITIONS[ usedLayout?.type || 'default' ]?.className ) {\n\t\tconst baseClassName =\n\t\t\tLAYOUT_DEFINITIONS[ usedLayout?.type || 'default' ]?.className;\n\t\tconst splitBlockName = blockName.split( '/' );\n\t\tconst fullBlockName =\n\t\t\tsplitBlockName[ 0 ] === 'core'\n\t\t\t\t? splitBlockName.pop()\n\t\t\t\t: splitBlockName.join( '-' );\n\t\tconst compoundClassName = `wp-block-${ fullBlockName }-${ baseClassName }`;\n\t\tlayoutClassnames.push( baseClassName, compoundClassName );\n\t}\n\n\tconst hasGlobalPadding = useSelect(\n\t\t( select ) => {\n\t\t\treturn (\n\t\t\t\t( usedLayout?.inherit ||\n\t\t\t\t\tusedLayout?.contentSize ||\n\t\t\t\t\tusedLayout?.type === 'constrained' ) &&\n\t\t\t\tselect( blockEditorStore ).getSettings().__experimentalFeatures\n\t\t\t\t\t?.useRootPaddingAwareAlignments\n\t\t\t);\n\t\t},\n\t\t[ usedLayout?.contentSize, usedLayout?.inherit, usedLayout?.type ]\n\t);\n\n\tif ( hasGlobalPadding ) {\n\t\tlayoutClassnames.push( 'has-global-padding' );\n\t}\n\n\tif ( usedLayout?.orientation ) {\n\t\tlayoutClassnames.push( `is-${ kebabCase( usedLayout.orientation ) }` );\n\t}\n\n\tif ( usedLayout?.justifyContent ) {\n\t\tlayoutClassnames.push(\n\t\t\t`is-content-justification-${ kebabCase(\n\t\t\t\tusedLayout.justifyContent\n\t\t\t) }`\n\t\t);\n\t}\n\n\tif ( usedLayout?.flexWrap && usedLayout.flexWrap === 'nowrap' ) {\n\t\tlayoutClassnames.push( 'is-nowrap' );\n\t}\n\n\treturn layoutClassnames;\n}\n\n/**\n * Generates a CSS rule with the given block's layout styles.\n *\n * @param { Object } blockAttributes Block attributes.\n * @param { string } blockName       Block name.\n * @param { string } selector        A selector to use in generating the CSS rule.\n *\n * @return { string } CSS rule.\n */\nexport function useLayoutStyles( blockAttributes = {}, blockName, selector ) {\n\tconst { layout = {}, style = {} } = blockAttributes;\n\t// Update type for blocks using legacy layouts.\n\tconst usedLayout =\n\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t: layout || {};\n\tconst fullLayoutType = getLayoutType( usedLayout?.type || 'default' );\n\tconst [ blockGapSupport ] = useSettings( 'spacing.blockGap' );\n\tconst hasBlockGapSupport = blockGapSupport !== null;\n\treturn fullLayoutType?.getLayoutStyle?.( {\n\t\tblockName,\n\t\tselector,\n\t\tlayout,\n\t\tstyle,\n\t\thasBlockGapSupport,\n\t} );\n}\n\nfunction LayoutPanelPure( {\n\tlayout,\n\tsetAttributes,\n\tname: blockName,\n\tclientId,\n} ) {\n\tconst settings = useBlockSettings( blockName );\n\t// Block settings come from theme.json under settings.[blockName].\n\tconst { layout: layoutSettings } = settings;\n\tconst { themeSupportsLayout } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn {\n\t\t\tthemeSupportsLayout: getSettings().supportsLayout,\n\t\t};\n\t}, [] );\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tif ( blockEditingMode !== 'default' ) {\n\t\treturn null;\n\t}\n\n\t// Layout block support comes from the block's block.json.\n\tconst layoutBlockSupport = getBlockSupport(\n\t\tblockName,\n\t\tlayoutBlockSupportKey,\n\t\t{}\n\t);\n\tconst blockSupportAndThemeSettings = {\n\t\t...layoutSettings,\n\t\t...layoutBlockSupport,\n\t};\n\tconst {\n\t\tallowSwitching,\n\t\tallowEditing = true,\n\t\tallowInheriting = true,\n\t\tdefault: defaultBlockLayout,\n\t} = blockSupportAndThemeSettings;\n\n\tif ( ! allowEditing ) {\n\t\treturn null;\n\t}\n\n\t/*\n\t * Try to find the layout type from either the\n\t * block's layout settings or any saved layout config.\n\t */\n\tconst blockSupportAndLayout = {\n\t\t...layoutBlockSupport,\n\t\t...layout,\n\t};\n\tconst { type, default: { type: defaultType = 'default' } = {} } =\n\t\tblockSupportAndLayout;\n\tconst blockLayoutType = type || defaultType;\n\n\t// Only show the inherit toggle if it's supported,\n\t// and either the default / flow or the constrained layout type is in use, as the toggle switches from one to the other.\n\tconst showInheritToggle = !! (\n\t\tallowInheriting &&\n\t\t( ! blockLayoutType ||\n\t\t\tblockLayoutType === 'default' ||\n\t\t\tblockLayoutType === 'constrained' ||\n\t\t\tblockSupportAndLayout.inherit )\n\t);\n\n\tconst usedLayout = layout || defaultBlockLayout || {};\n\tconst { inherit = false, contentSize = null } = usedLayout;\n\t/**\n\t * `themeSupportsLayout` is only relevant to the `default/flow` or\n\t * `constrained` layouts and it should not be taken into account when other\n\t * `layout` types are used.\n\t */\n\tif (\n\t\t( blockLayoutType === 'default' ||\n\t\t\tblockLayoutType === 'constrained' ) &&\n\t\t! themeSupportsLayout\n\t) {\n\t\treturn null;\n\t}\n\tconst layoutType = getLayoutType( blockLayoutType );\n\tconst constrainedType = getLayoutType( 'constrained' );\n\tconst displayControlsForLegacyLayouts =\n\t\t! usedLayout.type && ( contentSize || inherit );\n\tconst hasContentSizeOrLegacySettings = !! inherit || !! contentSize;\n\n\tconst onChangeType = ( newType ) =>\n\t\tsetAttributes( { layout: { type: newType } } );\n\tconst onChangeLayout = ( newLayout ) =>\n\t\tsetAttributes( { layout: newLayout } );\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Layout' ) }>\n\t\t\t\t\t{ showInheritToggle && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={ __( 'Inner blocks use content width' ) }\n\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\tlayoutType?.name === 'constrained' ||\n\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\t\t\t\t\tlayoutType?.name ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t'constrained' ||\n\t\t\t\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'constrained',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\t\tlayoutType?.name === 'constrained' ||\n\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Nested blocks use content width with options for full and wide widths.'\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Nested blocks will fill the width of this container.'\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ ! inherit && allowSwitching && (\n\t\t\t\t\t\t<LayoutTypeSwitcher\n\t\t\t\t\t\t\ttype={ blockLayoutType }\n\t\t\t\t\t\t\tonChange={ onChangeType }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ layoutType && layoutType.name !== 'default' && (\n\t\t\t\t\t\t<layoutType.inspectorControls\n\t\t\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\t\t\tlayoutBlockSupport={ blockSupportAndThemeSettings }\n\t\t\t\t\t\t\tname={ blockName }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ constrainedType && displayControlsForLegacyLayouts && (\n\t\t\t\t\t\t<constrainedType.inspectorControls\n\t\t\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\t\t\tlayoutBlockSupport={ blockSupportAndThemeSettings }\n\t\t\t\t\t\t\tname={ blockName }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t{ ! inherit && layoutType && (\n\t\t\t\t<layoutType.toolBarControls\n\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\tlayoutBlockSupport={ layoutBlockSupport }\n\t\t\t\t\tname={ blockName }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default {\n\tshareWithChildBlocks: true,\n\tedit: LayoutPanelPure,\n\tattributeKeys: [ 'layout' ],\n\thasSupport( name ) {\n\t\treturn hasLayoutBlockSupport( name );\n\t},\n};\n\nfunction LayoutTypeSwitcher( { type, onChange } ) {\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\t__next40pxDefaultSize\n\t\t\tisBlock\n\t\t\tlabel={ __( 'Layout type' ) }\n\t\t\t__nextHasNoMarginBottom\n\t\t\thideLabelFromVision\n\t\t\tisAdaptiveWidth\n\t\t\tvalue={ type }\n\t\t\tonChange={ onChange }\n\t\t>\n\t\t\t{ getLayoutTypes().map( ( { name, label } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\tkey={ name }\n\t\t\t\t\t\tvalue={ name }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ToggleGroupControl>\n\t);\n}\n\n/**\n * Filters registered block settings, extending attributes to include `layout`.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\tif ( 'type' in ( settings.attributes?.layout ?? {} ) ) {\n\t\treturn settings;\n\t}\n\tif ( hasLayoutBlockSupport( settings ) ) {\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tlayout: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t};\n\t}\n\n\treturn settings;\n}\n\nfunction BlockWithLayoutStyles( {\n\tblock: BlockListBlock,\n\tprops,\n\tblockGapSupport,\n\tlayoutClasses,\n} ) {\n\tconst { name, attributes } = props;\n\tconst id = useInstanceId( BlockListBlock );\n\tconst { layout } = attributes;\n\tconst { default: defaultBlockLayout } =\n\t\tgetBlockSupport( name, layoutBlockSupportKey ) || {};\n\tconst usedLayout =\n\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t: layout || defaultBlockLayout || {};\n\n\tconst selectorPrefix = `wp-container-${ kebabCase( name ) }-is-layout-`;\n\t// Higher specificity to override defaults from theme.json.\n\tconst selector = `.${ selectorPrefix }${ id }`;\n\tconst hasBlockGapSupport = blockGapSupport !== null;\n\n\t// Get CSS string for the current layout type.\n\t// The CSS and `style` element is only output if it is not empty.\n\tconst fullLayoutType = getLayoutType( usedLayout?.type || 'default' );\n\tconst css = fullLayoutType?.getLayoutStyle?.( {\n\t\tblockName: name,\n\t\tselector,\n\t\tlayout: usedLayout,\n\t\tstyle: attributes?.style,\n\t\thasBlockGapSupport,\n\t} );\n\n\t// Attach a `wp-container-` id-based class name as well as a layout class name such as `is-layout-flex`.\n\tconst layoutClassNames = clsx(\n\t\t{\n\t\t\t[ `${ selectorPrefix }${ id }` ]: !! css, // Only attach a container class if there is generated CSS to be attached.\n\t\t},\n\t\tlayoutClasses\n\t);\n\n\tuseStyleOverride( { css } );\n\n\treturn (\n\t\t<BlockListBlock\n\t\t\t{ ...props }\n\t\t\t__unstableLayoutClassNames={ layoutClassNames }\n\t\t/>\n\t);\n}\n\n/**\n * Override the default block element to add the layout styles.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withLayoutStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst { clientId, name, attributes } = props;\n\t\tconst blockSupportsLayout = hasLayoutBlockSupport( name );\n\t\tconst layoutClasses = useLayoutClasses( attributes, name );\n\t\tconst extraProps = useSelect(\n\t\t\t( select ) => {\n\t\t\t\t// The callback returns early to avoid block editor subscription.\n\t\t\t\tif ( ! blockSupportsLayout ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { getSettings, getBlockSettings } = unlock(\n\t\t\t\t\tselect( blockEditorStore )\n\t\t\t\t);\n\t\t\t\tconst { disableLayoutStyles } = getSettings();\n\n\t\t\t\tif ( disableLayoutStyles ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst [ blockGapSupport ] = getBlockSettings(\n\t\t\t\t\tclientId,\n\t\t\t\t\t'spacing.blockGap'\n\t\t\t\t);\n\n\t\t\t\treturn { blockGapSupport };\n\t\t\t},\n\t\t\t[ blockSupportsLayout, clientId ]\n\t\t);\n\n\t\tif ( ! extraProps ) {\n\t\t\treturn (\n\t\t\t\t<BlockListBlock\n\t\t\t\t\t{ ...props }\n\t\t\t\t\t__unstableLayoutClassNames={\n\t\t\t\t\t\tblockSupportsLayout ? layoutClasses : undefined\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<BlockWithLayoutStyles\n\t\t\t\tblock={ BlockListBlock }\n\t\t\t\tprops={ props }\n\t\t\t\tlayoutClasses={ layoutClasses }\n\t\t\t\t{ ...extraProps }\n\t\t\t/>\n\t\t);\n\t},\n\t'withLayoutStyles'\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/layout/addAttribute',\n\taddAttribute\n);\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/editor/layout/with-layout-styles',\n\twithLayoutStyles\n);\n","export function range( start, length ) {\n\treturn Array.from( { length }, ( _, i ) => start + i );\n}\n\nexport class GridRect {\n\tconstructor( {\n\t\tcolumnStart,\n\t\trowStart,\n\t\tcolumnEnd,\n\t\trowEnd,\n\t\tcolumnSpan,\n\t\trowSpan,\n\t} = {} ) {\n\t\tthis.columnStart = columnStart ?? 1;\n\t\tthis.rowStart = rowStart ?? 1;\n\t\tif ( columnSpan !== undefined ) {\n\t\t\tthis.columnEnd = this.columnStart + columnSpan - 1;\n\t\t} else {\n\t\t\tthis.columnEnd = columnEnd ?? this.columnStart;\n\t\t}\n\t\tif ( rowSpan !== undefined ) {\n\t\t\tthis.rowEnd = this.rowStart + rowSpan - 1;\n\t\t} else {\n\t\t\tthis.rowEnd = rowEnd ?? this.rowStart;\n\t\t}\n\t}\n\n\tget columnSpan() {\n\t\treturn this.columnEnd - this.columnStart + 1;\n\t}\n\n\tget rowSpan() {\n\t\treturn this.rowEnd - this.rowStart + 1;\n\t}\n\n\tcontains( column, row ) {\n\t\treturn (\n\t\t\tcolumn >= this.columnStart &&\n\t\t\tcolumn <= this.columnEnd &&\n\t\t\trow >= this.rowStart &&\n\t\t\trow <= this.rowEnd\n\t\t);\n\t}\n\n\tcontainsRect( rect ) {\n\t\treturn (\n\t\t\tthis.contains( rect.columnStart, rect.rowStart ) &&\n\t\t\tthis.contains( rect.columnEnd, rect.rowEnd )\n\t\t);\n\t}\n\n\tintersectsRect( rect ) {\n\t\treturn (\n\t\t\tthis.columnStart <= rect.columnEnd &&\n\t\t\tthis.columnEnd >= rect.columnStart &&\n\t\t\tthis.rowStart <= rect.rowEnd &&\n\t\t\tthis.rowEnd >= rect.rowStart\n\t\t);\n\t}\n}\n\nexport function getComputedCSS( element, property ) {\n\treturn element.ownerDocument.defaultView\n\t\t.getComputedStyle( element )\n\t\t.getPropertyValue( property );\n}\n\n/**\n * Given a grid-template-columns or grid-template-rows CSS property value, gets the start and end\n * position in pixels of each grid track.\n *\n * https://css-tricks.com/snippets/css/complete-guide-grid/#aa-grid-track\n *\n * @param {string} template The grid-template-columns or grid-template-rows CSS property value.\n *                          Only supports fixed sizes in pixels.\n * @param {number} gap      The gap between grid tracks in pixels.\n *\n * @return {Array<{start: number, end: number}>} An array of objects with the start and end\n *                                               position in pixels of each grid track.\n */\nexport function getGridTracks( template, gap ) {\n\tconst tracks = [];\n\tfor ( const size of template.split( ' ' ) ) {\n\t\tconst previousTrack = tracks[ tracks.length - 1 ];\n\t\tconst start = previousTrack ? previousTrack.end + gap : 0;\n\t\tconst end = start + parseFloat( size );\n\t\ttracks.push( { start, end } );\n\t}\n\treturn tracks;\n}\n\n/**\n * Given an array of grid tracks and a position in pixels, gets the index of the closest track to\n * that position.\n *\n * https://css-tricks.com/snippets/css/complete-guide-grid/#aa-grid-track\n *\n * @param {Array<{start: number, end: number}>} tracks   An array of objects with the start and end\n *                                                       position in pixels of each grid track.\n * @param {number}                              position The position in pixels.\n * @param {string}                              edge     The edge of the track to compare the\n *                                                       position to. Either 'start' or 'end'.\n *\n * @return {number} The index of the closest track to the position. 0-based, unlike CSS grid which\n *                  is 1-based.\n */\nexport function getClosestTrack( tracks, position, edge = 'start' ) {\n\treturn tracks.reduce(\n\t\t( closest, track, index ) =>\n\t\t\tMath.abs( track[ edge ] - position ) <\n\t\t\tMath.abs( tracks[ closest ][ edge ] - position )\n\t\t\t\t? index\n\t\t\t\t: closest,\n\t\t0\n\t);\n}\n\nexport function getGridRect( gridElement, rect ) {\n\tconst columnGap = parseFloat( getComputedCSS( gridElement, 'column-gap' ) );\n\tconst rowGap = parseFloat( getComputedCSS( gridElement, 'row-gap' ) );\n\tconst gridColumnTracks = getGridTracks(\n\t\tgetComputedCSS( gridElement, 'grid-template-columns' ),\n\t\tcolumnGap\n\t);\n\tconst gridRowTracks = getGridTracks(\n\t\tgetComputedCSS( gridElement, 'grid-template-rows' ),\n\t\trowGap\n\t);\n\tconst columnStart = getClosestTrack( gridColumnTracks, rect.left ) + 1;\n\tconst rowStart = getClosestTrack( gridRowTracks, rect.top ) + 1;\n\tconst columnEnd =\n\t\tgetClosestTrack( gridColumnTracks, rect.right, 'end' ) + 1;\n\tconst rowEnd = getClosestTrack( gridRowTracks, rect.bottom, 'end' ) + 1;\n\treturn new GridRect( {\n\t\tcolumnStart,\n\t\tcolumnEnd,\n\t\trowStart,\n\t\trowEnd,\n\t} );\n}\n\nexport function getGridItemRect( gridItemElement ) {\n\treturn getGridRect(\n\t\tgridItemElement.parentElement,\n\t\tnew window.DOMRect(\n\t\t\tgridItemElement.offsetLeft,\n\t\t\tgridItemElement.offsetTop,\n\t\t\tgridItemElement.offsetWidth,\n\t\t\tgridItemElement.offsetHeight\n\t\t)\n\t);\n}\n\nexport function getGridInfo( gridElement ) {\n\tconst gridTemplateColumns = getComputedCSS(\n\t\tgridElement,\n\t\t'grid-template-columns'\n\t);\n\tconst gridTemplateRows = getComputedCSS(\n\t\tgridElement,\n\t\t'grid-template-rows'\n\t);\n\tconst borderTopWidth = getComputedCSS( gridElement, 'border-top-width' );\n\tconst borderRightWidth = getComputedCSS(\n\t\tgridElement,\n\t\t'border-right-width'\n\t);\n\tconst borderBottomWidth = getComputedCSS(\n\t\tgridElement,\n\t\t'border-bottom-width'\n\t);\n\tconst borderLeftWidth = getComputedCSS( gridElement, 'border-left-width' );\n\tconst paddingTop = getComputedCSS( gridElement, 'padding-top' );\n\tconst paddingRight = getComputedCSS( gridElement, 'padding-right' );\n\tconst paddingBottom = getComputedCSS( gridElement, 'padding-bottom' );\n\tconst paddingLeft = getComputedCSS( gridElement, 'padding-left' );\n\n\tconst numColumns = gridTemplateColumns.split( ' ' ).length;\n\tconst numRows = gridTemplateRows.split( ' ' ).length;\n\tconst numItems = numColumns * numRows;\n\treturn {\n\t\tnumColumns,\n\t\tnumRows,\n\t\tnumItems,\n\t\tcurrentColor: getComputedCSS( gridElement, 'color' ),\n\t\tstyle: {\n\t\t\tgridTemplateColumns,\n\t\t\tgridTemplateRows,\n\t\t\tgap: getComputedCSS( gridElement, 'gap' ),\n\t\t\tinset: `\n\t\t\t\tcalc(${ paddingTop } + ${ borderTopWidth })\n\t\t\t\tcalc(${ paddingRight } + ${ borderRightWidth })\n\t\t\t\tcalc(${ paddingBottom } + ${ borderBottomWidth })\n\t\t\t\tcalc(${ paddingLeft } + ${ borderLeftWidth })\n\t\t\t`,\n\t\t},\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { createInterpolateElement, useState } from '@wordpress/element';\nimport { Tip } from '@wordpress/components';\n\nconst globalTips = [\n\tcreateInterpolateElement(\n\t\t__(\n\t\t\t'While writing, you can press <kbd>/</kbd> to quickly insert new blocks.'\n\t\t),\n\t\t{ kbd: <kbd /> }\n\t),\n\tcreateInterpolateElement(\n\t\t__(\n\t\t\t'Indent a list by pressing <kbd>space</kbd> at the beginning of a line.'\n\t\t),\n\t\t{ kbd: <kbd /> }\n\t),\n\tcreateInterpolateElement(\n\t\t__(\n\t\t\t'Outdent a list by pressing <kbd>backspace</kbd> at the beginning of a line.'\n\t\t),\n\t\t{ kbd: <kbd /> }\n\t),\n\t__( 'Drag files into the editor to automatically insert media blocks.' ),\n\t__( \"Change a block's type by pressing the block icon on the toolbar.\" ),\n];\n\nfunction Tips() {\n\tconst [ randomIndex ] = useState(\n\t\t// Disable Reason: I'm not generating an HTML id.\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tMath.floor( Math.random() * globalTips.length )\n\t);\n\n\treturn <Tip>{ globalTips[ randomIndex ] }</Tip>;\n}\n\nexport default Tips;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z\" />\n\t</SVG>\n);\n\nexport default chevronRight;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z\" />\n\t</SVG>\n);\n\nexport default chevronLeft;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst blockDefault = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z\" />\n\t</SVG>\n);\n\nexport default blockDefault;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { Icon } from '@wordpress/components';\nimport { blockDefault } from '@wordpress/icons';\nimport { memo } from '@wordpress/element';\n\nfunction BlockIcon( { icon, showColors = false, className, context } ) {\n\tif ( icon?.src === 'block-default' ) {\n\t\ticon = {\n\t\t\tsrc: blockDefault,\n\t\t};\n\t}\n\n\tconst renderedIcon = (\n\t\t<Icon icon={ icon && icon.src ? icon.src : icon } context={ context } />\n\t);\n\tconst style = showColors\n\t\t? {\n\t\t\t\tbackgroundColor: icon && icon.background,\n\t\t\t\tcolor: icon && icon.foreground,\n\t\t  }\n\t\t: {};\n\n\treturn (\n\t\t<span\n\t\t\tstyle={ style }\n\t\t\tclassName={ clsx( 'block-editor-block-icon', className, {\n\t\t\t\t'has-colors': showColors,\n\t\t\t} ) }\n\t\t>\n\t\t\t{ renderedIcon }\n\t\t</span>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-icon/README.md\n */\nexport default memo( BlockIcon );\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\t__experimentalText as Text,\n\t__experimentalVStack as VStack,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\nimport { __, isRTL } from '@wordpress/i18n';\nimport { chevronLeft, chevronRight } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport { store as blockEditorStore } from '../../store';\nimport BlockIcon from '../block-icon';\n\nconst { Badge } = unlock( componentsPrivateApis );\n\n/**\n * A card component that displays block information including title, icon, and description.\n * Can be used to show block metadata and navigation controls for parent blocks.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-card/README.md\n *\n * @example\n * ```jsx\n * function Example() {\n *   return (\n *     <BlockCard\n *       title=\"My Block\"\n *       icon=\"smiley\"\n *       description=\"A simple block example\"\n *       name=\"Custom Block\"\n *     />\n *   );\n * }\n * ```\n *\n * @param {Object}        props             Component props.\n * @param {string}        props.title       The title of the block.\n * @param {string|Object} props.icon        The icon of the block. This can be any of [WordPress' Dashicons](https://developer.wordpress.org/resource/dashicons/), or a custom `svg` element.\n * @param {string}        props.description The description of the block.\n * @param {Object}        [props.blockType] Deprecated: Object containing block type data.\n * @param {string}        [props.className] Additional classes to apply to the card.\n * @param {string}        [props.name]      Custom block name to display before the title.\n * @return {Element}                        Block card component.\n */\nfunction BlockCard( { title, icon, description, blockType, className, name } ) {\n\tif ( blockType ) {\n\t\tdeprecated( '`blockType` property in `BlockCard component`', {\n\t\t\tsince: '5.7',\n\t\t\talternative: '`title, icon and description` properties',\n\t\t} );\n\t\t( { title, icon, description } = blockType );\n\t}\n\n\tconst { parentNavBlockClientId } = useSelect( ( select ) => {\n\t\tconst { getSelectedBlockClientId, getBlockParentsByBlockName } =\n\t\t\tselect( blockEditorStore );\n\n\t\tconst _selectedBlockClientId = getSelectedBlockClientId();\n\n\t\treturn {\n\t\t\tparentNavBlockClientId: getBlockParentsByBlockName(\n\t\t\t\t_selectedBlockClientId,\n\t\t\t\t'core/navigation',\n\t\t\t\ttrue\n\t\t\t)[ 0 ],\n\t\t};\n\t}, [] );\n\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\n\treturn (\n\t\t<div className={ clsx( 'block-editor-block-card', className ) }>\n\t\t\t{ parentNavBlockClientId && ( // This is only used by the Navigation block for now. It's not ideal having Navigation block specific code here.\n\t\t\t\t<Button\n\t\t\t\t\tonClick={ () => selectBlock( parentNavBlockClientId ) }\n\t\t\t\t\tlabel={ __( 'Go to parent Navigation block' ) }\n\t\t\t\t\tstyle={\n\t\t\t\t\t\t// TODO: This style override is also used in ToolsPanelHeader.\n\t\t\t\t\t\t// It should be supported out-of-the-box by Button.\n\t\t\t\t\t\t{ minWidth: 24, padding: 0 }\n\t\t\t\t\t}\n\t\t\t\t\ticon={ isRTL() ? chevronRight : chevronLeft }\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<BlockIcon icon={ icon } showColors />\n\t\t\t<VStack spacing={ 1 }>\n\t\t\t\t<h2 className=\"block-editor-block-card__title\">\n\t\t\t\t\t<span className=\"block-editor-block-card__name\">\n\t\t\t\t\t\t{ !! name?.length ? name : title }\n\t\t\t\t\t</span>\n\t\t\t\t\t{ !! name?.length && <Badge>{ title }</Badge> }\n\t\t\t\t</h2>\n\t\t\t\t{ description && (\n\t\t\t\t\t<Text className=\"block-editor-block-card__description\">\n\t\t\t\t\t\t{ description }\n\t\t\t\t\t</Text>\n\t\t\t\t) }\n\t\t\t</VStack>\n\t\t</div>\n\t);\n}\n\nexport default BlockCard;\n","export type QueueItemId = string;\n\nexport type QueueStatus = 'active' | 'paused';\n\nexport type BatchId = string;\n\nexport interface QueueItem {\n\tid: QueueItemId;\n\tsourceFile: File;\n\tfile: File;\n\tposter?: File;\n\tattachment?: Partial< Attachment >;\n\tstatus: ItemStatus;\n\tadditionalData: AdditionalData;\n\tonChange?: OnChangeHandler;\n\tonSuccess?: OnSuccessHandler;\n\tonError?: OnErrorHandler;\n\tonBatchSuccess?: OnBatchSuccessHandler;\n\tcurrentOperation?: OperationType;\n\toperations?: Operation[];\n\terror?: Error;\n\tbatchId?: string;\n\tsourceUrl?: string;\n\tsourceAttachmentId?: number;\n\tabortController?: AbortController;\n}\n\nexport interface State {\n\tqueue: QueueItem[];\n\tqueueStatus: QueueStatus;\n\tblobUrls: Record< QueueItemId, string[] >;\n\tsettings: Settings;\n}\n\nexport enum Type {\n\tUnknown = 'REDUX_UNKNOWN',\n\tAdd = 'ADD_ITEM',\n\tPrepare = 'PREPARE_ITEM',\n\tCancel = 'CANCEL_ITEM',\n\tRemove = 'REMOVE_ITEM',\n\tPauseItem = 'PAUSE_ITEM',\n\tResumeItem = 'RESUME_ITEM',\n\tPauseQueue = 'PAUSE_QUEUE',\n\tResumeQueue = 'RESUME_QUEUE',\n\tOperationStart = 'OPERATION_START',\n\tOperationFinish = 'OPERATION_FINISH',\n\tAddOperations = 'ADD_OPERATIONS',\n\tCacheBlobUrl = 'CACHE_BLOB_URL',\n\tRevokeBlobUrls = 'REVOKE_BLOB_URLS',\n\tUpdateSettings = 'UPDATE_SETTINGS',\n}\n\ntype Action< T = Type, Payload = Record< string, unknown > > = {\n\ttype: T;\n} & Payload;\n\nexport type UnknownAction = Action< Type.Unknown >;\nexport type AddAction = Action<\n\tType.Add,\n\t{\n\t\titem: Omit< QueueItem, 'operations' > &\n\t\t\tPartial< Pick< QueueItem, 'operations' > >;\n\t}\n>;\nexport type OperationStartAction = Action<\n\tType.OperationStart,\n\t{ id: QueueItemId; operation: OperationType }\n>;\nexport type OperationFinishAction = Action<\n\tType.OperationFinish,\n\t{\n\t\tid: QueueItemId;\n\t\titem: Partial< QueueItem >;\n\t}\n>;\nexport type AddOperationsAction = Action<\n\tType.AddOperations,\n\t{ id: QueueItemId; operations: Operation[] }\n>;\nexport type CancelAction = Action<\n\tType.Cancel,\n\t{ id: QueueItemId; error: Error }\n>;\nexport type PauseItemAction = Action< Type.PauseItem, { id: QueueItemId } >;\nexport type ResumeItemAction = Action< Type.ResumeItem, { id: QueueItemId } >;\nexport type PauseQueueAction = Action< Type.PauseQueue >;\nexport type ResumeQueueAction = Action< Type.ResumeQueue >;\nexport type RemoveAction = Action< Type.Remove, { id: QueueItemId } >;\nexport type CacheBlobUrlAction = Action<\n\tType.CacheBlobUrl,\n\t{ id: QueueItemId; blobUrl: string }\n>;\nexport type RevokeBlobUrlsAction = Action<\n\tType.RevokeBlobUrls,\n\t{ id: QueueItemId }\n>;\nexport type UpdateSettingsAction = Action<\n\tType.UpdateSettings,\n\t{ settings: Partial< Settings > }\n>;\n\ninterface UploadMediaArgs {\n\t// Additional data to include in the request.\n\tadditionalData?: AdditionalData;\n\t// Array with the types of media that can be uploaded, if unset all types are allowed.\n\tallowedTypes?: string[];\n\t// List of files.\n\tfilesList: File[];\n\t// Maximum upload size in bytes allowed for the site.\n\tmaxUploadFileSize?: number;\n\t// Function called when an error happens.\n\tonError?: OnErrorHandler;\n\t// Function called each time a file or a temporary representation of the file is available.\n\tonFileChange?: OnChangeHandler;\n\t// Function called once a file has completely finished uploading, including thumbnails.\n\tonSuccess?: OnSuccessHandler;\n\t// List of allowed mime types and file extensions.\n\twpAllowedMimeTypes?: Record< string, string > | null;\n\t// Abort signal.\n\tsignal?: AbortSignal;\n}\n\nexport interface Settings {\n\t// Function for uploading files to the server.\n\tmediaUpload: ( args: UploadMediaArgs ) => void;\n\t// List of allowed mime types and file extensions.\n\tallowedMimeTypes?: Record< string, string > | null;\n\t// Maximum upload file size\n\tmaxUploadFileSize?: number;\n}\n\n// Must match the Attachment type from the media-utils package.\nexport interface Attachment {\n\tid: number;\n\talt: string;\n\tcaption: string;\n\ttitle: string;\n\turl: string;\n\tfilename: string | null;\n\tfilesize: number | null;\n\tmedia_type: 'image' | 'file';\n\tmime_type: string;\n\tfeatured_media?: number;\n\tmissing_image_sizes?: string[];\n\tposter?: string;\n}\n\nexport type OnChangeHandler = ( attachments: Partial< Attachment >[] ) => void;\nexport type OnSuccessHandler = ( attachments: Partial< Attachment >[] ) => void;\nexport type OnErrorHandler = ( error: Error ) => void;\nexport type OnBatchSuccessHandler = () => void;\n\nexport enum ItemStatus {\n\tProcessing = 'PROCESSING',\n\tPaused = 'PAUSED',\n}\n\nexport enum OperationType {\n\tPrepare = 'PREPARE',\n\tUpload = 'UPLOAD',\n}\n\nexport interface OperationArgs {}\n\ntype OperationWithArgs< T extends keyof OperationArgs = keyof OperationArgs > =\n\t[ T, OperationArgs[ T ] ];\n\nexport type Operation = OperationType | OperationWithArgs;\n\nexport type AdditionalData = Record< string, unknown >;\n\nexport type ImageFormat = 'jpeg' | 'webp' | 'avif' | 'png' | 'gif';\n","/**\n * Internal dependencies\n */\nimport {\n\ttype AddAction,\n\ttype AddOperationsAction,\n\ttype CacheBlobUrlAction,\n\ttype CancelAction,\n\ttype OperationFinishAction,\n\ttype OperationStartAction,\n\ttype PauseQueueAction,\n\ttype QueueItem,\n\ttype RemoveAction,\n\ttype ResumeQueueAction,\n\ttype RevokeBlobUrlsAction,\n\ttype State,\n\tType,\n\ttype UnknownAction,\n\ttype UpdateSettingsAction,\n} from './types';\n\nconst noop = () => {};\n\nconst DEFAULT_STATE: State = {\n\tqueue: [],\n\tqueueStatus: 'active',\n\tblobUrls: {},\n\tsettings: {\n\t\tmediaUpload: noop,\n\t},\n};\n\ntype Action =\n\t| AddAction\n\t| RemoveAction\n\t| CancelAction\n\t| PauseQueueAction\n\t| ResumeQueueAction\n\t| AddOperationsAction\n\t| OperationFinishAction\n\t| OperationStartAction\n\t| CacheBlobUrlAction\n\t| RevokeBlobUrlsAction\n\t| UpdateSettingsAction\n\t| UnknownAction;\n\nfunction reducer(\n\tstate = DEFAULT_STATE,\n\taction: Action = { type: Type.Unknown }\n) {\n\tswitch ( action.type ) {\n\t\tcase Type.PauseQueue: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tqueueStatus: 'paused',\n\t\t\t};\n\t\t}\n\n\t\tcase Type.ResumeQueue: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tqueueStatus: 'active',\n\t\t\t};\n\t\t}\n\n\t\tcase Type.Add:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tqueue: [ ...state.queue, action.item ],\n\t\t\t};\n\n\t\tcase Type.Cancel:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tqueue: state.queue.map(\n\t\t\t\t\t( item ): QueueItem =>\n\t\t\t\t\t\titem.id === action.id\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\terror: action.error,\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: item\n\t\t\t\t),\n\t\t\t};\n\n\t\tcase Type.Remove:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tqueue: state.queue.filter( ( item ) => item.id !== action.id ),\n\t\t\t};\n\n\t\tcase Type.OperationStart: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tqueue: state.queue.map(\n\t\t\t\t\t( item ): QueueItem =>\n\t\t\t\t\t\titem.id === action.id\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\tcurrentOperation: action.operation,\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: item\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\tcase Type.AddOperations:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tqueue: state.queue.map( ( item ): QueueItem => {\n\t\t\t\t\tif ( item.id !== action.id ) {\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\toperations: [\n\t\t\t\t\t\t\t...( item.operations || [] ),\n\t\t\t\t\t\t\t...action.operations,\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t} ),\n\t\t\t};\n\n\t\tcase Type.OperationFinish:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tqueue: state.queue.map( ( item ): QueueItem => {\n\t\t\t\t\tif ( item.id !== action.id ) {\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst operations = item.operations\n\t\t\t\t\t\t? item.operations.slice( 1 )\n\t\t\t\t\t\t: [];\n\n\t\t\t\t\t// Prevent an empty object if there's no attachment data.\n\t\t\t\t\tconst attachment =\n\t\t\t\t\t\titem.attachment || action.item.attachment\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...item.attachment,\n\t\t\t\t\t\t\t\t\t...action.item.attachment,\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: undefined;\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tcurrentOperation: undefined,\n\t\t\t\t\t\toperations,\n\t\t\t\t\t\t...action.item,\n\t\t\t\t\t\tattachment,\n\t\t\t\t\t\tadditionalData: {\n\t\t\t\t\t\t\t...item.additionalData,\n\t\t\t\t\t\t\t...action.item.additionalData,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} ),\n\t\t\t};\n\n\t\tcase Type.CacheBlobUrl: {\n\t\t\tconst blobUrls = state.blobUrls[ action.id ] || [];\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tblobUrls: {\n\t\t\t\t\t...state.blobUrls,\n\t\t\t\t\t[ action.id ]: [ ...blobUrls, action.blobUrl ],\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase Type.RevokeBlobUrls: {\n\t\t\tconst newBlobUrls = { ...state.blobUrls };\n\t\t\tdelete newBlobUrls[ action.id ];\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tblobUrls: newBlobUrls,\n\t\t\t};\n\t\t}\n\n\t\tcase Type.UpdateSettings: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsettings: {\n\t\t\t\t\t...state.settings,\n\t\t\t\t\t...action.settings,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\n\treturn state;\n}\n\nexport default reducer;\n","/**\n * Internal dependencies\n */\nimport type { QueueItem, Settings, State } from './types';\n\n/**\n * Returns all items currently being uploaded.\n *\n * @param state Upload state.\n *\n * @return Queue items.\n */\nexport function getItems( state: State ): QueueItem[] {\n\treturn state.queue;\n}\n\n/**\n * Determines whether any upload is currently in progress.\n *\n * @param state Upload state.\n *\n * @return Whether any upload is currently in progress.\n */\nexport function isUploading( state: State ): boolean {\n\treturn state.queue.length >= 1;\n}\n\n/**\n * Determines whether an upload is currently in progress given an attachment URL.\n *\n * @param state Upload state.\n * @param url   Attachment URL.\n *\n * @return Whether upload is currently in progress for the given attachment.\n */\nexport function isUploadingByUrl( state: State, url: string ): boolean {\n\treturn state.queue.some(\n\t\t( item ) => item.attachment?.url === url || item.sourceUrl === url\n\t);\n}\n\n/**\n * Determines whether an upload is currently in progress given an attachment ID.\n *\n * @param state        Upload state.\n * @param attachmentId Attachment ID.\n *\n * @return Whether upload is currently in progress for the given attachment.\n */\nexport function isUploadingById( state: State, attachmentId: number ): boolean {\n\treturn state.queue.some(\n\t\t( item ) =>\n\t\t\titem.attachment?.id === attachmentId ||\n\t\t\titem.sourceAttachmentId === attachmentId\n\t);\n}\n\n/**\n * Returns the media upload settings.\n *\n * @param state Upload state.\n *\n * @return Settings\n */\nexport function getSettings( state: State ): Settings {\n\treturn state.settings;\n}\n","/**\n * Internal dependencies\n */\nimport {\n\ttype BatchId,\n\tItemStatus,\n\tOperationType,\n\ttype QueueItem,\n\ttype QueueItemId,\n\ttype State,\n} from './types';\n\n/**\n * Returns all items currently being uploaded.\n *\n * @param state Upload state.\n *\n * @return Queue items.\n */\nexport function getAllItems( state: State ): QueueItem[] {\n\treturn state.queue;\n}\n\n/**\n * Returns a specific item given its unique ID.\n *\n * @param state Upload state.\n * @param id    Item ID.\n *\n * @return Queue item.\n */\nexport function getItem(\n\tstate: State,\n\tid: QueueItemId\n): QueueItem | undefined {\n\treturn state.queue.find( ( item ) => item.id === id );\n}\n\n/**\n * Determines whether a batch has been successfully uploaded, given its unique ID.\n *\n * @param state   Upload state.\n * @param batchId Batch ID.\n *\n * @return Whether a batch has been uploaded.\n */\nexport function isBatchUploaded( state: State, batchId: BatchId ): boolean {\n\tconst batchItems = state.queue.filter(\n\t\t( item ) => batchId === item.batchId\n\t);\n\treturn batchItems.length === 0;\n}\n\n/**\n * Determines whether an upload is currently in progress given a post or attachment ID.\n *\n * @param state              Upload state.\n * @param postOrAttachmentId Post ID or attachment ID.\n *\n * @return Whether upload is currently in progress for the given post or attachment.\n */\nexport function isUploadingToPost(\n\tstate: State,\n\tpostOrAttachmentId: number\n): boolean {\n\treturn state.queue.some(\n\t\t( item ) =>\n\t\t\titem.currentOperation === OperationType.Upload &&\n\t\t\titem.additionalData.post === postOrAttachmentId\n\t);\n}\n\n/**\n * Returns the next paused upload for a given post or attachment ID.\n *\n * @param state              Upload state.\n * @param postOrAttachmentId Post ID or attachment ID.\n *\n * @return Paused item.\n */\nexport function getPausedUploadForPost(\n\tstate: State,\n\tpostOrAttachmentId: number\n): QueueItem | undefined {\n\treturn state.queue.find(\n\t\t( item ) =>\n\t\t\titem.status === ItemStatus.Paused &&\n\t\t\titem.additionalData.post === postOrAttachmentId\n\t);\n}\n\n/**\n * Determines whether uploading is currently paused.\n *\n * @param state Upload state.\n *\n * @return Whether uploading is currently paused.\n */\nexport function isPaused( state: State ): boolean {\n\treturn state.queueStatus === 'paused';\n}\n\n/**\n * Returns all cached blob URLs for a given item ID.\n *\n * @param state Upload state.\n * @param id    Item ID\n *\n * @return List of blob URLs.\n */\nexport function getBlobUrls( state: State, id: QueueItemId ): string[] {\n\treturn state.blobUrls[ id ] || [];\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","interface UploadErrorArgs {\n\tcode: string;\n\tmessage: string;\n\tfile: File;\n\tcause?: Error;\n}\n\n/**\n * MediaError class.\n *\n * Small wrapper around the `Error` class\n * to hold an error code and a reference to a file object.\n */\nexport class UploadError extends Error {\n\tcode: string;\n\tfile: File;\n\n\tconstructor( { code, message, file, cause }: UploadErrorArgs ) {\n\t\tsuper( message, { cause } );\n\n\t\tObject.setPrototypeOf( this, new.target.prototype );\n\n\t\tthis.code = code;\n\t\tthis.file = file;\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { UploadError } from './upload-error';\n\n/**\n * Verifies if the caller (e.g. a block) supports this mime type.\n *\n * @param file         File object.\n * @param allowedTypes List of allowed mime types.\n */\nexport function validateMimeType( file: File, allowedTypes?: string[] ) {\n\tif ( ! allowedTypes ) {\n\t\treturn;\n\t}\n\n\t// Allowed type specified by consumer.\n\tconst isAllowedType = allowedTypes.some( ( allowedType ) => {\n\t\t// If a complete mimetype is specified verify if it matches exactly the mime type of the file.\n\t\tif ( allowedType.includes( '/' ) ) {\n\t\t\treturn allowedType === file.type;\n\t\t}\n\t\t// Otherwise a general mime type is used, and we should verify if the file mimetype starts with it.\n\t\treturn file.type.startsWith( `${ allowedType }/` );\n\t} );\n\n\tif ( file.type && ! isAllowedType ) {\n\t\tthrow new UploadError( {\n\t\t\tcode: 'MIME_TYPE_NOT_SUPPORTED',\n\t\t\tmessage: sprintf(\n\t\t\t\t// translators: %s: file name.\n\t\t\t\t__( '%s: Sorry, this file type is not supported here.' ),\n\t\t\t\tfile.name\n\t\t\t),\n\t\t\tfile,\n\t\t} );\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { UploadError } from './upload-error';\nimport { getMimeTypesArray } from './get-mime-types-array';\n\n/**\n * Verifies if the user is allowed to upload this mime type.\n *\n * @param file               File object.\n * @param wpAllowedMimeTypes List of allowed mime types and file extensions.\n */\nexport function validateMimeTypeForUser(\n\tfile: File,\n\twpAllowedMimeTypes?: Record< string, string > | null\n) {\n\t// Allowed types for the current WP_User.\n\tconst allowedMimeTypesForUser = getMimeTypesArray( wpAllowedMimeTypes );\n\n\tif ( ! allowedMimeTypesForUser ) {\n\t\treturn;\n\t}\n\n\tconst isAllowedMimeTypeForUser = allowedMimeTypesForUser.includes(\n\t\tfile.type\n\t);\n\n\tif ( file.type && ! isAllowedMimeTypeForUser ) {\n\t\tthrow new UploadError( {\n\t\t\tcode: 'MIME_TYPE_NOT_ALLOWED_FOR_USER',\n\t\t\tmessage: sprintf(\n\t\t\t\t// translators: %s: file name.\n\t\t\t\t__(\n\t\t\t\t\t'%s: Sorry, you are not allowed to upload this file type.'\n\t\t\t\t),\n\t\t\t\tfile.name\n\t\t\t),\n\t\t\tfile,\n\t\t} );\n\t}\n}\n","/**\n * Browsers may use unexpected mime types, and they differ from browser to browser.\n * This function computes a flexible array of mime types from the mime type structured provided by the server.\n * Converts { jpg|jpeg|jpe: \"image/jpeg\" } into [ \"image/jpeg\", \"image/jpg\", \"image/jpeg\", \"image/jpe\" ]\n *\n * @param {?Object} wpMimeTypesObject Mime type object received from the server.\n *                                    Extensions are keys separated by '|' and values are mime types associated with an extension.\n *\n * @return An array of mime types or null\n */\nexport function getMimeTypesArray(\n\twpMimeTypesObject?: Record< string, string > | null\n) {\n\tif ( ! wpMimeTypesObject ) {\n\t\treturn null;\n\t}\n\treturn Object.entries( wpMimeTypesObject ).flatMap(\n\t\t( [ extensionsString, mime ] ) => {\n\t\t\tconst [ type ] = mime.split( '/' );\n\t\t\tconst extensions = extensionsString.split( '|' );\n\t\t\treturn [\n\t\t\t\tmime,\n\t\t\t\t...extensions.map(\n\t\t\t\t\t( extension ) => `${ type }/${ extension }`\n\t\t\t\t),\n\t\t\t];\n\t\t}\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { UploadError } from './upload-error';\n\n/**\n * Verifies whether the file is within the file upload size limits for the site.\n *\n * @param file              File object.\n * @param maxUploadFileSize Maximum upload size in bytes allowed for the site.\n */\nexport function validateFileSize( file: File, maxUploadFileSize?: number ) {\n\t// Don't allow empty files to be uploaded.\n\tif ( file.size <= 0 ) {\n\t\tthrow new UploadError( {\n\t\t\tcode: 'EMPTY_FILE',\n\t\t\tmessage: sprintf(\n\t\t\t\t// translators: %s: file name.\n\t\t\t\t__( '%s: This file is empty.' ),\n\t\t\t\tfile.name\n\t\t\t),\n\t\t\tfile,\n\t\t} );\n\t}\n\n\tif ( maxUploadFileSize && file.size > maxUploadFileSize ) {\n\t\tthrow new UploadError( {\n\t\t\tcode: 'SIZE_ABOVE_LIMIT',\n\t\t\tmessage: sprintf(\n\t\t\t\t// translators: %s: file name.\n\t\t\t\t__(\n\t\t\t\t\t'%s: This file exceeds the maximum upload size for this site.'\n\t\t\t\t),\n\t\t\t\tfile.name\n\t\t\t),\n\t\t\tfile,\n\t\t} );\n\t}\n}\n","/**\n * External dependencies\n */\nimport { v4 as uuidv4 } from 'uuid';\n\n/**\n * WordPress dependencies\n */\nimport type { createRegistry } from '@wordpress/data';\n\ntype WPDataRegistry = ReturnType< typeof createRegistry >;\n\n/**\n * Internal dependencies\n */\nimport type {\n\tAdditionalData,\n\tCancelAction,\n\tOnBatchSuccessHandler,\n\tOnChangeHandler,\n\tOnErrorHandler,\n\tOnSuccessHandler,\n\tQueueItemId,\n\tState,\n} from './types';\nimport { Type } from './types';\nimport type {\n\taddItem,\n\tprocessItem,\n\tremoveItem,\n\trevokeBlobUrls,\n} from './private-actions';\nimport { validateMimeType } from '../validate-mime-type';\nimport { validateMimeTypeForUser } from '../validate-mime-type-for-user';\nimport { validateFileSize } from '../validate-file-size';\n\ntype ActionCreators = {\n\taddItem: typeof addItem;\n\taddItems: typeof addItems;\n\tremoveItem: typeof removeItem;\n\tprocessItem: typeof processItem;\n\tcancelItem: typeof cancelItem;\n\trevokeBlobUrls: typeof revokeBlobUrls;\n\t< T = Record< string, unknown > >( args: T ): void;\n};\n\ntype AllSelectors = typeof import('./selectors') &\n\ttypeof import('./private-selectors');\ntype CurriedState< F > = F extends ( state: State, ...args: infer P ) => infer R\n\t? ( ...args: P ) => R\n\t: F;\ntype Selectors = {\n\t[ key in keyof AllSelectors ]: CurriedState< AllSelectors[ key ] >;\n};\n\ntype ThunkArgs = {\n\tselect: Selectors;\n\tdispatch: ActionCreators;\n\tregistry: WPDataRegistry;\n};\n\ninterface AddItemsArgs {\n\tfiles: File[];\n\tonChange?: OnChangeHandler;\n\tonSuccess?: OnSuccessHandler;\n\tonBatchSuccess?: OnBatchSuccessHandler;\n\tonError?: OnErrorHandler;\n\tadditionalData?: AdditionalData;\n\tallowedTypes?: string[];\n}\n\n/**\n * Adds a new item to the upload queue.\n *\n * @param $0\n * @param $0.files            Files\n * @param [$0.onChange]       Function called each time a file or a temporary representation of the file is available.\n * @param [$0.onSuccess]      Function called after the file is uploaded.\n * @param [$0.onBatchSuccess] Function called after a batch of files is uploaded.\n * @param [$0.onError]        Function called when an error happens.\n * @param [$0.additionalData] Additional data to include in the request.\n * @param [$0.allowedTypes]   Array with the types of media that can be uploaded, if unset all types are allowed.\n */\nexport function addItems( {\n\tfiles,\n\tonChange,\n\tonSuccess,\n\tonError,\n\tonBatchSuccess,\n\tadditionalData,\n\tallowedTypes,\n}: AddItemsArgs ) {\n\treturn async ( { select, dispatch }: ThunkArgs ) => {\n\t\tconst batchId = uuidv4();\n\t\tfor ( const file of files ) {\n\t\t\t/*\n\t\t\t Check if the caller (e.g. a block) supports this mime type.\n\t\t\t Special case for file types such as HEIC which will be converted before upload anyway.\n\t\t\t Another check will be done before upload.\n\t\t\t*/\n\t\t\ttry {\n\t\t\t\tvalidateMimeType( file, allowedTypes );\n\t\t\t\tvalidateMimeTypeForUser(\n\t\t\t\t\tfile,\n\t\t\t\t\tselect.getSettings().allowedMimeTypes\n\t\t\t\t);\n\t\t\t} catch ( error: unknown ) {\n\t\t\t\tonError?.( error as Error );\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvalidateFileSize(\n\t\t\t\t\tfile,\n\t\t\t\t\tselect.getSettings().maxUploadFileSize\n\t\t\t\t);\n\t\t\t} catch ( error: unknown ) {\n\t\t\t\tonError?.( error as Error );\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tdispatch.addItem( {\n\t\t\t\tfile,\n\t\t\t\tbatchId,\n\t\t\t\tonChange,\n\t\t\t\tonSuccess,\n\t\t\t\tonBatchSuccess,\n\t\t\t\tonError,\n\t\t\t\tadditionalData,\n\t\t\t} );\n\t\t}\n\t};\n}\n\n/**\n * Cancels an item in the queue based on an error.\n *\n * @param id     Item ID.\n * @param error  Error instance.\n * @param silent Whether to cancel the item silently,\n *               without invoking its `onError` callback.\n */\nexport function cancelItem( id: QueueItemId, error: Error, silent = false ) {\n\treturn async ( { select, dispatch }: ThunkArgs ) => {\n\t\tconst item = select.getItem( id );\n\n\t\tif ( ! item ) {\n\t\t\t/*\n\t\t\t * Do nothing if item has already been removed.\n\t\t\t * This can happen if an upload is cancelled manually\n\t\t\t * while transcoding with vips is still in progress.\n\t\t\t * Then, cancelItem() is once invoked manually and once\n\t\t\t * by the error handler in optimizeImageItem().\n\t\t\t */\n\t\t\treturn;\n\t\t}\n\n\t\titem.abortController?.abort();\n\n\t\tif ( ! silent ) {\n\t\t\tconst { onError } = item;\n\t\t\tonError?.( error ?? new Error( 'Upload cancelled' ) );\n\t\t\tif ( ! onError && error ) {\n\t\t\t\t// TODO: Find better way to surface errors with sideloads etc.\n\t\t\t\t// eslint-disable-next-line no-console -- Deliberately log errors here.\n\t\t\t\tconsole.error( 'Upload cancelled', error );\n\t\t\t}\n\t\t}\n\n\t\tdispatch< CancelAction >( {\n\t\t\ttype: Type.Cancel,\n\t\t\tid,\n\t\t\terror,\n\t\t} );\n\t\tdispatch.removeItem( id );\n\t\tdispatch.revokeBlobUrls( id );\n\n\t\t// All items of this batch were cancelled or finished.\n\t\tif ( item.batchId && select.isBatchUploaded( item.batchId ) ) {\n\t\t\titem.onBatchSuccess?.();\n\t\t}\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { getFilename } from '@wordpress/url';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Converts a Blob to a File with a default name like \"image.png\".\n *\n * If it is already a File object, it is returned unchanged.\n *\n * @param fileOrBlob Blob object.\n * @return File object.\n */\nexport function convertBlobToFile( fileOrBlob: Blob | File ): File {\n\tif ( fileOrBlob instanceof File ) {\n\t\treturn fileOrBlob;\n\t}\n\n\t// Extension is only an approximation.\n\t// The server will override it if incorrect.\n\tconst ext = fileOrBlob.type.split( '/' )[ 1 ];\n\tconst mediaType =\n\t\t'application/pdf' === fileOrBlob.type\n\t\t\t? 'document'\n\t\t\t: fileOrBlob.type.split( '/' )[ 0 ];\n\treturn new File( [ fileOrBlob ], `${ mediaType }.${ ext }`, {\n\t\ttype: fileOrBlob.type,\n\t} );\n}\n\n/**\n * Renames a given file and returns a new file.\n *\n * Copies over the last modified time.\n *\n * @param file File object.\n * @param name File name.\n * @return Renamed file object.\n */\nexport function renameFile( file: File, name: string ): File {\n\treturn new File( [ file ], name, {\n\t\ttype: file.type,\n\t\tlastModified: file.lastModified,\n\t} );\n}\n\n/**\n * Clones a given file object.\n *\n * @param file File object.\n * @return New file object.\n */\nexport function cloneFile( file: File ): File {\n\treturn renameFile( file, file.name );\n}\n\n/**\n * Returns the file extension from a given file name or URL.\n *\n * @param file File URL.\n * @return File extension or null if it does not have one.\n */\nexport function getFileExtension( file: string ): string | null {\n\treturn file.includes( '.' ) ? file.split( '.' ).pop() || null : null;\n}\n\n/**\n * Returns file basename without extension.\n *\n * For example, turns \"my-awesome-file.jpeg\" into \"my-awesome-file\".\n *\n * @param name File name.\n * @return File basename.\n */\nexport function getFileBasename( name: string ): string {\n\treturn name.includes( '.' )\n\t\t? name.split( '.' ).slice( 0, -1 ).join( '.' )\n\t\t: name;\n}\n\n/**\n * Returns the file name including extension from a URL.\n *\n * @param url File URL.\n * @return File name.\n */\nexport function getFileNameFromUrl( url: string ) {\n\treturn getFilename( url ) || _x( 'unnamed', 'file name' );\n}\n","export class StubFile extends File {\n\tconstructor( fileName = 'stub-file' ) {\n\t\tsuper( [], fileName );\n\t}\n}\n","/**\n * External dependencies\n */\nimport { v4 as uuidv4 } from 'uuid';\n\n/**\n * WordPress dependencies\n */\nimport { createBlobURL, isBlobURL, revokeBlobURL } from '@wordpress/blob';\nimport type { createRegistry } from '@wordpress/data';\n\ntype WPDataRegistry = ReturnType< typeof createRegistry >;\n\n/**\n * Internal dependencies\n */\nimport { cloneFile, convertBlobToFile } from '../utils';\nimport { StubFile } from '../stub-file';\nimport type {\n\tAddAction,\n\tAdditionalData,\n\tAddOperationsAction,\n\tBatchId,\n\tCacheBlobUrlAction,\n\tOnBatchSuccessHandler,\n\tOnChangeHandler,\n\tOnErrorHandler,\n\tOnSuccessHandler,\n\tOperation,\n\tOperationFinishAction,\n\tOperationStartAction,\n\tPauseQueueAction,\n\tQueueItem,\n\tQueueItemId,\n\tResumeQueueAction,\n\tRevokeBlobUrlsAction,\n\tSettings,\n\tState,\n\tUpdateSettingsAction,\n} from './types';\nimport { ItemStatus, OperationType, Type } from './types';\nimport type { cancelItem } from './actions';\n\ntype ActionCreators = {\n\tcancelItem: typeof cancelItem;\n\taddItem: typeof addItem;\n\tremoveItem: typeof removeItem;\n\tprepareItem: typeof prepareItem;\n\tprocessItem: typeof processItem;\n\tfinishOperation: typeof finishOperation;\n\tuploadItem: typeof uploadItem;\n\trevokeBlobUrls: typeof revokeBlobUrls;\n\t< T = Record< string, unknown > >( args: T ): void;\n};\n\ntype AllSelectors = typeof import('./selectors') &\n\ttypeof import('./private-selectors');\ntype CurriedState< F > = F extends ( state: State, ...args: infer P ) => infer R\n\t? ( ...args: P ) => R\n\t: F;\ntype Selectors = {\n\t[ key in keyof AllSelectors ]: CurriedState< AllSelectors[ key ] >;\n};\n\ntype ThunkArgs = {\n\tselect: Selectors;\n\tdispatch: ActionCreators;\n\tregistry: WPDataRegistry;\n};\n\ninterface AddItemArgs {\n\t// It should always be a File, but some consumers might still pass Blobs only.\n\tfile: File | Blob;\n\tbatchId?: BatchId;\n\tonChange?: OnChangeHandler;\n\tonSuccess?: OnSuccessHandler;\n\tonError?: OnErrorHandler;\n\tonBatchSuccess?: OnBatchSuccessHandler;\n\tadditionalData?: AdditionalData;\n\tsourceUrl?: string;\n\tsourceAttachmentId?: number;\n\tabortController?: AbortController;\n\toperations?: Operation[];\n}\n\n/**\n * Adds a new item to the upload queue.\n *\n * @param $0\n * @param $0.file                 File\n * @param [$0.batchId]            Batch ID.\n * @param [$0.onChange]           Function called each time a file or a temporary representation of the file is available.\n * @param [$0.onSuccess]          Function called after the file is uploaded.\n * @param [$0.onBatchSuccess]     Function called after a batch of files is uploaded.\n * @param [$0.onError]            Function called when an error happens.\n * @param [$0.additionalData]     Additional data to include in the request.\n * @param [$0.sourceUrl]          Source URL. Used when importing a file from a URL or optimizing an existing file.\n * @param [$0.sourceAttachmentId] Source attachment ID. Used when optimizing an existing file for example.\n * @param [$0.abortController]    Abort controller for upload cancellation.\n * @param [$0.operations]         List of operations to perform. Defaults to automatically determined list, based on the file.\n */\nexport function addItem( {\n\tfile: fileOrBlob,\n\tbatchId,\n\tonChange,\n\tonSuccess,\n\tonBatchSuccess,\n\tonError,\n\tadditionalData = {} as AdditionalData,\n\tsourceUrl,\n\tsourceAttachmentId,\n\tabortController,\n\toperations,\n}: AddItemArgs ) {\n\treturn async ( { dispatch }: ThunkArgs ) => {\n\t\tconst itemId = uuidv4();\n\n\t\t// Hardening in case a Blob is passed instead of a File.\n\t\t// See https://github.com/WordPress/gutenberg/pull/65693 for an example.\n\t\tconst file = convertBlobToFile( fileOrBlob );\n\n\t\tlet blobUrl;\n\n\t\t// StubFile could be coming from addItemFromUrl().\n\t\tif ( ! ( file instanceof StubFile ) ) {\n\t\t\tblobUrl = createBlobURL( file );\n\t\t\tdispatch< CacheBlobUrlAction >( {\n\t\t\t\ttype: Type.CacheBlobUrl,\n\t\t\t\tid: itemId,\n\t\t\t\tblobUrl,\n\t\t\t} );\n\t\t}\n\n\t\tdispatch< AddAction >( {\n\t\t\ttype: Type.Add,\n\t\t\titem: {\n\t\t\t\tid: itemId,\n\t\t\t\tbatchId,\n\t\t\t\tstatus: ItemStatus.Processing,\n\t\t\t\tsourceFile: cloneFile( file ),\n\t\t\t\tfile,\n\t\t\t\tattachment: {\n\t\t\t\t\turl: blobUrl,\n\t\t\t\t},\n\t\t\t\tadditionalData: {\n\t\t\t\t\tconvert_format: false,\n\t\t\t\t\t...additionalData,\n\t\t\t\t},\n\t\t\t\tonChange,\n\t\t\t\tonSuccess,\n\t\t\t\tonBatchSuccess,\n\t\t\t\tonError,\n\t\t\t\tsourceUrl,\n\t\t\t\tsourceAttachmentId,\n\t\t\t\tabortController: abortController || new AbortController(),\n\t\t\t\toperations: Array.isArray( operations )\n\t\t\t\t\t? operations\n\t\t\t\t\t: [ OperationType.Prepare ],\n\t\t\t},\n\t\t} );\n\n\t\tdispatch.processItem( itemId );\n\t};\n}\n\n/**\n * Processes a single item in the queue.\n *\n * Runs the next operation in line and invokes any callbacks.\n *\n * @param id Item ID.\n */\nexport function processItem( id: QueueItemId ) {\n\treturn async ( { select, dispatch }: ThunkArgs ) => {\n\t\tif ( select.isPaused() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst item = select.getItem( id ) as QueueItem;\n\n\t\tconst { attachment, onChange, onSuccess, onBatchSuccess, batchId } =\n\t\t\titem;\n\n\t\tconst operation = Array.isArray( item.operations?.[ 0 ] )\n\t\t\t? item.operations[ 0 ][ 0 ]\n\t\t\t: item.operations?.[ 0 ];\n\n\t\tif ( attachment ) {\n\t\t\tonChange?.( [ attachment ] );\n\t\t}\n\n\t\t/*\n\t\t If there are no more operations, the item can be removed from the queue,\n\t\t but only if there are no thumbnails still being side-loaded,\n\t\t or if itself is a side-loaded item.\n\t\t*/\n\n\t\tif ( ! operation ) {\n\t\t\tif ( attachment ) {\n\t\t\t\tonSuccess?.( [ attachment ] );\n\t\t\t}\n\n\t\t\t// dispatch.removeItem( id );\n\t\t\tdispatch.revokeBlobUrls( id );\n\n\t\t\tif ( batchId && select.isBatchUploaded( batchId ) ) {\n\t\t\t\tonBatchSuccess?.();\n\t\t\t}\n\n\t\t\t/*\n\t\t\t At this point we are dealing with a parent whose children haven't fully uploaded yet.\n\t\t\t Do nothing and let the removal happen once the last side-loaded item finishes.\n\t\t\t */\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! operation ) {\n\t\t\t// This shouldn't really happen.\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch< OperationStartAction >( {\n\t\t\ttype: Type.OperationStart,\n\t\t\tid,\n\t\t\toperation,\n\t\t} );\n\n\t\tswitch ( operation ) {\n\t\t\tcase OperationType.Prepare:\n\t\t\t\tdispatch.prepareItem( item.id );\n\t\t\t\tbreak;\n\n\t\t\tcase OperationType.Upload:\n\t\t\t\tdispatch.uploadItem( id );\n\t\t\t\tbreak;\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object that pauses all processing in the queue.\n *\n * Useful for testing purposes.\n *\n * @return Action object.\n */\nexport function pauseQueue(): PauseQueueAction {\n\treturn {\n\t\ttype: Type.PauseQueue,\n\t};\n}\n\n/**\n * Resumes all processing in the queue.\n *\n * Dispatches an action object for resuming the queue itself,\n * and triggers processing for each remaining item in the queue individually.\n */\nexport function resumeQueue() {\n\treturn async ( { select, dispatch }: ThunkArgs ) => {\n\t\tdispatch< ResumeQueueAction >( {\n\t\t\ttype: Type.ResumeQueue,\n\t\t} );\n\n\t\tfor ( const item of select.getAllItems() ) {\n\t\t\tdispatch.processItem( item.id );\n\t\t}\n\t};\n}\n\n/**\n * Removes a specific item from the queue.\n *\n * @param id Item ID.\n */\nexport function removeItem( id: QueueItemId ) {\n\treturn async ( { select, dispatch }: ThunkArgs ) => {\n\t\tconst item = select.getItem( id );\n\t\tif ( ! item ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: Type.Remove,\n\t\t\tid,\n\t\t} );\n\t};\n}\n\n/**\n * Finishes an operation for a given item ID and immediately triggers processing the next one.\n *\n * @param id      Item ID.\n * @param updates Updated item data.\n */\nexport function finishOperation(\n\tid: QueueItemId,\n\tupdates: Partial< QueueItem >\n) {\n\treturn async ( { dispatch }: ThunkArgs ) => {\n\t\tdispatch< OperationFinishAction >( {\n\t\t\ttype: Type.OperationFinish,\n\t\t\tid,\n\t\t\titem: updates,\n\t\t} );\n\n\t\tdispatch.processItem( id );\n\t};\n}\n\n/**\n * Prepares an item for initial processing.\n *\n * Determines the list of operations to perform for a given image,\n * depending on its media type.\n *\n * For example, HEIF images first need to be converted, resized,\n * compressed, and then uploaded.\n *\n * Or videos need to be compressed, and then need poster generation\n * before upload.\n *\n * @param id Item ID.\n */\nexport function prepareItem( id: QueueItemId ) {\n\treturn async ( { dispatch }: ThunkArgs ) => {\n\t\tconst operations: Operation[] = [ OperationType.Upload ];\n\n\t\tdispatch< AddOperationsAction >( {\n\t\t\ttype: Type.AddOperations,\n\t\t\tid,\n\t\t\toperations,\n\t\t} );\n\n\t\tdispatch.finishOperation( id, {} );\n\t};\n}\n\n/**\n * Uploads an item to the server.\n *\n * @param id Item ID.\n */\nexport function uploadItem( id: QueueItemId ) {\n\treturn async ( { select, dispatch }: ThunkArgs ) => {\n\t\tconst item = select.getItem( id ) as QueueItem;\n\n\t\tselect.getSettings().mediaUpload( {\n\t\t\tfilesList: [ item.file ],\n\t\t\tadditionalData: item.additionalData,\n\t\t\tsignal: item.abortController?.signal,\n\t\t\tonFileChange: ( [ attachment ] ) => {\n\t\t\t\tif ( ! isBlobURL( attachment.url ) ) {\n\t\t\t\t\tdispatch.finishOperation( id, {\n\t\t\t\t\t\tattachment,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccess: ( [ attachment ] ) => {\n\t\t\t\tdispatch.finishOperation( id, {\n\t\t\t\t\tattachment,\n\t\t\t\t} );\n\t\t\t},\n\t\t\tonError: ( error ) => {\n\t\t\t\tdispatch.cancelItem( id, error );\n\t\t\t},\n\t\t} );\n\t};\n}\n\n/**\n * Revokes all blob URLs for a given item, freeing up memory.\n *\n * @param id Item ID.\n */\nexport function revokeBlobUrls( id: QueueItemId ) {\n\treturn async ( { select, dispatch }: ThunkArgs ) => {\n\t\tconst blobUrls = select.getBlobUrls( id );\n\n\t\tfor ( const blobUrl of blobUrls ) {\n\t\t\trevokeBlobURL( blobUrl );\n\t\t}\n\n\t\tdispatch< RevokeBlobUrlsAction >( {\n\t\t\ttype: Type.RevokeBlobUrls,\n\t\t\tid,\n\t\t} );\n\t};\n}\n\n/**\n * Returns an action object that pauses all processing in the queue.\n *\n * Useful for testing purposes.\n *\n * @param settings\n * @return Action object.\n */\nexport function updateSettings(\n\tsettings: Partial< Settings >\n): UpdateSettingsAction {\n\treturn {\n\t\ttype: Type.UpdateSettings,\n\t\tsettings,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { __dangerousOptInToUnstableAPIsOnlyForCoreModules } from '@wordpress/private-apis';\n\nexport const { lock, unlock } =\n\t__dangerousOptInToUnstableAPIsOnlyForCoreModules(\n\t\t'I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.',\n\t\t'@wordpress/upload-media'\n\t);\n","export const STORE_NAME = 'core/upload-media';\n","/**\n * WordPress dependencies\n */\nimport { createReduxStore, register } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as privateSelectors from './private-selectors';\nimport * as actions from './actions';\nimport * as privateActions from './private-actions';\nimport { unlock } from '../lock-unlock';\nimport { STORE_NAME } from './constants';\n\n/**\n * Media upload data store configuration.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#registerStore\n */\nexport const storeConfig = {\n\treducer,\n\tselectors,\n\tactions,\n};\n\n/**\n * Store definition for the media upload namespace.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\n */\nexport const store = createReduxStore( STORE_NAME, {\n\treducer,\n\tselectors,\n\tactions,\n} );\n\nregister( store );\n// @ts-ignore\nunlock( store ).registerPrivateActions( privateActions );\n// @ts-ignore\nunlock( store ).registerPrivateSelectors( privateSelectors );\n","/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport { useRegistry, createRegistry, RegistryProvider } from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { storeConfig } from '../../store';\nimport { STORE_NAME as mediaUploadStoreName } from '../../store/constants';\n\ntype WPDataRegistry = ReturnType< typeof createRegistry >;\n\nfunction getSubRegistry(\n\tsubRegistries: WeakMap< WPDataRegistry, WPDataRegistry >,\n\tregistry: WPDataRegistry,\n\tuseSubRegistry: boolean\n) {\n\tif ( ! useSubRegistry ) {\n\t\treturn registry;\n\t}\n\tlet subRegistry = subRegistries.get( registry );\n\tif ( ! subRegistry ) {\n\t\tsubRegistry = createRegistry( {}, registry );\n\t\tsubRegistry.registerStore( mediaUploadStoreName, storeConfig );\n\t\tsubRegistries.set( registry, subRegistry );\n\t}\n\treturn subRegistry;\n}\n\nconst withRegistryProvider = createHigherOrderComponent(\n\t( WrappedComponent ) =>\n\t\t( { useSubRegistry = true, ...props } ) => {\n\t\t\tconst registry = useRegistry() as unknown as WPDataRegistry;\n\t\t\tconst [ subRegistries ] = useState<\n\t\t\t\tWeakMap< WPDataRegistry, WPDataRegistry >\n\t\t\t>( () => new WeakMap() );\n\t\t\tconst subRegistry = getSubRegistry(\n\t\t\t\tsubRegistries,\n\t\t\t\tregistry,\n\t\t\t\tuseSubRegistry\n\t\t\t);\n\n\t\t\tif ( subRegistry === registry ) {\n\t\t\t\treturn <WrappedComponent registry={ registry } { ...props } />;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<RegistryProvider value={ subRegistry }>\n\t\t\t\t\t<WrappedComponent registry={ subRegistry } { ...props } />\n\t\t\t\t</RegistryProvider>\n\t\t\t);\n\t\t},\n\t'withRegistryProvider'\n);\n\nexport default withRegistryProvider;\n","/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport withRegistryProvider from './with-registry-provider';\nimport { unlock } from '../../lock-unlock';\nimport { store as uploadStore } from '../../store';\n\nconst MediaUploadProvider = withRegistryProvider( ( props: any ) => {\n\tconst { children, settings } = props;\n\tconst { updateSettings } = unlock( useDispatch( uploadStore ) );\n\n\tuseEffect( () => {\n\t\tupdateSettings( settings );\n\t}, [ settings, updateSettings ] );\n\n\treturn <>{ children }</>;\n} );\n\nexport default MediaUploadProvider;\n","/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport { useRegistry, createRegistry, RegistryProvider } from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { storeConfig } from '../../store';\nimport { STORE_NAME as blockEditorStoreName } from '../../store/constants';\n\nfunction getSubRegistry( subRegistries, registry, useSubRegistry ) {\n\tif ( ! useSubRegistry ) {\n\t\treturn registry;\n\t}\n\tlet subRegistry = subRegistries.get( registry );\n\tif ( ! subRegistry ) {\n\t\tsubRegistry = createRegistry( {}, registry );\n\t\tsubRegistry.registerStore( blockEditorStoreName, storeConfig );\n\t\tsubRegistries.set( registry, subRegistry );\n\t}\n\treturn subRegistry;\n}\n\nconst withRegistryProvider = createHigherOrderComponent(\n\t( WrappedComponent ) =>\n\t\t( { useSubRegistry = true, ...props } ) => {\n\t\t\tconst registry = useRegistry();\n\t\t\tconst [ subRegistries ] = useState( () => new WeakMap() );\n\t\t\tconst subRegistry = getSubRegistry(\n\t\t\t\tsubRegistries,\n\t\t\t\tregistry,\n\t\t\t\tuseSubRegistry\n\t\t\t);\n\n\t\t\tif ( subRegistry === registry ) {\n\t\t\t\treturn <WrappedComponent registry={ registry } { ...props } />;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<RegistryProvider value={ subRegistry }>\n\t\t\t\t\t<WrappedComponent registry={ subRegistry } { ...props } />\n\t\t\t\t</RegistryProvider>\n\t\t\t);\n\t\t},\n\t'withRegistryProvider'\n);\n\nexport default withRegistryProvider;\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\nimport { useRegistry, useSelect } from '@wordpress/data';\nimport { cloneBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst noop = () => {};\n\n/**\n * A function to call when the block value has been updated in the block-editor\n * store.\n *\n * @callback onBlockUpdate\n * @param {Object[]} blocks  The updated blocks.\n * @param {Object}   options The updated block options, such as selectionStart\n *                           and selectionEnd.\n */\n\n/**\n * useBlockSync is a side effect which handles bidirectional sync between the\n * block-editor store and a controlling data source which provides blocks. This\n * is most commonly used by the BlockEditorProvider to synchronize the contents\n * of the block-editor store with the root entity, like a post.\n *\n * Another example would be the template part block, which provides blocks from\n * a separate entity data source than a root entity. This hook syncs edits to\n * the template part in the block editor back to the entity and vice-versa.\n *\n * Here are some of its basic functions:\n * - Initializes the block-editor store for the given clientID to the blocks\n *   given via props.\n * - Adds incoming changes (like undo) to the block-editor store.\n * - Adds outgoing changes (like editing content) to the controlling entity,\n *   determining if a change should be considered persistent or not.\n * - Handles edge cases and race conditions which occur in those operations.\n * - Ignores changes which happen to other entities (like nested inner block\n *   controllers.\n * - Passes selection state from the block-editor store to the controlling entity.\n *\n * @param {Object}        props           Props for the block sync hook\n * @param {string}        props.clientId  The client ID of the inner block controller.\n *                                        If none is passed, then it is assumed to be a\n *                                        root controller rather than an inner block\n *                                        controller.\n * @param {Object[]}      props.value     The control value for the blocks. This value\n *                                        is used to initialize the block-editor store\n *                                        and for resetting the blocks to incoming\n *                                        changes like undo.\n * @param {Object}        props.selection The selection state responsible to restore the selection on undo/redo.\n * @param {onBlockUpdate} props.onChange  Function to call when a persistent\n *                                        change has been made in the block-editor blocks\n *                                        for the given clientId. For example, after\n *                                        this function is called, an entity is marked\n *                                        dirty because it has changes to save.\n * @param {onBlockUpdate} props.onInput   Function to call when a non-persistent\n *                                        change has been made in the block-editor blocks\n *                                        for the given clientId. When this is called,\n *                                        controlling sources do not become dirty.\n */\nexport default function useBlockSync( {\n\tclientId = null,\n\tvalue: controlledBlocks,\n\tselection: controlledSelection,\n\tonChange = noop,\n\tonInput = noop,\n} ) {\n\tconst registry = useRegistry();\n\n\tconst {\n\t\tresetBlocks,\n\t\tresetSelection,\n\t\treplaceInnerBlocks,\n\t\tsetHasControlledInnerBlocks,\n\t\t__unstableMarkNextChangeAsNotPersistent,\n\t} = registry.dispatch( blockEditorStore );\n\tconst { getBlockName, getBlocks, getSelectionStart, getSelectionEnd } =\n\t\tregistry.select( blockEditorStore );\n\tconst isControlled = useSelect(\n\t\t( select ) => {\n\t\t\treturn (\n\t\t\t\t! clientId ||\n\t\t\t\tselect( blockEditorStore ).areInnerBlocksControlled( clientId )\n\t\t\t);\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst pendingChangesRef = useRef( { incoming: null, outgoing: [] } );\n\tconst subscribedRef = useRef( false );\n\n\tconst setControlledBlocks = () => {\n\t\tif ( ! controlledBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't need to persist this change because we only replace\n\t\t// controlled inner blocks when the change was caused by an entity,\n\t\t// and so it would already be persisted.\n\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\tif ( clientId ) {\n\t\t\t// It is important to batch here because otherwise,\n\t\t\t// as soon as `setHasControlledInnerBlocks` is called\n\t\t\t// the effect to restore might be triggered\n\t\t\t// before the actual blocks get set properly in state.\n\t\t\tregistry.batch( () => {\n\t\t\t\tsetHasControlledInnerBlocks( clientId, true );\n\t\t\t\tconst storeBlocks = controlledBlocks.map( ( block ) =>\n\t\t\t\t\tcloneBlock( block )\n\t\t\t\t);\n\t\t\t\tif ( subscribedRef.current ) {\n\t\t\t\t\tpendingChangesRef.current.incoming = storeBlocks;\n\t\t\t\t}\n\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\treplaceInnerBlocks( clientId, storeBlocks );\n\t\t\t} );\n\t\t} else {\n\t\t\tif ( subscribedRef.current ) {\n\t\t\t\tpendingChangesRef.current.incoming = controlledBlocks;\n\t\t\t}\n\t\t\tresetBlocks( controlledBlocks );\n\t\t}\n\t};\n\n\t// Clean up the changes made by setControlledBlocks() when the component\n\t// containing useBlockSync() unmounts.\n\tconst unsetControlledBlocks = () => {\n\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\tif ( clientId ) {\n\t\t\tsetHasControlledInnerBlocks( clientId, false );\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\treplaceInnerBlocks( clientId, [] );\n\t\t} else {\n\t\t\tresetBlocks( [] );\n\t\t}\n\t};\n\n\t// Add a subscription to the block-editor registry to detect when changes\n\t// have been made. This lets us inform the data source of changes. This\n\t// is an effect so that the subscriber can run synchronously without\n\t// waiting for React renders for changes.\n\tconst onInputRef = useRef( onInput );\n\tconst onChangeRef = useRef( onChange );\n\tuseEffect( () => {\n\t\tonInputRef.current = onInput;\n\t\tonChangeRef.current = onChange;\n\t}, [ onInput, onChange ] );\n\n\t// Determine if blocks need to be reset when they change.\n\tuseEffect( () => {\n\t\tif ( pendingChangesRef.current.outgoing.includes( controlledBlocks ) ) {\n\t\t\t// Skip block reset if the value matches expected outbound sync\n\t\t\t// triggered by this component by a preceding change detection.\n\t\t\t// Only skip if the value matches expectation, since a reset should\n\t\t\t// still occur if the value is modified (not equal by reference),\n\t\t\t// to allow that the consumer may apply modifications to reflect\n\t\t\t// back on the editor.\n\t\t\tif (\n\t\t\t\tpendingChangesRef.current.outgoing[\n\t\t\t\t\tpendingChangesRef.current.outgoing.length - 1\n\t\t\t\t] === controlledBlocks\n\t\t\t) {\n\t\t\t\tpendingChangesRef.current.outgoing = [];\n\t\t\t}\n\t\t} else if ( getBlocks( clientId ) !== controlledBlocks ) {\n\t\t\t// Reset changing value in all other cases than the sync described\n\t\t\t// above. Since this can be reached in an update following an out-\n\t\t\t// bound sync, unset the outbound value to avoid considering it in\n\t\t\t// subsequent renders.\n\t\t\tpendingChangesRef.current.outgoing = [];\n\t\t\tsetControlledBlocks();\n\n\t\t\tif ( controlledSelection ) {\n\t\t\t\tresetSelection(\n\t\t\t\t\tcontrolledSelection.selectionStart,\n\t\t\t\t\tcontrolledSelection.selectionEnd,\n\t\t\t\t\tcontrolledSelection.initialPosition\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}, [ controlledBlocks, clientId ] );\n\n\tconst isMountedRef = useRef( false );\n\n\tuseEffect( () => {\n\t\t// On mount, controlled blocks are already set in the effect above.\n\t\tif ( ! isMountedRef.current ) {\n\t\t\tisMountedRef.current = true;\n\t\t\treturn;\n\t\t}\n\n\t\t// When the block becomes uncontrolled, it means its inner state has been reset\n\t\t// we need to take the blocks again from the external value property.\n\t\tif ( ! isControlled ) {\n\t\t\tpendingChangesRef.current.outgoing = [];\n\t\t\tsetControlledBlocks();\n\t\t}\n\t}, [ isControlled ] );\n\n\tuseEffect( () => {\n\t\tconst {\n\t\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t\tisLastBlockChangePersistent,\n\t\t\t__unstableIsLastBlockChangeIgnored,\n\t\t\tareInnerBlocksControlled,\n\t\t} = registry.select( blockEditorStore );\n\n\t\tlet blocks = getBlocks( clientId );\n\t\tlet isPersistent = isLastBlockChangePersistent();\n\t\tlet previousAreBlocksDifferent = false;\n\n\t\tsubscribedRef.current = true;\n\t\tconst unsubscribe = registry.subscribe( () => {\n\t\t\t// Sometimes, when changing block lists, lingering subscriptions\n\t\t\t// might trigger before they are cleaned up. If the block for which\n\t\t\t// the subscription runs is no longer in the store, this would clear\n\t\t\t// its parent entity's block list. To avoid this, we bail out if\n\t\t\t// the subscription is triggering for a block (`clientId !== null`)\n\t\t\t// and its block name can't be found because it's not on the list.\n\t\t\t// (`getBlockName( clientId ) === null`).\n\t\t\tif ( clientId !== null && getBlockName( clientId ) === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// When RESET_BLOCKS on parent blocks get called, the controlled blocks\n\t\t\t// can reset to uncontrolled, in these situations, it means we need to populate\n\t\t\t// the blocks again from the external blocks (the value property here)\n\t\t\t// and we should stop triggering onChange\n\t\t\tconst isStillControlled =\n\t\t\t\t! clientId || areInnerBlocksControlled( clientId );\n\t\t\tif ( ! isStillControlled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst newIsPersistent = isLastBlockChangePersistent();\n\t\t\tconst newBlocks = getBlocks( clientId );\n\t\t\tconst areBlocksDifferent = newBlocks !== blocks;\n\t\t\tblocks = newBlocks;\n\t\t\tif (\n\t\t\t\tareBlocksDifferent &&\n\t\t\t\t( pendingChangesRef.current.incoming ||\n\t\t\t\t\t__unstableIsLastBlockChangeIgnored() )\n\t\t\t) {\n\t\t\t\tpendingChangesRef.current.incoming = null;\n\t\t\t\tisPersistent = newIsPersistent;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Since we often dispatch an action to mark the previous action as\n\t\t\t// persistent, we need to make sure that the blocks changed on the\n\t\t\t// previous action before committing the change.\n\t\t\tconst didPersistenceChange =\n\t\t\t\tpreviousAreBlocksDifferent &&\n\t\t\t\t! areBlocksDifferent &&\n\t\t\t\tnewIsPersistent &&\n\t\t\t\t! isPersistent;\n\n\t\t\tif ( areBlocksDifferent || didPersistenceChange ) {\n\t\t\t\tisPersistent = newIsPersistent;\n\t\t\t\t// We know that onChange/onInput will update controlledBlocks.\n\t\t\t\t// We need to be aware that it was caused by an outgoing change\n\t\t\t\t// so that we do not treat it as an incoming change later on,\n\t\t\t\t// which would cause a block reset.\n\t\t\t\tpendingChangesRef.current.outgoing.push( blocks );\n\n\t\t\t\t// Inform the controlling entity that changes have been made to\n\t\t\t\t// the block-editor store they should be aware about.\n\t\t\t\tconst updateParent = isPersistent\n\t\t\t\t\t? onChangeRef.current\n\t\t\t\t\t: onInputRef.current;\n\t\t\t\tupdateParent( blocks, {\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tselectionStart: getSelectionStart(),\n\t\t\t\t\t\tselectionEnd: getSelectionEnd(),\n\t\t\t\t\t\tinitialPosition:\n\t\t\t\t\t\t\tgetSelectedBlocksInitialCaretPosition(),\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}\n\t\t\tpreviousAreBlocksDifferent = areBlocksDifferent;\n\t\t}, blockEditorStore );\n\n\t\treturn () => {\n\t\t\tsubscribedRef.current = false;\n\t\t\tunsubscribe();\n\t\t};\n\t}, [ registry, clientId ] );\n\n\tuseEffect( () => {\n\t\treturn () => {\n\t\t\tunsetControlledBlocks();\n\t\t};\n\t}, [] );\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"keyboardShortcuts\"];","/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\nimport { __ } from '@wordpress/i18n';\n\nfunction KeyboardShortcuts() {\n\treturn null;\n}\n\nfunction KeyboardShortcutsRegister() {\n\t// Registering the shortcuts.\n\tconst { registerShortcut } = useDispatch( keyboardShortcutsStore );\n\tuseEffect( () => {\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/copy',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Copy the selected block(s).' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 'c',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/cut',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Cut the selected block(s).' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 'x',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/paste',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Paste the selected block(s).' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 'v',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/duplicate',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Duplicate the selected block(s).' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryShift',\n\t\t\t\tcharacter: 'd',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/remove',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Remove the selected block(s).' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'access',\n\t\t\t\tcharacter: 'z',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/paste-styles',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __(\n\t\t\t\t'Paste the copied style to the selected block(s).'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryAlt',\n\t\t\t\tcharacter: 'v',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/insert-before',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __(\n\t\t\t\t'Insert a new block before the selected block(s).'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryAlt',\n\t\t\t\tcharacter: 't',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/insert-after',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __(\n\t\t\t\t'Insert a new block after the selected block(s).'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryAlt',\n\t\t\t\tcharacter: 'y',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/delete-multi-selection',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Delete selection.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tcharacter: 'del',\n\t\t\t},\n\t\t\taliases: [\n\t\t\t\t{\n\t\t\t\t\tcharacter: 'backspace',\n\t\t\t\t},\n\t\t\t],\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/select-all',\n\t\t\tcategory: 'selection',\n\t\t\tdescription: __(\n\t\t\t\t'Select all text when typing. Press again to select all blocks.'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 'a',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/unselect',\n\t\t\tcategory: 'selection',\n\t\t\tdescription: __( 'Clear selection.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tcharacter: 'escape',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/multi-text-selection',\n\t\t\tcategory: 'selection',\n\t\t\tdescription: __( 'Select text across multiple blocks.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'shift',\n\t\t\t\tcharacter: 'arrow',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/focus-toolbar',\n\t\t\tcategory: 'global',\n\t\t\tdescription: __( 'Navigate to the nearest toolbar.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'alt',\n\t\t\t\tcharacter: 'F10',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/move-up',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Move the selected block(s) up.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'secondary',\n\t\t\t\tcharacter: 't',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/move-down',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Move the selected block(s) down.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'secondary',\n\t\t\t\tcharacter: 'y',\n\t\t\t},\n\t\t} );\n\n\t\t// List view shortcuts.\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/collapse-list-view',\n\t\t\tcategory: 'list-view',\n\t\t\tdescription: __( 'Collapse all other items.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'alt',\n\t\t\t\tcharacter: 'l',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/group',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __(\n\t\t\t\t'Create a group block from the selected multiple blocks.'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 'g',\n\t\t\t},\n\t\t} );\n\t}, [ registerShortcut ] );\n\n\treturn null;\n}\n\nKeyboardShortcuts.Register = KeyboardShortcutsRegister;\n\nexport default KeyboardShortcuts;\n","/**\n * WordPress dependencies\n */\nimport { useDispatch } from '@wordpress/data';\nimport { useEffect, useMemo } from '@wordpress/element';\nimport { SlotFillProvider } from '@wordpress/components';\nimport {\n\tMediaUploadProvider,\n\tstore as uploadStore,\n} from '@wordpress/upload-media';\n\n/**\n * Internal dependencies\n */\nimport withRegistryProvider from './with-registry-provider';\nimport useBlockSync from './use-block-sync';\nimport { store as blockEditorStore } from '../../store';\nimport { BlockRefsProvider } from './block-refs-provider';\nimport { unlock } from '../../lock-unlock';\nimport KeyboardShortcuts from '../keyboard-shortcuts';\nimport useMediaUploadSettings from './use-media-upload-settings';\n\n/** @typedef {import('@wordpress/data').WPDataRegistry} WPDataRegistry */\n\nconst noop = () => {};\n\n/**\n * Upload a media file when the file upload button is activated\n * or when adding a file to the editor via drag & drop.\n *\n * @param {WPDataRegistry} registry\n * @param {Object}         $3                Parameters object passed to the function.\n * @param {Array}          $3.allowedTypes   Array with the types of media that can be uploaded, if unset all types are allowed.\n * @param {Object}         $3.additionalData Additional data to include in the request.\n * @param {Array<File>}    $3.filesList      List of files.\n * @param {Function}       $3.onError        Function called when an error happens.\n * @param {Function}       $3.onFileChange   Function called each time a file or a temporary representation of the file is available.\n * @param {Function}       $3.onSuccess      Function called once a file has completely finished uploading, including thumbnails.\n * @param {Function}       $3.onBatchSuccess Function called once all files in a group have completely finished uploading, including thumbnails.\n */\nfunction mediaUpload(\n\tregistry,\n\t{\n\t\tallowedTypes,\n\t\tadditionalData = {},\n\t\tfilesList,\n\t\tonError = noop,\n\t\tonFileChange,\n\t\tonSuccess,\n\t\tonBatchSuccess,\n\t}\n) {\n\tvoid registry.dispatch( uploadStore ).addItems( {\n\t\tfiles: filesList,\n\t\tonChange: onFileChange,\n\t\tonSuccess,\n\t\tonBatchSuccess,\n\t\tonError: ( { message } ) => onError( message ),\n\t\tadditionalData,\n\t\tallowedTypes,\n\t} );\n}\n\nexport const ExperimentalBlockEditorProvider = withRegistryProvider(\n\t( props ) => {\n\t\tconst {\n\t\t\tsettings: _settings,\n\t\t\tregistry,\n\t\t\tstripExperimentalSettings = false,\n\t\t} = props;\n\n\t\tconst mediaUploadSettings = useMediaUploadSettings( _settings );\n\n\t\tlet settings = _settings;\n\n\t\tif ( window.__experimentalMediaProcessing && _settings.mediaUpload ) {\n\t\t\t// Create a new variable so that the original props.settings.mediaUpload is not modified.\n\t\t\tsettings = useMemo(\n\t\t\t\t() => ( {\n\t\t\t\t\t..._settings,\n\t\t\t\t\tmediaUpload: mediaUpload.bind( null, registry ),\n\t\t\t\t} ),\n\t\t\t\t[ _settings, registry ]\n\t\t\t);\n\t\t}\n\n\t\tconst { __experimentalUpdateSettings } = unlock(\n\t\t\tuseDispatch( blockEditorStore )\n\t\t);\n\t\tuseEffect( () => {\n\t\t\t__experimentalUpdateSettings(\n\t\t\t\t{\n\t\t\t\t\t...settings,\n\t\t\t\t\t__internalIsInitialized: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tstripExperimentalSettings,\n\t\t\t\t\treset: true,\n\t\t\t\t}\n\t\t\t);\n\t\t}, [\n\t\t\tsettings,\n\t\t\tstripExperimentalSettings,\n\t\t\t__experimentalUpdateSettings,\n\t\t] );\n\n\t\t// Syncs the entity provider with changes in the block-editor store.\n\t\tuseBlockSync( props );\n\n\t\tconst children = (\n\t\t\t<SlotFillProvider passthrough>\n\t\t\t\t{ ! settings?.isPreviewMode && <KeyboardShortcuts.Register /> }\n\t\t\t\t<BlockRefsProvider>{ props.children }</BlockRefsProvider>\n\t\t\t</SlotFillProvider>\n\t\t);\n\n\t\tif ( window.__experimentalMediaProcessing ) {\n\t\t\treturn (\n\t\t\t\t<MediaUploadProvider\n\t\t\t\t\tsettings={ mediaUploadSettings }\n\t\t\t\t\tuseSubRegistry={ false }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</MediaUploadProvider>\n\t\t\t);\n\t\t}\n\n\t\treturn children;\n\t}\n);\n\nexport const BlockEditorProvider = ( props ) => {\n\treturn (\n\t\t<ExperimentalBlockEditorProvider { ...props } stripExperimentalSettings>\n\t\t\t{ props.children }\n\t\t</ExperimentalBlockEditorProvider>\n\t);\n};\n\nexport default BlockEditorProvider;\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\n\n/**\n * React hook used to compute the media upload settings to use in the post editor.\n *\n * @param {Object} settings Media upload settings prop.\n *\n * @return {Object} Media upload settings.\n */\nfunction useMediaUploadSettings( settings = {} ) {\n\treturn useMemo(\n\t\t() => ( {\n\t\t\tmediaUpload: settings.mediaUpload,\n\t\t\tmediaSideload: settings.mediaSideload,\n\t\t\tmaxUploadFileSize: settings.maxUploadFileSize,\n\t\t\tallowedMimeTypes: settings.allowedMimeTypes,\n\t\t} ),\n\t\t[ settings ]\n\t);\n}\n\nexport default useMediaUploadSettings;\n","/**\n * WordPress dependencies\n */\nimport { createContext, useContext, useMemo } from '@wordpress/element';\n\n/** @typedef {import('react').ReactNode} ReactNode */\n\n/**\n * @typedef BlockContextProviderProps\n *\n * @property {Record<string,*>} value    Context value to merge with current\n *                                       value.\n * @property {ReactNode}        children Component children.\n */\n\n/** @type {import('react').Context<Record<string,*>>} */\nconst Context = createContext( {} );\n\n/**\n * Component which merges passed value with current consumed block context.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-context/README.md\n *\n * @param {BlockContextProviderProps} props\n */\nexport function BlockContextProvider( { value, children } ) {\n\tconst context = useContext( Context );\n\tconst nextValue = useMemo(\n\t\t() => ( { ...context, ...value } ),\n\t\t[ context, value ]\n\t);\n\n\treturn <Context.Provider value={ nextValue } children={ children } />;\n}\n\nexport default Context;\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useRegistry } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { useBlockEditContext } from '../components/block-edit';\n\nconst DEFAULT_ATTRIBUTE = '__default';\nconst PATTERN_OVERRIDES_SOURCE = 'core/pattern-overrides';\nconst BLOCK_BINDINGS_ALLOWED_BLOCKS = {\n\t'core/paragraph': [ 'content' ],\n\t'core/heading': [ 'content' ],\n\t'core/image': [ 'id', 'url', 'title', 'alt' ],\n\t'core/button': [ 'url', 'text', 'linkTarget', 'rel' ],\n\t'core/post-date': [ 'datetime' ],\n};\n\n/**\n * Checks if the given object is empty.\n *\n * @param {?Object} object The object to check.\n *\n * @return {boolean} Whether the object is empty.\n */\nfunction isObjectEmpty( object ) {\n\treturn ! object || Object.keys( object ).length === 0;\n}\n\n/**\n * Based on the given block name, checks if it is possible to bind the block.\n *\n * @param {string} blockName The name of the block.\n *\n * @return {boolean} Whether it is possible to bind the block to sources.\n */\nexport function canBindBlock( blockName ) {\n\treturn blockName in BLOCK_BINDINGS_ALLOWED_BLOCKS;\n}\n\n/**\n * Based on the given block name and attribute name, checks if it is possible to bind the block attribute.\n *\n * @param {string} blockName     The name of the block.\n * @param {string} attributeName The name of attribute.\n *\n * @return {boolean} Whether it is possible to bind the block attribute.\n */\nexport function canBindAttribute( blockName, attributeName ) {\n\treturn (\n\t\tcanBindBlock( blockName ) &&\n\t\tBLOCK_BINDINGS_ALLOWED_BLOCKS[ blockName ].includes( attributeName )\n\t);\n}\n\n/**\n * Gets the bindable attributes for a given block.\n *\n * @param {string} blockName The name of the block.\n *\n * @return {string[]} The bindable attributes for the block.\n */\nexport function getBindableAttributes( blockName ) {\n\treturn BLOCK_BINDINGS_ALLOWED_BLOCKS[ blockName ];\n}\n\n/**\n * Checks if the block has the `__default` binding for pattern overrides.\n *\n * @param {?Record<string, object>} bindings A block's bindings from the metadata attribute.\n *\n * @return {boolean} Whether the block has the `__default` binding for pattern overrides.\n */\nexport function hasPatternOverridesDefaultBinding( bindings ) {\n\treturn bindings?.[ DEFAULT_ATTRIBUTE ]?.source === PATTERN_OVERRIDES_SOURCE;\n}\n\n/**\n * Returns the bindings with the `__default` binding for pattern overrides\n * replaced with the full-set of supported attributes. e.g.:\n *\n * - bindings passed in: `{ __default: { source: 'core/pattern-overrides' } }`\n * - bindings returned: `{ content: { source: 'core/pattern-overrides' } }`\n *\n * @param {string}                  blockName The block name (e.g. 'core/paragraph').\n * @param {?Record<string, object>} bindings  A block's bindings from the metadata attribute.\n *\n * @return {Object} The bindings with default replaced for pattern overrides.\n */\nexport function replacePatternOverridesDefaultBinding( blockName, bindings ) {\n\t// The `__default` binding currently only works for pattern overrides.\n\tif ( hasPatternOverridesDefaultBinding( bindings ) ) {\n\t\tconst supportedAttributes = BLOCK_BINDINGS_ALLOWED_BLOCKS[ blockName ];\n\t\tconst bindingsWithDefaults = {};\n\t\tfor ( const attributeName of supportedAttributes ) {\n\t\t\t// If the block has mixed binding sources, retain any non pattern override bindings.\n\t\t\tconst bindingSource = bindings[ attributeName ]\n\t\t\t\t? bindings[ attributeName ]\n\t\t\t\t: { source: PATTERN_OVERRIDES_SOURCE };\n\t\t\tbindingsWithDefaults[ attributeName ] = bindingSource;\n\t\t}\n\n\t\treturn bindingsWithDefaults;\n\t}\n\n\treturn bindings;\n}\n\n/**\n * Contains utils to update the block `bindings` metadata.\n *\n * @typedef {Object} WPBlockBindingsUtils\n *\n * @property {Function} updateBlockBindings    Updates the value of the bindings connected to block attributes.\n * @property {Function} removeAllBlockBindings Removes the bindings property of the `metadata` attribute.\n */\n\n/**\n * Retrieves the existing utils needed to update the block `bindings` metadata.\n * They can be used to create, modify, or remove connections from the existing block attributes.\n *\n * It contains the following utils:\n * - `updateBlockBindings`: Updates the value of the bindings connected to block attributes. It can be used to remove a specific binding by setting the value to `undefined`.\n * - `removeAllBlockBindings`: Removes the bindings property of the `metadata` attribute.\n *\n * @since 6.7.0 Introduced in WordPress core.\n *\n * @param {?string} clientId Optional block client ID. If not set, it will use the current block client ID from the context.\n *\n * @return {?WPBlockBindingsUtils} Object containing the block bindings utils.\n *\n * @example\n * ```js\n * import { useBlockBindingsUtils } from '@wordpress/block-editor'\n * const { updateBlockBindings, removeAllBlockBindings } = useBlockBindingsUtils();\n *\n * // Update url and alt attributes.\n * updateBlockBindings( {\n *     url: {\n *         source: 'core/post-meta',\n *         args: {\n *             key: 'url_custom_field',\n *         },\n *     },\n *     alt: {\n *         source: 'core/post-meta',\n *         args: {\n *             key: 'text_custom_field',\n *         },\n *     },\n * } );\n *\n * // Remove binding from url attribute.\n * updateBlockBindings( { url: undefined } );\n *\n * // Remove bindings from all attributes.\n * removeAllBlockBindings();\n * ```\n */\nexport function useBlockBindingsUtils( clientId ) {\n\tconst { clientId: contextClientId } = useBlockEditContext();\n\tconst blockClientId = clientId || contextClientId;\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst { getBlockAttributes } = useRegistry().select( blockEditorStore );\n\n\t/**\n\t * Updates the value of the bindings connected to block attributes.\n\t * It removes the binding when the new value is `undefined`.\n\t *\n\t * @param {Object} bindings        Bindings including the attributes to update and the new object.\n\t * @param {string} bindings.source The source name to connect to.\n\t * @param {Object} [bindings.args] Object containing the arguments needed by the source.\n\t *\n\t * @example\n\t * ```js\n\t * import { useBlockBindingsUtils } from '@wordpress/block-editor'\n\t *\n\t * const { updateBlockBindings } = useBlockBindingsUtils();\n\t * updateBlockBindings( {\n\t *     url: {\n\t *         source: 'core/post-meta',\n\t *         args: {\n\t *             key: 'url_custom_field',\n\t *         },\n\t * \t   },\n\t *     alt: {\n\t *         source: 'core/post-meta',\n\t *         args: {\n\t *             key: 'text_custom_field',\n\t *         },\n\t * \t   }\n\t * } );\n\t * ```\n\t */\n\tconst updateBlockBindings = ( bindings ) => {\n\t\tconst { metadata: { bindings: currentBindings, ...metadata } = {} } =\n\t\t\tgetBlockAttributes( blockClientId );\n\t\tconst newBindings = { ...currentBindings };\n\n\t\tObject.entries( bindings ).forEach( ( [ attribute, binding ] ) => {\n\t\t\tif ( ! binding && newBindings[ attribute ] ) {\n\t\t\t\tdelete newBindings[ attribute ];\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnewBindings[ attribute ] = binding;\n\t\t} );\n\n\t\tconst newMetadata = {\n\t\t\t...metadata,\n\t\t\tbindings: newBindings,\n\t\t};\n\n\t\tif ( isObjectEmpty( newMetadata.bindings ) ) {\n\t\t\tdelete newMetadata.bindings;\n\t\t}\n\n\t\tupdateBlockAttributes( blockClientId, {\n\t\t\tmetadata: isObjectEmpty( newMetadata ) ? undefined : newMetadata,\n\t\t} );\n\t};\n\n\t/**\n\t * Removes the bindings property of the `metadata` attribute.\n\t *\n\t * @example\n\t * ```js\n\t * import { useBlockBindingsUtils } from '@wordpress/block-editor'\n\t *\n\t * const { removeAllBlockBindings } = useBlockBindingsUtils();\n\t * removeAllBlockBindings();\n\t * ```\n\t */\n\tconst removeAllBlockBindings = () => {\n\t\tconst { metadata: { bindings, ...metadata } = {} } =\n\t\t\tgetBlockAttributes( blockClientId );\n\t\tupdateBlockAttributes( blockClientId, {\n\t\t\tmetadata: isObjectEmpty( metadata ) ? undefined : metadata,\n\t\t} );\n\t};\n\n\treturn { updateBlockBindings, removeAllBlockBindings };\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tgetBlockDefaultClassName,\n\tgetBlockType,\n\thasBlockSupport,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { withFilters } from '@wordpress/components';\nimport { useRegistry, useSelect } from '@wordpress/data';\nimport { useCallback, useContext, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockContext from '../block-context';\nimport isURLLike from '../link-control/is-url-like';\nimport {\n\tcanBindAttribute,\n\thasPatternOverridesDefaultBinding,\n\treplacePatternOverridesDefaultBinding,\n} from '../../utils/block-bindings';\nimport { unlock } from '../../lock-unlock';\n\n/**\n * Default value used for blocks which do not define their own context needs,\n * used to guarantee that a block's `context` prop will always be an object. It\n * is assigned as a constant since it is always expected to be an empty object,\n * and in order to avoid unnecessary React reconciliations of a changing object.\n *\n * @type {{}}\n */\nconst DEFAULT_BLOCK_CONTEXT = {};\n\nconst Edit = ( props ) => {\n\tconst { name } = props;\n\tconst blockType = getBlockType( name );\n\n\tif ( ! blockType ) {\n\t\treturn null;\n\t}\n\n\t// `edit` and `save` are functions or components describing the markup\n\t// with which a block is displayed. If `blockType` is valid, assign\n\t// them preferentially as the render value for the block.\n\tconst Component = blockType.edit || blockType.save;\n\n\treturn <Component { ...props } />;\n};\n\nconst EditWithFilters = withFilters( 'editor.BlockEdit' )( Edit );\n\nconst EditWithGeneratedProps = ( props ) => {\n\tconst { name, clientId, attributes, setAttributes } = props;\n\tconst registry = useRegistry();\n\tconst blockType = getBlockType( name );\n\tconst blockContext = useContext( BlockContext );\n\tconst registeredSources = useSelect(\n\t\t( select ) =>\n\t\t\tunlock( select( blocksStore ) ).getAllBlockBindingsSources(),\n\t\t[]\n\t);\n\n\tconst { blockBindings, context, hasPatternOverrides } = useMemo( () => {\n\t\t// Assign context values using the block type's declared context needs.\n\t\tconst computedContext = blockType?.usesContext\n\t\t\t? Object.fromEntries(\n\t\t\t\t\tObject.entries( blockContext ).filter( ( [ key ] ) =>\n\t\t\t\t\t\tblockType.usesContext.includes( key )\n\t\t\t\t\t)\n\t\t\t  )\n\t\t\t: DEFAULT_BLOCK_CONTEXT;\n\t\t// Add context requested by Block Bindings sources.\n\t\tif ( attributes?.metadata?.bindings ) {\n\t\t\tObject.values( attributes?.metadata?.bindings || {} ).forEach(\n\t\t\t\t( binding ) => {\n\t\t\t\t\tregisteredSources[ binding?.source ]?.usesContext?.forEach(\n\t\t\t\t\t\t( key ) => {\n\t\t\t\t\t\t\tcomputedContext[ key ] = blockContext[ key ];\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\treturn {\n\t\t\tblockBindings: replacePatternOverridesDefaultBinding(\n\t\t\t\tname,\n\t\t\t\tattributes?.metadata?.bindings\n\t\t\t),\n\t\t\tcontext: computedContext,\n\t\t\thasPatternOverrides: hasPatternOverridesDefaultBinding(\n\t\t\t\tattributes?.metadata?.bindings\n\t\t\t),\n\t\t};\n\t}, [\n\t\tname,\n\t\tblockType?.usesContext,\n\t\tblockContext,\n\t\tattributes?.metadata?.bindings,\n\t\tregisteredSources,\n\t] );\n\n\tconst computedAttributes = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! blockBindings ) {\n\t\t\t\treturn attributes;\n\t\t\t}\n\n\t\t\tconst attributesFromSources = {};\n\t\t\tconst blockBindingsBySource = new Map();\n\n\t\t\tfor ( const [ attributeName, binding ] of Object.entries(\n\t\t\t\tblockBindings\n\t\t\t) ) {\n\t\t\t\tconst { source: sourceName, args: sourceArgs } = binding;\n\t\t\t\tconst source = registeredSources[ sourceName ];\n\t\t\t\tif ( ! source || ! canBindAttribute( name, attributeName ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tblockBindingsBySource.set( source, {\n\t\t\t\t\t...blockBindingsBySource.get( source ),\n\t\t\t\t\t[ attributeName ]: {\n\t\t\t\t\t\targs: sourceArgs,\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( blockBindingsBySource.size ) {\n\t\t\t\tfor ( const [ source, bindings ] of blockBindingsBySource ) {\n\t\t\t\t\t// Get values in batch if the source supports it.\n\t\t\t\t\tlet values = {};\n\t\t\t\t\tif ( ! source.getValues ) {\n\t\t\t\t\t\tObject.keys( bindings ).forEach( ( attr ) => {\n\t\t\t\t\t\t\t// Default to the the source label when `getValues` doesn't exist.\n\t\t\t\t\t\t\tvalues[ attr ] = source.label;\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalues = source.getValues( {\n\t\t\t\t\t\t\tselect,\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t\tbindings,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t\tfor ( const [ attributeName, value ] of Object.entries(\n\t\t\t\t\t\tvalues\n\t\t\t\t\t) ) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tattributeName === 'url' &&\n\t\t\t\t\t\t\t( ! value || ! isURLLike( value ) )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// Return null if value is not a valid URL.\n\t\t\t\t\t\t\tattributesFromSources[ attributeName ] = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tattributesFromSources[ attributeName ] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\t...attributesFromSources,\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tattributes,\n\t\t\tblockBindings,\n\t\t\tclientId,\n\t\t\tcontext,\n\t\t\tname,\n\t\t\tregisteredSources,\n\t\t]\n\t);\n\n\tconst setBoundAttributes = useCallback(\n\t\t( nextAttributes ) => {\n\t\t\tif ( ! blockBindings ) {\n\t\t\t\tsetAttributes( nextAttributes );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tregistry.batch( () => {\n\t\t\t\tconst keptAttributes = { ...nextAttributes };\n\t\t\t\tconst blockBindingsBySource = new Map();\n\n\t\t\t\t// Loop only over the updated attributes to avoid modifying the bound ones that haven't changed.\n\t\t\t\tfor ( const [ attributeName, newValue ] of Object.entries(\n\t\t\t\t\tkeptAttributes\n\t\t\t\t) ) {\n\t\t\t\t\tif (\n\t\t\t\t\t\t! blockBindings[ attributeName ] ||\n\t\t\t\t\t\t! canBindAttribute( name, attributeName )\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst binding = blockBindings[ attributeName ];\n\t\t\t\t\tconst source = registeredSources[ binding?.source ];\n\t\t\t\t\tif ( ! source?.setValues ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tblockBindingsBySource.set( source, {\n\t\t\t\t\t\t...blockBindingsBySource.get( source ),\n\t\t\t\t\t\t[ attributeName ]: {\n\t\t\t\t\t\t\targs: binding.args,\n\t\t\t\t\t\t\tnewValue,\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t\tdelete keptAttributes[ attributeName ];\n\t\t\t\t}\n\n\t\t\t\tif ( blockBindingsBySource.size ) {\n\t\t\t\t\tfor ( const [\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\tbindings,\n\t\t\t\t\t] of blockBindingsBySource ) {\n\t\t\t\t\t\tsource.setValues( {\n\t\t\t\t\t\t\tselect: registry.select,\n\t\t\t\t\t\t\tdispatch: registry.dispatch,\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t\tbindings,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst hasParentPattern = !! context[ 'pattern/overrides' ];\n\n\t\t\t\tif (\n\t\t\t\t\t// Don't update non-connected attributes if the block is using pattern overrides\n\t\t\t\t\t// and the editing is happening while overriding the pattern (not editing the original).\n\t\t\t\t\t! ( hasPatternOverrides && hasParentPattern ) &&\n\t\t\t\t\tObject.keys( keptAttributes ).length\n\t\t\t\t) {\n\t\t\t\t\t// Don't update caption and href until they are supported.\n\t\t\t\t\tif ( hasPatternOverrides ) {\n\t\t\t\t\t\tdelete keptAttributes.caption;\n\t\t\t\t\t\tdelete keptAttributes.href;\n\t\t\t\t\t}\n\t\t\t\t\tsetAttributes( keptAttributes );\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t\t[\n\t\t\tblockBindings,\n\t\t\tclientId,\n\t\t\tcontext,\n\t\t\thasPatternOverrides,\n\t\t\tsetAttributes,\n\t\t\tregisteredSources,\n\t\t\tname,\n\t\t\tregistry,\n\t\t]\n\t);\n\n\tif ( ! blockType ) {\n\t\treturn null;\n\t}\n\n\tif ( blockType.apiVersion > 1 ) {\n\t\treturn (\n\t\t\t<EditWithFilters\n\t\t\t\t{ ...props }\n\t\t\t\tattributes={ computedAttributes }\n\t\t\t\tcontext={ context }\n\t\t\t\tsetAttributes={ setBoundAttributes }\n\t\t\t/>\n\t\t);\n\t}\n\n\t// Generate a class name for the block's editable form.\n\tconst generatedClassName = hasBlockSupport( blockType, 'className', true )\n\t\t? getBlockDefaultClassName( name )\n\t\t: null;\n\tconst className = clsx(\n\t\tgeneratedClassName,\n\t\tattributes?.className,\n\t\tprops.className\n\t);\n\n\treturn (\n\t\t<EditWithFilters\n\t\t\t{ ...props }\n\t\t\tattributes={ computedAttributes }\n\t\t\tclassName={ className }\n\t\t\tcontext={ context }\n\t\t\tsetAttributes={ setBoundAttributes }\n\t\t/>\n\t);\n};\n\nexport default EditWithGeneratedProps;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst moreVertical = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z\" />\n\t</SVG>\n);\n\nexport default moreVertical;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { moreVertical } from '@wordpress/icons';\n\nfunction Warning( { className, actions, children, secondaryActions } ) {\n\treturn (\n\t\t<div style={ { display: 'contents', all: 'initial' } }>\n\t\t\t<div className={ clsx( className, 'block-editor-warning' ) }>\n\t\t\t\t<div className=\"block-editor-warning__contents\">\n\t\t\t\t\t<p className=\"block-editor-warning__message\">\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</p>\n\n\t\t\t\t\t{ ( actions?.length > 0 || secondaryActions ) && (\n\t\t\t\t\t\t<div className=\"block-editor-warning__actions\">\n\t\t\t\t\t\t\t{ actions?.length > 0 &&\n\t\t\t\t\t\t\t\tactions.map( ( action, i ) => (\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-warning__action\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ action }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t{ secondaryActions && (\n\t\t\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-warning__secondary\"\n\t\t\t\t\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\t\t\t\t\tlabel={ __( 'More options' ) }\n\t\t\t\t\t\t\t\t\tpopoverProps={ {\n\t\t\t\t\t\t\t\t\t\tplacement: 'bottom-end',\n\t\t\t\t\t\t\t\t\t\tclassName:\n\t\t\t\t\t\t\t\t\t\t\t'block-editor-warning__dropdown',\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tnoIcons\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ () => (\n\t\t\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t\t\t{ secondaryActions.map(\n\t\t\t\t\t\t\t\t\t\t\t\t( item, pos ) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ item.onClick }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={ pos }\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ item.title }\n\t\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/warning/README.md\n */\nexport default Warning;\n","/**\n * WordPress dependencies\n */\nimport { getBlockType } from '@wordpress/blocks';\nimport { Button } from '@wordpress/components';\nimport { useDispatch } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport Warning from '../warning';\n\nexport function MultipleUsageWarning( {\n\toriginalBlockClientId,\n\tname,\n\tonReplace,\n} ) {\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\tconst blockType = getBlockType( name );\n\n\treturn (\n\t\t<Warning\n\t\t\tactions={ [\n\t\t\t\t<Button\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tkey=\"find-original\"\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tonClick={ () => selectBlock( originalBlockClientId ) }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Find original' ) }\n\t\t\t\t</Button>,\n\t\t\t\t<Button\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tkey=\"remove\"\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tonClick={ () => onReplace( [] ) }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Remove' ) }\n\t\t\t\t</Button>,\n\t\t\t] }\n\t\t>\n\t\t\t<strong>{ blockType?.title }: </strong>\n\t\t\t{ __( 'This block can only be used once.' ) }\n\t\t</Warning>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { createContext } from '@wordpress/element';\n\nexport const PrivateBlockContext = createContext( {} );\n","/**\n * WordPress dependencies\n */\nimport { useMemo, useContext } from '@wordpress/element';\nimport { hasBlockSupport } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport {\n\tBlockEditContextProvider,\n\tuseBlockEditContext,\n\tmayDisplayControlsKey,\n\tmayDisplayParentControlsKey,\n\tblockEditingModeKey,\n\tblockBindingsKey,\n\tisPreviewModeKey,\n} from './context';\nimport { MultipleUsageWarning } from './multiple-usage-warning';\nimport { PrivateBlockContext } from '../block-list/private-block-context';\n\n/**\n * The `useBlockEditContext` hook provides information about the block this hook is being used in.\n * It returns an object with the `name`, `isSelected` state, and the `clientId` of the block.\n * It is useful if you want to create custom hooks that need access to the current blocks clientId\n * but don't want to rely on the data getting passed in as a parameter.\n *\n * @return {Object} Block edit context\n */\nexport { useBlockEditContext };\n\nexport default function BlockEdit( {\n\tmayDisplayControls,\n\tmayDisplayParentControls,\n\tblockEditingMode,\n\tisPreviewMode,\n\t// The remaining props are passed through the BlockEdit filters and are thus\n\t// public API!\n\t...props\n} ) {\n\tconst {\n\t\tname,\n\t\tisSelected,\n\t\tclientId,\n\t\tattributes = {},\n\t\t__unstableLayoutClassNames,\n\t} = props;\n\tconst { layout = null, metadata = {} } = attributes;\n\tconst { bindings } = metadata;\n\tconst layoutSupport =\n\t\thasBlockSupport( name, 'layout', false ) ||\n\t\thasBlockSupport( name, '__experimentalLayout', false );\n\tconst { originalBlockClientId } = useContext( PrivateBlockContext );\n\n\treturn (\n\t\t<BlockEditContextProvider\n\t\t\t// It is important to return the same object if props haven't\n\t\t\t// changed to avoid  unnecessary rerenders.\n\t\t\t// See https://reactjs.org/docs/context.html#caveats.\n\t\t\tvalue={ useMemo(\n\t\t\t\t() => ( {\n\t\t\t\t\tname,\n\t\t\t\t\tisSelected,\n\t\t\t\t\tclientId,\n\t\t\t\t\tlayout: layoutSupport ? layout : null,\n\t\t\t\t\t__unstableLayoutClassNames,\n\t\t\t\t\t// We use symbols in favour of an __unstable prefix to avoid\n\t\t\t\t\t// usage outside of the package (this context is exposed).\n\t\t\t\t\t[ mayDisplayControlsKey ]: mayDisplayControls,\n\t\t\t\t\t[ mayDisplayParentControlsKey ]: mayDisplayParentControls,\n\t\t\t\t\t[ blockEditingModeKey ]: blockEditingMode,\n\t\t\t\t\t[ blockBindingsKey ]: bindings,\n\t\t\t\t\t[ isPreviewModeKey ]: isPreviewMode,\n\t\t\t\t} ),\n\t\t\t\t[\n\t\t\t\t\tname,\n\t\t\t\t\tisSelected,\n\t\t\t\t\tclientId,\n\t\t\t\t\tlayoutSupport,\n\t\t\t\t\tlayout,\n\t\t\t\t\t__unstableLayoutClassNames,\n\t\t\t\t\tmayDisplayControls,\n\t\t\t\t\tmayDisplayParentControls,\n\t\t\t\t\tblockEditingMode,\n\t\t\t\t\tbindings,\n\t\t\t\t\tisPreviewMode,\n\t\t\t\t]\n\t\t\t) }\n\t\t>\n\t\t\t<Edit { ...props } />\n\t\t\t{ originalBlockClientId && (\n\t\t\t\t<MultipleUsageWarning\n\t\t\t\t\toriginalBlockClientId={ originalBlockClientId }\n\t\t\t\t\tname={ name }\n\t\t\t\t\tonReplace={ props.onReplace }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</BlockEditContextProvider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { RawHTML } from '@wordpress/element';\nimport { safeHTML } from '@wordpress/dom';\n\nexport default function BlockView( {\n\ttitle,\n\trawContent,\n\trenderedContent,\n\taction,\n\tactionText,\n\tclassName,\n} ) {\n\treturn (\n\t\t<div className={ className }>\n\t\t\t<div className=\"block-editor-block-compare__content\">\n\t\t\t\t<h2 className=\"block-editor-block-compare__heading\">\n\t\t\t\t\t{ title }\n\t\t\t\t</h2>\n\n\t\t\t\t<div className=\"block-editor-block-compare__html\">\n\t\t\t\t\t{ rawContent }\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"block-editor-block-compare__preview edit-post-visual-editor\">\n\t\t\t\t\t<RawHTML>{ safeHTML( renderedContent ) }</RawHTML>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"block-editor-block-compare__action\">\n\t\t\t\t<Button\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\ttabIndex=\"0\"\n\t\t\t\t\tonClick={ action }\n\t\t\t\t>\n\t\t\t\t\t{ actionText }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n// diff doesn't tree-shake correctly, so we import from the individual\n// module here, to avoid including too much of the library\nimport { diffChars } from 'diff/lib/diff/character';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { getSaveContent } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport BlockView from './block-view';\n\nfunction BlockCompare( {\n\tblock,\n\tonKeep,\n\tonConvert,\n\tconvertor,\n\tconvertButtonText,\n} ) {\n\tfunction getDifference( originalContent, newContent ) {\n\t\tconst difference = diffChars( originalContent, newContent );\n\n\t\treturn difference.map( ( item, pos ) => {\n\t\t\tconst classes = clsx( {\n\t\t\t\t'block-editor-block-compare__added': item.added,\n\t\t\t\t'block-editor-block-compare__removed': item.removed,\n\t\t\t} );\n\n\t\t\treturn (\n\t\t\t\t<span key={ pos } className={ classes }>\n\t\t\t\t\t{ item.value }\n\t\t\t\t</span>\n\t\t\t);\n\t\t} );\n\t}\n\n\tfunction getConvertedContent( convertedBlock ) {\n\t\t// The convertor may return an array of items or a single item.\n\t\tconst newBlocks = Array.isArray( convertedBlock )\n\t\t\t? convertedBlock\n\t\t\t: [ convertedBlock ];\n\n\t\t// Get converted block details.\n\t\tconst newContent = newBlocks.map( ( item ) =>\n\t\t\tgetSaveContent( item.name, item.attributes, item.innerBlocks )\n\t\t);\n\n\t\treturn newContent.join( '' );\n\t}\n\n\tconst converted = getConvertedContent( convertor( block ) );\n\tconst difference = getDifference( block.originalContent, converted );\n\n\treturn (\n\t\t<div className=\"block-editor-block-compare__wrapper\">\n\t\t\t<BlockView\n\t\t\t\ttitle={ __( 'Current' ) }\n\t\t\t\tclassName=\"block-editor-block-compare__current\"\n\t\t\t\taction={ onKeep }\n\t\t\t\tactionText={ __( 'Convert to HTML' ) }\n\t\t\t\trawContent={ block.originalContent }\n\t\t\t\trenderedContent={ block.originalContent }\n\t\t\t/>\n\n\t\t\t<BlockView\n\t\t\t\ttitle={ __( 'After Conversion' ) }\n\t\t\t\tclassName=\"block-editor-block-compare__converted\"\n\t\t\t\taction={ onConvert }\n\t\t\t\tactionText={ convertButtonText }\n\t\t\t\trawContent={ difference }\n\t\t\t\trenderedContent={ converted }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default BlockCompare;\n","/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport { Button, Modal } from '@wordpress/components';\nimport { useState, useCallback, useMemo } from '@wordpress/element';\nimport { createBlock, rawHandler } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport Warning from '../warning';\nimport BlockCompare from '../block-compare';\nimport { store as blockEditorStore } from '../../store';\n\nconst blockToBlocks = ( block ) =>\n\trawHandler( {\n\t\tHTML: block.originalContent,\n\t} );\n\nexport default function BlockInvalidWarning( { clientId } ) {\n\tconst { block, canInsertHTMLBlock, canInsertClassicBlock } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { canInsertBlockType, getBlock, getBlockRootClientId } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\n\t\t\treturn {\n\t\t\t\tblock: getBlock( clientId ),\n\t\t\t\tcanInsertHTMLBlock: canInsertBlockType(\n\t\t\t\t\t'core/html',\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t\tcanInsertClassicBlock: canInsertBlockType(\n\t\t\t\t\t'core/freeform',\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { replaceBlock } = useDispatch( blockEditorStore );\n\n\tconst [ compare, setCompare ] = useState( false );\n\tconst onCompareClose = useCallback( () => setCompare( false ), [] );\n\n\tconst convert = useMemo(\n\t\t() => ( {\n\t\t\ttoClassic() {\n\t\t\t\tconst classicBlock = createBlock( 'core/freeform', {\n\t\t\t\t\tcontent: block.originalContent,\n\t\t\t\t} );\n\t\t\t\treturn replaceBlock( block.clientId, classicBlock );\n\t\t\t},\n\t\t\ttoHTML() {\n\t\t\t\tconst htmlBlock = createBlock( 'core/html', {\n\t\t\t\t\tcontent: block.originalContent,\n\t\t\t\t} );\n\t\t\t\treturn replaceBlock( block.clientId, htmlBlock );\n\t\t\t},\n\t\t\ttoBlocks() {\n\t\t\t\tconst newBlocks = blockToBlocks( block );\n\t\t\t\treturn replaceBlock( block.clientId, newBlocks );\n\t\t\t},\n\t\t\ttoRecoveredBlock() {\n\t\t\t\tconst recoveredBlock = createBlock(\n\t\t\t\t\tblock.name,\n\t\t\t\t\tblock.attributes,\n\t\t\t\t\tblock.innerBlocks\n\t\t\t\t);\n\t\t\t\treturn replaceBlock( block.clientId, recoveredBlock );\n\t\t\t},\n\t\t} ),\n\t\t[ block, replaceBlock ]\n\t);\n\n\tconst secondaryActions = useMemo(\n\t\t() =>\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\t// translators: Button to fix block content\n\t\t\t\t\ttitle: _x( 'Resolve', 'imperative verb' ),\n\t\t\t\t\tonClick: () => setCompare( true ),\n\t\t\t\t},\n\t\t\t\tcanInsertHTMLBlock && {\n\t\t\t\t\ttitle: __( 'Convert to HTML' ),\n\t\t\t\t\tonClick: convert.toHTML,\n\t\t\t\t},\n\t\t\t\tcanInsertClassicBlock && {\n\t\t\t\t\ttitle: __( 'Convert to Classic Block' ),\n\t\t\t\t\tonClick: convert.toClassic,\n\t\t\t\t},\n\t\t\t].filter( Boolean ),\n\t\t[ canInsertHTMLBlock, canInsertClassicBlock, convert ]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Warning\n\t\t\t\tactions={ [\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tkey=\"recover\"\n\t\t\t\t\t\tonClick={ convert.toRecoveredBlock }\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Attempt recovery' ) }\n\t\t\t\t\t</Button>,\n\t\t\t\t] }\n\t\t\t\tsecondaryActions={ secondaryActions }\n\t\t\t>\n\t\t\t\t{ __( 'Block contains unexpected or invalid content.' ) }\n\t\t\t</Warning>\n\t\t\t{ compare && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={\n\t\t\t\t\t\t// translators: Dialog title to fix block content\n\t\t\t\t\t\t__( 'Resolve Block' )\n\t\t\t\t\t}\n\t\t\t\t\tonRequestClose={ onCompareClose }\n\t\t\t\t\tclassName=\"block-editor-block-compare\"\n\t\t\t\t>\n\t\t\t\t\t<BlockCompare\n\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\tonKeep={ convert.toHTML }\n\t\t\t\t\t\tonConvert={ convert.toBlocks }\n\t\t\t\t\t\tconvertor={ blockToBlocks }\n\t\t\t\t\t\tconvertButtonText={ __( 'Convert to Blocks' ) }\n\t\t\t\t\t/>\n\t\t\t\t</Modal>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport Warning from '../warning';\n\nconst warning = (\n\t<Warning className=\"block-editor-block-list__block-crash-warning\">\n\t\t{ __( 'This block has encountered an error and cannot be previewed.' ) }\n\t</Warning>\n);\n\nexport default () => warning;\n","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\nclass BlockCrashBoundary extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\thasError: false,\n\t\t};\n\t}\n\n\tcomponentDidCatch() {\n\t\tthis.setState( {\n\t\t\thasError: true,\n\t\t} );\n\t}\n\n\trender() {\n\t\tif ( this.state.hasError ) {\n\t\t\treturn this.props.fallback;\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}\n\nexport default BlockCrashBoundary;\n","/**\n * External dependencies\n */\nimport TextareaAutosize from 'react-autosize-textarea';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\tgetBlockAttributes,\n\tgetBlockContent,\n\tgetBlockType,\n\tgetSaveContent,\n\tvalidateBlock,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nfunction BlockHTML( { clientId } ) {\n\tconst [ html, setHtml ] = useState( '' );\n\tconst block = useSelect(\n\t\t( select ) => select( blockEditorStore ).getBlock( clientId ),\n\t\t[ clientId ]\n\t);\n\tconst { updateBlock } = useDispatch( blockEditorStore );\n\tconst onChange = () => {\n\t\tconst blockType = getBlockType( block.name );\n\n\t\tif ( ! blockType ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst attributes = getBlockAttributes(\n\t\t\tblockType,\n\t\t\thtml,\n\t\t\tblock.attributes\n\t\t);\n\n\t\t// If html is empty  we reset the block to the default HTML and mark it as valid to avoid triggering an error\n\t\tconst content = html ? html : getSaveContent( blockType, attributes );\n\t\tconst [ isValid ] = html\n\t\t\t? validateBlock( {\n\t\t\t\t\t...block,\n\t\t\t\t\tattributes,\n\t\t\t\t\toriginalContent: content,\n\t\t\t  } )\n\t\t\t: [ true ];\n\n\t\tupdateBlock( clientId, {\n\t\t\tattributes,\n\t\t\toriginalContent: content,\n\t\t\tisValid,\n\t\t} );\n\n\t\t// Ensure the state is updated if we reset so it displays the default content.\n\t\tif ( ! html ) {\n\t\t\tsetHtml( content );\n\t\t}\n\t};\n\n\tuseEffect( () => {\n\t\tsetHtml( getBlockContent( block ) );\n\t}, [ block ] );\n\n\treturn (\n\t\t<TextareaAutosize\n\t\t\tclassName=\"block-editor-block-list__block-html-textarea\"\n\t\t\tvalue={ html }\n\t\t\tonBlur={ onChange }\n\t\t\tonChange={ ( event ) => setHtml( event.target.value ) }\n\t\t/>\n\t);\n}\n\nexport default BlockHTML;\n","let updateQueue = makeQueue();\nconst raf = fn => schedule(fn, updateQueue);\nlet writeQueue = makeQueue();\n\nraf.write = fn => schedule(fn, writeQueue);\n\nlet onStartQueue = makeQueue();\n\nraf.onStart = fn => schedule(fn, onStartQueue);\n\nlet onFrameQueue = makeQueue();\n\nraf.onFrame = fn => schedule(fn, onFrameQueue);\n\nlet onFinishQueue = makeQueue();\n\nraf.onFinish = fn => schedule(fn, onFinishQueue);\n\nlet timeouts = [];\n\nraf.setTimeout = (handler, ms) => {\n  let time = raf.now() + ms;\n\n  let cancel = () => {\n    let i = timeouts.findIndex(t => t.cancel == cancel);\n    if (~i) timeouts.splice(i, 1);\n    pendingCount -= ~i ? 1 : 0;\n  };\n\n  let timeout = {\n    time,\n    handler,\n    cancel\n  };\n  timeouts.splice(findTimeout(time), 0, timeout);\n  pendingCount += 1;\n  start();\n  return timeout;\n};\n\nlet findTimeout = time => ~(~timeouts.findIndex(t => t.time > time) || ~timeouts.length);\n\nraf.cancel = fn => {\n  onStartQueue.delete(fn);\n  onFrameQueue.delete(fn);\n  onFinishQueue.delete(fn);\n  updateQueue.delete(fn);\n  writeQueue.delete(fn);\n};\n\nraf.sync = fn => {\n  sync = true;\n  raf.batchedUpdates(fn);\n  sync = false;\n};\n\nraf.throttle = fn => {\n  let lastArgs;\n\n  function queuedFn() {\n    try {\n      fn(...lastArgs);\n    } finally {\n      lastArgs = null;\n    }\n  }\n\n  function throttled(...args) {\n    lastArgs = args;\n    raf.onStart(queuedFn);\n  }\n\n  throttled.handler = fn;\n\n  throttled.cancel = () => {\n    onStartQueue.delete(queuedFn);\n    lastArgs = null;\n  };\n\n  return throttled;\n};\n\nlet nativeRaf = typeof window != 'undefined' ? window.requestAnimationFrame : () => {};\n\nraf.use = impl => nativeRaf = impl;\n\nraf.now = typeof performance != 'undefined' ? () => performance.now() : Date.now;\n\nraf.batchedUpdates = fn => fn();\n\nraf.catch = console.error;\nraf.frameLoop = 'always';\n\nraf.advance = () => {\n  if (raf.frameLoop !== 'demand') {\n    console.warn('Cannot call the manual advancement of rafz whilst frameLoop is not set as demand');\n  } else {\n    update();\n  }\n};\n\nlet ts = -1;\nlet pendingCount = 0;\nlet sync = false;\n\nfunction schedule(fn, queue) {\n  if (sync) {\n    queue.delete(fn);\n    fn(0);\n  } else {\n    queue.add(fn);\n    start();\n  }\n}\n\nfunction start() {\n  if (ts < 0) {\n    ts = 0;\n\n    if (raf.frameLoop !== 'demand') {\n      nativeRaf(loop);\n    }\n  }\n}\n\nfunction stop() {\n  ts = -1;\n}\n\nfunction loop() {\n  if (~ts) {\n    nativeRaf(loop);\n    raf.batchedUpdates(update);\n  }\n}\n\nfunction update() {\n  let prevTs = ts;\n  ts = raf.now();\n  let count = findTimeout(ts);\n\n  if (count) {\n    eachSafely(timeouts.splice(0, count), t => t.handler());\n    pendingCount -= count;\n  }\n\n  if (!pendingCount) {\n    stop();\n    return;\n  }\n\n  onStartQueue.flush();\n  updateQueue.flush(prevTs ? Math.min(64, ts - prevTs) : 16.667);\n  onFrameQueue.flush();\n  writeQueue.flush();\n  onFinishQueue.flush();\n}\n\nfunction makeQueue() {\n  let next = new Set();\n  let current = next;\n  return {\n    add(fn) {\n      pendingCount += current == next && !next.has(fn) ? 1 : 0;\n      next.add(fn);\n    },\n\n    delete(fn) {\n      pendingCount -= current == next && next.has(fn) ? 1 : 0;\n      return next.delete(fn);\n    },\n\n    flush(arg) {\n      if (current.size) {\n        next = new Set();\n        pendingCount -= current.size;\n        eachSafely(current, fn => fn(arg) && next.add(fn));\n        pendingCount += next.size;\n        current = next;\n      }\n    }\n\n  };\n}\n\nfunction eachSafely(values, each) {\n  values.forEach(value => {\n    try {\n      each(value);\n    } catch (e) {\n      raf.catch(e);\n    }\n  });\n}\n\nconst __raf = {\n  count() {\n    return pendingCount;\n  },\n\n  isRunning() {\n    return ts >= 0;\n  },\n\n  clear() {\n    ts = -1;\n    timeouts = [];\n    onStartQueue = makeQueue();\n    updateQueue = makeQueue();\n    onFrameQueue = makeQueue();\n    writeQueue = makeQueue();\n    onFinishQueue = makeQueue();\n    pendingCount = 0;\n  }\n\n};\n\nexport { __raf, raf };\n","import { raf } from '@react-spring/rafz';\nexport { raf } from '@react-spring/rafz';\nimport { useEffect, useLayoutEffect, useRef, useState } from 'react';\n\nfunction noop() {}\nconst defineHidden = (obj, key, value) => Object.defineProperty(obj, key, {\n  value,\n  writable: true,\n  configurable: true\n});\nconst is = {\n  arr: Array.isArray,\n  obj: a => !!a && a.constructor.name === 'Object',\n  fun: a => typeof a === 'function',\n  str: a => typeof a === 'string',\n  num: a => typeof a === 'number',\n  und: a => a === undefined\n};\nfunction isEqual(a, b) {\n  if (is.arr(a)) {\n    if (!is.arr(b) || a.length !== b.length) return false;\n\n    for (let i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n\n    return true;\n  }\n\n  return a === b;\n}\nconst each = (obj, fn) => obj.forEach(fn);\nfunction eachProp(obj, fn, ctx) {\n  if (is.arr(obj)) {\n    for (let i = 0; i < obj.length; i++) {\n      fn.call(ctx, obj[i], `${i}`);\n    }\n\n    return;\n  }\n\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      fn.call(ctx, obj[key], key);\n    }\n  }\n}\nconst toArray = a => is.und(a) ? [] : is.arr(a) ? a : [a];\nfunction flush(queue, iterator) {\n  if (queue.size) {\n    const items = Array.from(queue);\n    queue.clear();\n    each(items, iterator);\n  }\n}\nconst flushCalls = (queue, ...args) => flush(queue, fn => fn(...args));\nconst isSSR = () => typeof window === 'undefined' || !window.navigator || /ServerSideRendering|^Deno\\//.test(window.navigator.userAgent);\n\nlet createStringInterpolator$1;\nlet to;\nlet colors$1 = null;\nlet skipAnimation = false;\nlet willAdvance = noop;\nconst assign = globals => {\n  if (globals.to) to = globals.to;\n  if (globals.now) raf.now = globals.now;\n  if (globals.colors !== undefined) colors$1 = globals.colors;\n  if (globals.skipAnimation != null) skipAnimation = globals.skipAnimation;\n  if (globals.createStringInterpolator) createStringInterpolator$1 = globals.createStringInterpolator;\n  if (globals.requestAnimationFrame) raf.use(globals.requestAnimationFrame);\n  if (globals.batchedUpdates) raf.batchedUpdates = globals.batchedUpdates;\n  if (globals.willAdvance) willAdvance = globals.willAdvance;\n  if (globals.frameLoop) raf.frameLoop = globals.frameLoop;\n};\n\nvar globals = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  get createStringInterpolator () { return createStringInterpolator$1; },\n  get to () { return to; },\n  get colors () { return colors$1; },\n  get skipAnimation () { return skipAnimation; },\n  get willAdvance () { return willAdvance; },\n  assign: assign\n});\n\nconst startQueue = new Set();\nlet currentFrame = [];\nlet prevFrame = [];\nlet priority = 0;\nconst frameLoop = {\n  get idle() {\n    return !startQueue.size && !currentFrame.length;\n  },\n\n  start(animation) {\n    if (priority > animation.priority) {\n      startQueue.add(animation);\n      raf.onStart(flushStartQueue);\n    } else {\n      startSafely(animation);\n      raf(advance);\n    }\n  },\n\n  advance,\n\n  sort(animation) {\n    if (priority) {\n      raf.onFrame(() => frameLoop.sort(animation));\n    } else {\n      const prevIndex = currentFrame.indexOf(animation);\n\n      if (~prevIndex) {\n        currentFrame.splice(prevIndex, 1);\n        startUnsafely(animation);\n      }\n    }\n  },\n\n  clear() {\n    currentFrame = [];\n    startQueue.clear();\n  }\n\n};\n\nfunction flushStartQueue() {\n  startQueue.forEach(startSafely);\n  startQueue.clear();\n  raf(advance);\n}\n\nfunction startSafely(animation) {\n  if (!currentFrame.includes(animation)) startUnsafely(animation);\n}\n\nfunction startUnsafely(animation) {\n  currentFrame.splice(findIndex(currentFrame, other => other.priority > animation.priority), 0, animation);\n}\n\nfunction advance(dt) {\n  const nextFrame = prevFrame;\n\n  for (let i = 0; i < currentFrame.length; i++) {\n    const animation = currentFrame[i];\n    priority = animation.priority;\n\n    if (!animation.idle) {\n      willAdvance(animation);\n      animation.advance(dt);\n\n      if (!animation.idle) {\n        nextFrame.push(animation);\n      }\n    }\n  }\n\n  priority = 0;\n  prevFrame = currentFrame;\n  prevFrame.length = 0;\n  currentFrame = nextFrame;\n  return currentFrame.length > 0;\n}\n\nfunction findIndex(arr, test) {\n  const index = arr.findIndex(test);\n  return index < 0 ? arr.length : index;\n}\n\nconst colors = {\n  transparent: 0x00000000,\n  aliceblue: 0xf0f8ffff,\n  antiquewhite: 0xfaebd7ff,\n  aqua: 0x00ffffff,\n  aquamarine: 0x7fffd4ff,\n  azure: 0xf0ffffff,\n  beige: 0xf5f5dcff,\n  bisque: 0xffe4c4ff,\n  black: 0x000000ff,\n  blanchedalmond: 0xffebcdff,\n  blue: 0x0000ffff,\n  blueviolet: 0x8a2be2ff,\n  brown: 0xa52a2aff,\n  burlywood: 0xdeb887ff,\n  burntsienna: 0xea7e5dff,\n  cadetblue: 0x5f9ea0ff,\n  chartreuse: 0x7fff00ff,\n  chocolate: 0xd2691eff,\n  coral: 0xff7f50ff,\n  cornflowerblue: 0x6495edff,\n  cornsilk: 0xfff8dcff,\n  crimson: 0xdc143cff,\n  cyan: 0x00ffffff,\n  darkblue: 0x00008bff,\n  darkcyan: 0x008b8bff,\n  darkgoldenrod: 0xb8860bff,\n  darkgray: 0xa9a9a9ff,\n  darkgreen: 0x006400ff,\n  darkgrey: 0xa9a9a9ff,\n  darkkhaki: 0xbdb76bff,\n  darkmagenta: 0x8b008bff,\n  darkolivegreen: 0x556b2fff,\n  darkorange: 0xff8c00ff,\n  darkorchid: 0x9932ccff,\n  darkred: 0x8b0000ff,\n  darksalmon: 0xe9967aff,\n  darkseagreen: 0x8fbc8fff,\n  darkslateblue: 0x483d8bff,\n  darkslategray: 0x2f4f4fff,\n  darkslategrey: 0x2f4f4fff,\n  darkturquoise: 0x00ced1ff,\n  darkviolet: 0x9400d3ff,\n  deeppink: 0xff1493ff,\n  deepskyblue: 0x00bfffff,\n  dimgray: 0x696969ff,\n  dimgrey: 0x696969ff,\n  dodgerblue: 0x1e90ffff,\n  firebrick: 0xb22222ff,\n  floralwhite: 0xfffaf0ff,\n  forestgreen: 0x228b22ff,\n  fuchsia: 0xff00ffff,\n  gainsboro: 0xdcdcdcff,\n  ghostwhite: 0xf8f8ffff,\n  gold: 0xffd700ff,\n  goldenrod: 0xdaa520ff,\n  gray: 0x808080ff,\n  green: 0x008000ff,\n  greenyellow: 0xadff2fff,\n  grey: 0x808080ff,\n  honeydew: 0xf0fff0ff,\n  hotpink: 0xff69b4ff,\n  indianred: 0xcd5c5cff,\n  indigo: 0x4b0082ff,\n  ivory: 0xfffff0ff,\n  khaki: 0xf0e68cff,\n  lavender: 0xe6e6faff,\n  lavenderblush: 0xfff0f5ff,\n  lawngreen: 0x7cfc00ff,\n  lemonchiffon: 0xfffacdff,\n  lightblue: 0xadd8e6ff,\n  lightcoral: 0xf08080ff,\n  lightcyan: 0xe0ffffff,\n  lightgoldenrodyellow: 0xfafad2ff,\n  lightgray: 0xd3d3d3ff,\n  lightgreen: 0x90ee90ff,\n  lightgrey: 0xd3d3d3ff,\n  lightpink: 0xffb6c1ff,\n  lightsalmon: 0xffa07aff,\n  lightseagreen: 0x20b2aaff,\n  lightskyblue: 0x87cefaff,\n  lightslategray: 0x778899ff,\n  lightslategrey: 0x778899ff,\n  lightsteelblue: 0xb0c4deff,\n  lightyellow: 0xffffe0ff,\n  lime: 0x00ff00ff,\n  limegreen: 0x32cd32ff,\n  linen: 0xfaf0e6ff,\n  magenta: 0xff00ffff,\n  maroon: 0x800000ff,\n  mediumaquamarine: 0x66cdaaff,\n  mediumblue: 0x0000cdff,\n  mediumorchid: 0xba55d3ff,\n  mediumpurple: 0x9370dbff,\n  mediumseagreen: 0x3cb371ff,\n  mediumslateblue: 0x7b68eeff,\n  mediumspringgreen: 0x00fa9aff,\n  mediumturquoise: 0x48d1ccff,\n  mediumvioletred: 0xc71585ff,\n  midnightblue: 0x191970ff,\n  mintcream: 0xf5fffaff,\n  mistyrose: 0xffe4e1ff,\n  moccasin: 0xffe4b5ff,\n  navajowhite: 0xffdeadff,\n  navy: 0x000080ff,\n  oldlace: 0xfdf5e6ff,\n  olive: 0x808000ff,\n  olivedrab: 0x6b8e23ff,\n  orange: 0xffa500ff,\n  orangered: 0xff4500ff,\n  orchid: 0xda70d6ff,\n  palegoldenrod: 0xeee8aaff,\n  palegreen: 0x98fb98ff,\n  paleturquoise: 0xafeeeeff,\n  palevioletred: 0xdb7093ff,\n  papayawhip: 0xffefd5ff,\n  peachpuff: 0xffdab9ff,\n  peru: 0xcd853fff,\n  pink: 0xffc0cbff,\n  plum: 0xdda0ddff,\n  powderblue: 0xb0e0e6ff,\n  purple: 0x800080ff,\n  rebeccapurple: 0x663399ff,\n  red: 0xff0000ff,\n  rosybrown: 0xbc8f8fff,\n  royalblue: 0x4169e1ff,\n  saddlebrown: 0x8b4513ff,\n  salmon: 0xfa8072ff,\n  sandybrown: 0xf4a460ff,\n  seagreen: 0x2e8b57ff,\n  seashell: 0xfff5eeff,\n  sienna: 0xa0522dff,\n  silver: 0xc0c0c0ff,\n  skyblue: 0x87ceebff,\n  slateblue: 0x6a5acdff,\n  slategray: 0x708090ff,\n  slategrey: 0x708090ff,\n  snow: 0xfffafaff,\n  springgreen: 0x00ff7fff,\n  steelblue: 0x4682b4ff,\n  tan: 0xd2b48cff,\n  teal: 0x008080ff,\n  thistle: 0xd8bfd8ff,\n  tomato: 0xff6347ff,\n  turquoise: 0x40e0d0ff,\n  violet: 0xee82eeff,\n  wheat: 0xf5deb3ff,\n  white: 0xffffffff,\n  whitesmoke: 0xf5f5f5ff,\n  yellow: 0xffff00ff,\n  yellowgreen: 0x9acd32ff\n};\n\nconst NUMBER = '[-+]?\\\\d*\\\\.?\\\\d+';\nconst PERCENTAGE = NUMBER + '%';\n\nfunction call(...parts) {\n  return '\\\\(\\\\s*(' + parts.join(')\\\\s*,\\\\s*(') + ')\\\\s*\\\\)';\n}\n\nconst rgb = new RegExp('rgb' + call(NUMBER, NUMBER, NUMBER));\nconst rgba = new RegExp('rgba' + call(NUMBER, NUMBER, NUMBER, NUMBER));\nconst hsl = new RegExp('hsl' + call(NUMBER, PERCENTAGE, PERCENTAGE));\nconst hsla = new RegExp('hsla' + call(NUMBER, PERCENTAGE, PERCENTAGE, NUMBER));\nconst hex3 = /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;\nconst hex4 = /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;\nconst hex6 = /^#([0-9a-fA-F]{6})$/;\nconst hex8 = /^#([0-9a-fA-F]{8})$/;\n\nfunction normalizeColor(color) {\n  let match;\n\n  if (typeof color === 'number') {\n    return color >>> 0 === color && color >= 0 && color <= 0xffffffff ? color : null;\n  }\n\n  if (match = hex6.exec(color)) return parseInt(match[1] + 'ff', 16) >>> 0;\n\n  if (colors$1 && colors$1[color] !== undefined) {\n    return colors$1[color];\n  }\n\n  if (match = rgb.exec(color)) {\n    return (parse255(match[1]) << 24 | parse255(match[2]) << 16 | parse255(match[3]) << 8 | 0x000000ff) >>> 0;\n  }\n\n  if (match = rgba.exec(color)) {\n    return (parse255(match[1]) << 24 | parse255(match[2]) << 16 | parse255(match[3]) << 8 | parse1(match[4])) >>> 0;\n  }\n\n  if (match = hex3.exec(color)) {\n    return parseInt(match[1] + match[1] + match[2] + match[2] + match[3] + match[3] + 'ff', 16) >>> 0;\n  }\n\n  if (match = hex8.exec(color)) return parseInt(match[1], 16) >>> 0;\n\n  if (match = hex4.exec(color)) {\n    return parseInt(match[1] + match[1] + match[2] + match[2] + match[3] + match[3] + match[4] + match[4], 16) >>> 0;\n  }\n\n  if (match = hsl.exec(color)) {\n    return (hslToRgb(parse360(match[1]), parsePercentage(match[2]), parsePercentage(match[3])) | 0x000000ff) >>> 0;\n  }\n\n  if (match = hsla.exec(color)) {\n    return (hslToRgb(parse360(match[1]), parsePercentage(match[2]), parsePercentage(match[3])) | parse1(match[4])) >>> 0;\n  }\n\n  return null;\n}\n\nfunction hue2rgb(p, q, t) {\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  if (t < 1 / 6) return p + (q - p) * 6 * t;\n  if (t < 1 / 2) return q;\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n  return p;\n}\n\nfunction hslToRgb(h, s, l) {\n  const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n  const p = 2 * l - q;\n  const r = hue2rgb(p, q, h + 1 / 3);\n  const g = hue2rgb(p, q, h);\n  const b = hue2rgb(p, q, h - 1 / 3);\n  return Math.round(r * 255) << 24 | Math.round(g * 255) << 16 | Math.round(b * 255) << 8;\n}\n\nfunction parse255(str) {\n  const int = parseInt(str, 10);\n  if (int < 0) return 0;\n  if (int > 255) return 255;\n  return int;\n}\n\nfunction parse360(str) {\n  const int = parseFloat(str);\n  return (int % 360 + 360) % 360 / 360;\n}\n\nfunction parse1(str) {\n  const num = parseFloat(str);\n  if (num < 0) return 0;\n  if (num > 1) return 255;\n  return Math.round(num * 255);\n}\n\nfunction parsePercentage(str) {\n  const int = parseFloat(str);\n  if (int < 0) return 0;\n  if (int > 100) return 1;\n  return int / 100;\n}\n\nfunction colorToRgba(input) {\n  let int32Color = normalizeColor(input);\n  if (int32Color === null) return input;\n  int32Color = int32Color || 0;\n  let r = (int32Color & 0xff000000) >>> 24;\n  let g = (int32Color & 0x00ff0000) >>> 16;\n  let b = (int32Color & 0x0000ff00) >>> 8;\n  let a = (int32Color & 0x000000ff) / 255;\n  return `rgba(${r}, ${g}, ${b}, ${a})`;\n}\n\nconst createInterpolator = (range, output, extrapolate) => {\n  if (is.fun(range)) {\n    return range;\n  }\n\n  if (is.arr(range)) {\n    return createInterpolator({\n      range,\n      output: output,\n      extrapolate\n    });\n  }\n\n  if (is.str(range.output[0])) {\n    return createStringInterpolator$1(range);\n  }\n\n  const config = range;\n  const outputRange = config.output;\n  const inputRange = config.range || [0, 1];\n  const extrapolateLeft = config.extrapolateLeft || config.extrapolate || 'extend';\n  const extrapolateRight = config.extrapolateRight || config.extrapolate || 'extend';\n\n  const easing = config.easing || (t => t);\n\n  return input => {\n    const range = findRange(input, inputRange);\n    return interpolate(input, inputRange[range], inputRange[range + 1], outputRange[range], outputRange[range + 1], easing, extrapolateLeft, extrapolateRight, config.map);\n  };\n};\n\nfunction interpolate(input, inputMin, inputMax, outputMin, outputMax, easing, extrapolateLeft, extrapolateRight, map) {\n  let result = map ? map(input) : input;\n\n  if (result < inputMin) {\n    if (extrapolateLeft === 'identity') return result;else if (extrapolateLeft === 'clamp') result = inputMin;\n  }\n\n  if (result > inputMax) {\n    if (extrapolateRight === 'identity') return result;else if (extrapolateRight === 'clamp') result = inputMax;\n  }\n\n  if (outputMin === outputMax) return outputMin;\n  if (inputMin === inputMax) return input <= inputMin ? outputMin : outputMax;\n  if (inputMin === -Infinity) result = -result;else if (inputMax === Infinity) result = result - inputMin;else result = (result - inputMin) / (inputMax - inputMin);\n  result = easing(result);\n  if (outputMin === -Infinity) result = -result;else if (outputMax === Infinity) result = result + outputMin;else result = result * (outputMax - outputMin) + outputMin;\n  return result;\n}\n\nfunction findRange(input, inputRange) {\n  for (var i = 1; i < inputRange.length - 1; ++i) if (inputRange[i] >= input) break;\n\n  return i - 1;\n}\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nconst $get = Symbol.for('FluidValue.get');\nconst $observers = Symbol.for('FluidValue.observers');\n\nconst hasFluidValue = arg => Boolean(arg && arg[$get]);\n\nconst getFluidValue = arg => arg && arg[$get] ? arg[$get]() : arg;\n\nconst getFluidObservers = target => target[$observers] || null;\n\nfunction callFluidObserver(observer, event) {\n  if (observer.eventObserved) {\n    observer.eventObserved(event);\n  } else {\n    observer(event);\n  }\n}\n\nfunction callFluidObservers(target, event) {\n  let observers = target[$observers];\n\n  if (observers) {\n    observers.forEach(observer => {\n      callFluidObserver(observer, event);\n    });\n  }\n}\n\nclass FluidValue {\n  constructor(get) {\n    this[$get] = void 0;\n    this[$observers] = void 0;\n\n    if (!get && !(get = this.get)) {\n      throw Error('Unknown getter');\n    }\n\n    setFluidGetter(this, get);\n  }\n\n}\n\nconst setFluidGetter = (target, get) => setHidden(target, $get, get);\n\nfunction addFluidObserver(target, observer) {\n  if (target[$get]) {\n    let observers = target[$observers];\n\n    if (!observers) {\n      setHidden(target, $observers, observers = new Set());\n    }\n\n    if (!observers.has(observer)) {\n      observers.add(observer);\n\n      if (target.observerAdded) {\n        target.observerAdded(observers.size, observer);\n      }\n    }\n  }\n\n  return observer;\n}\n\nfunction removeFluidObserver(target, observer) {\n  let observers = target[$observers];\n\n  if (observers && observers.has(observer)) {\n    const count = observers.size - 1;\n\n    if (count) {\n      observers.delete(observer);\n    } else {\n      target[$observers] = null;\n    }\n\n    if (target.observerRemoved) {\n      target.observerRemoved(count, observer);\n    }\n  }\n}\n\nconst setHidden = (target, key, value) => Object.defineProperty(target, key, {\n  value,\n  writable: true,\n  configurable: true\n});\n\nconst numberRegex = /[+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nconst colorRegex = /(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))/gi;\nconst unitRegex = new RegExp(`(${numberRegex.source})(%|[a-z]+)`, 'i');\nconst rgbaRegex = /rgba\\(([0-9\\.-]+), ([0-9\\.-]+), ([0-9\\.-]+), ([0-9\\.-]+)\\)/gi;\nconst cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\n\nconst variableToRgba = input => {\n  const [token, fallback] = parseCSSVariable(input);\n\n  if (!token || isSSR()) {\n    return input;\n  }\n\n  const value = window.getComputedStyle(document.documentElement).getPropertyValue(token);\n\n  if (value) {\n    return value.trim();\n  } else if (fallback && fallback.startsWith('--')) {\n    const _value = window.getComputedStyle(document.documentElement).getPropertyValue(fallback);\n\n    if (_value) {\n      return _value;\n    } else {\n      return input;\n    }\n  } else if (fallback && cssVariableRegex.test(fallback)) {\n    return variableToRgba(fallback);\n  } else if (fallback) {\n    return fallback;\n  }\n\n  return input;\n};\n\nconst parseCSSVariable = current => {\n  const match = cssVariableRegex.exec(current);\n  if (!match) return [,];\n  const [, token, fallback] = match;\n  return [token, fallback];\n};\n\nlet namedColorRegex;\n\nconst rgbaRound = (_, p1, p2, p3, p4) => `rgba(${Math.round(p1)}, ${Math.round(p2)}, ${Math.round(p3)}, ${p4})`;\n\nconst createStringInterpolator = config => {\n  if (!namedColorRegex) namedColorRegex = colors$1 ? new RegExp(`(${Object.keys(colors$1).join('|')})(?!\\\\w)`, 'g') : /^\\b$/;\n  const output = config.output.map(value => {\n    return getFluidValue(value).replace(cssVariableRegex, variableToRgba).replace(colorRegex, colorToRgba).replace(namedColorRegex, colorToRgba);\n  });\n  const keyframes = output.map(value => value.match(numberRegex).map(Number));\n  const outputRanges = keyframes[0].map((_, i) => keyframes.map(values => {\n    if (!(i in values)) {\n      throw Error('The arity of each \"output\" value must be equal');\n    }\n\n    return values[i];\n  }));\n  const interpolators = outputRanges.map(output => createInterpolator(_extends({}, config, {\n    output\n  })));\n  return input => {\n    var _output$find;\n\n    const missingUnit = !unitRegex.test(output[0]) && ((_output$find = output.find(value => unitRegex.test(value))) == null ? void 0 : _output$find.replace(numberRegex, ''));\n    let i = 0;\n    return output[0].replace(numberRegex, () => `${interpolators[i++](input)}${missingUnit || ''}`).replace(rgbaRegex, rgbaRound);\n  };\n};\n\nconst prefix = 'react-spring: ';\n\nconst once = fn => {\n  const func = fn;\n  let called = false;\n\n  if (typeof func != 'function') {\n    throw new TypeError(`${prefix}once requires a function parameter`);\n  }\n\n  return (...args) => {\n    if (!called) {\n      func(...args);\n      called = true;\n    }\n  };\n};\n\nconst warnInterpolate = once(console.warn);\nfunction deprecateInterpolate() {\n  warnInterpolate(`${prefix}The \"interpolate\" function is deprecated in v9 (use \"to\" instead)`);\n}\nconst warnDirectCall = once(console.warn);\nfunction deprecateDirectCall() {\n  warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use \".start\" instead), this will be removed in later 0.X.0 versions`);\n}\n\nfunction isAnimatedString(value) {\n  return is.str(value) && (value[0] == '#' || /\\d/.test(value) || !isSSR() && cssVariableRegex.test(value) || value in (colors$1 || {}));\n}\n\nconst useIsomorphicLayoutEffect = isSSR() ? useEffect : useLayoutEffect;\n\nconst useIsMounted = () => {\n  const isMounted = useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted;\n};\n\nfunction useForceUpdate() {\n  const update = useState()[1];\n  const isMounted = useIsMounted();\n  return () => {\n    if (isMounted.current) {\n      update(Math.random());\n    }\n  };\n}\n\nfunction useMemoOne(getResult, inputs) {\n  const [initial] = useState(() => ({\n    inputs,\n    result: getResult()\n  }));\n  const committed = useRef();\n  const prevCache = committed.current;\n  let cache = prevCache;\n\n  if (cache) {\n    const useCache = Boolean(inputs && cache.inputs && areInputsEqual(inputs, cache.inputs));\n\n    if (!useCache) {\n      cache = {\n        inputs,\n        result: getResult()\n      };\n    }\n  } else {\n    cache = initial;\n  }\n\n  useEffect(() => {\n    committed.current = cache;\n\n    if (prevCache == initial) {\n      initial.inputs = initial.result = undefined;\n    }\n  }, [cache]);\n  return cache.result;\n}\n\nfunction areInputsEqual(next, prev) {\n  if (next.length !== prev.length) {\n    return false;\n  }\n\n  for (let i = 0; i < next.length; i++) {\n    if (next[i] !== prev[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nconst useOnce = effect => useEffect(effect, emptyDeps);\nconst emptyDeps = [];\n\nfunction usePrev(value) {\n  const prevRef = useRef();\n  useEffect(() => {\n    prevRef.current = value;\n  });\n  return prevRef.current;\n}\n\nconst useReducedMotion = () => {\n  const [reducedMotion, setReducedMotion] = useState(null);\n  useIsomorphicLayoutEffect(() => {\n    const mql = window.matchMedia('(prefers-reduced-motion)');\n\n    const handleMediaChange = e => {\n      setReducedMotion(e.matches);\n      assign({\n        skipAnimation: e.matches\n      });\n    };\n\n    handleMediaChange(mql);\n    mql.addEventListener('change', handleMediaChange);\n    return () => {\n      mql.removeEventListener('change', handleMediaChange);\n    };\n  }, []);\n  return reducedMotion;\n};\n\nexport { FluidValue, globals as Globals, addFluidObserver, callFluidObserver, callFluidObservers, colorToRgba, colors, createInterpolator, createStringInterpolator, defineHidden, deprecateDirectCall, deprecateInterpolate, each, eachProp, flush, flushCalls, frameLoop, getFluidObservers, getFluidValue, hasFluidValue, hex3, hex4, hex6, hex8, hsl, hsla, is, isAnimatedString, isEqual, isSSR, noop, removeFluidObserver, rgb, rgba, setFluidGetter, toArray, useForceUpdate, useIsomorphicLayoutEffect, useMemoOne, useOnce, usePrev, useReducedMotion };\n","import { defineHidden, is, createInterpolator, eachProp, hasFluidValue, getFluidValue, each, isAnimatedString, useForceUpdate, useIsomorphicLayoutEffect, addFluidObserver, removeFluidObserver, raf, useOnce } from '@react-spring/shared';\nimport * as React from 'react';\nimport { forwardRef, useRef, useCallback, useEffect } from 'react';\n\nconst $node = Symbol.for('Animated:node');\nconst isAnimated = value => !!value && value[$node] === value;\nconst getAnimated = owner => owner && owner[$node];\nconst setAnimated = (owner, node) => defineHidden(owner, $node, node);\nconst getPayload = owner => owner && owner[$node] && owner[$node].getPayload();\nclass Animated {\n  constructor() {\n    this.payload = void 0;\n    setAnimated(this, this);\n  }\n\n  getPayload() {\n    return this.payload || [];\n  }\n\n}\n\nclass AnimatedValue extends Animated {\n  constructor(_value) {\n    super();\n    this.done = true;\n    this.elapsedTime = void 0;\n    this.lastPosition = void 0;\n    this.lastVelocity = void 0;\n    this.v0 = void 0;\n    this.durationProgress = 0;\n    this._value = _value;\n\n    if (is.num(this._value)) {\n      this.lastPosition = this._value;\n    }\n  }\n\n  static create(value) {\n    return new AnimatedValue(value);\n  }\n\n  getPayload() {\n    return [this];\n  }\n\n  getValue() {\n    return this._value;\n  }\n\n  setValue(value, step) {\n    if (is.num(value)) {\n      this.lastPosition = value;\n\n      if (step) {\n        value = Math.round(value / step) * step;\n\n        if (this.done) {\n          this.lastPosition = value;\n        }\n      }\n    }\n\n    if (this._value === value) {\n      return false;\n    }\n\n    this._value = value;\n    return true;\n  }\n\n  reset() {\n    const {\n      done\n    } = this;\n    this.done = false;\n\n    if (is.num(this._value)) {\n      this.elapsedTime = 0;\n      this.durationProgress = 0;\n      this.lastPosition = this._value;\n      if (done) this.lastVelocity = null;\n      this.v0 = null;\n    }\n  }\n\n}\n\nclass AnimatedString extends AnimatedValue {\n  constructor(value) {\n    super(0);\n    this._string = null;\n    this._toString = void 0;\n    this._toString = createInterpolator({\n      output: [value, value]\n    });\n  }\n\n  static create(value) {\n    return new AnimatedString(value);\n  }\n\n  getValue() {\n    let value = this._string;\n    return value == null ? this._string = this._toString(this._value) : value;\n  }\n\n  setValue(value) {\n    if (is.str(value)) {\n      if (value == this._string) {\n        return false;\n      }\n\n      this._string = value;\n      this._value = 1;\n    } else if (super.setValue(value)) {\n      this._string = null;\n    } else {\n      return false;\n    }\n\n    return true;\n  }\n\n  reset(goal) {\n    if (goal) {\n      this._toString = createInterpolator({\n        output: [this.getValue(), goal]\n      });\n    }\n\n    this._value = 0;\n    super.reset();\n  }\n\n}\n\nconst TreeContext = {\n  dependencies: null\n};\n\nclass AnimatedObject extends Animated {\n  constructor(source) {\n    super();\n    this.source = source;\n    this.setValue(source);\n  }\n\n  getValue(animated) {\n    const values = {};\n    eachProp(this.source, (source, key) => {\n      if (isAnimated(source)) {\n        values[key] = source.getValue(animated);\n      } else if (hasFluidValue(source)) {\n        values[key] = getFluidValue(source);\n      } else if (!animated) {\n        values[key] = source;\n      }\n    });\n    return values;\n  }\n\n  setValue(source) {\n    this.source = source;\n    this.payload = this._makePayload(source);\n  }\n\n  reset() {\n    if (this.payload) {\n      each(this.payload, node => node.reset());\n    }\n  }\n\n  _makePayload(source) {\n    if (source) {\n      const payload = new Set();\n      eachProp(source, this._addToPayload, payload);\n      return Array.from(payload);\n    }\n  }\n\n  _addToPayload(source) {\n    if (TreeContext.dependencies && hasFluidValue(source)) {\n      TreeContext.dependencies.add(source);\n    }\n\n    const payload = getPayload(source);\n\n    if (payload) {\n      each(payload, node => this.add(node));\n    }\n  }\n\n}\n\nclass AnimatedArray extends AnimatedObject {\n  constructor(source) {\n    super(source);\n  }\n\n  static create(source) {\n    return new AnimatedArray(source);\n  }\n\n  getValue() {\n    return this.source.map(node => node.getValue());\n  }\n\n  setValue(source) {\n    const payload = this.getPayload();\n\n    if (source.length == payload.length) {\n      return payload.map((node, i) => node.setValue(source[i])).some(Boolean);\n    }\n\n    super.setValue(source.map(makeAnimated));\n    return true;\n  }\n\n}\n\nfunction makeAnimated(value) {\n  const nodeType = isAnimatedString(value) ? AnimatedString : AnimatedValue;\n  return nodeType.create(value);\n}\n\nfunction getAnimatedType(value) {\n  const parentNode = getAnimated(value);\n  return parentNode ? parentNode.constructor : is.arr(value) ? AnimatedArray : isAnimatedString(value) ? AnimatedString : AnimatedValue;\n}\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nconst withAnimated = (Component, host) => {\n  const hasInstance = !is.fun(Component) || Component.prototype && Component.prototype.isReactComponent;\n  return forwardRef((givenProps, givenRef) => {\n    const instanceRef = useRef(null);\n    const ref = hasInstance && useCallback(value => {\n      instanceRef.current = updateRef(givenRef, value);\n    }, [givenRef]);\n    const [props, deps] = getAnimatedState(givenProps, host);\n    const forceUpdate = useForceUpdate();\n\n    const callback = () => {\n      const instance = instanceRef.current;\n\n      if (hasInstance && !instance) {\n        return;\n      }\n\n      const didUpdate = instance ? host.applyAnimatedValues(instance, props.getValue(true)) : false;\n\n      if (didUpdate === false) {\n        forceUpdate();\n      }\n    };\n\n    const observer = new PropsObserver(callback, deps);\n    const observerRef = useRef();\n    useIsomorphicLayoutEffect(() => {\n      observerRef.current = observer;\n      each(deps, dep => addFluidObserver(dep, observer));\n      return () => {\n        if (observerRef.current) {\n          each(observerRef.current.deps, dep => removeFluidObserver(dep, observerRef.current));\n          raf.cancel(observerRef.current.update);\n        }\n      };\n    });\n    useEffect(callback, []);\n    useOnce(() => () => {\n      const observer = observerRef.current;\n      each(observer.deps, dep => removeFluidObserver(dep, observer));\n    });\n    const usedProps = host.getComponentProps(props.getValue());\n    return React.createElement(Component, _extends({}, usedProps, {\n      ref: ref\n    }));\n  });\n};\n\nclass PropsObserver {\n  constructor(update, deps) {\n    this.update = update;\n    this.deps = deps;\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      raf.write(this.update);\n    }\n  }\n\n}\n\nfunction getAnimatedState(props, host) {\n  const dependencies = new Set();\n  TreeContext.dependencies = dependencies;\n  if (props.style) props = _extends({}, props, {\n    style: host.createAnimatedStyle(props.style)\n  });\n  props = new AnimatedObject(props);\n  TreeContext.dependencies = null;\n  return [props, dependencies];\n}\n\nfunction updateRef(ref, value) {\n  if (ref) {\n    if (is.fun(ref)) ref(value);else ref.current = value;\n  }\n\n  return value;\n}\n\nconst cacheKey = Symbol.for('AnimatedComponent');\nconst createHost = (components, {\n  applyAnimatedValues: _applyAnimatedValues = () => false,\n  createAnimatedStyle: _createAnimatedStyle = style => new AnimatedObject(style),\n  getComponentProps: _getComponentProps = props => props\n} = {}) => {\n  const hostConfig = {\n    applyAnimatedValues: _applyAnimatedValues,\n    createAnimatedStyle: _createAnimatedStyle,\n    getComponentProps: _getComponentProps\n  };\n\n  const animated = Component => {\n    const displayName = getDisplayName(Component) || 'Anonymous';\n\n    if (is.str(Component)) {\n      Component = animated[Component] || (animated[Component] = withAnimated(Component, hostConfig));\n    } else {\n      Component = Component[cacheKey] || (Component[cacheKey] = withAnimated(Component, hostConfig));\n    }\n\n    Component.displayName = `Animated(${displayName})`;\n    return Component;\n  };\n\n  eachProp(components, (Component, key) => {\n    if (is.arr(components)) {\n      key = getDisplayName(Component);\n    }\n\n    animated[key] = animated(Component);\n  });\n  return {\n    animated\n  };\n};\n\nconst getDisplayName = arg => is.str(arg) ? arg : arg && is.str(arg.displayName) ? arg.displayName : is.fun(arg) && arg.name || null;\n\nexport { Animated, AnimatedArray, AnimatedObject, AnimatedString, AnimatedValue, createHost, getAnimated, getAnimatedType, getPayload, isAnimated, setAnimated };\n","import { eachProp, is, toArray, getFluidValue, isAnimatedString, Globals, useIsomorphicLayoutEffect, each, raf, flush, FluidValue, deprecateInterpolate, callFluidObservers, frameLoop, hasFluidValue, flushCalls, isEqual, getFluidObservers, addFluidObserver, removeFluidObserver, noop, useMemoOne, deprecateDirectCall, useForceUpdate, usePrev, useOnce, createInterpolator, createStringInterpolator } from '@react-spring/shared';\nexport { Globals, createInterpolator, useIsomorphicLayoutEffect, useReducedMotion } from '@react-spring/shared';\nimport * as React from 'react';\nimport { useContext, useMemo, useRef, useState } from 'react';\nimport { getAnimated, AnimatedValue, getPayload, AnimatedString, getAnimatedType, setAnimated } from '@react-spring/animated';\nexport * from '@react-spring/types/animated';\nexport * from '@react-spring/types/interpolation';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction callProp(value, ...args) {\n  return is.fun(value) ? value(...args) : value;\n}\nconst matchProp = (value, key) => value === true || !!(key && value && (is.fun(value) ? value(key) : toArray(value).includes(key)));\nconst resolveProp = (prop, key) => is.obj(prop) ? key && prop[key] : prop;\nconst getDefaultProp = (props, key) => props.default === true ? props[key] : props.default ? props.default[key] : undefined;\n\nconst noopTransform = value => value;\n\nconst getDefaultProps = (props, transform = noopTransform) => {\n  let keys = DEFAULT_PROPS;\n\n  if (props.default && props.default !== true) {\n    props = props.default;\n    keys = Object.keys(props);\n  }\n\n  const defaults = {};\n\n  for (const key of keys) {\n    const value = transform(props[key], key);\n\n    if (!is.und(value)) {\n      defaults[key] = value;\n    }\n  }\n\n  return defaults;\n};\nconst DEFAULT_PROPS = ['config', 'onProps', 'onStart', 'onChange', 'onPause', 'onResume', 'onRest'];\nconst RESERVED_PROPS = {\n  config: 1,\n  from: 1,\n  to: 1,\n  ref: 1,\n  loop: 1,\n  reset: 1,\n  pause: 1,\n  cancel: 1,\n  reverse: 1,\n  immediate: 1,\n  default: 1,\n  delay: 1,\n  onProps: 1,\n  onStart: 1,\n  onChange: 1,\n  onPause: 1,\n  onResume: 1,\n  onRest: 1,\n  onResolve: 1,\n  items: 1,\n  trail: 1,\n  sort: 1,\n  expires: 1,\n  initial: 1,\n  enter: 1,\n  update: 1,\n  leave: 1,\n  children: 1,\n  onDestroyed: 1,\n  keys: 1,\n  callId: 1,\n  parentId: 1\n};\n\nfunction getForwardProps(props) {\n  const forward = {};\n  let count = 0;\n  eachProp(props, (value, prop) => {\n    if (!RESERVED_PROPS[prop]) {\n      forward[prop] = value;\n      count++;\n    }\n  });\n\n  if (count) {\n    return forward;\n  }\n}\n\nfunction inferTo(props) {\n  const to = getForwardProps(props);\n\n  if (to) {\n    const out = {\n      to\n    };\n    eachProp(props, (val, key) => key in to || (out[key] = val));\n    return out;\n  }\n\n  return _extends({}, props);\n}\nfunction computeGoal(value) {\n  value = getFluidValue(value);\n  return is.arr(value) ? value.map(computeGoal) : isAnimatedString(value) ? Globals.createStringInterpolator({\n    range: [0, 1],\n    output: [value, value]\n  })(1) : value;\n}\nfunction hasProps(props) {\n  for (const _ in props) return true;\n\n  return false;\n}\nfunction isAsyncTo(to) {\n  return is.fun(to) || is.arr(to) && is.obj(to[0]);\n}\nfunction detachRefs(ctrl, ref) {\n  var _ctrl$ref;\n\n  (_ctrl$ref = ctrl.ref) == null ? void 0 : _ctrl$ref.delete(ctrl);\n  ref == null ? void 0 : ref.delete(ctrl);\n}\nfunction replaceRef(ctrl, ref) {\n  if (ref && ctrl.ref !== ref) {\n    var _ctrl$ref2;\n\n    (_ctrl$ref2 = ctrl.ref) == null ? void 0 : _ctrl$ref2.delete(ctrl);\n    ref.add(ctrl);\n    ctrl.ref = ref;\n  }\n}\n\nfunction useChain(refs, timeSteps, timeFrame = 1000) {\n  useIsomorphicLayoutEffect(() => {\n    if (timeSteps) {\n      let prevDelay = 0;\n      each(refs, (ref, i) => {\n        const controllers = ref.current;\n\n        if (controllers.length) {\n          let delay = timeFrame * timeSteps[i];\n          if (isNaN(delay)) delay = prevDelay;else prevDelay = delay;\n          each(controllers, ctrl => {\n            each(ctrl.queue, props => {\n              const memoizedDelayProp = props.delay;\n\n              props.delay = key => delay + callProp(memoizedDelayProp || 0, key);\n            });\n          });\n          ref.start();\n        }\n      });\n    } else {\n      let p = Promise.resolve();\n      each(refs, ref => {\n        const controllers = ref.current;\n\n        if (controllers.length) {\n          const queues = controllers.map(ctrl => {\n            const q = ctrl.queue;\n            ctrl.queue = [];\n            return q;\n          });\n          p = p.then(() => {\n            each(controllers, (ctrl, i) => each(queues[i] || [], update => ctrl.queue.push(update)));\n            return Promise.all(ref.start());\n          });\n        }\n      });\n    }\n  });\n}\n\nconst config = {\n  default: {\n    tension: 170,\n    friction: 26\n  },\n  gentle: {\n    tension: 120,\n    friction: 14\n  },\n  wobbly: {\n    tension: 180,\n    friction: 12\n  },\n  stiff: {\n    tension: 210,\n    friction: 20\n  },\n  slow: {\n    tension: 280,\n    friction: 60\n  },\n  molasses: {\n    tension: 280,\n    friction: 120\n  }\n};\nconst c1 = 1.70158;\nconst c2 = c1 * 1.525;\nconst c3 = c1 + 1;\nconst c4 = 2 * Math.PI / 3;\nconst c5 = 2 * Math.PI / 4.5;\n\nconst bounceOut = x => {\n  const n1 = 7.5625;\n  const d1 = 2.75;\n\n  if (x < 1 / d1) {\n    return n1 * x * x;\n  } else if (x < 2 / d1) {\n    return n1 * (x -= 1.5 / d1) * x + 0.75;\n  } else if (x < 2.5 / d1) {\n    return n1 * (x -= 2.25 / d1) * x + 0.9375;\n  } else {\n    return n1 * (x -= 2.625 / d1) * x + 0.984375;\n  }\n};\n\nconst easings = {\n  linear: x => x,\n  easeInQuad: x => x * x,\n  easeOutQuad: x => 1 - (1 - x) * (1 - x),\n  easeInOutQuad: x => x < 0.5 ? 2 * x * x : 1 - Math.pow(-2 * x + 2, 2) / 2,\n  easeInCubic: x => x * x * x,\n  easeOutCubic: x => 1 - Math.pow(1 - x, 3),\n  easeInOutCubic: x => x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2,\n  easeInQuart: x => x * x * x * x,\n  easeOutQuart: x => 1 - Math.pow(1 - x, 4),\n  easeInOutQuart: x => x < 0.5 ? 8 * x * x * x * x : 1 - Math.pow(-2 * x + 2, 4) / 2,\n  easeInQuint: x => x * x * x * x * x,\n  easeOutQuint: x => 1 - Math.pow(1 - x, 5),\n  easeInOutQuint: x => x < 0.5 ? 16 * x * x * x * x * x : 1 - Math.pow(-2 * x + 2, 5) / 2,\n  easeInSine: x => 1 - Math.cos(x * Math.PI / 2),\n  easeOutSine: x => Math.sin(x * Math.PI / 2),\n  easeInOutSine: x => -(Math.cos(Math.PI * x) - 1) / 2,\n  easeInExpo: x => x === 0 ? 0 : Math.pow(2, 10 * x - 10),\n  easeOutExpo: x => x === 1 ? 1 : 1 - Math.pow(2, -10 * x),\n  easeInOutExpo: x => x === 0 ? 0 : x === 1 ? 1 : x < 0.5 ? Math.pow(2, 20 * x - 10) / 2 : (2 - Math.pow(2, -20 * x + 10)) / 2,\n  easeInCirc: x => 1 - Math.sqrt(1 - Math.pow(x, 2)),\n  easeOutCirc: x => Math.sqrt(1 - Math.pow(x - 1, 2)),\n  easeInOutCirc: x => x < 0.5 ? (1 - Math.sqrt(1 - Math.pow(2 * x, 2))) / 2 : (Math.sqrt(1 - Math.pow(-2 * x + 2, 2)) + 1) / 2,\n  easeInBack: x => c3 * x * x * x - c1 * x * x,\n  easeOutBack: x => 1 + c3 * Math.pow(x - 1, 3) + c1 * Math.pow(x - 1, 2),\n  easeInOutBack: x => x < 0.5 ? Math.pow(2 * x, 2) * ((c2 + 1) * 2 * x - c2) / 2 : (Math.pow(2 * x - 2, 2) * ((c2 + 1) * (x * 2 - 2) + c2) + 2) / 2,\n  easeInElastic: x => x === 0 ? 0 : x === 1 ? 1 : -Math.pow(2, 10 * x - 10) * Math.sin((x * 10 - 10.75) * c4),\n  easeOutElastic: x => x === 0 ? 0 : x === 1 ? 1 : Math.pow(2, -10 * x) * Math.sin((x * 10 - 0.75) * c4) + 1,\n  easeInOutElastic: x => x === 0 ? 0 : x === 1 ? 1 : x < 0.5 ? -(Math.pow(2, 20 * x - 10) * Math.sin((20 * x - 11.125) * c5)) / 2 : Math.pow(2, -20 * x + 10) * Math.sin((20 * x - 11.125) * c5) / 2 + 1,\n  easeInBounce: x => 1 - bounceOut(1 - x),\n  easeOutBounce: bounceOut,\n  easeInOutBounce: x => x < 0.5 ? (1 - bounceOut(1 - 2 * x)) / 2 : (1 + bounceOut(2 * x - 1)) / 2\n};\n\nconst defaults = _extends({}, config.default, {\n  mass: 1,\n  damping: 1,\n  easing: easings.linear,\n  clamp: false\n});\n\nclass AnimationConfig {\n  constructor() {\n    this.tension = void 0;\n    this.friction = void 0;\n    this.frequency = void 0;\n    this.damping = void 0;\n    this.mass = void 0;\n    this.velocity = 0;\n    this.restVelocity = void 0;\n    this.precision = void 0;\n    this.progress = void 0;\n    this.duration = void 0;\n    this.easing = void 0;\n    this.clamp = void 0;\n    this.bounce = void 0;\n    this.decay = void 0;\n    this.round = void 0;\n    Object.assign(this, defaults);\n  }\n\n}\nfunction mergeConfig(config, newConfig, defaultConfig) {\n  if (defaultConfig) {\n    defaultConfig = _extends({}, defaultConfig);\n    sanitizeConfig(defaultConfig, newConfig);\n    newConfig = _extends({}, defaultConfig, newConfig);\n  }\n\n  sanitizeConfig(config, newConfig);\n  Object.assign(config, newConfig);\n\n  for (const key in defaults) {\n    if (config[key] == null) {\n      config[key] = defaults[key];\n    }\n  }\n\n  let {\n    mass,\n    frequency,\n    damping\n  } = config;\n\n  if (!is.und(frequency)) {\n    if (frequency < 0.01) frequency = 0.01;\n    if (damping < 0) damping = 0;\n    config.tension = Math.pow(2 * Math.PI / frequency, 2) * mass;\n    config.friction = 4 * Math.PI * damping * mass / frequency;\n  }\n\n  return config;\n}\n\nfunction sanitizeConfig(config, props) {\n  if (!is.und(props.decay)) {\n    config.duration = undefined;\n  } else {\n    const isTensionConfig = !is.und(props.tension) || !is.und(props.friction);\n\n    if (isTensionConfig || !is.und(props.frequency) || !is.und(props.damping) || !is.und(props.mass)) {\n      config.duration = undefined;\n      config.decay = undefined;\n    }\n\n    if (isTensionConfig) {\n      config.frequency = undefined;\n    }\n  }\n}\n\nconst emptyArray = [];\nclass Animation {\n  constructor() {\n    this.changed = false;\n    this.values = emptyArray;\n    this.toValues = null;\n    this.fromValues = emptyArray;\n    this.to = void 0;\n    this.from = void 0;\n    this.config = new AnimationConfig();\n    this.immediate = false;\n  }\n\n}\n\nfunction scheduleProps(callId, {\n  key,\n  props,\n  defaultProps,\n  state,\n  actions\n}) {\n  return new Promise((resolve, reject) => {\n    var _props$cancel;\n\n    let delay;\n    let timeout;\n    let cancel = matchProp((_props$cancel = props.cancel) != null ? _props$cancel : defaultProps == null ? void 0 : defaultProps.cancel, key);\n\n    if (cancel) {\n      onStart();\n    } else {\n      if (!is.und(props.pause)) {\n        state.paused = matchProp(props.pause, key);\n      }\n\n      let pause = defaultProps == null ? void 0 : defaultProps.pause;\n\n      if (pause !== true) {\n        pause = state.paused || matchProp(pause, key);\n      }\n\n      delay = callProp(props.delay || 0, key);\n\n      if (pause) {\n        state.resumeQueue.add(onResume);\n        actions.pause();\n      } else {\n        actions.resume();\n        onResume();\n      }\n    }\n\n    function onPause() {\n      state.resumeQueue.add(onResume);\n      state.timeouts.delete(timeout);\n      timeout.cancel();\n      delay = timeout.time - raf.now();\n    }\n\n    function onResume() {\n      if (delay > 0 && !Globals.skipAnimation) {\n        state.delayed = true;\n        timeout = raf.setTimeout(onStart, delay);\n        state.pauseQueue.add(onPause);\n        state.timeouts.add(timeout);\n      } else {\n        onStart();\n      }\n    }\n\n    function onStart() {\n      if (state.delayed) {\n        state.delayed = false;\n      }\n\n      state.pauseQueue.delete(onPause);\n      state.timeouts.delete(timeout);\n\n      if (callId <= (state.cancelId || 0)) {\n        cancel = true;\n      }\n\n      try {\n        actions.start(_extends({}, props, {\n          callId,\n          cancel\n        }), resolve);\n      } catch (err) {\n        reject(err);\n      }\n    }\n  });\n}\n\nconst getCombinedResult = (target, results) => results.length == 1 ? results[0] : results.some(result => result.cancelled) ? getCancelledResult(target.get()) : results.every(result => result.noop) ? getNoopResult(target.get()) : getFinishedResult(target.get(), results.every(result => result.finished));\nconst getNoopResult = value => ({\n  value,\n  noop: true,\n  finished: true,\n  cancelled: false\n});\nconst getFinishedResult = (value, finished, cancelled = false) => ({\n  value,\n  finished,\n  cancelled\n});\nconst getCancelledResult = value => ({\n  value,\n  cancelled: true,\n  finished: false\n});\n\nfunction runAsync(to, props, state, target) {\n  const {\n    callId,\n    parentId,\n    onRest\n  } = props;\n  const {\n    asyncTo: prevTo,\n    promise: prevPromise\n  } = state;\n\n  if (!parentId && to === prevTo && !props.reset) {\n    return prevPromise;\n  }\n\n  return state.promise = (async () => {\n    state.asyncId = callId;\n    state.asyncTo = to;\n    const defaultProps = getDefaultProps(props, (value, key) => key === 'onRest' ? undefined : value);\n    let preventBail;\n    let bail;\n    const bailPromise = new Promise((resolve, reject) => (preventBail = resolve, bail = reject));\n\n    const bailIfEnded = bailSignal => {\n      const bailResult = callId <= (state.cancelId || 0) && getCancelledResult(target) || callId !== state.asyncId && getFinishedResult(target, false);\n\n      if (bailResult) {\n        bailSignal.result = bailResult;\n        bail(bailSignal);\n        throw bailSignal;\n      }\n    };\n\n    const animate = (arg1, arg2) => {\n      const bailSignal = new BailSignal();\n      const skipAnimationSignal = new SkipAniamtionSignal();\n      return (async () => {\n        if (Globals.skipAnimation) {\n          stopAsync(state);\n          skipAnimationSignal.result = getFinishedResult(target, false);\n          bail(skipAnimationSignal);\n          throw skipAnimationSignal;\n        }\n\n        bailIfEnded(bailSignal);\n        const props = is.obj(arg1) ? _extends({}, arg1) : _extends({}, arg2, {\n          to: arg1\n        });\n        props.parentId = callId;\n        eachProp(defaultProps, (value, key) => {\n          if (is.und(props[key])) {\n            props[key] = value;\n          }\n        });\n        const result = await target.start(props);\n        bailIfEnded(bailSignal);\n\n        if (state.paused) {\n          await new Promise(resume => {\n            state.resumeQueue.add(resume);\n          });\n        }\n\n        return result;\n      })();\n    };\n\n    let result;\n\n    if (Globals.skipAnimation) {\n      stopAsync(state);\n      return getFinishedResult(target, false);\n    }\n\n    try {\n      let animating;\n\n      if (is.arr(to)) {\n        animating = (async queue => {\n          for (const props of queue) {\n            await animate(props);\n          }\n        })(to);\n      } else {\n        animating = Promise.resolve(to(animate, target.stop.bind(target)));\n      }\n\n      await Promise.all([animating.then(preventBail), bailPromise]);\n      result = getFinishedResult(target.get(), true, false);\n    } catch (err) {\n      if (err instanceof BailSignal) {\n        result = err.result;\n      } else if (err instanceof SkipAniamtionSignal) {\n        result = err.result;\n      } else {\n        throw err;\n      }\n    } finally {\n      if (callId == state.asyncId) {\n        state.asyncId = parentId;\n        state.asyncTo = parentId ? prevTo : undefined;\n        state.promise = parentId ? prevPromise : undefined;\n      }\n    }\n\n    if (is.fun(onRest)) {\n      raf.batchedUpdates(() => {\n        onRest(result, target, target.item);\n      });\n    }\n\n    return result;\n  })();\n}\nfunction stopAsync(state, cancelId) {\n  flush(state.timeouts, t => t.cancel());\n  state.pauseQueue.clear();\n  state.resumeQueue.clear();\n  state.asyncId = state.asyncTo = state.promise = undefined;\n  if (cancelId) state.cancelId = cancelId;\n}\nclass BailSignal extends Error {\n  constructor() {\n    super('An async animation has been interrupted. You see this error because you ' + 'forgot to use `await` or `.catch(...)` on its returned promise.');\n    this.result = void 0;\n  }\n\n}\nclass SkipAniamtionSignal extends Error {\n  constructor() {\n    super('SkipAnimationSignal');\n    this.result = void 0;\n  }\n\n}\n\nconst isFrameValue = value => value instanceof FrameValue;\nlet nextId$1 = 1;\nclass FrameValue extends FluidValue {\n  constructor(...args) {\n    super(...args);\n    this.id = nextId$1++;\n    this.key = void 0;\n    this._priority = 0;\n  }\n\n  get priority() {\n    return this._priority;\n  }\n\n  set priority(priority) {\n    if (this._priority != priority) {\n      this._priority = priority;\n\n      this._onPriorityChange(priority);\n    }\n  }\n\n  get() {\n    const node = getAnimated(this);\n    return node && node.getValue();\n  }\n\n  to(...args) {\n    return Globals.to(this, args);\n  }\n\n  interpolate(...args) {\n    deprecateInterpolate();\n    return Globals.to(this, args);\n  }\n\n  toJSON() {\n    return this.get();\n  }\n\n  observerAdded(count) {\n    if (count == 1) this._attach();\n  }\n\n  observerRemoved(count) {\n    if (count == 0) this._detach();\n  }\n\n  _attach() {}\n\n  _detach() {}\n\n  _onChange(value, idle = false) {\n    callFluidObservers(this, {\n      type: 'change',\n      parent: this,\n      value,\n      idle\n    });\n  }\n\n  _onPriorityChange(priority) {\n    if (!this.idle) {\n      frameLoop.sort(this);\n    }\n\n    callFluidObservers(this, {\n      type: 'priority',\n      parent: this,\n      priority\n    });\n  }\n\n}\n\nconst $P = Symbol.for('SpringPhase');\nconst HAS_ANIMATED = 1;\nconst IS_ANIMATING = 2;\nconst IS_PAUSED = 4;\nconst hasAnimated = target => (target[$P] & HAS_ANIMATED) > 0;\nconst isAnimating = target => (target[$P] & IS_ANIMATING) > 0;\nconst isPaused = target => (target[$P] & IS_PAUSED) > 0;\nconst setActiveBit = (target, active) => active ? target[$P] |= IS_ANIMATING | HAS_ANIMATED : target[$P] &= ~IS_ANIMATING;\nconst setPausedBit = (target, paused) => paused ? target[$P] |= IS_PAUSED : target[$P] &= ~IS_PAUSED;\n\nclass SpringValue extends FrameValue {\n  constructor(arg1, arg2) {\n    super();\n    this.key = void 0;\n    this.animation = new Animation();\n    this.queue = void 0;\n    this.defaultProps = {};\n    this._state = {\n      paused: false,\n      delayed: false,\n      pauseQueue: new Set(),\n      resumeQueue: new Set(),\n      timeouts: new Set()\n    };\n    this._pendingCalls = new Set();\n    this._lastCallId = 0;\n    this._lastToId = 0;\n    this._memoizedDuration = 0;\n\n    if (!is.und(arg1) || !is.und(arg2)) {\n      const props = is.obj(arg1) ? _extends({}, arg1) : _extends({}, arg2, {\n        from: arg1\n      });\n\n      if (is.und(props.default)) {\n        props.default = true;\n      }\n\n      this.start(props);\n    }\n  }\n\n  get idle() {\n    return !(isAnimating(this) || this._state.asyncTo) || isPaused(this);\n  }\n\n  get goal() {\n    return getFluidValue(this.animation.to);\n  }\n\n  get velocity() {\n    const node = getAnimated(this);\n    return node instanceof AnimatedValue ? node.lastVelocity || 0 : node.getPayload().map(node => node.lastVelocity || 0);\n  }\n\n  get hasAnimated() {\n    return hasAnimated(this);\n  }\n\n  get isAnimating() {\n    return isAnimating(this);\n  }\n\n  get isPaused() {\n    return isPaused(this);\n  }\n\n  get isDelayed() {\n    return this._state.delayed;\n  }\n\n  advance(dt) {\n    let idle = true;\n    let changed = false;\n    const anim = this.animation;\n    let {\n      config,\n      toValues\n    } = anim;\n    const payload = getPayload(anim.to);\n\n    if (!payload && hasFluidValue(anim.to)) {\n      toValues = toArray(getFluidValue(anim.to));\n    }\n\n    anim.values.forEach((node, i) => {\n      if (node.done) return;\n      const to = node.constructor == AnimatedString ? 1 : payload ? payload[i].lastPosition : toValues[i];\n      let finished = anim.immediate;\n      let position = to;\n\n      if (!finished) {\n        position = node.lastPosition;\n\n        if (config.tension <= 0) {\n          node.done = true;\n          return;\n        }\n\n        let elapsed = node.elapsedTime += dt;\n        const from = anim.fromValues[i];\n        const v0 = node.v0 != null ? node.v0 : node.v0 = is.arr(config.velocity) ? config.velocity[i] : config.velocity;\n        let velocity;\n        const precision = config.precision || (from == to ? 0.005 : Math.min(1, Math.abs(to - from) * 0.001));\n\n        if (!is.und(config.duration)) {\n          let p = 1;\n\n          if (config.duration > 0) {\n            if (this._memoizedDuration !== config.duration) {\n              this._memoizedDuration = config.duration;\n\n              if (node.durationProgress > 0) {\n                node.elapsedTime = config.duration * node.durationProgress;\n                elapsed = node.elapsedTime += dt;\n              }\n            }\n\n            p = (config.progress || 0) + elapsed / this._memoizedDuration;\n            p = p > 1 ? 1 : p < 0 ? 0 : p;\n            node.durationProgress = p;\n          }\n\n          position = from + config.easing(p) * (to - from);\n          velocity = (position - node.lastPosition) / dt;\n          finished = p == 1;\n        } else if (config.decay) {\n          const decay = config.decay === true ? 0.998 : config.decay;\n          const e = Math.exp(-(1 - decay) * elapsed);\n          position = from + v0 / (1 - decay) * (1 - e);\n          finished = Math.abs(node.lastPosition - position) <= precision;\n          velocity = v0 * e;\n        } else {\n          velocity = node.lastVelocity == null ? v0 : node.lastVelocity;\n          const restVelocity = config.restVelocity || precision / 10;\n          const bounceFactor = config.clamp ? 0 : config.bounce;\n          const canBounce = !is.und(bounceFactor);\n          const isGrowing = from == to ? node.v0 > 0 : from < to;\n          let isMoving;\n          let isBouncing = false;\n          const step = 1;\n          const numSteps = Math.ceil(dt / step);\n\n          for (let n = 0; n < numSteps; ++n) {\n            isMoving = Math.abs(velocity) > restVelocity;\n\n            if (!isMoving) {\n              finished = Math.abs(to - position) <= precision;\n\n              if (finished) {\n                break;\n              }\n            }\n\n            if (canBounce) {\n              isBouncing = position == to || position > to == isGrowing;\n\n              if (isBouncing) {\n                velocity = -velocity * bounceFactor;\n                position = to;\n              }\n            }\n\n            const springForce = -config.tension * 0.000001 * (position - to);\n            const dampingForce = -config.friction * 0.001 * velocity;\n            const acceleration = (springForce + dampingForce) / config.mass;\n            velocity = velocity + acceleration * step;\n            position = position + velocity * step;\n          }\n        }\n\n        node.lastVelocity = velocity;\n\n        if (Number.isNaN(position)) {\n          console.warn(`Got NaN while animating:`, this);\n          finished = true;\n        }\n      }\n\n      if (payload && !payload[i].done) {\n        finished = false;\n      }\n\n      if (finished) {\n        node.done = true;\n      } else {\n        idle = false;\n      }\n\n      if (node.setValue(position, config.round)) {\n        changed = true;\n      }\n    });\n    const node = getAnimated(this);\n    const currVal = node.getValue();\n\n    if (idle) {\n      const finalVal = getFluidValue(anim.to);\n\n      if ((currVal !== finalVal || changed) && !config.decay) {\n        node.setValue(finalVal);\n\n        this._onChange(finalVal);\n      } else if (changed && config.decay) {\n        this._onChange(currVal);\n      }\n\n      this._stop();\n    } else if (changed) {\n      this._onChange(currVal);\n    }\n  }\n\n  set(value) {\n    raf.batchedUpdates(() => {\n      this._stop();\n\n      this._focus(value);\n\n      this._set(value);\n    });\n    return this;\n  }\n\n  pause() {\n    this._update({\n      pause: true\n    });\n  }\n\n  resume() {\n    this._update({\n      pause: false\n    });\n  }\n\n  finish() {\n    if (isAnimating(this)) {\n      const {\n        to,\n        config\n      } = this.animation;\n      raf.batchedUpdates(() => {\n        this._onStart();\n\n        if (!config.decay) {\n          this._set(to, false);\n        }\n\n        this._stop();\n      });\n    }\n\n    return this;\n  }\n\n  update(props) {\n    const queue = this.queue || (this.queue = []);\n    queue.push(props);\n    return this;\n  }\n\n  start(to, arg2) {\n    let queue;\n\n    if (!is.und(to)) {\n      queue = [is.obj(to) ? to : _extends({}, arg2, {\n        to\n      })];\n    } else {\n      queue = this.queue || [];\n      this.queue = [];\n    }\n\n    return Promise.all(queue.map(props => {\n      const up = this._update(props);\n\n      return up;\n    })).then(results => getCombinedResult(this, results));\n  }\n\n  stop(cancel) {\n    const {\n      to\n    } = this.animation;\n\n    this._focus(this.get());\n\n    stopAsync(this._state, cancel && this._lastCallId);\n    raf.batchedUpdates(() => this._stop(to, cancel));\n    return this;\n  }\n\n  reset() {\n    this._update({\n      reset: true\n    });\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      this._start();\n    } else if (event.type == 'priority') {\n      this.priority = event.priority + 1;\n    }\n  }\n\n  _prepareNode(props) {\n    const key = this.key || '';\n    let {\n      to,\n      from\n    } = props;\n    to = is.obj(to) ? to[key] : to;\n\n    if (to == null || isAsyncTo(to)) {\n      to = undefined;\n    }\n\n    from = is.obj(from) ? from[key] : from;\n\n    if (from == null) {\n      from = undefined;\n    }\n\n    const range = {\n      to,\n      from\n    };\n\n    if (!hasAnimated(this)) {\n      if (props.reverse) [to, from] = [from, to];\n      from = getFluidValue(from);\n\n      if (!is.und(from)) {\n        this._set(from);\n      } else if (!getAnimated(this)) {\n        this._set(to);\n      }\n    }\n\n    return range;\n  }\n\n  _update(_ref, isLoop) {\n    let props = _extends({}, _ref);\n\n    const {\n      key,\n      defaultProps\n    } = this;\n    if (props.default) Object.assign(defaultProps, getDefaultProps(props, (value, prop) => /^on/.test(prop) ? resolveProp(value, key) : value));\n    mergeActiveFn(this, props, 'onProps');\n    sendEvent(this, 'onProps', props, this);\n\n    const range = this._prepareNode(props);\n\n    if (Object.isFrozen(this)) {\n      throw Error('Cannot animate a `SpringValue` object that is frozen. ' + 'Did you forget to pass your component to `animated(...)` before animating its props?');\n    }\n\n    const state = this._state;\n    return scheduleProps(++this._lastCallId, {\n      key,\n      props,\n      defaultProps,\n      state,\n      actions: {\n        pause: () => {\n          if (!isPaused(this)) {\n            setPausedBit(this, true);\n            flushCalls(state.pauseQueue);\n            sendEvent(this, 'onPause', getFinishedResult(this, checkFinished(this, this.animation.to)), this);\n          }\n        },\n        resume: () => {\n          if (isPaused(this)) {\n            setPausedBit(this, false);\n\n            if (isAnimating(this)) {\n              this._resume();\n            }\n\n            flushCalls(state.resumeQueue);\n            sendEvent(this, 'onResume', getFinishedResult(this, checkFinished(this, this.animation.to)), this);\n          }\n        },\n        start: this._merge.bind(this, range)\n      }\n    }).then(result => {\n      if (props.loop && result.finished && !(isLoop && result.noop)) {\n        const nextProps = createLoopUpdate(props);\n\n        if (nextProps) {\n          return this._update(nextProps, true);\n        }\n      }\n\n      return result;\n    });\n  }\n\n  _merge(range, props, resolve) {\n    if (props.cancel) {\n      this.stop(true);\n      return resolve(getCancelledResult(this));\n    }\n\n    const hasToProp = !is.und(range.to);\n    const hasFromProp = !is.und(range.from);\n\n    if (hasToProp || hasFromProp) {\n      if (props.callId > this._lastToId) {\n        this._lastToId = props.callId;\n      } else {\n        return resolve(getCancelledResult(this));\n      }\n    }\n\n    const {\n      key,\n      defaultProps,\n      animation: anim\n    } = this;\n    const {\n      to: prevTo,\n      from: prevFrom\n    } = anim;\n    let {\n      to = prevTo,\n      from = prevFrom\n    } = range;\n\n    if (hasFromProp && !hasToProp && (!props.default || is.und(to))) {\n      to = from;\n    }\n\n    if (props.reverse) [to, from] = [from, to];\n    const hasFromChanged = !isEqual(from, prevFrom);\n\n    if (hasFromChanged) {\n      anim.from = from;\n    }\n\n    from = getFluidValue(from);\n    const hasToChanged = !isEqual(to, prevTo);\n\n    if (hasToChanged) {\n      this._focus(to);\n    }\n\n    const hasAsyncTo = isAsyncTo(props.to);\n    const {\n      config\n    } = anim;\n    const {\n      decay,\n      velocity\n    } = config;\n\n    if (hasToProp || hasFromProp) {\n      config.velocity = 0;\n    }\n\n    if (props.config && !hasAsyncTo) {\n      mergeConfig(config, callProp(props.config, key), props.config !== defaultProps.config ? callProp(defaultProps.config, key) : void 0);\n    }\n\n    let node = getAnimated(this);\n\n    if (!node || is.und(to)) {\n      return resolve(getFinishedResult(this, true));\n    }\n\n    const reset = is.und(props.reset) ? hasFromProp && !props.default : !is.und(from) && matchProp(props.reset, key);\n    const value = reset ? from : this.get();\n    const goal = computeGoal(to);\n    const isAnimatable = is.num(goal) || is.arr(goal) || isAnimatedString(goal);\n    const immediate = !hasAsyncTo && (!isAnimatable || matchProp(defaultProps.immediate || props.immediate, key));\n\n    if (hasToChanged) {\n      const nodeType = getAnimatedType(to);\n\n      if (nodeType !== node.constructor) {\n        if (immediate) {\n          node = this._set(goal);\n        } else throw Error(`Cannot animate between ${node.constructor.name} and ${nodeType.name}, as the \"to\" prop suggests`);\n      }\n    }\n\n    const goalType = node.constructor;\n    let started = hasFluidValue(to);\n    let finished = false;\n\n    if (!started) {\n      const hasValueChanged = reset || !hasAnimated(this) && hasFromChanged;\n\n      if (hasToChanged || hasValueChanged) {\n        finished = isEqual(computeGoal(value), goal);\n        started = !finished;\n      }\n\n      if (!isEqual(anim.immediate, immediate) && !immediate || !isEqual(config.decay, decay) || !isEqual(config.velocity, velocity)) {\n        started = true;\n      }\n    }\n\n    if (finished && isAnimating(this)) {\n      if (anim.changed && !reset) {\n        started = true;\n      } else if (!started) {\n        this._stop(prevTo);\n      }\n    }\n\n    if (!hasAsyncTo) {\n      if (started || hasFluidValue(prevTo)) {\n        anim.values = node.getPayload();\n        anim.toValues = hasFluidValue(to) ? null : goalType == AnimatedString ? [1] : toArray(goal);\n      }\n\n      if (anim.immediate != immediate) {\n        anim.immediate = immediate;\n\n        if (!immediate && !reset) {\n          this._set(prevTo);\n        }\n      }\n\n      if (started) {\n        const {\n          onRest\n        } = anim;\n        each(ACTIVE_EVENTS, type => mergeActiveFn(this, props, type));\n        const result = getFinishedResult(this, checkFinished(this, prevTo));\n        flushCalls(this._pendingCalls, result);\n\n        this._pendingCalls.add(resolve);\n\n        if (anim.changed) raf.batchedUpdates(() => {\n          anim.changed = !reset;\n          onRest == null ? void 0 : onRest(result, this);\n\n          if (reset) {\n            callProp(defaultProps.onRest, result);\n          } else {\n            anim.onStart == null ? void 0 : anim.onStart(result, this);\n          }\n        });\n      }\n    }\n\n    if (reset) {\n      this._set(value);\n    }\n\n    if (hasAsyncTo) {\n      resolve(runAsync(props.to, props, this._state, this));\n    } else if (started) {\n      this._start();\n    } else if (isAnimating(this) && !hasToChanged) {\n      this._pendingCalls.add(resolve);\n    } else {\n      resolve(getNoopResult(value));\n    }\n  }\n\n  _focus(value) {\n    const anim = this.animation;\n\n    if (value !== anim.to) {\n      if (getFluidObservers(this)) {\n        this._detach();\n      }\n\n      anim.to = value;\n\n      if (getFluidObservers(this)) {\n        this._attach();\n      }\n    }\n  }\n\n  _attach() {\n    let priority = 0;\n    const {\n      to\n    } = this.animation;\n\n    if (hasFluidValue(to)) {\n      addFluidObserver(to, this);\n\n      if (isFrameValue(to)) {\n        priority = to.priority + 1;\n      }\n    }\n\n    this.priority = priority;\n  }\n\n  _detach() {\n    const {\n      to\n    } = this.animation;\n\n    if (hasFluidValue(to)) {\n      removeFluidObserver(to, this);\n    }\n  }\n\n  _set(arg, idle = true) {\n    const value = getFluidValue(arg);\n\n    if (!is.und(value)) {\n      const oldNode = getAnimated(this);\n\n      if (!oldNode || !isEqual(value, oldNode.getValue())) {\n        const nodeType = getAnimatedType(value);\n\n        if (!oldNode || oldNode.constructor != nodeType) {\n          setAnimated(this, nodeType.create(value));\n        } else {\n          oldNode.setValue(value);\n        }\n\n        if (oldNode) {\n          raf.batchedUpdates(() => {\n            this._onChange(value, idle);\n          });\n        }\n      }\n    }\n\n    return getAnimated(this);\n  }\n\n  _onStart() {\n    const anim = this.animation;\n\n    if (!anim.changed) {\n      anim.changed = true;\n      sendEvent(this, 'onStart', getFinishedResult(this, checkFinished(this, anim.to)), this);\n    }\n  }\n\n  _onChange(value, idle) {\n    if (!idle) {\n      this._onStart();\n\n      callProp(this.animation.onChange, value, this);\n    }\n\n    callProp(this.defaultProps.onChange, value, this);\n\n    super._onChange(value, idle);\n  }\n\n  _start() {\n    const anim = this.animation;\n    getAnimated(this).reset(getFluidValue(anim.to));\n\n    if (!anim.immediate) {\n      anim.fromValues = anim.values.map(node => node.lastPosition);\n    }\n\n    if (!isAnimating(this)) {\n      setActiveBit(this, true);\n\n      if (!isPaused(this)) {\n        this._resume();\n      }\n    }\n  }\n\n  _resume() {\n    if (Globals.skipAnimation) {\n      this.finish();\n    } else {\n      frameLoop.start(this);\n    }\n  }\n\n  _stop(goal, cancel) {\n    if (isAnimating(this)) {\n      setActiveBit(this, false);\n      const anim = this.animation;\n      each(anim.values, node => {\n        node.done = true;\n      });\n\n      if (anim.toValues) {\n        anim.onChange = anim.onPause = anim.onResume = undefined;\n      }\n\n      callFluidObservers(this, {\n        type: 'idle',\n        parent: this\n      });\n      const result = cancel ? getCancelledResult(this.get()) : getFinishedResult(this.get(), checkFinished(this, goal != null ? goal : anim.to));\n      flushCalls(this._pendingCalls, result);\n\n      if (anim.changed) {\n        anim.changed = false;\n        sendEvent(this, 'onRest', result, this);\n      }\n    }\n  }\n\n}\n\nfunction checkFinished(target, to) {\n  const goal = computeGoal(to);\n  const value = computeGoal(target.get());\n  return isEqual(value, goal);\n}\n\nfunction createLoopUpdate(props, loop = props.loop, to = props.to) {\n  let loopRet = callProp(loop);\n\n  if (loopRet) {\n    const overrides = loopRet !== true && inferTo(loopRet);\n    const reverse = (overrides || props).reverse;\n    const reset = !overrides || overrides.reset;\n    return createUpdate(_extends({}, props, {\n      loop,\n      default: false,\n      pause: undefined,\n      to: !reverse || isAsyncTo(to) ? to : undefined,\n      from: reset ? props.from : undefined,\n      reset\n    }, overrides));\n  }\n}\nfunction createUpdate(props) {\n  const {\n    to,\n    from\n  } = props = inferTo(props);\n  const keys = new Set();\n  if (is.obj(to)) findDefined(to, keys);\n  if (is.obj(from)) findDefined(from, keys);\n  props.keys = keys.size ? Array.from(keys) : null;\n  return props;\n}\nfunction declareUpdate(props) {\n  const update = createUpdate(props);\n\n  if (is.und(update.default)) {\n    update.default = getDefaultProps(update);\n  }\n\n  return update;\n}\n\nfunction findDefined(values, keys) {\n  eachProp(values, (value, key) => value != null && keys.add(key));\n}\n\nconst ACTIVE_EVENTS = ['onStart', 'onRest', 'onChange', 'onPause', 'onResume'];\n\nfunction mergeActiveFn(target, props, type) {\n  target.animation[type] = props[type] !== getDefaultProp(props, type) ? resolveProp(props[type], target.key) : undefined;\n}\n\nfunction sendEvent(target, type, ...args) {\n  var _target$animation$typ, _target$animation, _target$defaultProps$, _target$defaultProps;\n\n  (_target$animation$typ = (_target$animation = target.animation)[type]) == null ? void 0 : _target$animation$typ.call(_target$animation, ...args);\n  (_target$defaultProps$ = (_target$defaultProps = target.defaultProps)[type]) == null ? void 0 : _target$defaultProps$.call(_target$defaultProps, ...args);\n}\n\nconst BATCHED_EVENTS = ['onStart', 'onChange', 'onRest'];\nlet nextId = 1;\nclass Controller {\n  constructor(props, flush) {\n    this.id = nextId++;\n    this.springs = {};\n    this.queue = [];\n    this.ref = void 0;\n    this._flush = void 0;\n    this._initialProps = void 0;\n    this._lastAsyncId = 0;\n    this._active = new Set();\n    this._changed = new Set();\n    this._started = false;\n    this._item = void 0;\n    this._state = {\n      paused: false,\n      pauseQueue: new Set(),\n      resumeQueue: new Set(),\n      timeouts: new Set()\n    };\n    this._events = {\n      onStart: new Map(),\n      onChange: new Map(),\n      onRest: new Map()\n    };\n    this._onFrame = this._onFrame.bind(this);\n\n    if (flush) {\n      this._flush = flush;\n    }\n\n    if (props) {\n      this.start(_extends({\n        default: true\n      }, props));\n    }\n  }\n\n  get idle() {\n    return !this._state.asyncTo && Object.values(this.springs).every(spring => {\n      return spring.idle && !spring.isDelayed && !spring.isPaused;\n    });\n  }\n\n  get item() {\n    return this._item;\n  }\n\n  set item(item) {\n    this._item = item;\n  }\n\n  get() {\n    const values = {};\n    this.each((spring, key) => values[key] = spring.get());\n    return values;\n  }\n\n  set(values) {\n    for (const key in values) {\n      const value = values[key];\n\n      if (!is.und(value)) {\n        this.springs[key].set(value);\n      }\n    }\n  }\n\n  update(props) {\n    if (props) {\n      this.queue.push(createUpdate(props));\n    }\n\n    return this;\n  }\n\n  start(props) {\n    let {\n      queue\n    } = this;\n\n    if (props) {\n      queue = toArray(props).map(createUpdate);\n    } else {\n      this.queue = [];\n    }\n\n    if (this._flush) {\n      return this._flush(this, queue);\n    }\n\n    prepareKeys(this, queue);\n    return flushUpdateQueue(this, queue);\n  }\n\n  stop(arg, keys) {\n    if (arg !== !!arg) {\n      keys = arg;\n    }\n\n    if (keys) {\n      const springs = this.springs;\n      each(toArray(keys), key => springs[key].stop(!!arg));\n    } else {\n      stopAsync(this._state, this._lastAsyncId);\n      this.each(spring => spring.stop(!!arg));\n    }\n\n    return this;\n  }\n\n  pause(keys) {\n    if (is.und(keys)) {\n      this.start({\n        pause: true\n      });\n    } else {\n      const springs = this.springs;\n      each(toArray(keys), key => springs[key].pause());\n    }\n\n    return this;\n  }\n\n  resume(keys) {\n    if (is.und(keys)) {\n      this.start({\n        pause: false\n      });\n    } else {\n      const springs = this.springs;\n      each(toArray(keys), key => springs[key].resume());\n    }\n\n    return this;\n  }\n\n  each(iterator) {\n    eachProp(this.springs, iterator);\n  }\n\n  _onFrame() {\n    const {\n      onStart,\n      onChange,\n      onRest\n    } = this._events;\n    const active = this._active.size > 0;\n    const changed = this._changed.size > 0;\n\n    if (active && !this._started || changed && !this._started) {\n      this._started = true;\n      flush(onStart, ([onStart, result]) => {\n        result.value = this.get();\n        onStart(result, this, this._item);\n      });\n    }\n\n    const idle = !active && this._started;\n    const values = changed || idle && onRest.size ? this.get() : null;\n\n    if (changed && onChange.size) {\n      flush(onChange, ([onChange, result]) => {\n        result.value = values;\n        onChange(result, this, this._item);\n      });\n    }\n\n    if (idle) {\n      this._started = false;\n      flush(onRest, ([onRest, result]) => {\n        result.value = values;\n        onRest(result, this, this._item);\n      });\n    }\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      this._changed.add(event.parent);\n\n      if (!event.idle) {\n        this._active.add(event.parent);\n      }\n    } else if (event.type == 'idle') {\n      this._active.delete(event.parent);\n    } else return;\n\n    raf.onFrame(this._onFrame);\n  }\n\n}\nfunction flushUpdateQueue(ctrl, queue) {\n  return Promise.all(queue.map(props => flushUpdate(ctrl, props))).then(results => getCombinedResult(ctrl, results));\n}\nasync function flushUpdate(ctrl, props, isLoop) {\n  const {\n    keys,\n    to,\n    from,\n    loop,\n    onRest,\n    onResolve\n  } = props;\n  const defaults = is.obj(props.default) && props.default;\n\n  if (loop) {\n    props.loop = false;\n  }\n\n  if (to === false) props.to = null;\n  if (from === false) props.from = null;\n  const asyncTo = is.arr(to) || is.fun(to) ? to : undefined;\n\n  if (asyncTo) {\n    props.to = undefined;\n    props.onRest = undefined;\n\n    if (defaults) {\n      defaults.onRest = undefined;\n    }\n  } else {\n    each(BATCHED_EVENTS, key => {\n      const handler = props[key];\n\n      if (is.fun(handler)) {\n        const queue = ctrl['_events'][key];\n\n        props[key] = ({\n          finished,\n          cancelled\n        }) => {\n          const result = queue.get(handler);\n\n          if (result) {\n            if (!finished) result.finished = false;\n            if (cancelled) result.cancelled = true;\n          } else {\n            queue.set(handler, {\n              value: null,\n              finished: finished || false,\n              cancelled: cancelled || false\n            });\n          }\n        };\n\n        if (defaults) {\n          defaults[key] = props[key];\n        }\n      }\n    });\n  }\n\n  const state = ctrl['_state'];\n\n  if (props.pause === !state.paused) {\n    state.paused = props.pause;\n    flushCalls(props.pause ? state.pauseQueue : state.resumeQueue);\n  } else if (state.paused) {\n    props.pause = true;\n  }\n\n  const promises = (keys || Object.keys(ctrl.springs)).map(key => ctrl.springs[key].start(props));\n  const cancel = props.cancel === true || getDefaultProp(props, 'cancel') === true;\n\n  if (asyncTo || cancel && state.asyncId) {\n    promises.push(scheduleProps(++ctrl['_lastAsyncId'], {\n      props,\n      state,\n      actions: {\n        pause: noop,\n        resume: noop,\n\n        start(props, resolve) {\n          if (cancel) {\n            stopAsync(state, ctrl['_lastAsyncId']);\n            resolve(getCancelledResult(ctrl));\n          } else {\n            props.onRest = onRest;\n            resolve(runAsync(asyncTo, props, state, ctrl));\n          }\n        }\n\n      }\n    }));\n  }\n\n  if (state.paused) {\n    await new Promise(resume => {\n      state.resumeQueue.add(resume);\n    });\n  }\n\n  const result = getCombinedResult(ctrl, await Promise.all(promises));\n\n  if (loop && result.finished && !(isLoop && result.noop)) {\n    const nextProps = createLoopUpdate(props, loop, to);\n\n    if (nextProps) {\n      prepareKeys(ctrl, [nextProps]);\n      return flushUpdate(ctrl, nextProps, true);\n    }\n  }\n\n  if (onResolve) {\n    raf.batchedUpdates(() => onResolve(result, ctrl, ctrl.item));\n  }\n\n  return result;\n}\nfunction getSprings(ctrl, props) {\n  const springs = _extends({}, ctrl.springs);\n\n  if (props) {\n    each(toArray(props), props => {\n      if (is.und(props.keys)) {\n        props = createUpdate(props);\n      }\n\n      if (!is.obj(props.to)) {\n        props = _extends({}, props, {\n          to: undefined\n        });\n      }\n\n      prepareSprings(springs, props, key => {\n        return createSpring(key);\n      });\n    });\n  }\n\n  setSprings(ctrl, springs);\n  return springs;\n}\nfunction setSprings(ctrl, springs) {\n  eachProp(springs, (spring, key) => {\n    if (!ctrl.springs[key]) {\n      ctrl.springs[key] = spring;\n      addFluidObserver(spring, ctrl);\n    }\n  });\n}\n\nfunction createSpring(key, observer) {\n  const spring = new SpringValue();\n  spring.key = key;\n\n  if (observer) {\n    addFluidObserver(spring, observer);\n  }\n\n  return spring;\n}\n\nfunction prepareSprings(springs, props, create) {\n  if (props.keys) {\n    each(props.keys, key => {\n      const spring = springs[key] || (springs[key] = create(key));\n      spring['_prepareNode'](props);\n    });\n  }\n}\n\nfunction prepareKeys(ctrl, queue) {\n  each(queue, props => {\n    prepareSprings(ctrl.springs, props, key => {\n      return createSpring(key, ctrl);\n    });\n  });\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst _excluded$3 = [\"children\"];\nconst SpringContext = _ref => {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded$3);\n\n  const inherited = useContext(ctx);\n  const pause = props.pause || !!inherited.pause,\n        immediate = props.immediate || !!inherited.immediate;\n  props = useMemoOne(() => ({\n    pause,\n    immediate\n  }), [pause, immediate]);\n  const {\n    Provider\n  } = ctx;\n  return React.createElement(Provider, {\n    value: props\n  }, children);\n};\nconst ctx = makeContext(SpringContext, {});\nSpringContext.Provider = ctx.Provider;\nSpringContext.Consumer = ctx.Consumer;\n\nfunction makeContext(target, init) {\n  Object.assign(target, React.createContext(init));\n  target.Provider._context = target;\n  target.Consumer._context = target;\n  return target;\n}\n\nconst SpringRef = () => {\n  const current = [];\n\n  const SpringRef = function SpringRef(props) {\n    deprecateDirectCall();\n    const results = [];\n    each(current, (ctrl, i) => {\n      if (is.und(props)) {\n        results.push(ctrl.start());\n      } else {\n        const update = _getProps(props, ctrl, i);\n\n        if (update) {\n          results.push(ctrl.start(update));\n        }\n      }\n    });\n    return results;\n  };\n\n  SpringRef.current = current;\n\n  SpringRef.add = function (ctrl) {\n    if (!current.includes(ctrl)) {\n      current.push(ctrl);\n    }\n  };\n\n  SpringRef.delete = function (ctrl) {\n    const i = current.indexOf(ctrl);\n    if (~i) current.splice(i, 1);\n  };\n\n  SpringRef.pause = function () {\n    each(current, ctrl => ctrl.pause(...arguments));\n    return this;\n  };\n\n  SpringRef.resume = function () {\n    each(current, ctrl => ctrl.resume(...arguments));\n    return this;\n  };\n\n  SpringRef.set = function (values) {\n    each(current, ctrl => ctrl.set(values));\n  };\n\n  SpringRef.start = function (props) {\n    const results = [];\n    each(current, (ctrl, i) => {\n      if (is.und(props)) {\n        results.push(ctrl.start());\n      } else {\n        const update = this._getProps(props, ctrl, i);\n\n        if (update) {\n          results.push(ctrl.start(update));\n        }\n      }\n    });\n    return results;\n  };\n\n  SpringRef.stop = function () {\n    each(current, ctrl => ctrl.stop(...arguments));\n    return this;\n  };\n\n  SpringRef.update = function (props) {\n    each(current, (ctrl, i) => ctrl.update(this._getProps(props, ctrl, i)));\n    return this;\n  };\n\n  const _getProps = function _getProps(arg, ctrl, index) {\n    return is.fun(arg) ? arg(index, ctrl) : arg;\n  };\n\n  SpringRef._getProps = _getProps;\n  return SpringRef;\n};\n\nfunction useSprings(length, props, deps) {\n  const propsFn = is.fun(props) && props;\n  if (propsFn && !deps) deps = [];\n  const ref = useMemo(() => propsFn || arguments.length == 3 ? SpringRef() : void 0, []);\n  const layoutId = useRef(0);\n  const forceUpdate = useForceUpdate();\n  const state = useMemo(() => ({\n    ctrls: [],\n    queue: [],\n\n    flush(ctrl, updates) {\n      const springs = getSprings(ctrl, updates);\n      const canFlushSync = layoutId.current > 0 && !state.queue.length && !Object.keys(springs).some(key => !ctrl.springs[key]);\n      return canFlushSync ? flushUpdateQueue(ctrl, updates) : new Promise(resolve => {\n        setSprings(ctrl, springs);\n        state.queue.push(() => {\n          resolve(flushUpdateQueue(ctrl, updates));\n        });\n        forceUpdate();\n      });\n    }\n\n  }), []);\n  const ctrls = useRef([...state.ctrls]);\n  const updates = [];\n  const prevLength = usePrev(length) || 0;\n  useMemo(() => {\n    each(ctrls.current.slice(length, prevLength), ctrl => {\n      detachRefs(ctrl, ref);\n      ctrl.stop(true);\n    });\n    ctrls.current.length = length;\n    declareUpdates(prevLength, length);\n  }, [length]);\n  useMemo(() => {\n    declareUpdates(0, Math.min(prevLength, length));\n  }, deps);\n\n  function declareUpdates(startIndex, endIndex) {\n    for (let i = startIndex; i < endIndex; i++) {\n      const ctrl = ctrls.current[i] || (ctrls.current[i] = new Controller(null, state.flush));\n      const update = propsFn ? propsFn(i, ctrl) : props[i];\n\n      if (update) {\n        updates[i] = declareUpdate(update);\n      }\n    }\n  }\n\n  const springs = ctrls.current.map((ctrl, i) => getSprings(ctrl, updates[i]));\n  const context = useContext(SpringContext);\n  const prevContext = usePrev(context);\n  const hasContext = context !== prevContext && hasProps(context);\n  useIsomorphicLayoutEffect(() => {\n    layoutId.current++;\n    state.ctrls = ctrls.current;\n    const {\n      queue\n    } = state;\n\n    if (queue.length) {\n      state.queue = [];\n      each(queue, cb => cb());\n    }\n\n    each(ctrls.current, (ctrl, i) => {\n      ref == null ? void 0 : ref.add(ctrl);\n\n      if (hasContext) {\n        ctrl.start({\n          default: context\n        });\n      }\n\n      const update = updates[i];\n\n      if (update) {\n        replaceRef(ctrl, update.ref);\n\n        if (ctrl.ref) {\n          ctrl.queue.push(update);\n        } else {\n          ctrl.start(update);\n        }\n      }\n    });\n  });\n  useOnce(() => () => {\n    each(state.ctrls, ctrl => ctrl.stop(true));\n  });\n  const values = springs.map(x => _extends({}, x));\n  return ref ? [values, ref] : values;\n}\n\nfunction useSpring(props, deps) {\n  const isFn = is.fun(props);\n  const [[values], ref] = useSprings(1, isFn ? props : [props], isFn ? deps || [] : deps);\n  return isFn || arguments.length == 2 ? [values, ref] : values;\n}\n\nconst initSpringRef = () => SpringRef();\n\nconst useSpringRef = () => useState(initSpringRef)[0];\n\nfunction useTrail(length, propsArg, deps) {\n  var _passedRef;\n\n  const propsFn = is.fun(propsArg) && propsArg;\n  if (propsFn && !deps) deps = [];\n  let reverse = true;\n  let passedRef = undefined;\n  const result = useSprings(length, (i, ctrl) => {\n    const props = propsFn ? propsFn(i, ctrl) : propsArg;\n    passedRef = props.ref;\n    reverse = reverse && props.reverse;\n    return props;\n  }, deps || [{}]);\n  const ref = (_passedRef = passedRef) != null ? _passedRef : result[1];\n  useIsomorphicLayoutEffect(() => {\n    each(ref.current, (ctrl, i) => {\n      const parent = ref.current[i + (reverse ? 1 : -1)];\n\n      if (parent) {\n        ctrl.start({\n          to: parent.springs\n        });\n      } else {\n        ctrl.start();\n      }\n    });\n  }, deps);\n\n  if (propsFn || arguments.length == 3) {\n    ref['_getProps'] = (propsArg, ctrl, i) => {\n      const props = is.fun(propsArg) ? propsArg(i, ctrl) : propsArg;\n\n      if (props) {\n        const parent = ref.current[i + (props.reverse ? 1 : -1)];\n        if (parent) props.to = parent.springs;\n        return props;\n      }\n    };\n\n    return result;\n  }\n\n  ref['start'] = propsArg => {\n    const results = [];\n    each(ref.current, (ctrl, i) => {\n      const props = is.fun(propsArg) ? propsArg(i, ctrl) : propsArg;\n      const parent = ref.current[i + (reverse ? 1 : -1)];\n\n      if (parent) {\n        results.push(ctrl.start(_extends({}, props, {\n          to: parent.springs\n        })));\n      } else {\n        results.push(ctrl.start(_extends({}, props)));\n      }\n    });\n    return results;\n  };\n\n  return result[0];\n}\n\nlet TransitionPhase;\n\n(function (TransitionPhase) {\n  TransitionPhase[\"MOUNT\"] = \"mount\";\n  TransitionPhase[\"ENTER\"] = \"enter\";\n  TransitionPhase[\"UPDATE\"] = \"update\";\n  TransitionPhase[\"LEAVE\"] = \"leave\";\n})(TransitionPhase || (TransitionPhase = {}));\n\nfunction useTransition(data, props, deps) {\n  const propsFn = is.fun(props) && props;\n  const {\n    reset,\n    sort,\n    trail = 0,\n    expires = true,\n    exitBeforeEnter = false,\n    onDestroyed,\n    ref: propsRef,\n    config: propsConfig\n  } = propsFn ? propsFn() : props;\n  const ref = useMemo(() => propsFn || arguments.length == 3 ? SpringRef() : void 0, []);\n  const items = toArray(data);\n  const transitions = [];\n  const usedTransitions = useRef(null);\n  const prevTransitions = reset ? null : usedTransitions.current;\n  useIsomorphicLayoutEffect(() => {\n    usedTransitions.current = transitions;\n  });\n  useOnce(() => {\n    each(transitions, t => {\n      ref == null ? void 0 : ref.add(t.ctrl);\n      t.ctrl.ref = ref;\n    });\n    return () => {\n      each(usedTransitions.current, t => {\n        if (t.expired) {\n          clearTimeout(t.expirationId);\n        }\n\n        detachRefs(t.ctrl, ref);\n        t.ctrl.stop(true);\n      });\n    };\n  });\n  const keys = getKeys(items, propsFn ? propsFn() : props, prevTransitions);\n  const expired = reset && usedTransitions.current || [];\n  useIsomorphicLayoutEffect(() => each(expired, ({\n    ctrl,\n    item,\n    key\n  }) => {\n    detachRefs(ctrl, ref);\n    callProp(onDestroyed, item, key);\n  }));\n  const reused = [];\n  if (prevTransitions) each(prevTransitions, (t, i) => {\n    if (t.expired) {\n      clearTimeout(t.expirationId);\n      expired.push(t);\n    } else {\n      i = reused[i] = keys.indexOf(t.key);\n      if (~i) transitions[i] = t;\n    }\n  });\n  each(items, (item, i) => {\n    if (!transitions[i]) {\n      transitions[i] = {\n        key: keys[i],\n        item,\n        phase: TransitionPhase.MOUNT,\n        ctrl: new Controller()\n      };\n      transitions[i].ctrl.item = item;\n    }\n  });\n\n  if (reused.length) {\n    let i = -1;\n    const {\n      leave\n    } = propsFn ? propsFn() : props;\n    each(reused, (keyIndex, prevIndex) => {\n      const t = prevTransitions[prevIndex];\n\n      if (~keyIndex) {\n        i = transitions.indexOf(t);\n        transitions[i] = _extends({}, t, {\n          item: items[keyIndex]\n        });\n      } else if (leave) {\n        transitions.splice(++i, 0, t);\n      }\n    });\n  }\n\n  if (is.fun(sort)) {\n    transitions.sort((a, b) => sort(a.item, b.item));\n  }\n\n  let delay = -trail;\n  const forceUpdate = useForceUpdate();\n  const defaultProps = getDefaultProps(props);\n  const changes = new Map();\n  const exitingTransitions = useRef(new Map());\n  const forceChange = useRef(false);\n  each(transitions, (t, i) => {\n    const key = t.key;\n    const prevPhase = t.phase;\n    const p = propsFn ? propsFn() : props;\n    let to;\n    let phase;\n    let propsDelay = callProp(p.delay || 0, key);\n\n    if (prevPhase == TransitionPhase.MOUNT) {\n      to = p.enter;\n      phase = TransitionPhase.ENTER;\n    } else {\n      const isLeave = keys.indexOf(key) < 0;\n\n      if (prevPhase != TransitionPhase.LEAVE) {\n        if (isLeave) {\n          to = p.leave;\n          phase = TransitionPhase.LEAVE;\n        } else if (to = p.update) {\n          phase = TransitionPhase.UPDATE;\n        } else return;\n      } else if (!isLeave) {\n        to = p.enter;\n        phase = TransitionPhase.ENTER;\n      } else return;\n    }\n\n    to = callProp(to, t.item, i);\n    to = is.obj(to) ? inferTo(to) : {\n      to\n    };\n\n    if (!to.config) {\n      const config = propsConfig || defaultProps.config;\n      to.config = callProp(config, t.item, i, phase);\n    }\n\n    delay += trail;\n\n    const payload = _extends({}, defaultProps, {\n      delay: propsDelay + delay,\n      ref: propsRef,\n      immediate: p.immediate,\n      reset: false\n    }, to);\n\n    if (phase == TransitionPhase.ENTER && is.und(payload.from)) {\n      const _p = propsFn ? propsFn() : props;\n\n      const from = is.und(_p.initial) || prevTransitions ? _p.from : _p.initial;\n      payload.from = callProp(from, t.item, i);\n    }\n\n    const {\n      onResolve\n    } = payload;\n\n    payload.onResolve = result => {\n      callProp(onResolve, result);\n      const transitions = usedTransitions.current;\n      const t = transitions.find(t => t.key === key);\n      if (!t) return;\n\n      if (result.cancelled && t.phase != TransitionPhase.UPDATE) {\n        return;\n      }\n\n      if (t.ctrl.idle) {\n        const idle = transitions.every(t => t.ctrl.idle);\n\n        if (t.phase == TransitionPhase.LEAVE) {\n          const expiry = callProp(expires, t.item);\n\n          if (expiry !== false) {\n            const expiryMs = expiry === true ? 0 : expiry;\n            t.expired = true;\n\n            if (!idle && expiryMs > 0) {\n              if (expiryMs <= 0x7fffffff) t.expirationId = setTimeout(forceUpdate, expiryMs);\n              return;\n            }\n          }\n        }\n\n        if (idle && transitions.some(t => t.expired)) {\n          exitingTransitions.current.delete(t);\n\n          if (exitBeforeEnter) {\n            forceChange.current = true;\n          }\n\n          forceUpdate();\n        }\n      }\n    };\n\n    const springs = getSprings(t.ctrl, payload);\n\n    if (phase === TransitionPhase.LEAVE && exitBeforeEnter) {\n      exitingTransitions.current.set(t, {\n        phase,\n        springs,\n        payload\n      });\n    } else {\n      changes.set(t, {\n        phase,\n        springs,\n        payload\n      });\n    }\n  });\n  const context = useContext(SpringContext);\n  const prevContext = usePrev(context);\n  const hasContext = context !== prevContext && hasProps(context);\n  useIsomorphicLayoutEffect(() => {\n    if (hasContext) {\n      each(transitions, t => {\n        t.ctrl.start({\n          default: context\n        });\n      });\n    }\n  }, [context]);\n  each(changes, (_, t) => {\n    if (exitingTransitions.current.size) {\n      const ind = transitions.findIndex(state => state.key === t.key);\n      transitions.splice(ind, 1);\n    }\n  });\n  useIsomorphicLayoutEffect(() => {\n    each(exitingTransitions.current.size ? exitingTransitions.current : changes, ({\n      phase,\n      payload\n    }, t) => {\n      const {\n        ctrl\n      } = t;\n      t.phase = phase;\n      ref == null ? void 0 : ref.add(ctrl);\n\n      if (hasContext && phase == TransitionPhase.ENTER) {\n        ctrl.start({\n          default: context\n        });\n      }\n\n      if (payload) {\n        replaceRef(ctrl, payload.ref);\n\n        if ((ctrl.ref || ref) && !forceChange.current) {\n          ctrl.update(payload);\n        } else {\n          ctrl.start(payload);\n\n          if (forceChange.current) {\n            forceChange.current = false;\n          }\n        }\n      }\n    });\n  }, reset ? void 0 : deps);\n\n  const renderTransitions = render => React.createElement(React.Fragment, null, transitions.map((t, i) => {\n    const {\n      springs\n    } = changes.get(t) || t.ctrl;\n    const elem = render(_extends({}, springs), t.item, t, i);\n    return elem && elem.type ? React.createElement(elem.type, _extends({}, elem.props, {\n      key: is.str(t.key) || is.num(t.key) ? t.key : t.ctrl.id,\n      ref: elem.ref\n    })) : elem;\n  }));\n\n  return ref ? [renderTransitions, ref] : renderTransitions;\n}\nlet nextKey = 1;\n\nfunction getKeys(items, {\n  key,\n  keys = key\n}, prevTransitions) {\n  if (keys === null) {\n    const reused = new Set();\n    return items.map(item => {\n      const t = prevTransitions && prevTransitions.find(t => t.item === item && t.phase !== TransitionPhase.LEAVE && !reused.has(t));\n\n      if (t) {\n        reused.add(t);\n        return t.key;\n      }\n\n      return nextKey++;\n    });\n  }\n\n  return is.und(keys) ? items : is.fun(keys) ? items.map(keys) : toArray(keys);\n}\n\nconst _excluded$2 = [\"children\"];\nfunction Spring(_ref) {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n\n  return children(useSpring(props));\n}\n\nconst _excluded$1 = [\"items\", \"children\"];\nfunction Trail(_ref) {\n  let {\n    items,\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n\n  const trails = useTrail(items.length, props);\n  return items.map((item, index) => {\n    const result = children(item, index);\n    return is.fun(result) ? result(trails[index]) : result;\n  });\n}\n\nconst _excluded = [\"items\", \"children\"];\nfunction Transition(_ref) {\n  let {\n    items,\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  return useTransition(items, props)(children);\n}\n\nclass Interpolation extends FrameValue {\n  constructor(source, args) {\n    super();\n    this.key = void 0;\n    this.idle = true;\n    this.calc = void 0;\n    this._active = new Set();\n    this.source = source;\n    this.calc = createInterpolator(...args);\n\n    const value = this._get();\n\n    const nodeType = getAnimatedType(value);\n    setAnimated(this, nodeType.create(value));\n  }\n\n  advance(_dt) {\n    const value = this._get();\n\n    const oldValue = this.get();\n\n    if (!isEqual(value, oldValue)) {\n      getAnimated(this).setValue(value);\n\n      this._onChange(value, this.idle);\n    }\n\n    if (!this.idle && checkIdle(this._active)) {\n      becomeIdle(this);\n    }\n  }\n\n  _get() {\n    const inputs = is.arr(this.source) ? this.source.map(getFluidValue) : toArray(getFluidValue(this.source));\n    return this.calc(...inputs);\n  }\n\n  _start() {\n    if (this.idle && !checkIdle(this._active)) {\n      this.idle = false;\n      each(getPayload(this), node => {\n        node.done = false;\n      });\n\n      if (Globals.skipAnimation) {\n        raf.batchedUpdates(() => this.advance());\n        becomeIdle(this);\n      } else {\n        frameLoop.start(this);\n      }\n    }\n  }\n\n  _attach() {\n    let priority = 1;\n    each(toArray(this.source), source => {\n      if (hasFluidValue(source)) {\n        addFluidObserver(source, this);\n      }\n\n      if (isFrameValue(source)) {\n        if (!source.idle) {\n          this._active.add(source);\n        }\n\n        priority = Math.max(priority, source.priority + 1);\n      }\n    });\n    this.priority = priority;\n\n    this._start();\n  }\n\n  _detach() {\n    each(toArray(this.source), source => {\n      if (hasFluidValue(source)) {\n        removeFluidObserver(source, this);\n      }\n    });\n\n    this._active.clear();\n\n    becomeIdle(this);\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      if (event.idle) {\n        this.advance();\n      } else {\n        this._active.add(event.parent);\n\n        this._start();\n      }\n    } else if (event.type == 'idle') {\n      this._active.delete(event.parent);\n    } else if (event.type == 'priority') {\n      this.priority = toArray(this.source).reduce((highest, parent) => Math.max(highest, (isFrameValue(parent) ? parent.priority : 0) + 1), 0);\n    }\n  }\n\n}\n\nfunction isIdle(source) {\n  return source.idle !== false;\n}\n\nfunction checkIdle(active) {\n  return !active.size || Array.from(active).every(isIdle);\n}\n\nfunction becomeIdle(self) {\n  if (!self.idle) {\n    self.idle = true;\n    each(getPayload(self), node => {\n      node.done = true;\n    });\n    callFluidObservers(self, {\n      type: 'idle',\n      parent: self\n    });\n  }\n}\n\nconst to = (source, ...args) => new Interpolation(source, args);\nconst interpolate = (source, ...args) => (deprecateInterpolate(), new Interpolation(source, args));\n\nGlobals.assign({\n  createStringInterpolator,\n  to: (source, args) => new Interpolation(source, args)\n});\nconst update = frameLoop.advance;\n\nexport { BailSignal, Controller, FrameValue, Interpolation, Spring, SpringContext, SpringRef, SpringValue, Trail, Transition, config, easings, inferTo, interpolate, to, update, useChain, useSpring, useSpringRef, useSprings, useTrail, useTransition };\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactDOM\"];","import { Globals } from '@react-spring/core';\nexport * from '@react-spring/core';\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { eachProp, is, toArray, FluidValue, each, getFluidValue, hasFluidValue, addFluidObserver, removeFluidObserver, callFluidObservers, createStringInterpolator, colors } from '@react-spring/shared';\nimport { AnimatedObject, createHost } from '@react-spring/animated';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst _excluded$2 = [\"style\", \"children\", \"scrollTop\", \"scrollLeft\"];\nconst isCustomPropRE = /^--/;\n\nfunction dangerousStyleValue(name, value) {\n  if (value == null || typeof value === 'boolean' || value === '') return '';\n  if (typeof value === 'number' && value !== 0 && !isCustomPropRE.test(name) && !(isUnitlessNumber.hasOwnProperty(name) && isUnitlessNumber[name])) return value + 'px';\n  return ('' + value).trim();\n}\n\nconst attributeCache = {};\nfunction applyAnimatedValues(instance, props) {\n  if (!instance.nodeType || !instance.setAttribute) {\n    return false;\n  }\n\n  const isFilterElement = instance.nodeName === 'filter' || instance.parentNode && instance.parentNode.nodeName === 'filter';\n\n  const _ref = props,\n        {\n    style,\n    children,\n    scrollTop,\n    scrollLeft\n  } = _ref,\n        attributes = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n\n  const values = Object.values(attributes);\n  const names = Object.keys(attributes).map(name => isFilterElement || instance.hasAttribute(name) ? name : attributeCache[name] || (attributeCache[name] = name.replace(/([A-Z])/g, n => '-' + n.toLowerCase())));\n\n  if (children !== void 0) {\n    instance.textContent = children;\n  }\n\n  for (let name in style) {\n    if (style.hasOwnProperty(name)) {\n      const value = dangerousStyleValue(name, style[name]);\n\n      if (isCustomPropRE.test(name)) {\n        instance.style.setProperty(name, value);\n      } else {\n        instance.style[name] = value;\n      }\n    }\n  }\n\n  names.forEach((name, i) => {\n    instance.setAttribute(name, values[i]);\n  });\n\n  if (scrollTop !== void 0) {\n    instance.scrollTop = scrollTop;\n  }\n\n  if (scrollLeft !== void 0) {\n    instance.scrollLeft = scrollLeft;\n  }\n}\nlet isUnitlessNumber = {\n  animationIterationCount: true,\n  borderImageOutset: true,\n  borderImageSlice: true,\n  borderImageWidth: true,\n  boxFlex: true,\n  boxFlexGroup: true,\n  boxOrdinalGroup: true,\n  columnCount: true,\n  columns: true,\n  flex: true,\n  flexGrow: true,\n  flexPositive: true,\n  flexShrink: true,\n  flexNegative: true,\n  flexOrder: true,\n  gridRow: true,\n  gridRowEnd: true,\n  gridRowSpan: true,\n  gridRowStart: true,\n  gridColumn: true,\n  gridColumnEnd: true,\n  gridColumnSpan: true,\n  gridColumnStart: true,\n  fontWeight: true,\n  lineClamp: true,\n  lineHeight: true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  tabSize: true,\n  widows: true,\n  zIndex: true,\n  zoom: true,\n  fillOpacity: true,\n  floodOpacity: true,\n  stopOpacity: true,\n  strokeDasharray: true,\n  strokeDashoffset: true,\n  strokeMiterlimit: true,\n  strokeOpacity: true,\n  strokeWidth: true\n};\n\nconst prefixKey = (prefix, key) => prefix + key.charAt(0).toUpperCase() + key.substring(1);\n\nconst prefixes = ['Webkit', 'Ms', 'Moz', 'O'];\nisUnitlessNumber = Object.keys(isUnitlessNumber).reduce((acc, prop) => {\n  prefixes.forEach(prefix => acc[prefixKey(prefix, prop)] = acc[prop]);\n  return acc;\n}, isUnitlessNumber);\n\nconst _excluded$1 = [\"x\", \"y\", \"z\"];\nconst domTransforms = /^(matrix|translate|scale|rotate|skew)/;\nconst pxTransforms = /^(translate)/;\nconst degTransforms = /^(rotate|skew)/;\n\nconst addUnit = (value, unit) => is.num(value) && value !== 0 ? value + unit : value;\n\nconst isValueIdentity = (value, id) => is.arr(value) ? value.every(v => isValueIdentity(v, id)) : is.num(value) ? value === id : parseFloat(value) === id;\n\nclass AnimatedStyle extends AnimatedObject {\n  constructor(_ref) {\n    let {\n      x,\n      y,\n      z\n    } = _ref,\n        style = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n\n    const inputs = [];\n    const transforms = [];\n\n    if (x || y || z) {\n      inputs.push([x || 0, y || 0, z || 0]);\n      transforms.push(xyz => [`translate3d(${xyz.map(v => addUnit(v, 'px')).join(',')})`, isValueIdentity(xyz, 0)]);\n    }\n\n    eachProp(style, (value, key) => {\n      if (key === 'transform') {\n        inputs.push([value || '']);\n        transforms.push(transform => [transform, transform === '']);\n      } else if (domTransforms.test(key)) {\n        delete style[key];\n        if (is.und(value)) return;\n        const unit = pxTransforms.test(key) ? 'px' : degTransforms.test(key) ? 'deg' : '';\n        inputs.push(toArray(value));\n        transforms.push(key === 'rotate3d' ? ([x, y, z, deg]) => [`rotate3d(${x},${y},${z},${addUnit(deg, unit)})`, isValueIdentity(deg, 0)] : input => [`${key}(${input.map(v => addUnit(v, unit)).join(',')})`, isValueIdentity(input, key.startsWith('scale') ? 1 : 0)]);\n      }\n    });\n\n    if (inputs.length) {\n      style.transform = new FluidTransform(inputs, transforms);\n    }\n\n    super(style);\n  }\n\n}\n\nclass FluidTransform extends FluidValue {\n  constructor(inputs, transforms) {\n    super();\n    this._value = null;\n    this.inputs = inputs;\n    this.transforms = transforms;\n  }\n\n  get() {\n    return this._value || (this._value = this._get());\n  }\n\n  _get() {\n    let transform = '';\n    let identity = true;\n    each(this.inputs, (input, i) => {\n      const arg1 = getFluidValue(input[0]);\n      const [t, id] = this.transforms[i](is.arr(arg1) ? arg1 : input.map(getFluidValue));\n      transform += ' ' + t;\n      identity = identity && id;\n    });\n    return identity ? 'none' : transform;\n  }\n\n  observerAdded(count) {\n    if (count == 1) each(this.inputs, input => each(input, value => hasFluidValue(value) && addFluidObserver(value, this)));\n  }\n\n  observerRemoved(count) {\n    if (count == 0) each(this.inputs, input => each(input, value => hasFluidValue(value) && removeFluidObserver(value, this)));\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      this._value = null;\n    }\n\n    callFluidObservers(this, event);\n  }\n\n}\n\nconst primitives = ['a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base', 'bdi', 'bdo', 'big', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'cite', 'code', 'col', 'colgroup', 'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li', 'link', 'main', 'map', 'mark', 'menu', 'menuitem', 'meta', 'meter', 'nav', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'script', 'section', 'select', 'small', 'source', 'span', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr', 'circle', 'clipPath', 'defs', 'ellipse', 'foreignObject', 'g', 'image', 'line', 'linearGradient', 'mask', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'stop', 'svg', 'text', 'tspan'];\n\nconst _excluded = [\"scrollTop\", \"scrollLeft\"];\nGlobals.assign({\n  batchedUpdates: unstable_batchedUpdates,\n  createStringInterpolator,\n  colors\n});\nconst host = createHost(primitives, {\n  applyAnimatedValues,\n  createAnimatedStyle: style => new AnimatedStyle(style),\n  getComponentProps: _ref => {\n    let props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n    return props;\n  }\n});\nconst animated = host.animated;\n\nexport { animated as a, animated };\n","/**\n * External dependencies\n */\nimport { Controller } from '@react-spring/web';\n\n/**\n * WordPress dependencies\n */\nimport { useLayoutEffect, useMemo, useRef } from '@wordpress/element';\nimport { getScrollContainer } from '@wordpress/dom';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * If the block count exceeds the threshold, we disable the reordering animation\n * to avoid laginess.\n */\nconst BLOCK_ANIMATION_THRESHOLD = 200;\n\nfunction getAbsolutePosition( element ) {\n\treturn {\n\t\ttop: element.offsetTop,\n\t\tleft: element.offsetLeft,\n\t};\n}\n\n/**\n * Hook used to compute the styles required to move a div into a new position.\n *\n * The way this animation works is the following:\n *  - It first renders the element as if there was no animation.\n *  - It takes a snapshot of the position of the block to use it\n *    as a destination point for the animation.\n *  - It restores the element to the previous position using a CSS transform\n *  - It uses the \"resetAnimation\" flag to reset the animation\n *    from the beginning in order to animate to the new destination point.\n *\n * @param {Object} $1                          Options\n * @param {*}      $1.triggerAnimationOnChange Variable used to trigger the animation if it changes.\n * @param {string} $1.clientId\n */\nfunction useMovingAnimation( { triggerAnimationOnChange, clientId } ) {\n\tconst ref = useRef();\n\tconst {\n\t\tisTyping,\n\t\tgetGlobalBlockCount,\n\t\tisBlockSelected,\n\t\tisFirstMultiSelectedBlock,\n\t\tisBlockMultiSelected,\n\t\tisAncestorMultiSelected,\n\t\tisDraggingBlocks,\n\t} = useSelect( blockEditorStore );\n\n\t// Whenever the trigger changes, we need to take a snapshot of the current\n\t// position of the block to use it as a destination point for the animation.\n\tconst { previous, prevRect } = useMemo(\n\t\t() => ( {\n\t\t\tprevious: ref.current && getAbsolutePosition( ref.current ),\n\t\t\tprevRect: ref.current && ref.current.getBoundingClientRect(),\n\t\t} ),\n\t\t[ triggerAnimationOnChange ]\n\t);\n\n\tuseLayoutEffect( () => {\n\t\tif ( ! previous || ! ref.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst scrollContainer = getScrollContainer( ref.current );\n\t\tconst isSelected = isBlockSelected( clientId );\n\t\tconst adjustScrolling =\n\t\t\tisSelected || isFirstMultiSelectedBlock( clientId );\n\t\tconst isDragging = isDraggingBlocks();\n\n\t\tfunction preserveScrollPosition() {\n\t\t\t// The user already scrolled when dragging blocks.\n\t\t\tif ( isDragging ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( adjustScrolling && prevRect ) {\n\t\t\t\tconst blockRect = ref.current.getBoundingClientRect();\n\t\t\t\tconst diff = blockRect.top - prevRect.top;\n\n\t\t\t\tif ( diff ) {\n\t\t\t\t\tscrollContainer.scrollTop += diff;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// We disable the animation if the user has a preference for reduced\n\t\t// motion, if the user is typing (insertion by Enter), or if the block\n\t\t// count exceeds the threshold (insertion caused all the blocks that\n\t\t// follow to animate).\n\t\t// To do: consider enabling the _moving_ animation even for large\n\t\t// posts, while only disabling the _insertion_ animation?\n\t\tconst disableAnimation =\n\t\t\twindow.matchMedia( '(prefers-reduced-motion: reduce)' ).matches ||\n\t\t\tisTyping() ||\n\t\t\tgetGlobalBlockCount() > BLOCK_ANIMATION_THRESHOLD;\n\n\t\tif ( disableAnimation ) {\n\t\t\t// If the animation is disabled and the scroll needs to be adjusted,\n\t\t\t// just move directly to the final scroll position.\n\t\t\tpreserveScrollPosition();\n\t\t\treturn;\n\t\t}\n\n\t\tconst isPartOfSelection =\n\t\t\tisSelected ||\n\t\t\tisBlockMultiSelected( clientId ) ||\n\t\t\tisAncestorMultiSelected( clientId );\n\n\t\t// The user already dragged the blocks to the new position, so don't\n\t\t// animate the dragged blocks.\n\t\tif ( isPartOfSelection && isDragging ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure the other blocks move under the selected block(s).\n\t\tconst zIndex = isPartOfSelection ? '1' : '';\n\n\t\tconst controller = new Controller( {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tconfig: { mass: 5, tension: 2000, friction: 200 },\n\t\t\tonChange( { value } ) {\n\t\t\t\tif ( ! ref.current ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet { x, y } = value;\n\t\t\t\tx = Math.round( x );\n\t\t\t\ty = Math.round( y );\n\t\t\t\tconst finishedMoving = x === 0 && y === 0;\n\t\t\t\tref.current.style.transformOrigin = 'center center';\n\t\t\t\tref.current.style.transform = finishedMoving\n\t\t\t\t\t? null // Set to `null` to explicitly remove the transform.\n\t\t\t\t\t: `translate3d(${ x }px,${ y }px,0)`;\n\t\t\t\tref.current.style.zIndex = zIndex;\n\t\t\t\tpreserveScrollPosition();\n\t\t\t},\n\t\t} );\n\n\t\tref.current.style.transform = undefined;\n\t\tconst destination = getAbsolutePosition( ref.current );\n\n\t\tconst x = Math.round( previous.left - destination.left );\n\t\tconst y = Math.round( previous.top - destination.top );\n\n\t\tcontroller.start( { x: 0, y: 0, from: { x, y } } );\n\n\t\treturn () => {\n\t\t\tcontroller.stop();\n\t\t\tcontroller.set( { x: 0, y: 0 } );\n\t\t};\n\t}, [\n\t\tprevious,\n\t\tprevRect,\n\t\tclientId,\n\t\tisTyping,\n\t\tgetGlobalBlockCount,\n\t\tisBlockSelected,\n\t\tisFirstMultiSelectedBlock,\n\t\tisBlockMultiSelected,\n\t\tisAncestorMultiSelected,\n\t\tisDraggingBlocks,\n\t] );\n\n\treturn ref;\n}\n\nexport default useMovingAnimation;\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\nimport {\n\tfocus,\n\tisFormElement,\n\tisTextField,\n\tplaceCaretAtHorizontalEdge,\n} from '@wordpress/dom';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { isInsideRootBlock } from '../../../utils/dom';\nimport { store as blockEditorStore } from '../../../store';\nimport { unlock } from '../../../lock-unlock';\n\n/** @typedef {import('@wordpress/element').RefObject} RefObject */\n\n/**\n * Transitions focus to the block or inner tabbable when the block becomes\n * selected and an initial position is set.\n *\n * @param {string} clientId Block client ID.\n *\n * @return {RefObject} React ref with the block element.\n */\nexport function useFocusFirstElement( { clientId, initialPosition } ) {\n\tconst ref = useRef();\n\tconst { isBlockSelected, isMultiSelecting, isZoomOut } = unlock(\n\t\tuseSelect( blockEditorStore )\n\t);\n\n\tuseEffect( () => {\n\t\t// Check if the block is still selected at the time this effect runs.\n\t\tif (\n\t\t\t! isBlockSelected( clientId ) ||\n\t\t\tisMultiSelecting() ||\n\t\t\tisZoomOut()\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( initialPosition === undefined || initialPosition === null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! ref.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { ownerDocument } = ref.current;\n\n\t\t// Do not focus the block if it already contains the active element.\n\t\tif ( isInsideRootBlock( ref.current, ownerDocument.activeElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find all tabbables within node.\n\t\tconst textInputs = focus.tabbable\n\t\t\t.find( ref.current )\n\t\t\t.filter( ( node ) => isTextField( node ) );\n\n\t\t// If reversed (e.g. merge via backspace), use the last in the set of\n\t\t// tabbables.\n\t\tconst isReverse = -1 === initialPosition;\n\t\tconst target =\n\t\t\ttextInputs[ isReverse ? textInputs.length - 1 : 0 ] || ref.current;\n\n\t\tif ( ! isInsideRootBlock( ref.current, target ) ) {\n\t\t\tref.current.focus();\n\t\t\treturn;\n\t\t}\n\n\t\t// Check to see if element is focussable before a generic caret insert.\n\t\tif ( ! ref.current.getAttribute( 'contenteditable' ) ) {\n\t\t\tconst focusElement = focus.tabbable.findNext( ref.current );\n\t\t\t// Make sure focusElement is valid, contained in the same block, and a form field.\n\t\t\tif (\n\t\t\t\tfocusElement &&\n\t\t\t\tisInsideRootBlock( ref.current, focusElement ) &&\n\t\t\t\tisFormElement( focusElement )\n\t\t\t) {\n\t\t\t\tfocusElement.focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tplaceCaretAtHorizontalEdge( target, isReverse );\n\t}, [ initialPosition, clientId ] );\n\n\treturn ref;\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\n\nfunction listener( event ) {\n\tif ( event.defaultPrevented ) {\n\t\treturn;\n\t}\n\n\tevent.preventDefault();\n\tevent.currentTarget.classList.toggle(\n\t\t'is-hovered',\n\t\tevent.type === 'mouseover'\n\t);\n}\n\n/*\n * Adds `is-hovered` class when the block is hovered and in navigation or\n * outline mode.\n */\nexport function useIsHovered() {\n\treturn useRefEffect( ( node ) => {\n\t\tnode.addEventListener( 'mouseout', listener );\n\t\tnode.addEventListener( 'mouseover', listener );\n\n\t\treturn () => {\n\t\t\tnode.removeEventListener( 'mouseout', listener );\n\t\t\tnode.removeEventListener( 'mouseover', listener );\n\n\t\t\t// Remove class in case it lingers.\n\t\t\tnode.classList.remove( 'is-hovered' );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { isInsideRootBlock } from '../../../utils/dom';\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Selects the block if it receives focus.\n *\n * @param {string} clientId Block client ID.\n */\nexport function useFocusHandler( clientId ) {\n\tconst { isBlockSelected } = useSelect( blockEditorStore );\n\tconst { selectBlock, selectionChange } = useDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\t/**\n\t\t\t * Marks the block as selected when focused and not already\n\t\t\t * selected. This specifically handles the case where block does not\n\t\t\t * set focus on its own (via `setFocus`), typically if there is no\n\t\t\t * focusable input in the block.\n\t\t\t *\n\t\t\t * @param {FocusEvent} event Focus event.\n\t\t\t */\n\t\t\tfunction onFocus( event ) {\n\t\t\t\t// When the whole editor is editable, let writing flow handle\n\t\t\t\t// selection.\n\t\t\t\tif (\n\t\t\t\t\tnode.parentElement.closest( '[contenteditable=\"true\"]' )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Check synchronously because a non-selected block might be\n\t\t\t\t// getting data through `useSelect` asynchronously.\n\t\t\t\tif ( isBlockSelected( clientId ) ) {\n\t\t\t\t\t// Potentially change selection away from rich text.\n\t\t\t\t\tif ( ! event.target.isContentEditable ) {\n\t\t\t\t\t\tselectionChange( clientId );\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// If an inner block is focussed, that block is responsible for\n\t\t\t\t// setting the selected block.\n\t\t\t\tif ( ! isInsideRootBlock( node, event.target ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tselectBlock( clientId );\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'focusin', onFocus );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'focusin', onFocus );\n\t\t\t};\n\t\t},\n\t\t[ isBlockSelected, selectBlock ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst dragHandle = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z\" />\n\t</SVG>\n);\n\nexport default dragHandle;\n","/**\n * WordPress dependencies\n */\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { Flex, FlexItem } from '@wordpress/components';\nimport { dragHandle } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\n\nexport default function BlockDraggableChip( {\n\tcount,\n\ticon,\n\tisPattern,\n\tfadeWhenDisabled,\n} ) {\n\tconst patternLabel = isPattern && __( 'Pattern' );\n\treturn (\n\t\t<div className=\"block-editor-block-draggable-chip-wrapper\">\n\t\t\t<div\n\t\t\t\tclassName=\"block-editor-block-draggable-chip\"\n\t\t\t\tdata-testid=\"block-draggable-chip\"\n\t\t\t>\n\t\t\t\t<Flex\n\t\t\t\t\tjustify=\"center\"\n\t\t\t\t\tclassName=\"block-editor-block-draggable-chip__content\"\n\t\t\t\t>\n\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t{ icon ? (\n\t\t\t\t\t\t\t<BlockIcon icon={ icon } />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tpatternLabel ||\n\t\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t\t/* translators: %d: Number of blocks. */\n\t\t\t\t\t\t\t\t_n( '%d block', '%d blocks', count ),\n\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) }\n\t\t\t\t\t</FlexItem>\n\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t<BlockIcon icon={ dragHandle } />\n\t\t\t\t\t</FlexItem>\n\t\t\t\t\t{ fadeWhenDisabled && (\n\t\t\t\t\t\t<FlexItem className=\"block-editor-block-draggable-chip__disabled\">\n\t\t\t\t\t\t\t<span className=\"block-editor-block-draggable-chip__disabled-icon\"></span>\n\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t) }\n\t\t\t\t</Flex>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { isTextField } from '@wordpress/dom';\nimport { ENTER, BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\nimport { createRoot } from '@wordpress/element';\nimport { store as blocksStore } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\nimport { unlock } from '../../../lock-unlock';\nimport BlockDraggableChip from '../../../components/block-draggable/draggable-chip';\n\n/**\n * Adds block behaviour:\n *   - Removes the block on BACKSPACE.\n *   - Inserts a default block on ENTER.\n *   - Disables dragging of block contents.\n *\n * @param {string} clientId Block client ID.\n */\nexport function useEventHandlers( { clientId, isSelected } ) {\n\tconst { getBlockType } = useSelect( blocksStore );\n\tconst { getBlockRootClientId, isZoomOut, hasMultiSelection, getBlockName } =\n\t\tunlock( useSelect( blockEditorStore ) );\n\tconst {\n\t\tinsertAfterBlock,\n\t\tremoveBlock,\n\t\tresetZoomLevel,\n\t\tstartDraggingBlocks,\n\t\tstopDraggingBlocks,\n\t} = unlock( useDispatch( blockEditorStore ) );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! isSelected ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Interprets keydown event intent to remove or insert after block if\n\t\t\t * key event occurs on wrapper node. This can occur when the block has\n\t\t\t * no text fields of its own, particularly after initial insertion, to\n\t\t\t * allow for easy deletion and continuous writing flow to add additional\n\t\t\t * content.\n\t\t\t *\n\t\t\t * @param {KeyboardEvent} event Keydown event.\n\t\t\t */\n\t\t\tfunction onKeyDown( event ) {\n\t\t\t\tconst { keyCode, target } = event;\n\n\t\t\t\tif (\n\t\t\t\t\tkeyCode !== ENTER &&\n\t\t\t\t\tkeyCode !== BACKSPACE &&\n\t\t\t\t\tkeyCode !== DELETE\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( target !== node || isTextField( target ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif ( keyCode === ENTER && isZoomOut() ) {\n\t\t\t\t\tresetZoomLevel();\n\t\t\t\t} else if ( keyCode === ENTER ) {\n\t\t\t\t\tinsertAfterBlock( clientId );\n\t\t\t\t} else {\n\t\t\t\t\tremoveBlock( clientId );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Prevents default dragging behavior within a block. To do: we must\n\t\t\t * handle this in the future and clean up the drag target.\n\t\t\t *\n\t\t\t * @param {DragEvent} event Drag event.\n\t\t\t */\n\t\t\tfunction onDragStart( event ) {\n\t\t\t\tif (\n\t\t\t\t\tnode !== event.target ||\n\t\t\t\t\tnode.isContentEditable ||\n\t\t\t\t\tnode.ownerDocument.activeElement !== node ||\n\t\t\t\t\thasMultiSelection()\n\t\t\t\t) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst data = JSON.stringify( {\n\t\t\t\t\ttype: 'block',\n\t\t\t\t\tsrcClientIds: [ clientId ],\n\t\t\t\t\tsrcRootClientId: getBlockRootClientId( clientId ),\n\t\t\t\t} );\n\t\t\t\tevent.dataTransfer.effectAllowed = 'move'; // remove \"+\" cursor\n\t\t\t\tevent.dataTransfer.clearData();\n\t\t\t\tevent.dataTransfer.setData( 'wp-blocks', data );\n\t\t\t\tconst { ownerDocument } = node;\n\t\t\t\tconst { defaultView } = ownerDocument;\n\t\t\t\tconst selection = defaultView.getSelection();\n\t\t\t\tselection.removeAllRanges();\n\n\t\t\t\tconst domNode = document.createElement( 'div' );\n\t\t\t\tconst root = createRoot( domNode );\n\t\t\t\troot.render(\n\t\t\t\t\t<BlockDraggableChip\n\t\t\t\t\t\ticon={ getBlockType( getBlockName( clientId ) ).icon }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t\tdocument.body.appendChild( domNode );\n\t\t\t\tdomNode.style.position = 'absolute';\n\t\t\t\tdomNode.style.top = '0';\n\t\t\t\tdomNode.style.left = '0';\n\t\t\t\tdomNode.style.zIndex = '1000';\n\t\t\t\tdomNode.style.pointerEvents = 'none';\n\n\t\t\t\t// Setting the drag chip as the drag image actually works, but\n\t\t\t\t// the behaviour is slightly different in every browser. In\n\t\t\t\t// Safari, it animates, in Firefox it's slightly transparent...\n\t\t\t\t// So we set a fake drag image and have to reposition it\n\t\t\t\t// ourselves.\n\t\t\t\tconst dragElement = ownerDocument.createElement( 'div' );\n\t\t\t\t// Chrome will show a globe icon if the drag element does not\n\t\t\t\t// have dimensions.\n\t\t\t\tdragElement.style.width = '1px';\n\t\t\t\tdragElement.style.height = '1px';\n\t\t\t\tdragElement.style.position = 'fixed';\n\t\t\t\tdragElement.style.visibility = 'hidden';\n\t\t\t\townerDocument.body.appendChild( dragElement );\n\t\t\t\tevent.dataTransfer.setDragImage( dragElement, 0, 0 );\n\n\t\t\t\tlet offset = { x: 0, y: 0 };\n\n\t\t\t\tif ( document !== ownerDocument ) {\n\t\t\t\t\tconst frame = defaultView.frameElement;\n\t\t\t\t\tif ( frame ) {\n\t\t\t\t\t\tconst rect = frame.getBoundingClientRect();\n\t\t\t\t\t\toffset = { x: rect.left, y: rect.top };\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// chip handle offset\n\t\t\t\toffset.x -= 58;\n\n\t\t\t\tfunction over( e ) {\n\t\t\t\t\tdomNode.style.transform = `translate( ${\n\t\t\t\t\t\te.clientX + offset.x\n\t\t\t\t\t}px, ${ e.clientY + offset.y }px )`;\n\t\t\t\t}\n\n\t\t\t\tover( event );\n\n\t\t\t\tfunction end() {\n\t\t\t\t\townerDocument.removeEventListener( 'dragover', over );\n\t\t\t\t\townerDocument.removeEventListener( 'dragend', end );\n\t\t\t\t\tdomNode.remove();\n\t\t\t\t\tdragElement.remove();\n\t\t\t\t\tstopDraggingBlocks();\n\t\t\t\t\tdocument.body.classList.remove(\n\t\t\t\t\t\t'is-dragging-components-draggable'\n\t\t\t\t\t);\n\t\t\t\t\townerDocument.documentElement.classList.remove(\n\t\t\t\t\t\t'is-dragging'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\townerDocument.addEventListener( 'dragover', over );\n\t\t\t\townerDocument.addEventListener( 'dragend', end );\n\t\t\t\townerDocument.addEventListener( 'drop', end );\n\n\t\t\t\tstartDraggingBlocks( [ clientId ] );\n\t\t\t\t// Important because it hides the block toolbar.\n\t\t\t\tdocument.body.classList.add(\n\t\t\t\t\t'is-dragging-components-draggable'\n\t\t\t\t);\n\t\t\t\townerDocument.documentElement.classList.add( 'is-dragging' );\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\t\tnode.addEventListener( 'dragstart', onDragStart );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t\t\tnode.removeEventListener( 'dragstart', onDragStart );\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tclientId,\n\t\t\tisSelected,\n\t\t\tgetBlockRootClientId,\n\t\t\tinsertAfterBlock,\n\t\t\tremoveBlock,\n\t\t\tisZoomOut,\n\t\t\tresetZoomLevel,\n\t\t\thasMultiSelection,\n\t\t\tstartDraggingBlocks,\n\t\t\tstopDraggingBlocks,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { IntersectionObserver } from '../';\n\nexport function useIntersectionObserver() {\n\tconst observer = useContext( IntersectionObserver );\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( observer ) {\n\t\t\t\tobserver.observe( node );\n\t\t\t\treturn () => {\n\t\t\t\t\tobserver.unobserve( node );\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\t[ observer ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useReducedMotion, useRefEffect } from '@wordpress/compose';\n\nexport function useScrollIntoView( { isSelected } ) {\n\tconst prefersReducedMotion = useReducedMotion();\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( isSelected ) {\n\t\t\t\tconst { ownerDocument } = node;\n\t\t\t\tconst { defaultView } = ownerDocument;\n\t\t\t\tif ( ! defaultView.IntersectionObserver ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst observer = new defaultView.IntersectionObserver(\n\t\t\t\t\t( entries ) => {\n\t\t\t\t\t\t// Once observing starts, we always get an initial\n\t\t\t\t\t\t// entry with the intersecting state.\n\t\t\t\t\t\tif ( ! entries[ 0 ].isIntersecting ) {\n\t\t\t\t\t\t\tnode.scrollIntoView( {\n\t\t\t\t\t\t\t\tbehavior: prefersReducedMotion\n\t\t\t\t\t\t\t\t\t? 'instant'\n\t\t\t\t\t\t\t\t\t: 'smooth',\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tobserver.observe( node );\n\t\t\t\treturn () => {\n\t\t\t\t\tobserver.disconnect();\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\t[ isSelected ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nexport function useFlashEditableBlocks( {\n\tclientId = '',\n\tisEnabled = true,\n} = {} ) {\n\tconst { getEnabledClientIdsTree } = unlock( useSelect( blockEditorStore ) );\n\n\treturn useRefEffect(\n\t\t( element ) => {\n\t\t\tif ( ! isEnabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst flashEditableBlocks = () => {\n\t\t\t\tgetEnabledClientIdsTree( clientId ).forEach(\n\t\t\t\t\t( { clientId: id } ) => {\n\t\t\t\t\t\tconst block = element.querySelector(\n\t\t\t\t\t\t\t`[data-block=\"${ id }\"]`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( ! block ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tblock.classList.remove( 'has-editable-outline' );\n\t\t\t\t\t\t// Force reflow to trigger the animation.\n\t\t\t\t\t\t// eslint-disable-next-line no-unused-expressions\n\t\t\t\t\t\tblock.offsetWidth;\n\t\t\t\t\t\tblock.classList.add( 'has-editable-outline' );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tconst handleClick = ( event ) => {\n\t\t\t\tconst shouldFlash =\n\t\t\t\t\tevent.target === element ||\n\t\t\t\t\tevent.target.classList.contains( 'is-root-container' );\n\t\t\t\tif ( ! shouldFlash ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tevent.preventDefault();\n\t\t\t\tflashEditableBlocks();\n\t\t\t};\n\n\t\t\telement.addEventListener( 'click', handleClick );\n\t\t\treturn () => element.removeEventListener( 'click', handleClick );\n\t\t},\n\t\t[ isEnabled ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\n\nconst nodesByDocument = new Map();\n\nfunction add( doc, node ) {\n\tlet set = nodesByDocument.get( doc );\n\tif ( ! set ) {\n\t\tset = new Set();\n\t\tnodesByDocument.set( doc, set );\n\t\tdoc.addEventListener( 'pointerdown', down );\n\t}\n\tset.add( node );\n}\n\nfunction remove( doc, node ) {\n\tconst set = nodesByDocument.get( doc );\n\tif ( set ) {\n\t\tset.delete( node );\n\t\trestore( node );\n\t\tif ( set.size === 0 ) {\n\t\t\tnodesByDocument.delete( doc );\n\t\t\tdoc.removeEventListener( 'pointerdown', down );\n\t\t}\n\t}\n}\n\nfunction restore( node ) {\n\tconst prevDraggable = node.getAttribute( 'data-draggable' );\n\tif ( prevDraggable ) {\n\t\tnode.removeAttribute( 'data-draggable' );\n\t\t// Only restore if `draggable` is still removed. It could have been\n\t\t// changed by React in the meantime.\n\t\tif ( prevDraggable === 'true' && ! node.getAttribute( 'draggable' ) ) {\n\t\t\tnode.setAttribute( 'draggable', 'true' );\n\t\t}\n\t}\n}\n\nfunction down( event ) {\n\tconst { target } = event;\n\tconst { ownerDocument, isContentEditable, tagName } = target;\n\tconst isInputOrTextArea = [ 'INPUT', 'TEXTAREA' ].includes( tagName );\n\n\tconst nodes = nodesByDocument.get( ownerDocument );\n\n\tif ( isContentEditable || isInputOrTextArea ) {\n\t\t// Whenever an editable element or an input or textarea is clicked,\n\t\t// check which draggable blocks contain this element, and temporarily\n\t\t// disable draggability.\n\t\tfor ( const node of nodes ) {\n\t\t\tif (\n\t\t\t\tnode.getAttribute( 'draggable' ) === 'true' &&\n\t\t\t\tnode.contains( target )\n\t\t\t) {\n\t\t\t\tnode.removeAttribute( 'draggable' );\n\t\t\t\tnode.setAttribute( 'data-draggable', 'true' );\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// Whenever a non-editable element or an input or textarea is clicked,\n\t\t// re-enable draggability for any blocks that were previously disabled.\n\t\tfor ( const node of nodes ) {\n\t\t\trestore( node );\n\t\t}\n\t}\n}\n\n/**\n * In Firefox, the `draggable` and `contenteditable` or `input` or `textarea`\n * elements don't play well together. When these elements are within a\n * `draggable` element, selection doesn't get set in the right place. The only\n * solution is to temporarily remove the `draggable` attribute clicking inside\n * these elements.\n * @return {Function} Cleanup function.\n */\nexport function useFirefoxDraggableCompatibility() {\n\treturn useRefEffect( ( node ) => {\n\t\tadd( node.ownerDocument, node );\n\t\treturn () => {\n\t\t\tremove( node.ownerDocument, node );\n\t\t};\n\t}, [] );\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useContext } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { __unstableGetBlockProps as getBlockProps } from '@wordpress/blocks';\nimport { useMergeRefs, useDisabled } from '@wordpress/compose';\nimport warning from '@wordpress/warning';\n\n/**\n * Internal dependencies\n */\nimport useMovingAnimation from '../../use-moving-animation';\nimport { PrivateBlockContext } from '../private-block-context';\nimport { useFocusFirstElement } from './use-focus-first-element';\nimport { useIsHovered } from './use-is-hovered';\nimport {\n\tblockBindingsKey,\n\tuseBlockEditContext,\n} from '../../block-edit/context';\nimport { useFocusHandler } from './use-focus-handler';\nimport { useEventHandlers } from './use-selected-block-event-handlers';\nimport { useBlockRefProvider } from './use-block-refs';\nimport { useIntersectionObserver } from './use-intersection-observer';\nimport { useScrollIntoView } from './use-scroll-into-view';\nimport { useFlashEditableBlocks } from '../../use-flash-editable-blocks';\nimport { canBindBlock } from '../../../utils/block-bindings';\nimport { useFirefoxDraggableCompatibility } from './use-firefox-draggable-compatibility';\n\n/**\n * This hook is used to lightly mark an element as a block element. The element\n * should be the outermost element of a block. Call this hook and pass the\n * returned props to the element to mark as a block. If you define a ref for the\n * element, it is important to pass the ref to this hook, which the hook in turn\n * will pass to the component through the props it returns. Optionally, you can\n * also pass any other props through this hook, and they will be merged and\n * returned.\n *\n * Use of this hook on the outermost element of a block is required if using API >= v2.\n *\n * @example\n * ```js\n * import { useBlockProps } from '@wordpress/block-editor';\n *\n * export default function Edit() {\n *\n *   const blockProps = useBlockProps( {\n *     className: 'my-custom-class',\n *     style: {\n *       color: '#222222',\n *       backgroundColor: '#eeeeee'\n *     }\n *   } )\n *\n *   return (\n *\t    <div { ...blockProps }>\n *\n *     </div>\n *   )\n * }\n *\n * ```\n *\n *\n * @param {Object}  props                    Optional. Props to pass to the element. Must contain\n *                                           the ref if one is defined.\n * @param {Object}  options                  Options for internal use only.\n * @param {boolean} options.__unstableIsHtml\n *\n * @return {Object} Props to pass to the element to mark as a block.\n */\nexport function useBlockProps( props = {}, { __unstableIsHtml } = {} ) {\n\tconst {\n\t\tclientId,\n\t\tclassName,\n\t\twrapperProps = {},\n\t\tisAligned,\n\t\tindex,\n\t\tmode,\n\t\tname,\n\t\tblockApiVersion,\n\t\tblockTitle,\n\t\tisSelected,\n\t\tisSubtreeDisabled,\n\t\thasOverlay,\n\t\tinitialPosition,\n\t\tblockEditingMode,\n\t\tisHighlighted,\n\t\tisMultiSelected,\n\t\tisPartiallySelected,\n\t\tisReusable,\n\t\tisDragging,\n\t\thasChildSelected,\n\t\tisEditingDisabled,\n\t\thasEditableOutline,\n\t\tisTemporarilyEditingAsBlocks,\n\t\tdefaultClassName,\n\t\tisSectionBlock,\n\t\tcanMove,\n\t} = useContext( PrivateBlockContext );\n\n\t// translators: %s: Type of block (i.e. Text, Image etc)\n\tconst blockLabel = sprintf( __( 'Block: %s' ), blockTitle );\n\tconst htmlSuffix = mode === 'html' && ! __unstableIsHtml ? '-visual' : '';\n\tconst ffDragRef = useFirefoxDraggableCompatibility();\n\tconst mergedRefs = useMergeRefs( [\n\t\tprops.ref,\n\t\tuseFocusFirstElement( { clientId, initialPosition } ),\n\t\tuseBlockRefProvider( clientId ),\n\t\tuseFocusHandler( clientId ),\n\t\tuseEventHandlers( { clientId, isSelected } ),\n\t\tuseIsHovered(),\n\t\tuseIntersectionObserver(),\n\t\tuseMovingAnimation( { triggerAnimationOnChange: index, clientId } ),\n\t\tuseDisabled( { isDisabled: ! hasOverlay } ),\n\t\tuseFlashEditableBlocks( {\n\t\t\tclientId,\n\t\t\tisEnabled: isSectionBlock,\n\t\t} ),\n\t\tuseScrollIntoView( { isSelected } ),\n\t\tcanMove ? ffDragRef : undefined,\n\t] );\n\n\tconst blockEditContext = useBlockEditContext();\n\tconst hasBlockBindings = !! blockEditContext[ blockBindingsKey ];\n\tconst bindingsStyle =\n\t\thasBlockBindings && canBindBlock( name )\n\t\t\t? {\n\t\t\t\t\t'--wp-admin-theme-color': 'var(--wp-block-synced-color)',\n\t\t\t\t\t'--wp-admin-theme-color--rgb':\n\t\t\t\t\t\t'var(--wp-block-synced-color--rgb)',\n\t\t\t  }\n\t\t\t: {};\n\n\t// Ensures it warns only inside the `edit` implementation for the block.\n\tif ( blockApiVersion < 2 && clientId === blockEditContext.clientId ) {\n\t\twarning(\n\t\t\t`Block type \"${ name }\" must support API version 2 or higher to work correctly with \"useBlockProps\" method.`\n\t\t);\n\t}\n\n\tlet hasNegativeMargin = false;\n\tif (\n\t\twrapperProps?.style?.marginTop?.charAt( 0 ) === '-' ||\n\t\twrapperProps?.style?.marginBottom?.charAt( 0 ) === '-' ||\n\t\twrapperProps?.style?.marginLeft?.charAt( 0 ) === '-' ||\n\t\twrapperProps?.style?.marginRight?.charAt( 0 ) === '-'\n\t) {\n\t\thasNegativeMargin = true;\n\t}\n\n\treturn {\n\t\ttabIndex: blockEditingMode === 'disabled' ? -1 : 0,\n\t\tdraggable: canMove && ! hasChildSelected ? true : undefined,\n\t\t...wrapperProps,\n\t\t...props,\n\t\tref: mergedRefs,\n\t\tid: `block-${ clientId }${ htmlSuffix }`,\n\t\trole: 'document',\n\t\t'aria-label': blockLabel,\n\t\t'data-block': clientId,\n\t\t'data-type': name,\n\t\t'data-title': blockTitle,\n\t\tinert: isSubtreeDisabled ? 'true' : undefined,\n\t\tclassName: clsx(\n\t\t\t'block-editor-block-list__block',\n\t\t\t{\n\t\t\t\t// The wp-block className is important for editor styles.\n\t\t\t\t'wp-block': ! isAligned,\n\t\t\t\t'has-block-overlay': hasOverlay,\n\t\t\t\t'is-selected': isSelected,\n\t\t\t\t'is-highlighted': isHighlighted,\n\t\t\t\t'is-multi-selected': isMultiSelected,\n\t\t\t\t'is-partially-selected': isPartiallySelected,\n\t\t\t\t'is-reusable': isReusable,\n\t\t\t\t'is-dragging': isDragging,\n\t\t\t\t'has-child-selected': hasChildSelected,\n\t\t\t\t'is-editing-disabled': isEditingDisabled,\n\t\t\t\t'has-editable-outline': hasEditableOutline,\n\t\t\t\t'has-negative-margin': hasNegativeMargin,\n\t\t\t\t'is-content-locked-temporarily-editing-as-blocks':\n\t\t\t\t\tisTemporarilyEditingAsBlocks,\n\t\t\t},\n\t\t\tclassName,\n\t\t\tprops.className,\n\t\t\twrapperProps.className,\n\t\t\tdefaultClassName\n\t\t),\n\t\tstyle: { ...wrapperProps.style, ...props.style, ...bindingsStyle },\n\t};\n}\n\n/**\n * Call within a save function to get the props for the block wrapper.\n *\n * @param {Object} props Optional. Props to pass to the element.\n */\nuseBlockProps.save = getBlockProps;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { memo, RawHTML, useContext, useMemo } from '@wordpress/element';\nimport {\n\tgetBlockType,\n\tgetSaveContent,\n\tisUnmodifiedDefaultBlock,\n\tserializeRawBlock,\n\tswitchToBlockType,\n\tgetDefaultBlockName,\n\tisUnmodifiedBlock,\n\tisReusableBlock,\n\tgetBlockDefaultClassName,\n\thasBlockSupport,\n\tcreateBlock,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { withFilters } from '@wordpress/components';\nimport { withDispatch, useSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { safeHTML } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport BlockEdit from '../block-edit';\nimport BlockInvalidWarning from './block-invalid-warning';\nimport BlockCrashWarning from './block-crash-warning';\nimport BlockCrashBoundary from './block-crash-boundary';\nimport BlockHtml from './block-html';\nimport { useBlockProps } from './use-block-props';\nimport { store as blockEditorStore } from '../../store';\nimport { useLayout } from './layout';\nimport { PrivateBlockContext } from './private-block-context';\n\nimport { unlock } from '../../lock-unlock';\n\n/**\n * Merges wrapper props with special handling for classNames and styles.\n *\n * @param {Object} propsA\n * @param {Object} propsB\n *\n * @return {Object} Merged props.\n */\nfunction mergeWrapperProps( propsA, propsB ) {\n\tconst newProps = {\n\t\t...propsA,\n\t\t...propsB,\n\t};\n\n\t// May be set to undefined, so check if the property is set!\n\tif (\n\t\tpropsA?.hasOwnProperty( 'className' ) &&\n\t\tpropsB?.hasOwnProperty( 'className' )\n\t) {\n\t\tnewProps.className = clsx( propsA.className, propsB.className );\n\t}\n\n\tif (\n\t\tpropsA?.hasOwnProperty( 'style' ) &&\n\t\tpropsB?.hasOwnProperty( 'style' )\n\t) {\n\t\tnewProps.style = { ...propsA.style, ...propsB.style };\n\t}\n\n\treturn newProps;\n}\n\nfunction Block( { children, isHtml, ...props } ) {\n\treturn (\n\t\t<div { ...useBlockProps( props, { __unstableIsHtml: isHtml } ) }>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n\nfunction BlockListBlock( {\n\tblock: { __unstableBlockSource },\n\tmode,\n\tisLocked,\n\tcanRemove,\n\tclientId,\n\tisSelected,\n\tisSelectionEnabled,\n\tclassName,\n\t__unstableLayoutClassNames: layoutClassNames,\n\tname,\n\tisValid,\n\tattributes,\n\twrapperProps,\n\tsetAttributes,\n\tonReplace,\n\tonRemove,\n\tonInsertBlocksAfter,\n\tonMerge,\n\ttoggleSelection,\n} ) {\n\tconst {\n\t\tmayDisplayControls,\n\t\tmayDisplayParentControls,\n\t\tthemeSupportsLayout,\n\t\t...context\n\t} = useContext( PrivateBlockContext );\n\n\tconst parentLayout = useLayout() || {};\n\n\t// We wrap the BlockEdit component in a div that hides it when editing in\n\t// HTML mode. This allows us to render all of the ancillary pieces\n\t// (InspectorControls, etc.) which are inside `BlockEdit` but not\n\t// `BlockHTML`, even in HTML mode.\n\tlet blockEdit = (\n\t\t<BlockEdit\n\t\t\tname={ name }\n\t\t\tisSelected={ isSelected }\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tinsertBlocksAfter={ isLocked ? undefined : onInsertBlocksAfter }\n\t\t\tonReplace={ canRemove ? onReplace : undefined }\n\t\t\tonRemove={ canRemove ? onRemove : undefined }\n\t\t\tmergeBlocks={ canRemove ? onMerge : undefined }\n\t\t\tclientId={ clientId }\n\t\t\tisSelectionEnabled={ isSelectionEnabled }\n\t\t\ttoggleSelection={ toggleSelection }\n\t\t\t__unstableLayoutClassNames={ layoutClassNames }\n\t\t\t__unstableParentLayout={\n\t\t\t\tObject.keys( parentLayout ).length ? parentLayout : undefined\n\t\t\t}\n\t\t\tmayDisplayControls={ mayDisplayControls }\n\t\t\tmayDisplayParentControls={ mayDisplayParentControls }\n\t\t\tblockEditingMode={ context.blockEditingMode }\n\t\t\tisPreviewMode={ context.isPreviewMode }\n\t\t/>\n\t);\n\n\tconst blockType = getBlockType( name );\n\n\t// Determine whether the block has props to apply to the wrapper.\n\tif ( blockType?.getEditWrapperProps ) {\n\t\twrapperProps = mergeWrapperProps(\n\t\t\twrapperProps,\n\t\t\tblockType.getEditWrapperProps( attributes )\n\t\t);\n\t}\n\n\tconst isAligned =\n\t\twrapperProps &&\n\t\t!! wrapperProps[ 'data-align' ] &&\n\t\t! themeSupportsLayout;\n\n\t// Support for sticky position in classic themes with alignment wrappers.\n\n\tconst isSticky = className?.includes( 'is-position-sticky' );\n\n\t// For aligned blocks, provide a wrapper element so the block can be\n\t// positioned relative to the block column.\n\t// This is only kept for classic themes that don't support layout\n\t// Historically we used to rely on extra divs and data-align to\n\t// provide the alignments styles in the editor.\n\t// Due to the differences between frontend and backend, we migrated\n\t// to the layout feature, and we're now aligning the markup of frontend\n\t// and backend.\n\tif ( isAligned ) {\n\t\tblockEdit = (\n\t\t\t<div\n\t\t\t\tclassName={ clsx( 'wp-block', isSticky && className ) }\n\t\t\t\tdata-align={ wrapperProps[ 'data-align' ] }\n\t\t\t>\n\t\t\t\t{ blockEdit }\n\t\t\t</div>\n\t\t);\n\t}\n\n\tlet block;\n\n\tif ( ! isValid ) {\n\t\tconst saveContent = __unstableBlockSource\n\t\t\t? serializeRawBlock( __unstableBlockSource )\n\t\t\t: getSaveContent( blockType, attributes );\n\n\t\tblock = (\n\t\t\t<Block className=\"has-warning\">\n\t\t\t\t<BlockInvalidWarning clientId={ clientId } />\n\t\t\t\t<RawHTML>{ safeHTML( saveContent ) }</RawHTML>\n\t\t\t</Block>\n\t\t);\n\t} else if ( mode === 'html' ) {\n\t\t// Render blockEdit so the inspector controls don't disappear.\n\t\t// See #8969.\n\t\tblock = (\n\t\t\t<>\n\t\t\t\t<div style={ { display: 'none' } }>{ blockEdit }</div>\n\t\t\t\t<Block isHtml>\n\t\t\t\t\t<BlockHtml clientId={ clientId } />\n\t\t\t\t</Block>\n\t\t\t</>\n\t\t);\n\t} else if ( blockType?.apiVersion > 1 ) {\n\t\tblock = blockEdit;\n\t} else {\n\t\tblock = <Block>{ blockEdit }</Block>;\n\t}\n\n\tconst { 'data-align': dataAlign, ...restWrapperProps } = wrapperProps ?? {};\n\tconst updatedWrapperProps = {\n\t\t...restWrapperProps,\n\t\tclassName: clsx(\n\t\t\trestWrapperProps.className,\n\t\t\tdataAlign && themeSupportsLayout && `align${ dataAlign }`,\n\t\t\t! ( dataAlign && isSticky ) && className\n\t\t),\n\t};\n\n\t// We set a new context with the adjusted and filtered wrapperProps (through\n\t// `editor.BlockListBlock`), which the `BlockListBlockProvider` did not have\n\t// access to.\n\t// Note that the context value doesn't have to be memoized in this case\n\t// because when it changes, this component will be re-rendered anyway, and\n\t// none of the consumers (BlockListBlock and useBlockProps) are memoized or\n\t// \"pure\". This is different from the public BlockEditContext, where\n\t// consumers might be memoized or \"pure\".\n\treturn (\n\t\t<PrivateBlockContext.Provider\n\t\t\tvalue={ {\n\t\t\t\twrapperProps: updatedWrapperProps,\n\t\t\t\tisAligned,\n\t\t\t\t...context,\n\t\t\t} }\n\t\t>\n\t\t\t<BlockCrashBoundary\n\t\t\t\tfallback={\n\t\t\t\t\t<Block className=\"has-warning\">\n\t\t\t\t\t\t<BlockCrashWarning />\n\t\t\t\t\t</Block>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ block }\n\t\t\t</BlockCrashBoundary>\n\t\t</PrivateBlockContext.Provider>\n\t);\n}\n\nconst applyWithDispatch = withDispatch( ( dispatch, ownProps, registry ) => {\n\tconst {\n\t\tupdateBlockAttributes,\n\t\tinsertBlocks,\n\t\tmergeBlocks,\n\t\treplaceBlocks,\n\t\ttoggleSelection,\n\t\t__unstableMarkLastChangeAsPersistent,\n\t\tmoveBlocksToPosition,\n\t\tremoveBlock,\n\t\tselectBlock,\n\t} = dispatch( blockEditorStore );\n\n\t// Do not add new properties here, use `useDispatch` instead to avoid\n\t// leaking new props to the public API (editor.BlockListBlock filter).\n\treturn {\n\t\tsetAttributes( nextAttributes ) {\n\t\t\tconst { getMultiSelectedBlockClientIds } =\n\t\t\t\tregistry.select( blockEditorStore );\n\t\t\tconst multiSelectedBlockClientIds =\n\t\t\t\tgetMultiSelectedBlockClientIds();\n\t\t\tconst { clientId, attributes } = ownProps;\n\t\t\tconst clientIds = multiSelectedBlockClientIds.length\n\t\t\t\t? multiSelectedBlockClientIds\n\t\t\t\t: [ clientId ];\n\t\t\tconst newAttributes =\n\t\t\t\ttypeof nextAttributes === 'function'\n\t\t\t\t\t? nextAttributes( attributes )\n\t\t\t\t\t: nextAttributes;\n\n\t\t\tupdateBlockAttributes( clientIds, newAttributes );\n\t\t},\n\t\tonInsertBlocks( blocks, index ) {\n\t\t\tconst { rootClientId } = ownProps;\n\t\t\tinsertBlocks( blocks, index, rootClientId );\n\t\t},\n\t\tonInsertBlocksAfter( blocks ) {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst { getBlockIndex } = registry.select( blockEditorStore );\n\t\t\tconst index = getBlockIndex( clientId );\n\t\t\tinsertBlocks( blocks, index + 1, rootClientId );\n\t\t},\n\t\tonMerge( forward ) {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst {\n\t\t\t\tgetPreviousBlockClientId,\n\t\t\t\tgetNextBlockClientId,\n\t\t\t\tgetBlock,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tcanInsertBlockType,\n\t\t\t} = registry.select( blockEditorStore );\n\n\t\t\tfunction switchToDefaultOrRemove() {\n\t\t\t\tconst block = getBlock( clientId );\n\t\t\t\tconst defaultBlockName = getDefaultBlockName();\n\t\t\t\tconst defaultBlockType = getBlockType( defaultBlockName );\n\t\t\t\tif ( getBlockName( clientId ) !== defaultBlockName ) {\n\t\t\t\t\tconst replacement = switchToBlockType(\n\t\t\t\t\t\tblock,\n\t\t\t\t\t\tdefaultBlockName\n\t\t\t\t\t);\n\t\t\t\t\tif ( replacement && replacement.length ) {\n\t\t\t\t\t\treplaceBlocks( clientId, replacement );\n\t\t\t\t\t}\n\t\t\t\t} else if ( isUnmodifiedDefaultBlock( block ) ) {\n\t\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\n\t\t\t\t\tif ( nextBlockClientId ) {\n\t\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\t\tremoveBlock( clientId );\n\t\t\t\t\t\t\tselectBlock( nextBlockClientId );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} else if ( defaultBlockType.merge ) {\n\t\t\t\t\tconst attributes = defaultBlockType.merge(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tblock.attributes\n\t\t\t\t\t);\n\t\t\t\t\treplaceBlocks(\n\t\t\t\t\t\t[ clientId ],\n\t\t\t\t\t\t[ createBlock( defaultBlockName, attributes ) ]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Moves the block with clientId up one level. If the block type\n\t\t\t * cannot be inserted at the new location, it will be attempted to\n\t\t\t * convert to the default block type.\n\t\t\t *\n\t\t\t * @param {string}  _clientId       The block to move.\n\t\t\t * @param {boolean} changeSelection Whether to change the selection\n\t\t\t *                                  to the moved block.\n\t\t\t */\n\t\t\tfunction moveFirstItemUp( _clientId, changeSelection = true ) {\n\t\t\t\tconst wrapperBlockName = getBlockName( _clientId );\n\t\t\t\tconst wrapperBlockType = getBlockType( wrapperBlockName );\n\t\t\t\tconst isTextualWrapper = wrapperBlockType.category === 'text';\n\t\t\t\tconst targetRootClientId = getBlockRootClientId( _clientId );\n\t\t\t\tconst blockOrder = getBlockOrder( _clientId );\n\t\t\t\tconst [ firstClientId ] = blockOrder;\n\n\t\t\t\tif (\n\t\t\t\t\tblockOrder.length === 1 &&\n\t\t\t\t\tisUnmodifiedBlock( getBlock( firstClientId ) )\n\t\t\t\t) {\n\t\t\t\t\tremoveBlock( _clientId );\n\t\t\t\t} else if ( isTextualWrapper ) {\n\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tcanInsertBlockType(\n\t\t\t\t\t\t\t\tgetBlockName( firstClientId ),\n\t\t\t\t\t\t\t\ttargetRootClientId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t[ firstClientId ],\n\t\t\t\t\t\t\t\t_clientId,\n\t\t\t\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\t\t\t\tgetBlockIndex( _clientId )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst replacement = switchToBlockType(\n\t\t\t\t\t\t\t\tgetBlock( firstClientId ),\n\t\t\t\t\t\t\t\tgetDefaultBlockName()\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\treplacement &&\n\t\t\t\t\t\t\t\treplacement.length &&\n\t\t\t\t\t\t\t\treplacement.every( ( block ) =>\n\t\t\t\t\t\t\t\t\tcanInsertBlockType(\n\t\t\t\t\t\t\t\t\t\tblock.name,\n\t\t\t\t\t\t\t\t\t\ttargetRootClientId\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tinsertBlocks(\n\t\t\t\t\t\t\t\t\treplacement,\n\t\t\t\t\t\t\t\t\tgetBlockIndex( _clientId ),\n\t\t\t\t\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\t\t\t\t\tchangeSelection\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tremoveBlock( firstClientId, false );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tswitchToDefaultOrRemove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t! getBlockOrder( _clientId ).length &&\n\t\t\t\t\t\t\tisUnmodifiedBlock( getBlock( _clientId ) )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tremoveBlock( _clientId, false );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tswitchToDefaultOrRemove();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// For `Delete` or forward merge, we should do the exact same thing\n\t\t\t// as `Backspace`, but from the other block.\n\t\t\tif ( forward ) {\n\t\t\t\tif ( rootClientId ) {\n\t\t\t\t\tconst nextRootClientId =\n\t\t\t\t\t\tgetNextBlockClientId( rootClientId );\n\n\t\t\t\t\tif ( nextRootClientId ) {\n\t\t\t\t\t\t// If there is a block that follows with the same parent\n\t\t\t\t\t\t// block name and the same attributes, merge the inner\n\t\t\t\t\t\t// blocks.\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tgetBlockName( rootClientId ) ===\n\t\t\t\t\t\t\tgetBlockName( nextRootClientId )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst rootAttributes =\n\t\t\t\t\t\t\t\tgetBlockAttributes( rootClientId );\n\t\t\t\t\t\t\tconst previousRootAttributes =\n\t\t\t\t\t\t\t\tgetBlockAttributes( nextRootClientId );\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tObject.keys( rootAttributes ).every(\n\t\t\t\t\t\t\t\t\t( key ) =>\n\t\t\t\t\t\t\t\t\t\trootAttributes[ key ] ===\n\t\t\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t\t\tgetBlockOrder( nextRootClientId ),\n\t\t\t\t\t\t\t\t\t\tnextRootClientId,\n\t\t\t\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tremoveBlock( nextRootClientId, false );\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmergeBlocks( rootClientId, nextRootClientId );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\n\n\t\t\t\tif ( ! nextBlockClientId ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( getBlockOrder( nextBlockClientId ).length ) {\n\t\t\t\t\tmoveFirstItemUp( nextBlockClientId, false );\n\t\t\t\t} else {\n\t\t\t\t\tmergeBlocks( clientId, nextBlockClientId );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst previousBlockClientId =\n\t\t\t\t\tgetPreviousBlockClientId( clientId );\n\n\t\t\t\tif ( previousBlockClientId ) {\n\t\t\t\t\tmergeBlocks( previousBlockClientId, clientId );\n\t\t\t\t} else if ( rootClientId ) {\n\t\t\t\t\tconst previousRootClientId =\n\t\t\t\t\t\tgetPreviousBlockClientId( rootClientId );\n\n\t\t\t\t\t// If there is a preceding block with the same parent block\n\t\t\t\t\t// name and the same attributes, merge the inner blocks.\n\t\t\t\t\tif (\n\t\t\t\t\t\tpreviousRootClientId &&\n\t\t\t\t\t\tgetBlockName( rootClientId ) ===\n\t\t\t\t\t\t\tgetBlockName( previousRootClientId )\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst rootAttributes =\n\t\t\t\t\t\t\tgetBlockAttributes( rootClientId );\n\t\t\t\t\t\tconst previousRootAttributes =\n\t\t\t\t\t\t\tgetBlockAttributes( previousRootClientId );\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tObject.keys( rootAttributes ).every(\n\t\t\t\t\t\t\t\t( key ) =>\n\t\t\t\t\t\t\t\t\trootAttributes[ key ] ===\n\t\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t\tgetBlockOrder( rootClientId ),\n\t\t\t\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\t\t\t\tpreviousRootClientId\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tremoveBlock( rootClientId, false );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tmoveFirstItemUp( rootClientId );\n\t\t\t\t} else {\n\t\t\t\t\tswitchToDefaultOrRemove();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonReplace( blocks, indexToSelect, initialPosition ) {\n\t\t\tif (\n\t\t\t\tblocks.length &&\n\t\t\t\t! isUnmodifiedDefaultBlock( blocks[ blocks.length - 1 ] )\n\t\t\t) {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t}\n\t\t\t//Unsynced patterns are nested in an array so we need to flatten them.\n\t\t\tconst replacementBlocks =\n\t\t\t\tblocks?.length === 1 && Array.isArray( blocks[ 0 ] )\n\t\t\t\t\t? blocks[ 0 ]\n\t\t\t\t\t: blocks;\n\t\t\treplaceBlocks(\n\t\t\t\t[ ownProps.clientId ],\n\t\t\t\treplacementBlocks,\n\t\t\t\tindexToSelect,\n\t\t\t\tinitialPosition\n\t\t\t);\n\t\t},\n\t\tonRemove() {\n\t\t\tremoveBlock( ownProps.clientId );\n\t\t},\n\t\ttoggleSelection( selectionEnabled ) {\n\t\t\ttoggleSelection( selectionEnabled );\n\t\t},\n\t};\n} );\n\n// This component is used by the BlockListBlockProvider component below. It will\n// add the props necessary for the `editor.BlockListBlock` filters.\nBlockListBlock = compose(\n\tapplyWithDispatch,\n\twithFilters( 'editor.BlockListBlock' )\n)( BlockListBlock );\n\n// This component provides all the information we need through a single store\n// subscription (useSelect mapping). Only the necessary props are passed down\n// to the BlockListBlock component, which is a filtered component, so these\n// props are public API. To avoid adding to the public API, we use a private\n// context to pass the rest of the information to the filtered BlockListBlock\n// component, and useBlockProps.\nfunction BlockListBlockProvider( props ) {\n\tconst { clientId, rootClientId } = props;\n\tconst selectedProps = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tisBlockSelected,\n\t\t\t\tgetBlockMode,\n\t\t\t\tisSelectionEnabled,\n\t\t\t\tgetTemplateLock,\n\t\t\t\tisSectionBlock: _isSectionBlock,\n\t\t\t\tgetBlockWithoutAttributes,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tcanRemoveBlock,\n\t\t\t\tcanMoveBlock,\n\n\t\t\t\tgetSettings,\n\t\t\t\tgetTemporarilyEditingAsBlocks,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t\tgetBlockName,\n\t\t\t\tisFirstMultiSelectedBlock,\n\t\t\t\tgetMultiSelectedBlockClientIds,\n\t\t\t\thasSelectedInnerBlock,\n\t\t\t\tgetBlocksByName,\n\n\t\t\t\tgetBlockIndex,\n\t\t\t\tisBlockMultiSelected,\n\t\t\t\tisBlockSubtreeDisabled,\n\t\t\t\tisBlockHighlighted,\n\t\t\t\t__unstableIsFullySelected,\n\t\t\t\t__unstableSelectionHasUnmergeableBlock,\n\t\t\t\tisBlockBeingDragged,\n\t\t\t\tisDragging,\n\t\t\t\t__unstableHasActiveBlockOverlayActive,\n\t\t\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\t\t\tconst blockWithoutAttributes =\n\t\t\t\tgetBlockWithoutAttributes( clientId );\n\n\t\t\t// This is a temporary fix.\n\t\t\t// This function should never be called when a block is not\n\t\t\t// present in the state. It happens now because the order in\n\t\t\t// withSelect rendering is not correct.\n\t\t\tif ( ! blockWithoutAttributes ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\thasBlockSupport: _hasBlockSupport,\n\t\t\t\tgetActiveBlockVariation,\n\t\t\t} = select( blocksStore );\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\tconst { name: blockName, isValid } = blockWithoutAttributes;\n\t\t\tconst blockType = getBlockType( blockName );\n\t\t\tconst { supportsLayout, isPreviewMode } = getSettings();\n\t\t\tconst hasLightBlockWrapper = blockType?.apiVersion > 1;\n\t\t\tconst previewContext = {\n\t\t\t\tisPreviewMode,\n\t\t\t\tblockWithoutAttributes,\n\t\t\t\tname: blockName,\n\t\t\t\tattributes,\n\t\t\t\tisValid,\n\t\t\t\tthemeSupportsLayout: supportsLayout,\n\t\t\t\tindex: getBlockIndex( clientId ),\n\t\t\t\tisReusable: isReusableBlock( blockType ),\n\t\t\t\tclassName: hasLightBlockWrapper\n\t\t\t\t\t? attributes.className\n\t\t\t\t\t: undefined,\n\t\t\t\tdefaultClassName: hasLightBlockWrapper\n\t\t\t\t\t? getBlockDefaultClassName( blockName )\n\t\t\t\t\t: undefined,\n\t\t\t\tblockTitle: blockType?.title,\n\t\t\t};\n\n\t\t\t// When in preview mode, we can avoid a lot of selection and\n\t\t\t// editing related selectors.\n\t\t\tif ( isPreviewMode ) {\n\t\t\t\treturn previewContext;\n\t\t\t}\n\n\t\t\tconst _isSelected = isBlockSelected( clientId );\n\t\t\tconst canRemove = canRemoveBlock( clientId );\n\t\t\tconst canMove = canMoveBlock( clientId );\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\n\t\t\tconst isMultiSelected = isBlockMultiSelected( clientId );\n\t\t\tconst checkDeep = true;\n\t\t\tconst isAncestorOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\t\tclientId,\n\t\t\t\tcheckDeep\n\t\t\t);\n\t\t\tconst blockEditingMode = getBlockEditingMode( clientId );\n\n\t\t\tconst multiple = hasBlockSupport( blockName, 'multiple', true );\n\n\t\t\t// For block types with `multiple` support, there is no \"original\n\t\t\t// block\" to be found in the content, as the block itself is valid.\n\t\t\tconst blocksWithSameName = multiple\n\t\t\t\t? []\n\t\t\t\t: getBlocksByName( blockName );\n\t\t\tconst isInvalid =\n\t\t\t\tblocksWithSameName.length &&\n\t\t\t\tblocksWithSameName[ 0 ] !== clientId;\n\n\t\t\treturn {\n\t\t\t\t...previewContext,\n\t\t\t\tmode: getBlockMode( clientId ),\n\t\t\t\tisSelectionEnabled: isSelectionEnabled(),\n\t\t\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\t\t\tisSectionBlock: _isSectionBlock( clientId ),\n\t\t\t\tcanRemove,\n\t\t\t\tcanMove,\n\t\t\t\tisSelected: _isSelected,\n\t\t\t\tisTemporarilyEditingAsBlocks:\n\t\t\t\t\tgetTemporarilyEditingAsBlocks() === clientId,\n\t\t\t\tblockEditingMode,\n\t\t\t\tmayDisplayControls:\n\t\t\t\t\t_isSelected ||\n\t\t\t\t\t( isFirstMultiSelectedBlock( clientId ) &&\n\t\t\t\t\t\tgetMultiSelectedBlockClientIds().every(\n\t\t\t\t\t\t\t( id ) => getBlockName( id ) === blockName\n\t\t\t\t\t\t) ),\n\t\t\t\tmayDisplayParentControls:\n\t\t\t\t\t_hasBlockSupport(\n\t\t\t\t\t\tgetBlockName( clientId ),\n\t\t\t\t\t\t'__experimentalExposeControlsToChildren',\n\t\t\t\t\t\tfalse\n\t\t\t\t\t) && hasSelectedInnerBlock( clientId ),\n\t\t\t\tblockApiVersion: blockType?.apiVersion || 1,\n\t\t\t\tblockTitle: match?.title || blockType?.title,\n\t\t\t\tisSubtreeDisabled:\n\t\t\t\t\tblockEditingMode === 'disabled' &&\n\t\t\t\t\tisBlockSubtreeDisabled( clientId ),\n\t\t\t\thasOverlay:\n\t\t\t\t\t__unstableHasActiveBlockOverlayActive( clientId ) &&\n\t\t\t\t\t! isDragging(),\n\t\t\t\tinitialPosition: _isSelected\n\t\t\t\t\t? getSelectedBlocksInitialCaretPosition()\n\t\t\t\t\t: undefined,\n\t\t\t\tisHighlighted: isBlockHighlighted( clientId ),\n\t\t\t\tisMultiSelected,\n\t\t\t\tisPartiallySelected:\n\t\t\t\t\tisMultiSelected &&\n\t\t\t\t\t! __unstableIsFullySelected() &&\n\t\t\t\t\t! __unstableSelectionHasUnmergeableBlock(),\n\t\t\t\tisDragging: isBlockBeingDragged( clientId ),\n\t\t\t\thasChildSelected: isAncestorOfSelectedBlock,\n\t\t\t\tisEditingDisabled: blockEditingMode === 'disabled',\n\t\t\t\thasEditableOutline:\n\t\t\t\t\tblockEditingMode !== 'disabled' &&\n\t\t\t\t\tgetBlockEditingMode( rootClientId ) === 'disabled',\n\t\t\t\toriginalBlockClientId: isInvalid\n\t\t\t\t\t? blocksWithSameName[ 0 ]\n\t\t\t\t\t: false,\n\t\t\t};\n\t\t},\n\t\t[ clientId, rootClientId ]\n\t);\n\n\tconst {\n\t\tisPreviewMode,\n\t\t// Fill values that end up as a public API and may not be defined in\n\t\t// preview mode.\n\t\tmode = 'visual',\n\t\tisSelectionEnabled = false,\n\t\tisLocked = false,\n\t\tcanRemove = false,\n\t\tcanMove = false,\n\t\tblockWithoutAttributes,\n\t\tname,\n\t\tattributes,\n\t\tisValid,\n\t\tisSelected = false,\n\t\tthemeSupportsLayout,\n\t\tisTemporarilyEditingAsBlocks,\n\t\tblockEditingMode,\n\t\tmayDisplayControls,\n\t\tmayDisplayParentControls,\n\t\tindex,\n\t\tblockApiVersion,\n\t\tblockTitle,\n\t\tisSubtreeDisabled,\n\t\thasOverlay,\n\t\tinitialPosition,\n\t\tisHighlighted,\n\t\tisMultiSelected,\n\t\tisPartiallySelected,\n\t\tisReusable,\n\t\tisDragging,\n\t\thasChildSelected,\n\t\tisSectionBlock,\n\t\tisEditingDisabled,\n\t\thasEditableOutline,\n\t\tclassName,\n\t\tdefaultClassName,\n\t\toriginalBlockClientId,\n\t} = selectedProps;\n\n\t// Users of the editor.BlockListBlock filter used to be able to\n\t// access the block prop.\n\t// Ideally these blocks would rely on the clientId prop only.\n\t// This is kept for backward compatibility reasons.\n\tconst block = useMemo(\n\t\t() => ( { ...blockWithoutAttributes, attributes } ),\n\t\t[ blockWithoutAttributes, attributes ]\n\t);\n\n\t// Block is sometimes not mounted at the right time, causing it be\n\t// undefined see issue for more info\n\t// https://github.com/WordPress/gutenberg/issues/17013\n\tif ( ! selectedProps ) {\n\t\treturn null;\n\t}\n\n\tconst privateContext = {\n\t\tisPreviewMode,\n\t\tclientId,\n\t\tclassName,\n\t\tindex,\n\t\tmode,\n\t\tname,\n\t\tblockApiVersion,\n\t\tblockTitle,\n\t\tisSelected,\n\t\tisSubtreeDisabled,\n\t\thasOverlay,\n\t\tinitialPosition,\n\t\tblockEditingMode,\n\t\tisHighlighted,\n\t\tisMultiSelected,\n\t\tisPartiallySelected,\n\t\tisReusable,\n\t\tisDragging,\n\t\thasChildSelected,\n\t\tisSectionBlock,\n\t\tisEditingDisabled,\n\t\thasEditableOutline,\n\t\tisTemporarilyEditingAsBlocks,\n\t\tdefaultClassName,\n\t\tmayDisplayControls,\n\t\tmayDisplayParentControls,\n\t\toriginalBlockClientId,\n\t\tthemeSupportsLayout,\n\t\tcanMove,\n\t};\n\n\t// Here we separate between the props passed to BlockListBlock and any other\n\t// information we selected for internal use. BlockListBlock is a filtered\n\t// component and thus ALL the props are PUBLIC API.\n\n\t// Note that the context value doesn't have to be memoized in this case\n\t// because when it changes, this component will be re-rendered anyway, and\n\t// none of the consumers (BlockListBlock and useBlockProps) are memoized or\n\t// \"pure\". This is different from the public BlockEditContext, where\n\t// consumers might be memoized or \"pure\".\n\treturn (\n\t\t<PrivateBlockContext.Provider value={ privateContext }>\n\t\t\t<BlockListBlock\n\t\t\t\t{ ...props }\n\t\t\t\t// WARNING: all the following props are public API (through the\n\t\t\t\t// editor.BlockListBlock filter) and normally nothing new should\n\t\t\t\t// be added to it.\n\t\t\t\t{ ...{\n\t\t\t\t\tmode,\n\t\t\t\t\tisSelectionEnabled,\n\t\t\t\t\tisLocked,\n\t\t\t\t\tcanRemove,\n\t\t\t\t\tcanMove,\n\t\t\t\t\t// Users of the editor.BlockListBlock filter used to be able\n\t\t\t\t\t// to access the block prop. Ideally these blocks would rely\n\t\t\t\t\t// on the clientId prop only. This is kept for backward\n\t\t\t\t\t// compatibility reasons.\n\t\t\t\t\tblock,\n\t\t\t\t\tname,\n\t\t\t\t\tattributes,\n\t\t\t\t\tisValid,\n\t\t\t\t\tisSelected,\n\t\t\t\t} }\n\t\t\t/>\n\t\t</PrivateBlockContext.Provider>\n\t);\n}\n\nexport default memo( BlockListBlockProvider );\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"htmlEntities\"];","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { ENTER, SPACE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport Inserter from '../inserter';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Zero width non-breaking space, used as padding for the paragraph when it is\n * empty.\n */\nexport const ZWNBSP = '\\ufeff';\n\nexport default function DefaultBlockAppender( { rootClientId } ) {\n\tconst { showPrompt, isLocked, placeholder, isManualGrid } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockCount,\n\t\t\t\tgetSettings,\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetBlockAttributes,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst isEmpty = ! getBlockCount( rootClientId );\n\t\t\tconst { bodyPlaceholder } = getSettings();\n\n\t\t\treturn {\n\t\t\t\tshowPrompt: isEmpty,\n\t\t\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\t\t\tplaceholder: bodyPlaceholder,\n\t\t\t\tisManualGrid:\n\t\t\t\t\tgetBlockAttributes( rootClientId )?.layout\n\t\t\t\t\t\t?.isManualPlacement,\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\n\tconst { insertDefaultBlock, startTyping } = useDispatch( blockEditorStore );\n\n\tif ( isLocked || isManualGrid ) {\n\t\treturn null;\n\t}\n\n\tconst value =\n\t\tdecodeEntities( placeholder ) || __( 'Type / to choose a block' );\n\n\tconst onAppend = () => {\n\t\tinsertDefaultBlock( undefined, rootClientId );\n\t\tstartTyping();\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tdata-root-client-id={ rootClientId || '' }\n\t\t\tclassName={ clsx( 'block-editor-default-block-appender', {\n\t\t\t\t'has-visible-prompt': showPrompt,\n\t\t\t} ) }\n\t\t>\n\t\t\t<p\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\t// We want this element to be styled as a paragraph by themes.\n\t\t\t\t// eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n\t\t\t\trole=\"button\"\n\t\t\t\taria-label={ __( 'Add default block' ) }\n\t\t\t\t// A wrapping container for this one already has the wp-block className.\n\t\t\t\tclassName=\"block-editor-default-block-appender__content\"\n\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\tif ( ENTER === event.keyCode || SPACE === event.keyCode ) {\n\t\t\t\t\t\tonAppend();\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t\tonClick={ () => onAppend() }\n\t\t\t\tonFocus={ () => {\n\t\t\t\t\tif ( showPrompt ) {\n\t\t\t\t\t\tonAppend();\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ showPrompt ? value : ZWNBSP }\n\t\t\t</p>\n\t\t\t<Inserter\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tposition=\"bottom right\"\n\t\t\t\tisAppender\n\t\t\t\t__experimentalIsQuick\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { getDefaultBlockName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport DefaultBlockAppender from '../default-block-appender';\nimport ButtonBlockAppender from '../button-block-appender';\nimport { store as blockEditorStore } from '../../store';\n\nfunction DefaultAppender( { rootClientId } ) {\n\tconst canInsertDefaultBlock = useSelect( ( select ) =>\n\t\tselect( blockEditorStore ).canInsertBlockType(\n\t\t\tgetDefaultBlockName(),\n\t\t\trootClientId\n\t\t)\n\t);\n\n\tif ( canInsertDefaultBlock ) {\n\t\t// Render the default block appender if the context supports use\n\t\t// of the default appender.\n\t\treturn <DefaultBlockAppender rootClientId={ rootClientId } />;\n\t}\n\n\t// Fallback in case the default block can't be inserted.\n\treturn (\n\t\t<ButtonBlockAppender\n\t\t\trootClientId={ rootClientId }\n\t\t\tclassName=\"block-list-appender__toggle\"\n\t\t/>\n\t);\n}\n\nexport default function BlockListAppender( {\n\trootClientId,\n\tCustomAppender,\n\tclassName,\n\ttagName: TagName = 'div',\n} ) {\n\tconst isDragOver = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockInsertionPoint,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetBlockCount,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\t\t// Ideally we should also check for `isDragging` but currently it\n\t\t\t// requires a lot more setup. We can revisit this once we refactor\n\t\t\t// the DnD utility hooks.\n\t\t\treturn (\n\t\t\t\tisBlockInsertionPointVisible() &&\n\t\t\t\trootClientId === insertionPoint?.rootClientId &&\n\t\t\t\tgetBlockCount( rootClientId ) === 0\n\t\t\t);\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\n\treturn (\n\t\t<TagName\n\t\t\t// A `tabIndex` is used on the wrapping `div` element in order to\n\t\t\t// force a focus event to occur when an appender `button` element\n\t\t\t// is clicked. In some browsers (Firefox, Safari), button clicks do\n\t\t\t// not emit a focus event, which could cause this event to propagate\n\t\t\t// unexpectedly. The `tabIndex` ensures that the interaction is\n\t\t\t// captured as a focus, without also adding an extra tab stop.\n\t\t\t//\n\t\t\t// See: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\n\t\t\ttabIndex={ -1 }\n\t\t\tclassName={ clsx( 'block-list-appender wp-block', className, {\n\t\t\t\t'is-drag-over': isDragOver,\n\t\t\t} ) }\n\t\t\t// Needed in case the whole editor is content editable (for multi\n\t\t\t// selection). It fixes an edge case where ArrowDown and ArrowRight\n\t\t\t// should collapse the selection to the end of that selection and\n\t\t\t// not into the appender.\n\t\t\tcontentEditable={ false }\n\t\t\t// The appender exists to let you add the first Paragraph before\n\t\t\t// any is inserted. To that end, this appender should visually be\n\t\t\t// presented as a block. That means theme CSS should style it as if\n\t\t\t// it were an empty paragraph block. That means a `wp-block` class to\n\t\t\t// ensure the width is correct, and a [data-block] attribute to ensure\n\t\t\t// the correct margin is applied, especially for classic themes which\n\t\t\t// have commonly targeted that attribute for margins.\n\t\t\tdata-block\n\t\t>\n\t\t\t{ CustomAppender ? (\n\t\t\t\t<CustomAppender />\n\t\t\t) : (\n\t\t\t\t<DefaultAppender rootClientId={ rootClientId } />\n\t\t\t) }\n\t\t</TagName>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tuseMemo,\n\tcreateContext,\n\tuseReducer,\n\tuseLayoutEffect,\n} from '@wordpress/element';\nimport { Popover } from '@wordpress/components';\nimport { isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport usePopoverScroll from './use-popover-scroll';\n\nconst MAX_POPOVER_RECOMPUTE_COUNTER = Number.MAX_SAFE_INTEGER;\n\nexport const InsertionPointOpenRef = createContext();\n\nfunction BlockPopoverInbetween( {\n\tpreviousClientId,\n\tnextClientId,\n\tchildren,\n\t__unstablePopoverSlot,\n\t__unstableContentRef,\n\toperation = 'insert',\n\tnearestSide = 'right',\n\t...props\n} ) {\n\t// This is a temporary hack to get the inbetween inserter to recompute properly.\n\tconst [ popoverRecomputeCounter, forcePopoverRecompute ] = useReducer(\n\t\t// Module is there to make sure that the counter doesn't overflow.\n\t\t( s ) => ( s + 1 ) % MAX_POPOVER_RECOMPUTE_COUNTER,\n\t\t0\n\t);\n\n\tconst { orientation, rootClientId, isVisible } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockListSettings,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tisBlockVisible,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst _rootClientId = getBlockRootClientId(\n\t\t\t\tpreviousClientId ?? nextClientId\n\t\t\t);\n\t\t\treturn {\n\t\t\t\torientation:\n\t\t\t\t\tgetBlockListSettings( _rootClientId )?.orientation ||\n\t\t\t\t\t'vertical',\n\t\t\t\trootClientId: _rootClientId,\n\t\t\t\tisVisible:\n\t\t\t\t\tisBlockVisible( previousClientId ) &&\n\t\t\t\t\tisBlockVisible( nextClientId ),\n\t\t\t};\n\t\t},\n\t\t[ previousClientId, nextClientId ]\n\t);\n\tconst previousElement = useBlockElement( previousClientId );\n\tconst nextElement = useBlockElement( nextClientId );\n\tconst isVertical = orientation === 'vertical';\n\n\tconst popoverAnchor = useMemo( () => {\n\t\tif (\n\t\t\t// popoverRecomputeCounter is by definition always equal or greater than 0.\n\t\t\t// This check is only there to satisfy the correctness of the\n\t\t\t// exhaustive-deps rule for the `useMemo` hook.\n\t\t\tpopoverRecomputeCounter < 0 ||\n\t\t\t( ! previousElement && ! nextElement ) ||\n\t\t\t! isVisible\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst contextElement =\n\t\t\toperation === 'group'\n\t\t\t\t? nextElement || previousElement\n\t\t\t\t: previousElement || nextElement;\n\n\t\treturn {\n\t\t\tcontextElement,\n\t\t\tgetBoundingClientRect() {\n\t\t\t\tconst previousRect = previousElement\n\t\t\t\t\t? previousElement.getBoundingClientRect()\n\t\t\t\t\t: null;\n\t\t\t\tconst nextRect = nextElement\n\t\t\t\t\t? nextElement.getBoundingClientRect()\n\t\t\t\t\t: null;\n\n\t\t\t\tlet left = 0;\n\t\t\t\tlet top = 0;\n\t\t\t\tlet width = 0;\n\t\t\t\tlet height = 0;\n\n\t\t\t\tif ( operation === 'group' ) {\n\t\t\t\t\tconst targetRect = nextRect || previousRect;\n\t\t\t\t\ttop = targetRect.top;\n\t\t\t\t\t// No spacing is likely around blocks in this operation.\n\t\t\t\t\t// So width of the inserter containing rect is set to 0.\n\t\t\t\t\twidth = 0;\n\t\t\t\t\theight = targetRect.bottom - targetRect.top;\n\t\t\t\t\t// Popover calculates its distance from mid-block so some\n\t\t\t\t\t// adjustments are needed to make it appear in the right place.\n\t\t\t\t\tleft =\n\t\t\t\t\t\tnearestSide === 'left'\n\t\t\t\t\t\t\t? targetRect.left - 2\n\t\t\t\t\t\t\t: targetRect.right - 2;\n\t\t\t\t} else if ( isVertical ) {\n\t\t\t\t\t// vertical\n\t\t\t\t\ttop = previousRect ? previousRect.bottom : nextRect.top;\n\t\t\t\t\twidth = previousRect ? previousRect.width : nextRect.width;\n\t\t\t\t\theight =\n\t\t\t\t\t\tnextRect && previousRect\n\t\t\t\t\t\t\t? nextRect.top - previousRect.bottom\n\t\t\t\t\t\t\t: 0;\n\t\t\t\t\tleft = previousRect ? previousRect.left : nextRect.left;\n\t\t\t\t} else {\n\t\t\t\t\ttop = previousRect ? previousRect.top : nextRect.top;\n\t\t\t\t\theight = previousRect\n\t\t\t\t\t\t? previousRect.height\n\t\t\t\t\t\t: nextRect.height;\n\n\t\t\t\t\tif ( isRTL() ) {\n\t\t\t\t\t\t// non vertical, rtl\n\t\t\t\t\t\tleft = nextRect ? nextRect.right : previousRect.left;\n\t\t\t\t\t\twidth =\n\t\t\t\t\t\t\tpreviousRect && nextRect\n\t\t\t\t\t\t\t\t? previousRect.left - nextRect.right\n\t\t\t\t\t\t\t\t: 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// non vertical, ltr\n\t\t\t\t\t\tleft = previousRect\n\t\t\t\t\t\t\t? previousRect.right\n\t\t\t\t\t\t\t: nextRect.left;\n\t\t\t\t\t\twidth =\n\t\t\t\t\t\t\tpreviousRect && nextRect\n\t\t\t\t\t\t\t\t? nextRect.left - previousRect.right\n\t\t\t\t\t\t\t\t: 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Avoid a negative width which happens when the next rect\n\t\t\t\t\t// is on the next line.\n\t\t\t\t\twidth = Math.max( width, 0 );\n\t\t\t\t}\n\n\t\t\t\treturn new window.DOMRect( left, top, width, height );\n\t\t\t},\n\t\t};\n\t}, [\n\t\tpreviousElement,\n\t\tnextElement,\n\t\tpopoverRecomputeCounter,\n\t\tisVertical,\n\t\tisVisible,\n\t\toperation,\n\t\tnearestSide,\n\t] );\n\n\tconst popoverScrollRef = usePopoverScroll( __unstableContentRef );\n\n\t// This is only needed for a smooth transition when moving blocks.\n\t// When blocks are moved up/down, their position can be set by\n\t// updating the `transform` property manually (i.e. without using CSS\n\t// transitions or animations). The animation, which can also scroll the block\n\t// editor, can sometimes cause the position of the Popover to get out of sync.\n\t// A MutationObserver is therefore used to make sure that changes to the\n\t// selectedElement's attribute (i.e. `transform`) can be tracked and used to\n\t// trigger the Popover to rerender.\n\tuseLayoutEffect( () => {\n\t\tif ( ! previousElement ) {\n\t\t\treturn;\n\t\t}\n\t\tconst observer = new window.MutationObserver( forcePopoverRecompute );\n\t\tobserver.observe( previousElement, { attributes: true } );\n\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t}, [ previousElement ] );\n\n\tuseLayoutEffect( () => {\n\t\tif ( ! nextElement ) {\n\t\t\treturn;\n\t\t}\n\t\tconst observer = new window.MutationObserver( forcePopoverRecompute );\n\t\tobserver.observe( nextElement, { attributes: true } );\n\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t}, [ nextElement ] );\n\n\tuseLayoutEffect( () => {\n\t\tif ( ! previousElement ) {\n\t\t\treturn;\n\t\t}\n\t\tpreviousElement.ownerDocument.defaultView.addEventListener(\n\t\t\t'resize',\n\t\t\tforcePopoverRecompute\n\t\t);\n\t\treturn () => {\n\t\t\tpreviousElement.ownerDocument.defaultView?.removeEventListener(\n\t\t\t\t'resize',\n\t\t\t\tforcePopoverRecompute\n\t\t\t);\n\t\t};\n\t}, [ previousElement ] );\n\n\t// If there's either a previous or a next element, show the inbetween popover.\n\t// Note that drag and drop uses the inbetween popover to show the drop indicator\n\t// before the first block and after the last block.\n\tif ( ( ! previousElement && ! nextElement ) || ! isVisible ) {\n\t\treturn null;\n\t}\n\n\t/* eslint-disable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\n\t// While ideally it would be enough to capture the\n\t// bubbling focus event from the Inserter, due to the\n\t// characteristics of click focusing of `button`s in\n\t// Firefox and Safari, it is not reliable.\n\t//\n\t// See: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\n\treturn (\n\t\t<Popover\n\t\t\tref={ popoverScrollRef }\n\t\t\tanimate={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tfocusOnMount={ false }\n\t\t\t// Render in the old slot if needed for backward compatibility,\n\t\t\t// otherwise render in place (not in the default popover slot).\n\t\t\t__unstableSlotName={ __unstablePopoverSlot }\n\t\t\tinline={ ! __unstablePopoverSlot }\n\t\t\t// Forces a remount of the popover when its position changes\n\t\t\t// This makes sure the popover doesn't animate from its previous position.\n\t\t\tkey={ nextClientId + '--' + rootClientId }\n\t\t\t{ ...props }\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-block-popover',\n\t\t\t\t'block-editor-block-popover__inbetween',\n\t\t\t\tprops.className\n\t\t\t) }\n\t\t\tresize={ false }\n\t\t\tflip={ false }\n\t\t\tplacement=\"overlay\"\n\t\t\tvariant=\"unstyled\"\n\t\t>\n\t\t\t<div className=\"block-editor-block-popover__inbetween-container\">\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</Popover>\n\t);\n\t/* eslint-enable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\n}\n\nexport default BlockPopoverInbetween;\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useReducedMotion } from '@wordpress/compose';\nimport { __unstableMotion as motion } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockPopoverCover from './cover';\n\nconst animateVariants = {\n\thide: { opacity: 0, scaleY: 0.75 },\n\tshow: { opacity: 1, scaleY: 1 },\n\texit: { opacity: 0, scaleY: 0.9 },\n};\n\nfunction BlockDropZonePopover( {\n\t__unstablePopoverSlot,\n\t__unstableContentRef,\n} ) {\n\tconst { clientId } = useSelect( ( select ) => {\n\t\tconst { getBlockOrder, getBlockInsertionPoint } =\n\t\t\tselect( blockEditorStore );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst order = getBlockOrder( insertionPoint.rootClientId );\n\n\t\tif ( ! order.length ) {\n\t\t\treturn {};\n\t\t}\n\n\t\treturn {\n\t\t\tclientId: order[ insertionPoint.index ],\n\t\t};\n\t}, [] );\n\tconst reducedMotion = useReducedMotion();\n\n\treturn (\n\t\t<BlockPopoverCover\n\t\t\tclientId={ clientId }\n\t\t\t__unstablePopoverSlot={ __unstablePopoverSlot }\n\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\tclassName=\"block-editor-block-popover__drop-zone\"\n\t\t>\n\t\t\t<motion.div\n\t\t\t\tdata-testid=\"block-popover-drop-zone\"\n\t\t\t\tinitial={\n\t\t\t\t\treducedMotion ? animateVariants.show : animateVariants.hide\n\t\t\t\t}\n\t\t\t\tanimate={ animateVariants.show }\n\t\t\t\texit={\n\t\t\t\t\treducedMotion ? animateVariants.show : animateVariants.exit\n\t\t\t\t}\n\t\t\t\tclassName=\"block-editor-block-popover__drop-zone-foreground\"\n\t\t\t/>\n\t\t</BlockPopoverCover>\n\t);\n}\n\nexport default BlockDropZonePopover;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRef, createContext, useContext } from '@wordpress/element';\nimport { __unstableMotion as motion } from '@wordpress/components';\nimport { useReducedMotion } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport Inserter from '../inserter';\nimport { store as blockEditorStore } from '../../store';\nimport BlockPopoverInbetween from '../block-popover/inbetween';\nimport BlockDropZonePopover from '../block-popover/drop-zone';\nimport { unlock } from '../../lock-unlock';\n\nexport const InsertionPointOpenRef = createContext();\n\nfunction InbetweenInsertionPointPopover( {\n\t__unstablePopoverSlot,\n\t__unstableContentRef,\n\toperation = 'insert',\n\tnearestSide = 'right',\n} ) {\n\tconst { selectBlock, hideInsertionPoint } = useDispatch( blockEditorStore );\n\tconst openRef = useContext( InsertionPointOpenRef );\n\tconst ref = useRef();\n\tconst {\n\t\torientation,\n\t\tpreviousClientId,\n\t\tnextClientId,\n\t\trootClientId,\n\t\tisInserterShown,\n\t\tisDistractionFree,\n\t\tisZoomOutMode,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockOrder,\n\t\t\tgetBlockListSettings,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tisBlockBeingDragged,\n\t\t\tgetPreviousBlockClientId,\n\t\t\tgetNextBlockClientId,\n\t\t\tgetSettings,\n\t\t\tisZoomOut,\n\t\t} = unlock( select( blockEditorStore ) );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst order = getBlockOrder( insertionPoint.rootClientId );\n\n\t\tif ( ! order.length ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tlet _previousClientId = order[ insertionPoint.index - 1 ];\n\t\tlet _nextClientId = order[ insertionPoint.index ];\n\n\t\twhile ( isBlockBeingDragged( _previousClientId ) ) {\n\t\t\t_previousClientId = getPreviousBlockClientId( _previousClientId );\n\t\t}\n\n\t\twhile ( isBlockBeingDragged( _nextClientId ) ) {\n\t\t\t_nextClientId = getNextBlockClientId( _nextClientId );\n\t\t}\n\n\t\tconst settings = getSettings();\n\n\t\treturn {\n\t\t\tpreviousClientId: _previousClientId,\n\t\t\tnextClientId: _nextClientId,\n\t\t\torientation:\n\t\t\t\tgetBlockListSettings( insertionPoint.rootClientId )\n\t\t\t\t\t?.orientation || 'vertical',\n\t\t\trootClientId: insertionPoint.rootClientId,\n\t\t\tisDistractionFree: settings.isDistractionFree,\n\t\t\tisInserterShown: insertionPoint?.__unstableWithInserter,\n\t\t\tisZoomOutMode: isZoomOut(),\n\t\t};\n\t}, [] );\n\tconst { getBlockEditingMode } = useSelect( blockEditorStore );\n\n\tconst disableMotion = useReducedMotion();\n\n\tfunction onClick( event ) {\n\t\tif (\n\t\t\tevent.target === ref.current &&\n\t\t\tnextClientId &&\n\t\t\tgetBlockEditingMode( nextClientId ) !== 'disabled'\n\t\t) {\n\t\t\tselectBlock( nextClientId, -1 );\n\t\t}\n\t}\n\n\tfunction maybeHideInserterPoint( event ) {\n\t\t// Only hide the inserter if it's triggered on the wrapper,\n\t\t// and the inserter is not open.\n\t\tif ( event.target === ref.current && ! openRef.current ) {\n\t\t\thideInsertionPoint();\n\t\t}\n\t}\n\n\tfunction onFocus( event ) {\n\t\t// Only handle click on the wrapper specifically, and not an event\n\t\t// bubbled from the inserter itself.\n\t\tif ( event.target !== ref.current ) {\n\t\t\topenRef.current = true;\n\t\t}\n\t}\n\n\tconst lineVariants = {\n\t\t// Initial position starts from the center and invisible.\n\t\tstart: {\n\t\t\topacity: 0,\n\t\t\tscale: 0,\n\t\t},\n\t\t// The line expands to fill the container. If the inserter is visible it\n\t\t// is delayed so it appears orchestrated.\n\t\trest: {\n\t\t\topacity: 1,\n\t\t\tscale: 1,\n\t\t\ttransition: { delay: isInserterShown ? 0.5 : 0, type: 'tween' },\n\t\t},\n\t\thover: {\n\t\t\topacity: 1,\n\t\t\tscale: 1,\n\t\t\ttransition: { delay: 0.5, type: 'tween' },\n\t\t},\n\t};\n\n\tconst inserterVariants = {\n\t\tstart: {\n\t\t\tscale: disableMotion ? 1 : 0,\n\t\t},\n\t\trest: {\n\t\t\tscale: 1,\n\t\t\ttransition: { delay: 0.4, type: 'tween' },\n\t\t},\n\t};\n\n\tif ( isDistractionFree ) {\n\t\treturn null;\n\t}\n\n\t// Zoom out mode should only show the insertion point for the insert operation.\n\t// Other operations such as \"group\" are when the editor tries to create a row\n\t// block by grouping the block being dragged with the block it's being dropped\n\t// onto.\n\tif ( isZoomOutMode && operation !== 'insert' ) {\n\t\treturn null;\n\t}\n\n\tconst orientationClassname =\n\t\torientation === 'horizontal' || operation === 'group'\n\t\t\t? 'is-horizontal'\n\t\t\t: 'is-vertical';\n\n\tconst className = clsx(\n\t\t'block-editor-block-list__insertion-point',\n\t\torientationClassname\n\t);\n\n\treturn (\n\t\t<BlockPopoverInbetween\n\t\t\tpreviousClientId={ previousClientId }\n\t\t\tnextClientId={ nextClientId }\n\t\t\t__unstablePopoverSlot={ __unstablePopoverSlot }\n\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\toperation={ operation }\n\t\t\tnearestSide={ nearestSide }\n\t\t>\n\t\t\t<motion.div\n\t\t\t\tlayout={ ! disableMotion }\n\t\t\t\tinitial={ disableMotion ? 'rest' : 'start' }\n\t\t\t\tanimate=\"rest\"\n\t\t\t\twhileHover=\"hover\"\n\t\t\t\twhileTap=\"pressed\"\n\t\t\t\texit=\"start\"\n\t\t\t\tref={ ref }\n\t\t\t\ttabIndex={ -1 }\n\t\t\t\tonClick={ onClick }\n\t\t\t\tonFocus={ onFocus }\n\t\t\t\tclassName={ clsx( className, {\n\t\t\t\t\t'is-with-inserter': isInserterShown,\n\t\t\t\t} ) }\n\t\t\t\tonHoverEnd={ maybeHideInserterPoint }\n\t\t\t>\n\t\t\t\t<motion.div\n\t\t\t\t\tvariants={ lineVariants }\n\t\t\t\t\tclassName=\"block-editor-block-list__insertion-point-indicator\"\n\t\t\t\t\tdata-testid=\"block-list-insertion-point-indicator\"\n\t\t\t\t/>\n\t\t\t\t{ isInserterShown && (\n\t\t\t\t\t<motion.div\n\t\t\t\t\t\tvariants={ inserterVariants }\n\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t'block-editor-block-list__insertion-point-inserter'\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Inserter\n\t\t\t\t\t\t\tposition=\"bottom center\"\n\t\t\t\t\t\t\tclientId={ nextClientId }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\t__experimentalIsQuick\n\t\t\t\t\t\t\tonToggle={ ( isOpen ) => {\n\t\t\t\t\t\t\t\topenRef.current = isOpen;\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonSelectOrClose={ () => {\n\t\t\t\t\t\t\t\topenRef.current = false;\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</motion.div>\n\t\t\t\t) }\n\t\t\t</motion.div>\n\t\t</BlockPopoverInbetween>\n\t);\n}\n\nexport default function InsertionPoint( props ) {\n\tconst { insertionPoint, isVisible, isBlockListEmpty } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockInsertionPoint,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetBlockCount,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst blockInsertionPoint = getBlockInsertionPoint();\n\t\t\treturn {\n\t\t\t\tinsertionPoint: blockInsertionPoint,\n\t\t\t\tisVisible: isBlockInsertionPointVisible(),\n\t\t\t\tisBlockListEmpty:\n\t\t\t\t\tgetBlockCount( blockInsertionPoint?.rootClientId ) === 0,\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\n\tif (\n\t\t! isVisible ||\n\t\t// Don't render the insertion point if the block list is empty.\n\t\t// The insertion point will be represented by the appender instead.\n\t\tisBlockListEmpty\n\t) {\n\t\treturn null;\n\t}\n\n\t/**\n\t * Render a popover that overlays the block when the desired operation is to replace it.\n\t * Otherwise, render a popover in between blocks for the indication of inserting between them.\n\t */\n\treturn insertionPoint.operation === 'replace' ? (\n\t\t<BlockDropZonePopover\n\t\t\t// Force remount to trigger the animation.\n\t\t\tkey={ `${ insertionPoint.rootClientId }-${ insertionPoint.index }` }\n\t\t\t{ ...props }\n\t\t/>\n\t) : (\n\t\t<InbetweenInsertionPointPopover\n\t\t\toperation={ insertionPoint.operation }\n\t\t\tnearestSide={ insertionPoint.nearestSide }\n\t\t\t{ ...props }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useContext } from '@wordpress/element';\nimport { isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { InsertionPointOpenRef } from '../block-tools/insertion-point';\nimport { unlock } from '../../lock-unlock';\n\nexport function useInBetweenInserter() {\n\tconst openRef = useContext( InsertionPointOpenRef );\n\tconst isInBetweenInserterDisabled = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getSettings().isDistractionFree ||\n\t\t\tunlock( select( blockEditorStore ) ).isZoomOut(),\n\t\t[]\n\t);\n\tconst {\n\t\tgetBlockListSettings,\n\t\tgetBlockIndex,\n\t\tisMultiSelecting,\n\t\tgetSelectedBlockClientIds,\n\t\tgetSettings,\n\t\tgetTemplateLock,\n\t\t__unstableIsWithinBlockOverlay,\n\t\tgetBlockEditingMode,\n\t\tgetBlockName,\n\t\tgetBlockAttributes,\n\t\tgetParentSectionBlock,\n\t} = unlock( useSelect( blockEditorStore ) );\n\tconst { showInsertionPoint, hideInsertionPoint } =\n\t\tuseDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( isInBetweenInserterDisabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction onMouseMove( event ) {\n\t\t\t\t// openRef is the reference to the insertion point between blocks.\n\t\t\t\t// If the reference is not set or the insertion point is already open, return.\n\t\t\t\tif ( openRef === undefined || openRef.current ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Ignore text nodes sometimes detected in FireFox.\n\t\t\t\tif ( event.target.nodeType === event.target.TEXT_NODE ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( isMultiSelecting() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t! event.target.classList.contains(\n\t\t\t\t\t\t'block-editor-block-list__layout'\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\thideInsertionPoint();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet rootClientId;\n\t\t\t\tif (\n\t\t\t\t\t! event.target.classList.contains( 'is-root-container' )\n\t\t\t\t) {\n\t\t\t\t\tconst blockElement = !! event.target.getAttribute(\n\t\t\t\t\t\t'data-block'\n\t\t\t\t\t)\n\t\t\t\t\t\t? event.target\n\t\t\t\t\t\t: event.target.closest( '[data-block]' );\n\t\t\t\t\trootClientId = blockElement.getAttribute( 'data-block' );\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tgetTemplateLock( rootClientId ) ||\n\t\t\t\t\tgetBlockEditingMode( rootClientId ) === 'disabled' ||\n\t\t\t\t\tgetBlockName( rootClientId ) === 'core/block' ||\n\t\t\t\t\t( rootClientId &&\n\t\t\t\t\t\tgetBlockAttributes( rootClientId ).layout\n\t\t\t\t\t\t\t?.isManualPlacement )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst blockListSettings = getBlockListSettings( rootClientId );\n\t\t\t\tconst orientation =\n\t\t\t\t\tblockListSettings?.orientation || 'vertical';\n\t\t\t\tconst captureToolbars =\n\t\t\t\t\t!! blockListSettings?.__experimentalCaptureToolbars;\n\t\t\t\tconst offsetTop = event.clientY;\n\t\t\t\tconst offsetLeft = event.clientX;\n\n\t\t\t\tconst children = Array.from( event.target.children );\n\t\t\t\tlet element = children.find( ( blockEl ) => {\n\t\t\t\t\tconst blockElRect = blockEl.getBoundingClientRect();\n\t\t\t\t\treturn (\n\t\t\t\t\t\t( blockEl.classList.contains( 'wp-block' ) &&\n\t\t\t\t\t\t\torientation === 'vertical' &&\n\t\t\t\t\t\t\tblockElRect.top > offsetTop ) ||\n\t\t\t\t\t\t( blockEl.classList.contains( 'wp-block' ) &&\n\t\t\t\t\t\t\torientation === 'horizontal' &&\n\t\t\t\t\t\t\t( isRTL()\n\t\t\t\t\t\t\t\t? blockElRect.right < offsetLeft\n\t\t\t\t\t\t\t\t: blockElRect.left > offsetLeft ) )\n\t\t\t\t\t);\n\t\t\t\t} );\n\n\t\t\t\tif ( ! element ) {\n\t\t\t\t\thideInsertionPoint();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// The block may be in an alignment wrapper, so check the first direct\n\t\t\t\t// child if the element has no ID.\n\t\t\t\tif ( ! element.id ) {\n\t\t\t\t\telement = element.firstElementChild;\n\n\t\t\t\t\tif ( ! element ) {\n\t\t\t\t\t\thideInsertionPoint();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Don't show the insertion point if a parent block has an \"overlay\"\n\t\t\t\t// See https://github.com/WordPress/gutenberg/pull/34012#pullrequestreview-727762337\n\t\t\t\tconst clientId = element.id.slice( 'block-'.length );\n\t\t\t\tif (\n\t\t\t\t\t! clientId ||\n\t\t\t\t\t__unstableIsWithinBlockOverlay( clientId ) ||\n\t\t\t\t\t!! getParentSectionBlock( clientId )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Don't show the inserter if the following conditions are met,\n\t\t\t\t// as it conflicts with the block toolbar:\n\t\t\t\t// 1. when hovering above or inside selected block(s)\n\t\t\t\t// 2. when the orientation is vertical\n\t\t\t\t// 3. when the __experimentalCaptureToolbars is not enabled\n\t\t\t\t// 4. when the Top Toolbar is not disabled\n\t\t\t\tif (\n\t\t\t\t\tgetSelectedBlockClientIds().includes( clientId ) &&\n\t\t\t\t\torientation === 'vertical' &&\n\t\t\t\t\t! captureToolbars &&\n\t\t\t\t\t! getSettings().hasFixedToolbar\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst elementRect = element.getBoundingClientRect();\n\n\t\t\t\tif (\n\t\t\t\t\t( orientation === 'horizontal' &&\n\t\t\t\t\t\t( event.clientY > elementRect.bottom ||\n\t\t\t\t\t\t\tevent.clientY < elementRect.top ) ) ||\n\t\t\t\t\t( orientation === 'vertical' &&\n\t\t\t\t\t\t( event.clientX > elementRect.right ||\n\t\t\t\t\t\t\tevent.clientX < elementRect.left ) )\n\t\t\t\t) {\n\t\t\t\t\thideInsertionPoint();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst index = getBlockIndex( clientId );\n\n\t\t\t\t// Don't show the in-between inserter before the first block in\n\t\t\t\t// the list (preserves the original behaviour).\n\t\t\t\tif ( index === 0 ) {\n\t\t\t\t\thideInsertionPoint();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tshowInsertionPoint( rootClientId, index, {\n\t\t\t\t\t__unstableWithInserter: true,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mousemove', onMouseMove );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'mousemove', onMouseMove );\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\topenRef,\n\t\t\tgetBlockListSettings,\n\t\t\tgetBlockIndex,\n\t\t\tisMultiSelecting,\n\t\t\tshowInsertionPoint,\n\t\t\thideInsertionPoint,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\tisInBetweenInserterDisabled,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Pass the returned ref callback to an element that should clear block\n * selection. Selection will only be cleared if the element is clicked directly,\n * not if a child element is clicked.\n *\n * @return {import('react').RefCallback} Ref callback.\n */\nexport function useBlockSelectionClearer() {\n\tconst { getSettings, hasSelectedBlock, hasMultiSelection } =\n\t\tuseSelect( blockEditorStore );\n\tconst { clearSelectedBlock } = useDispatch( blockEditorStore );\n\tconst { clearBlockSelection: isEnabled } = getSettings();\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! isEnabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction onMouseDown( event ) {\n\t\t\t\tif ( ! hasSelectedBlock() && ! hasMultiSelection() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Only handle clicks on the element, not the children.\n\t\t\t\tif ( event.target !== node ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tclearSelectedBlock();\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'mousedown', onMouseDown );\n\t\t\t};\n\t\t},\n\t\t[ hasSelectedBlock, hasMultiSelection, clearSelectedBlock, isEnabled ]\n\t);\n}\n\nexport default function BlockSelectionClearer( props ) {\n\treturn <div ref={ useBlockSelectionClearer() } { ...props } />;\n}\n","/**\n * WordPress dependencies\n */\nimport { useLayoutEffect, useState } from '@wordpress/element';\nimport { useRegistry } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { getLayoutType } from '../../layouts';\n\n/** @typedef {import('../../selectors').WPDirectInsertBlock } WPDirectInsertBlock */\n\nconst pendingSettingsUpdates = new WeakMap();\n\n// Creates a memoizing caching function that remembers the last value and keeps returning it\n// as long as the new values are shallowly equal. Helps keep dependencies stable.\nfunction createShallowMemo() {\n\tlet value;\n\treturn ( newValue ) => {\n\t\tif ( value === undefined || ! isShallowEqual( value, newValue ) ) {\n\t\t\tvalue = newValue;\n\t\t}\n\t\treturn value;\n\t};\n}\n\nfunction useShallowMemo( value ) {\n\tconst [ memo ] = useState( createShallowMemo );\n\treturn memo( value );\n}\n\n/**\n * This hook is a side effect which updates the block-editor store when changes\n * happen to inner block settings. The given props are transformed into a\n * settings object, and if that is different from the current settings object in\n * the block-editor store, then the store is updated with the new settings which\n * came from props.\n *\n * @param {string}               clientId                   The client ID of the block to update.\n * @param {string}               parentLock\n * @param {string[]}             allowedBlocks              An array of block names which are permitted\n *                                                          in inner blocks.\n * @param {string[]}             prioritizedInserterBlocks  Block names and/or block variations to be prioritized in the inserter, in the format {blockName}/{variationName}.\n * @param {?WPDirectInsertBlock} defaultBlock               The default block to insert: [ blockName, { blockAttributes } ].\n * @param {?boolean}             directInsert               If a default block should be inserted directly by the appender.\n *\n * @param {?WPDirectInsertBlock} __experimentalDefaultBlock A deprecated prop for the default block to insert: [ blockName, { blockAttributes } ]. Use `defaultBlock` instead.\n *\n * @param {?boolean}             __experimentalDirectInsert A deprecated prop for whether a default block should be inserted directly by the appender. Use `directInsert` instead.\n *\n * @param {string}               [templateLock]             The template lock specified for the inner\n *                                                          blocks component. (e.g. \"all\")\n * @param {boolean}              captureToolbars            Whether or children toolbars should be shown\n *                                                          in the inner blocks component rather than on\n *                                                          the child block.\n * @param {string}               orientation                The direction in which the block\n *                                                          should face.\n * @param {Object}               layout                     The layout object for the block container.\n */\nexport default function useNestedSettingsUpdate(\n\tclientId,\n\tparentLock,\n\tallowedBlocks,\n\tprioritizedInserterBlocks,\n\tdefaultBlock,\n\tdirectInsert,\n\t__experimentalDefaultBlock,\n\t__experimentalDirectInsert,\n\ttemplateLock,\n\tcaptureToolbars,\n\torientation,\n\tlayout\n) {\n\t// Instead of adding a useSelect mapping here, please add to the useSelect\n\t// mapping in InnerBlocks! Every subscription impacts performance.\n\n\tconst registry = useRegistry();\n\n\t// Implementors often pass a new array on every render,\n\t// and the contents of the arrays are just strings, so the entire array\n\t// can be passed as dependencies but We need to include the length of the array,\n\t// otherwise if the arrays change length but the first elements are equal the comparison,\n\t// does not works as expected.\n\tconst _allowedBlocks = useShallowMemo( allowedBlocks );\n\tconst _prioritizedInserterBlocks = useShallowMemo(\n\t\tprioritizedInserterBlocks\n\t);\n\n\tconst _templateLock =\n\t\ttemplateLock === undefined || parentLock === 'contentOnly'\n\t\t\t? parentLock\n\t\t\t: templateLock;\n\n\tuseLayoutEffect( () => {\n\t\tconst newSettings = {\n\t\t\tallowedBlocks: _allowedBlocks,\n\t\t\tprioritizedInserterBlocks: _prioritizedInserterBlocks,\n\t\t\ttemplateLock: _templateLock,\n\t\t};\n\n\t\t// These values are not defined for RN, so only include them if they\n\t\t// are defined.\n\t\tif ( captureToolbars !== undefined ) {\n\t\t\tnewSettings.__experimentalCaptureToolbars = captureToolbars;\n\t\t}\n\n\t\t// Orientation depends on layout,\n\t\t// ideally the separate orientation prop should be deprecated.\n\t\tif ( orientation !== undefined ) {\n\t\t\tnewSettings.orientation = orientation;\n\t\t} else {\n\t\t\tconst layoutType = getLayoutType( layout?.type );\n\t\t\tnewSettings.orientation = layoutType.getOrientation( layout );\n\t\t}\n\n\t\tif ( __experimentalDefaultBlock !== undefined ) {\n\t\t\tdeprecated( '__experimentalDefaultBlock', {\n\t\t\t\talternative: 'defaultBlock',\n\t\t\t\tsince: '6.3',\n\t\t\t\tversion: '6.4',\n\t\t\t} );\n\t\t\tnewSettings.defaultBlock = __experimentalDefaultBlock;\n\t\t}\n\n\t\tif ( defaultBlock !== undefined ) {\n\t\t\tnewSettings.defaultBlock = defaultBlock;\n\t\t}\n\n\t\tif ( __experimentalDirectInsert !== undefined ) {\n\t\t\tdeprecated( '__experimentalDirectInsert', {\n\t\t\t\talternative: 'directInsert',\n\t\t\t\tsince: '6.3',\n\t\t\t\tversion: '6.4',\n\t\t\t} );\n\t\t\tnewSettings.directInsert = __experimentalDirectInsert;\n\t\t}\n\n\t\tif ( directInsert !== undefined ) {\n\t\t\tnewSettings.directInsert = directInsert;\n\t\t}\n\n\t\tif (\n\t\t\tnewSettings.directInsert !== undefined &&\n\t\t\ttypeof newSettings.directInsert !== 'boolean'\n\t\t) {\n\t\t\tdeprecated( 'Using `Function` as a `directInsert` argument', {\n\t\t\t\talternative: '`boolean` values',\n\t\t\t\tsince: '6.5',\n\t\t\t} );\n\t\t}\n\n\t\t// Batch updates to block list settings to avoid triggering cascading renders\n\t\t// for each container block included in a tree and optimize initial render.\n\t\t// To avoid triggering updateBlockListSettings for each container block\n\t\t// causing X re-renderings for X container blocks,\n\t\t// we batch all the updatedBlockListSettings in a single \"data\" batch\n\t\t// which results in a single re-render.\n\t\tif ( ! pendingSettingsUpdates.get( registry ) ) {\n\t\t\tpendingSettingsUpdates.set( registry, {} );\n\t\t}\n\t\tpendingSettingsUpdates.get( registry )[ clientId ] = newSettings;\n\t\twindow.queueMicrotask( () => {\n\t\t\tconst settings = pendingSettingsUpdates.get( registry );\n\t\t\tif ( Object.keys( settings ).length ) {\n\t\t\t\tconst { updateBlockListSettings } =\n\t\t\t\t\tregistry.dispatch( blockEditorStore );\n\t\t\t\tupdateBlockListSettings( settings );\n\t\t\t\tpendingSettingsUpdates.set( registry, {} );\n\t\t\t}\n\t\t} );\n\t}, [\n\t\tclientId,\n\t\t_allowedBlocks,\n\t\t_prioritizedInserterBlocks,\n\t\t_templateLock,\n\t\tdefaultBlock,\n\t\tdirectInsert,\n\t\t__experimentalDefaultBlock,\n\t\t__experimentalDirectInsert,\n\t\tcaptureToolbars,\n\t\torientation,\n\t\tlayout,\n\t\tregistry,\n\t] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport {\n\tcloneBlock,\n\tcreateBlock,\n\tfindTransform,\n\tgetBlockTransforms,\n\tpasteHandler,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useDispatch, useSelect, useRegistry } from '@wordpress/data';\nimport { getFilesFromDataTransfer } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/** @typedef {import('react').SyntheticEvent} SyntheticEvent */\n/** @typedef {import('./types').WPDropOperation} WPDropOperation */\n\n/**\n * Retrieve the data for a block drop event.\n *\n * @param {SyntheticEvent} event The drop event.\n *\n * @return {Object} An object with block drag and drop data.\n */\nexport function parseDropEvent( event ) {\n\tlet result = {\n\t\tsrcRootClientId: null,\n\t\tsrcClientIds: null,\n\t\tsrcIndex: null,\n\t\ttype: null,\n\t\tblocks: null,\n\t};\n\n\tif ( ! event.dataTransfer ) {\n\t\treturn result;\n\t}\n\n\ttry {\n\t\tresult = Object.assign(\n\t\t\tresult,\n\t\t\tJSON.parse( event.dataTransfer.getData( 'wp-blocks' ) )\n\t\t);\n\t} catch ( err ) {\n\t\treturn result;\n\t}\n\n\treturn result;\n}\n\n/**\n * A function that returns an event handler function for block drop events.\n *\n * @param {string}   targetRootClientId        The root client id where the block(s) will be inserted.\n * @param {number}   targetBlockIndex          The index where the block(s) will be inserted.\n * @param {Function} getBlockIndex             A function that gets the index of a block.\n * @param {Function} getClientIdsOfDescendants A function that gets the client ids of descendant blocks.\n * @param {Function} moveBlocks                A function that moves blocks.\n * @param {Function} insertOrReplaceBlocks     A function that inserts or replaces blocks.\n * @param {Function} clearSelectedBlock        A function that clears block selection.\n * @param {string}   operation                 The type of operation to perform on drop. Could be `insert` or `replace` or `group`.\n * @param {Function} getBlock                  A function that returns a block given its client id.\n * @return {Function} The event handler for a block drop event.\n */\nexport function onBlockDrop(\n\ttargetRootClientId,\n\ttargetBlockIndex,\n\tgetBlockIndex,\n\tgetClientIdsOfDescendants,\n\tmoveBlocks,\n\tinsertOrReplaceBlocks,\n\tclearSelectedBlock,\n\toperation,\n\tgetBlock\n) {\n\treturn ( event ) => {\n\t\tconst {\n\t\t\tsrcRootClientId: sourceRootClientId,\n\t\t\tsrcClientIds: sourceClientIds,\n\t\t\ttype: dropType,\n\t\t\tblocks,\n\t\t} = parseDropEvent( event );\n\n\t\t// If the user is inserting a block.\n\t\tif ( dropType === 'inserter' ) {\n\t\t\tclearSelectedBlock();\n\t\t\tconst blocksToInsert = blocks.map( ( block ) =>\n\t\t\t\tcloneBlock( block )\n\t\t\t);\n\t\t\tinsertOrReplaceBlocks( blocksToInsert, true, null );\n\t\t}\n\n\t\t// If the user is moving a block.\n\t\tif ( dropType === 'block' ) {\n\t\t\tconst sourceBlockIndex = getBlockIndex( sourceClientIds[ 0 ] );\n\n\t\t\t// If the user is dropping to the same position, return early.\n\t\t\tif (\n\t\t\t\tsourceRootClientId === targetRootClientId &&\n\t\t\t\tsourceBlockIndex === targetBlockIndex\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If the user is attempting to drop a block within its own\n\t\t\t// nested blocks, return early as this would create infinite\n\t\t\t// recursion.\n\t\t\tif (\n\t\t\t\tsourceClientIds.includes( targetRootClientId ) ||\n\t\t\t\tgetClientIdsOfDescendants( sourceClientIds ).some(\n\t\t\t\t\t( id ) => id === targetRootClientId\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If the user is dropping a block over another block, replace both blocks\n\t\t\t// with a group block containing them\n\t\t\tif ( operation === 'group' ) {\n\t\t\t\tconst blocksToInsert = sourceClientIds.map( ( clientId ) =>\n\t\t\t\t\tgetBlock( clientId )\n\t\t\t\t);\n\t\t\t\tinsertOrReplaceBlocks(\n\t\t\t\t\tblocksToInsert,\n\t\t\t\t\ttrue,\n\t\t\t\t\tnull,\n\t\t\t\t\tsourceClientIds\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst isAtSameLevel = sourceRootClientId === targetRootClientId;\n\t\t\tconst draggedBlockCount = sourceClientIds.length;\n\n\t\t\t// If the block is kept at the same level and moved downwards,\n\t\t\t// subtract to take into account that the blocks being dragged\n\t\t\t// were removed from the block list above the insertion point.\n\t\t\tconst insertIndex =\n\t\t\t\tisAtSameLevel && sourceBlockIndex < targetBlockIndex\n\t\t\t\t\t? targetBlockIndex - draggedBlockCount\n\t\t\t\t\t: targetBlockIndex;\n\n\t\t\tmoveBlocks( sourceClientIds, sourceRootClientId, insertIndex );\n\t\t}\n\t};\n}\n\n/**\n * A function that returns an event handler function for block-related file drop events.\n *\n * @param {string}   targetRootClientId    The root client id where the block(s) will be inserted.\n * @param {Function} getSettings           A function that gets the block editor settings.\n * @param {Function} updateBlockAttributes A function that updates a block's attributes.\n * @param {Function} canInsertBlockType    A function that returns checks whether a block type can be inserted.\n * @param {Function} insertOrReplaceBlocks A function that inserts or replaces blocks.\n *\n * @return {Function} The event handler for a block-related file drop event.\n */\nexport function onFilesDrop(\n\ttargetRootClientId,\n\tgetSettings,\n\tupdateBlockAttributes,\n\tcanInsertBlockType,\n\tinsertOrReplaceBlocks\n) {\n\treturn ( files ) => {\n\t\tif ( ! getSettings().mediaUpload ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst transformation = findTransform(\n\t\t\tgetBlockTransforms( 'from' ),\n\t\t\t( transform ) =>\n\t\t\t\ttransform.type === 'files' &&\n\t\t\t\tcanInsertBlockType( transform.blockName, targetRootClientId ) &&\n\t\t\t\ttransform.isMatch( files )\n\t\t);\n\n\t\tif ( transformation ) {\n\t\t\tconst blocks = transformation.transform(\n\t\t\t\tfiles,\n\t\t\t\tupdateBlockAttributes\n\t\t\t);\n\t\t\tinsertOrReplaceBlocks( blocks );\n\t\t}\n\t};\n}\n\n/**\n * A function that returns an event handler function for block-related HTML drop events.\n *\n * @param {Function} insertOrReplaceBlocks A function that inserts or replaces blocks.\n *\n * @return {Function} The event handler for a block-related HTML drop event.\n */\nexport function onHTMLDrop( insertOrReplaceBlocks ) {\n\treturn ( HTML ) => {\n\t\tconst blocks = pasteHandler( { HTML, mode: 'BLOCKS' } );\n\n\t\tif ( blocks.length ) {\n\t\t\tinsertOrReplaceBlocks( blocks );\n\t\t}\n\t};\n}\n\n/**\n * A React hook for handling block drop events.\n *\n * @param {string}          targetRootClientId  The root client id where the block(s) will be inserted.\n * @param {number}          targetBlockIndex    The index where the block(s) will be inserted.\n * @param {Object}          options             The optional options.\n * @param {WPDropOperation} [options.operation] The type of operation to perform on drop. Could be `insert` or `replace` for now.\n *\n * @return {Function} A function to be passed to the onDrop handler.\n */\nexport default function useOnBlockDrop(\n\ttargetRootClientId,\n\ttargetBlockIndex,\n\toptions = {}\n) {\n\tconst { operation = 'insert', nearestSide = 'right' } = options;\n\tconst {\n\t\tcanInsertBlockType,\n\t\tgetBlockIndex,\n\t\tgetClientIdsOfDescendants,\n\t\tgetBlockOrder,\n\t\tgetBlocksByClientId,\n\t\tgetSettings,\n\t\tgetBlock,\n\t} = useSelect( blockEditorStore );\n\tconst { getGroupingBlockName } = useSelect( blocksStore );\n\tconst {\n\t\tinsertBlocks,\n\t\tmoveBlocksToPosition,\n\t\tupdateBlockAttributes,\n\t\tclearSelectedBlock,\n\t\treplaceBlocks,\n\t\tremoveBlocks,\n\t} = useDispatch( blockEditorStore );\n\tconst registry = useRegistry();\n\n\tconst insertOrReplaceBlocks = useCallback(\n\t\t(\n\t\t\tblocks,\n\t\t\tupdateSelection = true,\n\t\t\tinitialPosition = 0,\n\t\t\tclientIdsToReplace = []\n\t\t) => {\n\t\t\tif ( ! Array.isArray( blocks ) ) {\n\t\t\t\tblocks = [ blocks ];\n\t\t\t}\n\t\t\tconst clientIds = getBlockOrder( targetRootClientId );\n\t\t\tconst clientId = clientIds[ targetBlockIndex ];\n\t\t\tif ( operation === 'replace' ) {\n\t\t\t\treplaceBlocks( clientId, blocks, undefined, initialPosition );\n\t\t\t} else if ( operation === 'group' ) {\n\t\t\t\tconst targetBlock = getBlock( clientId );\n\t\t\t\tif ( nearestSide === 'left' ) {\n\t\t\t\t\tblocks.push( targetBlock );\n\t\t\t\t} else {\n\t\t\t\t\tblocks.unshift( targetBlock );\n\t\t\t\t}\n\n\t\t\t\tconst groupInnerBlocks = blocks.map( ( block ) => {\n\t\t\t\t\treturn createBlock(\n\t\t\t\t\t\tblock.name,\n\t\t\t\t\t\tblock.attributes,\n\t\t\t\t\t\tblock.innerBlocks\n\t\t\t\t\t);\n\t\t\t\t} );\n\n\t\t\t\tconst areAllImages = blocks.every( ( block ) => {\n\t\t\t\t\treturn block.name === 'core/image';\n\t\t\t\t} );\n\n\t\t\t\tconst galleryBlock = canInsertBlockType(\n\t\t\t\t\t'core/gallery',\n\t\t\t\t\ttargetRootClientId\n\t\t\t\t);\n\n\t\t\t\tconst wrappedBlocks = createBlock(\n\t\t\t\t\tareAllImages && galleryBlock\n\t\t\t\t\t\t? 'core/gallery'\n\t\t\t\t\t\t: getGroupingBlockName(),\n\t\t\t\t\t{\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\ttype: 'flex',\n\t\t\t\t\t\t\tflexWrap:\n\t\t\t\t\t\t\t\tareAllImages && galleryBlock ? null : 'nowrap',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tgroupInnerBlocks\n\t\t\t\t);\n\t\t\t\t// Need to make sure both the target block and the block being dragged are replaced\n\t\t\t\t// otherwise the dragged block will be duplicated.\n\t\t\t\treplaceBlocks(\n\t\t\t\t\t[ clientId, ...clientIdsToReplace ],\n\t\t\t\t\twrappedBlocks,\n\t\t\t\t\tundefined,\n\t\t\t\t\tinitialPosition\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tinsertBlocks(\n\t\t\t\t\tblocks,\n\t\t\t\t\ttargetBlockIndex,\n\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\tupdateSelection,\n\t\t\t\t\tinitialPosition\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tgetBlockOrder,\n\t\t\ttargetRootClientId,\n\t\t\ttargetBlockIndex,\n\t\t\toperation,\n\t\t\treplaceBlocks,\n\t\t\tgetBlock,\n\t\t\tnearestSide,\n\t\t\tcanInsertBlockType,\n\t\t\tgetGroupingBlockName,\n\t\t\tinsertBlocks,\n\t\t]\n\t);\n\n\tconst moveBlocks = useCallback(\n\t\t( sourceClientIds, sourceRootClientId, insertIndex ) => {\n\t\t\tif ( operation === 'replace' ) {\n\t\t\t\tconst sourceBlocks = getBlocksByClientId( sourceClientIds );\n\t\t\t\tconst targetBlockClientIds =\n\t\t\t\t\tgetBlockOrder( targetRootClientId );\n\t\t\t\tconst targetBlockClientId =\n\t\t\t\t\ttargetBlockClientIds[ targetBlockIndex ];\n\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t// Remove the source blocks.\n\t\t\t\t\tremoveBlocks( sourceClientIds, false );\n\t\t\t\t\t// Replace the target block with the source blocks.\n\t\t\t\t\treplaceBlocks(\n\t\t\t\t\t\ttargetBlockClientId,\n\t\t\t\t\t\tsourceBlocks,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t0\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\tsourceClientIds,\n\t\t\t\t\tsourceRootClientId,\n\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\tinsertIndex\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\toperation,\n\t\t\tgetBlockOrder,\n\t\t\tgetBlocksByClientId,\n\t\t\tmoveBlocksToPosition,\n\t\t\tregistry,\n\t\t\tremoveBlocks,\n\t\t\treplaceBlocks,\n\t\t\ttargetBlockIndex,\n\t\t\ttargetRootClientId,\n\t\t]\n\t);\n\n\tconst _onDrop = onBlockDrop(\n\t\ttargetRootClientId,\n\t\ttargetBlockIndex,\n\t\tgetBlockIndex,\n\t\tgetClientIdsOfDescendants,\n\t\tmoveBlocks,\n\t\tinsertOrReplaceBlocks,\n\t\tclearSelectedBlock,\n\t\toperation,\n\t\tgetBlock\n\t);\n\tconst _onFilesDrop = onFilesDrop(\n\t\ttargetRootClientId,\n\t\tgetSettings,\n\t\tupdateBlockAttributes,\n\t\tcanInsertBlockType,\n\t\tinsertOrReplaceBlocks\n\t);\n\tconst _onHTMLDrop = onHTMLDrop( insertOrReplaceBlocks );\n\n\treturn ( event ) => {\n\t\tconst files = getFilesFromDataTransfer( event.dataTransfer );\n\t\tconst html = event.dataTransfer.getData( 'text/html' );\n\n\t\t/**\n\t\t * From Windows Chrome 96, the `event.dataTransfer` returns both file object and HTML.\n\t\t * The order of the checks is important to recognise the HTML drop.\n\t\t */\n\t\tif ( html ) {\n\t\t\t_onHTMLDrop( html );\n\t\t} else if ( files.length ) {\n\t\t\t_onFilesDrop( files );\n\t\t} else {\n\t\t\t_onDrop( event );\n\t\t}\n\t};\n}\n","/**\n * A string representing the name of an edge.\n *\n * @typedef {'top'|'right'|'bottom'|'left'} WPEdgeName\n */\n\n/**\n * @typedef  {Object} WPPoint\n * @property {number} x The horizontal position.\n * @property {number} y The vertical position.\n */\n\n/**\n * Given a point, a DOMRect and the name of an edge, returns the distance to\n * that edge of the rect.\n *\n * This function works for edges that are horizontal or vertical (e.g. not\n * rotated), the following terms are used so that the function works in both\n * orientations:\n *\n * - Forward, meaning the axis running horizontally when an edge is vertical\n *   and vertically when an edge is horizontal.\n * - Lateral, meaning the axis running vertically when an edge is vertical\n *   and horizontally when an edge is horizontal.\n *\n * @param {WPPoint}    point The point to measure distance from.\n * @param {DOMRect}    rect  A DOM Rect containing edge positions.\n * @param {WPEdgeName} edge  The edge to measure to.\n */\nexport function getDistanceFromPointToEdge( point, rect, edge ) {\n\tconst isHorizontal = edge === 'top' || edge === 'bottom';\n\tconst { x, y } = point;\n\tconst pointLateralPosition = isHorizontal ? x : y;\n\tconst pointForwardPosition = isHorizontal ? y : x;\n\tconst edgeStart = isHorizontal ? rect.left : rect.top;\n\tconst edgeEnd = isHorizontal ? rect.right : rect.bottom;\n\tconst edgeForwardPosition = rect[ edge ];\n\n\t// Measure the straight line distance to the edge of the rect, when the\n\t// point is adjacent to the edge.\n\t// Else, if the point is positioned diagonally to the edge of the rect,\n\t// measure diagonally to the nearest corner that the edge meets.\n\tlet edgeLateralPosition;\n\tif (\n\t\tpointLateralPosition >= edgeStart &&\n\t\tpointLateralPosition <= edgeEnd\n\t) {\n\t\tedgeLateralPosition = pointLateralPosition;\n\t} else if ( pointLateralPosition < edgeEnd ) {\n\t\tedgeLateralPosition = edgeStart;\n\t} else {\n\t\tedgeLateralPosition = edgeEnd;\n\t}\n\n\treturn Math.sqrt(\n\t\t( pointLateralPosition - edgeLateralPosition ) ** 2 +\n\t\t\t( pointForwardPosition - edgeForwardPosition ) ** 2\n\t);\n}\n\n/**\n * Given a point, a DOMRect and a list of allowed edges returns the name of and\n * distance to the nearest edge.\n *\n * @param {WPPoint}      point        The point to measure distance from.\n * @param {DOMRect}      rect         A DOM Rect containing edge positions.\n * @param {WPEdgeName[]} allowedEdges A list of the edges included in the\n *                                    calculation. Defaults to all edges.\n *\n * @return {[number, string]} An array where the first value is the distance\n *                              and a second is the edge name.\n */\nexport function getDistanceToNearestEdge(\n\tpoint,\n\trect,\n\tallowedEdges = [ 'top', 'bottom', 'left', 'right' ]\n) {\n\tlet candidateDistance;\n\tlet candidateEdge;\n\n\tallowedEdges.forEach( ( edge ) => {\n\t\tconst distance = getDistanceFromPointToEdge( point, rect, edge );\n\n\t\tif ( candidateDistance === undefined || distance < candidateDistance ) {\n\t\t\tcandidateDistance = distance;\n\t\t\tcandidateEdge = edge;\n\t\t}\n\t} );\n\n\treturn [ candidateDistance, candidateEdge ];\n}\n\n/**\n * Is the point contained by the rectangle.\n *\n * @param {WPPoint} point The point.\n * @param {DOMRect} rect  The rectangle.\n *\n * @return {boolean} True if the point is contained by the rectangle, false otherwise.\n */\nexport function isPointContainedByRect( point, rect ) {\n\treturn (\n\t\trect.left <= point.x &&\n\t\trect.right >= point.x &&\n\t\trect.top <= point.y &&\n\t\trect.bottom >= point.y\n\t);\n}\n\n/**\n * Is the point within the top and bottom boundaries of the rectangle.\n *\n * @param {WPPoint} point The point.\n * @param {DOMRect} rect  The rectangle.\n *\n * @return {boolean} True if the point is within top and bottom of rectangle, false otherwise.\n */\nexport function isPointWithinTopAndBottomBoundariesOfRect( point, rect ) {\n\treturn rect.top <= point.y && rect.bottom >= point.y;\n}\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect, useRegistry } from '@wordpress/data';\nimport { useCallback, useState } from '@wordpress/element';\nimport {\n\tuseThrottle,\n\t__experimentalUseDropZone as useDropZone,\n} from '@wordpress/compose';\nimport { isRTL } from '@wordpress/i18n';\nimport {\n\tisUnmodifiedDefaultBlock as getIsUnmodifiedDefaultBlock,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport useOnBlockDrop from '../use-on-block-drop';\nimport {\n\tgetDistanceToNearestEdge,\n\tisPointContainedByRect,\n\tisPointWithinTopAndBottomBoundariesOfRect,\n} from '../../utils/math';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nconst THRESHOLD_DISTANCE = 30;\nconst MINIMUM_HEIGHT_FOR_THRESHOLD = 120;\nconst MINIMUM_WIDTH_FOR_THRESHOLD = 120;\n\n/** @typedef {import('../../utils/math').WPPoint} WPPoint */\n/** @typedef {import('../use-on-block-drop/types').WPDropOperation} WPDropOperation */\n\n/**\n * The orientation of a block list.\n *\n * @typedef {'horizontal'|'vertical'|undefined} WPBlockListOrientation\n */\n\n/**\n * The insert position when dropping a block.\n *\n * @typedef {'before'|'after'} WPInsertPosition\n */\n\n/**\n * @typedef {Object} WPBlockData\n * @property {boolean}       isUnmodifiedDefaultBlock Is the block unmodified default block.\n * @property {() => DOMRect} getBoundingClientRect    Get the bounding client rect of the block.\n * @property {number}        blockIndex               The index of the block.\n */\n\n/**\n * Get the drop target position from a given drop point and the orientation.\n *\n * @param {WPBlockData[]}          blocksData  The block data list.\n * @param {WPPoint}                position    The position of the item being dragged.\n * @param {WPBlockListOrientation} orientation The orientation of the block list.\n * @param {Object}                 options     Additional options.\n * @return {[number, WPDropOperation]} The drop target position.\n */\nexport function getDropTargetPosition(\n\tblocksData,\n\tposition,\n\torientation = 'vertical',\n\toptions = {}\n) {\n\tconst allowedEdges =\n\t\torientation === 'horizontal'\n\t\t\t? [ 'left', 'right' ]\n\t\t\t: [ 'top', 'bottom' ];\n\n\tlet nearestIndex = 0;\n\tlet insertPosition = 'before';\n\tlet minDistance = Infinity;\n\tlet targetBlockIndex = null;\n\tlet nearestSide = 'right';\n\n\tconst {\n\t\tdropZoneElement,\n\t\tparentBlockOrientation,\n\t\trootBlockIndex = 0,\n\t} = options;\n\n\t// Allow before/after when dragging over the top/bottom edges of the drop zone.\n\tif ( dropZoneElement && parentBlockOrientation !== 'horizontal' ) {\n\t\tconst rect = dropZoneElement.getBoundingClientRect();\n\t\tconst [ distance, edge ] = getDistanceToNearestEdge( position, rect, [\n\t\t\t'top',\n\t\t\t'bottom',\n\t\t] );\n\n\t\t// If dragging over the top or bottom of the drop zone, insert the block\n\t\t// before or after the parent block. This only applies to blocks that use\n\t\t// a drop zone element, typically container blocks such as Group or Cover.\n\t\tif (\n\t\t\trect.height > MINIMUM_HEIGHT_FOR_THRESHOLD &&\n\t\t\tdistance < THRESHOLD_DISTANCE\n\t\t) {\n\t\t\tif ( edge === 'top' ) {\n\t\t\t\treturn [ rootBlockIndex, 'before' ];\n\t\t\t}\n\t\t\tif ( edge === 'bottom' ) {\n\t\t\t\treturn [ rootBlockIndex + 1, 'after' ];\n\t\t\t}\n\t\t}\n\t}\n\n\tconst isRightToLeft = isRTL();\n\n\t// Allow before/after when dragging over the left/right edges of the drop zone.\n\tif ( dropZoneElement && parentBlockOrientation === 'horizontal' ) {\n\t\tconst rect = dropZoneElement.getBoundingClientRect();\n\t\tconst [ distance, edge ] = getDistanceToNearestEdge( position, rect, [\n\t\t\t'left',\n\t\t\t'right',\n\t\t] );\n\n\t\t// If dragging over the left or right of the drop zone, insert the block\n\t\t// before or after the parent block. This only applies to blocks that use\n\t\t// a drop zone element, typically container blocks such as Group.\n\t\tif (\n\t\t\trect.width > MINIMUM_WIDTH_FOR_THRESHOLD &&\n\t\t\tdistance < THRESHOLD_DISTANCE\n\t\t) {\n\t\t\tif (\n\t\t\t\t( isRightToLeft && edge === 'right' ) ||\n\t\t\t\t( ! isRightToLeft && edge === 'left' )\n\t\t\t) {\n\t\t\t\treturn [ rootBlockIndex, 'before' ];\n\t\t\t}\n\t\t\tif (\n\t\t\t\t( isRightToLeft && edge === 'left' ) ||\n\t\t\t\t( ! isRightToLeft && edge === 'right' )\n\t\t\t) {\n\t\t\t\treturn [ rootBlockIndex + 1, 'after' ];\n\t\t\t}\n\t\t}\n\t}\n\n\tblocksData.forEach(\n\t\t( {\n\t\t\tisUnmodifiedDefaultBlock,\n\t\t\tgetBoundingClientRect,\n\t\t\tblockIndex,\n\t\t\tblockOrientation,\n\t\t} ) => {\n\t\t\tconst rect = getBoundingClientRect();\n\n\t\t\tlet [ distance, edge ] = getDistanceToNearestEdge(\n\t\t\t\tposition,\n\t\t\t\trect,\n\t\t\t\tallowedEdges\n\t\t\t);\n\t\t\t// If the the point is close to a side, prioritize that side.\n\t\t\tconst [ sideDistance, sideEdge ] = getDistanceToNearestEdge(\n\t\t\t\tposition,\n\t\t\t\trect,\n\t\t\t\t[ 'left', 'right' ]\n\t\t\t);\n\n\t\t\tconst isPointInsideRect = isPointContainedByRect( position, rect );\n\n\t\t\t// Prioritize the element if the point is inside of an unmodified default block.\n\t\t\tif ( isUnmodifiedDefaultBlock && isPointInsideRect ) {\n\t\t\t\tdistance = 0;\n\t\t\t} else if (\n\t\t\t\torientation === 'vertical' &&\n\t\t\t\tblockOrientation !== 'horizontal' &&\n\t\t\t\t( ( isPointInsideRect && sideDistance < THRESHOLD_DISTANCE ) ||\n\t\t\t\t\t( ! isPointInsideRect &&\n\t\t\t\t\t\tisPointWithinTopAndBottomBoundariesOfRect(\n\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\trect\n\t\t\t\t\t\t) ) )\n\t\t\t) {\n\t\t\t\t/**\n\t\t\t\t * This condition should only apply when the layout is vertical (otherwise there's\n\t\t\t\t * no need to create a Row) and dropzones should only activate when the block is\n\t\t\t\t * either within and close to the sides of the target block or on its outer sides.\n\t\t\t\t */\n\t\t\t\ttargetBlockIndex = blockIndex;\n\t\t\t\tnearestSide = sideEdge;\n\t\t\t}\n\n\t\t\tif ( distance < minDistance ) {\n\t\t\t\t// Where the dropped block will be inserted on the nearest block.\n\t\t\t\tinsertPosition =\n\t\t\t\t\tedge === 'bottom' ||\n\t\t\t\t\t( ! isRightToLeft && edge === 'right' ) ||\n\t\t\t\t\t( isRightToLeft && edge === 'left' )\n\t\t\t\t\t\t? 'after'\n\t\t\t\t\t\t: 'before';\n\n\t\t\t\t// Update the currently known best candidate.\n\t\t\t\tminDistance = distance;\n\t\t\t\tnearestIndex = blockIndex;\n\t\t\t}\n\t\t}\n\t);\n\n\tconst adjacentIndex =\n\t\tnearestIndex + ( insertPosition === 'after' ? 1 : -1 );\n\tconst isNearestBlockUnmodifiedDefaultBlock =\n\t\t!! blocksData[ nearestIndex ]?.isUnmodifiedDefaultBlock;\n\tconst isAdjacentBlockUnmodifiedDefaultBlock =\n\t\t!! blocksData[ adjacentIndex ]?.isUnmodifiedDefaultBlock;\n\n\t// If the target index is set then group with the block at that index.\n\tif ( targetBlockIndex !== null ) {\n\t\treturn [ targetBlockIndex, 'group', nearestSide ];\n\t}\n\t// If both blocks are not unmodified default blocks then just insert between them.\n\tif (\n\t\t! isNearestBlockUnmodifiedDefaultBlock &&\n\t\t! isAdjacentBlockUnmodifiedDefaultBlock\n\t) {\n\t\t// If the user is dropping to the trailing edge of the block\n\t\t// add 1 to the index to represent dragging after.\n\t\tconst insertionIndex =\n\t\t\tinsertPosition === 'after' ? nearestIndex + 1 : nearestIndex;\n\t\treturn [ insertionIndex, 'insert' ];\n\t}\n\n\t// Otherwise, replace the nearest unmodified default block.\n\treturn [\n\t\tisNearestBlockUnmodifiedDefaultBlock ? nearestIndex : adjacentIndex,\n\t\t'replace',\n\t];\n}\n\n/**\n * Check if the dragged blocks can be dropped on the target.\n * @param {Function} getBlockType\n * @param {Object[]} allowedBlocks\n * @param {string[]} draggedBlockNames\n * @param {string}   targetBlockName\n * @return {boolean} Whether the dragged blocks can be dropped on the target.\n */\nexport function isDropTargetValid(\n\tgetBlockType,\n\tallowedBlocks,\n\tdraggedBlockNames,\n\ttargetBlockName\n) {\n\t// At root level allowedBlocks is undefined and all blocks are allowed.\n\t// Otherwise, check if all dragged blocks are allowed.\n\tlet areBlocksAllowed = true;\n\tif ( allowedBlocks ) {\n\t\tconst allowedBlockNames = allowedBlocks?.map( ( { name } ) => name );\n\n\t\tareBlocksAllowed = draggedBlockNames.every( ( name ) =>\n\t\t\tallowedBlockNames?.includes( name )\n\t\t);\n\t}\n\n\t// Work out if dragged blocks have an allowed parent and if so\n\t// check target block matches the allowed parent.\n\tconst draggedBlockTypes = draggedBlockNames.map( ( name ) =>\n\t\tgetBlockType( name )\n\t);\n\tconst targetMatchesDraggedBlockParents = draggedBlockTypes.every(\n\t\t( block ) => {\n\t\t\tconst [ allowedParentName ] = block?.parent || [];\n\t\t\tif ( ! allowedParentName ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn allowedParentName === targetBlockName;\n\t\t}\n\t);\n\n\treturn areBlocksAllowed && targetMatchesDraggedBlockParents;\n}\n\n/**\n * Checks if the given element is an insertion point.\n *\n * @param {EventTarget|null} targetToCheck - The element to check.\n * @param {Document}         ownerDocument - The owner document of the element.\n * @return {boolean} True if the element is a insertion point, false otherwise.\n */\nfunction isInsertionPoint( targetToCheck, ownerDocument ) {\n\tconst { defaultView } = ownerDocument;\n\n\treturn !! (\n\t\tdefaultView &&\n\t\ttargetToCheck instanceof defaultView.HTMLElement &&\n\t\ttargetToCheck.closest( '[data-is-insertion-point]' )\n\t);\n}\n\n/**\n * @typedef  {Object} WPBlockDropZoneConfig\n * @property {?HTMLElement} dropZoneElement Optional element to be used as the drop zone.\n * @property {string}       rootClientId    The root client id for the block list.\n */\n\n/**\n * A React hook that can be used to make a block list handle drag and drop.\n *\n * @param {WPBlockDropZoneConfig} dropZoneConfig configuration data for the drop zone.\n */\nexport default function useBlockDropZone( {\n\tdropZoneElement,\n\t// An undefined value represents a top-level block. Default to an empty\n\t// string for this so that `targetRootClientId` can be easily compared to\n\t// values returned by the `getRootBlockClientId` selector, which also uses\n\t// an empty string to represent top-level blocks.\n\trootClientId: targetRootClientId = '',\n\tparentClientId: parentBlockClientId = '',\n\tisDisabled = false,\n} = {} ) {\n\tconst registry = useRegistry();\n\tconst [ dropTarget, setDropTarget ] = useState( {\n\t\tindex: null,\n\t\toperation: 'insert',\n\t} );\n\n\tconst { getBlockType, getBlockVariations, getGroupingBlockName } =\n\t\tuseSelect( blocksStore );\n\tconst {\n\t\tcanInsertBlockType,\n\t\tgetBlockListSettings,\n\t\tgetBlocks,\n\t\tgetBlockIndex,\n\t\tgetDraggedBlockClientIds,\n\t\tgetBlockNamesByClientId,\n\t\tgetAllowedBlocks,\n\t\tisDragging,\n\t\tisGroupable,\n\t\tisZoomOut,\n\t\tgetSectionRootClientId,\n\t\tgetBlockParents,\n\t} = unlock( useSelect( blockEditorStore ) );\n\tconst {\n\t\tshowInsertionPoint,\n\t\thideInsertionPoint,\n\t\tstartDragging,\n\t\tstopDragging,\n\t} = unlock( useDispatch( blockEditorStore ) );\n\n\tconst onBlockDrop = useOnBlockDrop(\n\t\tdropTarget.operation === 'before' || dropTarget.operation === 'after'\n\t\t\t? parentBlockClientId\n\t\t\t: targetRootClientId,\n\t\tdropTarget.index,\n\t\t{\n\t\t\toperation: dropTarget.operation,\n\t\t\tnearestSide: dropTarget.nearestSide,\n\t\t}\n\t);\n\tconst throttled = useThrottle(\n\t\tuseCallback(\n\t\t\t( event, ownerDocument ) => {\n\t\t\t\tif ( ! isDragging() ) {\n\t\t\t\t\t// When dragging from the desktop, no drag start event is fired.\n\t\t\t\t\t// So, ensure that the drag state is set when the user drags over a drop zone.\n\t\t\t\t\tstartDragging();\n\t\t\t\t}\n\n\t\t\t\tconst draggedBlockClientIds = getDraggedBlockClientIds();\n\t\t\t\tconst targetParents = [\n\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\t...getBlockParents( targetRootClientId, true ),\n\t\t\t\t];\n\n\t\t\t\t// Check if the target is within any of the dragged blocks.\n\t\t\t\tconst isTargetWithinDraggedBlocks = draggedBlockClientIds.some(\n\t\t\t\t\t( clientId ) => targetParents.includes( clientId )\n\t\t\t\t);\n\n\t\t\t\tif ( isTargetWithinDraggedBlocks ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst allowedBlocks = getAllowedBlocks( targetRootClientId );\n\t\t\t\tconst targetBlockName = getBlockNamesByClientId( [\n\t\t\t\t\ttargetRootClientId,\n\t\t\t\t] )[ 0 ];\n\n\t\t\t\tconst draggedBlockNames = getBlockNamesByClientId(\n\t\t\t\t\tdraggedBlockClientIds\n\t\t\t\t);\n\t\t\t\tconst isBlockDroppingAllowed = isDropTargetValid(\n\t\t\t\t\tgetBlockType,\n\t\t\t\t\tallowedBlocks,\n\t\t\t\t\tdraggedBlockNames,\n\t\t\t\t\ttargetBlockName\n\t\t\t\t);\n\n\t\t\t\tif ( ! isBlockDroppingAllowed ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst sectionRootClientId = getSectionRootClientId();\n\n\t\t\t\t// In Zoom Out mode, if the target is not the section root provided by settings then\n\t\t\t\t// do not allow dropping as the drop target is not within the root (that which is\n\t\t\t\t// treated as \"the content\" by Zoom Out Mode).\n\t\t\t\tif (\n\t\t\t\t\tisZoomOut() &&\n\t\t\t\t\tsectionRootClientId !== targetRootClientId\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst blocks = getBlocks( targetRootClientId );\n\n\t\t\t\t// The block list is empty, don't show the insertion point but still allow dropping.\n\t\t\t\tif ( blocks.length === 0 ) {\n\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\tsetDropTarget( {\n\t\t\t\t\t\t\tindex: 0,\n\t\t\t\t\t\t\toperation: 'insert',\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tshowInsertionPoint( targetRootClientId, 0, {\n\t\t\t\t\t\t\toperation: 'insert',\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst blocksData = blocks.map( ( block ) => {\n\t\t\t\t\tconst clientId = block.clientId;\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tisUnmodifiedDefaultBlock:\n\t\t\t\t\t\t\tgetIsUnmodifiedDefaultBlock( block ),\n\t\t\t\t\t\tgetBoundingClientRect: () =>\n\t\t\t\t\t\t\townerDocument\n\t\t\t\t\t\t\t\t.getElementById( `block-${ clientId }` )\n\t\t\t\t\t\t\t\t.getBoundingClientRect(),\n\t\t\t\t\t\tblockIndex: getBlockIndex( clientId ),\n\t\t\t\t\t\tblockOrientation:\n\t\t\t\t\t\t\tgetBlockListSettings( clientId )?.orientation,\n\t\t\t\t\t};\n\t\t\t\t} );\n\n\t\t\t\tconst dropTargetPosition = getDropTargetPosition(\n\t\t\t\t\tblocksData,\n\t\t\t\t\t{ x: event.clientX, y: event.clientY },\n\t\t\t\t\tgetBlockListSettings( targetRootClientId )?.orientation,\n\t\t\t\t\t{\n\t\t\t\t\t\tdropZoneElement,\n\t\t\t\t\t\tparentBlockClientId,\n\t\t\t\t\t\tparentBlockOrientation: parentBlockClientId\n\t\t\t\t\t\t\t? getBlockListSettings( parentBlockClientId )\n\t\t\t\t\t\t\t\t\t?.orientation\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\trootBlockIndex: getBlockIndex( targetRootClientId ),\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tconst [ targetIndex, operation, nearestSide ] =\n\t\t\t\t\tdropTargetPosition;\n\n\t\t\t\tconst isTargetIndexEmptyDefaultBlock =\n\t\t\t\t\tblocksData[ targetIndex ]?.isUnmodifiedDefaultBlock;\n\n\t\t\t\tif (\n\t\t\t\t\tisZoomOut() &&\n\t\t\t\t\t! isTargetIndexEmptyDefaultBlock &&\n\t\t\t\t\toperation !== 'insert'\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( operation === 'group' ) {\n\t\t\t\t\tconst targetBlock = blocks[ targetIndex ];\n\t\t\t\t\tconst areAllImages = [\n\t\t\t\t\t\ttargetBlock.name,\n\t\t\t\t\t\t...draggedBlockNames,\n\t\t\t\t\t].every( ( name ) => name === 'core/image' );\n\t\t\t\t\tconst canInsertGalleryBlock = canInsertBlockType(\n\t\t\t\t\t\t'core/gallery',\n\t\t\t\t\t\ttargetRootClientId\n\t\t\t\t\t);\n\t\t\t\t\tconst areGroupableBlocks = isGroupable( [\n\t\t\t\t\t\ttargetBlock.clientId,\n\t\t\t\t\t\tgetDraggedBlockClientIds(),\n\t\t\t\t\t] );\n\t\t\t\t\tconst groupBlockVariations = getBlockVariations(\n\t\t\t\t\t\tgetGroupingBlockName(),\n\t\t\t\t\t\t'block'\n\t\t\t\t\t);\n\t\t\t\t\tconst canInsertRow =\n\t\t\t\t\t\tgroupBlockVariations &&\n\t\t\t\t\t\tgroupBlockVariations.find(\n\t\t\t\t\t\t\t( { name } ) => name === 'group-row'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t// If the dragged blocks and the target block are all images,\n\t\t\t\t\t// check if it is creatable either a Row variation or a Gallery block.\n\t\t\t\t\tif (\n\t\t\t\t\t\tareAllImages &&\n\t\t\t\t\t\t! canInsertGalleryBlock &&\n\t\t\t\t\t\t( ! areGroupableBlocks || ! canInsertRow )\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// If the dragged blocks and the target block are not all images,\n\t\t\t\t\t// check if it is creatable a Row variation.\n\t\t\t\t\tif (\n\t\t\t\t\t\t! areAllImages &&\n\t\t\t\t\t\t( ! areGroupableBlocks || ! canInsertRow )\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\tsetDropTarget( {\n\t\t\t\t\t\tindex: targetIndex,\n\t\t\t\t\t\toperation,\n\t\t\t\t\t\tnearestSide,\n\t\t\t\t\t} );\n\n\t\t\t\t\tconst insertionPointClientId = [\n\t\t\t\t\t\t'before',\n\t\t\t\t\t\t'after',\n\t\t\t\t\t].includes( operation )\n\t\t\t\t\t\t? parentBlockClientId\n\t\t\t\t\t\t: targetRootClientId;\n\n\t\t\t\t\tshowInsertionPoint( insertionPointClientId, targetIndex, {\n\t\t\t\t\t\toperation,\n\t\t\t\t\t\tnearestSide,\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t},\n\t\t\t[\n\t\t\t\tisDragging,\n\t\t\t\tgetAllowedBlocks,\n\t\t\t\ttargetRootClientId,\n\t\t\t\tgetBlockNamesByClientId,\n\t\t\t\tgetDraggedBlockClientIds,\n\t\t\t\tgetBlockType,\n\t\t\t\tgetSectionRootClientId,\n\t\t\t\tisZoomOut,\n\t\t\t\tgetBlocks,\n\t\t\t\tgetBlockListSettings,\n\t\t\t\tdropZoneElement,\n\t\t\t\tparentBlockClientId,\n\t\t\t\tgetBlockIndex,\n\t\t\t\tregistry,\n\t\t\t\tstartDragging,\n\t\t\t\tshowInsertionPoint,\n\t\t\t\tcanInsertBlockType,\n\t\t\t\tisGroupable,\n\t\t\t\tgetBlockVariations,\n\t\t\t\tgetGroupingBlockName,\n\t\t\t]\n\t\t),\n\t\t200\n\t);\n\n\treturn useDropZone( {\n\t\tdropZoneElement,\n\t\tisDisabled,\n\t\tonDrop: onBlockDrop,\n\t\tonDragOver( event ) {\n\t\t\t// `currentTarget` is only available while the event is being\n\t\t\t// handled, so get it now and pass it to the thottled function.\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget\n\t\t\tthrottled( event, event.currentTarget.ownerDocument );\n\t\t},\n\t\tonDragLeave( event ) {\n\t\t\tconst { ownerDocument } = event.currentTarget;\n\n\t\t\t// If the drag event is leaving the drop zone and entering an insertion point,\n\t\t\t// do not hide the insertion point as it is conceptually within the dropzone.\n\t\t\tif (\n\t\t\t\tisInsertionPoint( event.relatedTarget, ownerDocument ) ||\n\t\t\t\tisInsertionPoint( event.target, ownerDocument )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthrottled.cancel();\n\t\t\thideInsertionPoint();\n\t\t},\n\t\tonDragEnd() {\n\t\t\tthrottled.cancel();\n\t\t\tstopDragging();\n\t\t\thideInsertionPoint();\n\t\t},\n\t} );\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useMergeRefs } from '@wordpress/compose';\nimport { forwardRef, useMemo, memo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tgetBlockSupport,\n\tstore as blocksStore,\n\t__unstableGetInnerBlocksProps as getInnerBlocksProps,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport ButtonBlockAppender from './button-block-appender';\nimport DefaultBlockAppender from './default-block-appender';\nimport useNestedSettingsUpdate from './use-nested-settings-update';\nimport useInnerBlockTemplateSync from './use-inner-block-template-sync';\nimport useBlockContext from './use-block-context';\nimport { BlockListItems } from '../block-list';\nimport { BlockContextProvider } from '../block-context';\nimport { useBlockEditContext } from '../block-edit/context';\nimport useBlockSync from '../provider/use-block-sync';\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDropZone from '../use-block-drop-zone';\nimport { unlock } from '../../lock-unlock';\n\nconst EMPTY_OBJECT = {};\n\nfunction BlockContext( { children, clientId } ) {\n\tconst context = useBlockContext( clientId );\n\treturn (\n\t\t<BlockContextProvider value={ context }>\n\t\t\t{ children }\n\t\t</BlockContextProvider>\n\t);\n}\n\nconst BlockListItemsMemo = memo( BlockListItems );\n\n/**\n * InnerBlocks is a component which allows a single block to have multiple blocks\n * as children. The UncontrolledInnerBlocks component is used whenever the inner\n * blocks are not controlled by another entity. In other words, it is normally\n * used for inner blocks in the post editor\n *\n * @param {Object} props The component props.\n */\nfunction UncontrolledInnerBlocks( props ) {\n\tconst {\n\t\tclientId,\n\t\tallowedBlocks,\n\t\tprioritizedInserterBlocks,\n\t\tdefaultBlock,\n\t\tdirectInsert,\n\t\t__experimentalDefaultBlock,\n\t\t__experimentalDirectInsert,\n\t\ttemplate,\n\t\ttemplateLock,\n\t\twrapperRef,\n\t\ttemplateInsertUpdatesSelection,\n\t\t__experimentalCaptureToolbars: captureToolbars,\n\t\t__experimentalAppenderTagName,\n\t\trenderAppender,\n\t\torientation,\n\t\tplaceholder,\n\t\tlayout,\n\t\tname,\n\t\tblockType,\n\t\tparentLock,\n\t\tdefaultLayout,\n\t} = props;\n\n\tuseNestedSettingsUpdate(\n\t\tclientId,\n\t\tparentLock,\n\t\tallowedBlocks,\n\t\tprioritizedInserterBlocks,\n\t\tdefaultBlock,\n\t\tdirectInsert,\n\t\t__experimentalDefaultBlock,\n\t\t__experimentalDirectInsert,\n\t\ttemplateLock,\n\t\tcaptureToolbars,\n\t\torientation,\n\t\tlayout\n\t);\n\n\tuseInnerBlockTemplateSync(\n\t\tclientId,\n\t\ttemplate,\n\t\ttemplateLock,\n\t\ttemplateInsertUpdatesSelection\n\t);\n\n\tconst defaultLayoutBlockSupport =\n\t\tgetBlockSupport( name, 'layout' ) ||\n\t\tgetBlockSupport( name, '__experimentalLayout' ) ||\n\t\tEMPTY_OBJECT;\n\n\tconst { allowSizingOnChildren = false } = defaultLayoutBlockSupport;\n\tconst usedLayout = layout || defaultLayoutBlockSupport;\n\n\tconst memoedLayout = useMemo(\n\t\t() => ( {\n\t\t\t// Default layout will know about any content/wide size defined by the theme.\n\t\t\t...defaultLayout,\n\t\t\t...usedLayout,\n\t\t\t...( allowSizingOnChildren && {\n\t\t\t\tallowSizingOnChildren: true,\n\t\t\t} ),\n\t\t} ),\n\t\t[ defaultLayout, usedLayout, allowSizingOnChildren ]\n\t);\n\n\t// For controlled inner blocks, we don't want a change in blocks to\n\t// re-render the blocks list.\n\tconst items = (\n\t\t<BlockListItemsMemo\n\t\t\trootClientId={ clientId }\n\t\t\trenderAppender={ renderAppender }\n\t\t\t__experimentalAppenderTagName={ __experimentalAppenderTagName }\n\t\t\tlayout={ memoedLayout }\n\t\t\twrapperRef={ wrapperRef }\n\t\t\tplaceholder={ placeholder }\n\t\t/>\n\t);\n\n\tif (\n\t\t! blockType?.providesContext ||\n\t\tObject.keys( blockType.providesContext ).length === 0\n\t) {\n\t\treturn items;\n\t}\n\n\treturn <BlockContext clientId={ clientId }>{ items }</BlockContext>;\n}\n\n/**\n * The controlled inner blocks component wraps the uncontrolled inner blocks\n * component with the blockSync hook. This keeps the innerBlocks of the block in\n * the block-editor store in sync with the blocks of the controlling entity. An\n * example of an inner block controller is a template part block, which provides\n * its own blocks from the template part entity data source.\n *\n * @param {Object} props The component props.\n */\nfunction ControlledInnerBlocks( props ) {\n\tuseBlockSync( props );\n\treturn <UncontrolledInnerBlocks { ...props } />;\n}\n\nconst ForwardedInnerBlocks = forwardRef( ( props, ref ) => {\n\tconst innerBlocksProps = useInnerBlocksProps( { ref }, props );\n\treturn (\n\t\t<div className=\"block-editor-inner-blocks\">\n\t\t\t<div { ...innerBlocksProps } />\n\t\t</div>\n\t);\n} );\n\n/**\n * This hook is used to lightly mark an element as an inner blocks wrapper\n * element. Call this hook and pass the returned props to the element to mark as\n * an inner blocks wrapper, automatically rendering inner blocks as children. If\n * you define a ref for the element, it is important to pass the ref to this\n * hook, which the hook in turn will pass to the component through the props it\n * returns. Optionally, you can also pass any other props through this hook, and\n * they will be merged and returned.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/inner-blocks/README.md\n *\n * @param {Object} props   Optional. Props to pass to the element. Must contain\n *                         the ref if one is defined.\n * @param {Object} options Optional. Inner blocks options.\n */\nexport function useInnerBlocksProps( props = {}, options = {} ) {\n\tconst {\n\t\t__unstableDisableLayoutClassNames,\n\t\t__unstableDisableDropZone,\n\t\tdropZoneElement,\n\t} = options;\n\tconst {\n\t\tclientId,\n\t\tlayout = null,\n\t\t__unstableLayoutClassNames: layoutClassNames = '',\n\t} = useBlockEditContext();\n\tconst selected = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tisZoomOut,\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t\tgetBlockSettings,\n\t\t\t\tgetSectionRootClientId,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\n\t\t\tif ( ! clientId ) {\n\t\t\t\tconst sectionRootClientId = getSectionRootClientId();\n\t\t\t\t// Disable the root drop zone when zoomed out and the section root client id\n\t\t\t\t// is not the root block list (represented by an empty string).\n\t\t\t\t// This avoids drag handling bugs caused by having two block lists acting as\n\t\t\t\t// drop zones - the actual 'root' block list and the section root.\n\t\t\t\treturn {\n\t\t\t\t\tisDropZoneDisabled:\n\t\t\t\t\t\tisZoomOut() && sectionRootClientId !== '',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst { hasBlockSupport, getBlockType } = select( blocksStore );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst blockEditingMode = getBlockEditingMode( clientId );\n\t\t\tconst parentClientId = getBlockRootClientId( clientId );\n\t\t\tconst [ defaultLayout ] = getBlockSettings( clientId, 'layout' );\n\n\t\t\tlet _isDropZoneDisabled = blockEditingMode === 'disabled';\n\n\t\t\tif ( isZoomOut() ) {\n\t\t\t\t// In zoom out mode, we want to disable the drop zone for the sections.\n\t\t\t\t// The inner blocks belonging to the section drop zone is\n\t\t\t\t// already disabled by the blocks themselves being disabled.\n\t\t\t\tconst sectionRootClientId = getSectionRootClientId();\n\t\t\t\t_isDropZoneDisabled = clientId !== sectionRootClientId;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t__experimentalCaptureToolbars: hasBlockSupport(\n\t\t\t\t\tblockName,\n\t\t\t\t\t'__experimentalExposeControlsToChildren',\n\t\t\t\t\tfalse\n\t\t\t\t),\n\t\t\t\tname: blockName,\n\t\t\t\tblockType: getBlockType( blockName ),\n\t\t\t\tparentLock: getTemplateLock( parentClientId ),\n\t\t\t\tparentClientId,\n\t\t\t\tisDropZoneDisabled: _isDropZoneDisabled,\n\t\t\t\tdefaultLayout,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst {\n\t\t__experimentalCaptureToolbars,\n\t\tname,\n\t\tblockType,\n\t\tparentLock,\n\t\tparentClientId,\n\t\tisDropZoneDisabled,\n\t\tdefaultLayout,\n\t} = selected;\n\n\tconst blockDropZoneRef = useBlockDropZone( {\n\t\tdropZoneElement,\n\t\trootClientId: clientId,\n\t\tparentClientId,\n\t} );\n\n\tconst ref = useMergeRefs( [\n\t\tprops.ref,\n\t\t__unstableDisableDropZone ||\n\t\tisDropZoneDisabled ||\n\t\t( layout?.isManualPlacement &&\n\t\t\twindow.__experimentalEnableGridInteractivity )\n\t\t\t? null\n\t\t\t: blockDropZoneRef,\n\t] );\n\n\tconst innerBlocksProps = {\n\t\t__experimentalCaptureToolbars,\n\t\tlayout,\n\t\tname,\n\t\tblockType,\n\t\tparentLock,\n\t\tdefaultLayout,\n\t\t...options,\n\t};\n\tconst InnerBlocks =\n\t\tinnerBlocksProps.value && innerBlocksProps.onChange\n\t\t\t? ControlledInnerBlocks\n\t\t\t: UncontrolledInnerBlocks;\n\n\treturn {\n\t\t...props,\n\t\tref,\n\t\tclassName: clsx(\n\t\t\tprops.className,\n\t\t\t'block-editor-block-list__layout',\n\t\t\t__unstableDisableLayoutClassNames ? '' : layoutClassNames\n\t\t),\n\t\tchildren: clientId ? (\n\t\t\t<InnerBlocks { ...innerBlocksProps } clientId={ clientId } />\n\t\t) : (\n\t\t\t<BlockListItems { ...options } />\n\t\t),\n\t};\n}\n\nuseInnerBlocksProps.save = getInnerBlocksProps;\n\n// Expose default appender placeholders as components.\nForwardedInnerBlocks.DefaultBlockAppender = DefaultBlockAppender;\nForwardedInnerBlocks.ButtonBlockAppender = ButtonBlockAppender;\n\nForwardedInnerBlocks.Content = () => useInnerBlocksProps.save().children;\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/inner-blocks/README.md\n */\nexport default ForwardedInnerBlocks;\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Returns a context object for a given block.\n *\n * @param {string} clientId The block client ID.\n *\n * @return {Record<string,*>} Context value.\n */\nexport default function useBlockContext( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst block = select( blockEditorStore ).getBlock( clientId );\n\t\t\tif ( ! block ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst blockType = select( blocksStore ).getBlockType( block.name );\n\t\t\tif ( ! blockType ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif ( Object.keys( blockType.providesContext ).length === 0 ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn Object.fromEntries(\n\t\t\t\tObject.entries( blockType.providesContext ).map(\n\t\t\t\t\t( [ contextName, attributeName ] ) => [\n\t\t\t\t\t\tcontextName,\n\t\t\t\t\t\tblock.attributes[ attributeName ],\n\t\t\t\t\t]\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useLayoutEffect } from '@wordpress/element';\nimport { useRegistry } from '@wordpress/data';\nimport { synchronizeBlocksWithTemplate } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * This hook makes sure that a block's inner blocks stay in sync with the given\n * block \"template\". The template is a block hierarchy to which inner blocks must\n * conform. If the blocks get \"out of sync\" with the template and the template\n * is meant to be locked (e.g. templateLock = \"all\" or templateLock = \"contentOnly\"),\n * then we replace the inner blocks with the correct value after synchronizing it with the template.\n *\n * @param {string}  clientId                       The block client ID.\n * @param {Object}  template                       The template to match.\n * @param {string}  templateLock                   The template lock state for the inner blocks. For\n *                                                 example, if the template lock is set to \"all\",\n *                                                 then the inner blocks will stay in sync with the\n *                                                 template. If not defined or set to false, then\n *                                                 the inner blocks will not be synchronized with\n *                                                 the given template.\n * @param {boolean} templateInsertUpdatesSelection Whether or not to update the\n *                                                 block-editor selection state when inner blocks\n *                                                 are replaced after template synchronization.\n */\nexport default function useInnerBlockTemplateSync(\n\tclientId,\n\ttemplate,\n\ttemplateLock,\n\ttemplateInsertUpdatesSelection\n) {\n\t// Instead of adding a useSelect mapping here, please add to the useSelect\n\t// mapping in InnerBlocks! Every subscription impacts performance.\n\tconst registry = useRegistry();\n\n\t// Maintain a reference to the previous value so we can do a deep equality check.\n\tconst existingTemplateRef = useRef( null );\n\n\tuseLayoutEffect( () => {\n\t\tlet isCancelled = false;\n\n\t\tconst {\n\t\t\tgetBlocks,\n\t\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t\tisBlockSelected,\n\t\t} = registry.select( blockEditorStore );\n\t\tconst { replaceInnerBlocks, __unstableMarkNextChangeAsNotPersistent } =\n\t\t\tregistry.dispatch( blockEditorStore );\n\n\t\t// There's an implicit dependency between useInnerBlockTemplateSync and useNestedSettingsUpdate\n\t\t// The former needs to happen after the latter and since the latter is using microtasks to batch updates (performance optimization),\n\t\t// we need to schedule this one in a microtask as well.\n\t\t// Example: If you remove queueMicrotask here, ctrl + click to insert quote block won't close the inserter.\n\t\twindow.queueMicrotask( () => {\n\t\t\tif ( isCancelled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Only synchronize innerBlocks with template if innerBlocks are empty\n\t\t\t// or a locking \"all\" or \"contentOnly\" exists directly on the block.\n\t\t\tconst currentInnerBlocks = getBlocks( clientId );\n\t\t\tconst shouldApplyTemplate =\n\t\t\t\tcurrentInnerBlocks.length === 0 ||\n\t\t\t\ttemplateLock === 'all' ||\n\t\t\t\ttemplateLock === 'contentOnly';\n\n\t\t\tconst hasTemplateChanged = ! fastDeepEqual(\n\t\t\t\ttemplate,\n\t\t\t\texistingTemplateRef.current\n\t\t\t);\n\n\t\t\tif ( ! shouldApplyTemplate || ! hasTemplateChanged ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\texistingTemplateRef.current = template;\n\t\t\tconst nextBlocks = synchronizeBlocksWithTemplate(\n\t\t\t\tcurrentInnerBlocks,\n\t\t\t\ttemplate\n\t\t\t);\n\n\t\t\tif ( ! fastDeepEqual( nextBlocks, currentInnerBlocks ) ) {\n\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\treplaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tnextBlocks,\n\t\t\t\t\tcurrentInnerBlocks.length === 0 &&\n\t\t\t\t\t\ttemplateInsertUpdatesSelection &&\n\t\t\t\t\t\tnextBlocks.length !== 0 &&\n\t\t\t\t\t\tisBlockSelected( clientId ),\n\t\t\t\t\t// This ensures the \"initialPosition\" doesn't change when applying the template\n\t\t\t\t\t// If we're supposed to focus the block, we'll focus the first inner block\n\t\t\t\t\t// otherwise, we won't apply any auto-focus.\n\t\t\t\t\t// This ensures for instance that the focus stays in the inserter when inserting the \"buttons\" block.\n\t\t\t\t\tgetSelectedBlocksInitialCaretPosition()\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\treturn () => {\n\t\t\tisCancelled = true;\n\t\t};\n\t}, [\n\t\ttemplate,\n\t\ttemplateLock,\n\t\tclientId,\n\t\tregistry,\n\t\ttemplateInsertUpdatesSelection,\n\t] );\n}\n","/**\n * Internal dependencies\n */\nimport BaseDefaultBlockAppender from '../default-block-appender';\nimport { useBlockEditContext } from '../block-edit/context';\n\nexport default function DefaultBlockAppender() {\n\tconst { clientId } = useBlockEditContext();\n\treturn <BaseDefaultBlockAppender rootClientId={ clientId } />;\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * Internal dependencies\n */\nimport BaseButtonBlockAppender from '../button-block-appender';\nimport { useBlockEditContext } from '../block-edit/context';\n\nexport default function ButtonBlockAppender( {\n\tshowSeparator,\n\tisFloating,\n\tonAddBlock,\n\tisToggle,\n} ) {\n\tconst { clientId } = useBlockEditContext();\n\treturn (\n\t\t<BaseButtonBlockAppender\n\t\t\tclassName={ clsx( {\n\t\t\t\t'block-list-appender__toggle': isToggle,\n\t\t\t} ) }\n\t\t\trootClientId={ clientId }\n\t\t\tshowSeparator={ showSeparator }\n\t\t\tisFloating={ isFloating }\n\t\t\tonAddBlock={ onAddBlock }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect, useMergeRefs } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { isTextField } from '@wordpress/dom';\nimport {\n\tUP,\n\tRIGHT,\n\tDOWN,\n\tLEFT,\n\tENTER,\n\tBACKSPACE,\n\tESCAPE,\n\tTAB,\n} from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Set of key codes upon which typing is to be initiated on a keydown event.\n *\n * @type {Set<number>}\n */\nconst KEY_DOWN_ELIGIBLE_KEY_CODES = new Set( [\n\tUP,\n\tRIGHT,\n\tDOWN,\n\tLEFT,\n\tENTER,\n\tBACKSPACE,\n] );\n\n/**\n * Returns true if a given keydown event can be inferred as intent to start\n * typing, or false otherwise. A keydown is considered eligible if it is a\n * text navigation without shift active.\n *\n * @param {KeyboardEvent} event Keydown event to test.\n *\n * @return {boolean} Whether event is eligible to start typing.\n */\nfunction isKeyDownEligibleForStartTyping( event ) {\n\tconst { keyCode, shiftKey } = event;\n\treturn ! shiftKey && KEY_DOWN_ELIGIBLE_KEY_CODES.has( keyCode );\n}\n\n/**\n * Removes the `isTyping` flag when the mouse moves in the document of the given\n * element.\n */\nexport function useMouseMoveTypingReset() {\n\tconst isTyping = useSelect(\n\t\t( select ) => select( blockEditorStore ).isTyping(),\n\t\t[]\n\t);\n\tconst { stopTyping } = useDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! isTyping ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { ownerDocument } = node;\n\t\t\tlet lastClientX;\n\t\t\tlet lastClientY;\n\n\t\t\t/**\n\t\t\t * On mouse move, unset typing flag if user has moved cursor.\n\t\t\t *\n\t\t\t * @param {MouseEvent} event Mousemove event.\n\t\t\t */\n\t\t\tfunction stopTypingOnMouseMove( event ) {\n\t\t\t\tconst { clientX, clientY } = event;\n\n\t\t\t\t// We need to check that the mouse really moved because Safari\n\t\t\t\t// triggers mousemove events when shift or ctrl are pressed.\n\t\t\t\tif (\n\t\t\t\t\tlastClientX &&\n\t\t\t\t\tlastClientY &&\n\t\t\t\t\t( lastClientX !== clientX || lastClientY !== clientY )\n\t\t\t\t) {\n\t\t\t\t\tstopTyping();\n\t\t\t\t}\n\n\t\t\t\tlastClientX = clientX;\n\t\t\t\tlastClientY = clientY;\n\t\t\t}\n\n\t\t\townerDocument.addEventListener(\n\t\t\t\t'mousemove',\n\t\t\t\tstopTypingOnMouseMove\n\t\t\t);\n\n\t\t\treturn () => {\n\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t'mousemove',\n\t\t\t\t\tstopTypingOnMouseMove\n\t\t\t\t);\n\t\t\t};\n\t\t},\n\t\t[ isTyping, stopTyping ]\n\t);\n}\n\n/**\n * Sets and removes the `isTyping` flag based on user actions:\n *\n * - Sets the flag if the user types within the given element.\n * - Removes the flag when the user selects some text, focuses a non-text\n *   field, presses ESC or TAB, or moves the mouse in the document.\n */\nexport function useTypingObserver() {\n\tconst { isTyping } = useSelect( ( select ) => {\n\t\tconst { isTyping: _isTyping } = select( blockEditorStore );\n\t\treturn {\n\t\t\tisTyping: _isTyping(),\n\t\t};\n\t}, [] );\n\tconst { startTyping, stopTyping } = useDispatch( blockEditorStore );\n\n\tconst ref1 = useMouseMoveTypingReset();\n\tconst ref2 = useRefEffect(\n\t\t( node ) => {\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\t\t\tconst selection = defaultView.getSelection();\n\n\t\t\t// Listeners to stop typing should only be added when typing.\n\t\t\t// Listeners to start typing should only be added when not typing.\n\t\t\tif ( isTyping ) {\n\t\t\t\tlet timerId;\n\n\t\t\t\t/**\n\t\t\t\t * Stops typing when focus transitions to a non-text field element.\n\t\t\t\t *\n\t\t\t\t * @param {FocusEvent} event Focus event.\n\t\t\t\t */\n\t\t\t\tfunction stopTypingOnNonTextField( event ) {\n\t\t\t\t\tconst { target } = event;\n\n\t\t\t\t\t// Since focus to a non-text field via arrow key will trigger\n\t\t\t\t\t// before the keydown event, wait until after current stack\n\t\t\t\t\t// before evaluating whether typing is to be stopped. Otherwise,\n\t\t\t\t\t// typing will re-start.\n\t\t\t\t\ttimerId = defaultView.setTimeout( () => {\n\t\t\t\t\t\tif ( ! isTextField( target ) ) {\n\t\t\t\t\t\t\tstopTyping();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Unsets typing flag if user presses Escape while typing flag is\n\t\t\t\t * active.\n\t\t\t\t *\n\t\t\t\t * @param {KeyboardEvent} event Keypress or keydown event to\n\t\t\t\t *                              interpret.\n\t\t\t\t */\n\t\t\t\tfunction stopTypingOnEscapeKey( event ) {\n\t\t\t\t\tconst { keyCode } = event;\n\n\t\t\t\t\tif ( keyCode === ESCAPE || keyCode === TAB ) {\n\t\t\t\t\t\tstopTyping();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * On selection change, unset typing flag if user has made an\n\t\t\t\t * uncollapsed (shift) selection.\n\t\t\t\t */\n\t\t\t\tfunction stopTypingOnSelectionUncollapse() {\n\t\t\t\t\tif ( ! selection.isCollapsed ) {\n\t\t\t\t\t\tstopTyping();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnode.addEventListener( 'focus', stopTypingOnNonTextField );\n\t\t\t\tnode.addEventListener( 'keydown', stopTypingOnEscapeKey );\n\n\t\t\t\townerDocument.addEventListener(\n\t\t\t\t\t'selectionchange',\n\t\t\t\t\tstopTypingOnSelectionUncollapse\n\t\t\t\t);\n\n\t\t\t\treturn () => {\n\t\t\t\t\tdefaultView.clearTimeout( timerId );\n\t\t\t\t\tnode.removeEventListener(\n\t\t\t\t\t\t'focus',\n\t\t\t\t\t\tstopTypingOnNonTextField\n\t\t\t\t\t);\n\t\t\t\t\tnode.removeEventListener(\n\t\t\t\t\t\t'keydown',\n\t\t\t\t\t\tstopTypingOnEscapeKey\n\t\t\t\t\t);\n\t\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t\t'selectionchange',\n\t\t\t\t\t\tstopTypingOnSelectionUncollapse\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Handles a keypress or keydown event to infer intention to start\n\t\t\t * typing.\n\t\t\t *\n\t\t\t * @param {KeyboardEvent} event Keypress or keydown event to interpret.\n\t\t\t */\n\t\t\tfunction startTypingInTextField( event ) {\n\t\t\t\tconst { type, target } = event;\n\n\t\t\t\t// Abort early if already typing, or key press is incurred outside a\n\t\t\t\t// text field (e.g. arrow-ing through toolbar buttons).\n\t\t\t\t// Ignore typing if outside the current DOM container\n\t\t\t\tif ( ! isTextField( target ) || ! node.contains( target ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Special-case keydown because certain keys do not emit a keypress\n\t\t\t\t// event. Conversely avoid keydown as the canonical event since\n\t\t\t\t// there are many keydown which are explicitly not targeted for\n\t\t\t\t// typing.\n\t\t\t\tif (\n\t\t\t\t\ttype === 'keydown' &&\n\t\t\t\t\t! isKeyDownEligibleForStartTyping( event )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstartTyping();\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'keypress', startTypingInTextField );\n\t\t\tnode.addEventListener( 'keydown', startTypingInTextField );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'keypress', startTypingInTextField );\n\t\t\t\tnode.removeEventListener( 'keydown', startTypingInTextField );\n\t\t\t};\n\t\t},\n\t\t[ isTyping, startTyping, stopTyping ]\n\t);\n\n\treturn useMergeRefs( [ ref1, ref2 ] );\n}\n\nfunction ObserveTyping( { children } ) {\n\treturn <div ref={ useTypingObserver() }>{ children }</div>;\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/observe-typing/README.md\n */\nexport default ObserveTyping;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__unstableMotion as motion,\n\t__unstableAnimatePresence as AnimatePresence,\n} from '@wordpress/components';\nimport { useReducedMotion } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nexport function ZoomOutSeparator( {\n\tclientId,\n\trootClientId = '',\n\tposition = 'top',\n} ) {\n\tconst [ isDraggedOver, setIsDraggedOver ] = useState( false );\n\tconst {\n\t\tsectionRootClientId,\n\t\tsectionClientIds,\n\t\tinsertionPoint,\n\t\tblockInsertionPointVisible,\n\t\tblockInsertionPoint,\n\t\tblocksBeingDragged,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetInsertionPoint,\n\t\t\tgetBlockOrder,\n\t\t\tgetSectionRootClientId,\n\t\t\tisBlockInsertionPointVisible,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tgetDraggedBlockClientIds,\n\t\t} = unlock( select( blockEditorStore ) );\n\n\t\tconst root = getSectionRootClientId();\n\t\tconst sectionRootClientIds = getBlockOrder( root );\n\t\treturn {\n\t\t\tsectionRootClientId: root,\n\t\t\tsectionClientIds: sectionRootClientIds,\n\t\t\tinsertionPoint: getInsertionPoint(),\n\t\t\tblockInsertionPoint: getBlockInsertionPoint(),\n\t\t\tblockInsertionPointVisible: isBlockInsertionPointVisible(),\n\t\t\tblocksBeingDragged: getDraggedBlockClientIds(),\n\t\t};\n\t}, [] );\n\n\tconst isReducedMotion = useReducedMotion();\n\n\tif ( ! clientId ) {\n\t\treturn;\n\t}\n\n\tlet isVisible = false;\n\n\tconst isSectionBlock =\n\t\trootClientId === sectionRootClientId &&\n\t\tsectionClientIds &&\n\t\tsectionClientIds.includes( clientId );\n\n\tif ( ! isSectionBlock ) {\n\t\treturn null;\n\t}\n\n\tconst hasTopInsertionPoint =\n\t\tinsertionPoint?.index === 0 &&\n\t\tclientId === sectionClientIds[ insertionPoint.index ];\n\tconst hasBottomInsertionPoint =\n\t\tinsertionPoint &&\n\t\tinsertionPoint.hasOwnProperty( 'index' ) &&\n\t\tclientId === sectionClientIds[ insertionPoint.index - 1 ];\n\n\t// We want to show the zoom out separator in either of these conditions:\n\t// 1. If the inserter has an insertion index set\n\t// 2. We are dragging a pattern over an insertion point\n\tif ( position === 'top' ) {\n\t\tisVisible =\n\t\t\thasTopInsertionPoint ||\n\t\t\t( blockInsertionPointVisible &&\n\t\t\t\tblockInsertionPoint.index === 0 &&\n\t\t\t\tclientId === sectionClientIds[ blockInsertionPoint.index ] );\n\t}\n\n\tif ( position === 'bottom' ) {\n\t\tisVisible =\n\t\t\thasBottomInsertionPoint ||\n\t\t\t( blockInsertionPointVisible &&\n\t\t\t\tclientId ===\n\t\t\t\t\tsectionClientIds[ blockInsertionPoint.index - 1 ] );\n\t}\n\n\tconst blockBeingDraggedClientId = blocksBeingDragged[ 0 ];\n\n\tconst isCurrentBlockBeingDragged = blocksBeingDragged.includes( clientId );\n\n\tconst blockBeingDraggedIndex = sectionClientIds.indexOf(\n\t\tblockBeingDraggedClientId\n\t);\n\tconst blockBeingDraggedPreviousSiblingClientId =\n\t\tblockBeingDraggedIndex > 0\n\t\t\t? sectionClientIds[ blockBeingDraggedIndex - 1 ]\n\t\t\t: null;\n\n\tconst isCurrentBlockPreviousSiblingOfBlockBeingDragged =\n\t\tblockBeingDraggedPreviousSiblingClientId === clientId;\n\n\t// The separators are visually top/bottom of the block, but in actual fact\n\t// the \"top\" separator is the \"bottom\" separator of the previous block.\n\t// Therefore, this logic hides the separator if the current block is being dragged\n\t// or if the current block is the previous sibling of the block being dragged.\n\tif (\n\t\tisCurrentBlockBeingDragged ||\n\t\tisCurrentBlockPreviousSiblingOfBlockBeingDragged\n\t) {\n\t\tisVisible = false;\n\t}\n\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{ isVisible && (\n\t\t\t\t<motion.div\n\t\t\t\t\tinitial={ { height: 0 } }\n\t\t\t\t\tanimate={ {\n\t\t\t\t\t\t// Use a height equal to that of the zoom out frame size.\n\t\t\t\t\t\theight: 'calc(1 * var(--wp-block-editor-iframe-zoom-out-frame-size) / var(--wp-block-editor-iframe-zoom-out-scale)',\n\t\t\t\t\t} }\n\t\t\t\t\texit={ { height: 0 } }\n\t\t\t\t\ttransition={ {\n\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\tduration: isReducedMotion ? 0 : 0.2,\n\t\t\t\t\t\tease: [ 0.6, 0, 0.4, 1 ],\n\t\t\t\t\t} }\n\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t'block-editor-block-list__zoom-out-separator',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'is-dragged-over': isDraggedOver,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\tdata-is-insertion-point=\"true\"\n\t\t\t\t\tonDragOver={ () => setIsDraggedOver( true ) }\n\t\t\t\t\tonDragLeave={ () => setIsDraggedOver( false ) }\n\t\t\t\t>\n\t\t\t\t\t<motion.div\n\t\t\t\t\t\tinitial={ { opacity: 0 } }\n\t\t\t\t\t\tanimate={ { opacity: 1 } }\n\t\t\t\t\t\texit={ { opacity: 0, transition: { delay: -0.125 } } }\n\t\t\t\t\t\ttransition={ {\n\t\t\t\t\t\t\tease: 'linear',\n\t\t\t\t\t\t\tduration: 0.1,\n\t\t\t\t\t\t\tdelay: 0.125,\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Drop pattern.' ) }\n\t\t\t\t\t</motion.div>\n\t\t\t\t</motion.div>\n\t\t\t) }\n\t\t</AnimatePresence>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tAsyncModeProvider,\n\tuseSelect,\n\tuseDispatch,\n\tuseRegistry,\n} from '@wordpress/data';\nimport { useMergeRefs, useDebounce } from '@wordpress/compose';\nimport {\n\tcreateContext,\n\tuseMemo,\n\tuseCallback,\n\tuseEffect,\n} from '@wordpress/element';\nimport { getDefaultBlockName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport BlockListBlock from './block';\nimport BlockListAppender from '../block-list-appender';\nimport { useInBetweenInserter } from './use-in-between-inserter';\nimport { store as blockEditorStore } from '../../store';\nimport { LayoutProvider, defaultLayout } from './layout';\nimport { useBlockSelectionClearer } from '../block-selection-clearer';\nimport { useInnerBlocksProps } from '../inner-blocks';\nimport {\n\tBlockEditContextProvider,\n\tDEFAULT_BLOCK_EDIT_CONTEXT,\n} from '../block-edit/context';\nimport { useTypingObserver } from '../observe-typing';\nimport { ZoomOutSeparator } from './zoom-out-separator';\nimport { unlock } from '../../lock-unlock';\n\nexport const IntersectionObserver = createContext();\nconst pendingBlockVisibilityUpdatesPerRegistry = new WeakMap();\n\nfunction Root( { className, ...settings } ) {\n\tconst { isOutlineMode, isFocusMode, temporarilyEditingAsBlocks } =\n\t\tuseSelect( ( select ) => {\n\t\t\tconst { getSettings, getTemporarilyEditingAsBlocks, isTyping } =\n\t\t\t\tunlock( select( blockEditorStore ) );\n\t\t\tconst { outlineMode, focusMode } = getSettings();\n\t\t\treturn {\n\t\t\t\tisOutlineMode: outlineMode && ! isTyping(),\n\t\t\t\tisFocusMode: focusMode,\n\t\t\t\ttemporarilyEditingAsBlocks: getTemporarilyEditingAsBlocks(),\n\t\t\t};\n\t\t}, [] );\n\tconst registry = useRegistry();\n\tconst { setBlockVisibility } = useDispatch( blockEditorStore );\n\n\tconst delayedBlockVisibilityUpdates = useDebounce(\n\t\tuseCallback( () => {\n\t\t\tconst updates = {};\n\t\t\tpendingBlockVisibilityUpdatesPerRegistry\n\t\t\t\t.get( registry )\n\t\t\t\t.forEach( ( [ id, isIntersecting ] ) => {\n\t\t\t\t\tupdates[ id ] = isIntersecting;\n\t\t\t\t} );\n\t\t\tsetBlockVisibility( updates );\n\t\t}, [ registry ] ),\n\t\t300,\n\t\t{\n\t\t\ttrailing: true,\n\t\t}\n\t);\n\tconst intersectionObserver = useMemo( () => {\n\t\tconst { IntersectionObserver: Observer } = window;\n\n\t\tif ( ! Observer ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn new Observer( ( entries ) => {\n\t\t\tif ( ! pendingBlockVisibilityUpdatesPerRegistry.get( registry ) ) {\n\t\t\t\tpendingBlockVisibilityUpdatesPerRegistry.set( registry, [] );\n\t\t\t}\n\t\t\tfor ( const entry of entries ) {\n\t\t\t\tconst clientId = entry.target.getAttribute( 'data-block' );\n\t\t\t\tpendingBlockVisibilityUpdatesPerRegistry\n\t\t\t\t\t.get( registry )\n\t\t\t\t\t.push( [ clientId, entry.isIntersecting ] );\n\t\t\t}\n\t\t\tdelayedBlockVisibilityUpdates();\n\t\t} );\n\t}, [] );\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tref: useMergeRefs( [\n\t\t\t\tuseBlockSelectionClearer(),\n\t\t\t\tuseInBetweenInserter(),\n\t\t\t\tuseTypingObserver(),\n\t\t\t] ),\n\t\t\tclassName: clsx( 'is-root-container', className, {\n\t\t\t\t'is-outline-mode': isOutlineMode,\n\t\t\t\t'is-focus-mode': isFocusMode,\n\t\t\t} ),\n\t\t},\n\t\tsettings\n\t);\n\treturn (\n\t\t<IntersectionObserver.Provider value={ intersectionObserver }>\n\t\t\t<div { ...innerBlocksProps } />\n\t\t\t{ !! temporarilyEditingAsBlocks && (\n\t\t\t\t<StopEditingAsBlocksOnOutsideSelect\n\t\t\t\t\tclientId={ temporarilyEditingAsBlocks }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</IntersectionObserver.Provider>\n\t);\n}\n\nfunction StopEditingAsBlocksOnOutsideSelect( { clientId } ) {\n\tconst { stopEditingAsBlocks } = unlock( useDispatch( blockEditorStore ) );\n\tconst isBlockOrDescendantSelected = useSelect(\n\t\t( select ) => {\n\t\t\tconst { isBlockSelected, hasSelectedInnerBlock } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\treturn (\n\t\t\t\tisBlockSelected( clientId ) ||\n\t\t\t\thasSelectedInnerBlock( clientId, true )\n\t\t\t);\n\t\t},\n\t\t[ clientId ]\n\t);\n\tuseEffect( () => {\n\t\tif ( ! isBlockOrDescendantSelected ) {\n\t\t\tstopEditingAsBlocks( clientId );\n\t\t}\n\t}, [ isBlockOrDescendantSelected, clientId, stopEditingAsBlocks ] );\n\treturn null;\n}\n\nexport default function BlockList( settings ) {\n\treturn (\n\t\t<BlockEditContextProvider value={ DEFAULT_BLOCK_EDIT_CONTEXT }>\n\t\t\t<Root { ...settings } />\n\t\t</BlockEditContextProvider>\n\t);\n}\n\nconst EMPTY_ARRAY = [];\nconst EMPTY_SET = new Set();\n\nfunction Items( {\n\tplaceholder,\n\trootClientId,\n\trenderAppender: CustomAppender,\n\t__experimentalAppenderTagName,\n\tlayout = defaultLayout,\n} ) {\n\t// Avoid passing CustomAppender to useSelect because it could be a new\n\t// function on every render.\n\tconst hasAppender = CustomAppender !== false;\n\tconst hasCustomAppender = !! CustomAppender;\n\tconst {\n\t\torder,\n\t\tisZoomOut,\n\t\tselectedBlocks,\n\t\tvisibleBlocks,\n\t\tshouldRenderAppender,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetSettings,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\t__unstableGetVisibleBlocks,\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t\tisSectionBlock,\n\t\t\t\tisZoomOut: _isZoomOut,\n\t\t\t\tcanInsertBlockType,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\n\t\t\tconst _order = getBlockOrder( rootClientId );\n\n\t\t\tif ( getSettings().isPreviewMode ) {\n\t\t\t\treturn {\n\t\t\t\t\torder: _order,\n\t\t\t\t\tselectedBlocks: EMPTY_ARRAY,\n\t\t\t\t\tvisibleBlocks: EMPTY_SET,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst selectedBlockClientId = selectedBlockClientIds[ 0 ];\n\t\t\tconst showRootAppender =\n\t\t\t\t! rootClientId &&\n\t\t\t\t! selectedBlockClientId &&\n\t\t\t\t( ! _order.length ||\n\t\t\t\t\t! canInsertBlockType(\n\t\t\t\t\t\tgetDefaultBlockName(),\n\t\t\t\t\t\trootClientId\n\t\t\t\t\t) );\n\t\t\tconst hasSelectedRoot = !! (\n\t\t\t\trootClientId &&\n\t\t\t\tselectedBlockClientId &&\n\t\t\t\trootClientId === selectedBlockClientId\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\torder: _order,\n\t\t\t\tselectedBlocks: selectedBlockClientIds,\n\t\t\t\tvisibleBlocks: __unstableGetVisibleBlocks(),\n\t\t\t\tisZoomOut: _isZoomOut(),\n\t\t\t\tshouldRenderAppender:\n\t\t\t\t\t! isSectionBlock( rootClientId ) &&\n\t\t\t\t\tgetBlockEditingMode( rootClientId ) !== 'disabled' &&\n\t\t\t\t\t! getTemplateLock( rootClientId ) &&\n\t\t\t\t\thasAppender &&\n\t\t\t\t\t! _isZoomOut() &&\n\t\t\t\t\t( hasCustomAppender ||\n\t\t\t\t\t\thasSelectedRoot ||\n\t\t\t\t\t\tshowRootAppender ),\n\t\t\t};\n\t\t},\n\t\t[ rootClientId, hasAppender, hasCustomAppender ]\n\t);\n\n\treturn (\n\t\t<LayoutProvider value={ layout }>\n\t\t\t{ order.map( ( clientId ) => (\n\t\t\t\t<AsyncModeProvider\n\t\t\t\t\tkey={ clientId }\n\t\t\t\t\tvalue={\n\t\t\t\t\t\t// Only provide data asynchronously if the block is\n\t\t\t\t\t\t// not visible and not selected.\n\t\t\t\t\t\t! visibleBlocks.has( clientId ) &&\n\t\t\t\t\t\t! selectedBlocks.includes( clientId )\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{ isZoomOut && (\n\t\t\t\t\t\t<ZoomOutSeparator\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tposition=\"top\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<BlockListBlock\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t/>\n\t\t\t\t\t{ isZoomOut && (\n\t\t\t\t\t\t<ZoomOutSeparator\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tposition=\"bottom\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</AsyncModeProvider>\n\t\t\t) ) }\n\t\t\t{ order.length < 1 && placeholder }\n\t\t\t{ shouldRenderAppender && (\n\t\t\t\t<BlockListAppender\n\t\t\t\t\ttagName={ __experimentalAppenderTagName }\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tCustomAppender={ CustomAppender }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</LayoutProvider>\n\t);\n}\n\nexport function BlockListItems( props ) {\n\t// This component needs to always be synchronous as it's the one changing\n\t// the async mode depending on the block selection.\n\treturn (\n\t\t<AsyncModeProvider value={ false }>\n\t\t\t<Items { ...props } />\n\t\t</AsyncModeProvider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nfunction selector( select ) {\n\tconst {\n\t\tisMultiSelecting,\n\t\tgetMultiSelectedBlockClientIds,\n\t\thasMultiSelection,\n\t\tgetSelectedBlockClientId,\n\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t__unstableIsFullySelected,\n\t} = select( blockEditorStore );\n\n\treturn {\n\t\tisMultiSelecting: isMultiSelecting(),\n\t\tmultiSelectedBlockClientIds: getMultiSelectedBlockClientIds(),\n\t\thasMultiSelection: hasMultiSelection(),\n\t\tselectedBlockClientId: getSelectedBlockClientId(),\n\t\tinitialPosition: getSelectedBlocksInitialCaretPosition(),\n\t\tisFullSelection: __unstableIsFullySelected(),\n\t};\n}\n\nexport default function useMultiSelection() {\n\tconst {\n\t\tinitialPosition,\n\t\tisMultiSelecting,\n\t\tmultiSelectedBlockClientIds,\n\t\thasMultiSelection,\n\t\tselectedBlockClientId,\n\t\tisFullSelection,\n\t} = useSelect( selector, [] );\n\n\t/**\n\t * When the component updates, and there is multi selection, we need to\n\t * select the entire block contents.\n\t */\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\t// Allow initialPosition to bypass focus behavior. This is useful\n\t\t\t// for the list view or other areas where we don't want to transfer\n\t\t\t// focus to the editor canvas.\n\t\t\tif ( initialPosition === undefined || initialPosition === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! hasMultiSelection || isMultiSelecting ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { length } = multiSelectedBlockClientIds;\n\n\t\t\tif ( length < 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! isFullSelection ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Allow cross contentEditable selection by temporarily making\n\t\t\t// all content editable. We can't rely on using the store and\n\t\t\t// React because re-rending happens too slowly. We need to be\n\t\t\t// able to select across instances immediately.\n\t\t\tnode.contentEditable = true;\n\n\t\t\t// For some browsers, like Safari, it is important that focus\n\t\t\t// happens BEFORE selection removal.\n\t\t\tnode.focus();\n\n\t\t\tdefaultView.getSelection().removeAllRanges();\n\t\t},\n\t\t[\n\t\t\thasMultiSelection,\n\t\t\tisMultiSelecting,\n\t\t\tmultiSelectedBlockClientIds,\n\t\t\tselectedBlockClientId,\n\t\t\tinitialPosition,\n\t\t\tisFullSelection,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tcomputeCaretRect,\n\tfocus,\n\tisHorizontalEdge,\n\tisVerticalEdge,\n\tplaceCaretAtHorizontalEdge,\n\tplaceCaretAtVerticalEdge,\n\tisRTL,\n} from '@wordpress/dom';\nimport { UP, DOWN, LEFT, RIGHT } from '@wordpress/keycodes';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { getBlockClientId, isInSameBlock } from '../../utils/dom';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Returns true if the element should consider edge navigation upon a keyboard\n * event of the given directional key code, or false otherwise.\n *\n * @param {Element} element     HTML element to test.\n * @param {number}  keyCode     KeyboardEvent keyCode to test.\n * @param {boolean} hasModifier Whether a modifier is pressed.\n *\n * @return {boolean} Whether element should consider edge navigation.\n */\nexport function isNavigationCandidate( element, keyCode, hasModifier ) {\n\tconst isVertical = keyCode === UP || keyCode === DOWN;\n\tconst { tagName } = element;\n\tconst elementType = element.getAttribute( 'type' );\n\n\t// Native inputs should not navigate vertically, unless they are simple types that don't need up/down arrow keys.\n\tif ( isVertical && ! hasModifier ) {\n\t\tif ( tagName === 'INPUT' ) {\n\t\t\tconst verticalInputTypes = [\n\t\t\t\t'date',\n\t\t\t\t'datetime-local',\n\t\t\t\t'month',\n\t\t\t\t'number',\n\t\t\t\t'range',\n\t\t\t\t'time',\n\t\t\t\t'week',\n\t\t\t];\n\t\t\treturn ! verticalInputTypes.includes( elementType );\n\t\t}\n\t\treturn true;\n\t}\n\n\t// Native inputs should not navigate horizontally, unless they are simple types that don't need left/right arrow keys.\n\tif ( tagName === 'INPUT' ) {\n\t\tconst simpleInputTypes = [\n\t\t\t'button',\n\t\t\t'checkbox',\n\t\t\t'number',\n\t\t\t'color',\n\t\t\t'file',\n\t\t\t'image',\n\t\t\t'radio',\n\t\t\t'reset',\n\t\t\t'submit',\n\t\t];\n\t\treturn simpleInputTypes.includes( elementType );\n\t}\n\n\t// Native textareas should not navigate horizontally.\n\treturn tagName !== 'TEXTAREA';\n}\n\n/**\n * Returns the optimal tab target from the given focused element in the desired\n * direction. A preference is made toward text fields, falling back to the block\n * focus stop if no other candidates exist for the block.\n *\n * @param {Element} target           Currently focused text field.\n * @param {boolean} isReverse        True if considering as the first field.\n * @param {Element} containerElement Element containing all blocks.\n * @param {boolean} onlyVertical     Whether to only consider tabbable elements\n *                                   that are visually above or under the\n *                                   target.\n *\n * @return {?Element} Optimal tab target, if one exists.\n */\nexport function getClosestTabbable(\n\ttarget,\n\tisReverse,\n\tcontainerElement,\n\tonlyVertical\n) {\n\t// Since the current focus target is not guaranteed to be a text field, find\n\t// all focusables. Tabbability is considered later.\n\tlet focusableNodes = focus.focusable.find( containerElement );\n\n\tif ( isReverse ) {\n\t\tfocusableNodes.reverse();\n\t}\n\n\t// Consider as candidates those focusables after the current target. It's\n\t// assumed this can only be reached if the target is focusable (on its\n\t// keydown event), so no need to verify it exists in the set.\n\tfocusableNodes = focusableNodes.slice(\n\t\tfocusableNodes.indexOf( target ) + 1\n\t);\n\n\tlet targetRect;\n\n\tif ( onlyVertical ) {\n\t\ttargetRect = target.getBoundingClientRect();\n\t}\n\n\tfunction isTabCandidate( node ) {\n\t\tif ( node.closest( '[inert]' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Skip if there's only one child that is content editable (and thus a\n\t\t// better candidate).\n\t\tif (\n\t\t\tnode.children.length === 1 &&\n\t\t\tisInSameBlock( node, node.firstElementChild ) &&\n\t\t\tnode.firstElementChild.getAttribute( 'contenteditable' ) === 'true'\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Not a candidate if the node is not tabbable.\n\t\tif ( ! focus.tabbable.isTabbableIndex( node ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Skip focusable elements such as links within content editable nodes.\n\t\tif ( node.isContentEditable && node.contentEditable !== 'true' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( onlyVertical ) {\n\t\t\tconst nodeRect = node.getBoundingClientRect();\n\n\t\t\tif (\n\t\t\t\tnodeRect.left >= targetRect.right ||\n\t\t\t\tnodeRect.right <= targetRect.left\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn focusableNodes.find( isTabCandidate );\n}\n\nexport default function useArrowNav() {\n\tconst {\n\t\tgetMultiSelectedBlocksStartClientId,\n\t\tgetMultiSelectedBlocksEndClientId,\n\t\tgetSettings,\n\t\thasMultiSelection,\n\t\t__unstableIsFullySelected,\n\t} = useSelect( blockEditorStore );\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\treturn useRefEffect( ( node ) => {\n\t\t// Here a DOMRect is stored while moving the caret vertically so\n\t\t// vertical position of the start position can be restored. This is to\n\t\t// recreate browser behaviour across blocks.\n\t\tlet verticalRect;\n\n\t\tfunction onMouseDown() {\n\t\t\tverticalRect = null;\n\t\t}\n\n\t\tfunction isClosestTabbableABlock( target, isReverse ) {\n\t\t\tconst closestTabbable = getClosestTabbable(\n\t\t\t\ttarget,\n\t\t\t\tisReverse,\n\t\t\t\tnode\n\t\t\t);\n\t\t\treturn closestTabbable && getBlockClientId( closestTabbable );\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\t\t\t// Abort if navigation has already been handled (e.g. RichText\n\t\t\t// inline boundaries).\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { keyCode, target, shiftKey, ctrlKey, altKey, metaKey } =\n\t\t\t\tevent;\n\t\t\tconst isUp = keyCode === UP;\n\t\t\tconst isDown = keyCode === DOWN;\n\t\t\tconst isLeft = keyCode === LEFT;\n\t\t\tconst isRight = keyCode === RIGHT;\n\t\t\tconst isReverse = isUp || isLeft;\n\t\t\tconst isHorizontal = isLeft || isRight;\n\t\t\tconst isVertical = isUp || isDown;\n\t\t\tconst isNav = isHorizontal || isVertical;\n\t\t\tconst hasModifier = shiftKey || ctrlKey || altKey || metaKey;\n\t\t\tconst isNavEdge = isVertical ? isVerticalEdge : isHorizontalEdge;\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\tif ( ! isNav ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If there is a multi-selection, the arrow keys should collapse the\n\t\t\t// selection to the start or end of the selection.\n\t\t\tif ( hasMultiSelection() ) {\n\t\t\t\tif ( shiftKey ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Only handle if we have a full selection (not a native partial\n\t\t\t\t// selection).\n\t\t\t\tif ( ! __unstableIsFullySelected() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif ( isReverse ) {\n\t\t\t\t\tselectBlock( getMultiSelectedBlocksStartClientId() );\n\t\t\t\t} else {\n\t\t\t\t\tselectBlock( getMultiSelectedBlocksEndClientId(), -1 );\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Abort if our current target is not a candidate for navigation\n\t\t\t// (e.g. preserve native input behaviors).\n\t\t\tif ( ! isNavigationCandidate( target, keyCode, hasModifier ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// When presing any key other than up or down, the initial vertical\n\t\t\t// position must ALWAYS be reset. The vertical position is saved so\n\t\t\t// it can be restored as well as possible on sebsequent vertical\n\t\t\t// arrow key presses. It may not always be possible to restore the\n\t\t\t// exact same position (such as at an empty line), so it wouldn't be\n\t\t\t// good to compute the position right before any vertical arrow key\n\t\t\t// press.\n\t\t\tif ( ! isVertical ) {\n\t\t\t\tverticalRect = null;\n\t\t\t} else if ( ! verticalRect ) {\n\t\t\t\tverticalRect = computeCaretRect( defaultView );\n\t\t\t}\n\n\t\t\t// In the case of RTL scripts, right means previous and left means\n\t\t\t// next, which is the exact reverse of LTR.\n\t\t\tconst isReverseDir = isRTL( target ) ? ! isReverse : isReverse;\n\t\t\tconst { keepCaretInsideBlock } = getSettings();\n\n\t\t\tif ( shiftKey ) {\n\t\t\t\tif (\n\t\t\t\t\tisClosestTabbableABlock( target, isReverse ) &&\n\t\t\t\t\tisNavEdge( target, isReverse )\n\t\t\t\t) {\n\t\t\t\t\tnode.contentEditable = true;\n\t\t\t\t\t// Firefox doesn't automatically move focus.\n\t\t\t\t\tnode.focus();\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tisVertical &&\n\t\t\t\tisVerticalEdge( target, isReverse ) &&\n\t\t\t\t// When Alt is pressed, only intercept if the caret is also at\n\t\t\t\t// the horizontal edge.\n\t\t\t\t( altKey ? isHorizontalEdge( target, isReverseDir ) : true ) &&\n\t\t\t\t! keepCaretInsideBlock\n\t\t\t) {\n\t\t\t\tconst closestTabbable = getClosestTabbable(\n\t\t\t\t\ttarget,\n\t\t\t\t\tisReverse,\n\t\t\t\t\tnode,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\n\t\t\t\tif ( closestTabbable ) {\n\t\t\t\t\tplaceCaretAtVerticalEdge(\n\t\t\t\t\t\tclosestTabbable,\n\t\t\t\t\t\t// When Alt is pressed, place the caret at the furthest\n\t\t\t\t\t\t// horizontal edge and the furthest vertical edge.\n\t\t\t\t\t\taltKey ? ! isReverse : isReverse,\n\t\t\t\t\t\taltKey ? undefined : verticalRect\n\t\t\t\t\t);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tisHorizontal &&\n\t\t\t\tdefaultView.getSelection().isCollapsed &&\n\t\t\t\tisHorizontalEdge( target, isReverseDir ) &&\n\t\t\t\t! keepCaretInsideBlock\n\t\t\t) {\n\t\t\t\tconst closestTabbable = getClosestTabbable(\n\t\t\t\t\ttarget,\n\t\t\t\t\tisReverseDir,\n\t\t\t\t\tnode\n\t\t\t\t);\n\t\t\t\tplaceCaretAtHorizontalEdge( closestTabbable, isReverse );\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\treturn () => {\n\t\t\tnode.removeEventListener( 'mousedown', onMouseDown );\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { isEntirelySelected } from '@wordpress/dom';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __unstableUseShortcutEventMatch as useShortcutEventMatch } from '@wordpress/keyboard-shortcuts';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function useSelectAll() {\n\tconst { getBlockOrder, getSelectedBlockClientIds, getBlockRootClientId } =\n\t\tuseSelect( blockEditorStore );\n\tconst { multiSelect, selectBlock } = useDispatch( blockEditorStore );\n\tconst isMatch = useShortcutEventMatch();\n\n\treturn useRefEffect( ( node ) => {\n\t\tfunction onKeyDown( event ) {\n\t\t\tif ( ! isMatch( 'core/block-editor/select-all', event ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selectedClientIds = getSelectedBlockClientIds();\n\n\t\t\tif (\n\t\t\t\tselectedClientIds.length < 2 &&\n\t\t\t\t! isEntirelySelected( event.target )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tconst [ firstSelectedClientId ] = selectedClientIds;\n\t\t\tconst rootClientId = getBlockRootClientId( firstSelectedClientId );\n\t\t\tconst blockClientIds = getBlockOrder( rootClientId );\n\n\t\t\t// If we have selected all sibling nested blocks, try selecting up a\n\t\t\t// level. See: https://github.com/WordPress/gutenberg/pull/31859/\n\t\t\tif ( selectedClientIds.length === blockClientIds.length ) {\n\t\t\t\tif ( rootClientId ) {\n\t\t\t\t\tnode.ownerDocument.defaultView\n\t\t\t\t\t\t.getSelection()\n\t\t\t\t\t\t.removeAllRanges();\n\t\t\t\t\tselectBlock( rootClientId );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmultiSelect(\n\t\t\t\tblockClientIds[ 0 ],\n\t\t\t\tblockClientIds[ blockClientIds.length - 1 ]\n\t\t\t);\n\t\t}\n\n\t\tnode.addEventListener( 'keydown', onKeyDown );\n\n\t\treturn () => {\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Sets the `contenteditable` wrapper element to `value`.\n *\n * @param {HTMLElement} node  Block element.\n * @param {boolean}     value `contentEditable` value (true or false)\n */\nfunction setContentEditableWrapper( node, value ) {\n\tnode.contentEditable = value;\n\t// Firefox doesn't automatically move focus.\n\tif ( value ) {\n\t\tnode.focus();\n\t}\n}\n\n/**\n * Sets a multi-selection based on the native selection across blocks.\n */\nexport default function useDragSelection() {\n\tconst { startMultiSelect, stopMultiSelect } =\n\t\tuseDispatch( blockEditorStore );\n\tconst {\n\t\tisSelectionEnabled,\n\t\thasSelectedBlock,\n\t\tisDraggingBlocks,\n\t\tisMultiSelecting,\n\t} = useSelect( blockEditorStore );\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\tlet anchorElement;\n\t\t\tlet rafId;\n\n\t\t\tfunction onMouseUp() {\n\t\t\t\tstopMultiSelect();\n\t\t\t\t// Equivalent to attaching the listener once.\n\t\t\t\tdefaultView.removeEventListener( 'mouseup', onMouseUp );\n\t\t\t\t// The browser selection won't have updated yet at this point,\n\t\t\t\t// so wait until the next animation frame to get the browser\n\t\t\t\t// selection.\n\t\t\t\trafId = defaultView.requestAnimationFrame( () => {\n\t\t\t\t\tif ( ! hasSelectedBlock() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If the selection is complete (on mouse up), and no\n\t\t\t\t\t// multiple blocks have been selected, set focus back to the\n\t\t\t\t\t// anchor element. if the anchor element contains the\n\t\t\t\t\t// selection. Additionally, the contentEditable wrapper can\n\t\t\t\t\t// now be disabled again.\n\t\t\t\t\tsetContentEditableWrapper( node, false );\n\n\t\t\t\t\tconst selection = defaultView.getSelection();\n\n\t\t\t\t\tif ( selection.rangeCount ) {\n\t\t\t\t\t\tconst range = selection.getRangeAt( 0 );\n\t\t\t\t\t\tconst { commonAncestorContainer } = range;\n\t\t\t\t\t\tconst clonedRange = range.cloneRange();\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tanchorElement.contains( commonAncestorContainer )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tanchorElement.focus();\n\t\t\t\t\t\t\tselection.removeAllRanges();\n\t\t\t\t\t\t\tselection.addRange( clonedRange );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tlet lastMouseDownTarget;\n\n\t\t\tfunction onMouseDown( { target } ) {\n\t\t\t\tlastMouseDownTarget = target;\n\t\t\t}\n\n\t\t\tfunction onMouseLeave( { buttons, target, relatedTarget } ) {\n\t\t\t\tif ( ! target.contains( lastMouseDownTarget ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// If we're moving into a child element, ignore. We're tracking\n\t\t\t\t// the mouse leaving the element to a parent, no a child.\n\t\t\t\tif ( target.contains( relatedTarget ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Avoid triggering a multi-selection if the user is already\n\t\t\t\t// dragging blocks.\n\t\t\t\tif ( isDraggingBlocks() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// The primary button must be pressed to initiate selection.\n\t\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\n\t\t\t\tif ( buttons !== 1 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Abort if we are already multi-selecting.\n\t\t\t\tif ( isMultiSelecting() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Abort if selection is leaving writing flow.\n\t\t\t\tif ( node === target ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Check the attribute, not the contentEditable attribute. All\n\t\t\t\t// child elements of the content editable wrapper are editable\n\t\t\t\t// and return true for this property. We only want to start\n\t\t\t\t// multi selecting when the mouse leaves the wrapper.\n\t\t\t\tif ( target.getAttribute( 'contenteditable' ) !== 'true' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( ! isSelectionEnabled() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Do not rely on the active element because it may change after\n\t\t\t\t// the mouse leaves for the first time. See\n\t\t\t\t// https://github.com/WordPress/gutenberg/issues/48747.\n\t\t\t\tanchorElement = target;\n\n\t\t\t\tstartMultiSelect();\n\n\t\t\t\t// `onSelectionStart` is called after `mousedown` and\n\t\t\t\t// `mouseleave` (from a block). The selection ends when\n\t\t\t\t// `mouseup` happens anywhere in the window.\n\t\t\t\tdefaultView.addEventListener( 'mouseup', onMouseUp );\n\n\t\t\t\t// Allow cross contentEditable selection by temporarily making\n\t\t\t\t// all content editable. We can't rely on using the store and\n\t\t\t\t// React because re-rending happens too slowly. We need to be\n\t\t\t\t// able to select across instances immediately.\n\t\t\t\tsetContentEditableWrapper( node, true );\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mouseout', onMouseLeave );\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'mouseout', onMouseLeave );\n\t\t\t\tdefaultView.removeEventListener( 'mouseup', onMouseUp );\n\t\t\t\tdefaultView.cancelAnimationFrame( rafId );\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tstartMultiSelect,\n\t\t\tstopMultiSelect,\n\t\t\tisSelectionEnabled,\n\t\t\thasSelectedBlock,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\nimport { create } from '@wordpress/rich-text';\nimport { isSelectionForward } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { getBlockClientId } from '../../utils/dom';\n\n/**\n * Extract the selection start node from the selection. When the anchor node is\n * not a text node, the selection offset is the index of a child node.\n *\n * @param {Selection} selection The selection.\n *\n * @return {Element} The selection start node.\n */\nfunction extractSelectionStartNode( selection ) {\n\tconst { anchorNode, anchorOffset } = selection;\n\n\tif ( anchorNode.nodeType === anchorNode.TEXT_NODE ) {\n\t\treturn anchorNode;\n\t}\n\n\tif ( anchorOffset === 0 ) {\n\t\treturn anchorNode;\n\t}\n\n\treturn anchorNode.childNodes[ anchorOffset - 1 ];\n}\n\n/**\n * Extract the selection end node from the selection. When the focus node is not\n * a text node, the selection offset is the index of a child node. The selection\n * reaches up to but excluding that child node.\n *\n * @param {Selection} selection The selection.\n *\n * @return {Element} The selection start node.\n */\nfunction extractSelectionEndNode( selection ) {\n\tconst { focusNode, focusOffset } = selection;\n\n\tif ( focusNode.nodeType === focusNode.TEXT_NODE ) {\n\t\treturn focusNode;\n\t}\n\n\tif ( focusOffset === focusNode.childNodes.length ) {\n\t\treturn focusNode;\n\t}\n\n\t// When the selection is forward (the selection ends with the focus node),\n\t// the selection may extend into the next element with an offset of 0. This\n\t// may trigger multi selection even though the selection does not visually\n\t// end in the next block.\n\tif ( focusOffset === 0 && isSelectionForward( selection ) ) {\n\t\treturn focusNode.previousSibling ?? focusNode.parentElement;\n\t}\n\n\treturn focusNode.childNodes[ focusOffset ];\n}\n\nfunction findDepth( a, b ) {\n\tlet depth = 0;\n\n\twhile ( a[ depth ] === b[ depth ] ) {\n\t\tdepth++;\n\t}\n\n\treturn depth;\n}\n\n/**\n * Sets the `contenteditable` wrapper element to `value`.\n *\n * @param {HTMLElement} node  Block element.\n * @param {boolean}     value `contentEditable` value (true or false)\n */\nfunction setContentEditableWrapper( node, value ) {\n\t// Since we are calling this on every selection change, check if the value\n\t// needs to be updated first because it trigger the browser to recalculate\n\t// style.\n\tif ( node.contentEditable !== String( value ) ) {\n\t\tnode.contentEditable = value;\n\n\t\t// Firefox doesn't automatically move focus.\n\t\tif ( value ) {\n\t\t\tnode.focus();\n\t\t}\n\t}\n}\n\nfunction getRichTextElement( node ) {\n\tconst element =\n\t\tnode.nodeType === node.ELEMENT_NODE ? node : node.parentElement;\n\treturn element?.closest( '[data-wp-block-attribute-key]' );\n}\n\n/**\n * Sets a multi-selection based on the native selection across blocks.\n */\nexport default function useSelectionObserver() {\n\tconst { multiSelect, selectBlock, selectionChange } =\n\t\tuseDispatch( blockEditorStore );\n\tconst { getBlockParents, getBlockSelectionStart, isMultiSelecting } =\n\t\tuseSelect( blockEditorStore );\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\tfunction onSelectionChange( event ) {\n\t\t\t\tconst selection = defaultView.getSelection();\n\n\t\t\t\tif ( ! selection.rangeCount ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst startNode = extractSelectionStartNode( selection );\n\t\t\t\tconst endNode = extractSelectionEndNode( selection );\n\n\t\t\t\tif (\n\t\t\t\t\t! node.contains( startNode ) ||\n\t\t\t\t\t! node.contains( endNode )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// If selection is collapsed and we haven't used `shift+click`,\n\t\t\t\t// end multi selection and disable the contentEditable wrapper.\n\t\t\t\t// We have to check about `shift+click` case because elements\n\t\t\t\t// that don't support text selection might be involved, and we might\n\t\t\t\t// update the clientIds to multi-select blocks.\n\t\t\t\t// For now we check if the event is a `mouse` event.\n\t\t\t\tconst isClickShift = event.shiftKey && event.type === 'mouseup';\n\t\t\t\tif ( selection.isCollapsed && ! isClickShift ) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tnode.contentEditable === 'true' &&\n\t\t\t\t\t\t! isMultiSelecting()\n\t\t\t\t\t) {\n\t\t\t\t\t\tsetContentEditableWrapper( node, false );\n\t\t\t\t\t\tlet element =\n\t\t\t\t\t\t\tstartNode.nodeType === startNode.ELEMENT_NODE\n\t\t\t\t\t\t\t\t? startNode\n\t\t\t\t\t\t\t\t: startNode.parentElement;\n\t\t\t\t\t\telement = element?.closest( '[contenteditable]' );\n\t\t\t\t\t\telement?.focus();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet startClientId = getBlockClientId( startNode );\n\t\t\t\tlet endClientId = getBlockClientId( endNode );\n\n\t\t\t\t// If the selection has changed and we had pressed `shift+click`,\n\t\t\t\t// we need to check if in an element that doesn't support\n\t\t\t\t// text selection has been clicked.\n\t\t\t\tif ( isClickShift ) {\n\t\t\t\t\tconst selectedClientId = getBlockSelectionStart();\n\t\t\t\t\tconst clickedClientId = getBlockClientId( event.target );\n\t\t\t\t\t// `endClientId` is not defined if we end the selection by clicking a non-selectable block.\n\t\t\t\t\t// We need to check if there was already a selection with a non-selectable focusNode.\n\t\t\t\t\tconst focusNodeIsNonSelectable =\n\t\t\t\t\t\tclickedClientId !== endClientId;\n\t\t\t\t\tif (\n\t\t\t\t\t\t( startClientId === endClientId &&\n\t\t\t\t\t\t\tselection.isCollapsed ) ||\n\t\t\t\t\t\t! endClientId ||\n\t\t\t\t\t\tfocusNodeIsNonSelectable\n\t\t\t\t\t) {\n\t\t\t\t\t\tendClientId = clickedClientId;\n\t\t\t\t\t}\n\t\t\t\t\t// Handle the case when we have a non-selectable block\n\t\t\t\t\t// selected and click another one.\n\t\t\t\t\tif ( startClientId !== selectedClientId ) {\n\t\t\t\t\t\tstartClientId = selectedClientId;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If the selection did not involve a block, return.\n\t\t\t\tif (\n\t\t\t\t\tstartClientId === undefined &&\n\t\t\t\t\tendClientId === undefined\n\t\t\t\t) {\n\t\t\t\t\tsetContentEditableWrapper( node, false );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst isSingularSelection = startClientId === endClientId;\n\t\t\t\tif ( isSingularSelection ) {\n\t\t\t\t\tif ( ! isMultiSelecting() ) {\n\t\t\t\t\t\tselectBlock( startClientId );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmultiSelect( startClientId, startClientId );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst startPath = [\n\t\t\t\t\t\t...getBlockParents( startClientId ),\n\t\t\t\t\t\tstartClientId,\n\t\t\t\t\t];\n\t\t\t\t\tconst endPath = [\n\t\t\t\t\t\t...getBlockParents( endClientId ),\n\t\t\t\t\t\tendClientId,\n\t\t\t\t\t];\n\t\t\t\t\tconst depth = findDepth( startPath, endPath );\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tstartPath[ depth ] !== startClientId ||\n\t\t\t\t\t\tendPath[ depth ] !== endClientId\n\t\t\t\t\t) {\n\t\t\t\t\t\tmultiSelect( startPath[ depth ], endPath[ depth ] );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst richTextElementStart =\n\t\t\t\t\t\tgetRichTextElement( startNode );\n\t\t\t\t\tconst richTextElementEnd = getRichTextElement( endNode );\n\n\t\t\t\t\tif ( richTextElementStart && richTextElementEnd ) {\n\t\t\t\t\t\tconst range = selection.getRangeAt( 0 );\n\t\t\t\t\t\tconst richTextDataStart = create( {\n\t\t\t\t\t\t\telement: richTextElementStart,\n\t\t\t\t\t\t\trange,\n\t\t\t\t\t\t\t__unstableIsEditableTree: true,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tconst richTextDataEnd = create( {\n\t\t\t\t\t\t\telement: richTextElementEnd,\n\t\t\t\t\t\t\trange,\n\t\t\t\t\t\t\t__unstableIsEditableTree: true,\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconst startOffset =\n\t\t\t\t\t\t\trichTextDataStart.start ?? richTextDataStart.end;\n\t\t\t\t\t\tconst endOffset =\n\t\t\t\t\t\t\trichTextDataEnd.start ?? richTextDataEnd.end;\n\t\t\t\t\t\tselectionChange( {\n\t\t\t\t\t\t\tstart: {\n\t\t\t\t\t\t\t\tclientId: startClientId,\n\t\t\t\t\t\t\t\tattributeKey:\n\t\t\t\t\t\t\t\t\trichTextElementStart.dataset\n\t\t\t\t\t\t\t\t\t\t.wpBlockAttributeKey,\n\t\t\t\t\t\t\t\toffset: startOffset,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tend: {\n\t\t\t\t\t\t\t\tclientId: endClientId,\n\t\t\t\t\t\t\t\tattributeKey:\n\t\t\t\t\t\t\t\t\trichTextElementEnd.dataset\n\t\t\t\t\t\t\t\t\t\t.wpBlockAttributeKey,\n\t\t\t\t\t\t\t\toffset: endOffset,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmultiSelect( startClientId, endClientId );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\townerDocument.addEventListener(\n\t\t\t\t'selectionchange',\n\t\t\t\tonSelectionChange\n\t\t\t);\n\t\t\tdefaultView.addEventListener( 'mouseup', onSelectionChange );\n\t\t\treturn () => {\n\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t'selectionchange',\n\t\t\t\t\tonSelectionChange\n\t\t\t\t);\n\t\t\t\tdefaultView.removeEventListener( 'mouseup', onSelectionChange );\n\t\t\t};\n\t\t},\n\t\t[ multiSelect, selectBlock, selectionChange, getBlockParents ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { getBlockClientId } from '../../utils/dom';\n\nexport default function useClickSelection() {\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\tconst { isSelectionEnabled, getBlockSelectionStart, hasMultiSelection } =\n\t\tuseSelect( blockEditorStore );\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tfunction onMouseDown( event ) {\n\t\t\t\t// The main button.\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n\t\t\t\tif ( ! isSelectionEnabled() || event.button !== 0 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst startClientId = getBlockSelectionStart();\n\t\t\t\tconst clickedClientId = getBlockClientId( event.target );\n\n\t\t\t\tif ( event.shiftKey ) {\n\t\t\t\t\t// When selecting a single block in a document by holding the shift key,\n\t\t\t\t\t// don't mark this action as multiselection.\n\t\t\t\t\tif ( startClientId && startClientId !== clickedClientId ) {\n\t\t\t\t\t\tnode.contentEditable = true;\n\t\t\t\t\t\t// Firefox doesn't automatically move focus.\n\t\t\t\t\t\tnode.focus();\n\t\t\t\t\t}\n\t\t\t\t} else if ( hasMultiSelection() ) {\n\t\t\t\t\t// Allow user to escape out of a multi-selection to a\n\t\t\t\t\t// singular selection of a block via click. This is handled\n\t\t\t\t\t// here since focus handling excludes blocks when there is\n\t\t\t\t\t// multiselection, as focus can be incurred by starting a\n\t\t\t\t\t// multiselection (focus moved to first block's multi-\n\t\t\t\t\t// controls).\n\t\t\t\t\tselectBlock( clickedClientId );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'mousedown', onMouseDown );\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tselectBlock,\n\t\t\tisSelectionEnabled,\n\t\t\tgetBlockSelectionStart,\n\t\t\thasMultiSelection,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\nimport { ENTER, BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport {\n\tcreateBlock,\n\tgetDefaultBlockName,\n\thasBlockSupport,\n\tgetBlockTransforms,\n\tfindTransform,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Handles input for selections across blocks.\n */\nexport default function useInput() {\n\tconst {\n\t\t__unstableIsFullySelected,\n\t\tgetSelectedBlockClientIds,\n\t\tgetSelectedBlockClientId,\n\t\t__unstableIsSelectionMergeable,\n\t\thasMultiSelection,\n\t\tgetBlockName,\n\t\tcanInsertBlockType,\n\t\tgetBlockRootClientId,\n\t\tgetSelectionStart,\n\t\tgetSelectionEnd,\n\t\tgetBlockAttributes,\n\t} = useSelect( blockEditorStore );\n\tconst {\n\t\treplaceBlocks,\n\t\t__unstableSplitSelection,\n\t\tremoveBlocks,\n\t\t__unstableDeleteSelection,\n\t\t__unstableExpandSelection,\n\t\t__unstableMarkAutomaticChange,\n\t} = useDispatch( blockEditorStore );\n\n\treturn useRefEffect( ( node ) => {\n\t\tfunction onBeforeInput( event ) {\n\t\t\t// If writing flow is editable, NEVER allow the browser to alter the\n\t\t\t// DOM. This will cause React errors (and the DOM should only be\n\t\t\t// altered in a controlled fashion).\n\t\t\tif ( node.contentEditable === 'true' ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! hasMultiSelection() ) {\n\t\t\t\tif ( event.keyCode === ENTER ) {\n\t\t\t\t\tif ( event.shiftKey || __unstableIsFullySelected() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst clientId = getSelectedBlockClientId();\n\t\t\t\t\tconst blockName = getBlockName( clientId );\n\t\t\t\t\tconst selectionStart = getSelectionStart();\n\t\t\t\t\tconst selectionEnd = getSelectionEnd();\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tselectionStart.attributeKey ===\n\t\t\t\t\t\tselectionEnd.attributeKey\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst selectedAttributeValue =\n\t\t\t\t\t\t\tgetBlockAttributes( clientId )[\n\t\t\t\t\t\t\t\tselectionStart.attributeKey\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\tconst transforms = getBlockTransforms( 'from' ).filter(\n\t\t\t\t\t\t\t( { type } ) => type === 'enter'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst transformation = findTransform(\n\t\t\t\t\t\t\ttransforms,\n\t\t\t\t\t\t\t( item ) => {\n\t\t\t\t\t\t\t\treturn item.regExp.test(\n\t\t\t\t\t\t\t\t\tselectedAttributeValue\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif ( transformation ) {\n\t\t\t\t\t\t\treplaceBlocks(\n\t\t\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t\t\ttransformation.transform( {\n\t\t\t\t\t\t\t\t\tcontent: selectedAttributeValue,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t__unstableMarkAutomaticChange();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t! hasBlockSupport( blockName, 'splitting', false ) &&\n\t\t\t\t\t\t! event.__deprecatedOnSplit\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ensure template is not locked.\n\t\t\t\t\tif (\n\t\t\t\t\t\tcanInsertBlockType(\n\t\t\t\t\t\t\tblockName,\n\t\t\t\t\t\t\tgetBlockRootClientId( clientId )\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\t__unstableSplitSelection();\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( event.keyCode === ENTER ) {\n\t\t\t\tnode.contentEditable = false;\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( __unstableIsFullySelected() ) {\n\t\t\t\t\treplaceBlocks(\n\t\t\t\t\t\tgetSelectedBlockClientIds(),\n\t\t\t\t\t\tcreateBlock( getDefaultBlockName() )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t__unstableSplitSelection();\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tevent.keyCode === BACKSPACE ||\n\t\t\t\tevent.keyCode === DELETE\n\t\t\t) {\n\t\t\t\tnode.contentEditable = false;\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( __unstableIsFullySelected() ) {\n\t\t\t\t\tremoveBlocks( getSelectedBlockClientIds() );\n\t\t\t\t} else if ( __unstableIsSelectionMergeable() ) {\n\t\t\t\t\t__unstableDeleteSelection( event.keyCode === DELETE );\n\t\t\t\t} else {\n\t\t\t\t\t__unstableExpandSelection();\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\t// If key.length is longer than 1, it's a control key that doesn't\n\t\t\t\t// input anything.\n\t\t\t\tevent.key.length === 1 &&\n\t\t\t\t! ( event.metaKey || event.ctrlKey )\n\t\t\t) {\n\t\t\t\tnode.contentEditable = false;\n\t\t\t\tif ( __unstableIsSelectionMergeable() ) {\n\t\t\t\t\t__unstableDeleteSelection( event.keyCode === DELETE );\n\t\t\t\t} else {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// Safari does not stop default behaviour with either\n\t\t\t\t\t// event.preventDefault() or node.contentEditable = false, so\n\t\t\t\t\t// remove the selection to stop browser manipulation.\n\t\t\t\t\tnode.ownerDocument.defaultView\n\t\t\t\t\t\t.getSelection()\n\t\t\t\t\t\t.removeAllRanges();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction onCompositionStart( event ) {\n\t\t\tif ( ! hasMultiSelection() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnode.contentEditable = false;\n\n\t\t\tif ( __unstableIsSelectionMergeable() ) {\n\t\t\t\t__unstableDeleteSelection();\n\t\t\t} else {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t// Safari does not stop default behaviour with either\n\t\t\t\t// event.preventDefault() or node.contentEditable = false, so\n\t\t\t\t// remove the selection to stop browser manipulation.\n\t\t\t\tnode.ownerDocument.defaultView.getSelection().removeAllRanges();\n\t\t\t}\n\t\t}\n\n\t\tnode.addEventListener( 'beforeinput', onBeforeInput );\n\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\tnode.addEventListener( 'compositionstart', onCompositionStart );\n\t\treturn () => {\n\t\t\tnode.removeEventListener( 'beforeinput', onBeforeInput );\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t\tnode.removeEventListener( 'compositionstart', onCompositionStart );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\n\nexport function useNotifyCopy() {\n\tconst { getBlockName } = useSelect( blockEditorStore );\n\tconst { getBlockType } = useSelect( blocksStore );\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\n\n\treturn useCallback(\n\t\t( eventType, selectedBlockClientIds ) => {\n\t\t\tlet notice = '';\n\n\t\t\tif ( eventType === 'copyStyles' ) {\n\t\t\t\tnotice = __( 'Styles copied to clipboard.' );\n\t\t\t} else if ( selectedBlockClientIds.length === 1 ) {\n\t\t\t\tconst clientId = selectedBlockClientIds[ 0 ];\n\t\t\t\tconst title = getBlockType( getBlockName( clientId ) )?.title;\n\n\t\t\t\tif ( eventType === 'copy' ) {\n\t\t\t\t\tnotice = sprintf(\n\t\t\t\t\t\t// Translators: %s: Name of the block being copied, e.g. \"Paragraph\".\n\t\t\t\t\t\t__( 'Copied \"%s\" to clipboard.' ),\n\t\t\t\t\t\ttitle\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tnotice = sprintf(\n\t\t\t\t\t\t// Translators: %s: Name of the block being cut, e.g. \"Paragraph\".\n\t\t\t\t\t\t__( 'Moved \"%s\" to clipboard.' ),\n\t\t\t\t\t\ttitle\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if ( eventType === 'copy' ) {\n\t\t\t\tnotice = sprintf(\n\t\t\t\t\t// Translators: %d: Number of blocks being copied.\n\t\t\t\t\t_n(\n\t\t\t\t\t\t'Copied %d block to clipboard.',\n\t\t\t\t\t\t'Copied %d blocks to clipboard.',\n\t\t\t\t\t\tselectedBlockClientIds.length\n\t\t\t\t\t),\n\t\t\t\t\tselectedBlockClientIds.length\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tnotice = sprintf(\n\t\t\t\t\t// Translators: %d: Number of blocks being moved.\n\t\t\t\t\t_n(\n\t\t\t\t\t\t'Moved %d block to clipboard.',\n\t\t\t\t\t\t'Moved %d blocks to clipboard.',\n\t\t\t\t\t\tselectedBlockClientIds.length\n\t\t\t\t\t),\n\t\t\t\t\tselectedBlockClientIds.length\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tcreateSuccessNotice( notice, {\n\t\t\t\ttype: 'snackbar',\n\t\t\t} );\n\t\t},\n\t\t[ createSuccessNotice, getBlockName, getBlockType ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { getFilesFromDataTransfer } from '@wordpress/dom';\n\n/**\n * Normalizes a given string of HTML to remove the Windows-specific \"Fragment\"\n * comments and any preceding and trailing content.\n *\n * @param {string} html the html to be normalized\n * @return {string} the normalized html\n */\nfunction removeWindowsFragments( html ) {\n\tconst startStr = '<!--StartFragment-->';\n\tconst startIdx = html.indexOf( startStr );\n\tif ( startIdx > -1 ) {\n\t\thtml = html.substring( startIdx + startStr.length );\n\t} else {\n\t\t// No point looking for EndFragment\n\t\treturn html;\n\t}\n\n\tconst endStr = '<!--EndFragment-->';\n\tconst endIdx = html.indexOf( endStr );\n\tif ( endIdx > -1 ) {\n\t\thtml = html.substring( 0, endIdx );\n\t}\n\n\treturn html;\n}\n\n/**\n * Removes the charset meta tag inserted by Chromium.\n * See:\n * - https://github.com/WordPress/gutenberg/issues/33585\n * - https://bugs.chromium.org/p/chromium/issues/detail?id=1264616#c4\n *\n * @param {string} html the html to be stripped of the meta tag.\n * @return {string} the cleaned html\n */\nfunction removeCharsetMetaTag( html ) {\n\tconst metaTag = `<meta charset='utf-8'>`;\n\n\tif ( html.startsWith( metaTag ) ) {\n\t\treturn html.slice( metaTag.length );\n\t}\n\n\treturn html;\n}\n\nexport function getPasteEventData( { clipboardData } ) {\n\tlet plainText = '';\n\tlet html = '';\n\n\ttry {\n\t\tplainText = clipboardData.getData( 'text/plain' );\n\t\thtml = clipboardData.getData( 'text/html' );\n\t} catch ( error ) {\n\t\t// Some browsers like UC Browser paste plain text by default and\n\t\t// don't support clipboardData at all, so allow default\n\t\t// behaviour.\n\t\treturn;\n\t}\n\n\t// Remove Windows-specific metadata appended within copied HTML text.\n\thtml = removeWindowsFragments( html );\n\n\t// Strip meta tag.\n\thtml = removeCharsetMetaTag( html );\n\n\tconst files = getFilesFromDataTransfer( clipboardData );\n\n\tif ( files.length && ! shouldDismissPastedFiles( files, html ) ) {\n\t\treturn { files };\n\t}\n\n\treturn { html, plainText, files: [] };\n}\n\n/**\n * Given a collection of DataTransfer files and HTML and plain text strings,\n * determine whether the files are to be dismissed in favor of the HTML.\n *\n * Certain office-type programs, like Microsoft Word or Apple Numbers,\n * will, upon copy, generate a screenshot of the content being copied and\n * attach it to the clipboard alongside the actual rich text that the user\n * sought to copy. In those cases, we should let Gutenberg handle the rich text\n * content and not the screenshot, since this allows Gutenberg to insert\n * meaningful blocks, like paragraphs, lists or even tables.\n *\n * @param {File[]} files File objects obtained from a paste event\n * @param {string} html  HTML content obtained from a paste event\n * @return {boolean}     True if the files should be dismissed\n */\nexport function shouldDismissPastedFiles( files, html /*, plainText */ ) {\n\t// The question is only relevant when there is actual HTML content and when\n\t// there is exactly one image file.\n\tif (\n\t\thtml &&\n\t\tfiles?.length === 1 &&\n\t\tfiles[ 0 ].type.indexOf( 'image/' ) === 0\n\t) {\n\t\t// A single <img> tag found in the HTML source suggests that the\n\t\t// content being pasted revolves around an image. Sometimes there are\n\t\t// other elements found, like <figure>, but we assume that the user's\n\t\t// intention is to paste the actual image file.\n\t\tconst IMAGE_TAG = /<\\s*img\\b/gi;\n\t\tif ( html.match( IMAGE_TAG )?.length !== 1 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Even when there is exactly one <img> tag in the HTML payload, we\n\t\t// choose to weed out local images, i.e. those whose source starts with\n\t\t// \"file://\". These payloads occur in specific configurations, such as\n\t\t// when copying an entire document from Microsoft Word, that contains\n\t\t// text and exactly one image, and pasting that content using Google\n\t\t// Chrome.\n\t\tconst IMG_WITH_LOCAL_SRC = /<\\s*img\\b[^>]*\\bsrc=\"file:\\/\\//i;\n\t\tif ( html.match( IMG_WITH_LOCAL_SRC ) ) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n","/**\n * WordPress dependencies\n */\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\nimport {\n\tserialize,\n\tcreateBlock,\n\tpasteHandler,\n\tfindTransform,\n\tgetBlockTransforms,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { getPasteEventData } from '../../utils/pasting';\nimport { store as blockEditorStore } from '../../store';\n\nexport const requiresWrapperOnCopy = Symbol( 'requiresWrapperOnCopy' );\n\n/**\n * Sets the clipboard data for the provided blocks, with both HTML and plain\n * text representations.\n *\n * @param {ClipboardEvent} event    Clipboard event.\n * @param {WPBlock[]}      blocks   Blocks to set as clipboard data.\n * @param {Object}         registry The registry to select from.\n */\nexport function setClipboardBlocks( event, blocks, registry ) {\n\tlet _blocks = blocks;\n\n\tconst [ firstBlock ] = blocks;\n\n\tif ( firstBlock ) {\n\t\tconst firstBlockType = registry\n\t\t\t.select( blocksStore )\n\t\t\t.getBlockType( firstBlock.name );\n\n\t\tif ( firstBlockType[ requiresWrapperOnCopy ] ) {\n\t\t\tconst { getBlockRootClientId, getBlockName, getBlockAttributes } =\n\t\t\t\tregistry.select( blockEditorStore );\n\t\t\tconst wrapperBlockClientId = getBlockRootClientId(\n\t\t\t\tfirstBlock.clientId\n\t\t\t);\n\t\t\tconst wrapperBlockName = getBlockName( wrapperBlockClientId );\n\n\t\t\tif ( wrapperBlockName ) {\n\t\t\t\t_blocks = createBlock(\n\t\t\t\t\twrapperBlockName,\n\t\t\t\t\tgetBlockAttributes( wrapperBlockClientId ),\n\t\t\t\t\t_blocks\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tconst serialized = serialize( _blocks );\n\n\tevent.clipboardData.setData( 'text/plain', toPlainText( serialized ) );\n\tevent.clipboardData.setData( 'text/html', serialized );\n}\n\n/**\n * Returns the blocks to be pasted from the clipboard event.\n *\n * @param {ClipboardEvent} event                    The clipboard event.\n * @param {boolean}        canUserUseUnfilteredHTML Whether the user can or can't post unfiltered HTML.\n * @return {Array|string} A list of blocks or a string, depending on `handlerMode`.\n */\nexport function getPasteBlocks( event, canUserUseUnfilteredHTML ) {\n\tconst { plainText, html, files } = getPasteEventData( event );\n\tlet blocks = [];\n\n\tif ( files.length ) {\n\t\tconst fromTransforms = getBlockTransforms( 'from' );\n\t\tblocks = files\n\t\t\t.reduce( ( accumulator, file ) => {\n\t\t\t\tconst transformation = findTransform(\n\t\t\t\t\tfromTransforms,\n\t\t\t\t\t( transform ) =>\n\t\t\t\t\t\ttransform.type === 'files' &&\n\t\t\t\t\t\ttransform.isMatch( [ file ] )\n\t\t\t\t);\n\t\t\t\tif ( transformation ) {\n\t\t\t\t\taccumulator.push( transformation.transform( [ file ] ) );\n\t\t\t\t}\n\t\t\t\treturn accumulator;\n\t\t\t}, [] )\n\t\t\t.flat();\n\t} else {\n\t\tblocks = pasteHandler( {\n\t\t\tHTML: html,\n\t\t\tplainText,\n\t\t\tmode: 'BLOCKS',\n\t\t\tcanUserUseUnfilteredHTML,\n\t\t} );\n\t}\n\n\treturn blocks;\n}\n\n/**\n * Given a string of HTML representing serialized blocks, returns the plain\n * text extracted after stripping the HTML of any tags and fixing line breaks.\n *\n * @param {string} html Serialized blocks.\n * @return {string} The plain-text content with any html removed.\n */\nfunction toPlainText( html ) {\n\t// Manually handle BR tags as line breaks prior to `stripHTML` call\n\thtml = html.replace( /<br>/g, '\\n' );\n\n\tconst plainText = stripHTML( html ).trim();\n\n\t// Merge any consecutive line breaks\n\treturn plainText.replace( /\\n\\n+/g, '\\n\\n' );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tpasteHandler,\n\tfindTransform,\n\tgetBlockTransforms,\n\thasBlockSupport,\n\tswitchToBlockType,\n} from '@wordpress/blocks';\nimport {\n\tdocumentHasSelection,\n\tdocumentHasUncollapsedSelection,\n} from '@wordpress/dom';\nimport { useDispatch, useRegistry, useSelect } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useNotifyCopy } from '../../utils/use-notify-copy';\nimport { setClipboardBlocks } from './utils';\nimport { getPasteEventData } from '../../utils/pasting';\n\nexport default function useClipboardHandler() {\n\tconst registry = useRegistry();\n\tconst {\n\t\tgetBlocksByClientId,\n\t\tgetSelectedBlockClientIds,\n\t\thasMultiSelection,\n\t\tgetSettings,\n\t\tgetBlockName,\n\t\t__unstableIsFullySelected,\n\t\t__unstableIsSelectionCollapsed,\n\t\t__unstableIsSelectionMergeable,\n\t\t__unstableGetSelectedBlocksWithPartialSelection,\n\t\tcanInsertBlockType,\n\t\tgetBlockRootClientId,\n\t} = useSelect( blockEditorStore );\n\tconst {\n\t\tflashBlock,\n\t\tremoveBlocks,\n\t\treplaceBlocks,\n\t\t__unstableDeleteSelection,\n\t\t__unstableExpandSelection,\n\t\t__unstableSplitSelection,\n\t} = useDispatch( blockEditorStore );\n\tconst notifyCopy = useNotifyCopy();\n\n\treturn useRefEffect( ( node ) => {\n\t\tfunction handler( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\t// This was likely already handled in rich-text/use-paste-handler.js.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\n\t\t\tif ( selectedBlockClientIds.length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Let native copy/paste behaviour take over in input fields.\n\t\t\t// But always handle multiple selected blocks.\n\t\t\tif ( ! hasMultiSelection() ) {\n\t\t\t\tconst { target } = event;\n\t\t\t\tconst { ownerDocument } = target;\n\t\t\t\t// If copying, only consider actual text selection as selection.\n\t\t\t\t// Otherwise, any focus on an input field is considered.\n\t\t\t\tconst hasSelection =\n\t\t\t\t\tevent.type === 'copy' || event.type === 'cut'\n\t\t\t\t\t\t? documentHasUncollapsedSelection( ownerDocument )\n\t\t\t\t\t\t: documentHasSelection( ownerDocument ) &&\n\t\t\t\t\t\t  ! ownerDocument.activeElement.isContentEditable;\n\n\t\t\t\t// Let native copy behaviour take over in input fields.\n\t\t\t\tif ( hasSelection ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst { activeElement } = event.target.ownerDocument;\n\n\t\t\tif ( ! node.contains( activeElement ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst isSelectionMergeable = __unstableIsSelectionMergeable();\n\t\t\tconst shouldHandleWholeBlocks =\n\t\t\t\t__unstableIsSelectionCollapsed() || __unstableIsFullySelected();\n\t\t\tconst expandSelectionIsNeeded =\n\t\t\t\t! shouldHandleWholeBlocks && ! isSelectionMergeable;\n\t\t\tif ( event.type === 'copy' || event.type === 'cut' ) {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif ( selectedBlockClientIds.length === 1 ) {\n\t\t\t\t\tflashBlock( selectedBlockClientIds[ 0 ] );\n\t\t\t\t}\n\t\t\t\t// If we have a partial selection that is not mergeable, just\n\t\t\t\t// expand the selection to the whole blocks.\n\t\t\t\tif ( expandSelectionIsNeeded ) {\n\t\t\t\t\t__unstableExpandSelection();\n\t\t\t\t} else {\n\t\t\t\t\tnotifyCopy( event.type, selectedBlockClientIds );\n\t\t\t\t\tlet blocks;\n\t\t\t\t\t// Check if we have partial selection.\n\t\t\t\t\tif ( shouldHandleWholeBlocks ) {\n\t\t\t\t\t\tblocks = getBlocksByClientId( selectedBlockClientIds );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst [ head, tail ] =\n\t\t\t\t\t\t\t__unstableGetSelectedBlocksWithPartialSelection();\n\t\t\t\t\t\tconst inBetweenBlocks = getBlocksByClientId(\n\t\t\t\t\t\t\tselectedBlockClientIds.slice(\n\t\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t\tselectedBlockClientIds.length - 1\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tblocks = [ head, ...inBetweenBlocks, tail ];\n\t\t\t\t\t}\n\n\t\t\t\t\tsetClipboardBlocks( event, blocks, registry );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( event.type === 'cut' ) {\n\t\t\t\t// We need to also check if at the start we needed to\n\t\t\t\t// expand the selection, as in this point we might have\n\t\t\t\t// programmatically fully selected the blocks above.\n\t\t\t\tif ( shouldHandleWholeBlocks && ! expandSelectionIsNeeded ) {\n\t\t\t\t\tremoveBlocks( selectedBlockClientIds );\n\t\t\t\t} else {\n\t\t\t\t\tevent.target.ownerDocument.activeElement.contentEditable = false;\n\t\t\t\t\t__unstableDeleteSelection();\n\t\t\t\t}\n\t\t\t} else if ( event.type === 'paste' ) {\n\t\t\t\tconst {\n\t\t\t\t\t__experimentalCanUserUseUnfilteredHTML:\n\t\t\t\t\t\tcanUserUseUnfilteredHTML,\n\t\t\t\t} = getSettings();\n\t\t\t\tconst isInternal =\n\t\t\t\t\tevent.clipboardData.getData( 'rich-text' ) === 'true';\n\t\t\t\tif ( isInternal ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst { plainText, html, files } = getPasteEventData( event );\n\t\t\t\tconst isFullySelected = __unstableIsFullySelected();\n\t\t\t\tlet blocks = [];\n\n\t\t\t\tif ( files.length ) {\n\t\t\t\t\tconst fromTransforms = getBlockTransforms( 'from' );\n\t\t\t\t\tblocks = files\n\t\t\t\t\t\t.reduce( ( accumulator, file ) => {\n\t\t\t\t\t\t\tconst transformation = findTransform(\n\t\t\t\t\t\t\t\tfromTransforms,\n\t\t\t\t\t\t\t\t( transform ) =>\n\t\t\t\t\t\t\t\t\ttransform.type === 'files' &&\n\t\t\t\t\t\t\t\t\ttransform.isMatch( [ file ] )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif ( transformation ) {\n\t\t\t\t\t\t\t\taccumulator.push(\n\t\t\t\t\t\t\t\t\ttransformation.transform( [ file ] )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn accumulator;\n\t\t\t\t\t\t}, [] )\n\t\t\t\t\t\t.flat();\n\t\t\t\t} else {\n\t\t\t\t\tblocks = pasteHandler( {\n\t\t\t\t\t\tHTML: html,\n\t\t\t\t\t\tplainText,\n\t\t\t\t\t\tmode: isFullySelected ? 'BLOCKS' : 'AUTO',\n\t\t\t\t\t\tcanUserUseUnfilteredHTML,\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t// Inline paste: let rich text handle it.\n\t\t\t\tif ( typeof blocks === 'string' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( isFullySelected ) {\n\t\t\t\t\treplaceBlocks(\n\t\t\t\t\t\tselectedBlockClientIds,\n\t\t\t\t\t\tblocks,\n\t\t\t\t\t\tblocks.length - 1,\n\t\t\t\t\t\t-1\n\t\t\t\t\t);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// If a block doesn't support splitting, let rich text paste\n\t\t\t\t// inline.\n\t\t\t\tif (\n\t\t\t\t\t! hasMultiSelection() &&\n\t\t\t\t\t! hasBlockSupport(\n\t\t\t\t\t\tgetBlockName( selectedBlockClientIds[ 0 ] ),\n\t\t\t\t\t\t'splitting',\n\t\t\t\t\t\tfalse\n\t\t\t\t\t) &&\n\t\t\t\t\t! event.__deprecatedOnSplit\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst [ firstSelectedClientId ] = selectedBlockClientIds;\n\t\t\t\tconst rootClientId = getBlockRootClientId(\n\t\t\t\t\tfirstSelectedClientId\n\t\t\t\t);\n\n\t\t\t\tconst newBlocks = [];\n\n\t\t\t\tfor ( const block of blocks ) {\n\t\t\t\t\tif ( canInsertBlockType( block.name, rootClientId ) ) {\n\t\t\t\t\t\tnewBlocks.push( block );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// If a block cannot be inserted in a root block, try\n\t\t\t\t\t\t// converting it to that root block type and insert the\n\t\t\t\t\t\t// inner blocks.\n\t\t\t\t\t\t// Example: paragraphs cannot be inserted into a list,\n\t\t\t\t\t\t// so convert the paragraphs to a list for list items.\n\t\t\t\t\t\tconst rootBlockName = getBlockName( rootClientId );\n\t\t\t\t\t\tconst switchedBlocks =\n\t\t\t\t\t\t\tblock.name !== rootBlockName\n\t\t\t\t\t\t\t\t? switchToBlockType( block, rootBlockName )\n\t\t\t\t\t\t\t\t: [ block ];\n\n\t\t\t\t\t\tif ( ! switchedBlocks ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( const switchedBlock of switchedBlocks ) {\n\t\t\t\t\t\t\tfor ( const innerBlock of switchedBlock.innerBlocks ) {\n\t\t\t\t\t\t\t\tnewBlocks.push( innerBlock );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t__unstableSplitSelection( newBlocks );\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\tnode.ownerDocument.addEventListener( 'copy', handler );\n\t\tnode.ownerDocument.addEventListener( 'cut', handler );\n\t\tnode.ownerDocument.addEventListener( 'paste', handler );\n\n\t\treturn () => {\n\t\t\tnode.ownerDocument.removeEventListener( 'copy', handler );\n\t\t\tnode.ownerDocument.removeEventListener( 'cut', handler );\n\t\t\tnode.ownerDocument.removeEventListener( 'paste', handler );\n\t\t};\n\t}, [] );\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { useMergeRefs, useRefEffect } from '@wordpress/compose';\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useMultiSelection from './use-multi-selection';\nimport useTabNav from './use-tab-nav';\nimport useArrowNav from './use-arrow-nav';\nimport useSelectAll from './use-select-all';\nimport useDragSelection from './use-drag-selection';\nimport useSelectionObserver from './use-selection-observer';\nimport useClickSelection from './use-click-selection';\nimport useInput from './use-input';\nimport useClipboardHandler from './use-clipboard-handler';\nimport { store as blockEditorStore } from '../../store';\n\nexport function useWritingFlow() {\n\tconst [ before, ref, after ] = useTabNav();\n\tconst hasMultiSelection = useSelect(\n\t\t( select ) => select( blockEditorStore ).hasMultiSelection(),\n\t\t[]\n\t);\n\n\treturn [\n\t\tbefore,\n\t\tuseMergeRefs( [\n\t\t\tref,\n\t\t\tuseClipboardHandler(),\n\t\t\tuseInput(),\n\t\t\tuseDragSelection(),\n\t\t\tuseSelectionObserver(),\n\t\t\tuseClickSelection(),\n\t\t\tuseMultiSelection(),\n\t\t\tuseSelectAll(),\n\t\t\tuseArrowNav(),\n\t\t\tuseRefEffect(\n\t\t\t\t( node ) => {\n\t\t\t\t\tnode.tabIndex = 0;\n\t\t\t\t\tnode.dataset.hasMultiSelection = hasMultiSelection;\n\n\t\t\t\t\tif ( ! hasMultiSelection ) {\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\tdelete node.dataset.hasMultiSelection;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tnode.setAttribute(\n\t\t\t\t\t\t'aria-label',\n\t\t\t\t\t\t__( 'Multiple selected blocks' )\n\t\t\t\t\t);\n\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tdelete node.dataset.hasMultiSelection;\n\t\t\t\t\t\tnode.removeAttribute( 'aria-label' );\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\t[ hasMultiSelection ]\n\t\t\t),\n\t\t] ),\n\t\tafter,\n\t];\n}\n\nfunction WritingFlow( { children, ...props }, forwardedRef ) {\n\tconst [ before, ref, after ] = useWritingFlow();\n\treturn (\n\t\t<>\n\t\t\t{ before }\n\t\t\t<div\n\t\t\t\t{ ...props }\n\t\t\t\tref={ useMergeRefs( [ ref, forwardedRef ] ) }\n\t\t\t\tclassName={ clsx(\n\t\t\t\t\tprops.className,\n\t\t\t\t\t'block-editor-writing-flow'\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t\t{ after }\n\t\t</>\n\t);\n}\n\n/**\n * Handles selection and navigation across blocks. This component should be\n * wrapped around BlockList.\n *\n * @param {Object}  props          Component properties.\n * @param {Element} props.children Children to be rendered.\n */\nexport default forwardRef( WritingFlow );\n","/**\n * WordPress dependencies\n */\nimport { focus, isFormElement } from '@wordpress/dom';\nimport { TAB } from '@wordpress/keycodes';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect, useMergeRefs } from '@wordpress/compose';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { isInSameBlock, isInsideRootBlock } from '../../utils/dom';\nimport { unlock } from '../../lock-unlock';\n\nexport default function useTabNav() {\n\tconst containerRef = /** @type {typeof useRef<HTMLElement>} */ ( useRef )();\n\tconst focusCaptureBeforeRef = useRef();\n\tconst focusCaptureAfterRef = useRef();\n\n\tconst {\n\t\thasMultiSelection,\n\t\tgetSelectedBlockClientId,\n\t\tgetBlockCount,\n\t\tgetBlockOrder,\n\t\tgetLastFocus,\n\t\tgetSectionRootClientId,\n\t\tisZoomOut,\n\t} = unlock( useSelect( blockEditorStore ) );\n\tconst { setLastFocus } = unlock( useDispatch( blockEditorStore ) );\n\n\t// Reference that holds the a flag for enabling or disabling\n\t// capturing on the focus capture elements.\n\tconst noCaptureRef = useRef();\n\n\tfunction onFocusCapture( event ) {\n\t\tconst canvasElement =\n\t\t\tcontainerRef.current.ownerDocument === event.target.ownerDocument\n\t\t\t\t? containerRef.current\n\t\t\t\t: containerRef.current.ownerDocument.defaultView.frameElement;\n\n\t\t// Do not capture incoming focus if set by us in WritingFlow.\n\t\tif ( noCaptureRef.current ) {\n\t\t\tnoCaptureRef.current = null;\n\t\t} else if ( hasMultiSelection() ) {\n\t\t\tcontainerRef.current.focus();\n\t\t} else if ( getSelectedBlockClientId() ) {\n\t\t\tif ( getLastFocus()?.current ) {\n\t\t\t\tgetLastFocus().current.focus();\n\t\t\t} else {\n\t\t\t\t// Handles when the last focus has not been set yet, or has been cleared by new blocks being added via the inserter.\n\t\t\t\tcontainerRef.current\n\t\t\t\t\t.querySelector(\n\t\t\t\t\t\t`[data-block=\"${ getSelectedBlockClientId() }\"]`\n\t\t\t\t\t)\n\t\t\t\t\t.focus();\n\t\t\t}\n\t\t}\n\t\t// In \"compose\" mode without a selected ID, we want to place focus on the section root when tabbing to the canvas.\n\t\telse if ( isZoomOut() ) {\n\t\t\tconst sectionRootClientId = getSectionRootClientId();\n\t\t\tconst sectionBlocks = getBlockOrder( sectionRootClientId );\n\n\t\t\t// If we have section within the section root, focus the first one.\n\t\t\tif ( sectionBlocks.length ) {\n\t\t\t\tcontainerRef.current\n\t\t\t\t\t.querySelector( `[data-block=\"${ sectionBlocks[ 0 ] }\"]` )\n\t\t\t\t\t.focus();\n\t\t\t}\n\t\t\t// If we don't have any section blocks, focus the section root.\n\t\t\telse if ( sectionRootClientId ) {\n\t\t\t\tcontainerRef.current\n\t\t\t\t\t.querySelector( `[data-block=\"${ sectionRootClientId }\"]` )\n\t\t\t\t\t.focus();\n\t\t\t} else {\n\t\t\t\t// If we don't have any section root, focus the canvas.\n\t\t\t\tcanvasElement.focus();\n\t\t\t}\n\t\t} else {\n\t\t\tconst isBefore =\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tevent.target.compareDocumentPosition( canvasElement ) &\n\t\t\t\tevent.target.DOCUMENT_POSITION_FOLLOWING;\n\t\t\tconst tabbables = focus.tabbable.find( containerRef.current );\n\t\t\tif ( tabbables.length ) {\n\t\t\t\tconst next = isBefore\n\t\t\t\t\t? tabbables[ 0 ]\n\t\t\t\t\t: tabbables[ tabbables.length - 1 ];\n\t\t\t\tnext.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tconst before = (\n\t\t<div\n\t\t\tref={ focusCaptureBeforeRef }\n\t\t\ttabIndex=\"0\"\n\t\t\tonFocus={ onFocusCapture }\n\t\t/>\n\t);\n\n\tconst after = (\n\t\t<div\n\t\t\tref={ focusCaptureAfterRef }\n\t\t\ttabIndex=\"0\"\n\t\t\tonFocus={ onFocusCapture }\n\t\t/>\n\t);\n\n\tconst ref = useRefEffect( ( node ) => {\n\t\tfunction onKeyDown( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// In Edit mode, Tab should focus the first tabbable element after\n\t\t\t// the content, which is normally the sidebar (with block controls)\n\t\t\t// and Shift+Tab should focus the first tabbable element before the\n\t\t\t// content, which is normally the block toolbar.\n\t\t\t// Arrow keys can be used, and Tab and arrow keys can be used in\n\t\t\t// Navigation mode (press Esc), to navigate through blocks.\n\t\t\tif ( event.keyCode !== TAB ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// Bails in case the focus capture elements arent present. They\n\t\t\t\t// may be omitted to avoid silent tab stops in preview mode.\n\t\t\t\t// See: https://github.com/WordPress/gutenberg/pull/59317\n\t\t\t\t! focusCaptureAfterRef.current ||\n\t\t\t\t! focusCaptureBeforeRef.current\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { target, shiftKey: isShift } = event;\n\t\t\tconst direction = isShift ? 'findPrevious' : 'findNext';\n\t\t\tconst nextTabbable = focus.tabbable[ direction ]( target );\n\n\t\t\t// We want to constrain the tabbing to the block and its child blocks.\n\t\t\t// If the preceding form element is within a different block,\n\t\t\t// such as two sibling image blocks in the placeholder state,\n\t\t\t// we want shift + tab from the first form element to move to the image\n\t\t\t// block toolbar and not the previous image block's form element.\n\t\t\tconst currentBlock = target.closest( '[data-block]' );\n\t\t\tconst isElementPartOfSelectedBlock =\n\t\t\t\tcurrentBlock &&\n\t\t\t\tnextTabbable &&\n\t\t\t\t( isInSameBlock( currentBlock, nextTabbable ) ||\n\t\t\t\t\tisInsideRootBlock( currentBlock, nextTabbable ) );\n\n\t\t\t// Allow tabbing from the block wrapper to a form element,\n\t\t\t// and between form elements rendered in a block and its child blocks,\n\t\t\t// such as inside a placeholder. Form elements are generally\n\t\t\t// meant to be UI rather than part of the content. Ideally\n\t\t\t// these are not rendered in the content and perhaps in the\n\t\t\t// future they can be rendered in an iframe or shadow DOM.\n\t\t\tif (\n\t\t\t\tisFormElement( nextTabbable ) &&\n\t\t\t\tisElementPartOfSelectedBlock\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst next = isShift ? focusCaptureBeforeRef : focusCaptureAfterRef;\n\n\t\t\t// Disable focus capturing on the focus capture element, so it\n\t\t\t// doesn't refocus this block and so it allows default behaviour\n\t\t\t// (moving focus to the next tabbable element).\n\t\t\tnoCaptureRef.current = true;\n\n\t\t\t// Focusing the focus capture element, which is located above and\n\t\t\t// below the editor, should not scroll the page all the way up or\n\t\t\t// down.\n\t\t\tnext.current.focus( { preventScroll: true } );\n\t\t}\n\n\t\tfunction onFocusOut( event ) {\n\t\t\tsetLastFocus( { ...getLastFocus(), current: event.target } );\n\n\t\t\tconst { ownerDocument } = node;\n\n\t\t\t// If focus disappears due to there being no blocks, move focus to\n\t\t\t// the writing flow wrapper.\n\t\t\tif (\n\t\t\t\t! event.relatedTarget &&\n\t\t\t\tevent.target.hasAttribute( 'data-block' ) &&\n\t\t\t\townerDocument.activeElement === ownerDocument.body &&\n\t\t\t\tgetBlockCount() === 0\n\t\t\t) {\n\t\t\t\tnode.focus();\n\t\t\t}\n\t\t}\n\n\t\t// When tabbing back to an element in block list, this event handler prevents scrolling if the\n\t\t// focus capture divs (before/after) are outside of the viewport. (For example shift+tab back to a paragraph\n\t\t// when focus is on a sidebar element. This prevents the scrollable writing area from jumping either to the\n\t\t// top or bottom of the document.\n\t\t//\n\t\t// Note that it isn't possible to disable scrolling in the onFocus event. We need to intercept this\n\t\t// earlier in the keypress handler, and call focus( { preventScroll: true } ) instead.\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/HTMLOrForeignElement/focus#parameters\n\t\tfunction preventScrollOnTab( event ) {\n\t\t\tif ( event.keyCode !== TAB ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( event.target?.getAttribute( 'role' ) === 'region' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( containerRef.current === event.target ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst isShift = event.shiftKey;\n\t\t\tconst direction = isShift ? 'findPrevious' : 'findNext';\n\t\t\tconst target = focus.tabbable[ direction ]( event.target );\n\t\t\t// Only do something when the next tabbable is a focus capture div (before/after)\n\t\t\tif (\n\t\t\t\ttarget === focusCaptureBeforeRef.current ||\n\t\t\t\ttarget === focusCaptureAfterRef.current\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\ttarget.focus( { preventScroll: true } );\n\t\t\t}\n\t\t}\n\n\t\tconst { ownerDocument } = node;\n\t\tconst { defaultView } = ownerDocument;\n\t\tdefaultView.addEventListener( 'keydown', preventScrollOnTab );\n\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\tnode.addEventListener( 'focusout', onFocusOut );\n\t\treturn () => {\n\t\t\tdefaultView.removeEventListener( 'keydown', preventScrollOnTab );\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t\tnode.removeEventListener( 'focusout', onFocusOut );\n\t\t};\n\t}, [] );\n\n\tconst mergedRefs = useMergeRefs( [ containerRef, ref ] );\n\n\treturn [ before, mergedRefs, after ];\n}\n","let compatibilityStyles = null;\n\n/**\n * Returns a list of stylesheets that target the editor canvas. A stylesheet is\n * considered targeting the editor a canvas if it contains the\n * `editor-styles-wrapper`, `wp-block`, or `wp-block-*` class selectors.\n *\n * Ideally, this hook should be removed in the future and styles should be added\n * explicitly as editor styles.\n */\nexport function getCompatibilityStyles() {\n\tif ( compatibilityStyles ) {\n\t\treturn compatibilityStyles;\n\t}\n\n\t// Only memoize the result once on load, since these stylesheets should not\n\t// change.\n\tcompatibilityStyles = Array.from( document.styleSheets ).reduce(\n\t\t( accumulator, styleSheet ) => {\n\t\t\ttry {\n\t\t\t\t// May fail for external styles.\n\t\t\t\t// eslint-disable-next-line no-unused-expressions\n\t\t\t\tstyleSheet.cssRules;\n\t\t\t} catch ( e ) {\n\t\t\t\treturn accumulator;\n\t\t\t}\n\n\t\t\tconst { ownerNode, cssRules } = styleSheet;\n\n\t\t\t// Stylesheet is added by another stylesheet. See\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/StyleSheet/ownerNode#notes.\n\t\t\tif ( ownerNode === null ) {\n\t\t\t\treturn accumulator;\n\t\t\t}\n\n\t\t\tif ( ! cssRules ) {\n\t\t\t\treturn accumulator;\n\t\t\t}\n\n\t\t\t// Don't try to add core WP styles. We are responsible for adding\n\t\t\t// them. This compatibility layer is only meant to add styles added\n\t\t\t// by plugins or themes.\n\t\t\tif ( ownerNode.id.startsWith( 'wp-' ) ) {\n\t\t\t\treturn accumulator;\n\t\t\t}\n\n\t\t\t// Don't try to add styles without ID. Styles enqueued via the WP dependency system will always have IDs.\n\t\t\tif ( ! ownerNode.id ) {\n\t\t\t\treturn accumulator;\n\t\t\t}\n\n\t\t\tfunction matchFromRules( _cssRules ) {\n\t\t\t\treturn Array.from( _cssRules ).find(\n\t\t\t\t\t( {\n\t\t\t\t\t\tselectorText,\n\t\t\t\t\t\tconditionText,\n\t\t\t\t\t\tcssRules: __cssRules,\n\t\t\t\t\t} ) => {\n\t\t\t\t\t\t// If the rule is conditional then it will not have selector text.\n\t\t\t\t\t\t// Recurse into child CSS ruleset to determine selector eligibility.\n\t\t\t\t\t\tif ( conditionText ) {\n\t\t\t\t\t\t\treturn matchFromRules( __cssRules );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tselectorText &&\n\t\t\t\t\t\t\t( selectorText.includes(\n\t\t\t\t\t\t\t\t'.editor-styles-wrapper'\n\t\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t\tselectorText.includes( '.wp-block' ) )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( matchFromRules( cssRules ) ) {\n\t\t\t\tconst isInline = ownerNode.tagName === 'STYLE';\n\n\t\t\t\tif ( isInline ) {\n\t\t\t\t\t// If the current target is inline,\n\t\t\t\t\t// it could be a dependency of an existing stylesheet.\n\t\t\t\t\t// Look for that dependency and add it BEFORE the current target.\n\t\t\t\t\tconst mainStylesCssId = ownerNode.id.replace(\n\t\t\t\t\t\t'-inline-css',\n\t\t\t\t\t\t'-css'\n\t\t\t\t\t);\n\t\t\t\t\tconst mainStylesElement =\n\t\t\t\t\t\tdocument.getElementById( mainStylesCssId );\n\t\t\t\t\tif ( mainStylesElement ) {\n\t\t\t\t\t\taccumulator.push( mainStylesElement.cloneNode( true ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\taccumulator.push( ownerNode.cloneNode( true ) );\n\n\t\t\t\tif ( ! isInline ) {\n\t\t\t\t\t// If the current target is not inline,\n\t\t\t\t\t// we still look for inline styles that could be relevant for the current target.\n\t\t\t\t\t// If they exist, add them AFTER the current target.\n\t\t\t\t\tconst inlineStylesCssId = ownerNode.id.replace(\n\t\t\t\t\t\t'-css',\n\t\t\t\t\t\t'-inline-css'\n\t\t\t\t\t);\n\t\t\t\t\tconst inlineStylesElement =\n\t\t\t\t\t\tdocument.getElementById( inlineStylesCssId );\n\t\t\t\t\tif ( inlineStylesElement ) {\n\t\t\t\t\t\taccumulator.push(\n\t\t\t\t\t\t\tinlineStylesElement.cloneNode( true )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn accumulator;\n\t\t},\n\t\t[]\n\t);\n\n\treturn compatibilityStyles;\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useRef, useCallback } from '@wordpress/element';\nimport { useReducedMotion, useResizeObserver } from '@wordpress/compose';\n\n/**\n * @typedef {Object} TransitionState\n * @property {number} scaleValue      Scale of the canvas.\n * @property {number} frameSize       Size of the frame/offset around the canvas.\n * @property {number} containerHeight containerHeight of the iframe.\n * @property {number} scrollTop       ScrollTop of the iframe.\n * @property {number} scrollHeight    ScrollHeight of the iframe.\n */\n\n/**\n * Calculate the scale of the canvas.\n *\n * @param {Object} options                     Object of options\n * @param {number} options.frameSize           Size of the frame/offset around the canvas\n * @param {number} options.containerWidth      Actual width of the canvas container\n * @param {number} options.maxContainerWidth   Maximum width of the container to use for the scale calculation. This locks the canvas to a maximum width when zooming out.\n * @param {number} options.scaleContainerWidth Width the of the container wrapping the canvas container\n * @return {number} Scale value between 0 and/or equal to 1\n */\nfunction calculateScale( {\n\tframeSize,\n\tcontainerWidth,\n\tmaxContainerWidth,\n\tscaleContainerWidth,\n} ) {\n\treturn (\n\t\t( Math.min( containerWidth, maxContainerWidth ) - frameSize * 2 ) /\n\t\tscaleContainerWidth\n\t);\n}\n\n/**\n * Compute the next scrollHeight based on the transition states.\n *\n * @param {TransitionState} transitionFrom Starting point of the transition\n * @param {TransitionState} transitionTo   Ending state of the transition\n * @return {number} Next scrollHeight based on scale and frame value changes.\n */\nfunction computeScrollHeightNext( transitionFrom, transitionTo ) {\n\tconst { scaleValue: prevScale, scrollHeight: prevScrollHeight } =\n\t\ttransitionFrom;\n\tconst { frameSize, scaleValue } = transitionTo;\n\n\treturn prevScrollHeight * ( scaleValue / prevScale ) + frameSize * 2;\n}\n\n/**\n * Compute the next scrollTop position after scaling the iframe content.\n *\n * @param {TransitionState} transitionFrom Starting point of the transition\n * @param {TransitionState} transitionTo   Ending state of the transition\n * @return {number} Next scrollTop position after scaling the iframe content.\n */\nfunction computeScrollTopNext( transitionFrom, transitionTo ) {\n\tconst {\n\t\tcontainerHeight: prevContainerHeight,\n\t\tframeSize: prevFrameSize,\n\t\tscaleValue: prevScale,\n\t\tscrollTop: prevScrollTop,\n\t} = transitionFrom;\n\tconst { containerHeight, frameSize, scaleValue, scrollHeight } =\n\t\ttransitionTo;\n\t// Step 0: Start with the current scrollTop.\n\tlet scrollTopNext = prevScrollTop;\n\t// Step 1: Undo the effects of the previous scale and frame around the\n\t// midpoint of the visible area.\n\tscrollTopNext =\n\t\t( scrollTopNext + prevContainerHeight / 2 - prevFrameSize ) /\n\t\t\tprevScale -\n\t\tprevContainerHeight / 2;\n\n\t// Step 2: Apply the new scale and frame around the midpoint of the\n\t// visible area.\n\tscrollTopNext =\n\t\t( scrollTopNext + containerHeight / 2 ) * scaleValue +\n\t\tframeSize -\n\t\tcontainerHeight / 2;\n\n\t// Step 3: Handle an edge case so that you scroll to the top of the\n\t// iframe if the top of the iframe content is visible in the container.\n\t// The same edge case for the bottom is skipped because changing content\n\t// makes calculating it impossible.\n\tscrollTopNext = prevScrollTop <= prevFrameSize ? 0 : scrollTopNext;\n\n\t// This is the scrollTop value if you are scrolled to the bottom of the\n\t// iframe. We can't just let the browser handle it because we need to\n\t// animate the scaling.\n\tconst maxScrollTop = scrollHeight - containerHeight;\n\n\t// Step 4: Clamp the scrollTopNext between the minimum and maximum\n\t// possible scrollTop positions. Round the value to avoid subpixel\n\t// truncation by the browser which sometimes causes a 1px error.\n\treturn Math.round(\n\t\tMath.min( Math.max( 0, scrollTopNext ), Math.max( 0, maxScrollTop ) )\n\t);\n}\n\n/**\n * Generate the keyframes to use for the zoom out animation.\n *\n * @param {TransitionState} transitionFrom Starting transition state.\n * @param {TransitionState} transitionTo   Ending transition state.\n * @return {Object[]} An array of keyframes to use for the animation.\n */\nfunction getAnimationKeyframes( transitionFrom, transitionTo ) {\n\tconst {\n\t\tscaleValue: prevScale,\n\t\tframeSize: prevFrameSize,\n\t\tscrollTop,\n\t} = transitionFrom;\n\tconst { scaleValue, frameSize, scrollTop: scrollTopNext } = transitionTo;\n\n\treturn [\n\t\t{\n\t\t\ttranslate: `0 0`,\n\t\t\tscale: prevScale,\n\t\t\tpaddingTop: `${ prevFrameSize / prevScale }px`,\n\t\t\tpaddingBottom: `${ prevFrameSize / prevScale }px`,\n\t\t},\n\t\t{\n\t\t\ttranslate: `0 ${ scrollTop - scrollTopNext }px`,\n\t\t\tscale: scaleValue,\n\t\t\tpaddingTop: `${ frameSize / scaleValue }px`,\n\t\t\tpaddingBottom: `${ frameSize / scaleValue }px`,\n\t\t},\n\t];\n}\n\n/**\n * @typedef {Object} ScaleCanvasResult\n * @property {boolean} isZoomedOut             A boolean indicating if the canvas is zoomed out.\n * @property {number}  scaleContainerWidth     The width of the container used to calculate the scale.\n * @property {Object}  contentResizeListener   A resize observer for the content.\n * @property {Object}  containerResizeListener A resize observer for the container.\n */\n\n/**\n * Handles scaling the canvas for the zoom out mode and animating between\n * the states.\n *\n * @param {Object}        options                   Object of options.\n * @param {number}        options.frameSize         Size of the frame around the content.\n * @param {Document}      options.iframeDocument    Document of the iframe.\n * @param {number}        options.maxContainerWidth Max width of the canvas to use as the starting scale point. Defaults to 750.\n * @param {number|string} options.scale             Scale of the canvas. Can be an decimal between 0 and 1, 1, or 'auto-scaled'.\n * @return {ScaleCanvasResult} Properties of the result.\n */\nexport function useScaleCanvas( {\n\tframeSize,\n\tiframeDocument,\n\tmaxContainerWidth = 750,\n\tscale,\n} ) {\n\tconst [ contentResizeListener, { height: contentHeight } ] =\n\t\tuseResizeObserver();\n\tconst [\n\t\tcontainerResizeListener,\n\t\t{ width: containerWidth, height: containerHeight },\n\t] = useResizeObserver();\n\n\tconst initialContainerWidthRef = useRef( 0 );\n\tconst isZoomedOut = scale !== 1;\n\tconst prefersReducedMotion = useReducedMotion();\n\tconst isAutoScaled = scale === 'auto-scaled';\n\t// Track if the animation should start when the useEffect runs.\n\tconst startAnimationRef = useRef( false );\n\t// Track the animation so we know if we have an animation running,\n\t// and can cancel it, reverse it, call a finish event, etc.\n\tconst animationRef = useRef( null );\n\n\tuseEffect( () => {\n\t\tif ( ! isZoomedOut ) {\n\t\t\tinitialContainerWidthRef.current = containerWidth;\n\t\t}\n\t}, [ containerWidth, isZoomedOut ] );\n\n\tconst scaleContainerWidth = Math.max(\n\t\tinitialContainerWidthRef.current,\n\t\tcontainerWidth\n\t);\n\n\tconst scaleValue = isAutoScaled\n\t\t? calculateScale( {\n\t\t\t\tframeSize,\n\t\t\t\tcontainerWidth,\n\t\t\t\tmaxContainerWidth,\n\t\t\t\tscaleContainerWidth,\n\t\t  } )\n\t\t: scale;\n\n\t/**\n\t * The starting transition state for the zoom out animation.\n\t * @type {import('react').RefObject<TransitionState>}\n\t */\n\tconst transitionFromRef = useRef( {\n\t\tscaleValue,\n\t\tframeSize,\n\t\tcontainerHeight: 0,\n\t\tscrollTop: 0,\n\t\tscrollHeight: 0,\n\t} );\n\n\t/**\n\t * The ending transition state for the zoom out animation.\n\t * @type {import('react').RefObject<TransitionState>}\n\t */\n\tconst transitionToRef = useRef( {\n\t\tscaleValue,\n\t\tframeSize,\n\t\tcontainerHeight: 0,\n\t\tscrollTop: 0,\n\t\tscrollHeight: 0,\n\t} );\n\n\t/**\n\t * Start the zoom out animation. This sets the necessary CSS variables\n\t * for animating the canvas and returns the Animation object.\n\t *\n\t * @return {Animation} The animation object for the zoom out animation.\n\t */\n\tconst startZoomOutAnimation = useCallback( () => {\n\t\tconst { scrollTop } = transitionFromRef.current;\n\t\tconst { scrollTop: scrollTopNext } = transitionToRef.current;\n\n\t\tiframeDocument.documentElement.style.setProperty(\n\t\t\t'--wp-block-editor-iframe-zoom-out-scroll-top',\n\t\t\t`${ scrollTop }px`\n\t\t);\n\n\t\tiframeDocument.documentElement.style.setProperty(\n\t\t\t'--wp-block-editor-iframe-zoom-out-scroll-top-next',\n\t\t\t`${ scrollTopNext }px`\n\t\t);\n\n\t\t// If the container has a scrolllbar, force a scrollbar to prevent the content from shifting while animating.\n\t\tiframeDocument.documentElement.style.setProperty(\n\t\t\t'--wp-block-editor-iframe-zoom-out-overflow-behavior',\n\t\t\ttransitionFromRef.current.scrollHeight ===\n\t\t\t\ttransitionFromRef.current.containerHeight\n\t\t\t\t? 'auto'\n\t\t\t\t: 'scroll'\n\t\t);\n\n\t\tiframeDocument.documentElement.classList.add( 'zoom-out-animation' );\n\n\t\treturn iframeDocument.documentElement.animate(\n\t\t\tgetAnimationKeyframes(\n\t\t\t\ttransitionFromRef.current,\n\t\t\t\ttransitionToRef.current\n\t\t\t),\n\t\t\t{\n\t\t\t\teasing: 'cubic-bezier(0.46, 0.03, 0.52, 0.96)',\n\t\t\t\tduration: 400,\n\t\t\t}\n\t\t);\n\t}, [ iframeDocument ] );\n\n\t/**\n\t * Callback when the zoom out animation is finished.\n\t * - Cleans up animations refs.\n\t * - Adds final CSS vars for scale and frame size to preserve the state.\n\t * - Removes the 'zoom-out-animation' class (which has the fixed positioning).\n\t * - Sets the final scroll position after the canvas is no longer in fixed position.\n\t * - Removes CSS vars related to the animation.\n\t * - Sets the transitionFrom to the transitionTo state to be ready for the next animation.\n\t */\n\tconst finishZoomOutAnimation = useCallback( () => {\n\t\tstartAnimationRef.current = false;\n\t\tanimationRef.current = null;\n\n\t\t// Add our final scale and frame size now that the animation is done.\n\t\tiframeDocument.documentElement.style.setProperty(\n\t\t\t'--wp-block-editor-iframe-zoom-out-scale',\n\t\t\ttransitionToRef.current.scaleValue\n\t\t);\n\t\tiframeDocument.documentElement.style.setProperty(\n\t\t\t'--wp-block-editor-iframe-zoom-out-frame-size',\n\t\t\t`${ transitionToRef.current.frameSize }px`\n\t\t);\n\n\t\tiframeDocument.documentElement.classList.remove( 'zoom-out-animation' );\n\n\t\t// Set the final scroll position that was just animated to.\n\t\t// Disable reason: Eslint isn't smart enough to know that this is a\n\t\t// DOM element. https://github.com/facebook/react/issues/31483\n\t\t// eslint-disable-next-line react-compiler/react-compiler\n\t\tiframeDocument.documentElement.scrollTop =\n\t\t\ttransitionToRef.current.scrollTop;\n\n\t\tiframeDocument.documentElement.style.removeProperty(\n\t\t\t'--wp-block-editor-iframe-zoom-out-scroll-top'\n\t\t);\n\t\tiframeDocument.documentElement.style.removeProperty(\n\t\t\t'--wp-block-editor-iframe-zoom-out-scroll-top-next'\n\t\t);\n\t\tiframeDocument.documentElement.style.removeProperty(\n\t\t\t'--wp-block-editor-iframe-zoom-out-overflow-behavior'\n\t\t);\n\n\t\t// Update previous values.\n\t\ttransitionFromRef.current = transitionToRef.current;\n\t}, [ iframeDocument ] );\n\n\tconst previousIsZoomedOut = useRef( false );\n\n\t/**\n\t * Runs when zoom out mode is toggled, and sets the startAnimation flag\n\t * so the animation will start when the next useEffect runs. We _only_\n\t * want to animate when the zoom out mode is toggled, not when the scale\n\t * changes due to the container resizing.\n\t */\n\tuseEffect( () => {\n\t\tconst trigger =\n\t\t\tiframeDocument && previousIsZoomedOut.current !== isZoomedOut;\n\n\t\tpreviousIsZoomedOut.current = isZoomedOut;\n\n\t\tif ( ! trigger ) {\n\t\t\treturn;\n\t\t}\n\n\t\tstartAnimationRef.current = true;\n\n\t\tif ( ! isZoomedOut ) {\n\t\t\treturn;\n\t\t}\n\n\t\tiframeDocument.documentElement.classList.add( 'is-zoomed-out' );\n\t\treturn () => {\n\t\t\tiframeDocument.documentElement.classList.remove( 'is-zoomed-out' );\n\t\t};\n\t}, [ iframeDocument, isZoomedOut ] );\n\n\t/**\n\t * This handles:\n\t * 1. Setting the correct scale and vars of the canvas when zoomed out\n\t * 2. If zoom out mode has been toggled, runs the animation of zooming in/out\n\t */\n\tuseEffect( () => {\n\t\tif ( ! iframeDocument ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// We need to update the appropriate scale to exit from. If sidebars have been opened since setting the\n\t\t// original scale, we will snap to a much smaller scale due to the scale container immediately changing sizes when exiting.\n\t\tif ( isAutoScaled && transitionFromRef.current.scaleValue !== 1 ) {\n\t\t\t// We use containerWidth as the divisor, as scaleContainerWidth will always match the containerWidth when\n\t\t\t// exiting.\n\t\t\ttransitionFromRef.current.scaleValue = calculateScale( {\n\t\t\t\tframeSize: transitionFromRef.current.frameSize,\n\t\t\t\tcontainerWidth,\n\t\t\t\tmaxContainerWidth,\n\t\t\t\tscaleContainerWidth: containerWidth,\n\t\t\t} );\n\t\t}\n\n\t\tif ( scaleValue < 1 ) {\n\t\t\t// If we are not going to animate the transition, set the scale and frame size directly.\n\t\t\t// If we are animating, these values will be set when the animation is finished.\n\t\t\t// Example: Opening sidebars that reduce the scale of the canvas, but we don't want to\n\t\t\t// animate the transition.\n\t\t\tif ( ! startAnimationRef.current ) {\n\t\t\t\tiframeDocument.documentElement.style.setProperty(\n\t\t\t\t\t'--wp-block-editor-iframe-zoom-out-scale',\n\t\t\t\t\tscaleValue\n\t\t\t\t);\n\t\t\t\tiframeDocument.documentElement.style.setProperty(\n\t\t\t\t\t'--wp-block-editor-iframe-zoom-out-frame-size',\n\t\t\t\t\t`${ frameSize }px`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tiframeDocument.documentElement.style.setProperty(\n\t\t\t\t'--wp-block-editor-iframe-zoom-out-content-height',\n\t\t\t\t`${ contentHeight }px`\n\t\t\t);\n\n\t\t\tiframeDocument.documentElement.style.setProperty(\n\t\t\t\t'--wp-block-editor-iframe-zoom-out-inner-height',\n\t\t\t\t`${ containerHeight }px`\n\t\t\t);\n\n\t\t\tiframeDocument.documentElement.style.setProperty(\n\t\t\t\t'--wp-block-editor-iframe-zoom-out-container-width',\n\t\t\t\t`${ containerWidth }px`\n\t\t\t);\n\t\t\tiframeDocument.documentElement.style.setProperty(\n\t\t\t\t'--wp-block-editor-iframe-zoom-out-scale-container-width',\n\t\t\t\t`${ scaleContainerWidth }px`\n\t\t\t);\n\t\t}\n\n\t\t/**\n\t\t * Handle the zoom out animation:\n\t\t *\n\t\t * - Get the current scrollTop position.\n\t\t * - Calculate where the same scroll position is after scaling.\n\t\t * - Apply fixed positioning to the canvas with a transform offset\n\t\t *   to keep the canvas centered.\n\t\t * - Animate the scale and padding to the new scale and frame size.\n\t\t * - After the animation is complete, remove the fixed positioning\n\t\t *   and set the scroll position that keeps everything centered.\n\t\t */\n\t\tif ( startAnimationRef.current ) {\n\t\t\t// Don't allow a new transition to start again unless it was started by the zoom out mode changing.\n\t\t\tstartAnimationRef.current = false;\n\n\t\t\t/**\n\t\t\t * If we already have an animation running, reverse it.\n\t\t\t */\n\t\t\tif ( animationRef.current ) {\n\t\t\t\tanimationRef.current.reverse();\n\t\t\t\t// Swap the transition to/from refs so that we set the correct values when\n\t\t\t\t// finishZoomOutAnimation runs.\n\t\t\t\tconst tempTransitionFrom = transitionFromRef.current;\n\t\t\t\tconst tempTransitionTo = transitionToRef.current;\n\t\t\t\ttransitionFromRef.current = tempTransitionTo;\n\t\t\t\ttransitionToRef.current = tempTransitionFrom;\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * Start a new zoom animation.\n\t\t\t\t */\n\n\t\t\t\t// We can't trust the set value from contentHeight, as it was measured\n\t\t\t\t// before the zoom out mode was changed. After zoom out mode is changed,\n\t\t\t\t// appenders may appear or disappear, so we need to get the height from\n\t\t\t\t// the iframe at this point when we're about to animate the zoom out.\n\t\t\t\t// The iframe scrollTop, scrollHeight, and clientHeight will all be\n\t\t\t\t// the most accurate.\n\t\t\t\ttransitionFromRef.current.scrollTop =\n\t\t\t\t\tiframeDocument.documentElement.scrollTop;\n\t\t\t\ttransitionFromRef.current.scrollHeight =\n\t\t\t\t\tiframeDocument.documentElement.scrollHeight;\n\t\t\t\t// Use containerHeight, as it's the previous container height before the zoom out animation starts.\n\t\t\t\ttransitionFromRef.current.containerHeight = containerHeight;\n\n\t\t\t\ttransitionToRef.current = {\n\t\t\t\t\tscaleValue,\n\t\t\t\t\tframeSize,\n\t\t\t\t\tcontainerHeight:\n\t\t\t\t\t\tiframeDocument.documentElement.clientHeight, // use clientHeight to get the actual height of the new container after zoom state changes have rendered, as it will be the most up-to-date.\n\t\t\t\t};\n\n\t\t\t\ttransitionToRef.current.scrollHeight = computeScrollHeightNext(\n\t\t\t\t\ttransitionFromRef.current,\n\t\t\t\t\ttransitionToRef.current\n\t\t\t\t);\n\t\t\t\ttransitionToRef.current.scrollTop = computeScrollTopNext(\n\t\t\t\t\ttransitionFromRef.current,\n\t\t\t\t\ttransitionToRef.current\n\t\t\t\t);\n\n\t\t\t\tanimationRef.current = startZoomOutAnimation();\n\n\t\t\t\t// If the user prefers reduced motion, finish the animation immediately and set the final state.\n\t\t\t\tif ( prefersReducedMotion ) {\n\t\t\t\t\tfinishZoomOutAnimation();\n\t\t\t\t} else {\n\t\t\t\t\tanimationRef.current.onfinish = finishZoomOutAnimation;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [\n\t\tstartZoomOutAnimation,\n\t\tfinishZoomOutAnimation,\n\t\tprefersReducedMotion,\n\t\tisAutoScaled,\n\t\tscaleValue,\n\t\tframeSize,\n\t\tiframeDocument,\n\t\tcontentHeight,\n\t\tcontainerWidth,\n\t\tcontainerHeight,\n\t\tmaxContainerWidth,\n\t\tscaleContainerWidth,\n\t] );\n\n\treturn {\n\t\tisZoomedOut,\n\t\tscaleContainerWidth,\n\t\tcontentResizeListener,\n\t\tcontainerResizeListener,\n\t};\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tcreatePortal,\n\tforwardRef,\n\tuseMemo,\n\tuseEffect,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { useMergeRefs, useRefEffect, useDisabled } from '@wordpress/compose';\nimport { __experimentalStyleProvider as StyleProvider } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useBlockSelectionClearer } from '../block-selection-clearer';\nimport { useWritingFlow } from '../writing-flow';\nimport { getCompatibilityStyles } from './get-compatibility-styles';\nimport { useScaleCanvas } from './use-scale-canvas';\nimport { store as blockEditorStore } from '../../store';\n\nfunction bubbleEvent( event, Constructor, frame ) {\n\tconst init = {};\n\n\tfor ( const key in event ) {\n\t\tinit[ key ] = event[ key ];\n\t}\n\n\t// Check if the event is a MouseEvent generated within the iframe.\n\t// If so, adjust the coordinates to be relative to the position of\n\t// the iframe. This ensures that components such as Draggable\n\t// receive coordinates relative to the window, instead of relative\n\t// to the iframe. Without this, the Draggable event handler would\n\t// result in components \"jumping\" position as soon as the user\n\t// drags over the iframe.\n\tif ( event instanceof frame.contentDocument.defaultView.MouseEvent ) {\n\t\tconst rect = frame.getBoundingClientRect();\n\t\tinit.clientX += rect.left;\n\t\tinit.clientY += rect.top;\n\t}\n\n\tconst newEvent = new Constructor( event.type, init );\n\tif ( init.defaultPrevented ) {\n\t\tnewEvent.preventDefault();\n\t}\n\tconst cancelled = ! frame.dispatchEvent( newEvent );\n\n\tif ( cancelled ) {\n\t\tevent.preventDefault();\n\t}\n}\n\n/**\n * Bubbles some event types (keydown, keypress, and dragover) to parent document\n * document to ensure that the keyboard shortcuts and drag and drop work.\n *\n * Ideally, we should remove event bubbling in the future. Keyboard shortcuts\n * should be context dependent, e.g. actions on blocks like Cmd+A should not\n * work globally outside the block editor.\n *\n * @param {Document} iframeDocument Document to attach listeners to.\n */\nfunction useBubbleEvents( iframeDocument ) {\n\treturn useRefEffect( () => {\n\t\tconst { defaultView } = iframeDocument;\n\t\tif ( ! defaultView ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { frameElement } = defaultView;\n\t\tconst html = iframeDocument.documentElement;\n\t\tconst eventTypes = [ 'dragover', 'mousemove' ];\n\t\tconst handlers = {};\n\t\tfor ( const name of eventTypes ) {\n\t\t\thandlers[ name ] = ( event ) => {\n\t\t\t\tconst prototype = Object.getPrototypeOf( event );\n\t\t\t\tconst constructorName = prototype.constructor.name;\n\t\t\t\tconst Constructor = window[ constructorName ];\n\t\t\t\tbubbleEvent( event, Constructor, frameElement );\n\t\t\t};\n\t\t\thtml.addEventListener( name, handlers[ name ] );\n\t\t}\n\n\t\treturn () => {\n\t\t\tfor ( const name of eventTypes ) {\n\t\t\t\thtml.removeEventListener( name, handlers[ name ] );\n\t\t\t}\n\t\t};\n\t} );\n}\n\nfunction Iframe( {\n\tcontentRef,\n\tchildren,\n\ttabIndex = 0,\n\tscale = 1,\n\tframeSize = 0,\n\treadonly,\n\tforwardedRef: ref,\n\ttitle = __( 'Editor canvas' ),\n\t...props\n} ) {\n\tconst { resolvedAssets, isPreviewMode } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\tconst settings = getSettings();\n\t\treturn {\n\t\t\tresolvedAssets: settings.__unstableResolvedAssets,\n\t\t\tisPreviewMode: settings.isPreviewMode,\n\t\t};\n\t}, [] );\n\tconst { styles = '', scripts = '' } = resolvedAssets;\n\t/** @type {[Document, import('react').Dispatch<Document>]} */\n\tconst [ iframeDocument, setIframeDocument ] = useState();\n\tconst [ bodyClasses, setBodyClasses ] = useState( [] );\n\tconst clearerRef = useBlockSelectionClearer();\n\tconst [ before, writingFlowRef, after ] = useWritingFlow();\n\n\tconst setRef = useRefEffect( ( node ) => {\n\t\tnode._load = () => {\n\t\t\tsetIframeDocument( node.contentDocument );\n\t\t};\n\t\tlet iFrameDocument;\n\t\t// Prevent the default browser action for files dropped outside of dropzones.\n\t\tfunction preventFileDropDefault( event ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t\t// Prevent clicks on link fragments from navigating away. Note that links\n\t\t// inside `contenteditable` are already disabled by the browser, so\n\t\t// this is for links in blocks outside of `contenteditable`.\n\t\tfunction interceptLinkClicks( event ) {\n\t\t\tif (\n\t\t\t\tevent.target.tagName === 'A' &&\n\t\t\t\tevent.target.getAttribute( 'href' )?.startsWith( '#' )\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t// Manually handle link fragment navigation within the iframe. The iframe's\n\t\t\t\t// location is a blob URL, which can't be used to resolve relative links like\n\t\t\t\t// `#hash`. The relative link would be resolved against the iframe's base URL\n\t\t\t\t// or the parent frame's URL, causing the iframe to navigate to a completely\n\t\t\t\t// different page. Setting the `location.hash` works because it really sets the\n\t\t\t\t// blob URL's hash.\n\t\t\t\t//\n\t\t\t\t// Links with fragments are used for example with footnotes. Clicking on these\n\t\t\t\t// links will scroll smoothly to the anchors in the editor canvas.\n\t\t\t\tiFrameDocument.defaultView.location.hash = event.target\n\t\t\t\t\t.getAttribute( 'href' )\n\t\t\t\t\t.slice( 1 );\n\t\t\t}\n\t\t}\n\n\t\tconst { ownerDocument } = node;\n\n\t\t// Ideally ALL classes that are added through get_body_class should\n\t\t// be added in the editor too, which we'll somehow have to get from\n\t\t// the server in the future (which will run the PHP filters).\n\t\tsetBodyClasses(\n\t\t\tArray.from( ownerDocument.body.classList ).filter(\n\t\t\t\t( name ) =>\n\t\t\t\t\tname.startsWith( 'admin-color-' ) ||\n\t\t\t\t\tname.startsWith( 'post-type-' ) ||\n\t\t\t\t\tname === 'wp-embed-responsive'\n\t\t\t)\n\t\t);\n\n\t\tfunction onLoad() {\n\t\t\tconst { contentDocument } = node;\n\t\t\tconst { documentElement } = contentDocument;\n\t\t\tiFrameDocument = contentDocument;\n\n\t\t\tdocumentElement.classList.add( 'block-editor-iframe__html' );\n\n\t\t\tclearerRef( documentElement );\n\n\t\t\tcontentDocument.dir = ownerDocument.dir;\n\n\t\t\tfor ( const compatStyle of getCompatibilityStyles() ) {\n\t\t\t\tif ( contentDocument.getElementById( compatStyle.id ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcontentDocument.head.appendChild(\n\t\t\t\t\tcompatStyle.cloneNode( true )\n\t\t\t\t);\n\n\t\t\t\tif ( ! isPreviewMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`${ compatStyle.id } was added to the iframe incorrectly. Please use block.json or enqueue_block_assets to add styles to the iframe.`,\n\t\t\t\t\t\tcompatStyle\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tiFrameDocument.addEventListener(\n\t\t\t\t'dragover',\n\t\t\t\tpreventFileDropDefault,\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tiFrameDocument.addEventListener(\n\t\t\t\t'drop',\n\t\t\t\tpreventFileDropDefault,\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tiFrameDocument.addEventListener( 'click', interceptLinkClicks );\n\t\t}\n\n\t\tnode.addEventListener( 'load', onLoad );\n\n\t\treturn () => {\n\t\t\tdelete node._load;\n\t\t\tnode.removeEventListener( 'load', onLoad );\n\t\t\tiFrameDocument?.removeEventListener(\n\t\t\t\t'dragover',\n\t\t\t\tpreventFileDropDefault\n\t\t\t);\n\t\t\tiFrameDocument?.removeEventListener(\n\t\t\t\t'drop',\n\t\t\t\tpreventFileDropDefault\n\t\t\t);\n\t\t\tiFrameDocument?.removeEventListener( 'click', interceptLinkClicks );\n\t\t};\n\t}, [] );\n\n\tconst {\n\t\tcontentResizeListener,\n\t\tcontainerResizeListener,\n\t\tisZoomedOut,\n\t\tscaleContainerWidth,\n\t} = useScaleCanvas( {\n\t\tscale,\n\t\tframeSize: parseInt( frameSize ),\n\t\tiframeDocument,\n\t} );\n\n\tconst disabledRef = useDisabled( { isDisabled: ! readonly } );\n\tconst bodyRef = useMergeRefs( [\n\t\tuseBubbleEvents( iframeDocument ),\n\t\tcontentRef,\n\t\tclearerRef,\n\t\twritingFlowRef,\n\t\tdisabledRef,\n\t] );\n\n\t// Correct doctype is required to enable rendering in standards\n\t// mode. Also preload the styles to avoid a flash of unstyled\n\t// content.\n\tconst html = `<!doctype html>\n<html>\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<base href=\"${ window.location.origin }\">\n\t\t<script>window.frameElement._load()</script>\n\t\t<style>\n\t\t\thtml{\n\t\t\t\theight: auto !important;\n\t\t\t\tmin-height: 100%;\n\t\t\t}\n\t\t\t/* Lowest specificity to not override global styles */\n\t\t\t:where(body) {\n\t\t\t\tmargin: 0;\n\t\t\t\t/* Default background color in case zoom out mode background\n\t\t\t\tcolors the html element */\n\t\t\t\tbackground-color: white;\n\t\t\t}\n\t\t</style>\n\t\t${ styles }\n\t\t${ scripts }\n\t</head>\n\t<body>\n\t\t<script>document.currentScript.parentElement.remove()</script>\n\t</body>\n</html>`;\n\n\tconst [ src, cleanup ] = useMemo( () => {\n\t\tconst _src = URL.createObjectURL(\n\t\t\tnew window.Blob( [ html ], { type: 'text/html' } )\n\t\t);\n\t\treturn [ _src, () => URL.revokeObjectURL( _src ) ];\n\t}, [ html ] );\n\n\tuseEffect( () => cleanup, [ cleanup ] );\n\n\t// Make sure to not render the before and after focusable div elements in view\n\t// mode. They're only needed to capture focus in edit mode.\n\tconst shouldRenderFocusCaptureElements = tabIndex >= 0 && ! isPreviewMode;\n\n\tconst iframe = (\n\t\t<>\n\t\t\t{ shouldRenderFocusCaptureElements && before }\n\t\t\t{ /* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */ }\n\t\t\t<iframe\n\t\t\t\t{ ...props }\n\t\t\t\tstyle={ {\n\t\t\t\t\t...props.style,\n\t\t\t\t\theight: props.style?.height,\n\t\t\t\t\tborder: 0,\n\t\t\t\t} }\n\t\t\t\tref={ useMergeRefs( [ ref, setRef ] ) }\n\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\t// Correct doctype is required to enable rendering in standards\n\t\t\t\t// mode. Also preload the styles to avoid a flash of unstyled\n\t\t\t\t// content.\n\t\t\t\tsrc={ src }\n\t\t\t\ttitle={ title }\n\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\tif ( props.onKeyDown ) {\n\t\t\t\t\t\tprops.onKeyDown( event );\n\t\t\t\t\t}\n\t\t\t\t\t// If the event originates from inside the iframe, it means\n\t\t\t\t\t// it bubbled through the portal, but only with React\n\t\t\t\t\t// events. We need to to bubble native events as well,\n\t\t\t\t\t// though by doing so we also trigger another React event,\n\t\t\t\t\t// so we need to stop the propagation of this event to avoid\n\t\t\t\t\t// duplication.\n\t\t\t\t\tif (\n\t\t\t\t\t\tevent.currentTarget.ownerDocument !==\n\t\t\t\t\t\tevent.target.ownerDocument\n\t\t\t\t\t) {\n\t\t\t\t\t\t// We should only stop propagation of the React event,\n\t\t\t\t\t\t// the native event should further bubble inside the\n\t\t\t\t\t\t// iframe to the document and window.\n\t\t\t\t\t\t// Alternatively, we could consider redispatching the\n\t\t\t\t\t\t// native event in the iframe.\n\t\t\t\t\t\tconst { stopPropagation } = event.nativeEvent;\n\t\t\t\t\t\tevent.nativeEvent.stopPropagation = () => {};\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\tevent.nativeEvent.stopPropagation = stopPropagation;\n\t\t\t\t\t\tbubbleEvent(\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\twindow.KeyboardEvent,\n\t\t\t\t\t\t\tevent.currentTarget\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ iframeDocument &&\n\t\t\t\t\tcreatePortal(\n\t\t\t\t\t\t// We want to prevent React events from bubbling through the iframe\n\t\t\t\t\t\t// we bubble these manually.\n\t\t\t\t\t\t/* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */\n\t\t\t\t\t\t<body\n\t\t\t\t\t\t\tref={ bodyRef }\n\t\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t\t'block-editor-iframe__body',\n\t\t\t\t\t\t\t\t'editor-styles-wrapper',\n\t\t\t\t\t\t\t\t...bodyClasses\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ contentResizeListener }\n\t\t\t\t\t\t\t<StyleProvider document={ iframeDocument }>\n\t\t\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t\t</StyleProvider>\n\t\t\t\t\t\t</body>,\n\t\t\t\t\t\tiframeDocument.documentElement\n\t\t\t\t\t) }\n\t\t\t</iframe>\n\t\t\t{ shouldRenderFocusCaptureElements && after }\n\t\t</>\n\t);\n\n\treturn (\n\t\t<div className=\"block-editor-iframe__container\">\n\t\t\t{ containerResizeListener }\n\t\t\t<div\n\t\t\t\tclassName={ clsx(\n\t\t\t\t\t'block-editor-iframe__scale-container',\n\t\t\t\t\tisZoomedOut && 'is-zoomed-out'\n\t\t\t\t) }\n\t\t\t\tstyle={ {\n\t\t\t\t\t'--wp-block-editor-iframe-zoom-out-scale-container-width':\n\t\t\t\t\t\tisZoomedOut && `${ scaleContainerWidth }px`,\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ iframe }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction IframeIfReady( props, ref ) {\n\tconst isInitialised = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getSettings().__internalIsInitialized,\n\t\t[]\n\t);\n\n\t// We shouldn't render the iframe until the editor settings are initialised.\n\t// The initial settings are needed to get the styles for the srcDoc, which\n\t// cannot be changed after the iframe is mounted. srcDoc is used to to set\n\t// the initial iframe HTML, which is required to avoid a flash of unstyled\n\t// content.\n\tif ( ! isInitialised ) {\n\t\treturn null;\n\t}\n\n\treturn <Iframe { ...props } forwardedRef={ ref } />;\n}\n\nexport default forwardRef( IframeIfReady );\n","const TOKENS = {\n    attribute: /\\[\\s*(?:(?<namespace>\\*|[-\\w\\P{ASCII}]*)\\|)?(?<name>[-\\w\\P{ASCII}]+)\\s*(?:(?<operator>\\W?=)\\s*(?<value>.+?)\\s*(\\s(?<caseSensitive>[iIsS]))?\\s*)?\\]/gu,\n    id: /#(?<name>[-\\w\\P{ASCII}]+)/gu,\n    class: /\\.(?<name>[-\\w\\P{ASCII}]+)/gu,\n    comma: /\\s*,\\s*/g,\n    combinator: /\\s*[\\s>+~]\\s*/g,\n    'pseudo-element': /::(?<name>[-\\w\\P{ASCII}]+)(?:\\((?<argument>*)\\))?/gu,\n    'pseudo-class': /:(?<name>[-\\w\\P{ASCII}]+)(?:\\((?<argument>*)\\))?/gu,\n    universal: /(?:(?<namespace>\\*|[-\\w\\P{ASCII}]*)\\|)?\\*/gu,\n    type: /(?:(?<namespace>\\*|[-\\w\\P{ASCII}]*)\\|)?(?<name>[-\\w\\P{ASCII}]+)/gu, // this must be last\n};\nconst TRIM_TOKENS = new Set(['combinator', 'comma']);\nconst RECURSIVE_PSEUDO_CLASSES = new Set([\n    'not',\n    'is',\n    'where',\n    'has',\n    'matches',\n    '-moz-any',\n    '-webkit-any',\n    'nth-child',\n    'nth-last-child',\n]);\nconst nthChildRegExp = /(?<index>[\\dn+-]+)\\s+of\\s+(?<subtree>.+)/;\nconst RECURSIVE_PSEUDO_CLASSES_ARGS = {\n    'nth-child': nthChildRegExp,\n    'nth-last-child': nthChildRegExp,\n};\nconst getArgumentPatternByType = (type) => {\n    switch (type) {\n        case 'pseudo-element':\n        case 'pseudo-class':\n            return new RegExp(TOKENS[type].source.replace('(?<argument>*)', '(?<argument>.*)'), 'gu');\n        default:\n            return TOKENS[type];\n    }\n};\nfunction gobbleParens(text, offset) {\n    let nesting = 0;\n    let result = '';\n    for (; offset < text.length; offset++) {\n        const char = text[offset];\n        switch (char) {\n            case '(':\n                ++nesting;\n                break;\n            case ')':\n                --nesting;\n                break;\n        }\n        result += char;\n        if (nesting === 0) {\n            return result;\n        }\n    }\n    return result;\n}\nfunction tokenizeBy(text, grammar = TOKENS) {\n    if (!text) {\n        return [];\n    }\n    const tokens = [text];\n    for (const [type, pattern] of Object.entries(grammar)) {\n        for (let i = 0; i < tokens.length; i++) {\n            const token = tokens[i];\n            if (typeof token !== 'string') {\n                continue;\n            }\n            pattern.lastIndex = 0;\n            const match = pattern.exec(token);\n            if (!match) {\n                continue;\n            }\n            const from = match.index - 1;\n            const args = [];\n            const content = match[0];\n            const before = token.slice(0, from + 1);\n            if (before) {\n                args.push(before);\n            }\n            args.push({\n                ...match.groups,\n                type,\n                content,\n            });\n            const after = token.slice(from + content.length + 1);\n            if (after) {\n                args.push(after);\n            }\n            tokens.splice(i, 1, ...args);\n        }\n    }\n    let offset = 0;\n    for (const token of tokens) {\n        switch (typeof token) {\n            case 'string':\n                throw new Error(`Unexpected sequence ${token} found at index ${offset}`);\n            case 'object':\n                offset += token.content.length;\n                token.pos = [offset - token.content.length, offset];\n                if (TRIM_TOKENS.has(token.type)) {\n                    token.content = token.content.trim() || ' ';\n                }\n                break;\n        }\n    }\n    return tokens;\n}\nconst STRING_PATTERN = /(['\"])([^\\\\\\n]+?)\\1/g;\nconst ESCAPE_PATTERN = /\\\\./g;\nfunction tokenize(selector, grammar = TOKENS) {\n    // Prevent leading/trailing whitespaces from being interpreted as combinators\n    selector = selector.trim();\n    if (selector === '') {\n        return [];\n    }\n    const replacements = [];\n    // Replace escapes with placeholders.\n    selector = selector.replace(ESCAPE_PATTERN, (value, offset) => {\n        replacements.push({ value, offset });\n        return '\\uE000'.repeat(value.length);\n    });\n    // Replace strings with placeholders.\n    selector = selector.replace(STRING_PATTERN, (value, quote, content, offset) => {\n        replacements.push({ value, offset });\n        return `${quote}${'\\uE001'.repeat(content.length)}${quote}`;\n    });\n    // Replace parentheses with placeholders.\n    {\n        let pos = 0;\n        let offset;\n        while ((offset = selector.indexOf('(', pos)) > -1) {\n            const value = gobbleParens(selector, offset);\n            replacements.push({ value, offset });\n            selector = `${selector.substring(0, offset)}(${''.repeat(value.length - 2)})${selector.substring(offset + value.length)}`;\n            pos = offset + value.length;\n        }\n    }\n    // Now we have no nested structures and we can parse with regexes\n    const tokens = tokenizeBy(selector, grammar);\n    // Replace placeholders in reverse order.\n    const changedTokens = new Set();\n    for (const replacement of replacements.reverse()) {\n        for (const token of tokens) {\n            const { offset, value } = replacement;\n            if (!(token.pos[0] <= offset &&\n                offset + value.length <= token.pos[1])) {\n                continue;\n            }\n            const { content } = token;\n            const tokenOffset = offset - token.pos[0];\n            token.content =\n                content.slice(0, tokenOffset) +\n                    value +\n                    content.slice(tokenOffset + value.length);\n            if (token.content !== content) {\n                changedTokens.add(token);\n            }\n        }\n    }\n    // Update changed tokens.\n    for (const token of changedTokens) {\n        const pattern = getArgumentPatternByType(token.type);\n        if (!pattern) {\n            throw new Error(`Unknown token type: ${token.type}`);\n        }\n        pattern.lastIndex = 0;\n        const match = pattern.exec(token.content);\n        if (!match) {\n            throw new Error(`Unable to parse content for ${token.type}: ${token.content}`);\n        }\n        Object.assign(token, match.groups);\n    }\n    return tokens;\n}\n/**\n *  Convert a flat list of tokens into a tree of complex & compound selectors\n */\nfunction nestTokens(tokens, { list = true } = {}) {\n    if (list && tokens.find((t) => t.type === 'comma')) {\n        const selectors = [];\n        const temp = [];\n        for (let i = 0; i < tokens.length; i++) {\n            if (tokens[i].type === 'comma') {\n                if (temp.length === 0) {\n                    throw new Error('Incorrect comma at ' + i);\n                }\n                selectors.push(nestTokens(temp, { list: false }));\n                temp.length = 0;\n            }\n            else {\n                temp.push(tokens[i]);\n            }\n        }\n        if (temp.length === 0) {\n            throw new Error('Trailing comma');\n        }\n        else {\n            selectors.push(nestTokens(temp, { list: false }));\n        }\n        return { type: 'list', list: selectors };\n    }\n    for (let i = tokens.length - 1; i >= 0; i--) {\n        let token = tokens[i];\n        if (token.type === 'combinator') {\n            let left = tokens.slice(0, i);\n            let right = tokens.slice(i + 1);\n            return {\n                type: 'complex',\n                combinator: token.content,\n                left: nestTokens(left),\n                right: nestTokens(right),\n            };\n        }\n    }\n    switch (tokens.length) {\n        case 0:\n            throw new Error('Could not build AST.');\n        case 1:\n            // If we're here, there are no combinators, so it's just a list.\n            return tokens[0];\n        default:\n            return {\n                type: 'compound',\n                list: [...tokens], // clone to avoid pointers messing up the AST\n            };\n    }\n}\n/**\n * Traverse an AST in depth-first order\n */\nfunction* flatten(node, \n/**\n * @internal\n */\nparent) {\n    switch (node.type) {\n        case 'list':\n            for (let child of node.list) {\n                yield* flatten(child, node);\n            }\n            break;\n        case 'complex':\n            yield* flatten(node.left, node);\n            yield* flatten(node.right, node);\n            break;\n        case 'compound':\n            yield* node.list.map((token) => [token, node]);\n            break;\n        default:\n            yield [node, parent];\n    }\n}\n/**\n * Traverse an AST (or part thereof), in depth-first order\n */\nfunction walk(node, visit, \n/**\n * @internal\n */\nparent) {\n    if (!node) {\n        return;\n    }\n    for (const [token, ast] of flatten(node, parent)) {\n        visit(token, ast);\n    }\n}\n/**\n * Parse a CSS selector\n *\n * @param selector - The selector to parse\n * @param options.recursive - Whether to parse the arguments of pseudo-classes like :is(), :has() etc. Defaults to true.\n * @param options.list - Whether this can be a selector list (A, B, C etc). Defaults to true.\n */\nfunction parse(selector, { recursive = true, list = true } = {}) {\n    const tokens = tokenize(selector);\n    if (!tokens) {\n        return;\n    }\n    const ast = nestTokens(tokens, { list });\n    if (!recursive) {\n        return ast;\n    }\n    for (const [token] of flatten(ast)) {\n        if (token.type !== 'pseudo-class' || !token.argument) {\n            continue;\n        }\n        if (!RECURSIVE_PSEUDO_CLASSES.has(token.name)) {\n            continue;\n        }\n        let argument = token.argument;\n        const childArg = RECURSIVE_PSEUDO_CLASSES_ARGS[token.name];\n        if (childArg) {\n            const match = childArg.exec(argument);\n            if (!match) {\n                continue;\n            }\n            Object.assign(token, match.groups);\n            argument = match.groups['subtree'];\n        }\n        if (!argument) {\n            continue;\n        }\n        Object.assign(token, {\n            subtree: parse(argument, {\n                recursive: true,\n                list: true,\n            }),\n        });\n    }\n    return ast;\n}\n/**\n * Converts the given list or (sub)tree to a string.\n */\nfunction stringify(listOrNode) {\n    let tokens;\n    if (Array.isArray(listOrNode)) {\n        tokens = listOrNode;\n    }\n    else {\n        tokens = [...flatten(listOrNode)].map(([token]) => token);\n    }\n    return tokens.map(token => token.content).join('');\n}\n/**\n * To convert the specificity array to a number\n */\nfunction specificityToNumber(specificity, base) {\n    base = base || Math.max(...specificity) + 1;\n    return (specificity[0] * (base << 1) + specificity[1] * base + specificity[2]);\n}\n/**\n * Calculate specificity of a selector.\n *\n * If the selector is a list, the max specificity is returned.\n */\nfunction specificity(selector) {\n    let ast = selector;\n    if (typeof ast === 'string') {\n        ast = parse(ast, { recursive: true });\n    }\n    if (!ast) {\n        return [];\n    }\n    if (ast.type === 'list' && 'list' in ast) {\n        let base = 10;\n        const specificities = ast.list.map((ast) => {\n            const sp = specificity(ast);\n            base = Math.max(base, ...specificity(ast));\n            return sp;\n        });\n        const numbers = specificities.map((ast) => specificityToNumber(ast, base));\n        return specificities[numbers.indexOf(Math.max(...numbers))];\n    }\n    const ret = [0, 0, 0];\n    for (const [token] of flatten(ast)) {\n        switch (token.type) {\n            case 'id':\n                ret[0]++;\n                break;\n            case 'class':\n            case 'attribute':\n                ret[1]++;\n                break;\n            case 'pseudo-element':\n            case 'type':\n                ret[2]++;\n                break;\n            case 'pseudo-class':\n                if (token.name === 'where') {\n                    break;\n                }\n                if (!RECURSIVE_PSEUDO_CLASSES.has(token.name) ||\n                    !token.subtree) {\n                    ret[1]++;\n                    break;\n                }\n                const sub = specificity(token.subtree);\n                sub.forEach((s, i) => (ret[i] += s));\n                // :nth-child() & :nth-last-child() add (0, 1, 0) to the specificity of their most complex selector\n                if (token.name === 'nth-child' ||\n                    token.name === 'nth-last-child') {\n                    ret[1]++;\n                }\n        }\n    }\n    return ret;\n}\n\nexport { RECURSIVE_PSEUDO_CLASSES, RECURSIVE_PSEUDO_CLASSES_ARGS, TOKENS, TRIM_TOKENS, flatten, gobbleParens, parse, specificity, specificityToNumber, stringify, tokenize, tokenizeBy, walk };\n","/**\n * External dependencies\n */\nimport * as parsel from 'parsel-js';\nimport Processor from 'postcss/lib/processor';\nimport CssSyntaxError from 'postcss/lib/css-syntax-error';\nimport prefixSelector from 'postcss-prefix-selector';\nimport rebaseUrl from 'postcss-urlrebase';\n\nconst cacheByWrapperSelector = new Map();\n\nconst ROOT_SELECTOR_TOKENS = [\n\t{ type: 'type', content: 'body' },\n\t{ type: 'type', content: 'html' },\n\t{ type: 'pseudo-class', content: ':root' },\n\t{ type: 'pseudo-class', content: ':where(body)' },\n\t{ type: 'pseudo-class', content: ':where(:root)' },\n\t{ type: 'pseudo-class', content: ':where(html)' },\n];\n\n/**\n * Prefixes root selectors in a way that ensures consistent specificity.\n * This requires special handling, since prefixing a classname before\n * html, body, or :root will generally result in an invalid selector.\n *\n * Some libraries will simply replace the root selector with the prefix\n * instead, but this results in inconsistent specificity.\n *\n * This function instead inserts the prefix after the root tags but before\n * any other part of the selector. This results in consistent specificity:\n * - If a `:where()` selector is used for the prefix, all selectors output\n *   by `transformStyles` will have no specificity increase.\n * - If a classname, id, or something else is used as the prefix, all selectors\n *   will have the same specificity bump when transformed.\n *\n * @param {string} prefix   The prefix.\n * @param {string} selector The selector.\n *\n * @return {string} The prefixed root selector.\n */\nfunction prefixRootSelector( prefix, selector ) {\n\t// Use a tokenizer, since regular expressions are unreliable.\n\tconst tokenized = parsel.tokenize( selector );\n\n\t// Find the last token that contains a root selector by walking back\n\t// through the tokens.\n\tconst lastRootIndex = tokenized.findLastIndex( ( { content, type } ) => {\n\t\treturn ROOT_SELECTOR_TOKENS.some(\n\t\t\t( rootSelector ) =>\n\t\t\t\tcontent === rootSelector.content && type === rootSelector.type\n\t\t);\n\t} );\n\n\t// Walk forwards to find the combinator after the last root.\n\t// This is where the root ends and the rest of the selector begins,\n\t// and the index to insert before.\n\t// Doing it this way takes into account that a root selector like\n\t// 'body' may have additional id/class/pseudo-class/attribute-selector\n\t// parts chained to it, which is difficult to quantify using a regex.\n\tlet insertionPoint = -1;\n\tfor ( let i = lastRootIndex + 1; i < tokenized.length; i++ ) {\n\t\tif ( tokenized[ i ].type === 'combinator' ) {\n\t\t\tinsertionPoint = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Tokenize and insert the prefix with a ' ' combinator before it.\n\tconst tokenizedPrefix = parsel.tokenize( prefix );\n\ttokenized.splice(\n\t\t// Insert at the insertion point, or the end.\n\t\tinsertionPoint === -1 ? tokenized.length : insertionPoint,\n\t\t0,\n\t\t{\n\t\t\ttype: 'combinator',\n\t\t\tcontent: ' ',\n\t\t},\n\t\t...tokenizedPrefix\n\t);\n\n\treturn parsel.stringify( tokenized );\n}\n\nfunction transformStyle(\n\t{ css, ignoredSelectors = [], baseURL },\n\twrapperSelector = '',\n\ttransformOptions\n) {\n\t// When there is no wrapper selector and no base URL, there is no need\n\t// to transform the CSS. This is most cases because in the default\n\t// iframed editor, no wrapping is needed, and not many styles\n\t// provide a base URL.\n\tif ( ! wrapperSelector && ! baseURL ) {\n\t\treturn css;\n\t}\n\n\ttry {\n\t\tconst excludedSelectors = [\n\t\t\t...ignoredSelectors,\n\t\t\t...( transformOptions?.ignoredSelectors ?? [] ),\n\t\t\twrapperSelector,\n\t\t];\n\n\t\treturn new Processor(\n\t\t\t[\n\t\t\t\twrapperSelector &&\n\t\t\t\t\tprefixSelector( {\n\t\t\t\t\t\tprefix: wrapperSelector,\n\t\t\t\t\t\ttransform( prefix, selector, prefixedSelector ) {\n\t\t\t\t\t\t\t// For backwards compatibility, don't use the `exclude` option\n\t\t\t\t\t\t\t// of postcss-prefix-selector, instead handle it here to match\n\t\t\t\t\t\t\t// the behavior of the old library (postcss-prefix-wrap) that\n\t\t\t\t\t\t\t// `transformStyle` previously used.\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\texcludedSelectors.some( ( excludedSelector ) =>\n\t\t\t\t\t\t\t\t\texcludedSelector instanceof RegExp\n\t\t\t\t\t\t\t\t\t\t? selector.match( excludedSelector )\n\t\t\t\t\t\t\t\t\t\t: selector.includes( excludedSelector )\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn selector;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst hasRootSelector = ROOT_SELECTOR_TOKENS.some(\n\t\t\t\t\t\t\t\t( rootSelector ) =>\n\t\t\t\t\t\t\t\t\tselector.startsWith( rootSelector.content )\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Reorganize root selectors such that the root part comes before the prefix,\n\t\t\t\t\t\t\t// but the prefix still comes before the remaining part of the selector.\n\t\t\t\t\t\t\tif ( hasRootSelector ) {\n\t\t\t\t\t\t\t\treturn prefixRootSelector( prefix, selector );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn prefixedSelector;\n\t\t\t\t\t\t},\n\t\t\t\t\t} ),\n\t\t\t\tbaseURL && rebaseUrl( { rootUrl: baseURL } ),\n\t\t\t].filter( Boolean )\n\t\t).process( css, {} ).css; // use sync PostCSS API\n\t} catch ( error ) {\n\t\tif ( error instanceof CssSyntaxError ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn(\n\t\t\t\t'wp.blockEditor.transformStyles Failed to transform CSS.',\n\t\t\t\terror.message + '\\n' + error.showSourceCode( false )\n\t\t\t);\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn(\n\t\t\t\t'wp.blockEditor.transformStyles Failed to transform CSS.',\n\t\t\t\terror\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n/**\n * @typedef {Object} EditorStyle\n * @property {string}    css              the CSS block(s), as a single string.\n * @property {?string}   baseURL          the base URL to be used as the reference when rewriting urls.\n * @property {?string[]} ignoredSelectors the selectors not to wrap.\n */\n\n/**\n * @typedef {Object} TransformOptions\n * @property {?string[]} ignoredSelectors the selectors not to wrap.\n */\n\n/**\n * Applies a series of CSS rule transforms to wrap selectors inside a given class and/or rewrite URLs depending on the parameters passed.\n *\n * @param {EditorStyle[]}    styles           CSS rules.\n * @param {string}           wrapperSelector  Wrapper selector.\n * @param {TransformOptions} transformOptions Additional options for style transformation.\n * @return {Array} converted rules.\n */\nconst transformStyles = ( styles, wrapperSelector = '', transformOptions ) => {\n\tlet cache = cacheByWrapperSelector.get( wrapperSelector );\n\tif ( ! cache ) {\n\t\tcache = new WeakMap();\n\t\tcacheByWrapperSelector.set( wrapperSelector, cache );\n\t}\n\treturn styles.map( ( style ) => {\n\t\tlet css = cache.get( style );\n\t\tif ( ! css ) {\n\t\t\tcss = transformStyle( style, wrapperSelector, transformOptions );\n\t\t\tcache.set( style, css );\n\t\t}\n\t\treturn css;\n\t} );\n};\n\nexport default transformStyles;\n","/**\n * External dependencies\n */\nimport { colord, extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\nimport a11yPlugin from 'colord/plugins/a11y';\n\n/**\n * WordPress dependencies\n */\nimport { SVG } from '@wordpress/components';\nimport { useCallback, useMemo, memo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport transformStyles from '../../utils/transform-styles';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nextend( [ namesPlugin, a11yPlugin ] );\n\nfunction useDarkThemeBodyClassName( styles, scope ) {\n\treturn useCallback(\n\t\t( node ) => {\n\t\t\tif ( ! node ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView, body } = ownerDocument;\n\t\t\tconst canvas = scope ? ownerDocument.querySelector( scope ) : body;\n\n\t\t\tlet backgroundColor;\n\n\t\t\tif ( ! canvas ) {\n\t\t\t\t// The real .editor-styles-wrapper element might not exist in the\n\t\t\t\t// DOM, so calculate the background color by creating a fake\n\t\t\t\t// wrapper.\n\t\t\t\tconst tempCanvas = ownerDocument.createElement( 'div' );\n\t\t\t\ttempCanvas.classList.add( 'editor-styles-wrapper' );\n\t\t\t\tbody.appendChild( tempCanvas );\n\n\t\t\t\tbackgroundColor = defaultView\n\t\t\t\t\t?.getComputedStyle( tempCanvas, null )\n\t\t\t\t\t.getPropertyValue( 'background-color' );\n\n\t\t\t\tbody.removeChild( tempCanvas );\n\t\t\t} else {\n\t\t\t\tbackgroundColor = defaultView\n\t\t\t\t\t?.getComputedStyle( canvas, null )\n\t\t\t\t\t.getPropertyValue( 'background-color' );\n\t\t\t}\n\t\t\tconst colordBackgroundColor = colord( backgroundColor );\n\t\t\t// If background is transparent, it should be treated as light color.\n\t\t\tif (\n\t\t\t\tcolordBackgroundColor.luminance() > 0.5 ||\n\t\t\t\tcolordBackgroundColor.alpha() === 0\n\t\t\t) {\n\t\t\t\tbody.classList.remove( 'is-dark-theme' );\n\t\t\t} else {\n\t\t\t\tbody.classList.add( 'is-dark-theme' );\n\t\t\t}\n\t\t},\n\t\t[ styles, scope ]\n\t);\n}\n\nfunction EditorStyles( { styles, scope, transformOptions } ) {\n\tconst overrides = useSelect(\n\t\t( select ) => unlock( select( blockEditorStore ) ).getStyleOverrides(),\n\t\t[]\n\t);\n\tconst [ transformedStyles, transformedSvgs ] = useMemo( () => {\n\t\tconst _styles = Object.values( styles ?? [] );\n\n\t\tfor ( const [ id, override ] of overrides ) {\n\t\t\tconst index = _styles.findIndex( ( { id: _id } ) => id === _id );\n\t\t\tconst overrideWithId = { ...override, id };\n\t\t\tif ( index === -1 ) {\n\t\t\t\t_styles.push( overrideWithId );\n\t\t\t} else {\n\t\t\t\t_styles[ index ] = overrideWithId;\n\t\t\t}\n\t\t}\n\n\t\treturn [\n\t\t\ttransformStyles(\n\t\t\t\t_styles.filter( ( style ) => style?.css ),\n\t\t\t\tscope,\n\t\t\t\ttransformOptions\n\t\t\t),\n\t\t\t_styles\n\t\t\t\t.filter( ( style ) => style.__unstableType === 'svgs' )\n\t\t\t\t.map( ( style ) => style.assets )\n\t\t\t\t.join( '' ),\n\t\t];\n\t}, [ styles, overrides, scope, transformOptions ] );\n\n\treturn (\n\t\t<>\n\t\t\t{ /* Use an empty style element to have a document reference,\n\t\t\t     but this could be any element. */ }\n\t\t\t<style\n\t\t\t\tref={ useDarkThemeBodyClassName( transformedStyles, scope ) }\n\t\t\t/>\n\t\t\t{ transformedStyles.map( ( css, index ) => (\n\t\t\t\t<style key={ index }>{ css }</style>\n\t\t\t) ) }\n\t\t\t<SVG\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 0 0\"\n\t\t\t\twidth=\"0\"\n\t\t\t\theight=\"0\"\n\t\t\t\trole=\"none\"\n\t\t\t\tstyle={ {\n\t\t\t\t\tvisibility: 'hidden',\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tleft: '-9999px',\n\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t} }\n\t\t\t\tdangerouslySetInnerHTML={ { __html: transformedSvgs } }\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nexport default memo( EditorStyles );\n","/**\n * WordPress dependencies\n */\nimport { useResizeObserver, useRefEffect } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { memo, useMemo } from '@wordpress/element';\nimport { Disabled } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockList from '../block-list';\nimport Iframe from '../iframe';\nimport EditorStyles from '../editor-styles';\nimport { store } from '../../store';\n\n// This is used to avoid rendering the block list if the sizes change.\nconst MemoizedBlockList = memo( BlockList );\n\nconst MAX_HEIGHT = 2000;\nconst EMPTY_ADDITIONAL_STYLES = [];\n\nfunction ScaledBlockPreview( {\n\tviewportWidth,\n\tcontainerWidth,\n\tminHeight,\n\tadditionalStyles = EMPTY_ADDITIONAL_STYLES,\n} ) {\n\tif ( ! viewportWidth ) {\n\t\tviewportWidth = containerWidth;\n\t}\n\n\tconst [ contentResizeListener, { height: contentHeight } ] =\n\t\tuseResizeObserver();\n\tconst { styles } = useSelect( ( select ) => {\n\t\tconst settings = select( store ).getSettings();\n\t\treturn {\n\t\t\tstyles: settings.styles,\n\t\t};\n\t}, [] );\n\n\t// Avoid scrollbars for pattern previews.\n\tconst editorStyles = useMemo( () => {\n\t\tif ( styles ) {\n\t\t\treturn [\n\t\t\t\t...styles,\n\t\t\t\t{\n\t\t\t\t\tcss: 'body{height:auto;overflow:hidden;border:none;padding:0;}',\n\t\t\t\t\t__unstableType: 'presets',\n\t\t\t\t},\n\t\t\t\t...additionalStyles,\n\t\t\t];\n\t\t}\n\n\t\treturn styles;\n\t}, [ styles, additionalStyles ] );\n\n\tconst scale = containerWidth / viewportWidth;\n\tconst aspectRatio = contentHeight\n\t\t? containerWidth / ( contentHeight * scale )\n\t\t: 0;\n\treturn (\n\t\t<Disabled\n\t\t\tclassName=\"block-editor-block-preview__content\"\n\t\t\tstyle={ {\n\t\t\t\ttransform: `scale(${ scale })`,\n\t\t\t\t// Using width + aspect-ratio instead of height here triggers browsers' native\n\t\t\t\t// handling of scrollbar's visibility. It prevents the flickering issue seen\n\t\t\t\t// in https://github.com/WordPress/gutenberg/issues/52027.\n\t\t\t\t// See https://github.com/WordPress/gutenberg/pull/52921 for more info.\n\t\t\t\taspectRatio,\n\t\t\t\tmaxHeight:\n\t\t\t\t\tcontentHeight > MAX_HEIGHT ? MAX_HEIGHT * scale : undefined,\n\t\t\t\tminHeight,\n\t\t\t} }\n\t\t>\n\t\t\t<Iframe\n\t\t\t\tcontentRef={ useRefEffect( ( bodyElement ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\townerDocument: { documentElement },\n\t\t\t\t\t} = bodyElement;\n\t\t\t\t\tdocumentElement.classList.add(\n\t\t\t\t\t\t'block-editor-block-preview__content-iframe'\n\t\t\t\t\t);\n\t\t\t\t\tdocumentElement.style.position = 'absolute';\n\t\t\t\t\tdocumentElement.style.width = '100%';\n\n\t\t\t\t\t// Necessary for contentResizeListener to work.\n\t\t\t\t\tbodyElement.style.boxSizing = 'border-box';\n\t\t\t\t\tbodyElement.style.position = 'absolute';\n\t\t\t\t\tbodyElement.style.width = '100%';\n\t\t\t\t}, [] ) }\n\t\t\t\taria-hidden\n\t\t\t\ttabIndex={ -1 }\n\t\t\t\tstyle={ {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\twidth: viewportWidth,\n\t\t\t\t\theight: contentHeight,\n\t\t\t\t\tpointerEvents: 'none',\n\t\t\t\t\t// This is a catch-all max-height for patterns.\n\t\t\t\t\t// See: https://github.com/WordPress/gutenberg/pull/38175.\n\t\t\t\t\tmaxHeight: MAX_HEIGHT,\n\t\t\t\t\tminHeight:\n\t\t\t\t\t\tscale !== 0 && scale < 1 && minHeight\n\t\t\t\t\t\t\t? minHeight / scale\n\t\t\t\t\t\t\t: minHeight,\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<EditorStyles styles={ editorStyles } />\n\t\t\t\t{ contentResizeListener }\n\t\t\t\t<MemoizedBlockList renderAppender={ false } />\n\t\t\t</Iframe>\n\t\t</Disabled>\n\t);\n}\n\nexport default function AutoBlockPreview( props ) {\n\tconst [ containerResizeListener, { width: containerWidth } ] =\n\t\tuseResizeObserver();\n\n\treturn (\n\t\t<>\n\t\t\t<div style={ { position: 'relative', width: '100%', height: 0 } }>\n\t\t\t\t{ containerResizeListener }\n\t\t\t</div>\n\t\t\t<div className=\"block-editor-block-preview__container\">\n\t\t\t\t{ !! containerWidth && (\n\t\t\t\t\t<ScaledBlockPreview\n\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\tcontainerWidth={ containerWidth }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"priorityQueue\"];","/**\n * WordPress dependencies\n */\nimport { useEffect, useState, flushSync } from '@wordpress/element';\nimport { createQueue } from '@wordpress/priority-queue';\n\nconst blockPreviewQueue = createQueue();\n\n/**\n * Renders a component at the next idle time.\n * @param {*} props\n */\nexport function Async( { children, placeholder } ) {\n\tconst [ shouldRender, setShouldRender ] = useState( false );\n\n\t// In the future, we could try to use startTransition here, but currently\n\t// react will batch all transitions, which means all previews will be\n\t// rendered at the same time.\n\t// https://react.dev/reference/react/startTransition#caveats\n\t// > If there are multiple ongoing Transitions, React currently batches them\n\t// > together. This is a limitation that will likely be removed in a future\n\t// > release.\n\n\tuseEffect( () => {\n\t\tconst context = {};\n\t\tblockPreviewQueue.add( context, () => {\n\t\t\t// Synchronously run all renders so it consumes timeRemaining.\n\t\t\t// See https://github.com/WordPress/gutenberg/pull/48238\n\t\t\tflushSync( () => {\n\t\t\t\tsetShouldRender( true );\n\t\t\t} );\n\t\t} );\n\t\treturn () => {\n\t\t\tblockPreviewQueue.cancel( context );\n\t\t};\n\t}, [] );\n\n\tif ( ! shouldRender ) {\n\t\treturn placeholder;\n\t}\n\n\treturn children;\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useDisabled, useMergeRefs } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { memo, useMemo } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { ExperimentalBlockEditorProvider } from '../provider';\nimport AutoHeightBlockPreview from './auto';\nimport EditorStyles from '../editor-styles';\nimport { store as blockEditorStore } from '../../store';\nimport { BlockListItems } from '../block-list';\nimport { Async } from './async';\n\nconst EMPTY_ADDITIONAL_STYLES = [];\n\nexport function BlockPreview( {\n\tblocks,\n\tviewportWidth = 1200,\n\tminHeight,\n\tadditionalStyles = EMPTY_ADDITIONAL_STYLES,\n\t// Deprecated props:\n\t__experimentalMinHeight,\n\t__experimentalPadding,\n} ) {\n\tif ( __experimentalMinHeight ) {\n\t\tminHeight = __experimentalMinHeight;\n\t\tdeprecated( 'The __experimentalMinHeight prop', {\n\t\t\tsince: '6.2',\n\t\t\tversion: '6.4',\n\t\t\talternative: 'minHeight',\n\t\t} );\n\t}\n\tif ( __experimentalPadding ) {\n\t\tadditionalStyles = [\n\t\t\t...additionalStyles,\n\t\t\t{ css: `body { padding: ${ __experimentalPadding }px; }` },\n\t\t];\n\t\tdeprecated( 'The __experimentalPadding prop of BlockPreview', {\n\t\t\tsince: '6.2',\n\t\t\tversion: '6.4',\n\t\t\talternative: 'additionalStyles',\n\t\t} );\n\t}\n\n\tconst originalSettings = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings(),\n\t\t[]\n\t);\n\tconst settings = useMemo(\n\t\t() => ( {\n\t\t\t...originalSettings,\n\t\t\tfocusMode: false, // Disable \"Spotlight mode\".\n\t\t\tisPreviewMode: true,\n\t\t} ),\n\t\t[ originalSettings ]\n\t);\n\tconst renderedBlocks = useMemo(\n\t\t() => ( Array.isArray( blocks ) ? blocks : [ blocks ] ),\n\t\t[ blocks ]\n\t);\n\n\tif ( ! blocks || blocks.length === 0 ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ExperimentalBlockEditorProvider\n\t\t\tvalue={ renderedBlocks }\n\t\t\tsettings={ settings }\n\t\t>\n\t\t\t<AutoHeightBlockPreview\n\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\tminHeight={ minHeight }\n\t\t\t\tadditionalStyles={ additionalStyles }\n\t\t\t/>\n\t\t</ExperimentalBlockEditorProvider>\n\t);\n}\n\nconst MemoizedBlockPreview = memo( BlockPreview );\n\nMemoizedBlockPreview.Async = Async;\n\n/**\n * BlockPreview renders a preview of a block or array of blocks.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-preview/README.md\n *\n * @param {Object}       preview               options for how the preview should be shown\n * @param {Array|Object} preview.blocks        A block instance (object) or an array of blocks to be previewed.\n * @param {number}       preview.viewportWidth Width of the preview container in pixels. Controls at what size the blocks will be rendered inside the preview. Default: 700.\n *\n * @return {Component} The component to be rendered.\n */\nexport default MemoizedBlockPreview;\n\n/**\n * This hook is used to lightly mark an element as a block preview wrapper\n * element. Call this hook and pass the returned props to the element to mark as\n * a block preview wrapper, automatically rendering inner blocks as children. If\n * you define a ref for the element, it is important to pass the ref to this\n * hook, which the hook in turn will pass to the component through the props it\n * returns. Optionally, you can also pass any other props through this hook, and\n * they will be merged and returned.\n *\n * @param {Object}    options        Preview options.\n * @param {WPBlock[]} options.blocks Block objects.\n * @param {Object}    options.props  Optional. Props to pass to the element. Must contain\n *                                   the ref if one is defined.\n * @param {Object}    options.layout Layout settings to be used in the preview.\n */\nexport function useBlockPreview( { blocks, props = {}, layout } ) {\n\tconst originalSettings = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings(),\n\t\t[]\n\t);\n\tconst settings = useMemo(\n\t\t() => ( {\n\t\t\t...originalSettings,\n\t\t\tstyles: undefined, // Clear styles included by the parent settings, as they are already output by the parent's EditorStyles.\n\t\t\tfocusMode: false, // Disable \"Spotlight mode\".\n\t\t\tisPreviewMode: true,\n\t\t} ),\n\t\t[ originalSettings ]\n\t);\n\tconst disabledRef = useDisabled();\n\tconst ref = useMergeRefs( [ props.ref, disabledRef ] );\n\tconst renderedBlocks = useMemo(\n\t\t() => ( Array.isArray( blocks ) ? blocks : [ blocks ] ),\n\t\t[ blocks ]\n\t);\n\n\tconst children = (\n\t\t<ExperimentalBlockEditorProvider\n\t\t\tvalue={ renderedBlocks }\n\t\t\tsettings={ settings }\n\t\t>\n\t\t\t<EditorStyles />\n\t\t\t<BlockListItems renderAppender={ false } layout={ layout } />\n\t\t</ExperimentalBlockEditorProvider>\n\t);\n\n\treturn {\n\t\t...props,\n\t\tref,\n\t\tclassName: clsx(\n\t\t\tprops.className,\n\t\t\t'block-editor-block-preview__live-content',\n\t\t\t'components-disabled'\n\t\t),\n\t\tchildren: blocks?.length ? children : null,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tisReusableBlock,\n\tcreateBlock,\n\tgetBlockFromExample,\n} from '@wordpress/blocks';\nimport { useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockCard from '../block-card';\nimport BlockPreview from '../block-preview';\n\nfunction InserterPreviewPanel( { item } ) {\n\tconst { name, title, icon, description, initialAttributes, example } = item;\n\tconst isReusable = isReusableBlock( item );\n\tconst blocks = useMemo( () => {\n\t\tif ( ! example ) {\n\t\t\treturn createBlock( name, initialAttributes );\n\t\t}\n\t\treturn getBlockFromExample( name, {\n\t\t\tattributes: {\n\t\t\t\t...example.attributes,\n\t\t\t\t...initialAttributes,\n\t\t\t},\n\t\t\tinnerBlocks: example.innerBlocks,\n\t\t} );\n\t}, [ name, example, initialAttributes ] );\n\t// Same as height of BlockPreviewPanel.\n\tconst previewHeight = 144;\n\tconst sidebarWidth = 280;\n\tconst viewportWidth = example?.viewportWidth ?? 500;\n\tconst scale = sidebarWidth / viewportWidth;\n\tconst minHeight =\n\t\tscale !== 0 && scale < 1 && previewHeight\n\t\t\t? previewHeight / scale\n\t\t\t: previewHeight;\n\n\treturn (\n\t\t<div className=\"block-editor-inserter__preview-container\">\n\t\t\t<div className=\"block-editor-inserter__preview\">\n\t\t\t\t{ isReusable || example ? (\n\t\t\t\t\t<div className=\"block-editor-inserter__preview-content\">\n\t\t\t\t\t\t<BlockPreview\n\t\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\t\t\t\tminHeight={ previewHeight }\n\t\t\t\t\t\t\tadditionalStyles={\n\t\t\t\t\t\t\t\t//We want this CSS to be in sync with the one in BlockPreviewPanel.\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcss: `\n\t\t\t\t\t\t\t\t\t\tbody { \n\t\t\t\t\t\t\t\t\t\t\tpadding: 24px;\n\t\t\t\t\t\t\t\t\t\t\tmin-height:${ Math.round( minHeight ) }px;\n\t\t\t\t\t\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\t\t\t\t\t\talign-items:center;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t.is-root-container { width: 100%; }\n\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"block-editor-inserter__preview-content-missing\">\n\t\t\t\t\t\t{ __( 'No preview available.' ) }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t\t{ ! isReusable && (\n\t\t\t\t<BlockCard\n\t\t\t\t\ttitle={ title }\n\t\t\t\t\ticon={ icon }\n\t\t\t\t\tdescription={ description }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default InserterPreviewPanel;\n","/**\n * WordPress dependencies\n */\nimport { Button, Composite } from '@wordpress/components';\nimport { forwardRef } from '@wordpress/element';\n\nfunction InserterListboxItem(\n\t{ isFirst, as: Component, children, ...props },\n\tref\n) {\n\treturn (\n\t\t<Composite.Item\n\t\t\tref={ ref }\n\t\t\trole=\"option\"\n\t\t\t// Use the Composite.Item `accessibleWhenDisabled` prop\n\t\t\t// over Button's `isFocusable`. The latter was shown to\n\t\t\t// cause an issue with tab order in the inserter list.\n\t\t\taccessibleWhenDisabled\n\t\t\t{ ...props }\n\t\t\trender={ ( htmlProps ) => {\n\t\t\t\tconst propsWithTabIndex = {\n\t\t\t\t\t...htmlProps,\n\t\t\t\t\ttabIndex: isFirst ? 0 : htmlProps.tabIndex,\n\t\t\t\t};\n\t\t\t\tif ( Component ) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Component { ...propsWithTabIndex }>\n\t\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t</Component>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif ( typeof children === 'function' ) {\n\t\t\t\t\treturn children( propsWithTabIndex );\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<Button __next40pxDefaultSize { ...propsWithTabIndex }>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t} }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( InserterListboxItem );\n","/**\n * WordPress dependencies\n */\nimport { Draggable } from '@wordpress/components';\nimport { createBlock, store as blocksStore } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockDraggableChip from '../block-draggable/draggable-chip';\nimport { INSERTER_PATTERN_TYPES } from '../inserter/block-patterns-tab/utils';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nconst InserterDraggableBlocks = ( {\n\tisEnabled,\n\tblocks,\n\ticon,\n\tchildren,\n\tpattern,\n} ) => {\n\tconst blockTypeIcon = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockType } = select( blocksStore );\n\t\t\treturn (\n\t\t\t\tblocks.length === 1 && getBlockType( blocks[ 0 ].name )?.icon\n\t\t\t);\n\t\t},\n\t\t[ blocks ]\n\t);\n\n\tconst { startDragging, stopDragging } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\n\tconst patternBlock = useMemo( () => {\n\t\treturn pattern?.type === INSERTER_PATTERN_TYPES.user &&\n\t\t\tpattern?.syncStatus !== 'unsynced'\n\t\t\t? [ createBlock( 'core/block', { ref: pattern.id } ) ]\n\t\t\t: undefined;\n\t}, [ pattern?.type, pattern?.syncStatus, pattern?.id ] );\n\n\tif ( ! isEnabled ) {\n\t\treturn children( {\n\t\t\tdraggable: false,\n\t\t\tonDragStart: undefined,\n\t\t\tonDragEnd: undefined,\n\t\t} );\n\t}\n\n\tconst draggableBlocks = patternBlock ?? blocks;\n\treturn (\n\t\t<Draggable\n\t\t\t__experimentalTransferDataType=\"wp-blocks\"\n\t\t\ttransferData={ { type: 'inserter', blocks: draggableBlocks } }\n\t\t\tonDragStart={ ( event ) => {\n\t\t\t\tstartDragging();\n\t\t\t\tfor ( const block of draggableBlocks ) {\n\t\t\t\t\tconst type = `wp-block:${ block.name }`;\n\t\t\t\t\t// This will fill in the dataTransfer.types array so that\n\t\t\t\t\t// the drop zone can check if the draggable is eligible.\n\t\t\t\t\t// Unfortuantely, on drag start, we don't have access to the\n\t\t\t\t\t// actual data, only the data keys/types.\n\t\t\t\t\tevent.dataTransfer.items.add( '', type );\n\t\t\t\t}\n\t\t\t} }\n\t\t\tonDragEnd={ () => {\n\t\t\t\tstopDragging();\n\t\t\t} }\n\t\t\t__experimentalDragComponent={\n\t\t\t\t<BlockDraggableChip\n\t\t\t\t\tcount={ blocks.length }\n\t\t\t\t\ticon={ icon || ( ! pattern && blockTypeIcon ) }\n\t\t\t\t\tisPattern={ !! pattern }\n\t\t\t\t/>\n\t\t\t}\n\t\t>\n\t\t\t{ ( { onDraggableStart, onDraggableEnd } ) => {\n\t\t\t\treturn children( {\n\t\t\t\t\tdraggable: true,\n\t\t\t\t\tonDragStart: onDraggableStart,\n\t\t\t\t\tonDragEnd: onDraggableEnd,\n\t\t\t\t} );\n\t\t\t} }\n\t\t</Draggable>\n\t);\n};\n\nexport default InserterDraggableBlocks;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo, useRef, memo } from '@wordpress/element';\nimport {\n\tcreateBlock,\n\tcreateBlocksFromInnerBlocksTemplate,\n\tisReusableBlock,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { __experimentalTruncate as Truncate } from '@wordpress/components';\nimport { ENTER, isAppleOS } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { InserterListboxItem } from '../inserter-listbox';\nimport InserterDraggableBlocks from '../inserter-draggable-blocks';\n\nfunction InserterListItem( {\n\tclassName,\n\tisFirst,\n\titem,\n\tonSelect,\n\tonHover,\n\tisDraggable,\n\t...props\n} ) {\n\tconst isDraggingRef = useRef( false );\n\tconst itemIconStyle = item.icon\n\t\t? {\n\t\t\t\tbackgroundColor: item.icon.background,\n\t\t\t\tcolor: item.icon.foreground,\n\t\t  }\n\t\t: {};\n\tconst blocks = useMemo(\n\t\t() => [\n\t\t\tcreateBlock(\n\t\t\t\titem.name,\n\t\t\t\titem.initialAttributes,\n\t\t\t\tcreateBlocksFromInnerBlocksTemplate( item.innerBlocks )\n\t\t\t),\n\t\t],\n\t\t[ item.name, item.initialAttributes, item.innerBlocks ]\n\t);\n\n\tconst isSynced =\n\t\t( isReusableBlock( item ) && item.syncStatus !== 'unsynced' ) ||\n\t\tisTemplatePart( item );\n\n\treturn (\n\t\t<InserterDraggableBlocks\n\t\t\tisEnabled={ isDraggable && ! item.isDisabled }\n\t\t\tblocks={ blocks }\n\t\t\ticon={ item.icon }\n\t\t>\n\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\n\t\t\t\t<div\n\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t'block-editor-block-types-list__list-item',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'is-synced': isSynced,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\tdraggable={ draggable }\n\t\t\t\t\tonDragStart={ ( event ) => {\n\t\t\t\t\t\tisDraggingRef.current = true;\n\t\t\t\t\t\tif ( onDragStart ) {\n\t\t\t\t\t\t\tonHover( null );\n\t\t\t\t\t\t\tonDragStart( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tonDragEnd={ ( event ) => {\n\t\t\t\t\t\tisDraggingRef.current = false;\n\t\t\t\t\t\tif ( onDragEnd ) {\n\t\t\t\t\t\t\tonDragEnd( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<InserterListboxItem\n\t\t\t\t\t\tisFirst={ isFirst }\n\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t'block-editor-block-types-list__item',\n\t\t\t\t\t\t\tclassName\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tdisabled={ item.isDisabled }\n\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tonSelect(\n\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\tisAppleOS() ? event.metaKey : event.ctrlKey\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tonHover( null );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\t\t\tconst { keyCode } = event;\n\t\t\t\t\t\t\tif ( keyCode === ENTER ) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tonSelect(\n\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\tisAppleOS() ? event.metaKey : event.ctrlKey\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tonHover( null );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonMouseEnter={ () => {\n\t\t\t\t\t\t\tif ( isDraggingRef.current ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonHover( item );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonMouseLeave={ () => onHover( null ) }\n\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName=\"block-editor-block-types-list__item-icon\"\n\t\t\t\t\t\t\tstyle={ itemIconStyle }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockIcon icon={ item.icon } showColors />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"block-editor-block-types-list__item-title\">\n\t\t\t\t\t\t\t<Truncate numberOfLines={ 3 }>\n\t\t\t\t\t\t\t\t{ item.title }\n\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</InserterListboxItem>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</InserterDraggableBlocks>\n\t);\n}\n\nexport default memo( InserterListItem );\n","/**\n * WordPress dependencies\n */\nimport { forwardRef, useEffect, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { speak } from '@wordpress/a11y';\n\nfunction InserterListboxGroup( props, ref ) {\n\tconst [ shouldSpeak, setShouldSpeak ] = useState( false );\n\n\tuseEffect( () => {\n\t\tif ( shouldSpeak ) {\n\t\t\tspeak(\n\t\t\t\t__( 'Use left and right arrow keys to move through blocks' )\n\t\t\t);\n\t\t}\n\t}, [ shouldSpeak ] );\n\n\treturn (\n\t\t<div\n\t\t\tref={ ref }\n\t\t\trole=\"listbox\"\n\t\t\taria-orientation=\"horizontal\"\n\t\t\tonFocus={ () => {\n\t\t\t\tsetShouldSpeak( true );\n\t\t\t} }\n\t\t\tonBlur={ ( event ) => {\n\t\t\t\tconst focusingOutsideGroup = ! event.currentTarget.contains(\n\t\t\t\t\tevent.relatedTarget\n\t\t\t\t);\n\t\t\t\tif ( focusingOutsideGroup ) {\n\t\t\t\t\tsetShouldSpeak( false );\n\t\t\t\t}\n\t\t\t} }\n\t\t\t{ ...props }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( InserterListboxGroup );\n","/**\n * WordPress dependencies\n */\nimport { forwardRef } from '@wordpress/element';\nimport { Composite } from '@wordpress/components';\n\nfunction InserterListboxRow( props, ref ) {\n\treturn <Composite.Group role=\"presentation\" ref={ ref } { ...props } />;\n}\n\nexport default forwardRef( InserterListboxRow );\n","/**\n * WordPress dependencies\n */\nimport { getBlockMenuDefaultClassName } from '@wordpress/blocks';\nimport { useInstanceId } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport InserterListItem from '../inserter-list-item';\nimport { InserterListboxGroup, InserterListboxRow } from '../inserter-listbox';\n\nfunction chunk( array, size ) {\n\tconst chunks = [];\n\tfor ( let i = 0, j = array.length; i < j; i += size ) {\n\t\tchunks.push( array.slice( i, i + size ) );\n\t}\n\treturn chunks;\n}\n\nfunction BlockTypesList( {\n\titems = [],\n\tonSelect,\n\tonHover = () => {},\n\tchildren,\n\tlabel,\n\tisDraggable = true,\n} ) {\n\tconst className = 'block-editor-block-types-list';\n\tconst listId = useInstanceId( BlockTypesList, className );\n\treturn (\n\t\t<InserterListboxGroup className={ className } aria-label={ label }>\n\t\t\t{ chunk( items, 3 ).map( ( row, i ) => (\n\t\t\t\t<InserterListboxRow key={ i }>\n\t\t\t\t\t{ row.map( ( item, j ) => (\n\t\t\t\t\t\t<InserterListItem\n\t\t\t\t\t\t\tkey={ item.id }\n\t\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\t\tclassName={ getBlockMenuDefaultClassName(\n\t\t\t\t\t\t\t\titem.id\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\tisDraggable={ isDraggable && ! item.isDisabled }\n\t\t\t\t\t\t\tisFirst={ i === 0 && j === 0 }\n\t\t\t\t\t\t\trowId={ `${ listId }-${ i }` }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) ) }\n\t\t\t\t</InserterListboxRow>\n\t\t\t) ) }\n\t\t\t{ children }\n\t\t</InserterListboxGroup>\n\t);\n}\n\nexport default BlockTypesList;\n","/**\n * WordPress dependencies\n */\nimport { Icon } from '@wordpress/components';\n\nfunction InserterPanel( { title, icon, children } ) {\n\treturn (\n\t\t<>\n\t\t\t<div className=\"block-editor-inserter__panel-header\">\n\t\t\t\t<h2 className=\"block-editor-inserter__panel-title\">\n\t\t\t\t\t{ title }\n\t\t\t\t</h2>\n\t\t\t\t<Icon icon={ icon } />\n\t\t\t</div>\n\t\t\t<div className=\"block-editor-inserter__panel-content\">\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default InserterPanel;\n","/**\n * WordPress dependencies\n */\nimport {\n\tgetBlockType,\n\tcreateBlock,\n\tcreateBlocksFromInnerBlocksTemplate,\n\tstore as blocksStore,\n\tparse,\n} from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\nimport { isFiltered } from '../../../store/utils';\nimport { unlock } from '../../../lock-unlock';\n\n/**\n * Retrieves the block types inserter state.\n *\n * @param {string=}  rootClientId Insertion's root client ID.\n * @param {Function} onInsert     function called when inserter a list of blocks.\n * @param {boolean}  isQuick\n * @return {Array} Returns the block types state. (block types, categories, collections, onSelect handler)\n */\nconst useBlockTypesState = ( rootClientId, onInsert, isQuick ) => {\n\tconst options = useMemo(\n\t\t() => ( { [ isFiltered ]: !! isQuick } ),\n\t\t[ isQuick ]\n\t);\n\tconst [ items ] = useSelect(\n\t\t( select ) => [\n\t\t\tselect( blockEditorStore ).getInserterItems(\n\t\t\t\trootClientId,\n\t\t\t\toptions\n\t\t\t),\n\t\t],\n\t\t[ rootClientId, options ]\n\t);\n\tconst { getClosestAllowedInsertionPoint } = unlock(\n\t\tuseSelect( blockEditorStore )\n\t);\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\n\tconst [ categories, collections ] = useSelect( ( select ) => {\n\t\tconst { getCategories, getCollections } = select( blocksStore );\n\t\treturn [ getCategories(), getCollections() ];\n\t}, [] );\n\n\tconst onSelectItem = useCallback(\n\t\t(\n\t\t\t{ name, initialAttributes, innerBlocks, syncStatus, content },\n\t\t\tshouldFocusBlock\n\t\t) => {\n\t\t\tconst destinationClientId = getClosestAllowedInsertionPoint(\n\t\t\t\tname,\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tif ( destinationClientId === null ) {\n\t\t\t\tconst title = getBlockType( name )?.title ?? name;\n\t\t\t\tcreateErrorNotice(\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t/* translators: %s: block pattern title. */\n\t\t\t\t\t\t__( 'Block \"%s\" can\\'t be inserted.' ),\n\t\t\t\t\t\ttitle\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t\tid: 'inserter-notice',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst insertedBlock =\n\t\t\t\tsyncStatus === 'unsynced'\n\t\t\t\t\t? parse( content, {\n\t\t\t\t\t\t\t__unstableSkipMigrationLogs: true,\n\t\t\t\t\t  } )\n\t\t\t\t\t: createBlock(\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tinitialAttributes,\n\t\t\t\t\t\t\tcreateBlocksFromInnerBlocksTemplate( innerBlocks )\n\t\t\t\t\t  );\n\t\t\tonInsert(\n\t\t\t\tinsertedBlock,\n\t\t\t\tundefined,\n\t\t\t\tshouldFocusBlock,\n\t\t\t\tdestinationClientId\n\t\t\t);\n\t\t},\n\t\t[\n\t\t\tgetClosestAllowedInsertionPoint,\n\t\t\trootClientId,\n\t\t\tonInsert,\n\t\t\tcreateErrorNotice,\n\t\t]\n\t);\n\n\treturn [ items, categories, collections, onSelectItem ];\n};\n\nexport default useBlockTypesState;\n","/**\n * WordPress dependencies\n */\nimport { Composite } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\n\nexport { default as InserterListboxGroup } from './group';\nexport { default as InserterListboxRow } from './row';\nexport { default as InserterListboxItem } from './item';\n\nfunction InserterListbox( { children } ) {\n\treturn (\n\t\t<Composite focusShift focusWrap=\"horizontal\" render={ <></> }>\n\t\t\t{ children }\n\t\t</Composite>\n\t);\n}\n\nexport default InserterListbox;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nfunction InserterNoResults() {\n\treturn (\n\t\t<div className=\"block-editor-inserter__no-results\">\n\t\t\t<p>{ __( 'No results found.' ) }</p>\n\t\t</div>\n\t);\n}\n\nexport default InserterNoResults;\n","/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport { useMemo, useEffect, forwardRef } from '@wordpress/element';\nimport { useAsyncList } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesList from '../block-types-list';\nimport InserterPanel from './panel';\nimport useBlockTypesState from './hooks/use-block-types-state';\nimport InserterListbox from '../inserter-listbox';\nimport { orderBy } from '../../utils/sorting';\nimport InserterNoResults from './no-results';\n\nconst getBlockNamespace = ( item ) => item.name.split( '/' )[ 0 ];\n\nconst MAX_SUGGESTED_ITEMS = 6;\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation and rerendering the component.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\nexport function BlockTypesTabPanel( {\n\titems,\n\tcollections,\n\tcategories,\n\tonSelectItem,\n\tonHover,\n\tshowMostUsedBlocks,\n\tclassName,\n} ) {\n\tconst suggestedItems = useMemo( () => {\n\t\treturn orderBy( items, 'frecency', 'desc' ).slice(\n\t\t\t0,\n\t\t\tMAX_SUGGESTED_ITEMS\n\t\t);\n\t}, [ items ] );\n\n\tconst uncategorizedItems = useMemo( () => {\n\t\treturn items.filter( ( item ) => ! item.category );\n\t}, [ items ] );\n\n\tconst itemsPerCollection = useMemo( () => {\n\t\t// Create a new Object to avoid mutating collection.\n\t\tconst result = { ...collections };\n\t\tObject.keys( collections ).forEach( ( namespace ) => {\n\t\t\tresult[ namespace ] = items.filter(\n\t\t\t\t( item ) => getBlockNamespace( item ) === namespace\n\t\t\t);\n\t\t\tif ( result[ namespace ].length === 0 ) {\n\t\t\t\tdelete result[ namespace ];\n\t\t\t}\n\t\t} );\n\n\t\treturn result;\n\t}, [ items, collections ] );\n\n\t// Hide block preview on unmount.\n\tuseEffect( () => () => onHover( null ), [] );\n\n\t/**\n\t * The inserter contains a big number of blocks and opening it is a costful operation.\n\t * The rendering is the most costful part of it, in order to improve the responsiveness\n\t * of the \"opening\" action, these lazy lists allow us to render the inserter category per category,\n\t * once all the categories are rendered, we start rendering the collections and the uncategorized block types.\n\t */\n\tconst currentlyRenderedCategories = useAsyncList( categories );\n\tconst didRenderAllCategories =\n\t\tcategories.length === currentlyRenderedCategories.length;\n\n\t// Async List requires an array.\n\tconst collectionEntries = useMemo( () => {\n\t\treturn Object.entries( collections );\n\t}, [ collections ] );\n\tconst currentlyRenderedCollections = useAsyncList(\n\t\tdidRenderAllCategories ? collectionEntries : EMPTY_ARRAY\n\t);\n\n\treturn (\n\t\t<div className={ className }>\n\t\t\t{ showMostUsedBlocks &&\n\t\t\t\t// Only show the most used blocks if the total amount of block\n\t\t\t\t// is larger than 1 row, otherwise it is not so useful.\n\t\t\t\titems.length > 3 &&\n\t\t\t\t!! suggestedItems.length && (\n\t\t\t\t\t<InserterPanel title={ _x( 'Most used', 'blocks' ) }>\n\t\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\t\titems={ suggestedItems }\n\t\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\tlabel={ _x( 'Most used', 'blocks' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</InserterPanel>\n\t\t\t\t) }\n\n\t\t\t{ currentlyRenderedCategories.map( ( category ) => {\n\t\t\t\tconst categoryItems = items.filter(\n\t\t\t\t\t( item ) => item.category === category.slug\n\t\t\t\t);\n\t\t\t\tif ( ! categoryItems || ! categoryItems.length ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<InserterPanel\n\t\t\t\t\t\tkey={ category.slug }\n\t\t\t\t\t\ttitle={ category.title }\n\t\t\t\t\t\ticon={ category.icon }\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\t\titems={ categoryItems }\n\t\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\tlabel={ category.title }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</InserterPanel>\n\t\t\t\t);\n\t\t\t} ) }\n\n\t\t\t{ didRenderAllCategories && uncategorizedItems.length > 0 && (\n\t\t\t\t<InserterPanel\n\t\t\t\t\tclassName=\"block-editor-inserter__uncategorized-blocks-panel\"\n\t\t\t\t\ttitle={ __( 'Uncategorized' ) }\n\t\t\t\t>\n\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\titems={ uncategorizedItems }\n\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\tlabel={ __( 'Uncategorized' ) }\n\t\t\t\t\t/>\n\t\t\t\t</InserterPanel>\n\t\t\t) }\n\n\t\t\t{ currentlyRenderedCollections.map(\n\t\t\t\t( [ namespace, collection ] ) => {\n\t\t\t\t\tconst collectionItems = itemsPerCollection[ namespace ];\n\t\t\t\t\tif ( ! collectionItems || ! collectionItems.length ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<InserterPanel\n\t\t\t\t\t\t\tkey={ namespace }\n\t\t\t\t\t\t\ttitle={ collection.title }\n\t\t\t\t\t\t\ticon={ collection.icon }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\t\t\titems={ collectionItems }\n\t\t\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\t\tlabel={ collection.title }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</InserterPanel>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport function BlockTypesTab(\n\t{ rootClientId, onInsert, onHover, showMostUsedBlocks },\n\tref\n) {\n\tconst [ items, categories, collections, onSelectItem ] = useBlockTypesState(\n\t\trootClientId,\n\t\tonInsert\n\t);\n\n\tif ( ! items.length ) {\n\t\treturn <InserterNoResults />;\n\t}\n\n\tconst itemsForCurrentRoot = [];\n\tconst itemsRemaining = [];\n\n\tfor ( const item of items ) {\n\t\t// Skip reusable blocks, they moved to the patterns tab.\n\t\tif ( item.category === 'reusable' ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ( item.isAllowedInCurrentRoot ) {\n\t\t\titemsForCurrentRoot.push( item );\n\t\t} else {\n\t\t\titemsRemaining.push( item );\n\t\t}\n\t}\n\n\treturn (\n\t\t<InserterListbox>\n\t\t\t<div ref={ ref }>\n\t\t\t\t{ !! itemsForCurrentRoot.length && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<BlockTypesTabPanel\n\t\t\t\t\t\t\titems={ itemsForCurrentRoot }\n\t\t\t\t\t\t\tcategories={ categories }\n\t\t\t\t\t\t\tcollections={ collections }\n\t\t\t\t\t\t\tonSelectItem={ onSelectItem }\n\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t\t\t\t\tclassName=\"block-editor-inserter__insertable-blocks-at-selection\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t<BlockTypesTabPanel\n\t\t\t\t\titems={ itemsRemaining }\n\t\t\t\t\tcategories={ categories }\n\t\t\t\t\tcollections={ collections }\n\t\t\t\t\tonSelectItem={ onSelectItem }\n\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t\t\tclassName=\"block-editor-inserter__all-blocks\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</InserterListbox>\n\t);\n}\n\nexport default forwardRef( BlockTypesTab );\n","/**\n * WordPress dependencies\n */\nimport { Button, SearchControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\nfunction PatternCategoriesList( {\n\tselectedCategory,\n\tpatternCategories,\n\tonClickCategory,\n} ) {\n\tconst baseClassName = 'block-editor-block-patterns-explorer__sidebar';\n\treturn (\n\t\t<div className={ `${ baseClassName }__categories-list` }>\n\t\t\t{ patternCategories.map( ( { name, label } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tkey={ name }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\tclassName={ `${ baseClassName }__categories-list__item` }\n\t\t\t\t\t\tisPressed={ selectedCategory === name }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonClickCategory( name );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ label }\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</div>\n\t);\n}\n\nfunction PatternsExplorerSearch( { searchValue, setSearchValue } ) {\n\tconst baseClassName = 'block-editor-block-patterns-explorer__search';\n\treturn (\n\t\t<div className={ baseClassName }>\n\t\t\t<SearchControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tonChange={ setSearchValue }\n\t\t\t\tvalue={ searchValue }\n\t\t\t\tlabel={ __( 'Search' ) }\n\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nfunction PatternExplorerSidebar( {\n\tselectedCategory,\n\tpatternCategories,\n\tonClickCategory,\n\tsearchValue,\n\tsetSearchValue,\n} ) {\n\tconst baseClassName = 'block-editor-block-patterns-explorer__sidebar';\n\treturn (\n\t\t<div className={ baseClassName }>\n\t\t\t<PatternsExplorerSearch\n\t\t\t\tsearchValue={ searchValue }\n\t\t\t\tsetSearchValue={ setSearchValue }\n\t\t\t/>\n\t\t\t{ ! searchValue && (\n\t\t\t\t<PatternCategoriesList\n\t\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t\t\tpatternCategories={ patternCategories }\n\t\t\t\t\tonClickCategory={ onClickCategory }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default PatternExplorerSidebar;\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalVStack as VStack,\n\t__experimentalHStack as HStack,\n\t__experimentalText as Text,\n\tButton,\n} from '@wordpress/components';\nimport { __, _x, _n, sprintf } from '@wordpress/i18n';\n\nexport default function Pagination( {\n\tcurrentPage,\n\tnumPages,\n\tchangePage,\n\ttotalItems,\n} ) {\n\treturn (\n\t\t<VStack className=\"block-editor-patterns__grid-pagination-wrapper\">\n\t\t\t<Text variant=\"muted\">\n\t\t\t\t{ sprintf(\n\t\t\t\t\t// translators: %s: Total number of patterns.\n\t\t\t\t\t_n( '%s item', '%s items', totalItems ),\n\t\t\t\t\ttotalItems\n\t\t\t\t) }\n\t\t\t</Text>\n\n\t\t\t{ numPages > 1 && (\n\t\t\t\t<HStack\n\t\t\t\t\texpanded={ false }\n\t\t\t\t\tspacing={ 3 }\n\t\t\t\t\tjustify=\"flex-start\"\n\t\t\t\t\tclassName=\"block-editor-patterns__grid-pagination\"\n\t\t\t\t>\n\t\t\t\t\t<HStack\n\t\t\t\t\t\texpanded={ false }\n\t\t\t\t\t\tspacing={ 1 }\n\t\t\t\t\t\tclassName=\"block-editor-patterns__grid-pagination-previous\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ () => changePage( 1 ) }\n\t\t\t\t\t\t\tdisabled={ currentPage === 1 }\n\t\t\t\t\t\t\taria-label={ __( 'First page' ) }\n\t\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t\t\tclassName=\"block-editor-patterns__grid-pagination-button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ () => changePage( currentPage - 1 ) }\n\t\t\t\t\t\t\tdisabled={ currentPage === 1 }\n\t\t\t\t\t\t\taria-label={ __( 'Previous page' ) }\n\t\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t\t\tclassName=\"block-editor-patterns__grid-pagination-button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</HStack>\n\t\t\t\t\t<Text variant=\"muted\">\n\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t// translators: 1: Current page number. 2: Total number of pages.\n\t\t\t\t\t\t\t_x( '%1$s of %2$s', 'paging' ),\n\t\t\t\t\t\t\tcurrentPage,\n\t\t\t\t\t\t\tnumPages\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<HStack\n\t\t\t\t\t\texpanded={ false }\n\t\t\t\t\t\tspacing={ 1 }\n\t\t\t\t\t\tclassName=\"block-editor-patterns__grid-pagination-next\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ () => changePage( currentPage + 1 ) }\n\t\t\t\t\t\t\tdisabled={ currentPage === numPages }\n\t\t\t\t\t\t\taria-label={ __( 'Next page' ) }\n\t\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t\t\tclassName=\"block-editor-patterns__grid-pagination-button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ () => changePage( numPages ) }\n\t\t\t\t\t\t\tdisabled={ currentPage === numPages }\n\t\t\t\t\t\t\taria-label={ __( 'Last page' ) }\n\t\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t\t\tclassName=\"block-editor-patterns__grid-pagination-button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</HStack>\n\t\t\t\t</HStack>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { cloneBlock } from '@wordpress/blocks';\nimport { useEffect, useState, forwardRef, useMemo } from '@wordpress/element';\nimport {\n\tComposite,\n\tVisuallyHidden,\n\tTooltip,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\nimport { Icon, symbol } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\nimport InserterDraggableBlocks from '../inserter-draggable-blocks';\nimport BlockPatternsPaging from '../block-patterns-paging';\nimport { INSERTER_PATTERN_TYPES } from '../inserter/block-patterns-tab/utils';\n\nconst WithToolTip = ( { showTooltip, title, children } ) => {\n\tif ( showTooltip ) {\n\t\treturn <Tooltip text={ title }>{ children }</Tooltip>;\n\t}\n\treturn <>{ children }</>;\n};\n\nfunction BlockPattern( {\n\tid,\n\tisDraggable,\n\tpattern,\n\tonClick,\n\tonHover,\n\tshowTitlesAsTooltip,\n\tcategory,\n\tisSelected,\n} ) {\n\tconst [ isDragging, setIsDragging ] = useState( false );\n\tconst { blocks, viewportWidth } = pattern;\n\tconst instanceId = useInstanceId( BlockPattern );\n\tconst descriptionId = `block-editor-block-patterns-list__item-description-${ instanceId }`;\n\tconst isUserPattern = pattern.type === INSERTER_PATTERN_TYPES.user;\n\n\t// When we have a selected category and the pattern is draggable, we need to update the\n\t// pattern's categories in metadata to only contain the selected category, and pass this to\n\t// InserterDraggableBlocks component. We do that because we use this information for pattern\n\t// shuffling and it makes more sense to show only the ones from the initially selected category during insertion.\n\tconst patternBlocks = useMemo( () => {\n\t\tif ( ! category || ! isDraggable ) {\n\t\t\treturn blocks;\n\t\t}\n\t\treturn ( blocks ?? [] ).map( ( block ) => {\n\t\t\tconst clonedBlock = cloneBlock( block );\n\t\t\tif (\n\t\t\t\tclonedBlock.attributes.metadata?.categories?.includes(\n\t\t\t\t\tcategory\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tclonedBlock.attributes.metadata.categories = [ category ];\n\t\t\t}\n\t\t\treturn clonedBlock;\n\t\t} );\n\t}, [ blocks, isDraggable, category ] );\n\n\treturn (\n\t\t<InserterDraggableBlocks\n\t\t\tisEnabled={ isDraggable }\n\t\t\tblocks={ patternBlocks }\n\t\t\tpattern={ pattern }\n\t\t>\n\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"block-editor-block-patterns-list__list-item\"\n\t\t\t\t\tdraggable={ draggable }\n\t\t\t\t\tonDragStart={ ( event ) => {\n\t\t\t\t\t\tsetIsDragging( true );\n\t\t\t\t\t\tif ( onDragStart ) {\n\t\t\t\t\t\t\tonHover?.( null );\n\t\t\t\t\t\t\tonDragStart( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tonDragEnd={ ( event ) => {\n\t\t\t\t\t\tsetIsDragging( false );\n\t\t\t\t\t\tif ( onDragEnd ) {\n\t\t\t\t\t\t\tonDragEnd( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<WithToolTip\n\t\t\t\t\t\tshowTooltip={ showTitlesAsTooltip && ! isUserPattern }\n\t\t\t\t\t\ttitle={ pattern.title }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Composite.Item\n\t\t\t\t\t\t\trender={\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\t\t\taria-label={ pattern.title }\n\t\t\t\t\t\t\t\t\taria-describedby={\n\t\t\t\t\t\t\t\t\t\tpattern.description\n\t\t\t\t\t\t\t\t\t\t\t? descriptionId\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t\t\t\t'block-editor-block-patterns-list__item',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'block-editor-block-patterns-list__list-item-synced':\n\t\t\t\t\t\t\t\t\t\t\t\tpattern.type ===\n\t\t\t\t\t\t\t\t\t\t\t\t\tINSERTER_PATTERN_TYPES.user &&\n\t\t\t\t\t\t\t\t\t\t\t\t! pattern.syncStatus,\n\t\t\t\t\t\t\t\t\t\t\t'is-selected': isSelected,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tid={ id }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tonClick( pattern, blocks );\n\t\t\t\t\t\t\t\tonHover?.( null );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonMouseEnter={ () => {\n\t\t\t\t\t\t\t\tif ( isDragging ) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonHover?.( pattern );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonMouseLeave={ () => onHover?.( null ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockPreview.Async\n\t\t\t\t\t\t\t\tplaceholder={ <BlockPatternPlaceholder /> }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BlockPreview\n\t\t\t\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</BlockPreview.Async>\n\t\t\t\t\t\t\t{ ( ! showTitlesAsTooltip || isUserPattern ) && (\n\t\t\t\t\t\t\t\t<HStack\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-patterns__pattern-details\"\n\t\t\t\t\t\t\t\t\tspacing={ 2 }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ isUserPattern && ! pattern.syncStatus && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"block-editor-patterns__pattern-icon-wrapper\">\n\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-patterns__pattern-icon\"\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ symbol }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t<div className=\"block-editor-block-patterns-list__item-title\">\n\t\t\t\t\t\t\t\t\t\t{ pattern.title }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t\t{ !! pattern.description && (\n\t\t\t\t\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t\t\t\t\t{ pattern.description }\n\t\t\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</Composite.Item>\n\t\t\t\t\t</WithToolTip>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</InserterDraggableBlocks>\n\t);\n}\n\nfunction BlockPatternPlaceholder() {\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-list__item is-placeholder\" />\n\t);\n}\n\nfunction BlockPatternsList(\n\t{\n\t\tisDraggable,\n\t\tblockPatterns,\n\t\tonHover,\n\t\tonClickPattern,\n\t\torientation,\n\t\tlabel = __( 'Block patterns' ),\n\t\tcategory,\n\t\tshowTitlesAsTooltip,\n\t\tpagingProps,\n\t},\n\tref\n) {\n\tconst [ activeCompositeId, setActiveCompositeId ] = useState( undefined );\n\tconst [ activePattern, setActivePattern ] = useState( null ); // State to track active pattern\n\n\tuseEffect( () => {\n\t\t// Reset the active composite item whenever the available patterns change,\n\t\t// to make sure that Composite widget can receive focus correctly when its\n\t\t// composite items change. The first composite item will receive focus.\n\t\tconst firstCompositeItemId = blockPatterns[ 0 ]?.name;\n\t\tsetActiveCompositeId( firstCompositeItemId );\n\t}, [ blockPatterns ] );\n\n\tconst handleClickPattern = ( pattern, blocks ) => {\n\t\tsetActivePattern( pattern.name );\n\t\tonClickPattern( pattern, blocks );\n\t};\n\n\treturn (\n\t\t<Composite\n\t\t\torientation={ orientation }\n\t\t\tactiveId={ activeCompositeId }\n\t\t\tsetActiveId={ setActiveCompositeId }\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-block-patterns-list\"\n\t\t\taria-label={ label }\n\t\t\tref={ ref }\n\t\t>\n\t\t\t{ blockPatterns.map( ( pattern ) => (\n\t\t\t\t<BlockPattern\n\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\tid={ pattern.name }\n\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\tonClick={ handleClickPattern }\n\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\tisDraggable={ isDraggable }\n\t\t\t\t\tshowTitlesAsTooltip={ showTitlesAsTooltip }\n\t\t\t\t\tcategory={ category }\n\t\t\t\t\tisSelected={\n\t\t\t\t\t\t!! activePattern && activePattern === pattern.name\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t\t{ pagingProps && <BlockPatternsPaging { ...pagingProps } /> }\n\t\t</Composite>\n\t);\n}\n\nexport default forwardRef( BlockPatternsList );\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useRegistry, useSelect } from '@wordpress/data';\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\nimport { _n, sprintf } from '@wordpress/i18n';\nimport { speak } from '@wordpress/a11y';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\nimport { unlock } from '../../../lock-unlock';\n\nfunction getIndex( {\n\tdestinationRootClientId,\n\tdestinationIndex,\n\trootClientId,\n\tregistry,\n} ) {\n\tif ( rootClientId === destinationRootClientId ) {\n\t\treturn destinationIndex;\n\t}\n\tconst parents = [\n\t\t'',\n\t\t...registry\n\t\t\t.select( blockEditorStore )\n\t\t\t.getBlockParents( destinationRootClientId ),\n\t\tdestinationRootClientId,\n\t];\n\tconst parentIndex = parents.indexOf( rootClientId );\n\tif ( parentIndex !== -1 ) {\n\t\treturn (\n\t\t\tregistry\n\t\t\t\t.select( blockEditorStore )\n\t\t\t\t.getBlockIndex( parents[ parentIndex + 1 ] ) + 1\n\t\t);\n\t}\n\treturn registry.select( blockEditorStore ).getBlockOrder( rootClientId )\n\t\t.length;\n}\n\n/**\n * @typedef WPInserterConfig\n *\n * @property {string=}   rootClientId   If set, insertion will be into the\n *                                      block with this ID.\n * @property {number=}   insertionIndex If set, insertion will be into this\n *                                      explicit position.\n * @property {string=}   clientId       If set, insertion will be after the\n *                                      block with this ID.\n * @property {boolean=}  isAppender     Whether the inserter is an appender\n *                                      or not.\n * @property {Function=} onSelect       Called after insertion.\n */\n\n/**\n * Returns the insertion point state given the inserter config.\n *\n * @param {WPInserterConfig} config Inserter Config.\n * @return {Array} Insertion Point State (rootClientID, onInsertBlocks and onToggle).\n */\nfunction useInsertionPoint( {\n\trootClientId = '',\n\tinsertionIndex,\n\tclientId,\n\tisAppender,\n\tonSelect,\n\tshouldFocusBlock = true,\n\tselectBlockOnInsert = true,\n} ) {\n\tconst registry = useRegistry();\n\tconst {\n\t\tgetSelectedBlock,\n\t\tgetClosestAllowedInsertionPoint,\n\t\tisBlockInsertionPointVisible,\n\t} = unlock( useSelect( blockEditorStore ) );\n\tconst { destinationRootClientId, destinationIndex } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetInsertionPoint,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\tlet _destinationRootClientId = rootClientId;\n\t\t\tlet _destinationIndex;\n\t\t\tconst insertionPoint = getInsertionPoint();\n\n\t\t\tif ( insertionIndex !== undefined ) {\n\t\t\t\t// Insert into a specific index.\n\t\t\t\t_destinationIndex = insertionIndex;\n\t\t\t} else if (\n\t\t\t\tinsertionPoint &&\n\t\t\t\tinsertionPoint.hasOwnProperty( 'index' )\n\t\t\t) {\n\t\t\t\t_destinationRootClientId = insertionPoint?.rootClientId\n\t\t\t\t\t? insertionPoint.rootClientId\n\t\t\t\t\t: rootClientId;\n\t\t\t\t_destinationIndex = insertionPoint.index;\n\t\t\t} else if ( clientId ) {\n\t\t\t\t// Insert after a specific client ID.\n\t\t\t\t_destinationIndex = getBlockIndex( clientId );\n\t\t\t} else if ( ! isAppender && selectedBlockClientId ) {\n\t\t\t\t_destinationRootClientId = getBlockRootClientId(\n\t\t\t\t\tselectedBlockClientId\n\t\t\t\t);\n\t\t\t\t_destinationIndex = getBlockIndex( selectedBlockClientId ) + 1;\n\t\t\t} else {\n\t\t\t\t// Insert at the end of the list.\n\t\t\t\t_destinationIndex = getBlockOrder(\n\t\t\t\t\t_destinationRootClientId\n\t\t\t\t).length;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdestinationRootClientId: _destinationRootClientId,\n\t\t\t\tdestinationIndex: _destinationIndex,\n\t\t\t};\n\t\t},\n\t\t[ rootClientId, insertionIndex, clientId, isAppender ]\n\t);\n\n\tconst {\n\t\treplaceBlocks,\n\t\tinsertBlocks,\n\t\tshowInsertionPoint,\n\t\thideInsertionPoint,\n\t\tsetLastFocus,\n\t} = unlock( useDispatch( blockEditorStore ) );\n\n\tconst onInsertBlocks = useCallback(\n\t\t( blocks, meta, shouldForceFocusBlock = false, _rootClientId ) => {\n\t\t\t// When we are trying to move focus or select a new block on insert, we also\n\t\t\t// need to clear the last focus to avoid the focus being set to the wrong block\n\t\t\t// when tabbing back into the canvas if the block was added from outside the\n\t\t\t// editor canvas.\n\t\t\tif (\n\t\t\t\tshouldForceFocusBlock ||\n\t\t\t\tshouldFocusBlock ||\n\t\t\t\tselectBlockOnInsert\n\t\t\t) {\n\t\t\t\tsetLastFocus( null );\n\t\t\t}\n\n\t\t\tconst selectedBlock = getSelectedBlock();\n\n\t\t\tif (\n\t\t\t\t! isAppender &&\n\t\t\t\tselectedBlock &&\n\t\t\t\tisUnmodifiedDefaultBlock( selectedBlock )\n\t\t\t) {\n\t\t\t\treplaceBlocks(\n\t\t\t\t\tselectedBlock.clientId,\n\t\t\t\t\tblocks,\n\t\t\t\t\tnull,\n\t\t\t\t\tshouldFocusBlock || shouldForceFocusBlock ? 0 : null,\n\t\t\t\t\tmeta\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tinsertBlocks(\n\t\t\t\t\tblocks,\n\t\t\t\t\tisAppender || _rootClientId === undefined\n\t\t\t\t\t\t? destinationIndex\n\t\t\t\t\t\t: getIndex( {\n\t\t\t\t\t\t\t\tdestinationRootClientId,\n\t\t\t\t\t\t\t\tdestinationIndex,\n\t\t\t\t\t\t\t\trootClientId: _rootClientId,\n\t\t\t\t\t\t\t\tregistry,\n\t\t\t\t\t\t  } ),\n\t\t\t\t\tisAppender || _rootClientId === undefined\n\t\t\t\t\t\t? destinationRootClientId\n\t\t\t\t\t\t: _rootClientId,\n\t\t\t\t\tselectBlockOnInsert,\n\t\t\t\t\tshouldFocusBlock || shouldForceFocusBlock ? 0 : null,\n\t\t\t\t\tmeta\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst blockLength = Array.isArray( blocks ) ? blocks.length : 1;\n\t\t\tconst message = sprintf(\n\t\t\t\t// translators: %d: the name of the block that has been added\n\t\t\t\t_n( '%d block added.', '%d blocks added.', blockLength ),\n\t\t\t\tblockLength\n\t\t\t);\n\t\t\tspeak( message );\n\n\t\t\tif ( onSelect ) {\n\t\t\t\tonSelect( blocks );\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tisAppender,\n\t\t\tgetSelectedBlock,\n\t\t\treplaceBlocks,\n\t\t\tinsertBlocks,\n\t\t\tdestinationRootClientId,\n\t\t\tdestinationIndex,\n\t\t\tonSelect,\n\t\t\tshouldFocusBlock,\n\t\t\tselectBlockOnInsert,\n\t\t]\n\t);\n\n\tconst onToggleInsertionPoint = useCallback(\n\t\t( item ) => {\n\t\t\tif ( item && ! isBlockInsertionPointVisible() ) {\n\t\t\t\tconst allowedDestinationRootClientId =\n\t\t\t\t\tgetClosestAllowedInsertionPoint(\n\t\t\t\t\t\titem.name,\n\t\t\t\t\t\tdestinationRootClientId\n\t\t\t\t\t);\n\t\t\t\tif ( allowedDestinationRootClientId !== null ) {\n\t\t\t\t\tshowInsertionPoint(\n\t\t\t\t\t\tallowedDestinationRootClientId,\n\t\t\t\t\t\tgetIndex( {\n\t\t\t\t\t\t\tdestinationRootClientId,\n\t\t\t\t\t\t\tdestinationIndex,\n\t\t\t\t\t\t\trootClientId: allowedDestinationRootClientId,\n\t\t\t\t\t\t\tregistry,\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thideInsertionPoint();\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tgetClosestAllowedInsertionPoint,\n\t\t\tisBlockInsertionPointVisible,\n\t\t\tshowInsertionPoint,\n\t\t\thideInsertionPoint,\n\t\t\tdestinationRootClientId,\n\t\t\tdestinationIndex,\n\t\t]\n\t);\n\n\treturn [ destinationRootClientId, onInsertBlocks, onToggleInsertionPoint ];\n}\n\nexport default useInsertionPoint;\n","/**\n * WordPress dependencies\n */\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { cloneBlock, createBlock } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\nimport { unlock } from '../../../lock-unlock';\nimport { INSERTER_PATTERN_TYPES } from '../block-patterns-tab/utils';\nimport { isFiltered } from '../../../store/utils';\n\n/**\n * Retrieves the block patterns inserter state.\n *\n * @param {Function} onInsert         function called when inserter a list of blocks.\n * @param {string=}  rootClientId     Insertion's root client ID.\n * @param {string}   selectedCategory The selected pattern category.\n * @param {boolean}  isQuick          For the quick inserter render only allowed patterns.\n *\n * @return {Array} Returns the patterns state. (patterns, categories, onSelect handler)\n */\nconst usePatternsState = (\n\tonInsert,\n\trootClientId,\n\tselectedCategory,\n\tisQuick\n) => {\n\tconst options = useMemo(\n\t\t() => ( { [ isFiltered ]: !! isQuick } ),\n\t\t[ isQuick ]\n\t);\n\tconst { patternCategories, patterns, userPatternCategories } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getSettings, __experimentalGetAllowedPatterns } = unlock(\n\t\t\t\tselect( blockEditorStore )\n\t\t\t);\n\t\t\tconst {\n\t\t\t\t__experimentalUserPatternCategories,\n\t\t\t\t__experimentalBlockPatternCategories,\n\t\t\t} = getSettings();\n\t\t\treturn {\n\t\t\t\tpatterns: __experimentalGetAllowedPatterns(\n\t\t\t\t\trootClientId,\n\t\t\t\t\toptions\n\t\t\t\t),\n\t\t\t\tuserPatternCategories: __experimentalUserPatternCategories,\n\t\t\t\tpatternCategories: __experimentalBlockPatternCategories,\n\t\t\t};\n\t\t},\n\t\t[ rootClientId, options ]\n\t);\n\tconst { getClosestAllowedInsertionPointForPattern } = unlock(\n\t\tuseSelect( blockEditorStore )\n\t);\n\n\tconst allCategories = useMemo( () => {\n\t\tconst categories = [ ...patternCategories ];\n\t\tuserPatternCategories?.forEach( ( userCategory ) => {\n\t\t\tif (\n\t\t\t\t! categories.find(\n\t\t\t\t\t( existingCategory ) =>\n\t\t\t\t\t\texistingCategory.name === userCategory.name\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tcategories.push( userCategory );\n\t\t\t}\n\t\t} );\n\t\treturn categories;\n\t}, [ patternCategories, userPatternCategories ] );\n\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\n\tconst onClickPattern = useCallback(\n\t\t( pattern, blocks ) => {\n\t\t\tconst destinationRootClientId = isQuick\n\t\t\t\t? rootClientId\n\t\t\t\t: getClosestAllowedInsertionPointForPattern(\n\t\t\t\t\t\tpattern,\n\t\t\t\t\t\trootClientId\n\t\t\t\t  );\n\t\t\tif ( destinationRootClientId === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst patternBlocks =\n\t\t\t\tpattern.type === INSERTER_PATTERN_TYPES.user &&\n\t\t\t\tpattern.syncStatus !== 'unsynced'\n\t\t\t\t\t? [ createBlock( 'core/block', { ref: pattern.id } ) ]\n\t\t\t\t\t: blocks;\n\t\t\tonInsert(\n\t\t\t\t( patternBlocks ?? [] ).map( ( block ) => {\n\t\t\t\t\tconst clonedBlock = cloneBlock( block );\n\t\t\t\t\tif (\n\t\t\t\t\t\tclonedBlock.attributes.metadata?.categories?.includes(\n\t\t\t\t\t\t\tselectedCategory\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tclonedBlock.attributes.metadata.categories = [\n\t\t\t\t\t\t\tselectedCategory,\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\treturn clonedBlock;\n\t\t\t\t} ),\n\t\t\t\tpattern.name,\n\t\t\t\tfalse,\n\t\t\t\tdestinationRootClientId\n\t\t\t);\n\t\t\tcreateSuccessNotice(\n\t\t\t\tsprintf(\n\t\t\t\t\t/* translators: %s: block pattern title. */\n\t\t\t\t\t__( 'Block pattern \"%s\" inserted.' ),\n\t\t\t\t\tpattern.title\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\tid: 'inserter-notice',\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t[\n\t\t\tcreateSuccessNotice,\n\t\t\tonInsert,\n\t\t\tselectedCategory,\n\t\t\trootClientId,\n\t\t\tgetClosestAllowedInsertionPointForPattern,\n\t\t\tisQuick,\n\t\t]\n\t);\n\n\treturn [ patterns, allCategories, onClickPattern ];\n};\n\nexport default usePatternsState;\n","/**\n * Locale character mapping rules.\n */\ninterface Locale {\n  regexp: RegExp;\n  map: Record<string, string>;\n}\n\n/**\n * Source: ftp://ftp.unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt\n */\nconst SUPPORTED_LOCALE: Record<string, Locale> = {\n  tr: {\n    regexp: /\\u0130|\\u0049|\\u0049\\u0307/g,\n    map: {\n      : \"\\u0069\",\n      I: \"\\u0131\",\n      I: \"\\u0069\",\n    },\n  },\n  az: {\n    regexp: /\\u0130/g,\n    map: {\n      : \"\\u0069\",\n      I: \"\\u0131\",\n      I: \"\\u0069\",\n    },\n  },\n  lt: {\n    regexp: /\\u0049|\\u004A|\\u012E|\\u00CC|\\u00CD|\\u0128/g,\n    map: {\n      I: \"\\u0069\\u0307\",\n      J: \"\\u006A\\u0307\",\n      : \"\\u012F\\u0307\",\n      : \"\\u0069\\u0307\\u0300\",\n      : \"\\u0069\\u0307\\u0301\",\n      : \"\\u0069\\u0307\\u0303\",\n    },\n  },\n};\n\n/**\n * Localized lower case.\n */\nexport function localeLowerCase(str: string, locale: string) {\n  const lang = SUPPORTED_LOCALE[locale.toLowerCase()];\n  if (lang) return lowerCase(str.replace(lang.regexp, (m) => lang.map[m]));\n  return lowerCase(str);\n}\n\n/**\n * Lower case as a function.\n */\nexport function lowerCase(str: string) {\n  return str.toLowerCase();\n}\n","import { lowerCase } from \"lower-case\";\n\nexport interface Options {\n  splitRegexp?: RegExp | RegExp[];\n  stripRegexp?: RegExp | RegExp[];\n  delimiter?: string;\n  transform?: (part: string, index: number, parts: string[]) => string;\n}\n\n// Support camel case (\"camelCase\" -> \"camel Case\" and \"CAMELCase\" -> \"CAMEL Case\").\nconst DEFAULT_SPLIT_REGEXP = [/([a-z0-9])([A-Z])/g, /([A-Z])([A-Z][a-z])/g];\n\n// Remove all non-word characters.\nconst DEFAULT_STRIP_REGEXP = /[^A-Z0-9]+/gi;\n\n/**\n * Normalize the string into something other libraries can manipulate easier.\n */\nexport function noCase(input: string, options: Options = {}) {\n  const {\n    splitRegexp = DEFAULT_SPLIT_REGEXP,\n    stripRegexp = DEFAULT_STRIP_REGEXP,\n    transform = lowerCase,\n    delimiter = \" \",\n  } = options;\n\n  let result = replace(\n    replace(input, splitRegexp, \"$1\\0$2\"),\n    stripRegexp,\n    \"\\0\"\n  );\n  let start = 0;\n  let end = result.length;\n\n  // Trim the delimiter from around the output string.\n  while (result.charAt(start) === \"\\0\") start++;\n  while (result.charAt(end - 1) === \"\\0\") end--;\n\n  // Transform each token independently.\n  return result.slice(start, end).split(\"\\0\").map(transform).join(delimiter);\n}\n\n/**\n * Replace `re` in the input string with the replacement value.\n */\nfunction replace(input: string, re: RegExp | RegExp[], value: string) {\n  if (re instanceof RegExp) return input.replace(re, value);\n  return re.reduce((input, re) => input.replace(re, value), input);\n}\n","/**\n * External dependencies\n */\nimport removeAccents from 'remove-accents';\nimport { noCase } from 'change-case';\n\n// Default search helpers.\nconst defaultGetName = ( item ) => item.name || '';\nconst defaultGetTitle = ( item ) => item.title;\nconst defaultGetDescription = ( item ) => item.description || '';\nconst defaultGetKeywords = ( item ) => item.keywords || [];\nconst defaultGetCategory = ( item ) => item.category;\nconst defaultGetCollection = () => null;\n\n// Normalization regexes\nconst splitRegexp = [\n\t/([\\p{Ll}\\p{Lo}\\p{N}])([\\p{Lu}\\p{Lt}])/gu, // One lowercase or digit, followed by one uppercase.\n\t/([\\p{Lu}\\p{Lt}])([\\p{Lu}\\p{Lt}][\\p{Ll}\\p{Lo}])/gu, // One uppercase followed by one uppercase and one lowercase.\n];\nconst stripRegexp = /(\\p{C}|\\p{P}|\\p{S})+/giu; // Anything that's not a punctuation, symbol or control/format character.\n\n// Normalization cache\nconst extractedWords = new Map();\nconst normalizedStrings = new Map();\n\n/**\n * Extracts words from an input string.\n *\n * @param {string} input The input string.\n *\n * @return {Array} Words, extracted from the input string.\n */\nexport function extractWords( input = '' ) {\n\tif ( extractedWords.has( input ) ) {\n\t\treturn extractedWords.get( input );\n\t}\n\n\tconst result = noCase( input, {\n\t\tsplitRegexp,\n\t\tstripRegexp,\n\t} )\n\t\t.split( ' ' )\n\t\t.filter( Boolean );\n\n\textractedWords.set( input, result );\n\n\treturn result;\n}\n\n/**\n * Sanitizes the search input string.\n *\n * @param {string} input The search input to normalize.\n *\n * @return {string} The normalized search input.\n */\nexport function normalizeString( input = '' ) {\n\tif ( normalizedStrings.has( input ) ) {\n\t\treturn normalizedStrings.get( input );\n\t}\n\n\t// Disregard diacritics.\n\t//  Input: \"mdia\"\n\tlet result = removeAccents( input );\n\n\t// Accommodate leading slash, matching autocomplete expectations.\n\t//  Input: \"/media\"\n\tresult = result.replace( /^\\//, '' );\n\n\t// Lowercase.\n\t//  Input: \"MEDIA\"\n\tresult = result.toLowerCase();\n\n\tnormalizedStrings.set( input, result );\n\n\treturn result;\n}\n\n/**\n * Converts the search term into a list of normalized terms.\n *\n * @param {string} input The search term to normalize.\n *\n * @return {string[]} The normalized list of search terms.\n */\nexport const getNormalizedSearchTerms = ( input = '' ) => {\n\treturn extractWords( normalizeString( input ) );\n};\n\nconst removeMatchingTerms = ( unmatchedTerms, unprocessedTerms ) => {\n\treturn unmatchedTerms.filter(\n\t\t( term ) =>\n\t\t\t! getNormalizedSearchTerms( unprocessedTerms ).some(\n\t\t\t\t( unprocessedTerm ) => unprocessedTerm.includes( term )\n\t\t\t)\n\t);\n};\n\nexport const searchBlockItems = (\n\titems,\n\tcategories,\n\tcollections,\n\tsearchInput\n) => {\n\tconst normalizedSearchTerms = getNormalizedSearchTerms( searchInput );\n\tif ( normalizedSearchTerms.length === 0 ) {\n\t\treturn items;\n\t}\n\n\tconst config = {\n\t\tgetCategory: ( item ) =>\n\t\t\tcategories.find( ( { slug } ) => slug === item.category )?.title,\n\t\tgetCollection: ( item ) =>\n\t\t\tcollections[ item.name.split( '/' )[ 0 ] ]?.title,\n\t};\n\n\treturn searchItems( items, searchInput, config );\n};\n\n/**\n * Filters an item list given a search term.\n *\n * @param {Array}  items       Item list\n * @param {string} searchInput Search input.\n * @param {Object} config      Search Config.\n *\n * @return {Array} Filtered item list.\n */\nexport const searchItems = ( items = [], searchInput = '', config = {} ) => {\n\tconst normalizedSearchTerms = getNormalizedSearchTerms( searchInput );\n\tif ( normalizedSearchTerms.length === 0 ) {\n\t\treturn items;\n\t}\n\n\tconst rankedItems = items\n\t\t.map( ( item ) => {\n\t\t\treturn [ item, getItemSearchRank( item, searchInput, config ) ];\n\t\t} )\n\t\t.filter( ( [ , rank ] ) => rank > 0 );\n\n\trankedItems.sort( ( [ , rank1 ], [ , rank2 ] ) => rank2 - rank1 );\n\treturn rankedItems.map( ( [ item ] ) => item );\n};\n\n/**\n * Get the search rank for a given item and a specific search term.\n * The better the match, the higher the rank.\n * If the rank equals 0, it should be excluded from the results.\n *\n * @param {Object} item       Item to filter.\n * @param {string} searchTerm Search term.\n * @param {Object} config     Search Config.\n *\n * @return {number} Search Rank.\n */\nexport function getItemSearchRank( item, searchTerm, config = {} ) {\n\tconst {\n\t\tgetName = defaultGetName,\n\t\tgetTitle = defaultGetTitle,\n\t\tgetDescription = defaultGetDescription,\n\t\tgetKeywords = defaultGetKeywords,\n\t\tgetCategory = defaultGetCategory,\n\t\tgetCollection = defaultGetCollection,\n\t} = config;\n\n\tconst name = getName( item );\n\tconst title = getTitle( item );\n\tconst description = getDescription( item );\n\tconst keywords = getKeywords( item );\n\tconst category = getCategory( item );\n\tconst collection = getCollection( item );\n\n\tconst normalizedSearchInput = normalizeString( searchTerm );\n\tconst normalizedTitle = normalizeString( title );\n\n\tlet rank = 0;\n\n\t// Prefers exact matches\n\t// Then prefers if the beginning of the title matches the search term\n\t// name, keywords, categories, collection, variations match come later.\n\tif ( normalizedSearchInput === normalizedTitle ) {\n\t\trank += 30;\n\t} else if ( normalizedTitle.startsWith( normalizedSearchInput ) ) {\n\t\trank += 20;\n\t} else {\n\t\tconst terms = [\n\t\t\tname,\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\t...keywords,\n\t\t\tcategory,\n\t\t\tcollection,\n\t\t].join( ' ' );\n\t\tconst normalizedSearchTerms = extractWords( normalizedSearchInput );\n\t\tconst unmatchedTerms = removeMatchingTerms(\n\t\t\tnormalizedSearchTerms,\n\t\t\tterms\n\t\t);\n\n\t\tif ( unmatchedTerms.length === 0 ) {\n\t\t\trank += 10;\n\t\t}\n\t}\n\n\t// Give a better rank to \"core\" namespaced items.\n\tif ( rank !== 0 && name.startsWith( 'core/' ) ) {\n\t\tconst isCoreBlockVariation = name !== item.id;\n\t\t// Give a bit better rank to \"core\" blocks over \"core\" block variations.\n\t\trank += isCoreBlockVariation ? 1 : 2;\n\t}\n\n\treturn rank;\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo, useState, useEffect } from '@wordpress/element';\nimport { usePrevious } from '@wordpress/compose';\nimport { getScrollContainer } from '@wordpress/dom';\n\nconst PAGE_SIZE = 20;\n\n/**\n * Supplies values needed to page the patterns list client side.\n *\n * @param {Array}  currentCategoryPatterns An array of the current patterns to display.\n * @param {string} currentCategory         The currently selected category.\n * @param {Object} scrollContainerRef      Ref of container to to find scroll container for when moving between pages.\n * @param {string} currentFilter           The currently search filter.\n *\n * @return {Object} Returns the relevant paging values. (totalItems, categoryPatternsList, numPages, changePage, currentPage)\n */\nexport default function usePatternsPaging(\n\tcurrentCategoryPatterns,\n\tcurrentCategory,\n\tscrollContainerRef,\n\tcurrentFilter = ''\n) {\n\tconst [ currentPage, setCurrentPage ] = useState( 1 );\n\tconst previousCategory = usePrevious( currentCategory );\n\tconst previousFilter = usePrevious( currentFilter );\n\tif (\n\t\t( previousCategory !== currentCategory ||\n\t\t\tpreviousFilter !== currentFilter ) &&\n\t\tcurrentPage !== 1\n\t) {\n\t\tsetCurrentPage( 1 );\n\t}\n\tconst totalItems = currentCategoryPatterns.length;\n\tconst pageIndex = currentPage - 1;\n\tconst categoryPatterns = useMemo( () => {\n\t\treturn currentCategoryPatterns.slice(\n\t\t\tpageIndex * PAGE_SIZE,\n\t\t\tpageIndex * PAGE_SIZE + PAGE_SIZE\n\t\t);\n\t}, [ pageIndex, currentCategoryPatterns ] );\n\tconst numPages = Math.ceil( currentCategoryPatterns.length / PAGE_SIZE );\n\tconst changePage = ( page ) => {\n\t\tconst scrollContainer = getScrollContainer(\n\t\t\tscrollContainerRef?.current\n\t\t);\n\t\tscrollContainer?.scrollTo( 0, 0 );\n\n\t\tsetCurrentPage( page );\n\t};\n\n\tuseEffect(\n\t\tfunction scrollToTopOnCategoryChange() {\n\t\t\tconst scrollContainer = getScrollContainer(\n\t\t\t\tscrollContainerRef?.current\n\t\t\t);\n\t\t\tscrollContainer?.scrollTo( 0, 0 );\n\t\t},\n\t\t[ currentCategory, scrollContainerRef ]\n\t);\n\n\treturn {\n\t\ttotalItems,\n\t\tcategoryPatterns,\n\t\tnumPages,\n\t\tchangePage,\n\t\tcurrentPage,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo, useEffect, useRef, useState } from '@wordpress/element';\nimport { _n, sprintf } from '@wordpress/i18n';\nimport { useDebounce } from '@wordpress/compose';\nimport { __experimentalHeading as Heading } from '@wordpress/components';\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport BlockPatternsList from '../../block-patterns-list';\nimport useInsertionPoint from '../hooks/use-insertion-point';\nimport usePatternsState from '../hooks/use-patterns-state';\nimport InserterListbox from '../../inserter-listbox';\nimport { searchItems } from '../search-items';\nimport BlockPatternsPaging from '../../block-patterns-paging';\nimport usePatternsPaging from '../hooks/use-patterns-paging';\nimport {\n\tINSERTER_PATTERN_TYPES,\n\tallPatternsCategory,\n\tmyPatternsCategory,\n\tstarterPatternsCategory,\n} from '../block-patterns-tab/utils';\n\nfunction PatternsListHeader( { filterValue, filteredBlockPatternsLength } ) {\n\tif ( ! filterValue ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Heading\n\t\t\tlevel={ 2 }\n\t\t\tlineHeight=\"48px\"\n\t\t\tclassName=\"block-editor-block-patterns-explorer__search-results-count\"\n\t\t>\n\t\t\t{ sprintf(\n\t\t\t\t/* translators: %d: number of patterns. */\n\t\t\t\t_n(\n\t\t\t\t\t'%d pattern found',\n\t\t\t\t\t'%d patterns found',\n\t\t\t\t\tfilteredBlockPatternsLength\n\t\t\t\t),\n\t\t\t\tfilteredBlockPatternsLength\n\t\t\t) }\n\t\t</Heading>\n\t);\n}\n\nfunction PatternList( {\n\tsearchValue,\n\tselectedCategory,\n\tpatternCategories,\n\trootClientId,\n\tonModalClose,\n} ) {\n\tconst container = useRef();\n\tconst debouncedSpeak = useDebounce( speak, 500 );\n\tconst [ destinationRootClientId, onInsertBlocks ] = useInsertionPoint( {\n\t\trootClientId,\n\t\tshouldFocusBlock: true,\n\t} );\n\tconst [ patterns, , onClickPattern ] = usePatternsState(\n\t\tonInsertBlocks,\n\t\tdestinationRootClientId,\n\t\tselectedCategory\n\t);\n\n\tconst registeredPatternCategories = useMemo(\n\t\t() =>\n\t\t\tpatternCategories.map(\n\t\t\t\t( patternCategory ) => patternCategory.name\n\t\t\t),\n\t\t[ patternCategories ]\n\t);\n\n\tconst filteredBlockPatterns = useMemo( () => {\n\t\tconst filteredPatterns = patterns.filter( ( pattern ) => {\n\t\t\tif ( selectedCategory === allPatternsCategory.name ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tselectedCategory === myPatternsCategory.name &&\n\t\t\t\tpattern.type === INSERTER_PATTERN_TYPES.user\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tselectedCategory === starterPatternsCategory.name &&\n\t\t\t\tpattern.blockTypes?.includes( 'core/post-content' )\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif ( selectedCategory === 'uncategorized' ) {\n\t\t\t\tconst hasKnownCategory =\n\t\t\t\t\tpattern.categories?.some( ( category ) =>\n\t\t\t\t\t\tregisteredPatternCategories.includes( category )\n\t\t\t\t\t) ?? false;\n\n\t\t\t\treturn ! pattern.categories?.length || ! hasKnownCategory;\n\t\t\t}\n\n\t\t\treturn pattern.categories?.includes( selectedCategory );\n\t\t} );\n\n\t\tif ( ! searchValue ) {\n\t\t\treturn filteredPatterns;\n\t\t}\n\n\t\treturn searchItems( filteredPatterns, searchValue );\n\t}, [\n\t\tsearchValue,\n\t\tpatterns,\n\t\tselectedCategory,\n\t\tregisteredPatternCategories,\n\t] );\n\n\t// Announce search results on change.\n\tuseEffect( () => {\n\t\tif ( ! searchValue ) {\n\t\t\treturn;\n\t\t}\n\t\tconst count = filteredBlockPatterns.length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [ searchValue, debouncedSpeak, filteredBlockPatterns.length ] );\n\n\tconst pagingProps = usePatternsPaging(\n\t\tfilteredBlockPatterns,\n\t\tselectedCategory,\n\t\tcontainer\n\t);\n\n\t// Reset page when search value changes.\n\tconst [ previousSearchValue, setPreviousSearchValue ] =\n\t\tuseState( searchValue );\n\tif ( searchValue !== previousSearchValue ) {\n\t\tsetPreviousSearchValue( searchValue );\n\t\tpagingProps.changePage( 1 );\n\t}\n\n\tconst hasItems = !! filteredBlockPatterns?.length;\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block-editor-block-patterns-explorer__list\"\n\t\t\tref={ container }\n\t\t>\n\t\t\t<PatternsListHeader\n\t\t\t\tfilterValue={ searchValue }\n\t\t\t\tfilteredBlockPatternsLength={ filteredBlockPatterns.length }\n\t\t\t/>\n\n\t\t\t<InserterListbox>\n\t\t\t\t{ hasItems && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\t\tblockPatterns={ pagingProps.categoryPatterns }\n\t\t\t\t\t\t\tonClickPattern={ ( pattern, blocks ) => {\n\t\t\t\t\t\t\t\tonClickPattern( pattern, blocks );\n\t\t\t\t\t\t\t\tonModalClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tisDraggable={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BlockPatternsPaging { ...pagingProps } />\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</InserterListbox>\n\t\t</div>\n\t);\n}\n\nexport default PatternList;\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { _x, _n, sprintf } from '@wordpress/i18n';\n\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport usePatternsState from '../hooks/use-patterns-state';\nimport {\n\tisPatternFiltered,\n\tallPatternsCategory,\n\tmyPatternsCategory,\n\tstarterPatternsCategory,\n\tINSERTER_PATTERN_TYPES,\n} from './utils';\n\nfunction hasRegisteredCategory( pattern, allCategories ) {\n\tif ( ! pattern.categories || ! pattern.categories.length ) {\n\t\treturn false;\n\t}\n\n\treturn pattern.categories.some( ( cat ) =>\n\t\tallCategories.some( ( category ) => category.name === cat )\n\t);\n}\n\nexport function usePatternCategories( rootClientId, sourceFilter = 'all' ) {\n\tconst [ patterns, allCategories ] = usePatternsState(\n\t\tundefined,\n\t\trootClientId\n\t);\n\n\tconst filteredPatterns = useMemo(\n\t\t() =>\n\t\t\tsourceFilter === 'all'\n\t\t\t\t? patterns\n\t\t\t\t: patterns.filter(\n\t\t\t\t\t\t( pattern ) =>\n\t\t\t\t\t\t\t! isPatternFiltered( pattern, sourceFilter )\n\t\t\t\t  ),\n\t\t[ sourceFilter, patterns ]\n\t);\n\n\t// Remove any empty categories.\n\tconst populatedCategories = useMemo( () => {\n\t\tconst categories = allCategories\n\t\t\t.filter( ( category ) =>\n\t\t\t\tfilteredPatterns.some( ( pattern ) =>\n\t\t\t\t\tpattern.categories?.includes( category.name )\n\t\t\t\t)\n\t\t\t)\n\t\t\t.sort( ( a, b ) => a.label.localeCompare( b.label ) );\n\n\t\tif (\n\t\t\tfilteredPatterns.some(\n\t\t\t\t( pattern ) => ! hasRegisteredCategory( pattern, allCategories )\n\t\t\t) &&\n\t\t\t! categories.find(\n\t\t\t\t( category ) => category.name === 'uncategorized'\n\t\t\t)\n\t\t) {\n\t\t\tcategories.push( {\n\t\t\t\tname: 'uncategorized',\n\t\t\t\tlabel: _x( 'Uncategorized' ),\n\t\t\t} );\n\t\t}\n\t\tif (\n\t\t\tfilteredPatterns.some( ( pattern ) =>\n\t\t\t\tpattern.blockTypes?.includes( 'core/post-content' )\n\t\t\t)\n\t\t) {\n\t\t\tcategories.unshift( starterPatternsCategory );\n\t\t}\n\t\tif (\n\t\t\tfilteredPatterns.some(\n\t\t\t\t( pattern ) => pattern.type === INSERTER_PATTERN_TYPES.user\n\t\t\t)\n\t\t) {\n\t\t\tcategories.unshift( myPatternsCategory );\n\t\t}\n\t\tif ( filteredPatterns.length > 0 ) {\n\t\t\tcategories.unshift( {\n\t\t\t\tname: allPatternsCategory.name,\n\t\t\t\tlabel: allPatternsCategory.label,\n\t\t\t} );\n\t\t}\n\t\tspeak(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %d: number of categories . */\n\t\t\t\t_n(\n\t\t\t\t\t'%d category button displayed.',\n\t\t\t\t\t'%d category buttons displayed.',\n\t\t\t\t\tcategories.length\n\t\t\t\t),\n\t\t\t\tcategories.length\n\t\t\t)\n\t\t);\n\t\treturn categories;\n\t}, [ allCategories, filteredPatterns ] );\n\n\treturn populatedCategories;\n}\n","/**\n * WordPress dependencies\n */\nimport { Modal } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport PatternExplorerSidebar from './pattern-explorer-sidebar';\nimport PatternList from './pattern-list';\nimport { usePatternCategories } from '../block-patterns-tab/use-pattern-categories';\n\nfunction PatternsExplorer( { initialCategory, rootClientId, onModalClose } ) {\n\tconst [ searchValue, setSearchValue ] = useState( '' );\n\tconst [ selectedCategory, setSelectedCategory ] = useState(\n\t\tinitialCategory?.name\n\t);\n\n\tconst patternCategories = usePatternCategories( rootClientId );\n\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-explorer\">\n\t\t\t<PatternExplorerSidebar\n\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t\tpatternCategories={ patternCategories }\n\t\t\t\tonClickCategory={ setSelectedCategory }\n\t\t\t\tsearchValue={ searchValue }\n\t\t\t\tsetSearchValue={ setSearchValue }\n\t\t\t/>\n\t\t\t<PatternList\n\t\t\t\tsearchValue={ searchValue }\n\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t\tpatternCategories={ patternCategories }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tonModalClose={ onModalClose }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nfunction PatternsExplorerModal( { onModalClose, ...restProps } ) {\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Patterns' ) }\n\t\t\tonRequestClose={ onModalClose }\n\t\t\tisFullScreen\n\t\t>\n\t\t\t<PatternsExplorer onModalClose={ onModalClose } { ...restProps } />\n\t\t</Modal>\n\t);\n}\n\nexport default PatternsExplorerModal;\n","/**\n * WordPress dependencies\n */\nimport { __, isRTL } from '@wordpress/i18n';\nimport {\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalItem as Item,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\t__experimentalSpacer as Spacer,\n\t__experimentalHeading as Heading,\n\t__experimentalView as View,\n\tNavigator,\n\tFlexBlock,\n} from '@wordpress/components';\nimport { Icon, chevronRight, chevronLeft } from '@wordpress/icons';\n\nfunction ScreenHeader( { title } ) {\n\treturn (\n\t\t<VStack spacing={ 0 }>\n\t\t\t<View>\n\t\t\t\t<Spacer marginBottom={ 0 } paddingX={ 4 } paddingY={ 3 }>\n\t\t\t\t\t<HStack spacing={ 2 }>\n\t\t\t\t\t\t<Navigator.BackButton\n\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t// TODO: This style override is also used in ToolsPanelHeader.\n\t\t\t\t\t\t\t\t// It should be supported out-of-the-box by Button.\n\t\t\t\t\t\t\t\t{ minWidth: 24, padding: 0 }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ticon={ isRTL() ? chevronRight : chevronLeft }\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tlabel={ __( 'Back' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Spacer>\n\t\t\t\t\t\t\t<Heading level={ 5 }>{ title }</Heading>\n\t\t\t\t\t\t</Spacer>\n\t\t\t\t\t</HStack>\n\t\t\t\t</Spacer>\n\t\t\t</View>\n\t\t</VStack>\n\t);\n}\n\nexport default function MobileTabNavigation( { categories, children } ) {\n\treturn (\n\t\t<Navigator\n\t\t\tinitialPath=\"/\"\n\t\t\tclassName=\"block-editor-inserter__mobile-tab-navigation\"\n\t\t>\n\t\t\t<Navigator.Screen path=\"/\">\n\t\t\t\t<ItemGroup>\n\t\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t\t<Navigator.Button\n\t\t\t\t\t\t\tkey={ category.name }\n\t\t\t\t\t\t\tpath={ `/category/${ category.name }` }\n\t\t\t\t\t\t\tas={ Item }\n\t\t\t\t\t\t\tisAction\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<HStack>\n\t\t\t\t\t\t\t\t<FlexBlock>{ category.label }</FlexBlock>\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\tisRTL() ? chevronLeft : chevronRight\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t</Navigator.Button>\n\t\t\t\t\t) ) }\n\t\t\t\t</ItemGroup>\n\t\t\t</Navigator.Screen>\n\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t<Navigator.Screen\n\t\t\t\t\tkey={ category.name }\n\t\t\t\t\tpath={ `/category/${ category.name }` }\n\t\t\t\t>\n\t\t\t\t\t<ScreenHeader title={ __( 'Back' ) } />\n\t\t\t\t\t{ children( category ) }\n\t\t\t\t</Navigator.Screen>\n\t\t\t) ) }\n\t\t</Navigator>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tSVG,\n\tPath,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItemsChoice,\n\tExternalLink,\n} from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\nimport { Icon } from '@wordpress/icons';\nimport { useMemo, createInterpolateElement } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport {\n\tmyPatternsCategory,\n\tINSERTER_SYNC_TYPES,\n\tINSERTER_PATTERN_TYPES,\n} from './utils';\n\nconst getShouldDisableSyncFilter = ( sourceFilter ) =>\n\tsourceFilter !== 'all' && sourceFilter !== 'user';\nconst getShouldHideSourcesFilter = ( category ) => {\n\treturn category.name === myPatternsCategory.name;\n};\n\nconst PATTERN_SOURCE_MENU_OPTIONS = [\n\t{\n\t\tvalue: 'all',\n\t\tlabel: _x( 'All', 'patterns' ),\n\t},\n\t{\n\t\tvalue: INSERTER_PATTERN_TYPES.directory,\n\t\tlabel: __( 'Pattern Directory' ),\n\t},\n\t{\n\t\tvalue: INSERTER_PATTERN_TYPES.theme,\n\t\tlabel: __( 'Theme & Plugins' ),\n\t},\n\t{\n\t\tvalue: INSERTER_PATTERN_TYPES.user,\n\t\tlabel: __( 'User' ),\n\t},\n];\n\nexport function PatternsFilter( {\n\tsetPatternSyncFilter,\n\tsetPatternSourceFilter,\n\tpatternSyncFilter,\n\tpatternSourceFilter,\n\tscrollContainerRef,\n\tcategory,\n} ) {\n\t// If the category is `myPatterns` then we need to set the source filter to `user`, but\n\t// we do this by deriving from props rather than calling setPatternSourceFilter otherwise\n\t// the user may be confused when switching to another category if the haven't explicitly set\n\t// this filter themselves.\n\tconst currentPatternSourceFilter =\n\t\tcategory.name === myPatternsCategory.name\n\t\t\t? INSERTER_PATTERN_TYPES.user\n\t\t\t: patternSourceFilter;\n\n\t// We need to disable the sync filter option if the source filter is not 'all' or 'user'\n\t// otherwise applying them will just result in no patterns being shown.\n\tconst shouldDisableSyncFilter = getShouldDisableSyncFilter(\n\t\tcurrentPatternSourceFilter\n\t);\n\n\t// We also hide the directory and theme source filter if the category is `myPatterns`\n\t// otherwise there will only be one option available.\n\tconst shouldHideSourcesFilter = getShouldHideSourcesFilter( category );\n\n\tconst patternSyncMenuOptions = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\tvalue: 'all',\n\t\t\t\tlabel: _x( 'All', 'patterns' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: INSERTER_SYNC_TYPES.full,\n\t\t\t\tlabel: _x( 'Synced', 'patterns' ),\n\t\t\t\tdisabled: shouldDisableSyncFilter,\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: INSERTER_SYNC_TYPES.unsynced,\n\t\t\t\tlabel: _x( 'Not synced', 'patterns' ),\n\t\t\t\tdisabled: shouldDisableSyncFilter,\n\t\t\t},\n\t\t],\n\t\t[ shouldDisableSyncFilter ]\n\t);\n\n\tfunction handleSetSourceFilterChange( newSourceFilter ) {\n\t\tsetPatternSourceFilter( newSourceFilter );\n\t\tif ( getShouldDisableSyncFilter( newSourceFilter ) ) {\n\t\t\tsetPatternSyncFilter( 'all' );\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<DropdownMenu\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tplacement: 'right-end',\n\t\t\t\t} }\n\t\t\t\tlabel={ __( 'Filter patterns' ) }\n\t\t\t\ttoggleProps={ { size: 'compact' } }\n\t\t\t\ticon={\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t<SVG\n\t\t\t\t\t\t\t\twidth=\"24\"\n\t\t\t\t\t\t\t\theight=\"24\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Path\n\t\t\t\t\t\t\t\t\td=\"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z\"\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</SVG>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ () => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ ! shouldHideSourcesFilter && (\n\t\t\t\t\t\t\t<MenuGroup label={ __( 'Source' ) }>\n\t\t\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\t\t\tchoices={ PATTERN_SOURCE_MENU_OPTIONS }\n\t\t\t\t\t\t\t\t\tonSelect={ ( value ) => {\n\t\t\t\t\t\t\t\t\t\thandleSetSourceFilterChange( value );\n\t\t\t\t\t\t\t\t\t\tscrollContainerRef.current?.scrollTo(\n\t\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tvalue={ currentPatternSourceFilter }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<MenuGroup label={ __( 'Type' ) }>\n\t\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\t\tchoices={ patternSyncMenuOptions }\n\t\t\t\t\t\t\t\tonSelect={ ( value ) => {\n\t\t\t\t\t\t\t\t\tsetPatternSyncFilter( value );\n\t\t\t\t\t\t\t\t\tscrollContainerRef.current?.scrollTo(\n\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tvalue={ patternSyncFilter }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<div className=\"block-editor-inserter__patterns-filter-help\">\n\t\t\t\t\t\t\t{ createInterpolateElement(\n\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t'Patterns are available from the <Link>WordPress.org Pattern Directory</Link>, bundled in the active theme, or created by users on this site. Only patterns created on this site can be synced.'\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tLink: (\n\t\t\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'https://wordpress.org/patterns/'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</DropdownMenu>\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tuseMemo,\n\tuseState,\n\tuseCallback,\n\tuseRef,\n\tuseEffect,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\nimport {\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\t__experimentalHeading as Heading,\n\t__experimentalText as Text,\n\tFlexBlock,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport usePatternsState from '../hooks/use-patterns-state';\nimport BlockPatternsList from '../../block-patterns-list';\nimport usePatternsPaging from '../hooks/use-patterns-paging';\nimport { PatternsFilter } from './patterns-filter';\nimport { usePatternCategories } from './use-pattern-categories';\nimport {\n\tisPatternFiltered,\n\tallPatternsCategory,\n\tmyPatternsCategory,\n\tstarterPatternsCategory,\n\tINSERTER_PATTERN_TYPES,\n} from './utils';\n\nconst noop = () => {};\n\nexport function PatternCategoryPreviews( {\n\trootClientId,\n\tonInsert,\n\tonHover = noop,\n\tcategory,\n\tshowTitlesAsTooltip,\n} ) {\n\tconst [ allPatterns, , onClickPattern ] = usePatternsState(\n\t\tonInsert,\n\t\trootClientId,\n\t\tcategory?.name\n\t);\n\tconst [ patternSyncFilter, setPatternSyncFilter ] = useState( 'all' );\n\tconst [ patternSourceFilter, setPatternSourceFilter ] = useState( 'all' );\n\n\tconst availableCategories = usePatternCategories(\n\t\trootClientId,\n\t\tpatternSourceFilter\n\t);\n\tconst scrollContainerRef = useRef();\n\tconst currentCategoryPatterns = useMemo(\n\t\t() =>\n\t\t\tallPatterns.filter( ( pattern ) => {\n\t\t\t\tif (\n\t\t\t\t\tisPatternFiltered(\n\t\t\t\t\t\tpattern,\n\t\t\t\t\t\tpatternSourceFilter,\n\t\t\t\t\t\tpatternSyncFilter\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif ( category.name === allPatternsCategory.name ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tcategory.name === myPatternsCategory.name &&\n\t\t\t\t\tpattern.type === INSERTER_PATTERN_TYPES.user\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tcategory.name === starterPatternsCategory.name &&\n\t\t\t\t\tpattern.blockTypes?.includes( 'core/post-content' )\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif ( category.name === 'uncategorized' ) {\n\t\t\t\t\t// The uncategorized category should show all the patterns without any category...\n\t\t\t\t\tif ( ! pattern.categories ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// ...or with no available category.\n\t\t\t\t\treturn ! pattern.categories.some( ( catName ) =>\n\t\t\t\t\t\tavailableCategories.some( ( c ) => c.name === catName )\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn pattern.categories?.includes( category.name );\n\t\t\t} ),\n\t\t[\n\t\t\tallPatterns,\n\t\t\tavailableCategories,\n\t\t\tcategory.name,\n\t\t\tpatternSourceFilter,\n\t\t\tpatternSyncFilter,\n\t\t]\n\t);\n\n\tconst pagingProps = usePatternsPaging(\n\t\tcurrentCategoryPatterns,\n\t\tcategory,\n\t\tscrollContainerRef\n\t);\n\tconst { changePage } = pagingProps;\n\n\t// Hide block pattern preview on unmount.\n\tuseEffect( () => () => onHover( null ), [] );\n\n\tconst onSetPatternSyncFilter = useCallback(\n\t\t( value ) => {\n\t\t\tsetPatternSyncFilter( value );\n\t\t\tchangePage( 1 );\n\t\t},\n\t\t[ setPatternSyncFilter, changePage ]\n\t);\n\tconst onSetPatternSourceFilter = useCallback(\n\t\t( value ) => {\n\t\t\tsetPatternSourceFilter( value );\n\t\t\tchangePage( 1 );\n\t\t},\n\t\t[ setPatternSourceFilter, changePage ]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<VStack\n\t\t\t\tspacing={ 2 }\n\t\t\t\tclassName=\"block-editor-inserter__patterns-category-panel-header\"\n\t\t\t>\n\t\t\t\t<HStack>\n\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t<Heading\n\t\t\t\t\t\t\tclassName=\"block-editor-inserter__patterns-category-panel-title\"\n\t\t\t\t\t\t\tsize={ 13 }\n\t\t\t\t\t\t\tlevel={ 4 }\n\t\t\t\t\t\t\tas=\"div\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ category.label }\n\t\t\t\t\t\t</Heading>\n\t\t\t\t\t</FlexBlock>\n\t\t\t\t\t<PatternsFilter\n\t\t\t\t\t\tpatternSyncFilter={ patternSyncFilter }\n\t\t\t\t\t\tpatternSourceFilter={ patternSourceFilter }\n\t\t\t\t\t\tsetPatternSyncFilter={ onSetPatternSyncFilter }\n\t\t\t\t\t\tsetPatternSourceFilter={ onSetPatternSourceFilter }\n\t\t\t\t\t\tscrollContainerRef={ scrollContainerRef }\n\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t/>\n\t\t\t\t</HStack>\n\t\t\t\t{ ! currentCategoryPatterns.length && (\n\t\t\t\t\t<Text\n\t\t\t\t\t\tvariant=\"muted\"\n\t\t\t\t\t\tclassName=\"block-editor-inserter__patterns-category-no-results\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'No results found' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t) }\n\t\t\t</VStack>\n\t\t\t{ currentCategoryPatterns.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<Text\n\t\t\t\t\t\tsize=\"12\"\n\t\t\t\t\t\tas=\"p\"\n\t\t\t\t\t\tclassName=\"block-editor-inserter__help-text\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Drag and drop patterns into the canvas.' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\tref={ scrollContainerRef }\n\t\t\t\t\t\tblockPatterns={ pagingProps.categoryPatterns }\n\t\t\t\t\t\tonClickPattern={ onClickPattern }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\tlabel={ category.label }\n\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\tcategory={ category.name }\n\t\t\t\t\t\tisDraggable\n\t\t\t\t\t\tshowTitlesAsTooltip={ showTitlesAsTooltip }\n\t\t\t\t\t\tpatternFilter={ patternSourceFilter }\n\t\t\t\t\t\tpagingProps={ pagingProps }\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { usePrevious, useReducedMotion } from '@wordpress/compose';\nimport {\n\tprivateApis as componentsPrivateApis,\n\t__unstableMotion as motion,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../../lock-unlock';\n\nconst { Tabs } = unlock( componentsPrivateApis );\n\nfunction CategoryTabs( {\n\tcategories,\n\tselectedCategory,\n\tonSelectCategory,\n\tchildren,\n} ) {\n\t// Copied from InterfaceSkeleton.\n\tconst ANIMATION_DURATION = 0.25;\n\tconst disableMotion = useReducedMotion();\n\tconst defaultTransition = {\n\t\ttype: 'tween',\n\t\tduration: disableMotion ? 0 : ANIMATION_DURATION,\n\t\tease: [ 0.6, 0, 0.4, 1 ],\n\t};\n\n\tconst previousSelectedCategory = usePrevious( selectedCategory );\n\n\tconst selectedTabId = selectedCategory ? selectedCategory.name : null;\n\tconst [ activeTabId, setActiveId ] = useState();\n\tconst firstTabId = categories?.[ 0 ]?.name;\n\n\t// If there is no active tab, make the first tab the active tab, so that\n\t// when focus is moved to the tablist, the first tab will be focused\n\t// despite not being selected\n\tif ( selectedTabId === null && ! activeTabId && firstTabId ) {\n\t\tsetActiveId( firstTabId );\n\t}\n\n\treturn (\n\t\t<Tabs\n\t\t\tselectOnMove={ false }\n\t\t\tselectedTabId={ selectedTabId }\n\t\t\torientation=\"vertical\"\n\t\t\tonSelect={ ( categoryId ) => {\n\t\t\t\t// Pass the full category object\n\t\t\t\tonSelectCategory(\n\t\t\t\t\tcategories.find(\n\t\t\t\t\t\t( category ) => category.name === categoryId\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} }\n\t\t\tactiveTabId={ activeTabId }\n\t\t\tonActiveTabIdChange={ setActiveId }\n\t\t>\n\t\t\t<Tabs.TabList className=\"block-editor-inserter__category-tablist\">\n\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t<Tabs.Tab\n\t\t\t\t\t\tkey={ category.name }\n\t\t\t\t\t\ttabId={ category.name }\n\t\t\t\t\t\taria-current={\n\t\t\t\t\t\t\tcategory === selectedCategory ? 'true' : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ category.label }\n\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t) ) }\n\t\t\t</Tabs.TabList>\n\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t<Tabs.TabPanel\n\t\t\t\t\tkey={ category.name }\n\t\t\t\t\ttabId={ category.name }\n\t\t\t\t\tfocusable={ false }\n\t\t\t\t>\n\t\t\t\t\t<motion.div\n\t\t\t\t\t\tclassName=\"block-editor-inserter__category-panel\"\n\t\t\t\t\t\tinitial={\n\t\t\t\t\t\t\t! previousSelectedCategory ? 'closed' : 'open'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tanimate=\"open\"\n\t\t\t\t\t\tvariants={ {\n\t\t\t\t\t\t\topen: {\n\t\t\t\t\t\t\t\ttransform: 'translateX( 0 )',\n\t\t\t\t\t\t\t\ttransitionEnd: {\n\t\t\t\t\t\t\t\t\tzIndex: '1',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclosed: {\n\t\t\t\t\t\t\t\ttransform: 'translateX( -100% )',\n\t\t\t\t\t\t\t\tzIndex: '-1',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t} }\n\t\t\t\t\t\ttransition={ defaultTransition }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</motion.div>\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t) ) }\n\t\t</Tabs>\n\t);\n}\n\nexport default CategoryTabs;\n","/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\nimport { Button } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport PatternsExplorerModal from '../block-patterns-explorer';\nimport MobileTabNavigation from '../mobile-tab-navigation';\nimport { PatternCategoryPreviews } from './pattern-category-previews';\nimport { usePatternCategories } from './use-pattern-categories';\nimport CategoryTabs from '../category-tabs';\nimport InserterNoResults from '../no-results';\n\nfunction BlockPatternsTab( {\n\tonSelectCategory,\n\tselectedCategory,\n\tonInsert,\n\trootClientId,\n\tchildren,\n} ) {\n\tconst [ showPatternsExplorer, setShowPatternsExplorer ] = useState( false );\n\n\tconst categories = usePatternCategories( rootClientId );\n\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\n\tif ( ! categories.length ) {\n\t\treturn <InserterNoResults />;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ ! isMobile && (\n\t\t\t\t<div className=\"block-editor-inserter__block-patterns-tabs-container\">\n\t\t\t\t\t<CategoryTabs\n\t\t\t\t\t\tcategories={ categories }\n\t\t\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t\t\t\tonSelectCategory={ onSelectCategory }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</CategoryTabs>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tclassName=\"block-editor-inserter__patterns-explore-button\"\n\t\t\t\t\t\tonClick={ () => setShowPatternsExplorer( true ) }\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Explore all patterns' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ isMobile && (\n\t\t\t\t<MobileTabNavigation categories={ categories }>\n\t\t\t\t\t{ ( category ) => (\n\t\t\t\t\t\t<div className=\"block-editor-inserter__category-panel\">\n\t\t\t\t\t\t\t<PatternCategoryPreviews\n\t\t\t\t\t\t\t\tkey={ category.name }\n\t\t\t\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</MobileTabNavigation>\n\t\t\t) }\n\t\t\t{ showPatternsExplorer && (\n\t\t\t\t<PatternsExplorerModal\n\t\t\t\t\tinitialCategory={ selectedCategory || categories[ 0 ] }\n\t\t\t\t\tpatternCategories={ categories }\n\t\t\t\t\tonModalClose={ () => setShowPatternsExplorer( false ) }\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default BlockPatternsTab;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst external = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z\" />\n\t</SVG>\n);\n\nexport default external;\n","/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\n\nconst mediaTypeTag = { image: 'img', video: 'video', audio: 'audio' };\n\n/** @typedef {import('./hooks').InserterMediaItem} InserterMediaItem */\n\n/**\n * Creates a block and a preview element from a media object.\n *\n * @param {InserterMediaItem}         media     The media object to create the block from.\n * @param {('image'|'audio'|'video')} mediaType The media type to create the block for.\n * @return {[WPBlock, JSX.Element]} An array containing the block and the preview element.\n */\nexport function getBlockAndPreviewFromMedia( media, mediaType ) {\n\t// Add the common attributes between the different media types.\n\tconst attributes = {\n\t\tid: media.id || undefined,\n\t\tcaption: media.caption || undefined,\n\t};\n\tconst mediaSrc = media.url;\n\tconst alt = media.alt || undefined;\n\tif ( mediaType === 'image' ) {\n\t\tattributes.url = mediaSrc;\n\t\tattributes.alt = alt;\n\t} else if ( [ 'video', 'audio' ].includes( mediaType ) ) {\n\t\tattributes.src = mediaSrc;\n\t}\n\tconst PreviewTag = mediaTypeTag[ mediaType ];\n\tconst preview = (\n\t\t<PreviewTag\n\t\t\tsrc={ media.previewUrl || mediaSrc }\n\t\t\talt={ alt }\n\t\t\tcontrols={ mediaType === 'audio' ? true : undefined }\n\t\t\tinert=\"true\"\n\t\t\tonError={ ( { currentTarget } ) => {\n\t\t\t\t// Fall back to the media source if the preview cannot be loaded.\n\t\t\t\tif ( currentTarget.src === media.previewUrl ) {\n\t\t\t\t\tcurrentTarget.src = mediaSrc;\n\t\t\t\t}\n\t\t\t} }\n\t\t/>\n\t);\n\treturn [ createBlock( `core/${ mediaType }`, attributes ), preview ];\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tTooltip,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItem,\n\tSpinner,\n\tModal,\n\tFlex,\n\tFlexItem,\n\tButton,\n\tComposite,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useMemo, useCallback, useState } from '@wordpress/element';\nimport { cloneBlock } from '@wordpress/blocks';\nimport { moreVertical, external } from '@wordpress/icons';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { isBlobURL } from '@wordpress/blob';\nimport { getFilename } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport InserterDraggableBlocks from '../../inserter-draggable-blocks';\nimport { getBlockAndPreviewFromMedia } from './utils';\nimport { store as blockEditorStore } from '../../../store';\n\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\nconst MEDIA_OPTIONS_POPOVER_PROPS = {\n\tplacement: 'bottom-end',\n\tclassName:\n\t\t'block-editor-inserter__media-list__item-preview-options__popover',\n};\n\nfunction MediaPreviewOptions( { category, media } ) {\n\tif ( ! category.getReportUrl ) {\n\t\treturn null;\n\t}\n\tconst reportUrl = category.getReportUrl( media );\n\treturn (\n\t\t<DropdownMenu\n\t\t\tclassName=\"block-editor-inserter__media-list__item-preview-options\"\n\t\t\tlabel={ __( 'Options' ) }\n\t\t\tpopoverProps={ MEDIA_OPTIONS_POPOVER_PROPS }\n\t\t\ticon={ moreVertical }\n\t\t>\n\t\t\t{ () => (\n\t\t\t\t<MenuGroup>\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\twindow.open( reportUrl, '_blank' ).focus()\n\t\t\t\t\t\t}\n\t\t\t\t\t\ticon={ external }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t/* translators: %s: The media type to report e.g: \"image\", \"video\", \"audio\" */\n\t\t\t\t\t\t\t__( 'Report %s' ),\n\t\t\t\t\t\t\tcategory.mediaType\n\t\t\t\t\t\t) }\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</MenuGroup>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n\nfunction InsertExternalImageModal( { onClose, onSubmit } ) {\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Insert external image' ) }\n\t\t\tonRequestClose={ onClose }\n\t\t\tclassName=\"block-editor-inserter-media-tab-media-preview-inserter-external-image-modal\"\n\t\t>\n\t\t\t<VStack spacing={ 3 }>\n\t\t\t\t<p>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'This image cannot be uploaded to your Media Library, but it can still be inserted as an external image.'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'External images can be removed by the external provider without warning and could even have legal compliance issues related to privacy legislation.'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t</VStack>\n\t\t\t<Flex\n\t\t\t\tclassName=\"block-editor-block-lock-modal__actions\"\n\t\t\t\tjustify=\"flex-end\"\n\t\t\t\texpanded={ false }\n\t\t\t>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tonClick={ onClose }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tonClick={ onSubmit }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Insert' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</Modal>\n\t);\n}\n\nexport function MediaPreview( { media, onClick, category } ) {\n\tconst [ showExternalUploadModal, setShowExternalUploadModal ] =\n\t\tuseState( false );\n\tconst [ isHovered, setIsHovered ] = useState( false );\n\tconst [ isInserting, setIsInserting ] = useState( false );\n\tconst [ block, preview ] = useMemo(\n\t\t() => getBlockAndPreviewFromMedia( media, category.mediaType ),\n\t\t[ media, category.mediaType ]\n\t);\n\tconst { createErrorNotice, createSuccessNotice } =\n\t\tuseDispatch( noticesStore );\n\tconst { getSettings, getBlock } = useSelect( blockEditorStore );\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\n\tconst onMediaInsert = useCallback(\n\t\t( previewBlock ) => {\n\t\t\t// Prevent multiple uploads when we're in the process of inserting.\n\t\t\tif ( isInserting ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst settings = getSettings();\n\t\t\tconst clonedBlock = cloneBlock( previewBlock );\n\t\t\tconst { id, url, caption } = clonedBlock.attributes;\n\n\t\t\t// User has no permission to upload media.\n\t\t\tif ( ! id && ! settings.mediaUpload ) {\n\t\t\t\tsetShowExternalUploadModal( true );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Media item already exists in library, so just insert it.\n\t\t\tif ( !! id ) {\n\t\t\t\tonClick( clonedBlock );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetIsInserting( true );\n\t\t\t// Media item does not exist in library, so try to upload it.\n\t\t\t// Fist fetch the image data. This may fail if the image host\n\t\t\t// doesn't allow CORS with the domain.\n\t\t\t// If this happens, we insert the image block using the external\n\t\t\t// URL and let the user know about the possible implications.\n\t\t\twindow\n\t\t\t\t.fetch( url )\n\t\t\t\t.then( ( response ) => response.blob() )\n\t\t\t\t.then( ( blob ) => {\n\t\t\t\t\tconst fileName = getFilename( url ) || 'image.jpg';\n\t\t\t\t\tconst file = new File( [ blob ], fileName, {\n\t\t\t\t\t\ttype: blob.type,\n\t\t\t\t\t} );\n\n\t\t\t\t\tsettings.mediaUpload( {\n\t\t\t\t\t\tfilesList: [ file ],\n\t\t\t\t\t\tadditionalData: { caption },\n\t\t\t\t\t\tonFileChange( [ img ] ) {\n\t\t\t\t\t\t\tif ( isBlobURL( img.url ) ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( ! getBlock( clonedBlock.clientId ) ) {\n\t\t\t\t\t\t\t\t// Ensure the block is only inserted once.\n\t\t\t\t\t\t\t\tonClick( {\n\t\t\t\t\t\t\t\t\t...clonedBlock,\n\t\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\t\t...clonedBlock.attributes,\n\t\t\t\t\t\t\t\t\t\tid: img.id,\n\t\t\t\t\t\t\t\t\t\turl: img.url,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\t\t\t\t\t__( 'Image uploaded and inserted.' ),\n\t\t\t\t\t\t\t\t\t{ type: 'snackbar', id: 'inserter-notice' }\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// For subsequent calls, update the existing block.\n\t\t\t\t\t\t\t\tupdateBlockAttributes( clonedBlock.clientId, {\n\t\t\t\t\t\t\t\t\t...clonedBlock.attributes,\n\t\t\t\t\t\t\t\t\tid: img.id,\n\t\t\t\t\t\t\t\t\turl: img.url,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsetIsInserting( false );\n\t\t\t\t\t\t},\n\t\t\t\t\t\tallowedTypes: ALLOWED_MEDIA_TYPES,\n\t\t\t\t\t\tonError( message ) {\n\t\t\t\t\t\t\tcreateErrorNotice( message, {\n\t\t\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t\t\t\tid: 'inserter-notice',\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tsetIsInserting( false );\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t} )\n\t\t\t\t.catch( () => {\n\t\t\t\t\tsetShowExternalUploadModal( true );\n\t\t\t\t\tsetIsInserting( false );\n\t\t\t\t} );\n\t\t},\n\t\t[\n\t\t\tisInserting,\n\t\t\tgetSettings,\n\t\t\tonClick,\n\t\t\tcreateSuccessNotice,\n\t\t\tupdateBlockAttributes,\n\t\t\tcreateErrorNotice,\n\t\t\tgetBlock,\n\t\t]\n\t);\n\n\tconst title =\n\t\ttypeof media.title === 'string'\n\t\t\t? media.title\n\t\t\t: media.title?.rendered || __( 'no title' );\n\n\tconst onMouseEnter = useCallback( () => setIsHovered( true ), [] );\n\tconst onMouseLeave = useCallback( () => setIsHovered( false ), [] );\n\treturn (\n\t\t<>\n\t\t\t<InserterDraggableBlocks isEnabled blocks={ [ block ] }>\n\t\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t'block-editor-inserter__media-list__list-item',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-hovered': isHovered,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tdraggable={ draggable }\n\t\t\t\t\t\tonDragStart={ onDragStart }\n\t\t\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ /* Adding `is-hovered` class to the wrapper element is needed\n\t\t\t\t\t\tbecause the options Popover is rendered outside of this node. */ }\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonMouseEnter={ onMouseEnter }\n\t\t\t\t\t\t\tonMouseLeave={ onMouseLeave }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tooltip text={ title }>\n\t\t\t\t\t\t\t\t<Composite.Item\n\t\t\t\t\t\t\t\t\trender={\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\taria-label={ title }\n\t\t\t\t\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-inserter__media-list__item\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={ () => onMediaInsert( block ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"block-editor-inserter__media-list__item-preview\">\n\t\t\t\t\t\t\t\t\t\t{ preview }\n\t\t\t\t\t\t\t\t\t\t{ isInserting && (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"block-editor-inserter__media-list__item-preview-spinner\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Composite.Item>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t{ ! isInserting && (\n\t\t\t\t\t\t\t\t<MediaPreviewOptions\n\t\t\t\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t\t\t\t\tmedia={ media }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</InserterDraggableBlocks>\n\t\t\t{ showExternalUploadModal && (\n\t\t\t\t<InsertExternalImageModal\n\t\t\t\t\tonClose={ () => setShowExternalUploadModal( false ) }\n\t\t\t\t\tonSubmit={ () => {\n\t\t\t\t\t\tonClick( cloneBlock( block ) );\n\t\t\t\t\t\tcreateSuccessNotice( __( 'Image inserted.' ), {\n\t\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t\t\tid: 'inserter-notice',\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tsetShowExternalUploadModal( false );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { Composite } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { MediaPreview } from './media-preview';\n\nfunction MediaList( {\n\tmediaList,\n\tcategory,\n\tonClick,\n\tlabel = __( 'Media List' ),\n} ) {\n\treturn (\n\t\t<Composite\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-inserter__media-list\"\n\t\t\taria-label={ label }\n\t\t>\n\t\t\t{ mediaList.map( ( media, index ) => (\n\t\t\t\t<MediaPreview\n\t\t\t\t\tkey={ media.id || media.sourceId || index }\n\t\t\t\t\tmedia={ media }\n\t\t\t\t\tcategory={ category }\n\t\t\t\t\tonClick={ onClick }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</Composite>\n\t);\n}\n\nexport default MediaList;\n","/**\n * WordPress dependencies\n */\nimport { Spinner, SearchControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useDebouncedInput } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport MediaList from './media-list';\nimport { useMediaResults } from './hooks';\nimport InserterNoResults from '../no-results';\n\nconst INITIAL_MEDIA_ITEMS_PER_PAGE = 10;\n\nexport function MediaCategoryPanel( { rootClientId, onInsert, category } ) {\n\tconst [ search, setSearch, debouncedSearch ] = useDebouncedInput();\n\tconst { mediaList, isLoading } = useMediaResults( category, {\n\t\tper_page: !! debouncedSearch ? 20 : INITIAL_MEDIA_ITEMS_PER_PAGE,\n\t\tsearch: debouncedSearch,\n\t} );\n\tconst baseCssClass = 'block-editor-inserter__media-panel';\n\tconst searchLabel = category.labels.search_items || __( 'Search' );\n\treturn (\n\t\t<div className={ baseCssClass }>\n\t\t\t<SearchControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tclassName={ `${ baseCssClass }-search` }\n\t\t\t\tonChange={ setSearch }\n\t\t\t\tvalue={ search }\n\t\t\t\tlabel={ searchLabel }\n\t\t\t\tplaceholder={ searchLabel }\n\t\t\t/>\n\t\t\t{ isLoading && (\n\t\t\t\t<div className={ `${ baseCssClass }-spinner` }>\n\t\t\t\t\t<Spinner />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ ! isLoading && ! mediaList?.length && <InserterNoResults /> }\n\t\t\t{ ! isLoading && !! mediaList?.length && (\n\t\t\t\t<MediaList\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tonClick={ onInsert }\n\t\t\t\t\tmediaList={ mediaList }\n\t\t\t\t\tcategory={ category }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useState, useRef } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\nimport { unlock } from '../../../lock-unlock';\n\n/** @typedef {import('../../../store/actions').InserterMediaRequest} InserterMediaRequest */\n/** @typedef {import('../../../store/actions').InserterMediaItem} InserterMediaItem */\n\n/**\n * Fetches media items based on the provided category.\n * Each media category is responsible for providing a `fetch` function.\n *\n * @param {Object}               category The media category to fetch results for.\n * @param {InserterMediaRequest} query    The query args to use for the request.\n * @return {InserterMediaItem[]} The media results.\n */\nexport function useMediaResults( category, query = {} ) {\n\tconst [ mediaList, setMediaList ] = useState();\n\tconst [ isLoading, setIsLoading ] = useState( false );\n\t// We need to keep track of the last request made because\n\t// multiple request can be fired without knowing the order\n\t// of resolution, and we need to ensure we are showing\n\t// the results of the last request.\n\t// In the future we could use AbortController to cancel previous\n\t// requests, but we don't for now as it involves adding support\n\t// for this to `core-data` package.\n\tconst lastRequestRef = useRef();\n\tuseEffect( () => {\n\t\t( async () => {\n\t\t\tconst key = JSON.stringify( {\n\t\t\t\tcategory: category.name,\n\t\t\t\t...query,\n\t\t\t} );\n\t\t\tlastRequestRef.current = key;\n\t\t\tsetIsLoading( true );\n\t\t\tsetMediaList( [] ); // Empty the previous results.\n\t\t\tconst _media = await category.fetch?.( query );\n\t\t\tif ( key === lastRequestRef.current ) {\n\t\t\t\tsetMediaList( _media );\n\t\t\t\tsetIsLoading( false );\n\t\t\t}\n\t\t} )();\n\t}, [ category.name, ...Object.values( query ) ] );\n\treturn { mediaList, isLoading };\n}\n\nexport function useMediaCategories( rootClientId ) {\n\tconst [ categories, setCategories ] = useState( [] );\n\n\tconst inserterMediaCategories = useSelect(\n\t\t( select ) =>\n\t\t\tunlock( select( blockEditorStore ) ).getInserterMediaCategories(),\n\t\t[]\n\t);\n\tconst { canInsertImage, canInsertVideo, canInsertAudio } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { canInsertBlockType } = select( blockEditorStore );\n\t\t\treturn {\n\t\t\t\tcanInsertImage: canInsertBlockType(\n\t\t\t\t\t'core/image',\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t\tcanInsertVideo: canInsertBlockType(\n\t\t\t\t\t'core/video',\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t\tcanInsertAudio: canInsertBlockType(\n\t\t\t\t\t'core/audio',\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\tuseEffect( () => {\n\t\t( async () => {\n\t\t\tconst _categories = [];\n\t\t\t// If `inserterMediaCategories` is not defined in\n\t\t\t// block editor settings, do not show any media categories.\n\t\t\tif ( ! inserterMediaCategories ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Loop through categories to check if they have at least one media item.\n\t\t\tconst categoriesHaveMedia = new Map(\n\t\t\t\tawait Promise.all(\n\t\t\t\t\tinserterMediaCategories.map( async ( category ) => {\n\t\t\t\t\t\t// Some sources are external and we don't need to make a request.\n\t\t\t\t\t\tif ( category.isExternalResource ) {\n\t\t\t\t\t\t\treturn [ category.name, true ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet results = [];\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresults = await category.fetch( {\n\t\t\t\t\t\t\t\tper_page: 1,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t// If the request fails, we shallow the error and just don't show\n\t\t\t\t\t\t\t// the category, in order to not break the media tab.\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [ category.name, !! results.length ];\n\t\t\t\t\t} )\n\t\t\t\t)\n\t\t\t);\n\t\t\t// We need to filter out categories that don't have any media items or\n\t\t\t// whose corresponding block type is not allowed to be inserted, based\n\t\t\t// on the category's `mediaType`.\n\t\t\tconst canInsertMediaType = {\n\t\t\t\timage: canInsertImage,\n\t\t\t\tvideo: canInsertVideo,\n\t\t\t\taudio: canInsertAudio,\n\t\t\t};\n\t\t\tinserterMediaCategories.forEach( ( category ) => {\n\t\t\t\tif (\n\t\t\t\t\tcanInsertMediaType[ category.mediaType ] &&\n\t\t\t\t\tcategoriesHaveMedia.get( category.name )\n\t\t\t\t) {\n\t\t\t\t\t_categories.push( category );\n\t\t\t\t}\n\t\t\t} );\n\t\t\tif ( !! _categories.length ) {\n\t\t\t\tsetCategories( _categories );\n\t\t\t}\n\t\t} )();\n\t}, [\n\t\tcanInsertImage,\n\t\tcanInsertVideo,\n\t\tcanInsertAudio,\n\t\tinserterMediaCategories,\n\t] );\n\treturn categories;\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useViewportMatch } from '@wordpress/compose';\nimport { Button } from '@wordpress/components';\nimport { useCallback, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { MediaCategoryPanel } from './media-panel';\nimport MediaUploadCheck from '../../media-upload/check';\nimport MediaUpload from '../../media-upload';\nimport { useMediaCategories } from './hooks';\nimport { getBlockAndPreviewFromMedia } from './utils';\nimport MobileTabNavigation from '../mobile-tab-navigation';\nimport CategoryTabs from '../category-tabs';\nimport InserterNoResults from '../no-results';\n\nconst ALLOWED_MEDIA_TYPES = [ 'image', 'video', 'audio' ];\n\nfunction MediaTab( {\n\trootClientId,\n\tselectedCategory,\n\tonSelectCategory,\n\tonInsert,\n\tchildren,\n} ) {\n\tconst mediaCategories = useMediaCategories( rootClientId );\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\tconst baseCssClass = 'block-editor-inserter__media-tabs';\n\tconst onSelectMedia = useCallback(\n\t\t( media ) => {\n\t\t\tif ( ! media?.url ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst [ block ] = getBlockAndPreviewFromMedia( media, media.type );\n\t\t\tonInsert( block );\n\t\t},\n\t\t[ onInsert ]\n\t);\n\tconst categories = useMemo(\n\t\t() =>\n\t\t\tmediaCategories.map( ( mediaCategory ) => ( {\n\t\t\t\t...mediaCategory,\n\t\t\t\tlabel: mediaCategory.labels.name,\n\t\t\t} ) ),\n\t\t[ mediaCategories ]\n\t);\n\n\tif ( ! categories.length ) {\n\t\treturn <InserterNoResults />;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ ! isMobile && (\n\t\t\t\t<div className={ `${ baseCssClass }-container` }>\n\t\t\t\t\t<CategoryTabs\n\t\t\t\t\t\tcategories={ categories }\n\t\t\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t\t\t\tonSelectCategory={ onSelectCategory }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</CategoryTabs>\n\t\t\t\t\t<MediaUploadCheck>\n\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\tmultiple={ false }\n\t\t\t\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\t\t\t\t// Safari doesn't emit a focus event on button elements when\n\t\t\t\t\t\t\t\t\t\t// clicked and we need to manually focus the button here.\n\t\t\t\t\t\t\t\t\t\t// The reason is that core's Media Library modal explicitly triggers a\n\t\t\t\t\t\t\t\t\t\t// focus event and therefore a `blur` event is triggered on a different\n\t\t\t\t\t\t\t\t\t\t// element, which doesn't contain the `data-unstable-ignore-focus-outside-for-relatedtarget`\n\t\t\t\t\t\t\t\t\t\t// attribute making the Inserter dialog to close.\n\t\t\t\t\t\t\t\t\t\tevent.target.focus();\n\t\t\t\t\t\t\t\t\t\topen();\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-inserter__media-library-button\"\n\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\tdata-unstable-ignore-focus-outside-for-relatedtarget=\".media-modal\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Open Media Library' ) }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</MediaUploadCheck>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ isMobile && (\n\t\t\t\t<MobileTabNavigation categories={ categories }>\n\t\t\t\t\t{ ( category ) => (\n\t\t\t\t\t\t<MediaCategoryPanel\n\t\t\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</MobileTabNavigation>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default MediaTab;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst { Fill: __unstableInserterMenuExtension, Slot } = createSlotFill(\n\t'__unstableInserterMenuExtension'\n);\n\n__unstableInserterMenuExtension.Slot = Slot;\n\nexport default __unstableInserterMenuExtension;\n","/** @typedef {import('../store/selectors').WPEditorInserterItem} WPEditorInserterItem */\n\n/**\n * Helper function to order inserter block items according to a provided array of prioritized blocks.\n *\n * @param {WPEditorInserterItem[]} items    The array of editor inserter block items to be sorted.\n * @param {string[]}               priority The array of block names to be prioritized.\n * @return {WPEditorInserterItem[]} The sorted array of editor inserter block items.\n */\nexport const orderInserterBlockItems = ( items, priority ) => {\n\tif ( ! priority ) {\n\t\treturn items;\n\t}\n\n\titems.sort( ( { id: aName }, { id: bName } ) => {\n\t\t// Sort block items according to `priority`.\n\t\tlet aIndex = priority.indexOf( aName );\n\t\tlet bIndex = priority.indexOf( bName );\n\t\t// All other block items should come after that.\n\t\tif ( aIndex < 0 ) {\n\t\t\taIndex = priority.length;\n\t\t}\n\t\tif ( bIndex < 0 ) {\n\t\t\tbIndex = priority.length;\n\t\t}\n\t\treturn aIndex - bIndex;\n\t} );\n\n\treturn items;\n};\n","/**\n * WordPress dependencies\n */\nimport { useMemo, useEffect } from '@wordpress/element';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { VisuallyHidden } from '@wordpress/components';\nimport { useDebounce, useAsyncList } from '@wordpress/compose';\nimport { speak } from '@wordpress/a11y';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesList from '../block-types-list';\nimport BlockPatternsList from '../block-patterns-list';\nimport __unstableInserterMenuExtension from '../inserter-menu-extension';\nimport InserterPanel from './panel';\nimport InserterNoResults from './no-results';\nimport useInsertionPoint from './hooks/use-insertion-point';\nimport usePatternsState from './hooks/use-patterns-state';\nimport useBlockTypesState from './hooks/use-block-types-state';\nimport { searchBlockItems, searchItems } from './search-items';\nimport InserterListbox from '../inserter-listbox';\nimport { orderBy } from '../../utils/sorting';\nimport { orderInserterBlockItems } from '../../utils/order-inserter-block-items';\nimport { store as blockEditorStore } from '../../store';\n\nconst INITIAL_INSERTER_RESULTS = 9;\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation and rerendering the component.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\nfunction InserterSearchResults( {\n\tfilterValue,\n\tonSelect,\n\tonHover,\n\tonHoverPattern,\n\trootClientId,\n\tclientId,\n\tisAppender,\n\t__experimentalInsertionIndex,\n\tmaxBlockPatterns,\n\tmaxBlockTypes,\n\tshowBlockDirectory = false,\n\tisDraggable = true,\n\tshouldFocusBlock = true,\n\tprioritizePatterns,\n\tselectBlockOnInsert,\n\tisQuick,\n} ) {\n\tconst debouncedSpeak = useDebounce( speak, 500 );\n\n\tconst { prioritizedBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst blockListSettings =\n\t\t\t\tselect( blockEditorStore ).getBlockListSettings( rootClientId );\n\n\t\t\treturn {\n\t\t\t\tprioritizedBlocks:\n\t\t\t\t\tblockListSettings?.prioritizedInserterBlocks || EMPTY_ARRAY,\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\n\tconst [ destinationRootClientId, onInsertBlocks ] = useInsertionPoint( {\n\t\tonSelect,\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\tinsertionIndex: __experimentalInsertionIndex,\n\t\tshouldFocusBlock,\n\t\tselectBlockOnInsert,\n\t} );\n\tconst [\n\t\tblockTypes,\n\t\tblockTypeCategories,\n\t\tblockTypeCollections,\n\t\tonSelectBlockType,\n\t] = useBlockTypesState( destinationRootClientId, onInsertBlocks, isQuick );\n\tconst [ patterns, , onClickPattern ] = usePatternsState(\n\t\tonInsertBlocks,\n\t\tdestinationRootClientId,\n\t\tundefined,\n\t\tisQuick\n\t);\n\n\tconst filteredBlockPatterns = useMemo( () => {\n\t\tif ( maxBlockPatterns === 0 ) {\n\t\t\treturn [];\n\t\t}\n\t\tconst results = searchItems( patterns, filterValue );\n\t\treturn maxBlockPatterns !== undefined\n\t\t\t? results.slice( 0, maxBlockPatterns )\n\t\t\t: results;\n\t}, [ filterValue, patterns, maxBlockPatterns ] );\n\n\tlet maxBlockTypesToShow = maxBlockTypes;\n\tif ( prioritizePatterns && filteredBlockPatterns.length > 2 ) {\n\t\tmaxBlockTypesToShow = 0;\n\t}\n\n\tconst filteredBlockTypes = useMemo( () => {\n\t\tif ( maxBlockTypesToShow === 0 ) {\n\t\t\treturn [];\n\t\t}\n\t\tconst nonPatternBlockTypes = blockTypes.filter(\n\t\t\t( blockType ) => blockType.name !== 'core/block'\n\t\t);\n\t\tlet orderedItems = orderBy( nonPatternBlockTypes, 'frecency', 'desc' );\n\n\t\tif ( ! filterValue && prioritizedBlocks.length ) {\n\t\t\torderedItems = orderInserterBlockItems(\n\t\t\t\torderedItems,\n\t\t\t\tprioritizedBlocks\n\t\t\t);\n\t\t}\n\n\t\tconst results = searchBlockItems(\n\t\t\torderedItems,\n\t\t\tblockTypeCategories,\n\t\t\tblockTypeCollections,\n\t\t\tfilterValue\n\t\t);\n\n\t\treturn maxBlockTypesToShow !== undefined\n\t\t\t? results.slice( 0, maxBlockTypesToShow )\n\t\t\t: results;\n\t}, [\n\t\tfilterValue,\n\t\tblockTypes,\n\t\tblockTypeCategories,\n\t\tblockTypeCollections,\n\t\tmaxBlockTypesToShow,\n\t\tprioritizedBlocks,\n\t] );\n\n\t// Announce search results on change.\n\tuseEffect( () => {\n\t\tif ( ! filterValue ) {\n\t\t\treturn;\n\t\t}\n\t\tconst count = filteredBlockTypes.length + filteredBlockPatterns.length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [\n\t\tfilterValue,\n\t\tdebouncedSpeak,\n\t\tfilteredBlockTypes,\n\t\tfilteredBlockPatterns,\n\t] );\n\n\tconst currentShownBlockTypes = useAsyncList( filteredBlockTypes, {\n\t\tstep: INITIAL_INSERTER_RESULTS,\n\t} );\n\n\tconst hasItems =\n\t\tfilteredBlockTypes.length > 0 || filteredBlockPatterns.length > 0;\n\n\tconst blocksUI = !! filteredBlockTypes.length && (\n\t\t<InserterPanel\n\t\t\ttitle={ <VisuallyHidden>{ __( 'Blocks' ) }</VisuallyHidden> }\n\t\t>\n\t\t\t<BlockTypesList\n\t\t\t\titems={ currentShownBlockTypes }\n\t\t\t\tonSelect={ onSelectBlockType }\n\t\t\t\tonHover={ onHover }\n\t\t\t\tlabel={ __( 'Blocks' ) }\n\t\t\t\tisDraggable={ isDraggable }\n\t\t\t/>\n\t\t</InserterPanel>\n\t);\n\n\tconst patternsUI = !! filteredBlockPatterns.length && (\n\t\t<InserterPanel\n\t\t\ttitle={\n\t\t\t\t<VisuallyHidden>{ __( 'Block patterns' ) }</VisuallyHidden>\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"block-editor-inserter__quick-inserter-patterns\">\n\t\t\t\t<BlockPatternsList\n\t\t\t\t\tblockPatterns={ filteredBlockPatterns }\n\t\t\t\t\tonClickPattern={ onClickPattern }\n\t\t\t\t\tonHover={ onHoverPattern }\n\t\t\t\t\tisDraggable={ isDraggable }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</InserterPanel>\n\t);\n\n\treturn (\n\t\t<InserterListbox>\n\t\t\t{ ! showBlockDirectory && ! hasItems && <InserterNoResults /> }\n\n\t\t\t{ prioritizePatterns ? patternsUI : blocksUI }\n\n\t\t\t{ !! filteredBlockTypes.length &&\n\t\t\t\t!! filteredBlockPatterns.length && (\n\t\t\t\t\t<div className=\"block-editor-inserter__quick-inserter-separator\" />\n\t\t\t\t) }\n\n\t\t\t{ prioritizePatterns ? blocksUI : patternsUI }\n\n\t\t\t{ showBlockDirectory && (\n\t\t\t\t<__unstableInserterMenuExtension.Slot\n\t\t\t\t\tfillProps={ {\n\t\t\t\t\t\tonSelect: onSelectBlockType,\n\t\t\t\t\t\tonHover,\n\t\t\t\t\t\tfilterValue,\n\t\t\t\t\t\thasItems,\n\t\t\t\t\t\trootClientId: destinationRootClientId,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ ( fills ) => {\n\t\t\t\t\t\tif ( fills.length ) {\n\t\t\t\t\t\t\treturn fills;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( ! hasItems ) {\n\t\t\t\t\t\t\treturn <InserterNoResults />;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} }\n\t\t\t\t</__unstableInserterMenuExtension.Slot>\n\t\t\t) }\n\t\t</InserterListbox>\n\t);\n}\n\nexport default InserterSearchResults;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst closeSmall = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z\" />\n\t</SVG>\n);\n\nexport default closeSmall;\n","/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { forwardRef } from '@wordpress/element';\nimport { closeSmall } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\n\nconst { Tabs } = unlock( componentsPrivateApis );\n\n/**\n * A component that creates a tabbed sidebar with a close button.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/tabbed-sidebar/README.md\n *\n * @example\n * ```jsx\n * function MyTabbedSidebar() {\n *   return (\n *     <TabbedSidebar\n *       tabs={ [\n *         {\n *           name: 'tab1',\n *           title: 'Settings',\n *           panel: <PanelContents />,\n *         }\n *       ] }\n *       onClose={ () => {} }\n *       onSelect={ () => {} }\n *       defaultTabId=\"tab1\"\n *       selectedTab=\"tab1\"\n *       closeButtonLabel=\"Close sidebar\"\n *     />\n *   );\n * }\n * ```\n *\n * @param {Object}   props                  Component props.\n * @param {string}   [props.defaultTabId]   The ID of the tab to be selected by default when the component renders.\n * @param {Function} props.onClose          Function called when the close button is clicked.\n * @param {Function} props.onSelect         Function called when a tab is selected. Receives the selected tab's ID as an argument.\n * @param {string}   props.selectedTab      The ID of the currently selected tab.\n * @param {Array}    props.tabs             Array of tab objects. Each tab should have: name (string), title (string),\n *                                          panel (React.Node), and optionally panelRef (React.Ref).\n * @param {string}   props.closeButtonLabel Accessibility label for the close button.\n * @param {Object}   ref                    Forward ref to the tabs list element.\n * @return {Element} The tabbed sidebar component.\n */\nfunction TabbedSidebar(\n\t{ defaultTabId, onClose, onSelect, selectedTab, tabs, closeButtonLabel },\n\tref\n) {\n\treturn (\n\t\t<div className=\"block-editor-tabbed-sidebar\">\n\t\t\t<Tabs\n\t\t\t\tselectOnMove={ false }\n\t\t\t\tdefaultTabId={ defaultTabId }\n\t\t\t\tonSelect={ onSelect }\n\t\t\t\tselectedTabId={ selectedTab }\n\t\t\t>\n\t\t\t\t<div className=\"block-editor-tabbed-sidebar__tablist-and-close-button\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"block-editor-tabbed-sidebar__close-button\"\n\t\t\t\t\t\ticon={ closeSmall }\n\t\t\t\t\t\tlabel={ closeButtonLabel }\n\t\t\t\t\t\tonClick={ () => onClose() }\n\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Tabs.TabList\n\t\t\t\t\t\tclassName=\"block-editor-tabbed-sidebar__tablist\"\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ tabs.map( ( tab ) => (\n\t\t\t\t\t\t\t<Tabs.Tab\n\t\t\t\t\t\t\t\tkey={ tab.name }\n\t\t\t\t\t\t\t\ttabId={ tab.name }\n\t\t\t\t\t\t\t\tclassName=\"block-editor-tabbed-sidebar__tab\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ tab.title }\n\t\t\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</Tabs.TabList>\n\t\t\t\t</div>\n\t\t\t\t{ tabs.map( ( tab ) => (\n\t\t\t\t\t<Tabs.TabPanel\n\t\t\t\t\t\tkey={ tab.name }\n\t\t\t\t\t\ttabId={ tab.name }\n\t\t\t\t\t\tfocusable={ false }\n\t\t\t\t\t\tclassName=\"block-editor-tabbed-sidebar__tabpanel\"\n\t\t\t\t\t\tref={ tab.panelRef }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ tab.panel }\n\t\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t) ) }\n\t\t\t</Tabs>\n\t\t</div>\n\t);\n}\n\nexport default forwardRef( TabbedSidebar );\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { unlock } from '../lock-unlock';\n\n/**\n * A hook used to set the editor mode to zoomed out mode, invoking the hook sets the mode.\n * Concepts:\n * - If we most recently changed the zoom level for them (in or out), we always resetZoomLevel() level when unmounting.\n * - If the user most recently changed the zoom level (manually toggling), we do nothing when unmounting.\n *\n * @param {boolean} enabled If we should enter into zoomOut mode or not\n */\nexport function useZoomOut( enabled = true ) {\n\tconst { setZoomLevel, resetZoomLevel } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\n\t/**\n\t * We need access to both the value and the function. The value is to trigger a useEffect hook\n\t * and the function is to check zoom out within another hook without triggering a re-render.\n\t */\n\tconst { isZoomedOut, isZoomOut } = useSelect( ( select ) => {\n\t\tconst { isZoomOut: _isZoomOut } = unlock( select( blockEditorStore ) );\n\t\treturn {\n\t\t\tisZoomedOut: _isZoomOut(),\n\t\t\tisZoomOut: _isZoomOut,\n\t\t};\n\t}, [] );\n\n\tconst controlZoomLevelRef = useRef( false );\n\tconst isEnabledRef = useRef( enabled );\n\n\t/**\n\t * This hook tracks if the zoom state was changed manually by the user via clicking\n\t * the zoom out button. We only want this to run when isZoomedOut changes, so we use\n\t * a ref to track the enabled state.\n\t */\n\tuseEffect( () => {\n\t\t// If the zoom state changed (isZoomOut) and it does not match the requested zoom\n\t\t// state (zoomOut), then it means the user manually changed the zoom state while\n\t\t// this hook was mounted, and we should no longer control the zoom state.\n\t\tif ( isZoomedOut !== isEnabledRef.current ) {\n\t\t\tcontrolZoomLevelRef.current = false;\n\t\t}\n\t}, [ isZoomedOut ] );\n\n\tuseEffect( () => {\n\t\tisEnabledRef.current = enabled;\n\n\t\tif ( enabled !== isZoomOut() ) {\n\t\t\tcontrolZoomLevelRef.current = true;\n\n\t\t\tif ( enabled ) {\n\t\t\t\tsetZoomLevel( 'auto-scaled' );\n\t\t\t} else {\n\t\t\t\tresetZoomLevel();\n\t\t\t}\n\t\t}\n\n\t\treturn () => {\n\t\t\t// If we are controlling zoom level and are zoomed out, reset the zoom level.\n\t\t\tif ( controlZoomLevelRef.current && isZoomOut() ) {\n\t\t\t\tresetZoomLevel();\n\t\t\t}\n\t\t};\n\t}, [ enabled, isZoomOut, resetZoomLevel, setZoomLevel ] );\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tforwardRef,\n\tuseState,\n\tuseCallback,\n\tuseMemo,\n\tuseRef,\n\tuseLayoutEffect,\n} from '@wordpress/element';\nimport { VisuallyHidden, SearchControl, Popover } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useDebouncedInput, useViewportMatch } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport Tips from './tips';\nimport InserterPreviewPanel from './preview-panel';\nimport BlockTypesTab from './block-types-tab';\nimport BlockPatternsTab from './block-patterns-tab';\nimport { PatternCategoryPreviews } from './block-patterns-tab/pattern-category-previews';\nimport { MediaTab, MediaCategoryPanel } from './media-tab';\nimport InserterSearchResults from './search-results';\nimport useInsertionPoint from './hooks/use-insertion-point';\nimport { store as blockEditorStore } from '../../store';\nimport TabbedSidebar from '../tabbed-sidebar';\nimport { useZoomOut } from '../../hooks/use-zoom-out';\nimport { unlock } from '../../lock-unlock';\n\nconst NOOP = () => {};\nfunction InserterMenu(\n\t{\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\t__experimentalInsertionIndex,\n\t\tonSelect,\n\t\tshowInserterHelpPanel,\n\t\tshowMostUsedBlocks,\n\t\t__experimentalFilterValue = '',\n\t\tshouldFocusBlock = true,\n\t\tonPatternCategorySelection,\n\t\tonClose,\n\t\t__experimentalInitialTab,\n\t\t__experimentalInitialCategory,\n\t},\n\tref\n) {\n\tconst { isZoomOutMode, hasSectionRootClientId } = useSelect( ( select ) => {\n\t\tconst { isZoomOut, getSectionRootClientId } = unlock(\n\t\t\tselect( blockEditorStore )\n\t\t);\n\n\t\treturn {\n\t\t\tisZoomOutMode: isZoomOut(),\n\t\t\thasSectionRootClientId: !! getSectionRootClientId(),\n\t\t};\n\t}, [] );\n\n\tconst [ filterValue, setFilterValue, delayedFilterValue ] =\n\t\tuseDebouncedInput( __experimentalFilterValue );\n\tconst [ hoveredItem, setHoveredItem ] = useState( null );\n\tconst [ selectedPatternCategory, setSelectedPatternCategory ] = useState(\n\t\t__experimentalInitialCategory\n\t);\n\tconst [ patternFilter, setPatternFilter ] = useState( 'all' );\n\tconst [ selectedMediaCategory, setSelectedMediaCategory ] =\n\t\tuseState( null );\n\tconst isLargeViewport = useViewportMatch( 'large' );\n\n\tfunction getInitialTab() {\n\t\tif ( __experimentalInitialTab ) {\n\t\t\treturn __experimentalInitialTab;\n\t\t}\n\n\t\tif ( isZoomOutMode ) {\n\t\t\treturn 'patterns';\n\t\t}\n\n\t\treturn 'blocks';\n\t}\n\tconst [ selectedTab, setSelectedTab ] = useState( getInitialTab() );\n\n\tconst shouldUseZoomOut =\n\t\thasSectionRootClientId &&\n\t\t( selectedTab === 'patterns' || selectedTab === 'media' );\n\n\tuseZoomOut( shouldUseZoomOut && isLargeViewport );\n\n\tconst [ destinationRootClientId, onInsertBlocks, onToggleInsertionPoint ] =\n\t\tuseInsertionPoint( {\n\t\t\trootClientId,\n\t\t\tclientId,\n\t\t\tisAppender,\n\t\t\tinsertionIndex: __experimentalInsertionIndex,\n\t\t\tshouldFocusBlock,\n\t\t} );\n\tconst blockTypesTabRef = useRef();\n\n\tconst onInsert = useCallback(\n\t\t( blocks, meta, shouldForceFocusBlock, _rootClientId ) => {\n\t\t\tonInsertBlocks(\n\t\t\t\tblocks,\n\t\t\t\tmeta,\n\t\t\t\tshouldForceFocusBlock,\n\t\t\t\t_rootClientId\n\t\t\t);\n\t\t\tonSelect( blocks );\n\n\t\t\t// Check for focus loss due to filtering blocks by selected block type\n\t\t\twindow.requestAnimationFrame( () => {\n\t\t\t\tif (\n\t\t\t\t\t! shouldFocusBlock &&\n\t\t\t\t\t! blockTypesTabRef.current?.contains(\n\t\t\t\t\t\tref.current.ownerDocument.activeElement\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\t// There has been a focus loss, so focus the first button in the block types tab\n\t\t\t\t\tblockTypesTabRef.current?.querySelector( 'button' ).focus();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t\t[ onInsertBlocks, onSelect, shouldFocusBlock ]\n\t);\n\n\tconst onInsertPattern = useCallback(\n\t\t( blocks, patternName, ...args ) => {\n\t\t\tonToggleInsertionPoint( false );\n\t\t\tonInsertBlocks( blocks, { patternName }, ...args );\n\t\t\tonSelect();\n\t\t},\n\t\t[ onInsertBlocks, onSelect ]\n\t);\n\n\tconst onHover = useCallback(\n\t\t( item ) => {\n\t\t\tonToggleInsertionPoint( item );\n\t\t\tsetHoveredItem( item );\n\t\t},\n\t\t[ onToggleInsertionPoint, setHoveredItem ]\n\t);\n\n\tconst onClickPatternCategory = useCallback(\n\t\t( patternCategory, filter ) => {\n\t\t\tsetSelectedPatternCategory( patternCategory );\n\t\t\tsetPatternFilter( filter );\n\t\t\tonPatternCategorySelection?.();\n\t\t},\n\t\t[ setSelectedPatternCategory, onPatternCategorySelection ]\n\t);\n\n\tconst showPatternPanel =\n\t\tselectedTab === 'patterns' &&\n\t\t! delayedFilterValue &&\n\t\t!! selectedPatternCategory;\n\n\tconst showMediaPanel = selectedTab === 'media' && !! selectedMediaCategory;\n\n\tconst inserterSearch = useMemo( () => {\n\t\tif ( selectedTab === 'media' ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<SearchControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tclassName=\"block-editor-inserter__search\"\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tif ( hoveredItem ) {\n\t\t\t\t\t\t\tsetHoveredItem( null );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetFilterValue( value );\n\t\t\t\t\t} }\n\t\t\t\t\tvalue={ filterValue }\n\t\t\t\t\tlabel={ __( 'Search' ) }\n\t\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t\t/>\n\t\t\t\t{ !! delayedFilterValue && (\n\t\t\t\t\t<InserterSearchResults\n\t\t\t\t\t\tfilterValue={ delayedFilterValue }\n\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\tisAppender={ isAppender }\n\t\t\t\t\t\t__experimentalInsertionIndex={\n\t\t\t\t\t\t\t__experimentalInsertionIndex\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowBlockDirectory\n\t\t\t\t\t\tshouldFocusBlock={ shouldFocusBlock }\n\t\t\t\t\t\tprioritizePatterns={ selectedTab === 'patterns' }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t}, [\n\t\tselectedTab,\n\t\thoveredItem,\n\t\tsetHoveredItem,\n\t\tsetFilterValue,\n\t\tfilterValue,\n\t\tdelayedFilterValue,\n\t\tonSelect,\n\t\tonHover,\n\t\tshouldFocusBlock,\n\t\tclientId,\n\t\trootClientId,\n\t\t__experimentalInsertionIndex,\n\t\tisAppender,\n\t] );\n\n\tconst blocksTab = useMemo( () => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"block-editor-inserter__block-list\">\n\t\t\t\t\t<BlockTypesTab\n\t\t\t\t\t\tref={ blockTypesTabRef }\n\t\t\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{ showInserterHelpPanel && (\n\t\t\t\t\t<div className=\"block-editor-inserter__tips\">\n\t\t\t\t\t\t<VisuallyHidden as=\"h2\">\n\t\t\t\t\t\t\t{ __( 'A tip for using the block editor' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t<Tips />\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t}, [\n\t\tdestinationRootClientId,\n\t\tonInsert,\n\t\tonHover,\n\t\tshowMostUsedBlocks,\n\t\tshowInserterHelpPanel,\n\t] );\n\n\tconst patternsTab = useMemo( () => {\n\t\treturn (\n\t\t\t<BlockPatternsTab\n\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\tonInsert={ onInsertPattern }\n\t\t\t\tonSelectCategory={ onClickPatternCategory }\n\t\t\t\tselectedCategory={ selectedPatternCategory }\n\t\t\t>\n\t\t\t\t{ showPatternPanel && (\n\t\t\t\t\t<PatternCategoryPreviews\n\t\t\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\t\t\tonInsert={ onInsertPattern }\n\t\t\t\t\t\tcategory={ selectedPatternCategory }\n\t\t\t\t\t\tpatternFilter={ patternFilter }\n\t\t\t\t\t\tshowTitlesAsTooltip\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</BlockPatternsTab>\n\t\t);\n\t}, [\n\t\tdestinationRootClientId,\n\t\tonInsertPattern,\n\t\tonClickPatternCategory,\n\t\tpatternFilter,\n\t\tselectedPatternCategory,\n\t\tshowPatternPanel,\n\t] );\n\n\tconst mediaTab = useMemo( () => {\n\t\treturn (\n\t\t\t<MediaTab\n\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\tselectedCategory={ selectedMediaCategory }\n\t\t\t\tonSelectCategory={ setSelectedMediaCategory }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t>\n\t\t\t\t{ showMediaPanel && (\n\t\t\t\t\t<MediaCategoryPanel\n\t\t\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\t\tcategory={ selectedMediaCategory }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</MediaTab>\n\t\t);\n\t}, [\n\t\tdestinationRootClientId,\n\t\tonInsert,\n\t\tselectedMediaCategory,\n\t\tsetSelectedMediaCategory,\n\t\tshowMediaPanel,\n\t] );\n\n\tconst handleSetSelectedTab = ( value ) => {\n\t\t// If no longer on patterns tab remove the category setting.\n\t\tif ( value !== 'patterns' ) {\n\t\t\tsetSelectedPatternCategory( null );\n\t\t}\n\t\tsetSelectedTab( value );\n\t};\n\n\t// Focus first active tab, if any\n\tconst tabsRef = useRef();\n\tuseLayoutEffect( () => {\n\t\tif ( tabsRef.current ) {\n\t\t\twindow.requestAnimationFrame( () => {\n\t\t\t\ttabsRef.current\n\t\t\t\t\t.querySelector( '[role=\"tab\"][aria-selected=\"true\"]' )\n\t\t\t\t\t?.focus();\n\t\t\t} );\n\t\t}\n\t}, [] );\n\n\treturn (\n\t\t<div\n\t\t\tclassName={ clsx( 'block-editor-inserter__menu', {\n\t\t\t\t'show-panel': showPatternPanel || showMediaPanel,\n\t\t\t\t'is-zoom-out': isZoomOutMode,\n\t\t\t} ) }\n\t\t\tref={ ref }\n\t\t>\n\t\t\t<div className=\"block-editor-inserter__main-area\">\n\t\t\t\t<TabbedSidebar\n\t\t\t\t\tref={ tabsRef }\n\t\t\t\t\tonSelect={ handleSetSelectedTab }\n\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\tselectedTab={ selectedTab }\n\t\t\t\t\tcloseButtonLabel={ __( 'Close Block Inserter' ) }\n\t\t\t\t\ttabs={ [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'blocks',\n\t\t\t\t\t\t\ttitle: __( 'Blocks' ),\n\t\t\t\t\t\t\tpanel: (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{ inserterSearch }\n\t\t\t\t\t\t\t\t\t{ selectedTab === 'blocks' &&\n\t\t\t\t\t\t\t\t\t\t! delayedFilterValue &&\n\t\t\t\t\t\t\t\t\t\tblocksTab }\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'patterns',\n\t\t\t\t\t\t\ttitle: __( 'Patterns' ),\n\t\t\t\t\t\t\tpanel: (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{ inserterSearch }\n\t\t\t\t\t\t\t\t\t{ selectedTab === 'patterns' &&\n\t\t\t\t\t\t\t\t\t\t! delayedFilterValue &&\n\t\t\t\t\t\t\t\t\t\tpatternsTab }\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'media',\n\t\t\t\t\t\t\ttitle: __( 'Media' ),\n\t\t\t\t\t\t\tpanel: (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{ inserterSearch }\n\t\t\t\t\t\t\t\t\t{ mediaTab }\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t] }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{ showInserterHelpPanel && hoveredItem && (\n\t\t\t\t<Popover\n\t\t\t\t\tclassName=\"block-editor-inserter__preview-container__popover\"\n\t\t\t\t\tplacement=\"right-start\"\n\t\t\t\t\toffset={ 16 }\n\t\t\t\t\tfocusOnMount={ false }\n\t\t\t\t\tanimate={ false }\n\t\t\t\t>\n\t\t\t\t\t<InserterPreviewPanel item={ hoveredItem } />\n\t\t\t\t</Popover>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport const PrivateInserterMenu = forwardRef( InserterMenu );\n\nfunction PublicInserterMenu( props, ref ) {\n\treturn (\n\t\t<PrivateInserterMenu\n\t\t\t{ ...props }\n\t\t\tonPatternCategorySelection={ NOOP }\n\t\t\tref={ ref }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( PublicInserterMenu );\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button, SearchControl } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport InserterSearchResults from './search-results';\nimport useInsertionPoint from './hooks/use-insertion-point';\nimport useBlockTypesState from './hooks/use-block-types-state';\nimport { store as blockEditorStore } from '../../store';\n\nconst SEARCH_THRESHOLD = 6;\nconst SHOWN_BLOCK_TYPES = 6;\nconst SHOWN_BLOCK_PATTERNS = 2;\n\nexport default function QuickInserter( {\n\tonSelect,\n\trootClientId,\n\tclientId,\n\tisAppender,\n\tselectBlockOnInsert,\n\thasSearch = true,\n} ) {\n\tconst [ filterValue, setFilterValue ] = useState( '' );\n\tconst [ destinationRootClientId, onInsertBlocks ] = useInsertionPoint( {\n\t\tonSelect,\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\tselectBlockOnInsert,\n\t} );\n\tconst [ blockTypes ] = useBlockTypesState(\n\t\tdestinationRootClientId,\n\t\tonInsertBlocks,\n\t\ttrue\n\t);\n\n\tconst { setInserterIsOpened, insertionIndex } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getSettings, getBlockIndex, getBlockCount } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst settings = getSettings();\n\t\t\tconst index = getBlockIndex( clientId );\n\t\t\tconst blockCount = getBlockCount();\n\n\t\t\treturn {\n\t\t\t\tsetInserterIsOpened: settings.__experimentalSetIsInserterOpened,\n\t\t\t\tinsertionIndex: index === -1 ? blockCount : index,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst showSearch = hasSearch && blockTypes.length > SEARCH_THRESHOLD;\n\n\tuseEffect( () => {\n\t\tif ( setInserterIsOpened ) {\n\t\t\tsetInserterIsOpened( false );\n\t\t}\n\t}, [ setInserterIsOpened ] );\n\n\t// When clicking Browse All select the appropriate block so as\n\t// the insertion point can work as expected.\n\tconst onBrowseAll = () => {\n\t\tsetInserterIsOpened( {\n\t\t\tfilterValue,\n\t\t\tonSelect,\n\t\t\trootClientId,\n\t\t\tinsertionIndex,\n\t\t} );\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={ clsx( 'block-editor-inserter__quick-inserter', {\n\t\t\t\t'has-search': showSearch,\n\t\t\t\t'has-expand': setInserterIsOpened,\n\t\t\t} ) }\n\t\t>\n\t\t\t{ showSearch && (\n\t\t\t\t<SearchControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tclassName=\"block-editor-inserter__search\"\n\t\t\t\t\tvalue={ filterValue }\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tsetFilterValue( value );\n\t\t\t\t\t} }\n\t\t\t\t\tlabel={ __( 'Search' ) }\n\t\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t\t/>\n\t\t\t) }\n\n\t\t\t<div className=\"block-editor-inserter__quick-inserter-results\">\n\t\t\t\t<InserterSearchResults\n\t\t\t\t\tfilterValue={ filterValue }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tisAppender={ isAppender }\n\t\t\t\t\tmaxBlockPatterns={\n\t\t\t\t\t\t!! filterValue ? SHOWN_BLOCK_PATTERNS : 0\n\t\t\t\t\t}\n\t\t\t\t\tmaxBlockTypes={ SHOWN_BLOCK_TYPES }\n\t\t\t\t\tisDraggable={ false }\n\t\t\t\t\tselectBlockOnInsert={ selectBlockOnInsert }\n\t\t\t\t\tisQuick\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{ setInserterIsOpened && (\n\t\t\t\t<Button\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tclassName=\"block-editor-inserter__quick-inserter-expand\"\n\t\t\t\t\tonClick={ onBrowseAll }\n\t\t\t\t\taria-label={ __(\n\t\t\t\t\t\t'Browse all. This will open the main inserter panel in the editor toolbar.'\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Browse all' ) }\n\t\t\t\t</Button>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { speak } from '@wordpress/a11y';\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport { Dropdown, Button } from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose, ifCondition } from '@wordpress/compose';\nimport { createBlock, store as blocksStore } from '@wordpress/blocks';\nimport { plus } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport InserterMenu from './menu';\nimport QuickInserter from './quick-inserter';\nimport { store as blockEditorStore } from '../../store';\n\nconst defaultRenderToggle = ( {\n\tonToggle,\n\tdisabled,\n\tisOpen,\n\tblockTitle,\n\thasSingleBlockType,\n\ttoggleProps = {},\n} ) => {\n\tconst {\n\t\tas: Wrapper = Button,\n\t\tlabel: labelProp,\n\t\tonClick,\n\t\t...rest\n\t} = toggleProps;\n\n\tlet label = labelProp;\n\tif ( ! label && hasSingleBlockType ) {\n\t\tlabel = sprintf(\n\t\t\t// translators: %s: the name of the block when there is only one\n\t\t\t_x( 'Add %s', 'directly add the only allowed block' ),\n\t\t\tblockTitle\n\t\t);\n\t} else if ( ! label ) {\n\t\tlabel = _x( 'Add block', 'Generic label for block inserter button' );\n\t}\n\n\t// Handle both onClick functions from the toggle and the parent component.\n\tfunction handleClick( event ) {\n\t\tif ( onToggle ) {\n\t\t\tonToggle( event );\n\t\t}\n\t\tif ( onClick ) {\n\t\t\tonClick( event );\n\t\t}\n\t}\n\n\treturn (\n\t\t<Wrapper\n\t\t\t__next40pxDefaultSize={ toggleProps.as ? undefined : true }\n\t\t\ticon={ plus }\n\t\t\tlabel={ label }\n\t\t\ttooltipPosition=\"bottom\"\n\t\t\tonClick={ handleClick }\n\t\t\tclassName=\"block-editor-inserter__toggle\"\n\t\t\taria-haspopup={ ! hasSingleBlockType ? 'true' : false }\n\t\t\taria-expanded={ ! hasSingleBlockType ? isOpen : false }\n\t\t\tdisabled={ disabled }\n\t\t\t{ ...rest }\n\t\t/>\n\t);\n};\n\nclass Inserter extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onToggle = this.onToggle.bind( this );\n\t\tthis.renderToggle = this.renderToggle.bind( this );\n\t\tthis.renderContent = this.renderContent.bind( this );\n\t}\n\n\tonToggle( isOpen ) {\n\t\tconst { onToggle } = this.props;\n\n\t\t// Surface toggle callback to parent component.\n\t\tif ( onToggle ) {\n\t\t\tonToggle( isOpen );\n\t\t}\n\t}\n\n\t/**\n\t * Render callback to display Dropdown toggle element.\n\t *\n\t * @param {Object}   options\n\t * @param {Function} options.onToggle Callback to invoke when toggle is\n\t *                                    pressed.\n\t * @param {boolean}  options.isOpen   Whether dropdown is currently open.\n\t *\n\t * @return {Element} Dropdown toggle element.\n\t */\n\trenderToggle( { onToggle, isOpen } ) {\n\t\tconst {\n\t\t\tdisabled,\n\t\t\tblockTitle,\n\t\t\thasSingleBlockType,\n\t\t\tdirectInsertBlock,\n\t\t\ttoggleProps,\n\t\t\thasItems,\n\t\t\trenderToggle = defaultRenderToggle,\n\t\t} = this.props;\n\n\t\treturn renderToggle( {\n\t\t\tonToggle,\n\t\t\tisOpen,\n\t\t\tdisabled: disabled || ! hasItems,\n\t\t\tblockTitle,\n\t\t\thasSingleBlockType,\n\t\t\tdirectInsertBlock,\n\t\t\ttoggleProps,\n\t\t} );\n\t}\n\n\t/**\n\t * Render callback to display Dropdown content element.\n\t *\n\t * @param {Object}   options\n\t * @param {Function} options.onClose Callback to invoke when dropdown is\n\t *                                   closed.\n\t *\n\t * @return {Element} Dropdown content element.\n\t */\n\trenderContent( { onClose } ) {\n\t\tconst {\n\t\t\trootClientId,\n\t\t\tclientId,\n\t\t\tisAppender,\n\t\t\tshowInserterHelpPanel,\n\n\t\t\t// This prop is experimental to give some time for the quick inserter to mature\n\t\t\t// Feel free to make them stable after a few releases.\n\t\t\t__experimentalIsQuick: isQuick,\n\t\t\tonSelectOrClose,\n\t\t\tselectBlockOnInsert,\n\t\t} = this.props;\n\n\t\tif ( isQuick ) {\n\t\t\treturn (\n\t\t\t\t<QuickInserter\n\t\t\t\t\tonSelect={ ( blocks ) => {\n\t\t\t\t\t\tconst firstBlock =\n\t\t\t\t\t\t\tArray.isArray( blocks ) && blocks?.length\n\t\t\t\t\t\t\t\t? blocks[ 0 ]\n\t\t\t\t\t\t\t\t: blocks;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tonSelectOrClose &&\n\t\t\t\t\t\t\ttypeof onSelectOrClose === 'function'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tonSelectOrClose( firstBlock );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tisAppender={ isAppender }\n\t\t\t\t\tselectBlockOnInsert={ selectBlockOnInsert }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<InserterMenu\n\t\t\t\tonSelect={ () => {\n\t\t\t\t\tonClose();\n\t\t\t\t} }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tclientId={ clientId }\n\t\t\t\tisAppender={ isAppender }\n\t\t\t\tshowInserterHelpPanel={ showInserterHelpPanel }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tposition,\n\t\t\thasSingleBlockType,\n\t\t\tdirectInsertBlock,\n\t\t\tinsertOnlyAllowedBlock,\n\t\t\t__experimentalIsQuick: isQuick,\n\t\t\tonSelectOrClose,\n\t\t} = this.props;\n\n\t\tif ( hasSingleBlockType || directInsertBlock ) {\n\t\t\treturn this.renderToggle( { onToggle: insertOnlyAllowedBlock } );\n\t\t}\n\n\t\treturn (\n\t\t\t<Dropdown\n\t\t\t\tclassName=\"block-editor-inserter\"\n\t\t\t\tcontentClassName={ clsx( 'block-editor-inserter__popover', {\n\t\t\t\t\t'is-quick': isQuick,\n\t\t\t\t} ) }\n\t\t\t\tpopoverProps={ { position, shift: true } }\n\t\t\t\tonToggle={ this.onToggle }\n\t\t\t\texpandOnMobile\n\t\t\t\theaderTitle={ __( 'Add a block' ) }\n\t\t\t\trenderToggle={ this.renderToggle }\n\t\t\t\trenderContent={ this.renderContent }\n\t\t\t\tonClose={ onSelectOrClose }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect(\n\t\t( select, { clientId, rootClientId, shouldDirectInsert = true } ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\thasInserterItems,\n\t\t\t\tgetAllowedBlocks,\n\t\t\t\tgetDirectInsertBlock,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst { getBlockVariations } = select( blocksStore );\n\n\t\t\trootClientId =\n\t\t\t\trootClientId || getBlockRootClientId( clientId ) || undefined;\n\n\t\t\tconst allowedBlocks = getAllowedBlocks( rootClientId );\n\n\t\t\tconst directInsertBlock =\n\t\t\t\tshouldDirectInsert && getDirectInsertBlock( rootClientId );\n\n\t\t\tconst hasSingleBlockType =\n\t\t\t\tallowedBlocks?.length === 1 &&\n\t\t\t\tgetBlockVariations( allowedBlocks[ 0 ].name, 'inserter' )\n\t\t\t\t\t?.length === 0;\n\n\t\t\tlet allowedBlockType = false;\n\t\t\tif ( hasSingleBlockType ) {\n\t\t\t\tallowedBlockType = allowedBlocks[ 0 ];\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\thasItems: hasInserterItems( rootClientId ),\n\t\t\t\thasSingleBlockType,\n\t\t\t\tblockTitle: allowedBlockType ? allowedBlockType.title : '',\n\t\t\t\tallowedBlockType,\n\t\t\t\tdirectInsertBlock,\n\t\t\t\trootClientId,\n\t\t\t};\n\t\t}\n\t),\n\twithDispatch( ( dispatch, ownProps, { select } ) => {\n\t\treturn {\n\t\t\tinsertOnlyAllowedBlock() {\n\t\t\t\tconst {\n\t\t\t\t\trootClientId,\n\t\t\t\t\tclientId,\n\t\t\t\t\tisAppender,\n\t\t\t\t\thasSingleBlockType,\n\t\t\t\t\tallowedBlockType,\n\t\t\t\t\tdirectInsertBlock,\n\t\t\t\t\tonSelectOrClose,\n\t\t\t\t\tselectBlockOnInsert,\n\t\t\t\t} = ownProps;\n\n\t\t\t\tif ( ! hasSingleBlockType && ! directInsertBlock ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfunction getAdjacentBlockAttributes( attributesToCopy ) {\n\t\t\t\t\tconst { getBlock, getPreviousBlockClientId } =\n\t\t\t\t\t\tselect( blockEditorStore );\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t! attributesToCopy ||\n\t\t\t\t\t\t( ! clientId && ! rootClientId )\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn {};\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = {};\n\t\t\t\t\tlet adjacentAttributes = {};\n\n\t\t\t\t\t// If there is no clientId, then attempt to get attributes\n\t\t\t\t\t// from the last block within innerBlocks of the root block.\n\t\t\t\t\tif ( ! clientId ) {\n\t\t\t\t\t\tconst parentBlock = getBlock( rootClientId );\n\n\t\t\t\t\t\tif ( parentBlock?.innerBlocks?.length ) {\n\t\t\t\t\t\t\tconst lastInnerBlock =\n\t\t\t\t\t\t\t\tparentBlock.innerBlocks[\n\t\t\t\t\t\t\t\t\tparentBlock.innerBlocks.length - 1\n\t\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tdirectInsertBlock &&\n\t\t\t\t\t\t\t\tdirectInsertBlock?.name === lastInnerBlock.name\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tadjacentAttributes = lastInnerBlock.attributes;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Otherwise, attempt to get attributes from the\n\t\t\t\t\t\t// previous block relative to the current clientId.\n\t\t\t\t\t\tconst currentBlock = getBlock( clientId );\n\t\t\t\t\t\tconst previousBlock = getBlock(\n\t\t\t\t\t\t\tgetPreviousBlockClientId( clientId )\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif ( currentBlock?.name === previousBlock?.name ) {\n\t\t\t\t\t\t\tadjacentAttributes =\n\t\t\t\t\t\t\t\tpreviousBlock?.attributes || {};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Copy over only those attributes flagged to be copied.\n\t\t\t\t\tattributesToCopy.forEach( ( attribute ) => {\n\t\t\t\t\t\tif ( adjacentAttributes.hasOwnProperty( attribute ) ) {\n\t\t\t\t\t\t\tresult[ attribute ] =\n\t\t\t\t\t\t\t\tadjacentAttributes[ attribute ];\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tfunction getInsertionIndex() {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tgetBlockIndex,\n\t\t\t\t\t\tgetBlockSelectionEnd,\n\t\t\t\t\t\tgetBlockOrder,\n\t\t\t\t\t\tgetBlockRootClientId,\n\t\t\t\t\t} = select( blockEditorStore );\n\n\t\t\t\t\t// If the clientId is defined, we insert at the position of the block.\n\t\t\t\t\tif ( clientId ) {\n\t\t\t\t\t\treturn getBlockIndex( clientId );\n\t\t\t\t\t}\n\n\t\t\t\t\t// If there a selected block, we insert after the selected block.\n\t\t\t\t\tconst end = getBlockSelectionEnd();\n\t\t\t\t\tif (\n\t\t\t\t\t\t! isAppender &&\n\t\t\t\t\t\tend &&\n\t\t\t\t\t\tgetBlockRootClientId( end ) === rootClientId\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn getBlockIndex( end ) + 1;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Otherwise, we insert at the end of the current rootClientId.\n\t\t\t\t\treturn getBlockOrder( rootClientId ).length;\n\t\t\t\t}\n\n\t\t\t\tconst { insertBlock } = dispatch( blockEditorStore );\n\n\t\t\t\tlet blockToInsert;\n\n\t\t\t\t// Attempt to augment the directInsertBlock with attributes from an adjacent block.\n\t\t\t\t// This ensures styling from nearby blocks is preserved in the newly inserted block.\n\t\t\t\t// See: https://github.com/WordPress/gutenberg/issues/37904\n\t\t\t\tif ( directInsertBlock ) {\n\t\t\t\t\tconst newAttributes = getAdjacentBlockAttributes(\n\t\t\t\t\t\tdirectInsertBlock.attributesToCopy\n\t\t\t\t\t);\n\n\t\t\t\t\tblockToInsert = createBlock( directInsertBlock.name, {\n\t\t\t\t\t\t...( directInsertBlock.attributes || {} ),\n\t\t\t\t\t\t...newAttributes,\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tblockToInsert = createBlock( allowedBlockType.name );\n\t\t\t\t}\n\n\t\t\t\tinsertBlock(\n\t\t\t\t\tblockToInsert,\n\t\t\t\t\tgetInsertionIndex(),\n\t\t\t\t\trootClientId,\n\t\t\t\t\tselectBlockOnInsert\n\t\t\t\t);\n\n\t\t\t\tif ( onSelectOrClose ) {\n\t\t\t\t\tonSelectOrClose( {\n\t\t\t\t\t\tclientId: blockToInsert?.clientId,\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tconst message = sprintf(\n\t\t\t\t\t// translators: %s: the name of the block that has been added\n\t\t\t\t\t__( '%s block added' ),\n\t\t\t\t\tallowedBlockType.title\n\t\t\t\t);\n\t\t\t\tspeak( message );\n\t\t\t},\n\t\t};\n\t} ),\n\t// The global inserter should always be visible, we are using ( ! isAppender && ! rootClientId && ! clientId ) as\n\t// a way to detect the global Inserter.\n\tifCondition(\n\t\t( { hasItems, isAppender, rootClientId, clientId } ) =>\n\t\t\thasItems || ( ! isAppender && ! rootClientId && ! clientId )\n\t),\n] )( Inserter );\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { forwardRef } from '@wordpress/element';\nimport { _x, sprintf } from '@wordpress/i18n';\nimport { Icon, plus } from '@wordpress/icons';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport Inserter from '../inserter';\n\nfunction ButtonBlockAppender(\n\t{ rootClientId, className, onFocus, tabIndex, onSelect },\n\tref\n) {\n\treturn (\n\t\t<Inserter\n\t\t\tposition=\"bottom center\"\n\t\t\trootClientId={ rootClientId }\n\t\t\t__experimentalIsQuick\n\t\t\tonSelectOrClose={ ( ...args ) => {\n\t\t\t\tif ( onSelect && typeof onSelect === 'function' ) {\n\t\t\t\t\tonSelect( ...args );\n\t\t\t\t}\n\t\t\t} }\n\t\t\trenderToggle={ ( {\n\t\t\t\tonToggle,\n\t\t\t\tdisabled,\n\t\t\t\tisOpen,\n\t\t\t\tblockTitle,\n\t\t\t\thasSingleBlockType,\n\t\t\t} ) => {\n\t\t\t\tconst isToggleButton = ! hasSingleBlockType;\n\t\t\t\tconst label = hasSingleBlockType\n\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t// translators: %s: the name of the block when there is only one\n\t\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t\t'Add %s',\n\t\t\t\t\t\t\t\t'directly add the only allowed block'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tblockTitle\n\t\t\t\t\t  )\n\t\t\t\t\t: _x(\n\t\t\t\t\t\t\t'Add block',\n\t\t\t\t\t\t\t'Generic label for block inserter button'\n\t\t\t\t\t  );\n\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t'block-editor-button-block-appender'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\taria-haspopup={ isToggleButton ? 'true' : undefined }\n\t\t\t\t\t\taria-expanded={ isToggleButton ? isOpen : undefined }\n\t\t\t\t\t\t// Disable reason: There shouldn't be a case where this button is disabled but not visually hidden.\n\t\t\t\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon icon={ plus } />\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t} }\n\t\t\tisAppender\n\t\t/>\n\t);\n}\n\n/**\n * Use `ButtonBlockAppender` instead.\n *\n * @deprecated\n */\nexport const ButtonBlockerAppender = forwardRef( ( props, ref ) => {\n\tdeprecated( `wp.blockEditor.ButtonBlockerAppender`, {\n\t\talternative: 'wp.blockEditor.ButtonBlockAppender',\n\t\tsince: '5.9',\n\t} );\n\n\treturn ButtonBlockAppender( props, ref );\n} );\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/button-block-appender/README.md\n */\nexport default forwardRef( ButtonBlockAppender );\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect, forwardRef, useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __experimentalUseDropZone as useDropZone } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport BlockPopoverCover from '../block-popover/cover';\nimport { range, GridRect, getGridInfo } from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport { useGetNumberOfBlocksBeforeCell } from './use-get-number-of-blocks-before-cell';\nimport ButtonBlockAppender from '../button-block-appender';\nimport { unlock } from '../../lock-unlock';\n\nexport function GridVisualizer( { clientId, contentRef, parentLayout } ) {\n\tconst isDistractionFree = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getSettings().isDistractionFree,\n\t\t[]\n\t);\n\tconst gridElement = useBlockElement( clientId );\n\n\tif ( isDistractionFree || ! gridElement ) {\n\t\treturn null;\n\t}\n\n\tconst isManualGrid =\n\t\tparentLayout?.isManualPlacement &&\n\t\twindow.__experimentalEnableGridInteractivity;\n\treturn (\n\t\t<GridVisualizerGrid\n\t\t\tgridClientId={ clientId }\n\t\t\tgridElement={ gridElement }\n\t\t\tisManualGrid={ isManualGrid }\n\t\t\tref={ contentRef }\n\t\t/>\n\t);\n}\n\nconst GridVisualizerGrid = forwardRef(\n\t( { gridClientId, gridElement, isManualGrid }, ref ) => {\n\t\tconst [ gridInfo, setGridInfo ] = useState( () =>\n\t\t\tgetGridInfo( gridElement )\n\t\t);\n\t\tconst [ isDroppingAllowed, setIsDroppingAllowed ] = useState( false );\n\n\t\tuseEffect( () => {\n\t\t\tconst resizeCallback = () =>\n\t\t\t\tsetGridInfo( getGridInfo( gridElement ) );\n\t\t\t// Both border-box and content-box are observed as they may change\n\t\t\t// independently. This requires two observers because a single one\n\t\t\t// cant be made to monitor both on the same element.\n\t\t\tconst borderBoxSpy = new window.ResizeObserver( resizeCallback );\n\t\t\tborderBoxSpy.observe( gridElement, { box: 'border-box' } );\n\t\t\tconst contentBoxSpy = new window.ResizeObserver( resizeCallback );\n\t\t\tcontentBoxSpy.observe( gridElement );\n\t\t\treturn () => {\n\t\t\t\tborderBoxSpy.disconnect();\n\t\t\t\tcontentBoxSpy.disconnect();\n\t\t\t};\n\t\t}, [ gridElement ] );\n\n\t\tuseEffect( () => {\n\t\t\tfunction onGlobalDrag() {\n\t\t\t\tsetIsDroppingAllowed( true );\n\t\t\t}\n\t\t\tfunction onGlobalDragEnd() {\n\t\t\t\tsetIsDroppingAllowed( false );\n\t\t\t}\n\t\t\tdocument.addEventListener( 'drag', onGlobalDrag );\n\t\t\tdocument.addEventListener( 'dragend', onGlobalDragEnd );\n\t\t\treturn () => {\n\t\t\t\tdocument.removeEventListener( 'drag', onGlobalDrag );\n\t\t\t\tdocument.removeEventListener( 'dragend', onGlobalDragEnd );\n\t\t\t};\n\t\t}, [] );\n\n\t\treturn (\n\t\t\t<BlockPopoverCover\n\t\t\t\tclassName={ clsx( 'block-editor-grid-visualizer', {\n\t\t\t\t\t'is-dropping-allowed': isDroppingAllowed,\n\t\t\t\t} ) }\n\t\t\t\tclientId={ gridClientId }\n\t\t\t\t__unstablePopoverSlot=\"__unstable-block-tools-after\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tref={ ref }\n\t\t\t\t\tclassName=\"block-editor-grid-visualizer__grid\"\n\t\t\t\t\tstyle={ gridInfo.style }\n\t\t\t\t>\n\t\t\t\t\t{ isManualGrid ? (\n\t\t\t\t\t\t<ManualGridVisualizer\n\t\t\t\t\t\t\tgridClientId={ gridClientId }\n\t\t\t\t\t\t\tgridInfo={ gridInfo }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tArray.from( { length: gridInfo.numItems }, ( _, i ) => (\n\t\t\t\t\t\t\t<GridVisualizerCell\n\t\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\t\tcolor={ gridInfo.currentColor }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) )\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t</BlockPopoverCover>\n\t\t);\n\t}\n);\n\nfunction ManualGridVisualizer( { gridClientId, gridInfo } ) {\n\tconst [ highlightedRect, setHighlightedRect ] = useState( null );\n\n\tconst gridItemStyles = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockOrder, getBlockStyles } = unlock(\n\t\t\t\tselect( blockEditorStore )\n\t\t\t);\n\t\t\tconst blockOrder = getBlockOrder( gridClientId );\n\t\t\treturn getBlockStyles( blockOrder );\n\t\t},\n\t\t[ gridClientId ]\n\t);\n\tconst occupiedRects = useMemo( () => {\n\t\tconst rects = [];\n\t\tfor ( const style of Object.values( gridItemStyles ) ) {\n\t\t\tconst {\n\t\t\t\tcolumnStart,\n\t\t\t\trowStart,\n\t\t\t\tcolumnSpan = 1,\n\t\t\t\trowSpan = 1,\n\t\t\t} = style?.layout ?? {};\n\t\t\tif ( ! columnStart || ! rowStart ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\trects.push(\n\t\t\t\tnew GridRect( {\n\t\t\t\t\tcolumnStart,\n\t\t\t\t\trowStart,\n\t\t\t\t\tcolumnSpan,\n\t\t\t\t\trowSpan,\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\t\treturn rects;\n\t}, [ gridItemStyles ] );\n\n\treturn range( 1, gridInfo.numRows ).map( ( row ) =>\n\t\trange( 1, gridInfo.numColumns ).map( ( column ) => {\n\t\t\tconst isCellOccupied = occupiedRects.some( ( rect ) =>\n\t\t\t\trect.contains( column, row )\n\t\t\t);\n\t\t\tconst isHighlighted =\n\t\t\t\thighlightedRect?.contains( column, row ) ?? false;\n\t\t\treturn (\n\t\t\t\t<GridVisualizerCell\n\t\t\t\t\tkey={ `${ row }-${ column }` }\n\t\t\t\t\tcolor={ gridInfo.currentColor }\n\t\t\t\t\tclassName={ isHighlighted && 'is-highlighted' }\n\t\t\t\t>\n\t\t\t\t\t{ isCellOccupied ? (\n\t\t\t\t\t\t<GridVisualizerDropZone\n\t\t\t\t\t\t\tcolumn={ column }\n\t\t\t\t\t\t\trow={ row }\n\t\t\t\t\t\t\tgridClientId={ gridClientId }\n\t\t\t\t\t\t\tgridInfo={ gridInfo }\n\t\t\t\t\t\t\tsetHighlightedRect={ setHighlightedRect }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<GridVisualizerAppender\n\t\t\t\t\t\t\tcolumn={ column }\n\t\t\t\t\t\t\trow={ row }\n\t\t\t\t\t\t\tgridClientId={ gridClientId }\n\t\t\t\t\t\t\tgridInfo={ gridInfo }\n\t\t\t\t\t\t\tsetHighlightedRect={ setHighlightedRect }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</GridVisualizerCell>\n\t\t\t);\n\t\t} )\n\t);\n}\n\nfunction GridVisualizerCell( { color, children, className } ) {\n\treturn (\n\t\t<div\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-grid-visualizer__cell',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\tstyle={ {\n\t\t\t\tboxShadow: `inset 0 0 0 1px color-mix(in srgb, ${ color } 20%, #0000)`,\n\t\t\t\tcolor,\n\t\t\t} }\n\t\t>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n\nfunction useGridVisualizerDropZone(\n\tcolumn,\n\trow,\n\tgridClientId,\n\tgridInfo,\n\tsetHighlightedRect\n) {\n\tconst {\n\t\tgetBlockAttributes,\n\t\tgetBlockRootClientId,\n\t\tcanInsertBlockType,\n\t\tgetBlockName,\n\t} = useSelect( blockEditorStore );\n\tconst {\n\t\tupdateBlockAttributes,\n\t\tmoveBlocksToPosition,\n\t\t__unstableMarkNextChangeAsNotPersistent,\n\t} = useDispatch( blockEditorStore );\n\n\tconst getNumberOfBlocksBeforeCell = useGetNumberOfBlocksBeforeCell(\n\t\tgridClientId,\n\t\tgridInfo.numColumns\n\t);\n\n\treturn useDropZoneWithValidation( {\n\t\tvalidateDrag( srcClientId ) {\n\t\t\tconst blockName = getBlockName( srcClientId );\n\t\t\tif ( ! canInsertBlockType( blockName, gridClientId ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst attributes = getBlockAttributes( srcClientId );\n\t\t\tconst rect = new GridRect( {\n\t\t\t\tcolumnStart: column,\n\t\t\t\trowStart: row,\n\t\t\t\tcolumnSpan: attributes.style?.layout?.columnSpan,\n\t\t\t\trowSpan: attributes.style?.layout?.rowSpan,\n\t\t\t} );\n\t\t\tconst isInBounds = new GridRect( {\n\t\t\t\tcolumnSpan: gridInfo.numColumns,\n\t\t\t\trowSpan: gridInfo.numRows,\n\t\t\t} ).containsRect( rect );\n\t\t\treturn isInBounds;\n\t\t},\n\t\tonDragEnter( srcClientId ) {\n\t\t\tconst attributes = getBlockAttributes( srcClientId );\n\t\t\tsetHighlightedRect(\n\t\t\t\tnew GridRect( {\n\t\t\t\t\tcolumnStart: column,\n\t\t\t\t\trowStart: row,\n\t\t\t\t\tcolumnSpan: attributes.style?.layout?.columnSpan,\n\t\t\t\t\trowSpan: attributes.style?.layout?.rowSpan,\n\t\t\t\t} )\n\t\t\t);\n\t\t},\n\t\tonDragLeave() {\n\t\t\t// onDragEnter can be called before onDragLeave if the user moves\n\t\t\t// their mouse quickly, so only clear the highlight if it was set\n\t\t\t// by this cell.\n\t\t\tsetHighlightedRect( ( prevHighlightedRect ) =>\n\t\t\t\tprevHighlightedRect?.columnStart === column &&\n\t\t\t\tprevHighlightedRect?.rowStart === row\n\t\t\t\t\t? null\n\t\t\t\t\t: prevHighlightedRect\n\t\t\t);\n\t\t},\n\t\tonDrop( srcClientId ) {\n\t\t\tsetHighlightedRect( null );\n\t\t\tconst attributes = getBlockAttributes( srcClientId );\n\t\t\tupdateBlockAttributes( srcClientId, {\n\t\t\t\tstyle: {\n\t\t\t\t\t...attributes.style,\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\t...attributes.style?.layout,\n\t\t\t\t\t\tcolumnStart: column,\n\t\t\t\t\t\trowStart: row,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t} );\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\tmoveBlocksToPosition(\n\t\t\t\t[ srcClientId ],\n\t\t\t\tgetBlockRootClientId( srcClientId ),\n\t\t\t\tgridClientId,\n\t\t\t\tgetNumberOfBlocksBeforeCell( column, row )\n\t\t\t);\n\t\t},\n\t} );\n}\n\nfunction GridVisualizerDropZone( {\n\tcolumn,\n\trow,\n\tgridClientId,\n\tgridInfo,\n\tsetHighlightedRect,\n} ) {\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block-editor-grid-visualizer__drop-zone\"\n\t\t\tref={ useGridVisualizerDropZone(\n\t\t\t\tcolumn,\n\t\t\t\trow,\n\t\t\t\tgridClientId,\n\t\t\t\tgridInfo,\n\t\t\t\tsetHighlightedRect\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nfunction GridVisualizerAppender( {\n\tcolumn,\n\trow,\n\tgridClientId,\n\tgridInfo,\n\tsetHighlightedRect,\n} ) {\n\tconst {\n\t\tupdateBlockAttributes,\n\t\tmoveBlocksToPosition,\n\t\t__unstableMarkNextChangeAsNotPersistent,\n\t} = useDispatch( blockEditorStore );\n\n\tconst getNumberOfBlocksBeforeCell = useGetNumberOfBlocksBeforeCell(\n\t\tgridClientId,\n\t\tgridInfo.numColumns\n\t);\n\n\treturn (\n\t\t<ButtonBlockAppender\n\t\t\trootClientId={ gridClientId }\n\t\t\tclassName=\"block-editor-grid-visualizer__appender\"\n\t\t\tref={ useGridVisualizerDropZone(\n\t\t\t\tcolumn,\n\t\t\t\trow,\n\t\t\t\tgridClientId,\n\t\t\t\tgridInfo,\n\t\t\t\tsetHighlightedRect\n\t\t\t) }\n\t\t\tstyle={ {\n\t\t\t\tcolor: gridInfo.currentColor,\n\t\t\t} }\n\t\t\tonSelect={ ( block ) => {\n\t\t\t\tif ( ! block ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tupdateBlockAttributes( block.clientId, {\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\tcolumnStart: column,\n\t\t\t\t\t\t\trowStart: row,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t[ block.clientId ],\n\t\t\t\t\tgridClientId,\n\t\t\t\t\tgridClientId,\n\t\t\t\t\tgetNumberOfBlocksBeforeCell( column, row )\n\t\t\t\t);\n\t\t\t} }\n\t\t/>\n\t);\n}\n\nfunction useDropZoneWithValidation( {\n\tvalidateDrag,\n\tonDragEnter,\n\tonDragLeave,\n\tonDrop,\n} ) {\n\tconst { getDraggedBlockClientIds } = useSelect( blockEditorStore );\n\treturn useDropZone( {\n\t\tonDragEnter() {\n\t\t\tconst [ srcClientId ] = getDraggedBlockClientIds();\n\t\t\tif ( srcClientId && validateDrag( srcClientId ) ) {\n\t\t\t\tonDragEnter( srcClientId );\n\t\t\t}\n\t\t},\n\t\tonDragLeave() {\n\t\t\tonDragLeave();\n\t\t},\n\t\tonDrop() {\n\t\t\tconst [ srcClientId ] = getDraggedBlockClientIds();\n\t\t\tif ( srcClientId && validateDrag( srcClientId ) ) {\n\t\t\t\tonDrop( srcClientId );\n\t\t\t}\n\t\t},\n\t} );\n}\n","/**\n * WordPress dependencies\n */\nimport { ResizableBox } from '@wordpress/components';\nimport { useState, useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport BlockPopoverCover from '../block-popover/cover';\nimport { getComputedCSS, getGridTracks, getClosestTrack } from './utils';\n\nexport function GridItemResizer( {\n\tclientId,\n\tbounds,\n\tonChange,\n\tparentLayout,\n} ) {\n\tconst blockElement = useBlockElement( clientId );\n\tconst rootBlockElement = blockElement?.parentElement;\n\tconst { isManualPlacement } = parentLayout;\n\n\tif ( ! blockElement || ! rootBlockElement ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<GridItemResizerInner\n\t\t\tclientId={ clientId }\n\t\t\tbounds={ bounds }\n\t\t\tblockElement={ blockElement }\n\t\t\trootBlockElement={ rootBlockElement }\n\t\t\tonChange={ onChange }\n\t\t\tisManualGrid={\n\t\t\t\tisManualPlacement &&\n\t\t\t\twindow.__experimentalEnableGridInteractivity\n\t\t\t}\n\t\t/>\n\t);\n}\n\nfunction GridItemResizerInner( {\n\tclientId,\n\tbounds,\n\tblockElement,\n\trootBlockElement,\n\tonChange,\n\tisManualGrid,\n} ) {\n\tconst [ resizeDirection, setResizeDirection ] = useState( null );\n\tconst [ enableSide, setEnableSide ] = useState( {\n\t\ttop: false,\n\t\tbottom: false,\n\t\tleft: false,\n\t\tright: false,\n\t} );\n\n\tuseEffect( () => {\n\t\tconst observer = new window.ResizeObserver( () => {\n\t\t\tconst blockClientRect = blockElement.getBoundingClientRect();\n\t\t\tconst rootBlockClientRect =\n\t\t\t\trootBlockElement.getBoundingClientRect();\n\t\t\tsetEnableSide( {\n\t\t\t\ttop: blockClientRect.top > rootBlockClientRect.top,\n\t\t\t\tbottom: blockClientRect.bottom < rootBlockClientRect.bottom,\n\t\t\t\tleft: blockClientRect.left > rootBlockClientRect.left,\n\t\t\t\tright: blockClientRect.right < rootBlockClientRect.right,\n\t\t\t} );\n\t\t} );\n\t\tobserver.observe( blockElement );\n\t\treturn () => observer.disconnect();\n\t}, [ blockElement, rootBlockElement ] );\n\n\tconst justification = {\n\t\tright: 'left',\n\t\tleft: 'right',\n\t};\n\n\tconst alignment = {\n\t\ttop: 'flex-end',\n\t\tbottom: 'flex-start',\n\t};\n\n\tconst styles = {\n\t\tdisplay: 'flex',\n\t\tjustifyContent: 'center',\n\t\talignItems: 'center',\n\t\t...( justification[ resizeDirection ] && {\n\t\t\tjustifyContent: justification[ resizeDirection ],\n\t\t} ),\n\t\t...( alignment[ resizeDirection ] && {\n\t\t\talignItems: alignment[ resizeDirection ],\n\t\t} ),\n\t};\n\n\treturn (\n\t\t<BlockPopoverCover\n\t\t\tclassName=\"block-editor-grid-item-resizer\"\n\t\t\tclientId={ clientId }\n\t\t\t__unstablePopoverSlot=\"__unstable-block-tools-after\"\n\t\t\tadditionalStyles={ styles }\n\t\t>\n\t\t\t<ResizableBox\n\t\t\t\tclassName=\"block-editor-grid-item-resizer__box\"\n\t\t\t\tsize={ {\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%',\n\t\t\t\t} }\n\t\t\t\tenable={ {\n\t\t\t\t\tbottom: enableSide.bottom,\n\t\t\t\t\tbottomLeft: false,\n\t\t\t\t\tbottomRight: false,\n\t\t\t\t\tleft: enableSide.left,\n\t\t\t\t\tright: enableSide.right,\n\t\t\t\t\ttop: enableSide.top,\n\t\t\t\t\ttopLeft: false,\n\t\t\t\t\ttopRight: false,\n\t\t\t\t} }\n\t\t\t\tbounds={ bounds }\n\t\t\t\tboundsByDirection\n\t\t\t\tonPointerDown={ ( { target, pointerId } ) => {\n\t\t\t\t\t/*\n\t\t\t\t\t * Captures the pointer to avoid hiccups while dragging over objects\n\t\t\t\t\t * like iframes and ensures that the event to end the drag is\n\t\t\t\t\t * captured by the target (resize handle) whether or not its under\n\t\t\t\t\t * the pointer.\n\t\t\t\t\t */\n\t\t\t\t\ttarget.setPointerCapture( pointerId );\n\t\t\t\t} }\n\t\t\t\tonResizeStart={ ( event, direction ) => {\n\t\t\t\t\t/*\n\t\t\t\t\t * The container justification and alignment need to be set\n\t\t\t\t\t * according to the direction the resizer is being dragged in,\n\t\t\t\t\t * so that it resizes in the right direction.\n\t\t\t\t\t */\n\t\t\t\t\tsetResizeDirection( direction );\n\t\t\t\t} }\n\t\t\t\tonResizeStop={ ( event, direction, boxElement ) => {\n\t\t\t\t\tconst columnGap = parseFloat(\n\t\t\t\t\t\tgetComputedCSS( rootBlockElement, 'column-gap' )\n\t\t\t\t\t);\n\t\t\t\t\tconst rowGap = parseFloat(\n\t\t\t\t\t\tgetComputedCSS( rootBlockElement, 'row-gap' )\n\t\t\t\t\t);\n\t\t\t\t\tconst gridColumnTracks = getGridTracks(\n\t\t\t\t\t\tgetComputedCSS(\n\t\t\t\t\t\t\trootBlockElement,\n\t\t\t\t\t\t\t'grid-template-columns'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcolumnGap\n\t\t\t\t\t);\n\t\t\t\t\tconst gridRowTracks = getGridTracks(\n\t\t\t\t\t\tgetComputedCSS(\n\t\t\t\t\t\t\trootBlockElement,\n\t\t\t\t\t\t\t'grid-template-rows'\n\t\t\t\t\t\t),\n\t\t\t\t\t\trowGap\n\t\t\t\t\t);\n\t\t\t\t\tconst rect = new window.DOMRect(\n\t\t\t\t\t\tblockElement.offsetLeft + boxElement.offsetLeft,\n\t\t\t\t\t\tblockElement.offsetTop + boxElement.offsetTop,\n\t\t\t\t\t\tboxElement.offsetWidth,\n\t\t\t\t\t\tboxElement.offsetHeight\n\t\t\t\t\t);\n\t\t\t\t\tconst columnStart =\n\t\t\t\t\t\tgetClosestTrack( gridColumnTracks, rect.left ) + 1;\n\t\t\t\t\tconst rowStart =\n\t\t\t\t\t\tgetClosestTrack( gridRowTracks, rect.top ) + 1;\n\t\t\t\t\tconst columnEnd =\n\t\t\t\t\t\tgetClosestTrack( gridColumnTracks, rect.right, 'end' ) +\n\t\t\t\t\t\t1;\n\t\t\t\t\tconst rowEnd =\n\t\t\t\t\t\tgetClosestTrack( gridRowTracks, rect.bottom, 'end' ) +\n\t\t\t\t\t\t1;\n\t\t\t\t\tonChange( {\n\t\t\t\t\t\tcolumnSpan: columnEnd - columnStart + 1,\n\t\t\t\t\t\trowSpan: rowEnd - rowStart + 1,\n\t\t\t\t\t\tcolumnStart: isManualGrid ? columnStart : undefined,\n\t\t\t\t\t\trowStart: isManualGrid ? rowStart : undefined,\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t/>\n\t\t</BlockPopoverCover>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronUp = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z\" />\n\t</SVG>\n);\n\nexport default chevronUp;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronDown = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z\" />\n\t</SVG>\n);\n\nexport default chevronDown;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __, isRTL } from '@wordpress/i18n';\nimport {\n\tVisuallyHidden,\n\tToolbarButton,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport {\n\tchevronLeft,\n\tchevronUp,\n\tchevronDown,\n\tchevronRight,\n} from '@wordpress/icons';\nimport { useDispatch } from '@wordpress/data';\nimport { useInstanceId } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockControls from '../block-controls';\nimport { useGetNumberOfBlocksBeforeCell } from './use-get-number-of-blocks-before-cell';\nimport { store as blockEditorStore } from '../../store';\n\nexport function GridItemMovers( {\n\tlayout,\n\tparentLayout,\n\tonChange,\n\tgridClientId,\n\tblockClientId,\n} ) {\n\tconst { moveBlocksToPosition, __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\n\tconst columnStart = layout?.columnStart ?? 1;\n\tconst rowStart = layout?.rowStart ?? 1;\n\tconst columnSpan = layout?.columnSpan ?? 1;\n\tconst rowSpan = layout?.rowSpan ?? 1;\n\tconst columnEnd = columnStart + columnSpan - 1;\n\tconst rowEnd = rowStart + rowSpan - 1;\n\tconst columnCount = parentLayout?.columnCount;\n\tconst rowCount = parentLayout?.rowCount;\n\n\tconst getNumberOfBlocksBeforeCell = useGetNumberOfBlocksBeforeCell(\n\t\tgridClientId,\n\t\tcolumnCount\n\t);\n\n\treturn (\n\t\t<BlockControls group=\"parent\">\n\t\t\t<ToolbarGroup className=\"block-editor-grid-item-mover__move-button-container\">\n\t\t\t\t<div className=\"block-editor-grid-item-mover__move-horizontal-button-container is-left\">\n\t\t\t\t\t<GridItemMover\n\t\t\t\t\t\ticon={ isRTL() ? chevronRight : chevronLeft }\n\t\t\t\t\t\tlabel={ __( 'Move left' ) }\n\t\t\t\t\t\tdescription={ __( 'Move left' ) }\n\t\t\t\t\t\tisDisabled={ columnStart <= 1 }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\tcolumnStart: columnStart - 1,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t[ blockClientId ],\n\t\t\t\t\t\t\t\tgridClientId,\n\t\t\t\t\t\t\t\tgridClientId,\n\t\t\t\t\t\t\t\tgetNumberOfBlocksBeforeCell(\n\t\t\t\t\t\t\t\t\tcolumnStart - 1,\n\t\t\t\t\t\t\t\t\trowStart\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"block-editor-grid-item-mover__move-vertical-button-container\">\n\t\t\t\t\t<GridItemMover\n\t\t\t\t\t\tclassName=\"is-up-button\"\n\t\t\t\t\t\ticon={ chevronUp }\n\t\t\t\t\t\tlabel={ __( 'Move up' ) }\n\t\t\t\t\t\tdescription={ __( 'Move up' ) }\n\t\t\t\t\t\tisDisabled={ rowStart <= 1 }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\trowStart: rowStart - 1,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t[ blockClientId ],\n\t\t\t\t\t\t\t\tgridClientId,\n\t\t\t\t\t\t\t\tgridClientId,\n\t\t\t\t\t\t\t\tgetNumberOfBlocksBeforeCell(\n\t\t\t\t\t\t\t\t\tcolumnStart,\n\t\t\t\t\t\t\t\t\trowStart - 1\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<GridItemMover\n\t\t\t\t\t\tclassName=\"is-down-button\"\n\t\t\t\t\t\ticon={ chevronDown }\n\t\t\t\t\t\tlabel={ __( 'Move down' ) }\n\t\t\t\t\t\tdescription={ __( 'Move down' ) }\n\t\t\t\t\t\tisDisabled={ rowCount && rowEnd >= rowCount }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\trowStart: rowStart + 1,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t[ blockClientId ],\n\t\t\t\t\t\t\t\tgridClientId,\n\t\t\t\t\t\t\t\tgridClientId,\n\t\t\t\t\t\t\t\tgetNumberOfBlocksBeforeCell(\n\t\t\t\t\t\t\t\t\tcolumnStart,\n\t\t\t\t\t\t\t\t\trowStart + 1\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"block-editor-grid-item-mover__move-horizontal-button-container is-right\">\n\t\t\t\t\t<GridItemMover\n\t\t\t\t\t\ticon={ isRTL() ? chevronLeft : chevronRight }\n\t\t\t\t\t\tlabel={ __( 'Move right' ) }\n\t\t\t\t\t\tdescription={ __( 'Move right' ) }\n\t\t\t\t\t\tisDisabled={ columnCount && columnEnd >= columnCount }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\tcolumnStart: columnStart + 1,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t[ blockClientId ],\n\t\t\t\t\t\t\t\tgridClientId,\n\t\t\t\t\t\t\t\tgridClientId,\n\t\t\t\t\t\t\t\tgetNumberOfBlocksBeforeCell(\n\t\t\t\t\t\t\t\t\tcolumnStart + 1,\n\t\t\t\t\t\t\t\t\trowStart\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</ToolbarGroup>\n\t\t</BlockControls>\n\t);\n}\n\nfunction GridItemMover( {\n\tclassName,\n\ticon,\n\tlabel,\n\tisDisabled,\n\tonClick,\n\tdescription,\n} ) {\n\tconst instanceId = useInstanceId( GridItemMover );\n\tconst descriptionId = `block-editor-grid-item-mover-button__description-${ instanceId }`;\n\treturn (\n\t\t<>\n\t\t\t<ToolbarButton\n\t\t\t\tclassName={ clsx(\n\t\t\t\t\t'block-editor-grid-item-mover-button',\n\t\t\t\t\tclassName\n\t\t\t\t) }\n\t\t\t\ticon={ icon }\n\t\t\t\tlabel={ label }\n\t\t\t\taria-describedby={ descriptionId }\n\t\t\t\tonClick={ isDisabled ? null : onClick }\n\t\t\t\tdisabled={ isDisabled }\n\t\t\t\taccessibleWhenDisabled\n\t\t\t/>\n\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t{ description }\n\t\t\t</VisuallyHidden>\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { useStyleOverride } from './utils';\nimport { useLayout } from '../components/block-list/layout';\nimport {\n\tGridVisualizer,\n\tGridItemResizer,\n\tGridItemMovers,\n} from '../components/grid';\n\n// Used for generating the instance ID\nconst LAYOUT_CHILD_BLOCK_PROPS_REFERENCE = {};\n\nfunction useBlockPropsChildLayoutStyles( { style } ) {\n\tconst shouldRenderChildLayoutStyles = useSelect( ( select ) => {\n\t\treturn ! select( blockEditorStore ).getSettings().disableLayoutStyles;\n\t} );\n\tconst layout = style?.layout ?? {};\n\tconst {\n\t\tselfStretch,\n\t\tflexSize,\n\t\tcolumnStart,\n\t\trowStart,\n\t\tcolumnSpan,\n\t\trowSpan,\n\t} = layout;\n\tconst parentLayout = useLayout() || {};\n\tconst { columnCount, minimumColumnWidth } = parentLayout;\n\tconst id = useInstanceId( LAYOUT_CHILD_BLOCK_PROPS_REFERENCE );\n\tconst selector = `.wp-container-content-${ id }`;\n\n\t// Check that the grid layout attributes are of the correct type, so that we don't accidentally\n\t// write code that stores a string attribute instead of a number.\n\tif ( process.env.NODE_ENV === 'development' ) {\n\t\tif ( columnStart && typeof columnStart !== 'number' ) {\n\t\t\tthrow new Error( 'columnStart must be a number' );\n\t\t}\n\t\tif ( rowStart && typeof rowStart !== 'number' ) {\n\t\t\tthrow new Error( 'rowStart must be a number' );\n\t\t}\n\t\tif ( columnSpan && typeof columnSpan !== 'number' ) {\n\t\t\tthrow new Error( 'columnSpan must be a number' );\n\t\t}\n\t\tif ( rowSpan && typeof rowSpan !== 'number' ) {\n\t\t\tthrow new Error( 'rowSpan must be a number' );\n\t\t}\n\t}\n\n\tlet css = '';\n\tif ( shouldRenderChildLayoutStyles ) {\n\t\tif ( selfStretch === 'fixed' && flexSize ) {\n\t\t\tcss = `${ selector } {\n\t\t\t\tflex-basis: ${ flexSize };\n\t\t\t\tbox-sizing: border-box;\n\t\t\t}`;\n\t\t} else if ( selfStretch === 'fill' ) {\n\t\t\tcss = `${ selector } {\n\t\t\t\tflex-grow: 1;\n\t\t\t}`;\n\t\t} else if ( columnStart && columnSpan ) {\n\t\t\tcss = `${ selector } {\n\t\t\t\tgrid-column: ${ columnStart } / span ${ columnSpan };\n\t\t\t}`;\n\t\t} else if ( columnStart ) {\n\t\t\tcss = `${ selector } {\n\t\t\t\tgrid-column: ${ columnStart };\n\t\t\t}`;\n\t\t} else if ( columnSpan ) {\n\t\t\tcss = `${ selector } {\n\t\t\t\tgrid-column: span ${ columnSpan };\n\t\t\t}`;\n\t\t}\n\t\tif ( rowStart && rowSpan ) {\n\t\t\tcss += `${ selector } {\n\t\t\t\tgrid-row: ${ rowStart } / span ${ rowSpan };\n\t\t\t}`;\n\t\t} else if ( rowStart ) {\n\t\t\tcss += `${ selector } {\n\t\t\t\tgrid-row: ${ rowStart };\n\t\t\t}`;\n\t\t} else if ( rowSpan ) {\n\t\t\tcss += `${ selector } {\n\t\t\t\tgrid-row: span ${ rowSpan };\n\t\t\t}`;\n\t\t}\n\t\t/**\n\t\t * If minimumColumnWidth is set on the parent, or if no\n\t\t * columnCount is set, the grid is responsive so a\n\t\t * container query is needed for the span to resize.\n\t\t */\n\t\tif (\n\t\t\t( columnSpan || columnStart ) &&\n\t\t\t( minimumColumnWidth || ! columnCount )\n\t\t) {\n\t\t\tlet parentColumnValue = parseFloat( minimumColumnWidth );\n\t\t\t/**\n\t\t\t * 12rem is the default minimumColumnWidth value.\n\t\t\t * If parentColumnValue is not a number, default to 12.\n\t\t\t */\n\t\t\tif ( isNaN( parentColumnValue ) ) {\n\t\t\t\tparentColumnValue = 12;\n\t\t\t}\n\n\t\t\tlet parentColumnUnit = minimumColumnWidth?.replace(\n\t\t\t\tparentColumnValue,\n\t\t\t\t''\n\t\t\t);\n\t\t\t/**\n\t\t\t * Check that parent column unit is either 'px', 'rem' or 'em'.\n\t\t\t * If not, default to 'rem'.\n\t\t\t */\n\t\t\tif ( ! [ 'px', 'rem', 'em' ].includes( parentColumnUnit ) ) {\n\t\t\t\tparentColumnUnit = 'rem';\n\t\t\t}\n\n\t\t\tlet numColsToBreakAt = 2;\n\n\t\t\tif ( columnSpan && columnStart ) {\n\t\t\t\tnumColsToBreakAt = columnSpan + columnStart - 1;\n\t\t\t} else if ( columnSpan ) {\n\t\t\t\tnumColsToBreakAt = columnSpan;\n\t\t\t} else {\n\t\t\t\tnumColsToBreakAt = columnStart;\n\t\t\t}\n\n\t\t\tconst defaultGapValue = parentColumnUnit === 'px' ? 24 : 1.5;\n\t\t\tconst containerQueryValue =\n\t\t\t\tnumColsToBreakAt * parentColumnValue +\n\t\t\t\t( numColsToBreakAt - 1 ) * defaultGapValue;\n\t\t\t// For blocks that only span one column, we want to remove any rowStart values as\n\t\t\t// the container reduces in size, so that blocks are still arranged in markup order.\n\t\t\tconst minimumContainerQueryValue =\n\t\t\t\tparentColumnValue * 2 + defaultGapValue - 1;\n\t\t\t// If a span is set we want to preserve it as long as possible, otherwise we just reset the value.\n\t\t\tconst gridColumnValue =\n\t\t\t\tcolumnSpan && columnSpan > 1 ? '1/-1' : 'auto';\n\n\t\t\tcss += `@container (max-width: ${ Math.max(\n\t\t\t\tcontainerQueryValue,\n\t\t\t\tminimumContainerQueryValue\n\t\t\t) }${ parentColumnUnit }) {\n\t\t\t\t${ selector } {\n\t\t\t\t\tgrid-column: ${ gridColumnValue };\n\t\t\t\t\tgrid-row: auto;\n\t\t\t\t}\n\t\t\t}`;\n\t\t}\n\t}\n\n\tuseStyleOverride( { css } );\n\n\t// Only attach a container class if there is generated CSS to be attached.\n\tif ( ! css ) {\n\t\treturn;\n\t}\n\n\t// Attach a `wp-container-content` id-based classname.\n\treturn { className: `wp-container-content-${ id }` };\n}\n\nfunction ChildLayoutControlsPure( { clientId, style, setAttributes } ) {\n\tconst parentLayout = useLayout() || {};\n\tconst {\n\t\ttype: parentLayoutType = 'default',\n\t\tallowSizingOnChildren = false,\n\t\tisManualPlacement,\n\t} = parentLayout;\n\n\tif ( parentLayoutType !== 'grid' ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<GridTools\n\t\t\tclientId={ clientId }\n\t\t\tstyle={ style }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tallowSizingOnChildren={ allowSizingOnChildren }\n\t\t\tisManualPlacement={ isManualPlacement }\n\t\t\tparentLayout={ parentLayout }\n\t\t/>\n\t);\n}\n\nfunction GridTools( {\n\tclientId,\n\tstyle,\n\tsetAttributes,\n\tallowSizingOnChildren,\n\tisManualPlacement,\n\tparentLayout,\n} ) {\n\tconst { rootClientId, isVisible } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t\tgetTemplateLock,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst _rootClientId = getBlockRootClientId( clientId );\n\n\t\t\tif (\n\t\t\t\tgetTemplateLock( _rootClientId ) ||\n\t\t\t\tgetBlockEditingMode( _rootClientId ) !== 'default'\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\trootClientId: _rootClientId,\n\t\t\t\t\tisVisible: false,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\trootClientId: _rootClientId,\n\t\t\t\tisVisible: true,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\t// Use useState() instead of useRef() so that GridItemResizer updates when ref is set.\n\tconst [ resizerBounds, setResizerBounds ] = useState();\n\n\tif ( ! isVisible ) {\n\t\treturn null;\n\t}\n\n\tfunction updateLayout( layout ) {\n\t\tsetAttributes( {\n\t\t\tstyle: {\n\t\t\t\t...style,\n\t\t\t\tlayout: {\n\t\t\t\t\t...style?.layout,\n\t\t\t\t\t...layout,\n\t\t\t\t},\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<GridVisualizer\n\t\t\t\tclientId={ rootClientId }\n\t\t\t\tcontentRef={ setResizerBounds }\n\t\t\t\tparentLayout={ parentLayout }\n\t\t\t/>\n\t\t\t{ allowSizingOnChildren && (\n\t\t\t\t<GridItemResizer\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t// Don't allow resizing beyond the grid visualizer.\n\t\t\t\t\tbounds={ resizerBounds }\n\t\t\t\t\tonChange={ updateLayout }\n\t\t\t\t\tparentLayout={ parentLayout }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ isManualPlacement &&\n\t\t\t\twindow.__experimentalEnableGridInteractivity && (\n\t\t\t\t\t<GridItemMovers\n\t\t\t\t\t\tlayout={ style?.layout }\n\t\t\t\t\t\tparentLayout={ parentLayout }\n\t\t\t\t\t\tonChange={ updateLayout }\n\t\t\t\t\t\tgridClientId={ rootClientId }\n\t\t\t\t\t\tblockClientId={ clientId }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default {\n\tuseBlockProps: useBlockPropsChildLayoutStyles,\n\tedit: ChildLayoutControlsPure,\n\tattributeKeys: [ 'style' ],\n\thasSupport() {\n\t\treturn true;\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { ToolbarButton } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { BlockControls } from '../components';\nimport { unlock } from '../lock-unlock';\n\n// The implementation of content locking is mainly in this file, although the mechanism\n// to stop temporarily editing as blocks when an outside block is selected is on component StopEditingAsBlocksOnOutsideSelect\n// at block-editor/src/components/block-list/index.js.\n// Besides the components on this file and the file referenced above the implementation\n// also includes artifacts on the store (actions, reducers, and selector).\n\nfunction ContentLockControlsPure( { clientId } ) {\n\tconst { templateLock, isLockedByParent, isEditingAsBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetContentLockingParent,\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetTemporarilyEditingAsBlocks,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\t\t\treturn {\n\t\t\t\ttemplateLock: getTemplateLock( clientId ),\n\t\t\t\tisLockedByParent: !! getContentLockingParent( clientId ),\n\t\t\t\tisEditingAsBlocks: getTemporarilyEditingAsBlocks() === clientId,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst { stopEditingAsBlocks } = unlock( useDispatch( blockEditorStore ) );\n\tconst isContentLocked =\n\t\t! isLockedByParent && templateLock === 'contentOnly';\n\n\tconst stopEditingAsBlockCallback = useCallback( () => {\n\t\tstopEditingAsBlocks( clientId );\n\t}, [ clientId, stopEditingAsBlocks ] );\n\n\tif ( ! isContentLocked && ! isEditingAsBlocks ) {\n\t\treturn null;\n\t}\n\n\tconst showStopEditingAsBlocks = isEditingAsBlocks && ! isContentLocked;\n\n\treturn (\n\t\tshowStopEditingAsBlocks && (\n\t\t\t<BlockControls group=\"other\">\n\t\t\t\t<ToolbarButton onClick={ stopEditingAsBlockCallback }>\n\t\t\t\t\t{ __( 'Done' ) }\n\t\t\t\t</ToolbarButton>\n\t\t\t</BlockControls>\n\t\t)\n\t);\n}\n\nexport default {\n\tedit: ContentLockControlsPure,\n\thasSupport() {\n\t\treturn true;\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nconst META_ATTRIBUTE_NAME = 'metadata';\n\n/**\n * Filters registered block settings, extending attributes to include `metadata`.\n *\n * see: https://github.com/WordPress/gutenberg/pull/40393/files#r864632012\n *\n * @param {Object} blockTypeSettings Original block settings.\n * @return {Object} Filtered block settings.\n */\nexport function addMetaAttribute( blockTypeSettings ) {\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( blockTypeSettings?.attributes?.[ META_ATTRIBUTE_NAME ]?.type ) {\n\t\treturn blockTypeSettings;\n\t}\n\n\tblockTypeSettings.attributes = {\n\t\t...blockTypeSettings.attributes,\n\t\t[ META_ATTRIBUTE_NAME ]: {\n\t\t\ttype: 'object',\n\t\t},\n\t};\n\n\treturn blockTypeSettings;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/metadata/addMetaAttribute',\n\taddMetaAttribute\n);\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useMemo } from '@wordpress/element';\nimport { PanelBody, ToggleControl } from '@wordpress/components';\nimport { createBlock, store as blocksStore } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { InspectorControls } from '../components';\nimport { store as blockEditorStore } from '../store';\n\nconst EMPTY_OBJECT = {};\n\nfunction BlockHooksControlPure( {\n\tname,\n\tclientId,\n\tmetadata: { ignoredHookedBlocks = [] } = {},\n} ) {\n\tconst blockTypes = useSelect(\n\t\t( select ) => select( blocksStore ).getBlockTypes(),\n\t\t[]\n\t);\n\n\t// A hooked block added via a filter will not be exposed through a block\n\t// type's `blockHooks` property; however, if the containing layout has been\n\t// modified, it will be present in the anchor block's `ignoredHookedBlocks`\n\t// metadata.\n\tconst hookedBlocksForCurrentBlock = useMemo(\n\t\t() =>\n\t\t\tblockTypes?.filter(\n\t\t\t\t( { name: blockName, blockHooks } ) =>\n\t\t\t\t\t( blockHooks && name in blockHooks ) ||\n\t\t\t\t\tignoredHookedBlocks.includes( blockName )\n\t\t\t),\n\t\t[ blockTypes, name, ignoredHookedBlocks ]\n\t);\n\n\tconst hookedBlockClientIds = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlocks, getBlockRootClientId, getGlobalBlockCount } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\t\t\tconst _hookedBlockClientIds = hookedBlocksForCurrentBlock.reduce(\n\t\t\t\t( clientIds, block ) => {\n\t\t\t\t\t// If the block doesn't exist anywhere in the block tree,\n\t\t\t\t\t// we know that we have to set the toggle to disabled.\n\t\t\t\t\tif ( getGlobalBlockCount( block.name ) === 0 ) {\n\t\t\t\t\t\treturn clientIds;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst relativePosition = block?.blockHooks?.[ name ];\n\t\t\t\t\tlet candidates;\n\n\t\t\t\t\tswitch ( relativePosition ) {\n\t\t\t\t\t\tcase 'before':\n\t\t\t\t\t\tcase 'after':\n\t\t\t\t\t\t\t// Any of the current block's siblings (with the right block type) qualifies\n\t\t\t\t\t\t\t// as a hooked block (inserted `before` or `after` the current one), as the block\n\t\t\t\t\t\t\t// might've been automatically inserted and then moved around a bit by the user.\n\t\t\t\t\t\t\tcandidates = getBlocks( rootClientId );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'first_child':\n\t\t\t\t\t\tcase 'last_child':\n\t\t\t\t\t\t\t// Any of the current block's child blocks (with the right block type) qualifies\n\t\t\t\t\t\t\t// as a hooked first or last child block, as the block might've been automatically\n\t\t\t\t\t\t\t// inserted and then moved around a bit by the user.\n\t\t\t\t\t\t\tcandidates = getBlocks( clientId );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase undefined:\n\t\t\t\t\t\t\t// If we haven't found a blockHooks field with a relative position for the hooked\n\t\t\t\t\t\t\t// block, it means that it was added by a filter. In this case, we look for the block\n\t\t\t\t\t\t\t// both among the current block's siblings and its children.\n\t\t\t\t\t\t\tcandidates = [\n\t\t\t\t\t\t\t\t...getBlocks( rootClientId ),\n\t\t\t\t\t\t\t\t...getBlocks( clientId ),\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst hookedBlock = candidates?.find(\n\t\t\t\t\t\t( candidate ) => candidate.name === block.name\n\t\t\t\t\t);\n\n\t\t\t\t\t// If the block exists in the designated location, we consider it hooked\n\t\t\t\t\t// and show the toggle as enabled.\n\t\t\t\t\tif ( hookedBlock ) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...clientIds,\n\t\t\t\t\t\t\t[ block.name ]: hookedBlock.clientId,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\t// If no hooked block was found in any of its designated locations,\n\t\t\t\t\t// we set the toggle to disabled.\n\t\t\t\t\treturn clientIds;\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t);\n\n\t\t\tif ( Object.values( _hookedBlockClientIds ).length > 0 ) {\n\t\t\t\treturn _hookedBlockClientIds;\n\t\t\t}\n\n\t\t\treturn EMPTY_OBJECT;\n\t\t},\n\t\t[ hookedBlocksForCurrentBlock, name, clientId ]\n\t);\n\n\tconst { getBlockIndex, getBlockCount, getBlockRootClientId } =\n\t\tuseSelect( blockEditorStore );\n\tconst { insertBlock, removeBlock } = useDispatch( blockEditorStore );\n\n\tif ( ! hookedBlocksForCurrentBlock.length ) {\n\t\treturn null;\n\t}\n\n\t// Group by block namespace (i.e. prefix before the slash).\n\tconst groupedHookedBlocks = hookedBlocksForCurrentBlock.reduce(\n\t\t( groups, block ) => {\n\t\t\tconst [ namespace ] = block.name.split( '/' );\n\t\t\tif ( ! groups[ namespace ] ) {\n\t\t\t\tgroups[ namespace ] = [];\n\t\t\t}\n\t\t\tgroups[ namespace ].push( block );\n\t\t\treturn groups;\n\t\t},\n\t\t{}\n\t);\n\n\tconst insertBlockIntoDesignatedLocation = ( block, relativePosition ) => {\n\t\tconst blockIndex = getBlockIndex( clientId );\n\t\tconst innerBlocksLength = getBlockCount( clientId );\n\t\tconst rootClientId = getBlockRootClientId( clientId );\n\n\t\tswitch ( relativePosition ) {\n\t\t\tcase 'before':\n\t\t\tcase 'after':\n\t\t\t\tinsertBlock(\n\t\t\t\t\tblock,\n\t\t\t\t\trelativePosition === 'after' ? blockIndex + 1 : blockIndex,\n\t\t\t\t\trootClientId, // Insert as a child of the current block's parent\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase 'first_child':\n\t\t\tcase 'last_child':\n\t\t\t\tinsertBlock(\n\t\t\t\t\tblock,\n\t\t\t\t\t// TODO: It'd be great if insertBlock() would accept negative indices for insertion.\n\t\t\t\t\trelativePosition === 'first_child' ? 0 : innerBlocksLength,\n\t\t\t\t\tclientId, // Insert as a child of the current block.\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase undefined:\n\t\t\t\t// If we do not know the relative position, it is because the block was\n\t\t\t\t// added via a filter. In this case, we default to inserting it after the\n\t\t\t\t// current block.\n\t\t\t\tinsertBlock(\n\t\t\t\t\tblock,\n\t\t\t\t\tblockIndex + 1,\n\t\t\t\t\trootClientId, // Insert as a child of the current block's parent\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\treturn (\n\t\t<InspectorControls>\n\t\t\t<PanelBody\n\t\t\t\tclassName=\"block-editor-hooks__block-hooks\"\n\t\t\t\ttitle={ __( 'Plugins' ) }\n\t\t\t\tinitialOpen\n\t\t\t>\n\t\t\t\t<p className=\"block-editor-hooks__block-hooks-helptext\">\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Manage the inclusion of blocks added automatically by plugins.'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t\t{ Object.keys( groupedHookedBlocks ).map( ( vendor ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment key={ vendor }>\n\t\t\t\t\t\t\t<h3>{ vendor }</h3>\n\t\t\t\t\t\t\t{ groupedHookedBlocks[ vendor ].map( ( block ) => {\n\t\t\t\t\t\t\t\tconst checked =\n\t\t\t\t\t\t\t\t\tblock.name in hookedBlockClientIds;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\t\tchecked={ checked }\n\t\t\t\t\t\t\t\t\t\tkey={ block.title }\n\t\t\t\t\t\t\t\t\t\tlabel={ block.title }\n\t\t\t\t\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\t\t\t\t\tif ( ! checked ) {\n\t\t\t\t\t\t\t\t\t\t\t\t// Create and insert block.\n\t\t\t\t\t\t\t\t\t\t\t\tconst relativePosition =\n\t\t\t\t\t\t\t\t\t\t\t\t\tblock.blockHooks[ name ];\n\t\t\t\t\t\t\t\t\t\t\t\tinsertBlockIntoDesignatedLocation(\n\t\t\t\t\t\t\t\t\t\t\t\t\tcreateBlock( block.name ),\n\t\t\t\t\t\t\t\t\t\t\t\t\trelativePosition\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Remove block.\n\t\t\t\t\t\t\t\t\t\t\tremoveBlock(\n\t\t\t\t\t\t\t\t\t\t\t\thookedBlockClientIds[\n\t\t\t\t\t\t\t\t\t\t\t\t\tblock.name\n\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</PanelBody>\n\t\t</InspectorControls>\n\t);\n}\n\nexport default {\n\tedit: BlockHooksControlPure,\n\tattributeKeys: [ 'metadata' ],\n\thasSupport() {\n\t\treturn true;\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tgetBlockBindingsSource,\n\tgetBlockBindingsSources,\n\tgetBlockType,\n} from '@wordpress/blocks';\nimport {\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalItem as Item,\n\t__experimentalText as Text,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalVStack as VStack,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { useContext, Fragment } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport {\n\tcanBindAttribute,\n\tgetBindableAttributes,\n\tuseBlockBindingsUtils,\n} from '../utils/block-bindings';\nimport { unlock } from '../lock-unlock';\nimport InspectorControls from '../components/inspector-controls';\nimport BlockContext from '../components/block-context';\nimport { useBlockEditContext } from '../components/block-edit';\nimport { store as blockEditorStore } from '../store';\n\nconst { Menu } = unlock( componentsPrivateApis );\n\nconst EMPTY_OBJECT = {};\n\nconst useToolsPanelDropdownMenuProps = () => {\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\treturn ! isMobile\n\t\t? {\n\t\t\t\tpopoverProps: {\n\t\t\t\t\tplacement: 'left-start',\n\t\t\t\t\t// For non-mobile, inner sidebar width (248px) - button width (24px) - border (1px) + padding (16px) + spacing (20px)\n\t\t\t\t\toffset: 259,\n\t\t\t\t},\n\t\t  }\n\t\t: {};\n};\n\nfunction BlockBindingsPanelMenuContent( { fieldsList, attribute, binding } ) {\n\tconst { clientId } = useBlockEditContext();\n\tconst registeredSources = getBlockBindingsSources();\n\tconst { updateBlockBindings } = useBlockBindingsUtils();\n\tconst currentKey = binding?.args?.key;\n\tconst attributeType = useSelect(\n\t\t( select ) => {\n\t\t\tconst { name: blockName } =\n\t\t\t\tselect( blockEditorStore ).getBlock( clientId );\n\t\t\tconst _attributeType =\n\t\t\t\tgetBlockType( blockName ).attributes?.[ attribute ]?.type;\n\t\t\treturn _attributeType === 'rich-text' ? 'string' : _attributeType;\n\t\t},\n\t\t[ clientId, attribute ]\n\t);\n\treturn (\n\t\t<>\n\t\t\t{ Object.entries( fieldsList ).map( ( [ name, fields ], i ) => (\n\t\t\t\t<Fragment key={ name }>\n\t\t\t\t\t<Menu.Group>\n\t\t\t\t\t\t{ Object.keys( fieldsList ).length > 1 && (\n\t\t\t\t\t\t\t<Menu.GroupLabel>\n\t\t\t\t\t\t\t\t{ registeredSources[ name ].label }\n\t\t\t\t\t\t\t</Menu.GroupLabel>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ Object.entries( fields )\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t( [ , args ] ) => args?.type === attributeType\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map( ( [ key, args ] ) => (\n\t\t\t\t\t\t\t\t<Menu.RadioItem\n\t\t\t\t\t\t\t\t\tkey={ key }\n\t\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\t\tupdateBlockBindings( {\n\t\t\t\t\t\t\t\t\t\t\t[ attribute ]: {\n\t\t\t\t\t\t\t\t\t\t\t\tsource: name,\n\t\t\t\t\t\t\t\t\t\t\t\targs: { key },\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tname={ attribute + '-binding' }\n\t\t\t\t\t\t\t\t\tvalue={ key }\n\t\t\t\t\t\t\t\t\tchecked={ key === currentKey }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Menu.ItemLabel>\n\t\t\t\t\t\t\t\t\t\t{ args?.label }\n\t\t\t\t\t\t\t\t\t</Menu.ItemLabel>\n\t\t\t\t\t\t\t\t\t<Menu.ItemHelpText>\n\t\t\t\t\t\t\t\t\t\t{ args?.value }\n\t\t\t\t\t\t\t\t\t</Menu.ItemHelpText>\n\t\t\t\t\t\t\t\t</Menu.RadioItem>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t</Menu.Group>\n\t\t\t\t\t{ i !== Object.keys( fieldsList ).length - 1 && (\n\t\t\t\t\t\t<Menu.Separator />\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t) ) }\n\t\t</>\n\t);\n}\n\nfunction BlockBindingsAttribute( { attribute, binding, fieldsList } ) {\n\tconst { source: sourceName, args } = binding || {};\n\tconst sourceProps = getBlockBindingsSource( sourceName );\n\tconst isSourceInvalid = ! sourceProps;\n\treturn (\n\t\t<VStack className=\"block-editor-bindings__item\" spacing={ 0 }>\n\t\t\t<Text truncate>{ attribute }</Text>\n\t\t\t{ !! binding && (\n\t\t\t\t<Text\n\t\t\t\t\ttruncate\n\t\t\t\t\tvariant={ ! isSourceInvalid && 'muted' }\n\t\t\t\t\tisDestructive={ isSourceInvalid }\n\t\t\t\t>\n\t\t\t\t\t{ isSourceInvalid\n\t\t\t\t\t\t? __( 'Invalid source' )\n\t\t\t\t\t\t: fieldsList?.[ sourceName ]?.[ args?.key ]?.label ||\n\t\t\t\t\t\t  sourceProps?.label ||\n\t\t\t\t\t\t  sourceName }\n\t\t\t\t</Text>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n\nfunction ReadOnlyBlockBindingsPanelItems( { bindings, fieldsList } ) {\n\treturn (\n\t\t<>\n\t\t\t{ Object.entries( bindings ).map( ( [ attribute, binding ] ) => (\n\t\t\t\t<Item key={ attribute }>\n\t\t\t\t\t<BlockBindingsAttribute\n\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t/>\n\t\t\t\t</Item>\n\t\t\t) ) }\n\t\t</>\n\t);\n}\n\nfunction EditableBlockBindingsPanelItems( {\n\tattributes,\n\tbindings,\n\tfieldsList,\n} ) {\n\tconst { updateBlockBindings } = useBlockBindingsUtils();\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\treturn (\n\t\t<>\n\t\t\t{ attributes.map( ( attribute ) => {\n\t\t\t\tconst binding = bindings[ attribute ];\n\t\t\t\treturn (\n\t\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t\tkey={ attribute }\n\t\t\t\t\t\thasValue={ () => !! binding }\n\t\t\t\t\t\tlabel={ attribute }\n\t\t\t\t\t\tonDeselect={ () => {\n\t\t\t\t\t\t\tupdateBlockBindings( {\n\t\t\t\t\t\t\t\t[ attribute ]: undefined,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tplacement={\n\t\t\t\t\t\t\t\tisMobile ? 'bottom-start' : 'left-start'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Menu.TriggerButton render={ <Item /> }>\n\t\t\t\t\t\t\t\t<BlockBindingsAttribute\n\t\t\t\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Menu.TriggerButton>\n\t\t\t\t\t\t\t<Menu.Popover gutter={ isMobile ? 8 : 36 }>\n\t\t\t\t\t\t\t\t<BlockBindingsPanelMenuContent\n\t\t\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Menu.Popover>\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</ToolsPanelItem>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n\nexport const BlockBindingsPanel = ( { name: blockName, metadata } ) => {\n\tconst blockContext = useContext( BlockContext );\n\tconst { removeAllBlockBindings } = useBlockBindingsUtils();\n\tconst bindableAttributes = getBindableAttributes( blockName );\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\n\t// `useSelect` is used purposely here to ensure `getFieldsList`\n\t// is updated whenever there are updates in block context.\n\t// `source.getFieldsList` may also call a selector via `select`.\n\tconst _fieldsList = {};\n\tconst { fieldsList, canUpdateBlockBindings } = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! bindableAttributes || bindableAttributes.length === 0 ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\t\t\tconst registeredSources = getBlockBindingsSources();\n\t\t\tObject.entries( registeredSources ).forEach(\n\t\t\t\t( [ sourceName, { getFieldsList, usesContext } ] ) => {\n\t\t\t\t\tif ( getFieldsList ) {\n\t\t\t\t\t\t// Populate context.\n\t\t\t\t\t\tconst context = {};\n\t\t\t\t\t\tif ( usesContext?.length ) {\n\t\t\t\t\t\t\tfor ( const key of usesContext ) {\n\t\t\t\t\t\t\t\tcontext[ key ] = blockContext[ key ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst sourceList = getFieldsList( {\n\t\t\t\t\t\t\tselect,\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\t// Only add source if the list is not empty.\n\t\t\t\t\t\tif ( Object.keys( sourceList || {} ).length ) {\n\t\t\t\t\t\t\t_fieldsList[ sourceName ] = { ...sourceList };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tfieldsList:\n\t\t\t\t\tObject.values( _fieldsList ).length > 0\n\t\t\t\t\t\t? _fieldsList\n\t\t\t\t\t\t: EMPTY_OBJECT,\n\t\t\t\tcanUpdateBlockBindings:\n\t\t\t\t\tselect( blockEditorStore ).getSettings()\n\t\t\t\t\t\t.canUpdateBlockBindings,\n\t\t\t};\n\t\t},\n\t\t[ blockContext, bindableAttributes ]\n\t);\n\t// Return early if there are no bindable attributes.\n\tif ( ! bindableAttributes || bindableAttributes.length === 0 ) {\n\t\treturn null;\n\t}\n\t// Filter bindings to only show bindable attributes and remove pattern overrides.\n\tconst { bindings } = metadata || {};\n\tconst filteredBindings = { ...bindings };\n\tObject.keys( filteredBindings ).forEach( ( key ) => {\n\t\tif (\n\t\t\t! canBindAttribute( blockName, key ) ||\n\t\t\tfilteredBindings[ key ].source === 'core/pattern-overrides'\n\t\t) {\n\t\t\tdelete filteredBindings[ key ];\n\t\t}\n\t} );\n\n\t// Lock the UI when the user can't update bindings or there are no fields to connect to.\n\tconst readOnly =\n\t\t! canUpdateBlockBindings || ! Object.keys( fieldsList ).length;\n\n\tif ( readOnly && Object.keys( filteredBindings ).length === 0 ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<InspectorControls group=\"bindings\">\n\t\t\t<ToolsPanel\n\t\t\t\tlabel={ __( 'Attributes' ) }\n\t\t\t\tresetAll={ () => {\n\t\t\t\t\tremoveAllBlockBindings();\n\t\t\t\t} }\n\t\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t\t\tclassName=\"block-editor-bindings__panel\"\n\t\t\t>\n\t\t\t\t<ItemGroup isBordered isSeparated>\n\t\t\t\t\t{ readOnly ? (\n\t\t\t\t\t\t<ReadOnlyBlockBindingsPanelItems\n\t\t\t\t\t\t\tbindings={ filteredBindings }\n\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<EditableBlockBindingsPanelItems\n\t\t\t\t\t\t\tattributes={ bindableAttributes }\n\t\t\t\t\t\t\tbindings={ filteredBindings }\n\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ItemGroup>\n\t\t\t\t{ /*\n\t\t\t\t\tUse a div element to make the ToolsPanelHiddenInnerWrapper\n\t\t\t\t\ttoggle the visibility of this help text automatically.\n\t\t\t\t*/ }\n\t\t\t\t<Text as=\"div\" variant=\"muted\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Attributes connected to custom fields or other dynamic data.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t</Text>\n\t\t\t</ToolsPanel>\n\t\t</InspectorControls>\n\t);\n};\n\nexport default {\n\tedit: BlockBindingsPanel,\n\tattributeKeys: [ 'metadata' ],\n\thasSupport() {\n\t\treturn true;\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useEffect, useMemo } from '@wordpress/element';\nimport { usePrevious } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { GridRect } from './utils';\nimport { setImmutably } from '../../utils/object';\n\nexport function useGridLayoutSync( { clientId: gridClientId } ) {\n\tconst { gridLayout, blockOrder, selectedBlockLayout } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockAttributes, getBlockOrder } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst selectedBlock = select( blockEditorStore ).getSelectedBlock();\n\t\t\treturn {\n\t\t\t\tgridLayout: getBlockAttributes( gridClientId ).layout ?? {},\n\t\t\t\tblockOrder: getBlockOrder( gridClientId ),\n\t\t\t\tselectedBlockLayout: selectedBlock?.attributes.style?.layout,\n\t\t\t};\n\t\t},\n\t\t[ gridClientId ]\n\t);\n\n\tconst { getBlockAttributes, getBlockRootClientId } =\n\t\tuseSelect( blockEditorStore );\n\tconst { updateBlockAttributes, __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\n\tconst selectedBlockRect = useMemo(\n\t\t() =>\n\t\t\tselectedBlockLayout ? new GridRect( selectedBlockLayout ) : null,\n\t\t[ selectedBlockLayout ]\n\t);\n\n\tconst previouslySelectedBlockRect = usePrevious( selectedBlockRect );\n\tconst previousIsManualPlacement = usePrevious(\n\t\tgridLayout.isManualPlacement\n\t);\n\tconst previousBlockOrder = usePrevious( blockOrder );\n\n\tuseEffect( () => {\n\t\tconst updates = {};\n\n\t\tif ( gridLayout.isManualPlacement ) {\n\t\t\tconst occupiedRects = [];\n\n\t\t\t// Respect the position of blocks that already have a columnStart and rowStart value.\n\t\t\tfor ( const clientId of blockOrder ) {\n\t\t\t\tconst {\n\t\t\t\t\tcolumnStart,\n\t\t\t\t\trowStart,\n\t\t\t\t\tcolumnSpan = 1,\n\t\t\t\t\trowSpan = 1,\n\t\t\t\t} = getBlockAttributes( clientId ).style?.layout ?? {};\n\t\t\t\tif ( ! columnStart || ! rowStart ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\toccupiedRects.push(\n\t\t\t\t\tnew GridRect( {\n\t\t\t\t\t\tcolumnStart,\n\t\t\t\t\t\trowStart,\n\t\t\t\t\t\tcolumnSpan,\n\t\t\t\t\t\trowSpan,\n\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// When in manual mode, ensure that every block has a columnStart and rowStart value.\n\t\t\tfor ( const clientId of blockOrder ) {\n\t\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\t\tconst {\n\t\t\t\t\tcolumnStart,\n\t\t\t\t\trowStart,\n\t\t\t\t\tcolumnSpan = 1,\n\t\t\t\t\trowSpan = 1,\n\t\t\t\t} = attributes.style?.layout ?? {};\n\t\t\t\tif ( columnStart && rowStart ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst [ newColumnStart, newRowStart ] = placeBlock(\n\t\t\t\t\toccupiedRects,\n\t\t\t\t\tgridLayout.columnCount,\n\t\t\t\t\tcolumnSpan,\n\t\t\t\t\trowSpan,\n\t\t\t\t\tpreviouslySelectedBlockRect?.columnEnd,\n\t\t\t\t\tpreviouslySelectedBlockRect?.rowEnd\n\t\t\t\t);\n\t\t\t\toccupiedRects.push(\n\t\t\t\t\tnew GridRect( {\n\t\t\t\t\t\tcolumnStart: newColumnStart,\n\t\t\t\t\t\trowStart: newRowStart,\n\t\t\t\t\t\tcolumnSpan,\n\t\t\t\t\t\trowSpan,\n\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t\tupdates[ clientId ] = {\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t...attributes.style,\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t...attributes.style?.layout,\n\t\t\t\t\t\t\tcolumnStart: newColumnStart,\n\t\t\t\t\t\t\trowStart: newRowStart,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Ensure there's enough rows to fit all blocks.\n\t\t\tconst bottomMostRow = Math.max(\n\t\t\t\t...occupiedRects.map( ( r ) => r.rowEnd )\n\t\t\t);\n\t\t\tif (\n\t\t\t\t! gridLayout.rowCount ||\n\t\t\t\tgridLayout.rowCount < bottomMostRow\n\t\t\t) {\n\t\t\t\tupdates[ gridClientId ] = {\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\t...gridLayout,\n\t\t\t\t\t\trowCount: bottomMostRow,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Unset grid layout attributes for blocks removed from the grid.\n\t\t\tfor ( const clientId of previousBlockOrder ?? [] ) {\n\t\t\t\tif ( ! blockOrder.includes( clientId ) ) {\n\t\t\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\n\t\t\t\t\t// Block was removed from the editor, so nothing to do.\n\t\t\t\t\tif ( rootClientId === null ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if the block is being moved to another grid.\n\t\t\t\t\t// If so, do nothing and let the new grid parent handle\n\t\t\t\t\t// the attributes.\n\t\t\t\t\tconst rootAttributes = getBlockAttributes( rootClientId );\n\t\t\t\t\tif ( rootAttributes?.layout?.type === 'grid' ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\t\t\tconst {\n\t\t\t\t\t\tcolumnStart,\n\t\t\t\t\t\trowStart,\n\t\t\t\t\t\tcolumnSpan,\n\t\t\t\t\t\trowSpan,\n\t\t\t\t\t\t...layout\n\t\t\t\t\t} = attributes.style?.layout ?? {};\n\n\t\t\t\t\tif ( columnStart || rowStart || columnSpan || rowSpan ) {\n\t\t\t\t\t\tconst hasEmptyLayoutAttribute =\n\t\t\t\t\t\t\tObject.keys( layout ).length === 0;\n\n\t\t\t\t\t\tupdates[ clientId ] = setImmutably(\n\t\t\t\t\t\t\tattributes,\n\t\t\t\t\t\t\t[ 'style', 'layout' ],\n\t\t\t\t\t\t\thasEmptyLayoutAttribute ? undefined : layout\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// Remove all of the columnStart and rowStart values\n\t\t\t// when switching from manual to auto mode,\n\t\t\tif ( previousIsManualPlacement === true ) {\n\t\t\t\tfor ( const clientId of blockOrder ) {\n\t\t\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\t\t\tconst { columnStart, rowStart, ...layout } =\n\t\t\t\t\t\tattributes.style?.layout ?? {};\n\t\t\t\t\t// Only update attributes if columnStart or rowStart are set.\n\t\t\t\t\tif ( columnStart || rowStart ) {\n\t\t\t\t\t\tconst hasEmptyLayoutAttribute =\n\t\t\t\t\t\t\tObject.keys( layout ).length === 0;\n\n\t\t\t\t\t\tupdates[ clientId ] = setImmutably(\n\t\t\t\t\t\t\tattributes,\n\t\t\t\t\t\t\t[ 'style', 'layout' ],\n\t\t\t\t\t\t\thasEmptyLayoutAttribute ? undefined : layout\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove row styles in auto mode\n\t\t\tif ( gridLayout.rowCount ) {\n\t\t\t\tupdates[ gridClientId ] = {\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\t...gridLayout,\n\t\t\t\t\t\trowCount: undefined,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( Object.keys( updates ).length ) {\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\tupdateBlockAttributes(\n\t\t\t\tObject.keys( updates ),\n\t\t\t\tupdates,\n\t\t\t\t/* uniqueByBlock: */ true\n\t\t\t);\n\t\t}\n\t}, [\n\t\t// Actual deps to sync:\n\t\tgridClientId,\n\t\tgridLayout,\n\t\tpreviousBlockOrder,\n\t\tblockOrder,\n\t\tpreviouslySelectedBlockRect,\n\t\tpreviousIsManualPlacement,\n\t\t// These won't change, but the linter thinks they might:\n\t\t__unstableMarkNextChangeAsNotPersistent,\n\t\tgetBlockAttributes,\n\t\tgetBlockRootClientId,\n\t\tupdateBlockAttributes,\n\t] );\n}\n\n/**\n * @param {GridRect[]} occupiedRects\n * @param {number}     gridColumnCount\n * @param {number}     blockColumnSpan\n * @param {number}     blockRowSpan\n * @param {number?}    startColumn\n * @param {number?}    startRow\n */\nfunction placeBlock(\n\toccupiedRects,\n\tgridColumnCount,\n\tblockColumnSpan,\n\tblockRowSpan,\n\tstartColumn = 1,\n\tstartRow = 1\n) {\n\tfor ( let row = startRow; ; row++ ) {\n\t\tfor (\n\t\t\tlet column = row === startRow ? startColumn : 1;\n\t\t\tcolumn <= gridColumnCount;\n\t\t\tcolumn++\n\t\t) {\n\t\t\tconst candidateRect = new GridRect( {\n\t\t\t\tcolumnStart: column,\n\t\t\t\trowStart: row,\n\t\t\t\tcolumnSpan: blockColumnSpan,\n\t\t\t\trowSpan: blockRowSpan,\n\t\t\t} );\n\t\t\tif (\n\t\t\t\t! occupiedRects.some( ( r ) =>\n\t\t\t\t\tr.intersectsRect( candidateRect )\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn [ column, row ];\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { GridVisualizer, useGridLayoutSync } from '../components/grid';\nimport { store as blockEditorStore } from '../store';\n\nfunction GridLayoutSync( props ) {\n\tuseGridLayoutSync( props );\n}\n\nfunction GridTools( { clientId, layout } ) {\n\tconst isVisible = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tisBlockSelected,\n\t\t\t\tisDraggingBlocks,\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\t// These calls are purposely ordered from least expensive to most expensive.\n\t\t\t// Hides the visualizer in cases where the user is not or cannot interact with it.\n\t\t\tif (\n\t\t\t\t( ! isDraggingBlocks() && ! isBlockSelected( clientId ) ) ||\n\t\t\t\tgetTemplateLock( clientId ) ||\n\t\t\t\tgetBlockEditingMode( clientId ) !== 'default'\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<GridLayoutSync clientId={ clientId } />\n\t\t\t{ isVisible && (\n\t\t\t\t<GridVisualizer clientId={ clientId } parentLayout={ layout } />\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nconst addGridVisualizerToBlockEdit = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\tif ( props.attributes.layout?.type !== 'grid' ) {\n\t\t\treturn <BlockEdit key=\"edit\" { ...props } />;\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<GridTools\n\t\t\t\t\tclientId={ props.clientId }\n\t\t\t\t\tlayout={ props.attributes.layout }\n\t\t\t\t/>\n\t\t\t\t<BlockEdit key=\"edit\" { ...props } />\n\t\t\t</>\n\t\t);\n\t},\n\t'addGridVisualizerToBlockEdit'\n);\n\naddFilter(\n\t'editor.BlockEdit',\n\t'core/editor/grid-visualizer',\n\taddGridVisualizerToBlockEdit\n);\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport } from '@wordpress/blocks';\n\n/**\n * Filters registered block settings, adding an `__experimentalLabel` callback if one does not already exist.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addLabelCallback( settings ) {\n\t// If blocks provide their own label callback, do not override it.\n\tif ( settings.__experimentalLabel ) {\n\t\treturn settings;\n\t}\n\n\tconst supportsBlockNaming = hasBlockSupport(\n\t\tsettings,\n\t\t'renaming',\n\t\ttrue // default value\n\t);\n\n\t// Check whether block metadata is supported before using it.\n\tif ( supportsBlockNaming ) {\n\t\tsettings.__experimentalLabel = ( attributes, { context } ) => {\n\t\t\tconst { metadata } = attributes;\n\n\t\t\t// In the list view, use the block's name attribute as the label.\n\t\t\tif ( context === 'list-view' && metadata?.name ) {\n\t\t\t\treturn metadata.name;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn settings;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/metadata/addLabelCallback',\n\taddLabelCallback\n);\n","/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\nimport { getBorderClasses, getMultiOriginColor } from './border';\nimport useMultipleOriginColorsAndGradients from '../components/colors-gradients/use-multiple-origin-colors-and-gradients';\n\n// This utility is intended to assist where the serialization of the border\n// block support is being skipped for a block but the border related CSS classes\n// & styles still need to be generated so they can be applied to inner elements.\n\n/**\n * Provides the CSS class names and inline styles for a block's border support\n * attributes.\n *\n * @param {Object} attributes Block attributes.\n * @return {Object} Border block support derived CSS classes & styles.\n */\nexport function getBorderClassesAndStyles( attributes ) {\n\tconst border = attributes.style?.border || {};\n\tconst className = getBorderClasses( attributes );\n\n\treturn {\n\t\tclassName: className || undefined,\n\t\tstyle: getInlineStyles( { border } ),\n\t};\n}\n\n/**\n * Derives the border related props for a block from its border block support\n * attributes.\n *\n * Inline styles are forced for named colors to ensure these selections are\n * reflected when themes do not load their color stylesheets in the editor.\n *\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} ClassName & style props from border block support.\n */\nexport function useBorderProps( attributes ) {\n\tconst { colors } = useMultipleOriginColorsAndGradients();\n\tconst borderProps = getBorderClassesAndStyles( attributes );\n\tconst { borderColor } = attributes;\n\n\t// Force inline styles to apply named border colors when themes do not load\n\t// their color stylesheets in the editor.\n\tif ( borderColor ) {\n\t\tconst borderColorObject = getMultiOriginColor( {\n\t\t\tcolors,\n\t\t\tnamedColor: borderColor,\n\t\t} );\n\n\t\tborderProps.style.borderColor = borderColorObject.color;\n\t}\n\n\treturn borderProps;\n}\n","/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\n\n// This utility is intended to assist where the serialization of the shadow\n// block support is being skipped for a block but the shadow related CSS classes\n// & styles still need to be generated so they can be applied to inner elements.\n\n/**\n * Provides the CSS class names and inline styles for a block's shadow support\n * attributes.\n *\n * @param {Object} attributes Block attributes.\n * @return {Object} Shadow block support derived CSS classes & styles.\n */\nexport function getShadowClassesAndStyles( attributes ) {\n\tconst shadow = attributes.style?.shadow || '';\n\n\treturn {\n\t\tstyle: getInlineStyles( { shadow } ),\n\t};\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\nimport {\n\tgetColorClassName,\n\tgetColorObjectByAttributeValues,\n} from '../components/colors';\nimport {\n\t__experimentalGetGradientClass,\n\tgetGradientValueBySlug,\n} from '../components/gradients';\nimport { useSettings } from '../components/use-settings';\n\n// The code in this file has largely been lifted from the color block support\n// hook.\n//\n// This utility is intended to assist where the serialization of the colors\n// block support is being skipped for a block but the color related CSS classes\n// & styles still need to be generated so they can be applied to inner elements.\n\n/**\n * Provides the CSS class names and inline styles for a block's color support\n * attributes.\n *\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} Color block support derived CSS classes & styles.\n */\nexport function getColorClassesAndStyles( attributes ) {\n\tconst { backgroundColor, textColor, gradient, style } = attributes;\n\n\t// Collect color CSS classes.\n\tconst backgroundClass = getColorClassName(\n\t\t'background-color',\n\t\tbackgroundColor\n\t);\n\tconst textClass = getColorClassName( 'color', textColor );\n\n\tconst gradientClass = __experimentalGetGradientClass( gradient );\n\tconst hasGradient = gradientClass || style?.color?.gradient;\n\n\t// Determine color CSS class name list.\n\tconst className = clsx( textClass, gradientClass, {\n\t\t// Don't apply the background class if there's a gradient.\n\t\t[ backgroundClass ]: ! hasGradient && !! backgroundClass,\n\t\t'has-text-color': textColor || style?.color?.text,\n\t\t'has-background':\n\t\t\tbackgroundColor ||\n\t\t\tstyle?.color?.background ||\n\t\t\tgradient ||\n\t\t\tstyle?.color?.gradient,\n\t\t'has-link-color': style?.elements?.link?.color,\n\t} );\n\n\t// Collect inline styles for colors.\n\tconst colorStyles = style?.color || {};\n\tconst styleProp = getInlineStyles( { color: colorStyles } );\n\n\treturn {\n\t\tclassName: className || undefined,\n\t\tstyle: styleProp,\n\t};\n}\n\n/**\n * Determines the color related props for a block derived from its color block\n * support attributes.\n *\n * Inline styles are forced for named colors to ensure these selections are\n * reflected when themes do not load their color stylesheets in the editor.\n *\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} ClassName & style props from colors block support.\n */\nexport function useColorProps( attributes ) {\n\tconst { backgroundColor, textColor, gradient } = attributes;\n\n\tconst [\n\t\tuserPalette,\n\t\tthemePalette,\n\t\tdefaultPalette,\n\t\tuserGradients,\n\t\tthemeGradients,\n\t\tdefaultGradients,\n\t] = useSettings(\n\t\t'color.palette.custom',\n\t\t'color.palette.theme',\n\t\t'color.palette.default',\n\t\t'color.gradients.custom',\n\t\t'color.gradients.theme',\n\t\t'color.gradients.default'\n\t);\n\n\tconst colors = useMemo(\n\t\t() => [\n\t\t\t...( userPalette || [] ),\n\t\t\t...( themePalette || [] ),\n\t\t\t...( defaultPalette || [] ),\n\t\t],\n\t\t[ userPalette, themePalette, defaultPalette ]\n\t);\n\tconst gradients = useMemo(\n\t\t() => [\n\t\t\t...( userGradients || [] ),\n\t\t\t...( themeGradients || [] ),\n\t\t\t...( defaultGradients || [] ),\n\t\t],\n\t\t[ userGradients, themeGradients, defaultGradients ]\n\t);\n\n\tconst colorProps = getColorClassesAndStyles( attributes );\n\n\t// Force inline styles to apply colors when themes do not load their color\n\t// stylesheets in the editor.\n\tif ( backgroundColor ) {\n\t\tconst backgroundColorObject = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\tbackgroundColor\n\t\t);\n\n\t\tcolorProps.style.backgroundColor = backgroundColorObject.color;\n\t}\n\n\tif ( gradient ) {\n\t\tcolorProps.style.background = getGradientValueBySlug(\n\t\t\tgradients,\n\t\t\tgradient\n\t\t);\n\t}\n\n\tif ( textColor ) {\n\t\tconst textColorObject = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\ttextColor\n\t\t);\n\n\t\tcolorProps.style.color = textColorObject.color;\n\t}\n\n\treturn colorProps;\n}\n","/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\n\n// This utility is intended to assist where the serialization of the spacing\n// block support is being skipped for a block but the spacing related CSS\n// styles still need to be generated so they can be applied to inner elements.\n\n/**\n * Provides the CSS class names and inline styles for a block's spacing support\n * attributes.\n *\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} Spacing block support derived CSS classes & styles.\n */\nexport function getSpacingClassesAndStyles( attributes ) {\n\tconst { style } = attributes;\n\n\t// Collect inline styles for spacing.\n\tconst spacingStyles = style?.spacing || {};\n\tconst styleProp = getInlineStyles( { spacing: spacingStyles } );\n\n\treturn {\n\t\tstyle: styleProp,\n\t};\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\nimport { getFontSizeClass } from '../components/font-sizes';\nimport { getTypographyFontSizeValue } from '../components/global-styles/typography-utils';\nimport { unlock } from '../lock-unlock';\n\nconst { kebabCase } = unlock( componentsPrivateApis );\n\n/*\n * This utility is intended to assist where the serialization of the typography\n * block support is being skipped for a block but the typography related CSS\n * styles still need to be generated so they can be applied to inner elements.\n */\n/**\n * Provides the CSS class names and inline styles for a block's typography support\n * attributes.\n *\n * @param {Object}         attributes Block attributes.\n * @param {Object|boolean} settings   Merged theme.json settings\n *\n * @return {Object} Typography block support derived CSS classes & styles.\n */\nexport function getTypographyClassesAndStyles( attributes, settings ) {\n\tlet typographyStyles = attributes?.style?.typography || {};\n\ttypographyStyles = {\n\t\t...typographyStyles,\n\t\tfontSize: getTypographyFontSizeValue(\n\t\t\t{ size: attributes?.style?.typography?.fontSize },\n\t\t\tsettings\n\t\t),\n\t};\n\n\tconst style = getInlineStyles( { typography: typographyStyles } );\n\tconst fontFamilyClassName = !! attributes?.fontFamily\n\t\t? `has-${ kebabCase( attributes.fontFamily ) }-font-family`\n\t\t: '';\n\tconst textAlignClassName = !! attributes?.style?.typography?.textAlign\n\t\t? `has-text-align-${ attributes?.style?.typography?.textAlign }`\n\t\t: '';\n\tconst className = clsx(\n\t\tfontFamilyClassName,\n\t\ttextAlignClassName,\n\t\tgetFontSizeClass( attributes?.fontSize )\n\t);\n\n\treturn {\n\t\tclassName,\n\t\tstyle,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\n\n/**\n * Keeps an up-to-date copy of the passed value and returns it. If value becomes falsy, it will return the last truthy copy.\n *\n * @param {any} value\n * @return {any} value\n */\nexport function useCachedTruthy( value ) {\n\tconst [ cachedValue, setCachedValue ] = useState( value );\n\tuseEffect( () => {\n\t\tif ( value ) {\n\t\t\tsetCachedValue( value );\n\t\t}\n\t}, [ value ] );\n\treturn cachedValue;\n}\n","/**\n * Internal dependencies\n */\nimport {\n\tcreateBlockEditFilter,\n\tcreateBlockListBlockFilter,\n\tcreateBlockSaveFilter,\n} from './utils';\nimport './compat';\nimport align from './align';\nimport background from './background';\nimport './lock';\nimport anchor from './anchor';\nimport ariaLabel from './aria-label';\nimport customClassName from './custom-class-name';\nimport './generated-class-name';\nimport style from './style';\nimport './settings';\nimport color from './color';\nimport dimensions from './dimensions';\nimport duotone from './duotone';\nimport fontFamily from './font-family';\nimport fontSize from './font-size';\nimport textAlign from './text-align';\nimport border from './border';\nimport position from './position';\nimport blockStyleVariation from './block-style-variation';\nimport layout from './layout';\nimport childLayout from './layout-child';\nimport contentLockUI from './content-lock-ui';\nimport './metadata';\nimport blockHooks from './block-hooks';\nimport blockBindingsPanel from './block-bindings';\nimport './block-renaming';\nimport './grid-visualizer';\n\ncreateBlockEditFilter(\n\t[\n\t\talign,\n\t\ttextAlign,\n\t\tanchor,\n\t\tcustomClassName,\n\t\tstyle,\n\t\tduotone,\n\t\tposition,\n\t\tlayout,\n\t\tcontentLockUI,\n\t\tblockHooks,\n\t\tblockBindingsPanel,\n\t\tchildLayout,\n\t].filter( Boolean )\n);\ncreateBlockListBlockFilter( [\n\talign,\n\ttextAlign,\n\tbackground,\n\tstyle,\n\tcolor,\n\tdimensions,\n\tduotone,\n\tfontFamily,\n\tfontSize,\n\tborder,\n\tposition,\n\tblockStyleVariation,\n\tchildLayout,\n] );\ncreateBlockSaveFilter( [\n\talign,\n\ttextAlign,\n\tanchor,\n\tariaLabel,\n\tcustomClassName,\n\tborder,\n\tcolor,\n\tstyle,\n\tfontFamily,\n\tfontSize,\n] );\n\nexport { useCustomSides } from './dimensions';\nexport { useLayoutClasses, useLayoutStyles } from './layout';\nexport { getBorderClassesAndStyles, useBorderProps } from './use-border-props';\nexport { getShadowClassesAndStyles } from './use-shadow-props';\nexport { getColorClassesAndStyles, useColorProps } from './use-color-props';\nexport { getSpacingClassesAndStyles } from './use-spacing-props';\nexport { getTypographyClassesAndStyles } from './use-typography-props';\nexport { getGapCSSValue } from './gap';\nexport { useCachedTruthy } from './use-cached-truthy';\nexport { setBackgroundStyleDefaults } from './background';\nexport { useZoomOut } from './use-zoom-out';\nexport { __unstableBlockStyleVariationOverridesWithConfig } from './block-style-variation';\nexport { useStyleOverride } from './utils';\n","/**\n * WordPress dependencies\n */\nimport { useMemo, Component } from '@wordpress/element';\nimport { compose, createHigherOrderComponent } from '@wordpress/compose';\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetColorClassName,\n\tgetColorObjectByColorValue,\n\tgetColorObjectByAttributeValues,\n\tgetMostReadableColor,\n} from './utils';\nimport { useSettings } from '../use-settings';\nimport { unlock } from '../../lock-unlock';\n\nconst { kebabCase } = unlock( componentsPrivateApis );\n\n/**\n * Capitalizes the first letter in a string.\n *\n * @param {string} str The string whose first letter the function will capitalize.\n *\n * @return {string} Capitalized string.\n */\nconst upperFirst = ( [ firstLetter, ...rest ] ) =>\n\tfirstLetter.toUpperCase() + rest.join( '' );\n\n/**\n * Higher order component factory for injecting the `colorsArray` argument as\n * the colors prop in the `withCustomColors` HOC.\n *\n * @param {Array} colorsArray An array of color objects.\n *\n * @return {Function} The higher order component.\n */\nconst withCustomColorPalette = ( colorsArray ) =>\n\tcreateHigherOrderComponent(\n\t\t( WrappedComponent ) => ( props ) => (\n\t\t\t<WrappedComponent { ...props } colors={ colorsArray } />\n\t\t),\n\t\t'withCustomColorPalette'\n\t);\n\n/**\n * Higher order component factory for injecting the editor colors as the\n * `colors` prop in the `withColors` HOC.\n *\n * @return {Function} The higher order component.\n */\nconst withEditorColorPalette = () =>\n\tcreateHigherOrderComponent(\n\t\t( WrappedComponent ) => ( props ) => {\n\t\t\tconst [ userPalette, themePalette, defaultPalette ] = useSettings(\n\t\t\t\t'color.palette.custom',\n\t\t\t\t'color.palette.theme',\n\t\t\t\t'color.palette.default'\n\t\t\t);\n\t\t\tconst allColors = useMemo(\n\t\t\t\t() => [\n\t\t\t\t\t...( userPalette || [] ),\n\t\t\t\t\t...( themePalette || [] ),\n\t\t\t\t\t...( defaultPalette || [] ),\n\t\t\t\t],\n\t\t\t\t[ userPalette, themePalette, defaultPalette ]\n\t\t\t);\n\t\t\treturn <WrappedComponent { ...props } colors={ allColors } />;\n\t\t},\n\t\t'withEditorColorPalette'\n\t);\n\n/**\n * Helper function used with `createHigherOrderComponent` to create\n * higher order components for managing color logic.\n *\n * @param {Array}    colorTypes       An array of color types (e.g. 'backgroundColor, borderColor).\n * @param {Function} withColorPalette A HOC for injecting the 'colors' prop into the WrappedComponent.\n *\n * @return {Component} The component that can be used as a HOC.\n */\nfunction createColorHOC( colorTypes, withColorPalette ) {\n\tconst colorMap = colorTypes.reduce( ( colorObject, colorType ) => {\n\t\treturn {\n\t\t\t...colorObject,\n\t\t\t...( typeof colorType === 'string'\n\t\t\t\t? { [ colorType ]: kebabCase( colorType ) }\n\t\t\t\t: colorType ),\n\t\t};\n\t}, {} );\n\n\treturn compose( [\n\t\twithColorPalette,\n\t\t( WrappedComponent ) => {\n\t\t\treturn class extends Component {\n\t\t\t\tconstructor( props ) {\n\t\t\t\t\tsuper( props );\n\n\t\t\t\t\tthis.setters = this.createSetters();\n\t\t\t\t\tthis.colorUtils = {\n\t\t\t\t\t\tgetMostReadableColor:\n\t\t\t\t\t\t\tthis.getMostReadableColor.bind( this ),\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.state = {};\n\t\t\t\t}\n\n\t\t\t\tgetMostReadableColor( colorValue ) {\n\t\t\t\t\tconst { colors } = this.props;\n\t\t\t\t\treturn getMostReadableColor( colors, colorValue );\n\t\t\t\t}\n\n\t\t\t\tcreateSetters() {\n\t\t\t\t\treturn Object.keys( colorMap ).reduce(\n\t\t\t\t\t\t( settersAccumulator, colorAttributeName ) => {\n\t\t\t\t\t\t\tconst upperFirstColorAttributeName =\n\t\t\t\t\t\t\t\tupperFirst( colorAttributeName );\n\t\t\t\t\t\t\tconst customColorAttributeName = `custom${ upperFirstColorAttributeName }`;\n\t\t\t\t\t\t\tsettersAccumulator[\n\t\t\t\t\t\t\t\t`set${ upperFirstColorAttributeName }`\n\t\t\t\t\t\t\t] = this.createSetColor(\n\t\t\t\t\t\t\t\tcolorAttributeName,\n\t\t\t\t\t\t\t\tcustomColorAttributeName\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn settersAccumulator;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tcreateSetColor( colorAttributeName, customColorAttributeName ) {\n\t\t\t\t\treturn ( colorValue ) => {\n\t\t\t\t\t\tconst colorObject = getColorObjectByColorValue(\n\t\t\t\t\t\t\tthis.props.colors,\n\t\t\t\t\t\t\tcolorValue\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.props.setAttributes( {\n\t\t\t\t\t\t\t[ colorAttributeName ]:\n\t\t\t\t\t\t\t\tcolorObject && colorObject.slug\n\t\t\t\t\t\t\t\t\t? colorObject.slug\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t[ customColorAttributeName ]:\n\t\t\t\t\t\t\t\tcolorObject && colorObject.slug\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: colorValue,\n\t\t\t\t\t\t} );\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tstatic getDerivedStateFromProps(\n\t\t\t\t\t{ attributes, colors },\n\t\t\t\t\tpreviousState\n\t\t\t\t) {\n\t\t\t\t\treturn Object.entries( colorMap ).reduce(\n\t\t\t\t\t\t( newState, [ colorAttributeName, colorContext ] ) => {\n\t\t\t\t\t\t\tconst colorObject = getColorObjectByAttributeValues(\n\t\t\t\t\t\t\t\tcolors,\n\t\t\t\t\t\t\t\tattributes[ colorAttributeName ],\n\t\t\t\t\t\t\t\tattributes[\n\t\t\t\t\t\t\t\t\t`custom${ upperFirst(\n\t\t\t\t\t\t\t\t\t\tcolorAttributeName\n\t\t\t\t\t\t\t\t\t) }`\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconst previousColorObject =\n\t\t\t\t\t\t\t\tpreviousState[ colorAttributeName ];\n\t\t\t\t\t\t\tconst previousColor = previousColorObject?.color;\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * The \"and previousColorObject\" condition checks that a previous color object was already computed.\n\t\t\t\t\t\t\t * At the start previousColorObject and colorValue are both equal to undefined\n\t\t\t\t\t\t\t * bus as previousColorObject does not exist we should compute the object.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tpreviousColor === colorObject.color &&\n\t\t\t\t\t\t\t\tpreviousColorObject\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tnewState[ colorAttributeName ] =\n\t\t\t\t\t\t\t\t\tpreviousColorObject;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewState[ colorAttributeName ] = {\n\t\t\t\t\t\t\t\t\t...colorObject,\n\t\t\t\t\t\t\t\t\tclass: getColorClassName(\n\t\t\t\t\t\t\t\t\t\tcolorContext,\n\t\t\t\t\t\t\t\t\t\tcolorObject.slug\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn newState;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\trender() {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t...this.props,\n\t\t\t\t\t\t\t\tcolors: undefined,\n\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\t...this.setters,\n\t\t\t\t\t\t\t\tcolorUtils: this.colorUtils,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t] );\n}\n\n/**\n * A higher-order component factory for creating a 'withCustomColors' HOC, which handles color logic\n * for class generation color value, retrieval and color attribute setting.\n *\n * Use this higher-order component to work with a custom set of colors.\n *\n * @example\n *\n * ```jsx\n * const CUSTOM_COLORS = [ { name: 'Red', slug: 'red', color: '#ff0000' }, { name: 'Blue', slug: 'blue', color: '#0000ff' } ];\n * const withCustomColors = createCustomColorsHOC( CUSTOM_COLORS );\n * // ...\n * export default compose(\n *     withCustomColors( 'backgroundColor', 'borderColor' ),\n *     MyColorfulComponent,\n * );\n * ```\n *\n * @param {Array} colorsArray The array of color objects (name, slug, color, etc... ).\n *\n * @return {Function} Higher-order component.\n */\nexport function createCustomColorsHOC( colorsArray ) {\n\treturn ( ...colorTypes ) => {\n\t\tconst withColorPalette = withCustomColorPalette( colorsArray );\n\t\treturn createHigherOrderComponent(\n\t\t\tcreateColorHOC( colorTypes, withColorPalette ),\n\t\t\t'withCustomColors'\n\t\t);\n\t};\n}\n\n/**\n * A higher-order component, which handles color logic for class generation color value, retrieval and color attribute setting.\n *\n * For use with the default editor/theme color palette.\n *\n * @example\n *\n * ```jsx\n * export default compose(\n *     withColors( 'backgroundColor', { textColor: 'color' } ),\n *     MyColorfulComponent,\n * );\n * ```\n *\n * @param {...(Object|string)} colorTypes The arguments can be strings or objects. If the argument is an object,\n *                                        it should contain the color attribute name as key and the color context as value.\n *                                        If the argument is a string the value should be the color attribute name,\n *                                        the color context is computed by applying a kebab case transform to the value.\n *                                        Color context represents the context/place where the color is going to be used.\n *                                        The class name of the color is generated using 'has' followed by the color name\n *                                        and ending with the color context all in kebab case e.g: has-green-background-color.\n *\n * @return {Function} Higher-order component.\n */\nexport default function withColors( ...colorTypes ) {\n\tconst withColorPalette = withEditorColorPalette();\n\treturn createHigherOrderComponent(\n\t\tcreateColorHOC( colorTypes, withColorPalette ),\n\t\t'withColors'\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { FontSizePicker as BaseFontSizePicker } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\n\nfunction FontSizePicker( props ) {\n\tconst [ fontSizes, customFontSize ] = useSettings(\n\t\t'typography.fontSizes',\n\t\t'typography.customFontSize'\n\t);\n\n\treturn (\n\t\t<BaseFontSizePicker\n\t\t\t{ ...props }\n\t\t\tfontSizes={ fontSizes }\n\t\t\tdisableCustomFontSizes={ ! customFontSize }\n\t\t/>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/font-sizes/README.md\n */\nexport default FontSizePicker;\n","/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent, compose } from '@wordpress/compose';\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getFontSize, getFontSizeClass } from './utils';\nimport { useSettings } from '../use-settings';\n\nconst DEFAULT_FONT_SIZES = [];\n\n/**\n * Capitalizes the first letter in a string.\n *\n * @param {string} str The string whose first letter the function will capitalize.\n *\n * @return {string} Capitalized string.\n */\nconst upperFirst = ( [ firstLetter, ...rest ] ) =>\n\tfirstLetter.toUpperCase() + rest.join( '' );\n\n/**\n * Higher-order component, which handles font size logic for class generation,\n * font size value retrieval, and font size change handling.\n *\n * @param {...(Object|string)} fontSizeNames The arguments should all be strings.\n *                                           Each string contains the font size\n *                                           attribute name e.g: 'fontSize'.\n *\n * @return {Function} Higher-order component.\n */\nexport default ( ...fontSizeNames ) => {\n\t/*\n\t * Computes an object whose key is the font size attribute name as passed in the array,\n\t * and the value is the custom font size attribute name.\n\t * Custom font size is automatically compted by appending custom followed by the font size attribute name in with the first letter capitalized.\n\t */\n\tconst fontSizeAttributeNames = fontSizeNames.reduce(\n\t\t( fontSizeAttributeNamesAccumulator, fontSizeAttributeName ) => {\n\t\t\tfontSizeAttributeNamesAccumulator[\n\t\t\t\tfontSizeAttributeName\n\t\t\t] = `custom${ upperFirst( fontSizeAttributeName ) }`;\n\t\t\treturn fontSizeAttributeNamesAccumulator;\n\t\t},\n\t\t{}\n\t);\n\n\treturn createHigherOrderComponent(\n\t\tcompose( [\n\t\t\tcreateHigherOrderComponent(\n\t\t\t\t( WrappedComponent ) => ( props ) => {\n\t\t\t\t\tconst [ fontSizes ] = useSettings( 'typography.fontSizes' );\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t\tfontSizes={ fontSizes || DEFAULT_FONT_SIZES }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\t'withFontSizes'\n\t\t\t),\n\t\t\t( WrappedComponent ) => {\n\t\t\t\treturn class extends Component {\n\t\t\t\t\tconstructor( props ) {\n\t\t\t\t\t\tsuper( props );\n\n\t\t\t\t\t\tthis.setters = this.createSetters();\n\n\t\t\t\t\t\tthis.state = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tcreateSetters() {\n\t\t\t\t\t\treturn Object.entries( fontSizeAttributeNames ).reduce(\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tsettersAccumulator,\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\tfontSizeAttributeName,\n\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName,\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\tconst upperFirstFontSizeAttributeName =\n\t\t\t\t\t\t\t\t\tupperFirst( fontSizeAttributeName );\n\t\t\t\t\t\t\t\tsettersAccumulator[\n\t\t\t\t\t\t\t\t\t`set${ upperFirstFontSizeAttributeName }`\n\t\t\t\t\t\t\t\t] = this.createSetFontSize(\n\t\t\t\t\t\t\t\t\tfontSizeAttributeName,\n\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treturn settersAccumulator;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tcreateSetFontSize(\n\t\t\t\t\t\tfontSizeAttributeName,\n\t\t\t\t\t\tcustomFontSizeAttributeName\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn ( fontSizeValue ) => {\n\t\t\t\t\t\t\tconst fontSizeObject = this.props.fontSizes?.find(\n\t\t\t\t\t\t\t\t( { size } ) => size === Number( fontSizeValue )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.props.setAttributes( {\n\t\t\t\t\t\t\t\t[ fontSizeAttributeName ]:\n\t\t\t\t\t\t\t\t\tfontSizeObject && fontSizeObject.slug\n\t\t\t\t\t\t\t\t\t\t? fontSizeObject.slug\n\t\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t[ customFontSizeAttributeName ]:\n\t\t\t\t\t\t\t\t\tfontSizeObject && fontSizeObject.slug\n\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t: fontSizeValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tstatic getDerivedStateFromProps(\n\t\t\t\t\t\t{ attributes, fontSizes },\n\t\t\t\t\t\tpreviousState\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst didAttributesChange = (\n\t\t\t\t\t\t\tcustomFontSizeAttributeName,\n\t\t\t\t\t\t\tfontSizeAttributeName\n\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\tif ( previousState[ fontSizeAttributeName ] ) {\n\t\t\t\t\t\t\t\t// If new font size is name compare with the previous slug.\n\t\t\t\t\t\t\t\tif ( attributes[ fontSizeAttributeName ] ) {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\tattributes[ fontSizeAttributeName ] !==\n\t\t\t\t\t\t\t\t\t\tpreviousState[ fontSizeAttributeName ]\n\t\t\t\t\t\t\t\t\t\t\t.slug\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// If font size is not named, update when the font size value changes.\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\tpreviousState[ fontSizeAttributeName ]\n\t\t\t\t\t\t\t\t\t\t.size !==\n\t\t\t\t\t\t\t\t\tattributes[ customFontSizeAttributeName ]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// In this case we need to build the font size object.\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t! Object.values( fontSizeAttributeNames ).some(\n\t\t\t\t\t\t\t\tdidAttributesChange\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst newState = Object.entries(\n\t\t\t\t\t\t\tfontSizeAttributeNames\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.filter( ( [ key, value ] ) =>\n\t\t\t\t\t\t\t\tdidAttributesChange( value, key )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.reduce(\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\tnewStateAccumulator,\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\tfontSizeAttributeName,\n\t\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName,\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\tconst fontSizeAttributeValue =\n\t\t\t\t\t\t\t\t\t\tattributes[ fontSizeAttributeName ];\n\t\t\t\t\t\t\t\t\tconst fontSizeObject = getFontSize(\n\t\t\t\t\t\t\t\t\t\tfontSizes,\n\t\t\t\t\t\t\t\t\t\tfontSizeAttributeValue,\n\t\t\t\t\t\t\t\t\t\tattributes[\n\t\t\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tnewStateAccumulator[\n\t\t\t\t\t\t\t\t\t\tfontSizeAttributeName\n\t\t\t\t\t\t\t\t\t] = {\n\t\t\t\t\t\t\t\t\t\t...fontSizeObject,\n\t\t\t\t\t\t\t\t\t\tclass: getFontSizeClass(\n\t\t\t\t\t\t\t\t\t\t\tfontSizeAttributeValue\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\treturn newStateAccumulator;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...previousState,\n\t\t\t\t\t\t\t...newState,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\trender() {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t\t...this.props,\n\t\t\t\t\t\t\t\t\tfontSizes: undefined,\n\t\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\t\t...this.setters,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t] ),\n\t\t'withFontSizes'\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tcreateBlock,\n\tcreateBlocksFromInnerBlocksTemplate,\n\tparse,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { searchBlockItems } from '../components/inserter/search-items';\nimport useBlockTypesState from '../components/inserter/hooks/use-block-types-state';\nimport BlockIcon from '../components/block-icon';\nimport { store as blockEditorStore } from '../store';\nimport { orderBy } from '../utils/sorting';\nimport { orderInserterBlockItems } from '../utils/order-inserter-block-items';\n\nconst noop = () => {};\nconst SHOWN_BLOCK_TYPES = 9;\n\n/**\n * Creates a blocks repeater for replacing the current block with a selected block type.\n *\n * @return {Object} A blocks completer.\n */\nfunction createBlockCompleter() {\n\treturn {\n\t\tname: 'blocks',\n\t\tclassName: 'block-editor-autocompleters__block',\n\t\ttriggerPrefix: '/',\n\n\t\tuseItems( filterValue ) {\n\t\t\tconst { rootClientId, selectedBlockId, prioritizedBlocks } =\n\t\t\t\tuseSelect( ( select ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\t\t\tgetBlock,\n\t\t\t\t\t\tgetBlockListSettings,\n\t\t\t\t\t\tgetBlockRootClientId,\n\t\t\t\t\t} = select( blockEditorStore );\n\t\t\t\t\tconst { getActiveBlockVariation } = select( blocksStore );\n\t\t\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\t\t\tconst { name: blockName, attributes } = getBlock(\n\t\t\t\t\t\tselectedBlockClientId\n\t\t\t\t\t);\n\t\t\t\t\tconst activeBlockVariation = getActiveBlockVariation(\n\t\t\t\t\t\tblockName,\n\t\t\t\t\t\tattributes\n\t\t\t\t\t);\n\t\t\t\t\tconst _rootClientId = getBlockRootClientId(\n\t\t\t\t\t\tselectedBlockClientId\n\t\t\t\t\t);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tselectedBlockId: activeBlockVariation\n\t\t\t\t\t\t\t? `${ blockName }/${ activeBlockVariation.name }`\n\t\t\t\t\t\t\t: blockName,\n\t\t\t\t\t\trootClientId: _rootClientId,\n\t\t\t\t\t\tprioritizedBlocks:\n\t\t\t\t\t\t\tgetBlockListSettings( _rootClientId )\n\t\t\t\t\t\t\t\t?.prioritizedInserterBlocks,\n\t\t\t\t\t};\n\t\t\t\t}, [] );\n\t\t\tconst [ items, categories, collections ] = useBlockTypesState(\n\t\t\t\trootClientId,\n\t\t\t\tnoop,\n\t\t\t\ttrue\n\t\t\t);\n\n\t\t\tconst filteredItems = useMemo( () => {\n\t\t\t\tconst initialFilteredItems = !! filterValue.trim()\n\t\t\t\t\t? searchBlockItems(\n\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t\tcategories,\n\t\t\t\t\t\t\tcollections,\n\t\t\t\t\t\t\tfilterValue\n\t\t\t\t\t  )\n\t\t\t\t\t: orderInserterBlockItems(\n\t\t\t\t\t\t\torderBy( items, 'frecency', 'desc' ),\n\t\t\t\t\t\t\tprioritizedBlocks\n\t\t\t\t\t  );\n\n\t\t\t\treturn initialFilteredItems\n\t\t\t\t\t.filter( ( item ) => item.id !== selectedBlockId )\n\t\t\t\t\t.slice( 0, SHOWN_BLOCK_TYPES );\n\t\t\t}, [\n\t\t\t\tfilterValue,\n\t\t\t\tselectedBlockId,\n\t\t\t\titems,\n\t\t\t\tcategories,\n\t\t\t\tcollections,\n\t\t\t\tprioritizedBlocks,\n\t\t\t] );\n\n\t\t\tconst options = useMemo(\n\t\t\t\t() =>\n\t\t\t\t\tfilteredItems.map( ( blockItem ) => {\n\t\t\t\t\t\tconst { title, icon, isDisabled } = blockItem;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tkey: `block-${ blockItem.id }`,\n\t\t\t\t\t\t\tvalue: blockItem,\n\t\t\t\t\t\t\tlabel: (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<BlockIcon\n\t\t\t\t\t\t\t\t\t\tkey=\"icon\"\n\t\t\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t\t\t\tshowColors\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tisDisabled,\n\t\t\t\t\t\t};\n\t\t\t\t\t} ),\n\t\t\t\t[ filteredItems ]\n\t\t\t);\n\n\t\t\treturn [ options ];\n\t\t},\n\t\tallowContext( before, after ) {\n\t\t\treturn ! ( /\\S/.test( before ) || /\\S/.test( after ) );\n\t\t},\n\t\tgetOptionCompletion( inserterItem ) {\n\t\t\tconst {\n\t\t\t\tname,\n\t\t\t\tinitialAttributes,\n\t\t\t\tinnerBlocks,\n\t\t\t\tsyncStatus,\n\t\t\t\tcontent,\n\t\t\t} = inserterItem;\n\n\t\t\treturn {\n\t\t\t\taction: 'replace',\n\t\t\t\tvalue:\n\t\t\t\t\tsyncStatus === 'unsynced'\n\t\t\t\t\t\t? parse( content, {\n\t\t\t\t\t\t\t\t__unstableSkipMigrationLogs: true,\n\t\t\t\t\t\t  } )\n\t\t\t\t\t\t: createBlock(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tinitialAttributes,\n\t\t\t\t\t\t\t\tcreateBlocksFromInnerBlocksTemplate(\n\t\t\t\t\t\t\t\t\tinnerBlocks\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t  ),\n\t\t\t};\n\t\t},\n\t};\n}\n\n/**\n * Creates a blocks repeater for replacing the current block with a selected block type.\n *\n * @return {Object} A blocks completer.\n */\nexport default createBlockCompleter();\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"apiFetch\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst post = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m7.3 9.7 1.4 1.4c.2-.2.3-.3.4-.5 0 0 0-.1.1-.1.3-.5.4-1.1.3-1.6L12 7 9 4 7.2 6.5c-.6-.1-1.1 0-1.6.3 0 0-.1 0-.1.1-.3.1-.4.2-.6.4l1.4 1.4L4 11v1h1l2.3-2.3zM4 20h9v-1.5H4V20zm0-5.5V16h16v-1.5H4z\" />\n\t</SVG>\n);\n\nexport default post;\n","/**\n * WordPress dependencies\n */\n// Disable Reason: Needs to be refactored.\n// eslint-disable-next-line no-restricted-imports\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { Icon, page, post } from '@wordpress/icons';\nimport { decodeEntities } from '@wordpress/html-entities';\n\nconst SHOWN_SUGGESTIONS = 10;\n\n/**\n * Creates a suggestion list for links to posts or pages.\n *\n * @return {Object} A links completer.\n */\nfunction createLinkCompleter() {\n\treturn {\n\t\tname: 'links',\n\t\tclassName: 'block-editor-autocompleters__link',\n\t\ttriggerPrefix: '[[',\n\t\toptions: async ( letters ) => {\n\t\t\tlet options = await apiFetch( {\n\t\t\t\tpath: addQueryArgs( '/wp/v2/search', {\n\t\t\t\t\tper_page: SHOWN_SUGGESTIONS,\n\t\t\t\t\tsearch: letters,\n\t\t\t\t\ttype: 'post',\n\t\t\t\t\torder_by: 'menu_order',\n\t\t\t\t} ),\n\t\t\t} );\n\n\t\t\toptions = options.filter( ( option ) => option.title !== '' );\n\n\t\t\treturn options;\n\t\t},\n\t\tgetOptionKeywords( item ) {\n\t\t\tconst expansionWords = item.title.split( /\\s+/ );\n\t\t\treturn [ ...expansionWords ];\n\t\t},\n\t\tgetOptionLabel( item ) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tkey=\"icon\"\n\t\t\t\t\t\ticon={ item.subtype === 'page' ? page : post }\n\t\t\t\t\t/>\n\t\t\t\t\t{ decodeEntities( item.title ) }\n\t\t\t\t</>\n\t\t\t);\n\t\t},\n\t\tgetOptionCompletion( item ) {\n\t\t\treturn <a href={ item.url }>{ item.title }</a>;\n\t\t},\n\t};\n}\n\n/**\n * Creates a suggestion list for links to posts or pages..\n *\n * @return {Object} A link completer.\n */\nexport default createLinkCompleter();\n","/**\n * WordPress dependencies\n */\nimport { applyFilters, hasFilter } from '@wordpress/hooks';\nimport {\n\tAutocomplete,\n\t__unstableUseAutocompleteProps as useAutocompleteProps,\n} from '@wordpress/components';\nimport { useMemo } from '@wordpress/element';\nimport { getDefaultBlockName, getBlockSupport } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit/context';\nimport blockAutocompleter from '../../autocompleters/block';\nimport linkAutocompleter from '../../autocompleters/link';\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\nfunction useCompleters( { completers = EMPTY_ARRAY } ) {\n\tconst { name } = useBlockEditContext();\n\treturn useMemo( () => {\n\t\tlet filteredCompleters = [ ...completers, linkAutocompleter ];\n\n\t\tif (\n\t\t\tname === getDefaultBlockName() ||\n\t\t\tgetBlockSupport( name, '__experimentalSlashInserter', false )\n\t\t) {\n\t\t\tfilteredCompleters = [ ...filteredCompleters, blockAutocompleter ];\n\t\t}\n\n\t\tif ( hasFilter( 'editor.Autocomplete.completers' ) ) {\n\t\t\t// Provide copies so filters may directly modify them.\n\t\t\tif ( filteredCompleters === completers ) {\n\t\t\t\tfilteredCompleters = filteredCompleters.map(\n\t\t\t\t\t( completer ) => ( { ...completer } )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfilteredCompleters = applyFilters(\n\t\t\t\t'editor.Autocomplete.completers',\n\t\t\t\tfilteredCompleters,\n\t\t\t\tname\n\t\t\t);\n\t\t}\n\n\t\treturn filteredCompleters;\n\t}, [ completers, name ] );\n}\n\nexport function useBlockEditorAutocompleteProps( props ) {\n\treturn useAutocompleteProps( {\n\t\t...props,\n\t\tcompleters: useCompleters( props ),\n\t} );\n}\n\n/**\n * Wrap the default Autocomplete component with one that supports a filter hook\n * for customizing its list of autocompleters.\n *\n * @type {import('react').FC}\n */\nfunction BlockEditorAutocomplete( props ) {\n\treturn <Autocomplete { ...props } completers={ useCompleters( props ) } />;\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/autocomplete/README.md\n */\nexport default BlockEditorAutocomplete;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst fullscreen = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M6 4a2 2 0 0 0-2 2v3h1.5V6a.5.5 0 0 1 .5-.5h3V4H6Zm3 14.5H6a.5.5 0 0 1-.5-.5v-3H4v3a2 2 0 0 0 2 2h3v-1.5Zm6 1.5v-1.5h3a.5.5 0 0 0 .5-.5v-3H20v3a2 2 0 0 1-2 2h-3Zm3-16a2 2 0 0 1 2 2v3h-1.5V6a.5.5 0 0 0-.5-.5h-3V4h3Z\" />\n\t</SVG>\n);\n\nexport default fullscreen;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { ToolbarButton } from '@wordpress/components';\nimport { fullscreen } from '@wordpress/icons';\n\nfunction BlockFullHeightAlignmentControl( {\n\tisActive,\n\tlabel = __( 'Full height' ),\n\tonToggle,\n\tisDisabled,\n} ) {\n\treturn (\n\t\t<ToolbarButton\n\t\t\tisActive={ isActive }\n\t\t\ticon={ fullscreen }\n\t\t\tlabel={ label }\n\t\t\tonClick={ () => onToggle( ! isActive ) }\n\t\t\tdisabled={ isDisabled }\n\t\t/>\n\t);\n}\n\nexport default BlockFullHeightAlignmentControl;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { DOWN } from '@wordpress/keycodes';\nimport {\n\tToolbarButton,\n\tDropdown,\n\tAlignmentMatrixControl,\n} from '@wordpress/components';\n\nconst noop = () => {};\n\n/**\n * The alignment matrix control allows users to quickly adjust inner block alignment.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-alignment-matrix-control/README.md\n *\n * @example\n * ```jsx\n * function Example() {\n *   return (\n *     <BlockControls>\n *       <BlockAlignmentMatrixControl\n *         label={ __( 'Change content position' ) }\n *         value=\"center\"\n *         onChange={ ( nextPosition ) =>\n *           setAttributes( { contentPosition: nextPosition } )\n *         }\n *       />\n *     </BlockControls>\n *   );\n * }\n * ```\n *\n * @param {Object}   props            Component props.\n * @param {string}   props.label      Label for the control. Defaults to 'Change matrix alignment'.\n * @param {Function} props.onChange   Function to execute upon change of matrix state.\n * @param {string}   props.value      Content alignment location. One of: 'center', 'center center',\n *                                    'center left', 'center right', 'top center', 'top left',\n *                                    'top right', 'bottom center', 'bottom left', 'bottom right'.\n * @param {boolean}  props.isDisabled Whether the control should be disabled.\n * @return {Element} The BlockAlignmentMatrixControl component.\n */\nfunction BlockAlignmentMatrixControl( props ) {\n\tconst {\n\t\tlabel = __( 'Change matrix alignment' ),\n\t\tonChange = noop,\n\t\tvalue = 'center',\n\t\tisDisabled,\n\t} = props;\n\n\tconst icon = <AlignmentMatrixControl.Icon value={ value } />;\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ { placement: 'bottom-start' } }\n\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\tconst openOnArrowDown = ( event ) => {\n\t\t\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tonToggle();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\treturn (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\tonKeyDown={ openOnArrowDown }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t\tdisabled={ isDisabled }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} }\n\t\t\trenderContent={ () => (\n\t\t\t\t<AlignmentMatrixControl\n\t\t\t\t\thasFocusBorder={ false }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t/>\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nexport default BlockAlignmentMatrixControl;\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\t__experimentalGetBlockLabel as getBlockLabel,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Returns the block's configured title as a string, or empty if the title\n * cannot be determined.\n *\n * @example\n *\n * ```js\n * useBlockDisplayTitle( { clientId: 'afd1cb17-2c08-4e7a-91be-007ba7ddc3a1', maximumLength: 17 } );\n * ```\n *\n * @param {Object}           props\n * @param {string}           props.clientId      Client ID of block.\n * @param {number|undefined} props.maximumLength The maximum length that the block title string may be before truncated.\n * @param {string|undefined} props.context       The context to pass to `getBlockLabel`.\n * @return {?string} Block title.\n */\nexport default function useBlockDisplayTitle( {\n\tclientId,\n\tmaximumLength,\n\tcontext,\n} ) {\n\tconst blockTitle = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst { getBlockName, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst { getBlockType, getActiveBlockVariation } =\n\t\t\t\tselect( blocksStore );\n\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst blockType = getBlockType( blockName );\n\t\t\tif ( ! blockType ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\tconst label = getBlockLabel( blockType, attributes, context );\n\t\t\t// If the label is defined we prioritize it over a possible block variation title match.\n\t\t\tif ( label !== blockType.title ) {\n\t\t\t\treturn label;\n\t\t\t}\n\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\n\t\t\t// Label will fallback to the title if no label is defined for the current label context.\n\t\t\treturn match?.title || blockType.title;\n\t\t},\n\t\t[ clientId, context ]\n\t);\n\n\tif ( ! blockTitle ) {\n\t\treturn null;\n\t}\n\n\tif (\n\t\tmaximumLength &&\n\t\tmaximumLength > 0 &&\n\t\tblockTitle.length > maximumLength\n\t) {\n\t\tconst omission = '...';\n\t\treturn (\n\t\t\tblockTitle.slice( 0, maximumLength - omission.length ) + omission\n\t\t);\n\t}\n\n\treturn blockTitle;\n}\n","/**\n * Internal dependencies\n */\n\nimport useBlockDisplayTitle from './use-block-display-title';\n\n/**\n * Renders the block's configured title as a string, or empty if the title\n * cannot be determined.\n *\n * @example\n *\n * ```jsx\n * <BlockTitle clientId=\"afd1cb17-2c08-4e7a-91be-007ba7ddc3a1\" maximumLength={ 17 }/>\n * ```\n *\n * @param {Object}           props\n * @param {string}           props.clientId      Client ID of block.\n * @param {number|undefined} props.maximumLength The maximum length that the block title string may be before truncated.\n * @param {string|undefined} props.context       The context to pass to `getBlockLabel`.\n *\n * @return {JSX.Element} Block title.\n */\nexport default function BlockTitle( { clientId, maximumLength, context } ) {\n\treturn useBlockDisplayTitle( { clientId, maximumLength, context } );\n}\n","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { chevronRightSmall, Icon } from '@wordpress/icons';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockTitle from '../block-title';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\nimport { useBlockElementRef } from '../block-list/use-block-props/use-block-refs';\nimport getEditorRegion from '../../utils/get-editor-region';\n\n/**\n * Block breadcrumb component, displaying the hierarchy of the current block selection as a breadcrumb.\n *\n * @param {Object} props               Component props.\n * @param {string} props.rootLabelText Translated label for the root element of the breadcrumb trail.\n * @return {Element}                   Block Breadcrumb.\n */\nfunction BlockBreadcrumb( { rootLabelText } ) {\n\tconst { selectBlock, clearSelectedBlock } = useDispatch( blockEditorStore );\n\tconst { clientId, parents, hasSelection } = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSelectionStart,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetEnabledBlockParents,\n\t\t} = unlock( select( blockEditorStore ) );\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\treturn {\n\t\t\tparents: getEnabledBlockParents( selectedBlockClientId ),\n\t\t\tclientId: selectedBlockClientId,\n\t\t\thasSelection: !! getSelectionStart().clientId,\n\t\t};\n\t}, [] );\n\tconst rootLabel = rootLabelText || __( 'Document' );\n\n\t// We don't care about this specific ref, but this is a way\n\t// to get a ref within the editor canvas so we can focus it later.\n\tconst blockRef = useRef();\n\tuseBlockElementRef( clientId, blockRef );\n\n\t/*\n\t * Disable reason: The `list` ARIA role is redundant but\n\t * Safari+VoiceOver won't announce the list otherwise.\n\t */\n\t/* eslint-disable jsx-a11y/no-redundant-roles */\n\treturn (\n\t\t<ul\n\t\t\tclassName=\"block-editor-block-breadcrumb\"\n\t\t\trole=\"list\"\n\t\t\taria-label={ __( 'Block breadcrumb' ) }\n\t\t>\n\t\t\t<li\n\t\t\t\tclassName={\n\t\t\t\t\t! hasSelection\n\t\t\t\t\t\t? 'block-editor-block-breadcrumb__current'\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\taria-current={ ! hasSelection ? 'true' : undefined }\n\t\t\t>\n\t\t\t\t{ hasSelection && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__button\"\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t// Find the block editor wrapper for the selected block\n\t\t\t\t\t\t\tconst blockEditor = blockRef.current?.closest(\n\t\t\t\t\t\t\t\t'.editor-styles-wrapper'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tclearSelectedBlock();\n\n\t\t\t\t\t\t\tgetEditorRegion( blockEditor )?.focus();\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ rootLabel }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\t{ ! hasSelection && <span>{ rootLabel }</span> }\n\t\t\t\t{ !! clientId && (\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={ chevronRightSmall }\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__separator\"\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</li>\n\n\t\t\t{ parents.map( ( parentClientId ) => (\n\t\t\t\t<li key={ parentClientId }>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__button\"\n\t\t\t\t\t\tonClick={ () => selectBlock( parentClientId ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockTitle\n\t\t\t\t\t\t\tclientId={ parentClientId }\n\t\t\t\t\t\t\tmaximumLength={ 35 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={ chevronRightSmall }\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__separator\"\n\t\t\t\t\t/>\n\t\t\t\t</li>\n\t\t\t) ) }\n\t\t\t{ !! clientId && (\n\t\t\t\t<li\n\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__current\"\n\t\t\t\t\taria-current=\"true\"\n\t\t\t\t>\n\t\t\t\t\t<BlockTitle clientId={ clientId } maximumLength={ 35 } />\n\t\t\t\t</li>\n\t\t\t) }\n\t\t</ul>\n\t\t/* eslint-enable jsx-a11y/no-redundant-roles */\n\t);\n}\n\nexport default BlockBreadcrumb;\n","/**\n * Gets the editor region for a given editor canvas element or\n * returns the passed element if no region is found\n *\n * @param { Object } editor The editor canvas element.\n * @return { Object } The editor region or given editor element\n */\nexport default function getEditorRegion( editor ) {\n\tif ( ! editor ) {\n\t\treturn null;\n\t}\n\n\t// If there are multiple editors, we need to find the iframe that contains our contentRef to make sure\n\t// we're focusing the region that contains this editor.\n\tconst editorCanvas =\n\t\tArray.from(\n\t\t\tdocument.querySelectorAll( 'iframe[name=\"editor-canvas\"]' ).values()\n\t\t).find( ( iframe ) => {\n\t\t\t// Find the iframe that contains our contentRef\n\t\t\tconst iframeDocument =\n\t\t\t\tiframe.contentDocument || iframe.contentWindow.document;\n\n\t\t\treturn iframeDocument === editor.ownerDocument;\n\t\t} ) ?? editor;\n\n\t// The region is provided by the editor, not the block-editor.\n\t// We should send focus to the region if one is available to reuse the\n\t// same interface for navigating landmarks. If no region is available,\n\t// use the canvas instead.\n\treturn editorCanvas?.closest( '[role=\"region\"]' ) ?? editorCanvas;\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function useBlockOverlayActive( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst { __unstableHasActiveBlockOverlayActive } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\treturn __unstableHasActiveBlockOverlayActive( clientId );\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { getScrollContainer } from '@wordpress/dom';\nimport {\n\tuseCallback,\n\tuseLayoutEffect,\n\tuseMemo,\n\tuseState,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport { hasStickyOrFixedPositionValue } from '../../hooks/position';\nimport { getElementBounds } from '../../utils/dom';\n\nconst COMMON_PROPS = {\n\tplacement: 'top-start',\n};\n\n// By default the toolbar sets the `shift` prop. If the user scrolls the page\n// down the toolbar will stay on screen by adopting a sticky position at the\n// top of the viewport.\nconst DEFAULT_PROPS = {\n\t...COMMON_PROPS,\n\tflip: false,\n\tshift: true,\n};\n\n// When there isn't enough height between the top of the block and the editor\n// canvas, the `shift` prop is set to `false`, as it will cause the block to be\n// obscured. The `flip` behavior is enabled, which positions the toolbar below\n// the block. This only happens if the block is smaller than the viewport, as\n// otherwise the toolbar will be off-screen.\nconst RESTRICTED_HEIGHT_PROPS = {\n\t...COMMON_PROPS,\n\tflip: true,\n\tshift: false,\n};\n\n/**\n * Get the popover props for the block toolbar, determined by the space at the top of the canvas and the toolbar height.\n *\n * @param {Element} contentElement       The DOM element that represents the editor content or canvas.\n * @param {Element} selectedBlockElement The outer DOM element of the first selected block.\n * @param {Element} scrollContainer      The scrollable container for the contentElement.\n * @param {number}  toolbarHeight        The height of the toolbar in pixels.\n * @param {boolean} isSticky             Whether or not the selected block is sticky or fixed.\n *\n * @return {Object} The popover props used to determine the position of the toolbar.\n */\nfunction getProps(\n\tcontentElement,\n\tselectedBlockElement,\n\tscrollContainer,\n\ttoolbarHeight,\n\tisSticky\n) {\n\tif ( ! contentElement || ! selectedBlockElement ) {\n\t\treturn DEFAULT_PROPS;\n\t}\n\n\t// Get how far the content area has been scrolled.\n\tconst scrollTop = scrollContainer?.scrollTop || 0;\n\n\tconst blockRect = getElementBounds( selectedBlockElement );\n\tconst contentRect = contentElement.getBoundingClientRect();\n\n\t// Get the vertical position of top of the visible content area.\n\tconst topOfContentElementInViewport = scrollTop + contentRect.top;\n\n\t// The document element's clientHeight represents the viewport height.\n\tconst viewportHeight =\n\t\tcontentElement.ownerDocument.documentElement.clientHeight;\n\n\t// The restricted height area is calculated as the sum of the\n\t// vertical position of the visible content area, plus the height\n\t// of the block toolbar.\n\tconst restrictedTopArea = topOfContentElementInViewport + toolbarHeight;\n\tconst hasSpaceForToolbarAbove = blockRect.top > restrictedTopArea;\n\n\tconst isBlockTallerThanViewport =\n\t\tblockRect.height > viewportHeight - toolbarHeight;\n\n\t// Sticky blocks are treated as if they will never have enough space for the toolbar above.\n\tif (\n\t\t! isSticky &&\n\t\t( hasSpaceForToolbarAbove || isBlockTallerThanViewport )\n\t) {\n\t\treturn DEFAULT_PROPS;\n\t}\n\n\treturn RESTRICTED_HEIGHT_PROPS;\n}\n\n/**\n * Determines the desired popover positioning behavior, returning a set of appropriate props.\n *\n * @param {Object}  elements\n * @param {Element} elements.contentElement The DOM element that represents the editor content or canvas.\n * @param {string}  elements.clientId       The clientId of the first selected block.\n *\n * @return {Object} The popover props used to determine the position of the toolbar.\n */\nexport default function useBlockToolbarPopoverProps( {\n\tcontentElement,\n\tclientId,\n} ) {\n\tconst selectedBlockElement = useBlockElement( clientId );\n\tconst [ toolbarHeight, setToolbarHeight ] = useState( 0 );\n\tconst { blockIndex, isSticky } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockIndex, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\treturn {\n\t\t\t\tblockIndex: getBlockIndex( clientId ),\n\t\t\t\tisSticky: hasStickyOrFixedPositionValue(\n\t\t\t\t\tgetBlockAttributes( clientId )\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst scrollContainer = useMemo( () => {\n\t\tif ( ! contentElement ) {\n\t\t\treturn;\n\t\t}\n\t\treturn getScrollContainer( contentElement );\n\t}, [ contentElement ] );\n\tconst [ props, setProps ] = useState( () =>\n\t\tgetProps(\n\t\t\tcontentElement,\n\t\t\tselectedBlockElement,\n\t\t\tscrollContainer,\n\t\t\ttoolbarHeight,\n\t\t\tisSticky\n\t\t)\n\t);\n\n\tconst popoverRef = useRefEffect( ( popoverNode ) => {\n\t\tsetToolbarHeight( popoverNode.offsetHeight );\n\t}, [] );\n\n\tconst updateProps = useCallback(\n\t\t() =>\n\t\t\tsetProps(\n\t\t\t\tgetProps(\n\t\t\t\t\tcontentElement,\n\t\t\t\t\tselectedBlockElement,\n\t\t\t\t\tscrollContainer,\n\t\t\t\t\ttoolbarHeight,\n\t\t\t\t\tisSticky\n\t\t\t\t)\n\t\t\t),\n\t\t[ contentElement, selectedBlockElement, scrollContainer, toolbarHeight ]\n\t);\n\n\t// Update props when the block is moved. This also ensures the props are\n\t// correct on initial mount, and when the selected block or content element\n\t// changes (since the callback ref will update).\n\tuseLayoutEffect( updateProps, [ blockIndex, updateProps ] );\n\n\t// Update props when the viewport is resized or the block is resized.\n\tuseLayoutEffect( () => {\n\t\tif ( ! contentElement || ! selectedBlockElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Update the toolbar props on viewport resize.\n\t\tconst contentView = contentElement?.ownerDocument?.defaultView;\n\t\tcontentView?.addEventHandler?.( 'resize', updateProps );\n\n\t\t// Update the toolbar props on block resize.\n\t\tlet resizeObserver;\n\t\tconst blockView = selectedBlockElement?.ownerDocument?.defaultView;\n\t\tif ( blockView.ResizeObserver ) {\n\t\t\tresizeObserver = new blockView.ResizeObserver( updateProps );\n\t\t\tresizeObserver.observe( selectedBlockElement );\n\t\t}\n\n\t\treturn () => {\n\t\t\tcontentView?.removeEventHandler?.( 'resize', updateProps );\n\n\t\t\tif ( resizeObserver ) {\n\t\t\t\tresizeObserver.disconnect();\n\t\t\t}\n\t\t};\n\t}, [ updateProps, contentElement, selectedBlockElement ] );\n\n\treturn {\n\t\t...props,\n\t\tref: popoverRef,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Returns props for the selected block tools and empty block inserter.\n *\n * @param {string} clientId Selected block client ID.\n */\nexport default function useSelectedBlockToolProps( clientId ) {\n\tconst selectedBlockProps = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockParents,\n\t\t\t\t__experimentalGetBlockListSettingsForBlocks,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetBlockInsertionPoint,\n\t\t\t\tgetBlockOrder,\n\t\t\t\thasMultiSelection,\n\t\t\t\tgetLastMultiSelectedBlockClientId,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst blockParentsClientIds = getBlockParents( clientId );\n\n\t\t\t// Get Block List Settings for all ancestors of the current Block clientId.\n\t\t\tconst parentBlockListSettings =\n\t\t\t\t__experimentalGetBlockListSettingsForBlocks(\n\t\t\t\t\tblockParentsClientIds\n\t\t\t\t);\n\n\t\t\t// Get the clientId of the topmost parent with the capture toolbars setting.\n\t\t\tconst capturingClientId = blockParentsClientIds.find(\n\t\t\t\t( parentClientId ) =>\n\t\t\t\t\tparentBlockListSettings[ parentClientId ]\n\t\t\t\t\t\t?.__experimentalCaptureToolbars\n\t\t\t);\n\n\t\t\tlet isInsertionPointVisible = false;\n\t\t\tif ( isBlockInsertionPointVisible() ) {\n\t\t\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\t\t\tconst order = getBlockOrder( insertionPoint.rootClientId );\n\t\t\t\tisInsertionPointVisible =\n\t\t\t\t\torder[ insertionPoint.index ] === clientId;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tcapturingClientId,\n\t\t\t\tisInsertionPointVisible,\n\t\t\t\tlastClientId: hasMultiSelection()\n\t\t\t\t\t? getLastMultiSelectedBlockClientId()\n\t\t\t\t\t: null,\n\t\t\t\trootClientId: getBlockRootClientId( clientId ),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\treturn selectedBlockProps;\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * Internal dependencies\n */\nimport BlockPopoverCover from '../block-popover/cover';\nimport useBlockToolbarPopoverProps from './use-block-toolbar-popover-props';\nimport Inserter from '../inserter';\nimport useSelectedBlockToolProps from './use-selected-block-tool-props';\n\nexport default function EmptyBlockInserter( {\n\tclientId,\n\t__unstableContentRef,\n} ) {\n\tconst {\n\t\tcapturingClientId,\n\t\tisInsertionPointVisible,\n\t\tlastClientId,\n\t\trootClientId,\n\t} = useSelectedBlockToolProps( clientId );\n\n\tconst popoverProps = useBlockToolbarPopoverProps( {\n\t\tcontentElement: __unstableContentRef?.current,\n\t\tclientId,\n\t} );\n\n\treturn (\n\t\t<BlockPopoverCover\n\t\t\tclientId={ capturingClientId || clientId }\n\t\t\tbottomClientId={ lastClientId }\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-block-list__block-side-inserter-popover',\n\t\t\t\t{\n\t\t\t\t\t'is-insertion-point-visible': isInsertionPointVisible,\n\t\t\t\t}\n\t\t\t) }\n\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t{ ...popoverProps }\n\t\t>\n\t\t\t<div className=\"block-editor-block-list__empty-block-inserter\">\n\t\t\t\t<Inserter\n\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t__experimentalIsQuick\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</BlockPopoverCover>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { Draggable } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect, useRef } from '@wordpress/element';\nimport { throttle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockDraggableChip from './draggable-chip';\nimport useScrollWhenDragging from './use-scroll-when-dragging';\nimport { store as blockEditorStore } from '../../store';\nimport { useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport { isDropTargetValid } from '../use-block-drop-zone';\n\nconst BlockDraggable = ( {\n\tappendToOwnerDocument,\n\tchildren,\n\tclientIds,\n\tcloneClassname,\n\telementId,\n\tonDragStart,\n\tonDragEnd,\n\tfadeWhenDisabled = false,\n\tdragComponent,\n} ) => {\n\tconst {\n\t\tsrcRootClientId,\n\t\tisDraggable,\n\t\ticon,\n\t\tvisibleInserter,\n\t\tgetBlockType,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tcanMoveBlocks,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { getBlockType: _getBlockType, getActiveBlockVariation } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\t\t\tconst blockName = getBlockName( clientIds[ 0 ] );\n\t\t\tconst variation = getActiveBlockVariation(\n\t\t\t\tblockName,\n\t\t\t\tgetBlockAttributes( clientIds[ 0 ] )\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tsrcRootClientId: rootClientId,\n\t\t\t\tisDraggable: canMoveBlocks( clientIds ),\n\t\t\t\ticon: variation?.icon || _getBlockType( blockName )?.icon,\n\t\t\t\tvisibleInserter: isBlockInsertionPointVisible(),\n\t\t\t\tgetBlockType: _getBlockType,\n\t\t\t};\n\t\t},\n\t\t[ clientIds ]\n\t);\n\n\tconst isDraggingRef = useRef( false );\n\tconst [ startScrolling, scrollOnDragOver, stopScrolling ] =\n\t\tuseScrollWhenDragging();\n\n\tconst { getAllowedBlocks, getBlockNamesByClientId, getBlockRootClientId } =\n\t\tuseSelect( blockEditorStore );\n\n\tconst { startDraggingBlocks, stopDraggingBlocks } =\n\t\tuseDispatch( blockEditorStore );\n\n\t// Stop dragging blocks if the block draggable is unmounted.\n\tuseEffect( () => {\n\t\treturn () => {\n\t\t\tif ( isDraggingRef.current ) {\n\t\t\t\tstopDraggingBlocks();\n\t\t\t}\n\t\t};\n\t}, [] );\n\n\t// Find the root of the editor iframe.\n\tconst blockEl = useBlockElement( clientIds[ 0 ] );\n\tconst editorRoot = blockEl?.closest( 'body' );\n\n\t/*\n\t * Add a dragover event listener to the editor root to track the blocks being dragged over.\n\t * The listener has to be inside the editor iframe otherwise the target isn't accessible.\n\t */\n\tuseEffect( () => {\n\t\tif ( ! editorRoot || ! fadeWhenDisabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst onDragOver = ( event ) => {\n\t\t\tif ( ! event.target.closest( '[data-block]' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst draggedBlockNames = getBlockNamesByClientId( clientIds );\n\t\t\tconst targetClientId = event.target\n\t\t\t\t.closest( '[data-block]' )\n\t\t\t\t.getAttribute( 'data-block' );\n\n\t\t\tconst allowedBlocks = getAllowedBlocks( targetClientId );\n\t\t\tconst targetBlockName = getBlockNamesByClientId( [\n\t\t\t\ttargetClientId,\n\t\t\t] )[ 0 ];\n\n\t\t\t/*\n\t\t\t * Check if the target is valid to drop in.\n\t\t\t * If the target's allowedBlocks is an empty array,\n\t\t\t * it isn't a container block, in which case we check\n\t\t\t * its parent's validity instead.\n\t\t\t */\n\t\t\tlet dropTargetValid;\n\t\t\tif ( allowedBlocks?.length === 0 ) {\n\t\t\t\tconst targetRootClientId =\n\t\t\t\t\tgetBlockRootClientId( targetClientId );\n\t\t\t\tconst targetRootBlockName = getBlockNamesByClientId( [\n\t\t\t\t\ttargetRootClientId,\n\t\t\t\t] )[ 0 ];\n\t\t\t\tconst rootAllowedBlocks =\n\t\t\t\t\tgetAllowedBlocks( targetRootClientId );\n\t\t\t\tdropTargetValid = isDropTargetValid(\n\t\t\t\t\tgetBlockType,\n\t\t\t\t\trootAllowedBlocks,\n\t\t\t\t\tdraggedBlockNames,\n\t\t\t\t\ttargetRootBlockName\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdropTargetValid = isDropTargetValid(\n\t\t\t\t\tgetBlockType,\n\t\t\t\t\tallowedBlocks,\n\t\t\t\t\tdraggedBlockNames,\n\t\t\t\t\ttargetBlockName\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * Update the body class to reflect if drop target is valid.\n\t\t\t * This has to be done on the document body because the draggable\n\t\t\t * chip is rendered outside of the editor iframe.\n\t\t\t */\n\t\t\tif ( ! dropTargetValid && ! visibleInserter ) {\n\t\t\t\twindow?.document?.body?.classList?.add(\n\t\t\t\t\t'block-draggable-invalid-drag-token'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\twindow?.document?.body?.classList?.remove(\n\t\t\t\t\t'block-draggable-invalid-drag-token'\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\tconst throttledOnDragOver = throttle( onDragOver, 200 );\n\n\t\teditorRoot.addEventListener( 'dragover', throttledOnDragOver );\n\n\t\treturn () => {\n\t\t\teditorRoot.removeEventListener( 'dragover', throttledOnDragOver );\n\t\t};\n\t}, [\n\t\tclientIds,\n\t\teditorRoot,\n\t\tfadeWhenDisabled,\n\t\tgetAllowedBlocks,\n\t\tgetBlockNamesByClientId,\n\t\tgetBlockRootClientId,\n\t\tgetBlockType,\n\t\tvisibleInserter,\n\t] );\n\n\tif ( ! isDraggable ) {\n\t\treturn children( { draggable: false } );\n\t}\n\n\tconst transferData = {\n\t\ttype: 'block',\n\t\tsrcClientIds: clientIds,\n\t\tsrcRootClientId,\n\t};\n\n\treturn (\n\t\t<Draggable\n\t\t\tappendToOwnerDocument={ appendToOwnerDocument }\n\t\t\tcloneClassname={ cloneClassname }\n\t\t\t__experimentalTransferDataType=\"wp-blocks\"\n\t\t\ttransferData={ transferData }\n\t\t\tonDragStart={ ( event ) => {\n\t\t\t\t// Defer hiding the dragged source element to the next\n\t\t\t\t// frame to enable dragging.\n\t\t\t\twindow.requestAnimationFrame( () => {\n\t\t\t\t\tstartDraggingBlocks( clientIds );\n\t\t\t\t\tisDraggingRef.current = true;\n\n\t\t\t\t\tstartScrolling( event );\n\n\t\t\t\t\tif ( onDragStart ) {\n\t\t\t\t\t\tonDragStart();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} }\n\t\t\tonDragOver={ scrollOnDragOver }\n\t\t\tonDragEnd={ () => {\n\t\t\t\tstopDraggingBlocks();\n\t\t\t\tisDraggingRef.current = false;\n\n\t\t\t\tstopScrolling();\n\n\t\t\t\tif ( onDragEnd ) {\n\t\t\t\t\tonDragEnd();\n\t\t\t\t}\n\t\t\t} }\n\t\t\t__experimentalDragComponent={\n\t\t\t\t// Check against `undefined` so that `null` can be used to disable\n\t\t\t\t// the default drag component.\n\t\t\t\tdragComponent !== undefined ? (\n\t\t\t\t\tdragComponent\n\t\t\t\t) : (\n\t\t\t\t\t<BlockDraggableChip\n\t\t\t\t\t\tcount={ clientIds.length }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tfadeWhenDisabled\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t}\n\t\t\telementId={ elementId }\n\t\t>\n\t\t\t{ ( { onDraggableStart, onDraggableEnd } ) => {\n\t\t\t\treturn children( {\n\t\t\t\t\tdraggable: true,\n\t\t\t\t\tonDragStart: onDraggableStart,\n\t\t\t\t\tonDragEnd: onDraggableEnd,\n\t\t\t\t} );\n\t\t\t} }\n\t\t</Draggable>\n\t);\n};\n\nexport default BlockDraggable;\n","/**\n * WordPress dependencies\n */\nimport { getScrollContainer } from '@wordpress/dom';\nimport { useCallback, useEffect, useRef } from '@wordpress/element';\n\nconst SCROLL_INACTIVE_DISTANCE_PX = 50;\nconst SCROLL_INTERVAL_MS = 25;\nconst PIXELS_PER_SECOND_PER_PERCENTAGE = 1000;\nconst VELOCITY_MULTIPLIER =\n\tPIXELS_PER_SECOND_PER_PERCENTAGE * ( SCROLL_INTERVAL_MS / 1000 );\n\n/**\n * React hook that scrolls the scroll container when a block is being dragged.\n *\n * @return {Function[]} `startScrolling`, `scrollOnDragOver`, `stopScrolling`\n *                      functions to be called in `onDragStart`, `onDragOver`\n *                      and `onDragEnd` events respectively.\n */\nexport default function useScrollWhenDragging() {\n\tconst dragStartYRef = useRef( null );\n\tconst velocityYRef = useRef( null );\n\tconst scrollParentYRef = useRef( null );\n\tconst scrollEditorIntervalRef = useRef( null );\n\n\t// Clear interval when unmounting.\n\tuseEffect(\n\t\t() => () => {\n\t\t\tif ( scrollEditorIntervalRef.current ) {\n\t\t\t\tclearInterval( scrollEditorIntervalRef.current );\n\t\t\t\tscrollEditorIntervalRef.current = null;\n\t\t\t}\n\t\t},\n\t\t[]\n\t);\n\n\tconst startScrolling = useCallback( ( event ) => {\n\t\tdragStartYRef.current = event.clientY;\n\n\t\t// Find nearest parent(s) to scroll.\n\t\tscrollParentYRef.current = getScrollContainer( event.target );\n\n\t\tscrollEditorIntervalRef.current = setInterval( () => {\n\t\t\tif ( scrollParentYRef.current && velocityYRef.current ) {\n\t\t\t\tconst newTop =\n\t\t\t\t\tscrollParentYRef.current.scrollTop + velocityYRef.current;\n\n\t\t\t\t// Setting `behavior: 'smooth'` as a scroll property seems to hurt performance.\n\t\t\t\t// Better to use a small scroll interval.\n\t\t\t\tscrollParentYRef.current.scroll( {\n\t\t\t\t\ttop: newTop,\n\t\t\t\t} );\n\t\t\t}\n\t\t}, SCROLL_INTERVAL_MS );\n\t}, [] );\n\n\tconst scrollOnDragOver = useCallback( ( event ) => {\n\t\tif ( ! scrollParentYRef.current ) {\n\t\t\treturn;\n\t\t}\n\t\tconst scrollParentHeight = scrollParentYRef.current.offsetHeight;\n\t\tconst offsetDragStartPosition =\n\t\t\tdragStartYRef.current - scrollParentYRef.current.offsetTop;\n\t\tconst offsetDragPosition =\n\t\t\tevent.clientY - scrollParentYRef.current.offsetTop;\n\n\t\tif ( event.clientY > offsetDragStartPosition ) {\n\t\t\t// User is dragging downwards.\n\t\t\tconst moveableDistance = Math.max(\n\t\t\t\tscrollParentHeight -\n\t\t\t\t\toffsetDragStartPosition -\n\t\t\t\t\tSCROLL_INACTIVE_DISTANCE_PX,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst dragDistance = Math.max(\n\t\t\t\toffsetDragPosition -\n\t\t\t\t\toffsetDragStartPosition -\n\t\t\t\t\tSCROLL_INACTIVE_DISTANCE_PX,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst distancePercentage =\n\t\t\t\tmoveableDistance === 0 || dragDistance === 0\n\t\t\t\t\t? 0\n\t\t\t\t\t: dragDistance / moveableDistance;\n\t\t\tvelocityYRef.current = VELOCITY_MULTIPLIER * distancePercentage;\n\t\t} else if ( event.clientY < offsetDragStartPosition ) {\n\t\t\t// User is dragging upwards.\n\t\t\tconst moveableDistance = Math.max(\n\t\t\t\toffsetDragStartPosition - SCROLL_INACTIVE_DISTANCE_PX,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst dragDistance = Math.max(\n\t\t\t\toffsetDragStartPosition -\n\t\t\t\t\toffsetDragPosition -\n\t\t\t\t\tSCROLL_INACTIVE_DISTANCE_PX,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst distancePercentage =\n\t\t\t\tmoveableDistance === 0 || dragDistance === 0\n\t\t\t\t\t? 0\n\t\t\t\t\t: dragDistance / moveableDistance;\n\t\t\tvelocityYRef.current = -VELOCITY_MULTIPLIER * distancePercentage;\n\t\t} else {\n\t\t\tvelocityYRef.current = 0;\n\t\t}\n\t}, [] );\n\n\tconst stopScrolling = () => {\n\t\tdragStartYRef.current = null;\n\t\tscrollParentYRef.current = null;\n\n\t\tif ( scrollEditorIntervalRef.current ) {\n\t\t\tclearInterval( scrollEditorIntervalRef.current );\n\t\t\tscrollEditorIntervalRef.current = null;\n\t\t}\n\t};\n\n\treturn [ startScrolling, scrollOnDragOver, stopScrolling ];\n}\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf, isRTL } from '@wordpress/i18n';\n\nconst getMovementDirection = ( moveDirection, orientation ) => {\n\tif ( moveDirection === 'up' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? 'right' : 'left';\n\t\t}\n\t\treturn 'up';\n\t} else if ( moveDirection === 'down' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? 'left' : 'right';\n\t\t}\n\t\treturn 'down';\n\t}\n\treturn null;\n};\n\n/**\n * Return a label for the block movement controls depending on block position.\n *\n * @param {number}  selectedCount Number of blocks selected.\n * @param {string}  type          Block type - in the case of a single block, should\n *                                define its 'type'. I.e. 'Text', 'Heading', 'Image' etc.\n * @param {number}  firstIndex    The index (position - 1) of the first block selected.\n * @param {boolean} isFirst       This is the first block.\n * @param {boolean} isLast        This is the last block.\n * @param {number}  dir           Direction of movement (> 0 is considered to be going\n *                                down, < 0 is up).\n * @param {string}  orientation   The orientation of the block movers, vertical or\n *                                horizontal.\n *\n * @return {string | undefined} Label for the block movement controls.\n */\nexport function getBlockMoverDescription(\n\tselectedCount,\n\ttype,\n\tfirstIndex,\n\tisFirst,\n\tisLast,\n\tdir,\n\torientation\n) {\n\tconst position = firstIndex + 1;\n\n\tif ( selectedCount > 1 ) {\n\t\treturn getMultiBlockMoverDescription(\n\t\t\tselectedCount,\n\t\t\tfirstIndex,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tdir,\n\t\t\torientation\n\t\t);\n\t}\n\n\tif ( isFirst && isLast ) {\n\t\treturn sprintf(\n\t\t\t// translators: %s: Type of block (i.e. Text, Image etc)\n\t\t\t__( 'Block %s is the only block, and cannot be moved' ),\n\t\t\ttype\n\t\t);\n\t}\n\n\tif ( dir > 0 && ! isLast ) {\n\t\t// Moving down.\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\n\n\t\tif ( movementDirection === 'down' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__(\n\t\t\t\t\t'Move %1$s block from position %2$d down to position %3$d'\n\t\t\t\t),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition + 1\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__(\n\t\t\t\t\t'Move %1$s block from position %2$d left to position %3$d'\n\t\t\t\t),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition + 1\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__(\n\t\t\t\t\t'Move %1$s block from position %2$d right to position %3$d'\n\t\t\t\t),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition + 1\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir > 0 && isLast ) {\n\t\t// Moving down, and is the last item.\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\n\n\t\tif ( movementDirection === 'down' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the end of the content and cant be moved down'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the end of the content and cant be moved left'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the end of the content and cant be moved right'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir < 0 && ! isFirst ) {\n\t\t// Moving up.\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\n\n\t\tif ( movementDirection === 'up' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__( 'Move %1$s block from position %2$d up to position %3$d' ),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition - 1\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__(\n\t\t\t\t\t'Move %1$s block from position %2$d left to position %3$d'\n\t\t\t\t),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition - 1\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__(\n\t\t\t\t\t'Move %1$s block from position %2$d right to position %3$d'\n\t\t\t\t),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition - 1\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir < 0 && isFirst ) {\n\t\t// Moving up, and is the first item.\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\n\n\t\tif ( movementDirection === 'up' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the beginning of the content and cant be moved up'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the beginning of the content and cant be moved left'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the beginning of the content and cant be moved right'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\t}\n}\n\n/**\n * Return a label for the block movement controls depending on block position.\n *\n * @param {number}  selectedCount Number of blocks selected.\n * @param {number}  firstIndex    The index (position - 1) of the first block selected.\n * @param {boolean} isFirst       This is the first block.\n * @param {boolean} isLast        This is the last block.\n * @param {number}  dir           Direction of movement (> 0 is considered to be going\n *                                down, < 0 is up).\n * @param {string}  orientation   The orientation of the block movers, vertical or\n *                                horizontal.\n *\n * @return {string | undefined} Label for the block movement controls.\n */\nexport function getMultiBlockMoverDescription(\n\tselectedCount,\n\tfirstIndex,\n\tisFirst,\n\tisLast,\n\tdir,\n\torientation\n) {\n\tconst position = firstIndex + 1;\n\n\tif ( isFirst && isLast ) {\n\t\t// All blocks are selected\n\t\treturn __( 'All blocks are selected, and cannot be moved' );\n\t}\n\n\tif ( dir > 0 && ! isLast ) {\n\t\t// moving down\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\n\n\t\tif ( movementDirection === 'down' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d down by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d left by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d right by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir > 0 && isLast ) {\n\t\t// moving down, and the selected blocks are the last item\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\n\n\t\tif ( movementDirection === 'down' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved down as they are already at the bottom'\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved left as they are already are at the leftmost position'\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved right as they are already are at the rightmost position'\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir < 0 && ! isFirst ) {\n\t\t// moving up\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\n\n\t\tif ( movementDirection === 'up' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d up by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d left by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d right by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir < 0 && isFirst ) {\n\t\t// moving up, and the selected blocks are the first item\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\n\n\t\tif ( movementDirection === 'up' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved up as they are already at the top'\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved left as they are already are at the leftmost position'\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved right as they are already are at the rightmost position'\n\t\t\t);\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { getBlockType } from '@wordpress/blocks';\nimport { Button, VisuallyHidden } from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\nimport { __, isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport {\n\tchevronLeft,\n\tchevronRight,\n\tchevronUp,\n\tchevronDown,\n} from '@wordpress/icons';\nimport { getBlockMoverDescription } from './mover-description';\nimport { store as blockEditorStore } from '../../store';\n\nconst getArrowIcon = ( direction, orientation ) => {\n\tif ( direction === 'up' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? chevronRight : chevronLeft;\n\t\t}\n\t\treturn chevronUp;\n\t} else if ( direction === 'down' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? chevronLeft : chevronRight;\n\t\t}\n\t\treturn chevronDown;\n\t}\n\treturn null;\n};\n\nconst getMovementDirectionLabel = ( moveDirection, orientation ) => {\n\tif ( moveDirection === 'up' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? __( 'Move right' ) : __( 'Move left' );\n\t\t}\n\t\treturn __( 'Move up' );\n\t} else if ( moveDirection === 'down' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? __( 'Move left' ) : __( 'Move right' );\n\t\t}\n\t\treturn __( 'Move down' );\n\t}\n\treturn null;\n};\n\nconst BlockMoverButton = forwardRef(\n\t(\n\t\t{ clientIds, direction, orientation: moverOrientation, ...props },\n\t\tref\n\t) => {\n\t\tconst instanceId = useInstanceId( BlockMoverButton );\n\t\tconst normalizedClientIds = Array.isArray( clientIds )\n\t\t\t? clientIds\n\t\t\t: [ clientIds ];\n\t\tconst blocksCount = normalizedClientIds.length;\n\t\tconst { disabled } = props;\n\n\t\tconst {\n\t\t\tblockType,\n\t\t\tisDisabled,\n\t\t\trootClientId,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tfirstIndex,\n\t\t\torientation = 'vertical',\n\t\t} = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\tgetBlockIndex,\n\t\t\t\t\tgetBlockRootClientId,\n\t\t\t\t\tgetBlockOrder,\n\t\t\t\t\tgetBlock,\n\t\t\t\t\tgetBlockListSettings,\n\t\t\t\t} = select( blockEditorStore );\n\t\t\t\tconst firstClientId = normalizedClientIds[ 0 ];\n\t\t\t\tconst blockRootClientId = getBlockRootClientId( firstClientId );\n\t\t\t\tconst firstBlockIndex = getBlockIndex( firstClientId );\n\t\t\t\tconst lastBlockIndex = getBlockIndex(\n\t\t\t\t\tnormalizedClientIds[ normalizedClientIds.length - 1 ]\n\t\t\t\t);\n\t\t\t\tconst blockOrder = getBlockOrder( blockRootClientId );\n\t\t\t\tconst block = getBlock( firstClientId );\n\t\t\t\tconst isFirstBlock = firstBlockIndex === 0;\n\t\t\t\tconst isLastBlock = lastBlockIndex === blockOrder.length - 1;\n\t\t\t\tconst { orientation: blockListOrientation } =\n\t\t\t\t\tgetBlockListSettings( blockRootClientId ) || {};\n\n\t\t\t\treturn {\n\t\t\t\t\tblockType: block ? getBlockType( block.name ) : null,\n\t\t\t\t\tisDisabled:\n\t\t\t\t\t\tdisabled ||\n\t\t\t\t\t\t( direction === 'up' ? isFirstBlock : isLastBlock ),\n\t\t\t\t\trootClientId: blockRootClientId,\n\t\t\t\t\tfirstIndex: firstBlockIndex,\n\t\t\t\t\tisFirst: isFirstBlock,\n\t\t\t\t\tisLast: isLastBlock,\n\t\t\t\t\torientation: moverOrientation || blockListOrientation,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ clientIds, direction ]\n\t\t);\n\n\t\tconst { moveBlocksDown, moveBlocksUp } =\n\t\t\tuseDispatch( blockEditorStore );\n\t\tconst moverFunction =\n\t\t\tdirection === 'up' ? moveBlocksUp : moveBlocksDown;\n\n\t\tconst onClick = ( event ) => {\n\t\t\tmoverFunction( clientIds, rootClientId );\n\t\t\tif ( props.onClick ) {\n\t\t\t\tprops.onClick( event );\n\t\t\t}\n\t\t};\n\n\t\tconst descriptionId = `block-editor-block-mover-button__description-${ instanceId }`;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tref={ ref }\n\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t'block-editor-block-mover-button',\n\t\t\t\t\t\t`is-${ direction }-button`\n\t\t\t\t\t) }\n\t\t\t\t\ticon={ getArrowIcon( direction, orientation ) }\n\t\t\t\t\tlabel={ getMovementDirectionLabel(\n\t\t\t\t\t\tdirection,\n\t\t\t\t\t\torientation\n\t\t\t\t\t) }\n\t\t\t\t\taria-describedby={ descriptionId }\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tonClick={ isDisabled ? null : onClick }\n\t\t\t\t\tdisabled={ isDisabled }\n\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t/>\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ getBlockMoverDescription(\n\t\t\t\t\t\tblocksCount,\n\t\t\t\t\t\tblockType && blockType.title,\n\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\tisFirst,\n\t\t\t\t\t\tisLast,\n\t\t\t\t\t\tdirection === 'up' ? -1 : 1,\n\t\t\t\t\t\torientation\n\t\t\t\t\t) }\n\t\t\t\t</VisuallyHidden>\n\t\t\t</>\n\t\t);\n\t}\n);\n\nexport const BlockMoverUpButton = forwardRef( ( props, ref ) => {\n\treturn <BlockMoverButton direction=\"up\" ref={ ref } { ...props } />;\n} );\n\nexport const BlockMoverDownButton = forwardRef( ( props, ref ) => {\n\treturn <BlockMoverButton direction=\"down\" ref={ ref } { ...props } />;\n} );\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\n\nimport { dragHandle } from '@wordpress/icons';\nimport { ToolbarGroup, ToolbarItem, Button } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockDraggable from '../block-draggable';\nimport { BlockMoverUpButton, BlockMoverDownButton } from './button';\nimport { store as blockEditorStore } from '../../store';\n\nfunction BlockMover( {\n\tclientIds,\n\thideDragHandle,\n\tisBlockMoverUpButtonDisabled,\n\tisBlockMoverDownButtonDisabled,\n} ) {\n\tconst {\n\t\tcanMove,\n\t\trootClientId,\n\t\tisFirst,\n\t\tisLast,\n\t\torientation,\n\t\tisManualGrid,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockListSettings,\n\t\t\t\tcanMoveBlocks,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockAttributes,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst normalizedClientIds = Array.isArray( clientIds )\n\t\t\t\t? clientIds\n\t\t\t\t: [ clientIds ];\n\t\t\tconst firstClientId = normalizedClientIds[ 0 ];\n\t\t\tconst _rootClientId = getBlockRootClientId( firstClientId );\n\t\t\tconst firstIndex = getBlockIndex( firstClientId );\n\t\t\tconst lastIndex = getBlockIndex(\n\t\t\t\tnormalizedClientIds[ normalizedClientIds.length - 1 ]\n\t\t\t);\n\t\t\tconst blockOrder = getBlockOrder( _rootClientId );\n\t\t\tconst { layout = {} } = getBlockAttributes( _rootClientId ) ?? {};\n\n\t\t\treturn {\n\t\t\t\tcanMove: canMoveBlocks( clientIds ),\n\t\t\t\trootClientId: _rootClientId,\n\t\t\t\tisFirst: firstIndex === 0,\n\t\t\t\tisLast: lastIndex === blockOrder.length - 1,\n\t\t\t\torientation: getBlockListSettings( _rootClientId )?.orientation,\n\t\t\t\tisManualGrid:\n\t\t\t\t\tlayout.type === 'grid' &&\n\t\t\t\t\tlayout.isManualPlacement &&\n\t\t\t\t\twindow.__experimentalEnableGridInteractivity,\n\t\t\t};\n\t\t},\n\t\t[ clientIds ]\n\t);\n\n\tif (\n\t\t! canMove ||\n\t\t( isFirst && isLast && ! rootClientId ) ||\n\t\t( hideDragHandle && isManualGrid )\n\t) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ToolbarGroup\n\t\t\tclassName={ clsx( 'block-editor-block-mover', {\n\t\t\t\t'is-horizontal': orientation === 'horizontal',\n\t\t\t} ) }\n\t\t>\n\t\t\t{ ! hideDragHandle && (\n\t\t\t\t<BlockDraggable clientIds={ clientIds } fadeWhenDisabled>\n\t\t\t\t\t{ ( draggableProps ) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\ticon={ dragHandle }\n\t\t\t\t\t\t\tclassName=\"block-editor-block-mover__drag-handle\"\n\t\t\t\t\t\t\tlabel={ __( 'Drag' ) }\n\t\t\t\t\t\t\t// Should not be able to tab to drag handle as this\n\t\t\t\t\t\t\t// button can only be used with a pointer device.\n\t\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\t\t{ ...draggableProps }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</BlockDraggable>\n\t\t\t) }\n\t\t\t{ ! isManualGrid && (\n\t\t\t\t<div className=\"block-editor-block-mover__move-button-container\">\n\t\t\t\t\t<ToolbarItem>\n\t\t\t\t\t\t{ ( itemProps ) => (\n\t\t\t\t\t\t\t<BlockMoverUpButton\n\t\t\t\t\t\t\t\tdisabled={ isBlockMoverUpButtonDisabled }\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t{ ...itemProps }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ToolbarItem>\n\t\t\t\t\t<ToolbarItem>\n\t\t\t\t\t\t{ ( itemProps ) => (\n\t\t\t\t\t\t\t<BlockMoverDownButton\n\t\t\t\t\t\t\t\tdisabled={ isBlockMoverDownButtonDisabled }\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t{ ...itemProps }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ToolbarItem>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</ToolbarGroup>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-mover/README.md\n */\nexport default BlockMover;\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useState, useRef, useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst { clearTimeout, setTimeout } = window;\nconst DEBOUNCE_TIMEOUT = 200;\n\n/**\n * Hook that creates debounced callbacks when the node is hovered or focused.\n *\n * @param {Object}  props                       Component props.\n * @param {Object}  props.ref                   Element reference.\n * @param {boolean} props.isFocused             Whether the component has current focus.\n * @param {number}  props.highlightParent       Whether to highlight the parent block. It defaults in highlighting the selected block.\n * @param {number}  [props.debounceTimeout=250] Debounce timeout in milliseconds.\n */\nfunction useDebouncedShowGestures( {\n\tref,\n\tisFocused,\n\thighlightParent,\n\tdebounceTimeout = DEBOUNCE_TIMEOUT,\n} ) {\n\tconst { getSelectedBlockClientId, getBlockRootClientId } =\n\t\tuseSelect( blockEditorStore );\n\tconst { toggleBlockHighlight } = useDispatch( blockEditorStore );\n\tconst timeoutRef = useRef();\n\tconst isDistractionFree = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getSettings().isDistractionFree,\n\t\t[]\n\t);\n\tconst handleOnChange = ( nextIsFocused ) => {\n\t\tif ( nextIsFocused && isDistractionFree ) {\n\t\t\treturn;\n\t\t}\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst clientId = highlightParent\n\t\t\t? getBlockRootClientId( selectedBlockClientId )\n\t\t\t: selectedBlockClientId;\n\t\ttoggleBlockHighlight( clientId, nextIsFocused );\n\t};\n\n\tconst getIsHovered = () => {\n\t\treturn ref?.current && ref.current.matches( ':hover' );\n\t};\n\n\tconst shouldHideGestures = () => {\n\t\tconst isHovered = getIsHovered();\n\t\treturn ! isFocused && ! isHovered;\n\t};\n\n\tconst clearTimeoutRef = () => {\n\t\tconst timeout = timeoutRef.current;\n\n\t\tif ( timeout && clearTimeout ) {\n\t\t\tclearTimeout( timeout );\n\t\t}\n\t};\n\n\tconst debouncedShowGestures = ( event ) => {\n\t\tif ( event ) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\n\t\tclearTimeoutRef();\n\t\thandleOnChange( true );\n\t};\n\n\tconst debouncedHideGestures = ( event ) => {\n\t\tif ( event ) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\n\t\tclearTimeoutRef();\n\n\t\ttimeoutRef.current = setTimeout( () => {\n\t\t\tif ( shouldHideGestures() ) {\n\t\t\t\thandleOnChange( false );\n\t\t\t}\n\t\t}, debounceTimeout );\n\t};\n\n\tuseEffect(\n\t\t() => () => {\n\t\t\t/**\n\t\t\t * We need to call the change handler with `isFocused`\n\t\t\t * set to false on unmount because we also clear the\n\t\t\t * timeout that would handle that.\n\t\t\t */\n\t\t\thandleOnChange( false );\n\t\t\tclearTimeoutRef();\n\t\t},\n\t\t[]\n\t);\n\n\treturn {\n\t\tdebouncedShowGestures,\n\t\tdebouncedHideGestures,\n\t};\n}\n\n/**\n * Hook that provides gesture events for DOM elements\n * that interact with the isFocused state.\n *\n * @param {Object} props                         Component props.\n * @param {Object} props.ref                     Element reference.\n * @param {number} [props.highlightParent=false] Whether to highlight the parent block. It defaults to highlighting the selected block.\n * @param {number} [props.debounceTimeout=250]   Debounce timeout in milliseconds.\n */\nexport function useShowHoveredOrFocusedGestures( {\n\tref,\n\thighlightParent = false,\n\tdebounceTimeout = DEBOUNCE_TIMEOUT,\n} ) {\n\tconst [ isFocused, setIsFocused ] = useState( false );\n\tconst { debouncedShowGestures, debouncedHideGestures } =\n\t\tuseDebouncedShowGestures( {\n\t\t\tref,\n\t\t\tdebounceTimeout,\n\t\t\tisFocused,\n\t\t\thighlightParent,\n\t\t} );\n\n\tconst registerRef = useRef( false );\n\n\tconst isFocusedWithin = () => {\n\t\treturn (\n\t\t\tref?.current &&\n\t\t\tref.current.contains( ref.current.ownerDocument.activeElement )\n\t\t);\n\t};\n\n\tuseEffect( () => {\n\t\tconst node = ref.current;\n\n\t\tconst handleOnFocus = () => {\n\t\t\tif ( isFocusedWithin() ) {\n\t\t\t\tsetIsFocused( true );\n\t\t\t\tdebouncedShowGestures();\n\t\t\t}\n\t\t};\n\n\t\tconst handleOnBlur = () => {\n\t\t\tif ( ! isFocusedWithin() ) {\n\t\t\t\tsetIsFocused( false );\n\t\t\t\tdebouncedHideGestures();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Events are added via DOM events (vs. React synthetic events),\n\t\t * as the child React components swallow mouse events.\n\t\t */\n\t\tif ( node && ! registerRef.current ) {\n\t\t\tnode.addEventListener( 'focus', handleOnFocus, true );\n\t\t\tnode.addEventListener( 'blur', handleOnBlur, true );\n\t\t\tregisterRef.current = true;\n\t\t}\n\n\t\treturn () => {\n\t\t\tif ( node ) {\n\t\t\t\tnode.removeEventListener( 'focus', handleOnFocus );\n\t\t\t\tnode.removeEventListener( 'blur', handleOnBlur );\n\t\t\t}\n\t\t};\n\t}, [\n\t\tref,\n\t\tregisterRef,\n\t\tsetIsFocused,\n\t\tdebouncedShowGestures,\n\t\tdebouncedHideGestures,\n\t] );\n\n\treturn {\n\t\tonMouseMove: debouncedShowGestures,\n\t\tonMouseLeave: debouncedHideGestures,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { ToolbarButton } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport BlockIcon from '../block-icon';\nimport { useShowHoveredOrFocusedGestures } from '../block-toolbar/utils';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\n/**\n * Block parent selector component, displaying the hierarchy of the\n * current block selection as a single icon to \"go up\" a level.\n *\n * @return {Component} Parent block selector.\n */\nexport default function BlockParentSelector() {\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\tconst { parentClientId } = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockParents,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetParentSectionBlock,\n\t\t} = unlock( select( blockEditorStore ) );\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst parentSection = getParentSectionBlock( selectedBlockClientId );\n\t\tconst parents = getBlockParents( selectedBlockClientId );\n\t\tconst _parentClientId = parentSection ?? parents[ parents.length - 1 ];\n\t\treturn {\n\t\t\tparentClientId: _parentClientId,\n\t\t};\n\t}, [] );\n\tconst blockInformation = useBlockDisplayInformation( parentClientId );\n\n\t// Allows highlighting the parent block outline when focusing or hovering\n\t// the parent block selector within the child.\n\tconst nodeRef = useRef();\n\tconst showHoveredOrFocusedGestures = useShowHoveredOrFocusedGestures( {\n\t\tref: nodeRef,\n\t\thighlightParent: true,\n\t} );\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block-editor-block-parent-selector\"\n\t\t\tkey={ parentClientId }\n\t\t\tref={ nodeRef }\n\t\t\t{ ...showHoveredOrFocusedGestures }\n\t\t>\n\t\t\t<ToolbarButton\n\t\t\t\tclassName=\"block-editor-block-parent-selector__button\"\n\t\t\t\tonClick={ () => selectBlock( parentClientId ) }\n\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t/* translators: %s: Name of the block's parent. */\n\t\t\t\t\t__( 'Select parent block: %s' ),\n\t\t\t\t\tblockInformation?.title\n\t\t\t\t) }\n\t\t\t\tshowTooltip\n\t\t\t\ticon={ <BlockIcon icon={ blockInformation?.icon } /> }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst copy = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z\"\n\t\t/>\n\t</SVG>\n);\n\nexport default copy;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Popover } from '@wordpress/components';\nimport { useViewportMatch } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\n\nexport default function PreviewBlockPopover( { blocks } ) {\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\n\tif ( isMobile ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"block-editor-block-switcher__popover-preview-container\">\n\t\t\t<Popover\n\t\t\t\tclassName=\"block-editor-block-switcher__popover-preview\"\n\t\t\t\tplacement=\"right-start\"\n\t\t\t\tfocusOnMount={ false }\n\t\t\t\toffset={ 16 }\n\t\t\t>\n\t\t\t\t<div className=\"block-editor-block-switcher__preview\">\n\t\t\t\t\t<div className=\"block-editor-block-switcher__preview-title\">\n\t\t\t\t\t\t{ __( 'Preview' ) }\n\t\t\t\t\t</div>\n\t\t\t\t\t{ /* 600px is the value of $break-small in base-styles/_breakpoints.scss.\n\t\t\t\t\t\tWe set the viewport width to 601px to make sure that the media-text \n\t\t\t\t\t\tblock which uses this breakpoint has the correct padding. */ }\n\t\t\t\t\t<BlockPreview viewportWidth={ 601 } blocks={ blocks } />\n\t\t\t\t</div>\n\t\t\t</Popover>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { MenuItem } from '@wordpress/components';\nimport {\n\tgetBlockMenuDefaultClassName,\n\tcloneBlock,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { useState, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockIcon from '../block-icon';\nimport PreviewBlockPopover from './preview-block-popover';\n\nconst EMPTY_OBJECT = {};\n\nexport function useBlockVariationTransforms( { clientIds, blocks } ) {\n\tconst { activeBlockVariation, blockVariationTransformations } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockAttributes, canRemoveBlocks } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst { getActiveBlockVariation, getBlockVariations } =\n\t\t\t\tselect( blocksStore );\n\n\t\t\tconst canRemove = canRemoveBlocks( clientIds );\n\t\t\t// Only handle single selected blocks for now.\n\t\t\tif ( blocks.length !== 1 || ! canRemove ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\t\t\tconst [ firstBlock ] = blocks;\n\t\t\treturn {\n\t\t\t\tblockVariationTransformations: getBlockVariations(\n\t\t\t\t\tfirstBlock.name,\n\t\t\t\t\t'transform'\n\t\t\t\t),\n\t\t\t\tactiveBlockVariation: getActiveBlockVariation(\n\t\t\t\t\tfirstBlock.name,\n\t\t\t\t\tgetBlockAttributes( firstBlock.clientId )\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientIds, blocks ]\n\t);\n\tconst transformations = useMemo( () => {\n\t\treturn blockVariationTransformations?.filter(\n\t\t\t( { name } ) => name !== activeBlockVariation?.name\n\t\t);\n\t}, [ blockVariationTransformations, activeBlockVariation ] );\n\treturn transformations;\n}\n\nconst BlockVariationTransformations = ( {\n\ttransformations,\n\tonSelect,\n\tblocks,\n} ) => {\n\tconst [ hoveredTransformItemName, setHoveredTransformItemName ] =\n\t\tuseState();\n\treturn (\n\t\t<>\n\t\t\t{ hoveredTransformItemName && (\n\t\t\t\t<PreviewBlockPopover\n\t\t\t\t\tblocks={ cloneBlock(\n\t\t\t\t\t\tblocks[ 0 ],\n\t\t\t\t\t\ttransformations.find(\n\t\t\t\t\t\t\t( { name } ) => name === hoveredTransformItemName\n\t\t\t\t\t\t).attributes\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ transformations?.map( ( item ) => (\n\t\t\t\t<BlockVariationTransformationItem\n\t\t\t\t\tkey={ item.name }\n\t\t\t\t\titem={ item }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</>\n\t);\n};\n\nfunction BlockVariationTransformationItem( {\n\titem,\n\tonSelect,\n\tsetHoveredTransformItemName,\n} ) {\n\tconst { name, icon, title } = item;\n\treturn (\n\t\t<MenuItem\n\t\t\tclassName={ getBlockMenuDefaultClassName( name ) }\n\t\t\tonClick={ ( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tonSelect( name );\n\t\t\t} }\n\t\t\tonMouseLeave={ () => setHoveredTransformItemName( null ) }\n\t\t\tonMouseEnter={ () => setHoveredTransformItemName( name ) }\n\t\t>\n\t\t\t<BlockIcon icon={ icon } showColors />\n\t\t\t{ title }\n\t\t</MenuItem>\n\t);\n}\n\nexport default BlockVariationTransformations;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuGroup, MenuItem } from '@wordpress/components';\nimport {\n\tgetBlockMenuDefaultClassName,\n\tswitchToBlockType,\n} from '@wordpress/blocks';\nimport { useState, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport PreviewBlockPopover from './preview-block-popover';\nimport BlockVariationTransformations from './block-variation-transformations';\n\n/**\n * Helper hook to group transformations to display them in a specific order in the UI.\n * For now we group only priority content driven transformations(ex. paragraph -> heading).\n *\n * Later on we could also group 'layout' transformations(ex. paragraph -> group) and\n * display them in different sections.\n *\n * @param {Object[]} possibleBlockTransformations The available block transformations.\n * @return {Record<string, Object[]>} The grouped block transformations.\n */\nfunction useGroupedTransforms( possibleBlockTransformations ) {\n\tconst priorityContentTransformationBlocks = {\n\t\t'core/paragraph': 1,\n\t\t'core/heading': 2,\n\t\t'core/list': 3,\n\t\t'core/quote': 4,\n\t};\n\tconst transformations = useMemo( () => {\n\t\tconst priorityTextTransformsNames = Object.keys(\n\t\t\tpriorityContentTransformationBlocks\n\t\t);\n\t\tconst groupedPossibleTransforms = possibleBlockTransformations.reduce(\n\t\t\t( accumulator, item ) => {\n\t\t\t\tconst { name } = item;\n\t\t\t\tif ( priorityTextTransformsNames.includes( name ) ) {\n\t\t\t\t\taccumulator.priorityTextTransformations.push( item );\n\t\t\t\t} else {\n\t\t\t\t\taccumulator.restTransformations.push( item );\n\t\t\t\t}\n\t\t\t\treturn accumulator;\n\t\t\t},\n\t\t\t{ priorityTextTransformations: [], restTransformations: [] }\n\t\t);\n\t\t/**\n\t\t * If there is only one priority text transformation and it's a Quote,\n\t\t * is should move to the rest transformations. This is because Quote can\n\t\t * be a container for any block type, so in multi-block selection it will\n\t\t * always be suggested, even for non-text blocks.\n\t\t */\n\t\tif (\n\t\t\tgroupedPossibleTransforms.priorityTextTransformations.length ===\n\t\t\t\t1 &&\n\t\t\tgroupedPossibleTransforms.priorityTextTransformations[ 0 ].name ===\n\t\t\t\t'core/quote'\n\t\t) {\n\t\t\tconst singleQuote =\n\t\t\t\tgroupedPossibleTransforms.priorityTextTransformations.pop();\n\t\t\tgroupedPossibleTransforms.restTransformations.push( singleQuote );\n\t\t}\n\t\treturn groupedPossibleTransforms;\n\t}, [ possibleBlockTransformations ] );\n\n\t// Order the priority text transformations.\n\ttransformations.priorityTextTransformations.sort(\n\t\t( { name: currentName }, { name: nextName } ) => {\n\t\t\treturn priorityContentTransformationBlocks[ currentName ] <\n\t\t\t\tpriorityContentTransformationBlocks[ nextName ]\n\t\t\t\t? -1\n\t\t\t\t: 1;\n\t\t}\n\t);\n\treturn transformations;\n}\n\nconst BlockTransformationsMenu = ( {\n\tclassName,\n\tpossibleBlockTransformations,\n\tpossibleBlockVariationTransformations,\n\tonSelect,\n\tonSelectVariation,\n\tblocks,\n} ) => {\n\tconst [ hoveredTransformItemName, setHoveredTransformItemName ] =\n\t\tuseState();\n\n\tconst { priorityTextTransformations, restTransformations } =\n\t\tuseGroupedTransforms( possibleBlockTransformations );\n\t// We have to check if both content transformations(priority and rest) are set\n\t// in order to create a separate MenuGroup for them.\n\tconst hasBothContentTransformations =\n\t\tpriorityTextTransformations.length && restTransformations.length;\n\tconst restTransformItems = !! restTransformations.length && (\n\t\t<RestTransformationItems\n\t\t\trestTransformations={ restTransformations }\n\t\t\tonSelect={ onSelect }\n\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\n\t\t/>\n\t);\n\treturn (\n\t\t<>\n\t\t\t<MenuGroup label={ __( 'Transform to' ) } className={ className }>\n\t\t\t\t{ hoveredTransformItemName && (\n\t\t\t\t\t<PreviewBlockPopover\n\t\t\t\t\t\tblocks={ switchToBlockType(\n\t\t\t\t\t\t\tblocks,\n\t\t\t\t\t\t\thoveredTransformItemName\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ !! possibleBlockVariationTransformations?.length && (\n\t\t\t\t\t<BlockVariationTransformations\n\t\t\t\t\t\ttransformations={\n\t\t\t\t\t\t\tpossibleBlockVariationTransformations\n\t\t\t\t\t\t}\n\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\tonSelect={ onSelectVariation }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ priorityTextTransformations.map( ( item ) => (\n\t\t\t\t\t<BlockTransformationItem\n\t\t\t\t\t\tkey={ item.name }\n\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\tsetHoveredTransformItemName={\n\t\t\t\t\t\t\tsetHoveredTransformItemName\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t\t{ ! hasBothContentTransformations && restTransformItems }\n\t\t\t</MenuGroup>\n\t\t\t{ !! hasBothContentTransformations && (\n\t\t\t\t<MenuGroup className={ className }>\n\t\t\t\t\t{ restTransformItems }\n\t\t\t\t</MenuGroup>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nfunction RestTransformationItems( {\n\trestTransformations,\n\tonSelect,\n\tsetHoveredTransformItemName,\n} ) {\n\treturn restTransformations.map( ( item ) => (\n\t\t<BlockTransformationItem\n\t\t\tkey={ item.name }\n\t\t\titem={ item }\n\t\t\tonSelect={ onSelect }\n\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\n\t\t/>\n\t) );\n}\n\nfunction BlockTransformationItem( {\n\titem,\n\tonSelect,\n\tsetHoveredTransformItemName,\n} ) {\n\tconst { name, icon, title, isDisabled } = item;\n\treturn (\n\t\t<MenuItem\n\t\t\tclassName={ getBlockMenuDefaultClassName( name ) }\n\t\t\tonClick={ ( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tonSelect( name );\n\t\t\t} }\n\t\t\tdisabled={ isDisabled }\n\t\t\tonMouseLeave={ () => setHoveredTransformItemName( null ) }\n\t\t\tonMouseEnter={ () => setHoveredTransformItemName( name ) }\n\t\t>\n\t\t\t<BlockIcon icon={ icon } showColors />\n\t\t\t{ title }\n\t\t</MenuItem>\n\t);\n}\n\nexport default BlockTransformationsMenu;\n","/**\n * WordPress dependencies\n */\nimport TokenList from '@wordpress/token-list';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Returns the active style from the given className.\n *\n * @param {Array}  styles    Block styles.\n * @param {string} className Class name\n *\n * @return {?Object} The active style.\n */\nexport function getActiveStyle( styles, className ) {\n\tfor ( const style of new TokenList( className ).values() ) {\n\t\tif ( style.indexOf( 'is-style-' ) === -1 ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst potentialStyleName = style.substring( 9 );\n\t\tconst activeStyle = styles?.find(\n\t\t\t( { name } ) => name === potentialStyleName\n\t\t);\n\t\tif ( activeStyle ) {\n\t\t\treturn activeStyle;\n\t\t}\n\t}\n\n\treturn getDefaultStyle( styles );\n}\n\n/**\n * Replaces the active style in the block's className.\n *\n * @param {string}  className   Class name.\n * @param {?Object} activeStyle The replaced style.\n * @param {Object}  newStyle    The replacing style.\n *\n * @return {string} The updated className.\n */\nexport function replaceActiveStyle( className, activeStyle, newStyle ) {\n\tconst list = new TokenList( className );\n\n\tif ( activeStyle ) {\n\t\tlist.remove( 'is-style-' + activeStyle.name );\n\t}\n\n\tlist.add( 'is-style-' + newStyle.name );\n\n\treturn list.value;\n}\n\n/**\n * Returns a collection of styles that can be represented on the frontend.\n * The function checks a style collection for a default style. If none is found, it adds one to\n * act as a fallback for when there is no active style applied to a block. The default item also serves\n * as a switch on the frontend to deactivate non-default styles.\n *\n * @param {Array} styles Block styles.\n *\n * @return {Array<Object?>}        The style collection.\n */\nexport function getRenderedStyles( styles ) {\n\tif ( ! styles || styles.length === 0 ) {\n\t\treturn [];\n\t}\n\n\treturn getDefaultStyle( styles )\n\t\t? styles\n\t\t: [\n\t\t\t\t{\n\t\t\t\t\tname: 'default',\n\t\t\t\t\tlabel: _x( 'Default', 'block style' ),\n\t\t\t\t\tisDefault: true,\n\t\t\t\t},\n\t\t\t\t...styles,\n\t\t  ];\n}\n\n/**\n * Returns a style object from a collection of styles where that style object is the default block style.\n *\n * @param {Array} styles Block styles.\n *\n * @return {?Object}        The default style object, if found.\n */\nexport function getDefaultStyle( styles ) {\n\treturn styles?.find( ( style ) => style.isDefault );\n}\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\tcloneBlock,\n\tgetBlockType,\n\tgetBlockFromExample,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getActiveStyle, getRenderedStyles, replaceActiveStyle } from './utils';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n *\n * @param {WPBlock}     block Block object.\n * @param {WPBlockType} type  Block type settings.\n * @return {WPBlock}          A generic block ready for styles preview.\n */\nfunction useGenericPreviewBlock( block, type ) {\n\treturn useMemo( () => {\n\t\tconst example = type?.example;\n\t\tconst blockName = type?.name;\n\n\t\tif ( example && blockName ) {\n\t\t\treturn getBlockFromExample( blockName, {\n\t\t\t\tattributes: example.attributes,\n\t\t\t\tinnerBlocks: example.innerBlocks,\n\t\t\t} );\n\t\t}\n\n\t\tif ( block ) {\n\t\t\treturn cloneBlock( block );\n\t\t}\n\t}, [ type?.example ? block?.name : block, type ] );\n}\n\n/**\n * @typedef useStylesForBlocksArguments\n * @property {string}     clientId Block client ID.\n * @property {() => void} onSwitch Block style switch callback function.\n */\n\n/**\n *\n * @param {useStylesForBlocksArguments} useStylesForBlocks arguments.\n * @return {Object}                                         Results of the select methods.\n */\nexport default function useStylesForBlocks( { clientId, onSwitch } ) {\n\tconst selector = ( select ) => {\n\t\tconst { getBlock } = select( blockEditorStore );\n\t\tconst block = getBlock( clientId );\n\n\t\tif ( ! block ) {\n\t\t\treturn {};\n\t\t}\n\t\tconst blockType = getBlockType( block.name );\n\t\tconst { getBlockStyles } = select( blocksStore );\n\n\t\treturn {\n\t\t\tblock,\n\t\t\tblockType,\n\t\t\tstyles: getBlockStyles( block.name ),\n\t\t\tclassName: block.attributes.className || '',\n\t\t};\n\t};\n\tconst { styles, block, blockType, className } = useSelect( selector, [\n\t\tclientId,\n\t] );\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst stylesToRender = getRenderedStyles( styles );\n\tconst activeStyle = getActiveStyle( stylesToRender, className );\n\tconst genericPreviewBlock = useGenericPreviewBlock( block, blockType );\n\n\tconst onSelect = ( style ) => {\n\t\tconst styleClassName = replaceActiveStyle(\n\t\t\tclassName,\n\t\t\tactiveStyle,\n\t\t\tstyle\n\t\t);\n\t\tupdateBlockAttributes( clientId, {\n\t\t\tclassName: styleClassName,\n\t\t} );\n\t\tonSwitch();\n\t};\n\n\treturn {\n\t\tonSelect,\n\t\tstylesToRender,\n\t\tactiveStyle,\n\t\tgenericPreviewBlock,\n\t\tclassName,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { MenuItem, __experimentalText as Text } from '@wordpress/components';\nimport { check } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport useStylesForBlocks from './use-styles-for-block';\n\nconst noop = () => {};\n\nexport default function BlockStylesMenuItems( { clientId, onSwitch = noop } ) {\n\tconst { onSelect, stylesToRender, activeStyle } = useStylesForBlocks( {\n\t\tclientId,\n\t\tonSwitch,\n\t} );\n\n\tif ( ! stylesToRender || stylesToRender.length === 0 ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<>\n\t\t\t{ stylesToRender.map( ( style ) => {\n\t\t\t\tconst menuItemText = style.label || style.name;\n\t\t\t\treturn (\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tkey={ style.name }\n\t\t\t\t\t\ticon={ activeStyle.name === style.name ? check : null }\n\t\t\t\t\t\tonClick={ () => onSelect( style ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\tas=\"span\"\n\t\t\t\t\t\t\tlimit={ 18 }\n\t\t\t\t\t\t\tellipsizeMode=\"tail\"\n\t\t\t\t\t\t\ttruncate\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ menuItemText }\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuGroup } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockStylesMenuItems from '../block-styles/menu-items';\n\nexport default function BlockStylesMenu( { hoveredBlock, onSwitch } ) {\n\tconst { clientId } = hoveredBlock;\n\n\treturn (\n\t\t<MenuGroup\n\t\t\tlabel={ __( 'Styles' ) }\n\t\t\tclassName=\"block-editor-block-switcher__styles__menugroup\"\n\t\t>\n\t\t\t<BlockStylesMenuItems clientId={ clientId } onSwitch={ onSwitch } />\n\t\t</MenuGroup>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { getBlockAttributesNamesByRole } from '@wordpress/blocks';\n\n/**\n * Try to find a matching block by a block's name in a provided\n * block. We recurse through InnerBlocks and return the reference\n * of the matched block (it could be an InnerBlock).\n * If no match is found return nothing.\n *\n * @param {WPBlock} block             The block to try to find a match.\n * @param {string}  selectedBlockName The block's name to use for matching condition.\n * @param {Set}     consumedBlocks    A set holding the previously matched/consumed blocks.\n *\n * @return {WPBlock | undefined} The matched block if found or nothing(`undefined`).\n */\nexport const getMatchingBlockByName = (\n\tblock,\n\tselectedBlockName,\n\tconsumedBlocks = new Set()\n) => {\n\tconst { clientId, name, innerBlocks = [] } = block;\n\t// Check if block has been consumed already.\n\tif ( consumedBlocks.has( clientId ) ) {\n\t\treturn;\n\t}\n\tif ( name === selectedBlockName ) {\n\t\treturn block;\n\t}\n\t// Try to find a matching block from InnerBlocks recursively.\n\tfor ( const innerBlock of innerBlocks ) {\n\t\tconst match = getMatchingBlockByName(\n\t\t\tinnerBlock,\n\t\t\tselectedBlockName,\n\t\t\tconsumedBlocks\n\t\t);\n\t\tif ( match ) {\n\t\t\treturn match;\n\t\t}\n\t}\n};\n\n/**\n * Find and return the block attributes to retain through\n * the transformation, based on Block Type's `role:content`\n * attributes. If no `role:content` attributes exist,\n * return selected block's attributes.\n *\n * @param {string} name       Block type's namespaced name.\n * @param {Object} attributes Selected block's attributes.\n * @return {Object} The block's attributes to retain.\n */\nexport const getRetainedBlockAttributes = ( name, attributes ) => {\n\tconst contentAttributes = getBlockAttributesNamesByRole( name, 'content' );\n\tif ( ! contentAttributes?.length ) {\n\t\treturn attributes;\n\t}\n\n\treturn contentAttributes.reduce( ( _accumulator, attribute ) => {\n\t\tif ( attributes[ attribute ] ) {\n\t\t\t_accumulator[ attribute ] = attributes[ attribute ];\n\t\t}\n\t\treturn _accumulator;\n\t}, {} );\n};\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { cloneBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { getMatchingBlockByName, getRetainedBlockAttributes } from './utils';\n\n/**\n * Mutate the matched block's attributes by getting\n * which block type's attributes to retain and prioritize\n * them in the merging of the attributes.\n *\n * @param {WPBlock} match         The matched block.\n * @param {WPBlock} selectedBlock The selected block.\n * @return {void}\n */\nexport const transformMatchingBlock = ( match, selectedBlock ) => {\n\t// Get the block attributes to retain through the transformation.\n\tconst retainedBlockAttributes = getRetainedBlockAttributes(\n\t\tselectedBlock.name,\n\t\tselectedBlock.attributes\n\t);\n\tmatch.attributes = {\n\t\t...match.attributes,\n\t\t...retainedBlockAttributes,\n\t};\n};\n\n/**\n * By providing the selected blocks and pattern's blocks\n * find the matching blocks, transform them and return them.\n * If not all selected blocks are matched, return nothing.\n *\n * @param {WPBlock[]} selectedBlocks The selected blocks.\n * @param {WPBlock[]} patternBlocks  The pattern's blocks.\n * @return {WPBlock[]|void} The transformed pattern's blocks or undefined if not all selected blocks have been matched.\n */\nexport const getPatternTransformedBlocks = (\n\tselectedBlocks,\n\tpatternBlocks\n) => {\n\t// Clone Pattern's blocks to produce new clientIds and be able to mutate the matches.\n\tconst _patternBlocks = patternBlocks.map( ( block ) =>\n\t\tcloneBlock( block )\n\t);\n\t/**\n\t * Keep track of the consumed pattern blocks.\n\t * This is needed because we loop the selected blocks\n\t * and for example we may have selected two paragraphs and\n\t * the pattern's blocks could have more `paragraphs`.\n\t */\n\tconst consumedBlocks = new Set();\n\tfor ( const selectedBlock of selectedBlocks ) {\n\t\tlet isMatch = false;\n\t\tfor ( const patternBlock of _patternBlocks ) {\n\t\t\tconst match = getMatchingBlockByName(\n\t\t\t\tpatternBlock,\n\t\t\t\tselectedBlock.name,\n\t\t\t\tconsumedBlocks\n\t\t\t);\n\t\t\tif ( ! match ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tisMatch = true;\n\t\t\tconsumedBlocks.add( match.clientId );\n\t\t\t// We update (mutate) the matching pattern block.\n\t\t\ttransformMatchingBlock( match, selectedBlock );\n\t\t\t// No need to loop through other pattern's blocks.\n\t\t\tbreak;\n\t\t}\n\t\t// Bail early if a selected block has not been matched.\n\t\tif ( ! isMatch ) {\n\t\t\treturn;\n\t\t}\n\t}\n\treturn _patternBlocks;\n};\n\n/**\n * @typedef {WPBlockPattern & {transformedBlocks: WPBlock[]}} TransformedBlockPattern\n */\n\n/**\n * Custom hook that accepts patterns from state and the selected\n * blocks and tries to match these with the pattern's blocks.\n * If all selected blocks are matched with a Pattern's block,\n * we transform them by retaining block's attributes with `role:content`.\n * The transformed pattern's blocks are set to a new pattern\n * property `transformedBlocks`.\n *\n * @param {WPBlockPattern[]} patterns       Patterns from state.\n * @param {WPBlock[]}        selectedBlocks The currently selected blocks.\n * @return {TransformedBlockPattern[]} Returns the eligible matched patterns with all the selected blocks.\n */\nconst useTransformedPatterns = ( patterns, selectedBlocks ) => {\n\treturn useMemo(\n\t\t() =>\n\t\t\tpatterns.reduce( ( accumulator, _pattern ) => {\n\t\t\t\tconst transformedBlocks = getPatternTransformedBlocks(\n\t\t\t\t\tselectedBlocks,\n\t\t\t\t\t_pattern.blocks\n\t\t\t\t);\n\t\t\t\tif ( transformedBlocks ) {\n\t\t\t\t\taccumulator.push( {\n\t\t\t\t\t\t..._pattern,\n\t\t\t\t\t\ttransformedBlocks,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\treturn accumulator;\n\t\t\t}, [] ),\n\t\t[ patterns, selectedBlocks ]\n\t);\n};\n\nexport default useTransformedPatterns;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { useInstanceId, useViewportMatch } from '@wordpress/compose';\nimport { chevronRight } from '@wordpress/icons';\n\nimport {\n\tComposite,\n\tMenuGroup,\n\tMenuItem,\n\tPopover,\n\tVisuallyHidden,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\nimport useTransformedPatterns from './use-transformed-patterns';\n\nfunction PatternTransformationsMenu( {\n\tblocks,\n\tpatterns: statePatterns,\n\tonSelect,\n} ) {\n\tconst [ showTransforms, setShowTransforms ] = useState( false );\n\tconst patterns = useTransformedPatterns( statePatterns, blocks );\n\n\tif ( ! patterns.length ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<MenuGroup className=\"block-editor-block-switcher__pattern__transforms__menugroup\">\n\t\t\t{ showTransforms && (\n\t\t\t\t<PreviewPatternsPopover\n\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<MenuItem\n\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tsetShowTransforms( ! showTransforms );\n\t\t\t\t} }\n\t\t\t\ticon={ chevronRight }\n\t\t\t>\n\t\t\t\t{ __( 'Patterns' ) }\n\t\t\t</MenuItem>\n\t\t</MenuGroup>\n\t);\n}\n\nfunction PreviewPatternsPopover( { patterns, onSelect } ) {\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\n\treturn (\n\t\t<div className=\"block-editor-block-switcher__popover-preview-container\">\n\t\t\t<Popover\n\t\t\t\tclassName=\"block-editor-block-switcher__popover-preview\"\n\t\t\t\tplacement={ isMobile ? 'bottom' : 'right-start' }\n\t\t\t\toffset={ 16 }\n\t\t\t>\n\t\t\t\t<div className=\"block-editor-block-switcher__preview is-pattern-list-preview\">\n\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Popover>\n\t\t</div>\n\t);\n}\n\nfunction BlockPatternsList( { patterns, onSelect } ) {\n\treturn (\n\t\t<Composite\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-block-switcher__preview-patterns-container\"\n\t\t\taria-label={ __( 'Patterns list' ) }\n\t\t>\n\t\t\t{ patterns.map( ( pattern ) => (\n\t\t\t\t<BlockPattern\n\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</Composite>\n\t);\n}\n\nfunction BlockPattern( { pattern, onSelect } ) {\n\t// TODO check pattern/preview width...\n\tconst baseClassName =\n\t\t'block-editor-block-switcher__preview-patterns-container';\n\tconst descriptionId = useInstanceId(\n\t\tBlockPattern,\n\t\t`${ baseClassName }-list__item-description`\n\t);\n\treturn (\n\t\t<div className={ `${ baseClassName }-list__list-item` }>\n\t\t\t<Composite.Item\n\t\t\t\trender={\n\t\t\t\t\t<div\n\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\taria-label={ pattern.title }\n\t\t\t\t\t\taria-describedby={\n\t\t\t\t\t\t\tpattern.description ? descriptionId : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName={ `${ baseClassName }-list__item` }\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tonClick={ () => onSelect( pattern.transformedBlocks ) }\n\t\t\t>\n\t\t\t\t<BlockPreview\n\t\t\t\t\tblocks={ pattern.transformedBlocks }\n\t\t\t\t\tviewportWidth={ pattern.viewportWidth || 500 }\n\t\t\t\t/>\n\t\t\t\t<div className={ `${ baseClassName }-list__item-title` }>\n\t\t\t\t\t{ pattern.title }\n\t\t\t\t</div>\n\t\t\t</Composite.Item>\n\t\t\t{ !! pattern.description && (\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ pattern.description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default PatternTransformationsMenu;\n","/**\n * WordPress dependencies\n */\nimport { __, _n, sprintf, _x } from '@wordpress/i18n';\nimport {\n\tDropdownMenu,\n\tToolbarButton,\n\tToolbarGroup,\n\tToolbarItem,\n\t__experimentalText as Text,\n\tMenuGroup,\n} from '@wordpress/components';\nimport {\n\tswitchToBlockType,\n\tstore as blocksStore,\n\tisReusableBlock,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { copy } from '@wordpress/icons';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockIcon from '../block-icon';\nimport BlockTransformationsMenu from './block-transformations-menu';\nimport { useBlockVariationTransforms } from './block-variation-transformations';\nimport BlockStylesMenu from './block-styles-menu';\nimport PatternTransformationsMenu from './pattern-transformations-menu';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\n\nfunction BlockSwitcherDropdownMenuContents( {\n\tonClose,\n\tclientIds,\n\thasBlockStyles,\n\tcanRemove,\n} ) {\n\tconst { replaceBlocks, multiSelect, updateBlockAttributes } =\n\t\tuseDispatch( blockEditorStore );\n\tconst { possibleBlockTransformations, patterns, blocks, isUsingBindings } =\n\t\tuseSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\tgetBlockAttributes,\n\t\t\t\t\tgetBlocksByClientId,\n\t\t\t\t\tgetBlockRootClientId,\n\t\t\t\t\tgetBlockTransformItems,\n\t\t\t\t\t__experimentalGetPatternTransformItems,\n\t\t\t\t} = select( blockEditorStore );\n\t\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\t\t\t\tconst _blocks = getBlocksByClientId( clientIds );\n\t\t\t\treturn {\n\t\t\t\t\tblocks: _blocks,\n\t\t\t\t\tpossibleBlockTransformations: getBlockTransformItems(\n\t\t\t\t\t\t_blocks,\n\t\t\t\t\t\trootClientId\n\t\t\t\t\t),\n\t\t\t\t\tpatterns: __experimentalGetPatternTransformItems(\n\t\t\t\t\t\t_blocks,\n\t\t\t\t\t\trootClientId\n\t\t\t\t\t),\n\t\t\t\t\tisUsingBindings: clientIds.every(\n\t\t\t\t\t\t( clientId ) =>\n\t\t\t\t\t\t\t!! getBlockAttributes( clientId )?.metadata\n\t\t\t\t\t\t\t\t?.bindings\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ clientIds ]\n\t\t);\n\tconst blockVariationTransformations = useBlockVariationTransforms( {\n\t\tclientIds,\n\t\tblocks,\n\t} );\n\tfunction selectForMultipleBlocks( insertedBlocks ) {\n\t\tif ( insertedBlocks.length > 1 ) {\n\t\t\tmultiSelect(\n\t\t\t\tinsertedBlocks[ 0 ].clientId,\n\t\t\t\tinsertedBlocks[ insertedBlocks.length - 1 ].clientId\n\t\t\t);\n\t\t}\n\t}\n\t// Simple block transformation based on the `Block Transforms` API.\n\tfunction onBlockTransform( name ) {\n\t\tconst newBlocks = switchToBlockType( blocks, name );\n\t\treplaceBlocks( clientIds, newBlocks );\n\t\tselectForMultipleBlocks( newBlocks );\n\t}\n\tfunction onBlockVariationTransform( name ) {\n\t\tupdateBlockAttributes( blocks[ 0 ].clientId, {\n\t\t\t...blockVariationTransformations.find(\n\t\t\t\t( { name: variationName } ) => variationName === name\n\t\t\t).attributes,\n\t\t} );\n\t}\n\t// Pattern transformation through the `Patterns` API.\n\tfunction onPatternTransform( transformedBlocks ) {\n\t\treplaceBlocks( clientIds, transformedBlocks );\n\t\tselectForMultipleBlocks( transformedBlocks );\n\t}\n\t/**\n\t * The `isTemplate` check is a stopgap solution here.\n\t * Ideally, the Transforms API should handle this\n\t * by allowing to exclude blocks from wildcard transformations.\n\t */\n\tconst isSingleBlock = blocks.length === 1;\n\tconst isTemplate = isSingleBlock && isTemplatePart( blocks[ 0 ] );\n\tconst hasPossibleBlockTransformations =\n\t\t!! possibleBlockTransformations.length && canRemove && ! isTemplate;\n\tconst hasPossibleBlockVariationTransformations =\n\t\t!! blockVariationTransformations?.length;\n\tconst hasPatternTransformation = !! patterns?.length && canRemove;\n\tconst hasBlockOrBlockVariationTransforms =\n\t\thasPossibleBlockTransformations ||\n\t\thasPossibleBlockVariationTransformations;\n\tconst hasContents =\n\t\thasBlockStyles ||\n\t\thasBlockOrBlockVariationTransforms ||\n\t\thasPatternTransformation;\n\tif ( ! hasContents ) {\n\t\treturn (\n\t\t\t<p className=\"block-editor-block-switcher__no-transforms\">\n\t\t\t\t{ __( 'No transforms.' ) }\n\t\t\t</p>\n\t\t);\n\t}\n\n\tconst connectedBlockDescription = isSingleBlock\n\t\t? _x(\n\t\t\t\t'This block is connected.',\n\t\t\t\t'block toolbar button label and description'\n\t\t  )\n\t\t: _x(\n\t\t\t\t'These blocks are connected.',\n\t\t\t\t'block toolbar button label and description'\n\t\t  );\n\n\treturn (\n\t\t<div className=\"block-editor-block-switcher__container\">\n\t\t\t{ hasPatternTransformation && (\n\t\t\t\t<PatternTransformationsMenu\n\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\tonSelect={ ( transformedBlocks ) => {\n\t\t\t\t\t\tonPatternTransform( transformedBlocks );\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ hasBlockOrBlockVariationTransforms && (\n\t\t\t\t<BlockTransformationsMenu\n\t\t\t\t\tclassName=\"block-editor-block-switcher__transforms__menugroup\"\n\t\t\t\t\tpossibleBlockTransformations={\n\t\t\t\t\t\tpossibleBlockTransformations\n\t\t\t\t\t}\n\t\t\t\t\tpossibleBlockVariationTransformations={\n\t\t\t\t\t\tblockVariationTransformations\n\t\t\t\t\t}\n\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\tonSelect={ ( name ) => {\n\t\t\t\t\t\tonBlockTransform( name );\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t\tonSelectVariation={ ( name ) => {\n\t\t\t\t\t\tonBlockVariationTransform( name );\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ hasBlockStyles && (\n\t\t\t\t<BlockStylesMenu\n\t\t\t\t\thoveredBlock={ blocks[ 0 ] }\n\t\t\t\t\tonSwitch={ onClose }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ isUsingBindings && (\n\t\t\t\t<MenuGroup>\n\t\t\t\t\t<Text className=\"block-editor-block-switcher__binding-indicator\">\n\t\t\t\t\t\t{ connectedBlockDescription }\n\t\t\t\t\t</Text>\n\t\t\t\t</MenuGroup>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport const BlockSwitcher = ( { clientIds } ) => {\n\tconst {\n\t\thasContentOnlyLocking,\n\t\tcanRemove,\n\t\thasBlockStyles,\n\t\ticon,\n\t\tinvalidBlocks,\n\t\tisReusable,\n\t\tisTemplate,\n\t\tisDisabled,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetBlocksByClientId,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tcanRemoveBlocks,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { getBlockStyles, getBlockType, getActiveBlockVariation } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst _blocks = getBlocksByClientId( clientIds );\n\t\t\tif ( ! _blocks.length || _blocks.some( ( block ) => ! block ) ) {\n\t\t\t\treturn { invalidBlocks: true };\n\t\t\t}\n\t\t\tconst [ { name: firstBlockName } ] = _blocks;\n\t\t\tconst _isSingleBlockSelected = _blocks.length === 1;\n\t\t\tconst blockType = getBlockType( firstBlockName );\n\t\t\tconst editingMode = getBlockEditingMode( clientIds[ 0 ] );\n\n\t\t\tlet _icon;\n\t\t\tlet _hasTemplateLock;\n\t\t\tif ( _isSingleBlockSelected ) {\n\t\t\t\tconst match = getActiveBlockVariation(\n\t\t\t\t\tfirstBlockName,\n\t\t\t\t\tgetBlockAttributes( clientIds[ 0 ] )\n\t\t\t\t);\n\t\t\t\t// Take into account active block variations.\n\t\t\t\t_icon = match?.icon || blockType.icon;\n\t\t\t\t_hasTemplateLock =\n\t\t\t\t\tgetTemplateLock( clientIds[ 0 ] ) === 'contentOnly';\n\t\t\t} else {\n\t\t\t\tconst isSelectionOfSameType =\n\t\t\t\t\tnew Set( _blocks.map( ( { name } ) => name ) ).size === 1;\n\t\t\t\t_hasTemplateLock = clientIds.some(\n\t\t\t\t\t( id ) => getTemplateLock( id ) === 'contentOnly'\n\t\t\t\t);\n\t\t\t\t// When selection consists of blocks of multiple types, display an\n\t\t\t\t// appropriate icon to communicate the non-uniformity.\n\t\t\t\t_icon = isSelectionOfSameType ? blockType.icon : copy;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tcanRemove: canRemoveBlocks( clientIds ),\n\t\t\t\thasBlockStyles:\n\t\t\t\t\t_isSingleBlockSelected &&\n\t\t\t\t\t!! getBlockStyles( firstBlockName )?.length,\n\t\t\t\ticon: _icon,\n\t\t\t\tisReusable:\n\t\t\t\t\t_isSingleBlockSelected && isReusableBlock( _blocks[ 0 ] ),\n\t\t\t\tisTemplate:\n\t\t\t\t\t_isSingleBlockSelected && isTemplatePart( _blocks[ 0 ] ),\n\t\t\t\thasContentOnlyLocking: _hasTemplateLock,\n\t\t\t\tisDisabled: editingMode !== 'default',\n\t\t\t};\n\t\t},\n\t\t[ clientIds ]\n\t);\n\tconst blockTitle = useBlockDisplayTitle( {\n\t\tclientId: clientIds?.[ 0 ],\n\t\tmaximumLength: 35,\n\t} );\n\tconst showIconLabels = useSelect(\n\t\t( select ) =>\n\t\t\tselect( preferencesStore ).get( 'core', 'showIconLabels' ),\n\t\t[]\n\t);\n\n\tif ( invalidBlocks ) {\n\t\treturn null;\n\t}\n\n\tconst isSingleBlock = clientIds.length === 1;\n\tconst blockSwitcherLabel = isSingleBlock\n\t\t? blockTitle\n\t\t: __( 'Multiple blocks selected' );\n\n\tconst blockIndicatorText =\n\t\t( isReusable || isTemplate ) && ! showIconLabels && blockTitle\n\t\t\t? blockTitle\n\t\t\t: undefined;\n\n\tconst hideDropdown =\n\t\tisDisabled ||\n\t\t( ! hasBlockStyles && ! canRemove ) ||\n\t\thasContentOnlyLocking;\n\n\tif ( hideDropdown ) {\n\t\treturn (\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tdisabled\n\t\t\t\t\tclassName=\"block-editor-block-switcher__no-switcher-icon\"\n\t\t\t\t\ttitle={ blockSwitcherLabel }\n\t\t\t\t\ticon={\n\t\t\t\t\t\t<BlockIcon\n\t\t\t\t\t\t\tclassName=\"block-editor-block-switcher__toggle\"\n\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\tshowColors\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\ttext={ blockIndicatorText }\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t);\n\t}\n\n\tconst blockSwitcherDescription = isSingleBlock\n\t\t? __( 'Change block type or style' )\n\t\t: sprintf(\n\t\t\t\t/* translators: %d: number of blocks. */\n\t\t\t\t_n(\n\t\t\t\t\t'Change type of %d block',\n\t\t\t\t\t'Change type of %d blocks',\n\t\t\t\t\tclientIds.length\n\t\t\t\t),\n\t\t\t\tclientIds.length\n\t\t  );\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarItem>\n\t\t\t\t{ ( toggleProps ) => (\n\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\tclassName=\"block-editor-block-switcher\"\n\t\t\t\t\t\tlabel={ blockSwitcherLabel }\n\t\t\t\t\t\tpopoverProps={ {\n\t\t\t\t\t\t\tplacement: 'bottom-start',\n\t\t\t\t\t\t\tclassName: 'block-editor-block-switcher__popover',\n\t\t\t\t\t\t} }\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t<BlockIcon\n\t\t\t\t\t\t\t\tclassName=\"block-editor-block-switcher__toggle\"\n\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t\tshowColors\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttext={ blockIndicatorText }\n\t\t\t\t\t\ttoggleProps={ {\n\t\t\t\t\t\t\tdescription: blockSwitcherDescription,\n\t\t\t\t\t\t\t...toggleProps,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tmenuProps={ { orientation: 'both' } }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t\t<BlockSwitcherDropdownMenuContents\n\t\t\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\thasBlockStyles={ hasBlockStyles }\n\t\t\t\t\t\t\t\tcanRemove={ canRemove }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</DropdownMenu>\n\t\t\t\t) }\n\t\t\t</ToolbarItem>\n\t\t</ToolbarGroup>\n\t);\n};\n\nexport default BlockSwitcher;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst { Fill: __unstableBlockToolbarLastItem, Slot } = createSlotFill(\n\t'__unstableBlockToolbarLastItem'\n);\n\n__unstableBlockToolbarLastItem.Slot = Slot;\n\nexport default __unstableBlockToolbarLastItem;\n","/**\n * WordPress dependencies\n */\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { Platform } from '@wordpress/element';\n\nconst ALIGN_SUPPORT_KEY = 'align';\nconst ALIGN_WIDE_SUPPORT_KEY = 'alignWide';\nconst BORDER_SUPPORT_KEY = '__experimentalBorder';\nconst COLOR_SUPPORT_KEY = 'color';\nconst CUSTOM_CLASS_NAME_SUPPORT_KEY = 'customClassName';\nconst FONT_FAMILY_SUPPORT_KEY = 'typography.__experimentalFontFamily';\nconst FONT_SIZE_SUPPORT_KEY = 'typography.fontSize';\nconst LINE_HEIGHT_SUPPORT_KEY = 'typography.lineHeight';\n/**\n * Key within block settings' support array indicating support for font style.\n */\nconst FONT_STYLE_SUPPORT_KEY = 'typography.__experimentalFontStyle';\n/**\n * Key within block settings' support array indicating support for font weight.\n */\nconst FONT_WEIGHT_SUPPORT_KEY = 'typography.__experimentalFontWeight';\n/**\n * Key within block settings' supports array indicating support for text\n * align e.g. settings found in `block.json`.\n */\nconst TEXT_ALIGN_SUPPORT_KEY = 'typography.textAlign';\n/**\n * Key within block settings' supports array indicating support for text\n * columns e.g. settings found in `block.json`.\n */\nconst TEXT_COLUMNS_SUPPORT_KEY = 'typography.textColumns';\n/**\n * Key within block settings' supports array indicating support for text\n * decorations e.g. settings found in `block.json`.\n */\nconst TEXT_DECORATION_SUPPORT_KEY = 'typography.__experimentalTextDecoration';\n/**\n * Key within block settings' supports array indicating support for writing mode\n * e.g. settings found in `block.json`.\n */\nconst WRITING_MODE_SUPPORT_KEY = 'typography.__experimentalWritingMode';\n/**\n * Key within block settings' supports array indicating support for text\n * transforms e.g. settings found in `block.json`.\n */\nconst TEXT_TRANSFORM_SUPPORT_KEY = 'typography.__experimentalTextTransform';\n\n/**\n * Key within block settings' supports array indicating support for letter-spacing\n * e.g. settings found in `block.json`.\n */\nconst LETTER_SPACING_SUPPORT_KEY = 'typography.__experimentalLetterSpacing';\nconst LAYOUT_SUPPORT_KEY = 'layout';\nconst TYPOGRAPHY_SUPPORT_KEYS = [\n\tLINE_HEIGHT_SUPPORT_KEY,\n\tFONT_SIZE_SUPPORT_KEY,\n\tFONT_STYLE_SUPPORT_KEY,\n\tFONT_WEIGHT_SUPPORT_KEY,\n\tFONT_FAMILY_SUPPORT_KEY,\n\tTEXT_ALIGN_SUPPORT_KEY,\n\tTEXT_COLUMNS_SUPPORT_KEY,\n\tTEXT_DECORATION_SUPPORT_KEY,\n\tTEXT_TRANSFORM_SUPPORT_KEY,\n\tWRITING_MODE_SUPPORT_KEY,\n\tLETTER_SPACING_SUPPORT_KEY,\n];\nconst EFFECTS_SUPPORT_KEYS = [ 'shadow' ];\nconst SPACING_SUPPORT_KEY = 'spacing';\nconst styleSupportKeys = [\n\t...EFFECTS_SUPPORT_KEYS,\n\t...TYPOGRAPHY_SUPPORT_KEYS,\n\tBORDER_SUPPORT_KEY,\n\tCOLOR_SUPPORT_KEY,\n\tSPACING_SUPPORT_KEY,\n];\n\n/**\n * Returns true if the block defines support for align.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasAlignSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, ALIGN_SUPPORT_KEY );\n\n/**\n * Returns the block support value for align, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getAlignSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, ALIGN_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for align wide.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasAlignWideSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, ALIGN_WIDE_SUPPORT_KEY );\n\n/**\n * Returns the block support value for align wide, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getAlignWideSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, ALIGN_WIDE_SUPPORT_KEY );\n\n/**\n * Determine whether there is block support for border properties.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @param {string}        feature    Border feature to check support for.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasBorderSupport( nameOrType, feature = 'any' ) {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst support = getBlockSupport( nameOrType, BORDER_SUPPORT_KEY );\n\n\tif ( support === true ) {\n\t\treturn true;\n\t}\n\n\tif ( feature === 'any' ) {\n\t\treturn !! (\n\t\t\tsupport?.color ||\n\t\t\tsupport?.radius ||\n\t\t\tsupport?.width ||\n\t\t\tsupport?.style\n\t\t);\n\t}\n\n\treturn !! support?.[ feature ];\n}\n\n/**\n * Get block support for border properties.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @param {string}        feature    Border feature to get.\n *\n * @return {unknown} The block support.\n */\nexport const getBorderSupport = ( nameOrType, feature ) =>\n\tgetBlockSupport( nameOrType, [ BORDER_SUPPORT_KEY, feature ] );\n\n/**\n * Returns true if the block defines support for color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasColorSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\treturn (\n\t\tcolorSupport &&\n\t\t( colorSupport.link === true ||\n\t\t\tcolorSupport.gradient === true ||\n\t\t\tcolorSupport.background !== false ||\n\t\t\tcolorSupport.text !== false )\n\t);\n};\n\n/**\n * Returns true if the block defines support for link color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasLinkColorSupport = ( nameOrType ) => {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.link\n\t);\n};\n\n/**\n * Returns true if the block defines support for gradient color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasGradientSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.gradients\n\t);\n};\n\n/**\n * Returns true if the block defines support for background color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasBackgroundColorSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.background !== false;\n};\n\n/**\n * Returns true if the block defines support for text-align.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasTextAlignSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, TEXT_ALIGN_SUPPORT_KEY );\n\n/**\n * Returns the block support value for text-align, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getTextAlignSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, TEXT_ALIGN_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for background color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasTextColorSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.text !== false;\n};\n\n/**\n * Get block support for color properties.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @param {string}        feature    Color feature to get.\n *\n * @return {unknown} The block support.\n */\nexport const getColorSupport = ( nameOrType, feature ) =>\n\tgetBlockSupport( nameOrType, [ COLOR_SUPPORT_KEY, feature ] );\n\n/**\n * Returns true if the block defines support for custom class name.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasCustomClassNameSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, CUSTOM_CLASS_NAME_SUPPORT_KEY, true );\n\n/**\n * Returns the block support value for custom class name, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getCustomClassNameSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, CUSTOM_CLASS_NAME_SUPPORT_KEY, true );\n\n/**\n * Returns true if the block defines support for font family.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasFontFamilySupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, FONT_FAMILY_SUPPORT_KEY );\n\n/**\n * Returns the block support value for font family, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getFontFamilySupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, FONT_FAMILY_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for font size.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasFontSizeSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, FONT_SIZE_SUPPORT_KEY );\n\n/**\n * Returns the block support value for font size, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getFontSizeSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, FONT_SIZE_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for layout.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasLayoutSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, LAYOUT_SUPPORT_KEY );\n\n/**\n * Returns the block support value for layout, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getLayoutSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, LAYOUT_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for style.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasStyleSupport = ( nameOrType ) =>\n\tstyleSupportKeys.some( ( key ) => hasBlockSupport( nameOrType, key ) );\n","/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport { getBlockType, parse } from '@wordpress/blocks';\nimport { useDispatch, useRegistry } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport {\n\thasAlignSupport,\n\thasBorderSupport,\n\thasBackgroundColorSupport,\n\thasTextAlignSupport,\n\thasTextColorSupport,\n\thasGradientSupport,\n\thasCustomClassNameSupport,\n\thasFontFamilySupport,\n\thasFontSizeSupport,\n\thasLayoutSupport,\n\thasStyleSupport,\n} from '../../hooks/supports';\n\n/**\n * Determine if the copied text looks like serialized blocks or not.\n * Since plain text will always get parsed into a freeform block,\n * we check that if the parsed blocks is anything other than that.\n *\n * @param {string} text The copied text.\n * @return {boolean} True if the text looks like serialized blocks, false otherwise.\n */\nfunction hasSerializedBlocks( text ) {\n\ttry {\n\t\tconst blocks = parse( text, {\n\t\t\t__unstableSkipMigrationLogs: true,\n\t\t\t__unstableSkipAutop: true,\n\t\t} );\n\t\tif ( blocks.length === 1 && blocks[ 0 ].name === 'core/freeform' ) {\n\t\t\t// It's likely that the text is just plain text and not serialized blocks.\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} catch ( err ) {\n\t\t// Parsing error, the text is not serialized blocks.\n\t\t// (Even though that it technically won't happen)\n\t\treturn false;\n\t}\n}\n\n/**\n * Style attributes are attributes being added in `block-editor/src/hooks/*`.\n * (Except for some unrelated to style like `anchor` or `settings`.)\n * They generally represent the default block supports.\n */\nconst STYLE_ATTRIBUTES = {\n\talign: hasAlignSupport,\n\tborderColor: ( nameOrType ) => hasBorderSupport( nameOrType, 'color' ),\n\tbackgroundColor: hasBackgroundColorSupport,\n\ttextAlign: hasTextAlignSupport,\n\ttextColor: hasTextColorSupport,\n\tgradient: hasGradientSupport,\n\tclassName: hasCustomClassNameSupport,\n\tfontFamily: hasFontFamilySupport,\n\tfontSize: hasFontSizeSupport,\n\tlayout: hasLayoutSupport,\n\tstyle: hasStyleSupport,\n};\n\n/**\n * Get the \"style attributes\" from a given block to a target block.\n *\n * @param {WPBlock} sourceBlock The source block.\n * @param {WPBlock} targetBlock The target block.\n * @return {Object} the filtered attributes object.\n */\nfunction getStyleAttributes( sourceBlock, targetBlock ) {\n\treturn Object.entries( STYLE_ATTRIBUTES ).reduce(\n\t\t( attributes, [ attributeKey, hasSupport ] ) => {\n\t\t\t// Only apply the attribute if both blocks support it.\n\t\t\tif (\n\t\t\t\thasSupport( sourceBlock.name ) &&\n\t\t\t\thasSupport( targetBlock.name )\n\t\t\t) {\n\t\t\t\t// Override attributes that are not present in the block to their defaults.\n\t\t\t\tattributes[ attributeKey ] =\n\t\t\t\t\tsourceBlock.attributes[ attributeKey ];\n\t\t\t}\n\t\t\treturn attributes;\n\t\t},\n\t\t{}\n\t);\n}\n\n/**\n * Update the target blocks with style attributes recursively.\n *\n * @param {WPBlock[]} targetBlocks          The target blocks to be updated.\n * @param {WPBlock[]} sourceBlocks          The source blocks to get th style attributes from.\n * @param {Function}  updateBlockAttributes The function to update the attributes.\n */\nfunction recursivelyUpdateBlockAttributes(\n\ttargetBlocks,\n\tsourceBlocks,\n\tupdateBlockAttributes\n) {\n\tfor (\n\t\tlet index = 0;\n\t\tindex < Math.min( sourceBlocks.length, targetBlocks.length );\n\t\tindex += 1\n\t) {\n\t\tupdateBlockAttributes(\n\t\t\ttargetBlocks[ index ].clientId,\n\t\t\tgetStyleAttributes( sourceBlocks[ index ], targetBlocks[ index ] )\n\t\t);\n\n\t\trecursivelyUpdateBlockAttributes(\n\t\t\ttargetBlocks[ index ].innerBlocks,\n\t\t\tsourceBlocks[ index ].innerBlocks,\n\t\t\tupdateBlockAttributes\n\t\t);\n\t}\n}\n\n/**\n * A hook to return a pasteStyles event function for handling pasting styles to blocks.\n *\n * @return {Function} A function to update the styles to the blocks.\n */\nexport default function usePasteStyles() {\n\tconst registry = useRegistry();\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst { createSuccessNotice, createWarningNotice, createErrorNotice } =\n\t\tuseDispatch( noticesStore );\n\n\treturn useCallback(\n\t\tasync ( targetBlocks ) => {\n\t\t\tlet html = '';\n\t\t\ttry {\n\t\t\t\t// `http:` sites won't have the clipboard property on navigator.\n\t\t\t\t// (with the exception of localhost.)\n\t\t\t\tif ( ! window.navigator.clipboard ) {\n\t\t\t\t\tcreateErrorNotice(\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Unable to paste styles. This feature is only available on secure (https) sites in supporting browsers.'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{ type: 'snackbar' }\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\thtml = await window.navigator.clipboard.readText();\n\t\t\t} catch ( error ) {\n\t\t\t\t// Possibly the permission is denied.\n\t\t\t\tcreateErrorNotice(\n\t\t\t\t\t__(\n\t\t\t\t\t\t'Unable to paste styles. Please allow browser clipboard permissions before continuing.'\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Abort if the copied text is empty or doesn't look like serialized blocks.\n\t\t\tif ( ! html || ! hasSerializedBlocks( html ) ) {\n\t\t\t\tcreateWarningNotice(\n\t\t\t\t\t__(\n\t\t\t\t\t\t\"Unable to paste styles. Block styles couldn't be found within the copied content.\"\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst copiedBlocks = parse( html );\n\n\t\t\tif ( copiedBlocks.length === 1 ) {\n\t\t\t\t// Apply styles of the block to all the target blocks.\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\trecursivelyUpdateBlockAttributes(\n\t\t\t\t\t\ttargetBlocks,\n\t\t\t\t\t\ttargetBlocks.map( () => copiedBlocks[ 0 ] ),\n\t\t\t\t\t\tupdateBlockAttributes\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\trecursivelyUpdateBlockAttributes(\n\t\t\t\t\t\ttargetBlocks,\n\t\t\t\t\t\tcopiedBlocks,\n\t\t\t\t\t\tupdateBlockAttributes\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( targetBlocks.length === 1 ) {\n\t\t\t\tconst title = getBlockType( targetBlocks[ 0 ].name )?.title;\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t// Translators: %s: Name of the block being pasted, e.g. \"Paragraph\".\n\t\t\t\t\t\t__( 'Pasted styles to %s.' ),\n\t\t\t\t\t\ttitle\n\t\t\t\t\t),\n\t\t\t\t\t{ type: 'snackbar' }\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t// Translators: %d: The number of the blocks.\n\t\t\t\t\t\t__( 'Pasted styles to %d blocks.' ),\n\t\t\t\t\t\ttargetBlocks.length\n\t\t\t\t\t),\n\t\t\t\t\t{ type: 'snackbar' }\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tregistry.batch,\n\t\t\tupdateBlockAttributes,\n\t\t\tcreateSuccessNotice,\n\t\t\tcreateWarningNotice,\n\t\t\tcreateErrorNotice,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\thasBlockSupport,\n\tswitchToBlockType,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport usePasteStyles from '../use-paste-styles';\nimport { store as blockEditorStore } from '../../store';\n\nexport default function BlockActions( {\n\tclientIds,\n\tchildren,\n\t__experimentalUpdateSelection: updateSelection,\n} ) {\n\tconst { getDefaultBlockName, getGroupingBlockName } =\n\t\tuseSelect( blocksStore );\n\tconst selected = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tcanInsertBlockType,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlocksByClientId,\n\t\t\t\tgetDirectInsertBlock,\n\t\t\t\tcanRemoveBlocks,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst blocks = getBlocksByClientId( clientIds );\n\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\t\t\tconst canInsertDefaultBlock = canInsertBlockType(\n\t\t\t\tgetDefaultBlockName(),\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tconst directInsertBlock = rootClientId\n\t\t\t\t? getDirectInsertBlock( rootClientId )\n\t\t\t\t: null;\n\n\t\t\treturn {\n\t\t\t\tcanRemove: canRemoveBlocks( clientIds ),\n\t\t\t\tcanInsertBlock: canInsertDefaultBlock || !! directInsertBlock,\n\t\t\t\tcanCopyStyles: blocks.every( ( block ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t!! block &&\n\t\t\t\t\t\t( hasBlockSupport( block.name, 'color' ) ||\n\t\t\t\t\t\t\thasBlockSupport( block.name, 'typography' ) )\n\t\t\t\t\t);\n\t\t\t\t} ),\n\t\t\t\tcanDuplicate: blocks.every( ( block ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t!! block &&\n\t\t\t\t\t\thasBlockSupport( block.name, 'multiple', true ) &&\n\t\t\t\t\t\tcanInsertBlockType( block.name, rootClientId )\n\t\t\t\t\t);\n\t\t\t\t} ),\n\t\t\t};\n\t\t},\n\t\t[ clientIds, getDefaultBlockName ]\n\t);\n\tconst { getBlocksByClientId, getBlocks } = useSelect( blockEditorStore );\n\n\tconst { canRemove, canInsertBlock, canCopyStyles, canDuplicate } = selected;\n\n\tconst {\n\t\tremoveBlocks,\n\t\treplaceBlocks,\n\t\tduplicateBlocks,\n\t\tinsertAfterBlock,\n\t\tinsertBeforeBlock,\n\t\tflashBlock,\n\t} = useDispatch( blockEditorStore );\n\n\tconst pasteStyles = usePasteStyles();\n\n\treturn children( {\n\t\tcanCopyStyles,\n\t\tcanDuplicate,\n\t\tcanInsertBlock,\n\t\tcanRemove,\n\t\tonDuplicate() {\n\t\t\treturn duplicateBlocks( clientIds, updateSelection );\n\t\t},\n\t\tonRemove() {\n\t\t\treturn removeBlocks( clientIds, updateSelection );\n\t\t},\n\t\tonInsertBefore() {\n\t\t\tinsertBeforeBlock( clientIds[ 0 ] );\n\t\t},\n\t\tonInsertAfter() {\n\t\t\tinsertAfterBlock( clientIds[ clientIds.length - 1 ] );\n\t\t},\n\t\tonGroup() {\n\t\t\tif ( ! clientIds.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst groupingBlockName = getGroupingBlockName();\n\n\t\t\t// Activate the `transform` on `core/group` which does the conversion.\n\t\t\tconst newBlocks = switchToBlockType(\n\t\t\t\tgetBlocksByClientId( clientIds ),\n\t\t\t\tgroupingBlockName\n\t\t\t);\n\n\t\t\tif ( ! newBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t},\n\t\tonUngroup() {\n\t\t\tif ( ! clientIds.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst innerBlocks = getBlocks( clientIds[ 0 ] );\n\t\t\tif ( ! innerBlocks.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treplaceBlocks( clientIds, innerBlocks );\n\t\t},\n\t\tonCopy() {\n\t\t\tif ( clientIds.length === 1 ) {\n\t\t\t\tflashBlock( clientIds[ 0 ] );\n\t\t\t}\n\t\t},\n\t\tasync onPasteStyles() {\n\t\t\tawait pasteStyles( getBlocksByClientId( clientIds ) );\n\t\t},\n\t} );\n}\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst CommentIconSlotFill = createSlotFill( Symbol( 'CommentIconSlotFill' ) );\n\nexport default CommentIconSlotFill;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuItem } from '@wordpress/components';\nimport { rawHandler, getBlockContent } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nfunction BlockHTMLConvertButton( { clientId } ) {\n\tconst block = useSelect(\n\t\t( select ) => select( blockEditorStore ).getBlock( clientId ),\n\t\t[ clientId ]\n\t);\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\n\tif ( ! block || block.name !== 'core/html' ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<MenuItem\n\t\t\tonClick={ () =>\n\t\t\t\treplaceBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\trawHandler( { HTML: getBlockContent( block ) } )\n\t\t\t\t)\n\t\t\t}\n\t\t>\n\t\t\t{ __( 'Convert to Blocks' ) }\n\t\t</MenuItem>\n\t);\n}\n\nexport default BlockHTMLConvertButton;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst { Fill: __unstableBlockSettingsMenuFirstItem, Slot } = createSlotFill(\n\t'__unstableBlockSettingsMenuFirstItem'\n);\n\n__unstableBlockSettingsMenuFirstItem.Slot = Slot;\n\nexport default __unstableBlockSettingsMenuFirstItem;\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Contains the properties `ConvertToGroupButton` component needs.\n *\n * @typedef {Object} ConvertToGroupButtonProps\n * @property {string[]}  clientIds         An array of the selected client ids.\n * @property {boolean}   isGroupable       Indicates if the selected blocks can be grouped.\n * @property {boolean}   isUngroupable     Indicates if the selected blocks can be ungrouped.\n * @property {WPBlock[]} blocksSelection   An array of the selected blocks.\n * @property {string}    groupingBlockName The name of block used for handling grouping interactions.\n */\n\n/**\n * Returns the properties `ConvertToGroupButton` component needs to work properly.\n * It is used in `BlockSettingsMenuControls` to know if `ConvertToGroupButton`\n * should be rendered, to avoid ending up with an empty MenuGroup.\n *\n * @param {?string[]} selectedClientIds An optional array of clientIds to group. The selected blocks\n *                                      from the block editor store are used if this is not provided.\n *\n * @return {ConvertToGroupButtonProps} Returns the properties needed by `ConvertToGroupButton`.\n */\nexport default function useConvertToGroupButtonProps( selectedClientIds ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlocksByClientId,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tisUngroupable,\n\t\t\t\tisGroupable,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { getGroupingBlockName, getBlockType } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst clientIds = selectedClientIds?.length\n\t\t\t\t? selectedClientIds\n\t\t\t\t: getSelectedBlockClientIds();\n\t\t\tconst blocksSelection = getBlocksByClientId( clientIds );\n\t\t\tconst [ firstSelectedBlock ] = blocksSelection;\n\t\t\tconst _isUngroupable =\n\t\t\t\tclientIds.length === 1 && isUngroupable( clientIds[ 0 ] );\n\t\t\treturn {\n\t\t\t\tclientIds,\n\t\t\t\tisGroupable: isGroupable( clientIds ),\n\t\t\t\tisUngroupable: _isUngroupable,\n\t\t\t\tblocksSelection,\n\t\t\t\tgroupingBlockName: getGroupingBlockName(),\n\t\t\t\tonUngroup:\n\t\t\t\t\t_isUngroupable &&\n\t\t\t\t\tgetBlockType( firstSelectedBlock.name )?.transforms\n\t\t\t\t\t\t?.ungroup,\n\t\t\t};\n\t\t},\n\t\t[ selectedClientIds ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { MenuItem } from '@wordpress/components';\nimport { _x } from '@wordpress/i18n';\nimport { switchToBlockType } from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { displayShortcut } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport useConvertToGroupButtonProps from './use-convert-to-group-button-props';\nimport BlockGroupToolbar from './toolbar';\n\nfunction ConvertToGroupButton( {\n\tclientIds,\n\tisGroupable,\n\tisUngroupable,\n\tonUngroup,\n\tblocksSelection,\n\tgroupingBlockName,\n\tonClose = () => {},\n} ) {\n\tconst { getSelectedBlockClientIds } = useSelect( blockEditorStore );\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\tconst onConvertToGroup = () => {\n\t\t// Activate the `transform` on the Grouping Block which does the conversion.\n\t\tconst newBlocks = switchToBlockType(\n\t\t\tblocksSelection,\n\t\t\tgroupingBlockName\n\t\t);\n\t\tif ( newBlocks ) {\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t}\n\t};\n\n\tconst onConvertFromGroup = () => {\n\t\tlet innerBlocks = blocksSelection[ 0 ].innerBlocks;\n\t\tif ( ! innerBlocks.length ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( onUngroup ) {\n\t\t\tinnerBlocks = onUngroup(\n\t\t\t\tblocksSelection[ 0 ].attributes,\n\t\t\t\tblocksSelection[ 0 ].innerBlocks\n\t\t\t);\n\t\t}\n\t\treplaceBlocks( clientIds, innerBlocks );\n\t};\n\n\tif ( ! isGroupable && ! isUngroupable ) {\n\t\treturn null;\n\t}\n\n\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\n\treturn (\n\t\t<>\n\t\t\t{ isGroupable && (\n\t\t\t\t<MenuItem\n\t\t\t\t\tshortcut={\n\t\t\t\t\t\tselectedBlockClientIds.length > 1\n\t\t\t\t\t\t\t? displayShortcut.primary( 'g' )\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t}\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tonConvertToGroup();\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ _x( 'Group', 'verb' ) }\n\t\t\t\t</MenuItem>\n\t\t\t) }\n\t\t\t{ isUngroupable && (\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tonConvertFromGroup();\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Ungroup',\n\t\t\t\t\t\t'Ungrouping blocks from within a grouping block back into individual blocks within the Editor'\n\t\t\t\t\t) }\n\t\t\t\t</MenuItem>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport {\n\tBlockGroupToolbar,\n\tConvertToGroupButton,\n\tuseConvertToGroupButtonProps,\n};\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Return details about the block lock status.\n *\n * @param {string} clientId The block client Id.\n *\n * @return {Object} Block lock status\n */\nexport default function useBlockLock( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tcanEditBlock,\n\t\t\t\tcanMoveBlock,\n\t\t\t\tcanRemoveBlock,\n\t\t\t\tcanLockBlockType,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetTemplateLock,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst canEdit = canEditBlock( clientId );\n\t\t\tconst canMove = canMoveBlock( clientId );\n\t\t\tconst canRemove = canRemoveBlock( clientId );\n\n\t\t\treturn {\n\t\t\t\tcanEdit,\n\t\t\t\tcanMove,\n\t\t\t\tcanRemove,\n\t\t\t\tcanLock: canLockBlockType( getBlockName( clientId ) ),\n\t\t\t\tisContentLocked: getTemplateLock( clientId ) === 'contentOnly',\n\t\t\t\tisLocked: ! canEdit || ! canMove || ! canRemove,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst unlock = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8h1.5c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1z\" />\n\t</SVG>\n);\n\nexport default unlock;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst lockOutline = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zM9.8 7c0-1.2 1-2.2 2.2-2.2 1.2 0 2.2 1 2.2 2.2v3H9.8V7zm6.7 11.5h-9v-7h9v7z\" />\n\t</SVG>\n);\n\nexport default lockOutline;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst lock = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zm-2.8 0H9.8V7c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3z\" />\n\t</SVG>\n);\n\nexport default lock;\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useEffect, useState } from '@wordpress/element';\nimport {\n\tButton,\n\tCheckboxControl,\n\tFlex,\n\tFlexItem,\n\tIcon,\n\tModal,\n\tToggleControl,\n} from '@wordpress/components';\nimport { lock as lockIcon, unlock as unlockIcon } from '@wordpress/icons';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { getBlockType } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport useBlockLock from './use-block-lock';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport { store as blockEditorStore } from '../../store';\n\n// Entity based blocks which allow edit locking\nconst ALLOWS_EDIT_LOCKING = [ 'core/navigation' ];\n\nfunction getTemplateLockValue( lock ) {\n\t// Prevents all operations.\n\tif ( lock.remove && lock.move ) {\n\t\treturn 'all';\n\t}\n\n\t// Prevents inserting or removing blocks, but allows moving existing blocks.\n\tif ( lock.remove && ! lock.move ) {\n\t\treturn 'insert';\n\t}\n\n\treturn false;\n}\n\nexport default function BlockLockModal( { clientId, onClose } ) {\n\tconst [ lock, setLock ] = useState( { move: false, remove: false } );\n\tconst { canEdit, canMove, canRemove } = useBlockLock( clientId );\n\tconst { allowsEditLocking, templateLock, hasTemplateLock } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockName, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst blockType = getBlockType( blockName );\n\n\t\t\treturn {\n\t\t\t\tallowsEditLocking: ALLOWS_EDIT_LOCKING.includes( blockName ),\n\t\t\t\ttemplateLock: getBlockAttributes( clientId )?.templateLock,\n\t\t\t\thasTemplateLock: !! blockType?.attributes?.templateLock,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst [ applyTemplateLock, setApplyTemplateLock ] = useState(\n\t\t!! templateLock\n\t);\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\n\tuseEffect( () => {\n\t\tsetLock( {\n\t\t\tmove: ! canMove,\n\t\t\tremove: ! canRemove,\n\t\t\t...( allowsEditLocking ? { edit: ! canEdit } : {} ),\n\t\t} );\n\t}, [ canEdit, canMove, canRemove, allowsEditLocking ] );\n\n\tconst isAllChecked = Object.values( lock ).every( Boolean );\n\tconst isMixed = Object.values( lock ).some( Boolean ) && ! isAllChecked;\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ sprintf(\n\t\t\t\t/* translators: %s: Name of the block. */\n\t\t\t\t__( 'Lock %s' ),\n\t\t\t\tblockInformation.title\n\t\t\t) }\n\t\t\toverlayClassName=\"block-editor-block-lock-modal\"\n\t\t\tonRequestClose={ onClose }\n\t\t\tsize=\"small\"\n\t\t>\n\t\t\t<form\n\t\t\t\tonSubmit={ ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tupdateBlockAttributes( [ clientId ], {\n\t\t\t\t\t\tlock,\n\t\t\t\t\t\ttemplateLock: applyTemplateLock\n\t\t\t\t\t\t\t? getTemplateLockValue( lock )\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t} );\n\t\t\t\t\tonClose();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<fieldset className=\"block-editor-block-lock-modal__options\">\n\t\t\t\t\t<legend>\n\t\t\t\t\t\t{ __( 'Select the features you want to lock' ) }\n\t\t\t\t\t</legend>\n\t\t\t\t\t{ /*\n\t\t\t\t\t * Disable reason: The `list` ARIA role is redundant but\n\t\t\t\t\t * Safari+VoiceOver won't announce the list otherwise.\n\t\t\t\t\t */\n\t\t\t\t\t/* eslint-disable jsx-a11y/no-redundant-roles */ }\n\t\t\t\t\t<ul\n\t\t\t\t\t\trole=\"list\"\n\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__checklist\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__options-all\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Lock all' ) }\n\t\t\t\t\t\t\t\tchecked={ isAllChecked }\n\t\t\t\t\t\t\t\tindeterminate={ isMixed }\n\t\t\t\t\t\t\t\tonChange={ ( newValue ) =>\n\t\t\t\t\t\t\t\t\tsetLock( {\n\t\t\t\t\t\t\t\t\t\tmove: newValue,\n\t\t\t\t\t\t\t\t\t\tremove: newValue,\n\t\t\t\t\t\t\t\t\t\t...( allowsEditLocking\n\t\t\t\t\t\t\t\t\t\t\t? { edit: newValue }\n\t\t\t\t\t\t\t\t\t\t\t: {} ),\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ul\n\t\t\t\t\t\t\t\trole=\"list\"\n\t\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__checklist\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ allowsEditLocking && (\n\t\t\t\t\t\t\t\t\t<li className=\"block-editor-block-lock-modal__checklist-item\">\n\t\t\t\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Lock editing' ) }\n\t\t\t\t\t\t\t\t\t\t\tchecked={ !! lock.edit }\n\t\t\t\t\t\t\t\t\t\t\tonChange={ ( edit ) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetLock( ( prevLock ) => ( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...prevLock,\n\t\t\t\t\t\t\t\t\t\t\t\t\tedit,\n\t\t\t\t\t\t\t\t\t\t\t\t} ) )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__lock-icon\"\n\t\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\t\tlock.edit\n\t\t\t\t\t\t\t\t\t\t\t\t\t? lockIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t: unlockIcon\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<li className=\"block-editor-block-lock-modal__checklist-item\">\n\t\t\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Lock movement' ) }\n\t\t\t\t\t\t\t\t\t\tchecked={ lock.move }\n\t\t\t\t\t\t\t\t\t\tonChange={ ( move ) =>\n\t\t\t\t\t\t\t\t\t\t\tsetLock( ( prevLock ) => ( {\n\t\t\t\t\t\t\t\t\t\t\t\t...prevLock,\n\t\t\t\t\t\t\t\t\t\t\t\tmove,\n\t\t\t\t\t\t\t\t\t\t\t} ) )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__lock-icon\"\n\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\tlock.move ? lockIcon : unlockIcon\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li className=\"block-editor-block-lock-modal__checklist-item\">\n\t\t\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Lock removal' ) }\n\t\t\t\t\t\t\t\t\t\tchecked={ lock.remove }\n\t\t\t\t\t\t\t\t\t\tonChange={ ( remove ) =>\n\t\t\t\t\t\t\t\t\t\t\tsetLock( ( prevLock ) => ( {\n\t\t\t\t\t\t\t\t\t\t\t\t...prevLock,\n\t\t\t\t\t\t\t\t\t\t\t\tremove,\n\t\t\t\t\t\t\t\t\t\t\t} ) )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__lock-icon\"\n\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\tlock.remove ? lockIcon : unlockIcon\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t{ /* eslint-enable jsx-a11y/no-redundant-roles */ }\n\t\t\t\t\t{ hasTemplateLock && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__template-lock\"\n\t\t\t\t\t\t\tlabel={ __( 'Apply to all blocks inside' ) }\n\t\t\t\t\t\t\tchecked={ applyTemplateLock }\n\t\t\t\t\t\t\tdisabled={ lock.move && ! lock.remove }\n\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\tsetApplyTemplateLock( ! applyTemplateLock )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</fieldset>\n\t\t\t\t<Flex\n\t\t\t\t\tclassName=\"block-editor-block-lock-modal__actions\"\n\t\t\t\t\tjustify=\"flex-end\"\n\t\t\t\t\texpanded={ false }\n\t\t\t\t>\n\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ onClose }\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</FlexItem>\n\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Apply' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</FlexItem>\n\t\t\t\t</Flex>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useReducer } from '@wordpress/element';\nimport { MenuItem } from '@wordpress/components';\nimport { lockOutline, unlock } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport useBlockLock from './use-block-lock';\nimport BlockLockModal from './modal';\n\nexport default function BlockLockMenuItem( { clientId } ) {\n\tconst { canLock, isLocked } = useBlockLock( clientId );\n\n\tconst [ isModalOpen, toggleModal ] = useReducer(\n\t\t( isActive ) => ! isActive,\n\t\tfalse\n\t);\n\n\tif ( ! canLock ) {\n\t\treturn null;\n\t}\n\n\tconst label = isLocked ? __( 'Unlock' ) : __( 'Lock' );\n\n\treturn (\n\t\t<>\n\t\t\t<MenuItem\n\t\t\t\ticon={ isLocked ? unlock : lockOutline }\n\t\t\t\tonClick={ toggleModal }\n\t\t\t\taria-expanded={ isModalOpen }\n\t\t\t\taria-haspopup=\"dialog\"\n\t\t\t>\n\t\t\t\t{ label }\n\t\t\t</MenuItem>\n\t\t\t{ isModalOpen && (\n\t\t\t\t<BlockLockModal clientId={ clientId } onClose={ toggleModal } />\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuItem } from '@wordpress/components';\nimport { getBlockType, hasBlockSupport } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst noop = () => {};\n\nexport default function BlockModeToggle( { clientId, onToggle = noop } ) {\n\tconst { blockType, mode, enabled } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlock, getBlockMode, getSettings } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst block = getBlock( clientId );\n\n\t\t\treturn {\n\t\t\t\tmode: getBlockMode( clientId ),\n\t\t\t\tblockType: block ? getBlockType( block.name ) : null,\n\t\t\t\tenabled: getSettings().codeEditingEnabled && !! block?.isValid,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { toggleBlockMode } = useDispatch( blockEditorStore );\n\n\tif (\n\t\t! blockType ||\n\t\t! hasBlockSupport( blockType, 'html', true ) ||\n\t\t! enabled\n\t) {\n\t\treturn null;\n\t}\n\n\tconst label =\n\t\tmode === 'visual' ? __( 'Edit as HTML' ) : __( 'Edit visually' );\n\n\treturn (\n\t\t<MenuItem\n\t\t\tonClick={ () => {\n\t\t\t\ttoggleBlockMode( clientId );\n\t\t\t\tonToggle();\n\t\t\t} }\n\t\t>\n\t\t\t{ label }\n\t\t</MenuItem>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { MenuItem } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\n// The implementation of content locking is mainly in this file, although the mechanism\n// to stop temporarily editing as blocks when an outside block is selected is on component StopEditingAsBlocksOnOutsideSelect\n// at block-editor/src/components/block-list/index.js.\n// Besides the components on this file and the file referenced above the implementation\n// also includes artifacts on the store (actions, reducers, and selector).\n\nexport function ModifyContentLockMenuItem( { clientId, onClose } ) {\n\tconst { templateLock, isLockedByParent, isEditingAsBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetContentLockingParent,\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetTemporarilyEditingAsBlocks,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\t\t\treturn {\n\t\t\t\ttemplateLock: getTemplateLock( clientId ),\n\t\t\t\tisLockedByParent: !! getContentLockingParent( clientId ),\n\t\t\t\tisEditingAsBlocks: getTemporarilyEditingAsBlocks() === clientId,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst blockEditorActions = useDispatch( blockEditorStore );\n\tconst isContentLocked =\n\t\t! isLockedByParent && templateLock === 'contentOnly';\n\tif ( ! isContentLocked && ! isEditingAsBlocks ) {\n\t\treturn null;\n\t}\n\n\tconst { modifyContentLockBlock } = unlock( blockEditorActions );\n\tconst showStartEditingAsBlocks = ! isEditingAsBlocks && isContentLocked;\n\n\treturn (\n\t\tshowStartEditingAsBlocks && (\n\t\t\t<MenuItem\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tmodifyContentLockBlock( clientId );\n\t\t\t\t\tonClose();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ _x( 'Modify', 'Unlock content locked blocks' ) }\n\t\t\t</MenuItem>\n\t\t)\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\tButton,\n\tTextControl,\n\tModal,\n} from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { speak } from '@wordpress/a11y';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useBlockDisplayInformation } from '..';\nimport isEmptyString from './is-empty-string';\n\nexport default function BlockRenameModal( { clientId, onClose } ) {\n\tconst [ editedBlockName, setEditedBlockName ] = useState();\n\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst { metadata } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockAttributes } = select( blockEditorStore );\n\n\t\t\treturn {\n\t\t\t\tmetadata: getBlockAttributes( clientId )?.metadata,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\n\tconst blockName = metadata?.name || '';\n\tconst originalBlockName = blockInformation?.title;\n\t// Pattern Overrides is a WordPress-only feature but it also uses the Block Binding API.\n\t// Ideally this should not be inside the block editor package, but we keep it here for simplicity.\n\tconst hasOverridesWarning =\n\t\t!! blockName &&\n\t\t!! metadata?.bindings &&\n\t\tObject.values( metadata.bindings ).some(\n\t\t\t( binding ) => binding.source === 'core/pattern-overrides'\n\t\t);\n\n\tconst nameHasChanged =\n\t\teditedBlockName !== undefined && editedBlockName !== blockName;\n\tconst nameIsOriginal = editedBlockName === originalBlockName;\n\tconst nameIsEmpty = isEmptyString( editedBlockName );\n\n\tconst isNameValid = nameHasChanged || nameIsOriginal;\n\n\tconst autoSelectInputText = ( event ) => event.target.select();\n\n\tconst handleSubmit = () => {\n\t\tconst newName =\n\t\t\tnameIsOriginal || nameIsEmpty ? undefined : editedBlockName;\n\t\tconst message =\n\t\t\tnameIsOriginal || nameIsEmpty\n\t\t\t\t? sprintf(\n\t\t\t\t\t\t/* translators: %s: new name/label for the block */\n\t\t\t\t\t\t__( 'Block name reset to: \"%s\".' ),\n\t\t\t\t\t\teditedBlockName\n\t\t\t\t  )\n\t\t\t\t: sprintf(\n\t\t\t\t\t\t/* translators: %s: new name/label for the block */\n\t\t\t\t\t\t__( 'Block name changed to: \"%s\".' ),\n\t\t\t\t\t\teditedBlockName\n\t\t\t\t  );\n\n\t\t// Must be assertive to immediately announce change.\n\t\tspeak( message, 'assertive' );\n\t\tupdateBlockAttributes( [ clientId ], {\n\t\t\tmetadata: {\n\t\t\t\t...metadata,\n\t\t\t\tname: newName,\n\t\t\t},\n\t\t} );\n\n\t\t// Immediate close avoids ability to hit save multiple times.\n\t\tonClose();\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Rename' ) }\n\t\t\tonRequestClose={ onClose }\n\t\t\toverlayClassName=\"block-editor-block-rename-modal\"\n\t\t\tfocusOnMount=\"firstContentElement\"\n\t\t\tsize=\"small\"\n\t\t>\n\t\t\t<form\n\t\t\t\tonSubmit={ ( e ) => {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif ( ! isNameValid ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\thandleSubmit();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvalue={ editedBlockName ?? blockName }\n\t\t\t\t\t\tlabel={ __( 'Name' ) }\n\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\thasOverridesWarning\n\t\t\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t\t\t'This block allows overrides. Changing the name can cause problems with content entered into instances of this pattern.'\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplaceholder={ originalBlockName }\n\t\t\t\t\t\tonChange={ setEditedBlockName }\n\t\t\t\t\t\tonFocus={ autoSelectInputText }\n\t\t\t\t\t/>\n\t\t\t\t\t<HStack justify=\"right\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ onClose }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t\t\tdisabled={ ! isNameValid }\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</HStack>\n\t\t\t\t</VStack>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n}\n","export default function isEmptyString( testString ) {\n\treturn testString?.trim()?.length === 0;\n}\n","/**\n * WordPress dependencies\n */\nimport { MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockRenameModal from './modal';\n\nexport default function BlockRenameControl( { clientId } ) {\n\tconst [ renamingBlock, setRenamingBlock ] = useState( false );\n\n\treturn (\n\t\t<>\n\t\t\t<MenuItem\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tsetRenamingBlock( true );\n\t\t\t\t} }\n\t\t\t\taria-expanded={ renamingBlock }\n\t\t\t\taria-haspopup=\"dialog\"\n\t\t\t>\n\t\t\t\t{ __( 'Rename' ) }\n\t\t\t</MenuItem>\n\t\t\t{ renamingBlock && (\n\t\t\t\t<BlockRenameModal\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tonClose={ () => setRenamingBlock( false ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tcreateSlotFill,\n\tMenuGroup,\n\t__experimentalStyleProvider as StyleProvider,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport {\n\tuseConvertToGroupButtonProps,\n\tConvertToGroupButton,\n} from '../convert-to-group-buttons';\nimport { BlockLockMenuItem, useBlockLock } from '../block-lock';\nimport { store as blockEditorStore } from '../../store';\nimport BlockModeToggle from '../block-settings-menu/block-mode-toggle';\nimport { ModifyContentLockMenuItem } from '../content-lock';\nimport { BlockRenameControl, useBlockRename } from '../block-rename';\n\nconst { Fill, Slot } = createSlotFill( 'BlockSettingsMenuControls' );\n\nconst BlockSettingsMenuControlsSlot = ( { fillProps, clientIds = null } ) => {\n\tconst { selectedBlocks, selectedClientIds, isContentOnly } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockNamesByClientId,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst ids =\n\t\t\t\tclientIds !== null ? clientIds : getSelectedBlockClientIds();\n\t\t\treturn {\n\t\t\t\tselectedBlocks: getBlockNamesByClientId( ids ),\n\t\t\t\tselectedClientIds: ids,\n\t\t\t\tisContentOnly:\n\t\t\t\t\tgetBlockEditingMode( ids[ 0 ] ) === 'contentOnly',\n\t\t\t};\n\t\t},\n\t\t[ clientIds ]\n\t);\n\n\tconst { canLock } = useBlockLock( selectedClientIds[ 0 ] );\n\tconst { canRename } = useBlockRename( selectedBlocks[ 0 ] );\n\tconst showLockButton =\n\t\tselectedClientIds.length === 1 && canLock && ! isContentOnly;\n\tconst showRenameButton =\n\t\tselectedClientIds.length === 1 && canRename && ! isContentOnly;\n\n\t// Check if current selection of blocks is Groupable or Ungroupable\n\t// and pass this props down to ConvertToGroupButton.\n\tconst convertToGroupButtonProps =\n\t\tuseConvertToGroupButtonProps( selectedClientIds );\n\tconst { isGroupable, isUngroupable } = convertToGroupButtonProps;\n\tconst showConvertToGroupButton =\n\t\t( isGroupable || isUngroupable ) && ! isContentOnly;\n\n\treturn (\n\t\t<Slot\n\t\t\tfillProps={ {\n\t\t\t\t...fillProps,\n\t\t\t\tselectedBlocks,\n\t\t\t\tselectedClientIds,\n\t\t\t} }\n\t\t>\n\t\t\t{ ( fills ) => {\n\t\t\t\tif (\n\t\t\t\t\t! fills?.length > 0 &&\n\t\t\t\t\t! showConvertToGroupButton &&\n\t\t\t\t\t! showLockButton\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t{ showConvertToGroupButton && (\n\t\t\t\t\t\t\t<ConvertToGroupButton\n\t\t\t\t\t\t\t\t{ ...convertToGroupButtonProps }\n\t\t\t\t\t\t\t\tonClose={ fillProps?.onClose }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ showLockButton && (\n\t\t\t\t\t\t\t<BlockLockMenuItem\n\t\t\t\t\t\t\t\tclientId={ selectedClientIds[ 0 ] }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ showRenameButton && (\n\t\t\t\t\t\t\t<BlockRenameControl\n\t\t\t\t\t\t\t\tclientId={ selectedClientIds[ 0 ] }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ fills }\n\t\t\t\t\t\t{ selectedClientIds.length === 1 && (\n\t\t\t\t\t\t\t<ModifyContentLockMenuItem\n\t\t\t\t\t\t\t\tclientId={ selectedClientIds[ 0 ] }\n\t\t\t\t\t\t\t\tonClose={ fillProps?.onClose }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ fillProps?.count === 1 && ! isContentOnly && (\n\t\t\t\t\t\t\t<BlockModeToggle\n\t\t\t\t\t\t\t\tclientId={ fillProps?.firstBlockClientId }\n\t\t\t\t\t\t\t\tonToggle={ fillProps?.onClose }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t);\n\t\t\t} }\n\t\t</Slot>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-settings-menu-controls/README.md\n *\n * @param {Object} props Fill props.\n * @return {Element} Element.\n */\nfunction BlockSettingsMenuControls( { ...props } ) {\n\treturn (\n\t\t<StyleProvider document={ document }>\n\t\t\t<Fill { ...props } />\n\t\t</StyleProvider>\n\t);\n}\n\nBlockSettingsMenuControls.Slot = BlockSettingsMenuControlsSlot;\n\nexport default BlockSettingsMenuControls;\n","/**\n * WordPress dependencies\n */\nimport { getBlockSupport } from '@wordpress/blocks';\n\nexport default function useBlockRename( name ) {\n\treturn {\n\t\tcanRename: getBlockSupport( name, 'renaming', true ),\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { MenuItem } from '@wordpress/components';\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useDispatch } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { useShowHoveredOrFocusedGestures } from '../block-toolbar/utils';\nimport { store as blockEditorStore } from '../../store';\n\nexport default function BlockParentSelectorMenuItem( {\n\tparentClientId,\n\tparentBlockType,\n} ) {\n\tconst isSmallViewport = useViewportMatch( 'medium', '<' );\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\n\t// Allows highlighting the parent block outline when focusing or hovering\n\t// the parent block selector within the child.\n\tconst menuItemRef = useRef();\n\tconst gesturesProps = useShowHoveredOrFocusedGestures( {\n\t\tref: menuItemRef,\n\t\thighlightParent: true,\n\t} );\n\n\tif ( ! isSmallViewport ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<MenuItem\n\t\t\t{ ...gesturesProps }\n\t\t\tref={ menuItemRef }\n\t\t\ticon={ <BlockIcon icon={ parentBlockType.icon } /> }\n\t\t\tonClick={ () => selectBlock( parentClientId ) }\n\t\t>\n\t\t\t{ sprintf(\n\t\t\t\t/* translators: %s: Name of the block's parent. */\n\t\t\t\t__( 'Select parent block (%s)' ),\n\t\t\t\tparentBlockType.title\n\t\t\t) }\n\t\t</MenuItem>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tgetBlockType,\n\tserialize,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { moreVertical } from '@wordpress/icons';\nimport { Children, cloneElement } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\nimport { pipe, useCopyToClipboard } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockActions from '../block-actions';\nimport CommentIconSlotFill from '../../components/collab/block-comment-icon-slot';\nimport BlockHTMLConvertButton from './block-html-convert-button';\nimport __unstableBlockSettingsMenuFirstItem from './block-settings-menu-first-item';\nimport BlockSettingsMenuControls from '../block-settings-menu-controls';\nimport BlockParentSelectorMenuItem from './block-parent-selector-menu-item';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\nimport { useNotifyCopy } from '../../utils/use-notify-copy';\n\nconst POPOVER_PROPS = {\n\tclassName: 'block-editor-block-settings-menu__popover',\n\tplacement: 'bottom-start',\n};\n\nfunction CopyMenuItem( {\n\tclientIds,\n\tonCopy,\n\tlabel,\n\tshortcut,\n\teventType = 'copy',\n\t__experimentalUpdateSelection: updateSelection = false,\n} ) {\n\tconst { getBlocksByClientId } = useSelect( blockEditorStore );\n\tconst { removeBlocks } = useDispatch( blockEditorStore );\n\tconst notifyCopy = useNotifyCopy();\n\tconst ref = useCopyToClipboard(\n\t\t() => serialize( getBlocksByClientId( clientIds ) ),\n\t\t() => {\n\t\t\tswitch ( eventType ) {\n\t\t\t\tcase 'copy':\n\t\t\t\tcase 'copyStyles':\n\t\t\t\t\tonCopy();\n\t\t\t\t\tnotifyCopy( eventType, clientIds );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'cut':\n\t\t\t\t\tnotifyCopy( eventType, clientIds );\n\t\t\t\t\tremoveBlocks( clientIds, updateSelection );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t);\n\tconst copyMenuItemLabel = label ? label : __( 'Copy' );\n\treturn (\n\t\t<MenuItem ref={ ref } shortcut={ shortcut }>\n\t\t\t{ copyMenuItemLabel }\n\t\t</MenuItem>\n\t);\n}\n\nexport function BlockSettingsDropdown( {\n\tblock,\n\tclientIds,\n\tchildren,\n\t__experimentalSelectBlock,\n\t...props\n} ) {\n\t// Get the client id of the current block for this menu, if one is set.\n\tconst currentClientId = block?.clientId;\n\tconst count = clientIds.length;\n\tconst firstBlockClientId = clientIds[ 0 ];\n\n\tconst {\n\t\tfirstParentClientId,\n\t\tparentBlockType,\n\t\tpreviousBlockClientId,\n\t\tselectedBlockClientIds,\n\t\topenedBlockSettingsMenu,\n\t\tisContentOnly,\n\t\tisZoomOut,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetPreviousBlockClientId,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tgetOpenedBlockSettingsMenu,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t\tisZoomOut: _isZoomOut,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\n\t\t\tconst { getActiveBlockVariation } = select( blocksStore );\n\n\t\t\tconst _firstParentClientId =\n\t\t\t\tgetBlockRootClientId( firstBlockClientId );\n\t\t\tconst parentBlockName =\n\t\t\t\t_firstParentClientId && getBlockName( _firstParentClientId );\n\n\t\t\treturn {\n\t\t\t\tfirstParentClientId: _firstParentClientId,\n\t\t\t\tparentBlockType:\n\t\t\t\t\t_firstParentClientId &&\n\t\t\t\t\t( getActiveBlockVariation(\n\t\t\t\t\t\tparentBlockName,\n\t\t\t\t\t\tgetBlockAttributes( _firstParentClientId )\n\t\t\t\t\t) ||\n\t\t\t\t\t\tgetBlockType( parentBlockName ) ),\n\t\t\t\tpreviousBlockClientId:\n\t\t\t\t\tgetPreviousBlockClientId( firstBlockClientId ),\n\t\t\t\tselectedBlockClientIds: getSelectedBlockClientIds(),\n\t\t\t\topenedBlockSettingsMenu: getOpenedBlockSettingsMenu(),\n\t\t\t\tisContentOnly:\n\t\t\t\t\tgetBlockEditingMode( firstBlockClientId ) === 'contentOnly',\n\t\t\t\tisZoomOut: _isZoomOut(),\n\t\t\t};\n\t\t},\n\t\t[ firstBlockClientId ]\n\t);\n\n\tconst { getBlockOrder, getSelectedBlockClientIds } =\n\t\tuseSelect( blockEditorStore );\n\n\tconst { setOpenedBlockSettingsMenu } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\n\tconst shortcuts = useSelect( ( select ) => {\n\t\tconst { getShortcutRepresentation } = select( keyboardShortcutsStore );\n\t\treturn {\n\t\t\tcopy: getShortcutRepresentation( 'core/block-editor/copy' ),\n\t\t\tcut: getShortcutRepresentation( 'core/block-editor/cut' ),\n\t\t\tduplicate: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/duplicate'\n\t\t\t),\n\t\t\tremove: getShortcutRepresentation( 'core/block-editor/remove' ),\n\t\t\tinsertAfter: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/insert-after'\n\t\t\t),\n\t\t\tinsertBefore: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/insert-before'\n\t\t\t),\n\t\t};\n\t}, [] );\n\tconst hasSelectedBlocks = selectedBlockClientIds.length > 0;\n\n\tasync function updateSelectionAfterDuplicate( clientIdsPromise ) {\n\t\tif ( ! __experimentalSelectBlock ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst ids = await clientIdsPromise;\n\t\tif ( ids && ids[ 0 ] ) {\n\t\t\t__experimentalSelectBlock( ids[ 0 ], false );\n\t\t}\n\t}\n\n\tfunction updateSelectionAfterRemove() {\n\t\tif ( ! __experimentalSelectBlock ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet blockToFocus = previousBlockClientId || firstParentClientId;\n\n\t\t// Focus the first block if there's no previous block nor parent block.\n\t\tif ( ! blockToFocus ) {\n\t\t\tblockToFocus = getBlockOrder()[ 0 ];\n\t\t}\n\n\t\t// Only update the selection if the original selection is removed.\n\t\tconst shouldUpdateSelection =\n\t\t\thasSelectedBlocks && getSelectedBlockClientIds().length === 0;\n\n\t\t__experimentalSelectBlock( blockToFocus, shouldUpdateSelection );\n\t}\n\n\t// This can occur when the selected block (the parent)\n\t// displays child blocks within a List View.\n\tconst parentBlockIsSelected =\n\t\tselectedBlockClientIds?.includes( firstParentClientId );\n\n\t// When a currentClientId is in use, treat the menu as a controlled component.\n\t// This ensures that only one block settings menu is open at a time.\n\t// This is a temporary solution to work around an issue with `onFocusOutside`\n\t// where it does not allow a dropdown to be closed if focus was never within\n\t// the dropdown to begin with. Examples include a user either CMD+Clicking or\n\t// right clicking into an inactive window.\n\t// See: https://github.com/WordPress/gutenberg/pull/54083\n\tconst open = ! currentClientId\n\t\t? undefined\n\t\t: openedBlockSettingsMenu === currentClientId || false;\n\n\tfunction onToggle( localOpen ) {\n\t\tif ( localOpen && openedBlockSettingsMenu !== currentClientId ) {\n\t\t\tsetOpenedBlockSettingsMenu( currentClientId );\n\t\t} else if (\n\t\t\t! localOpen &&\n\t\t\topenedBlockSettingsMenu &&\n\t\t\topenedBlockSettingsMenu === currentClientId\n\t\t) {\n\t\t\tsetOpenedBlockSettingsMenu( undefined );\n\t\t}\n\t}\n\n\tconst shouldShowBlockParentMenuItem =\n\t\t! parentBlockIsSelected && !! firstParentClientId;\n\n\treturn (\n\t\t<BlockActions\n\t\t\tclientIds={ clientIds }\n\t\t\t__experimentalUpdateSelection={ ! __experimentalSelectBlock }\n\t\t>\n\t\t\t{ ( {\n\t\t\t\tcanCopyStyles,\n\t\t\t\tcanDuplicate,\n\t\t\t\tcanInsertBlock,\n\t\t\t\tcanRemove,\n\t\t\t\tonDuplicate,\n\t\t\t\tonInsertAfter,\n\t\t\t\tonInsertBefore,\n\t\t\t\tonRemove,\n\t\t\t\tonCopy,\n\t\t\t\tonPasteStyles,\n\t\t\t} ) => {\n\t\t\t\t// It is possible that some plugins register fills for this menu\n\t\t\t\t// even if Core doesn't render anything in the block settings menu.\n\t\t\t\t// in which case, we may want to render the menu anyway.\n\t\t\t\t// That said for now, we can start more conservative.\n\t\t\t\tconst isEmpty =\n\t\t\t\t\t! canRemove &&\n\t\t\t\t\t! canDuplicate &&\n\t\t\t\t\t! canInsertBlock &&\n\t\t\t\t\tisContentOnly;\n\n\t\t\t\tif ( isEmpty ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\t\tlabel={ __( 'Options' ) }\n\t\t\t\t\t\tclassName=\"block-editor-block-settings-menu\"\n\t\t\t\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\t\t\t\topen={ open }\n\t\t\t\t\t\tonToggle={ onToggle }\n\t\t\t\t\t\tnoIcons\n\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t<__unstableBlockSettingsMenuFirstItem.Slot\n\t\t\t\t\t\t\t\t\t\tfillProps={ { onClose } }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ shouldShowBlockParentMenuItem && (\n\t\t\t\t\t\t\t\t\t\t<BlockParentSelectorMenuItem\n\t\t\t\t\t\t\t\t\t\t\tparentClientId={\n\t\t\t\t\t\t\t\t\t\t\t\tfirstParentClientId\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tparentBlockType={ parentBlockType }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t\t\t<BlockHTMLConvertButton\n\t\t\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t<CopyMenuItem\n\t\t\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t\t\tonCopy={ onCopy }\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.copy }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<CopyMenuItem\n\t\t\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Cut' ) }\n\t\t\t\t\t\t\t\t\t\teventType=\"cut\"\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.cut }\n\t\t\t\t\t\t\t\t\t\t__experimentalUpdateSelection={\n\t\t\t\t\t\t\t\t\t\t\t! __experimentalSelectBlock\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ canDuplicate && (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\tonDuplicate,\n\t\t\t\t\t\t\t\t\t\t\t\tupdateSelectionAfterDuplicate\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.duplicate }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Duplicate' ) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ canInsertBlock && ! isZoomOut && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\t\tonInsertBefore\n\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\tshortcut={\n\t\t\t\t\t\t\t\t\t\t\t\t\tshortcuts.insertBefore\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Add before' ) }\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\t\tonInsertAfter\n\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\tshortcut={\n\t\t\t\t\t\t\t\t\t\t\t\t\tshortcuts.insertAfter\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Add after' ) }\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t<CommentIconSlotFill.Slot\n\t\t\t\t\t\t\t\t\t\tfillProps={ { onClose } }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t{ canCopyStyles && ! isContentOnly && (\n\t\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t\t<CopyMenuItem\n\t\t\t\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t\t\t\tonCopy={ onCopy }\n\t\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Copy styles' ) }\n\t\t\t\t\t\t\t\t\t\t\teventType=\"copyStyles\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<MenuItem onClick={ onPasteStyles }>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Paste styles' ) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ ! isContentOnly && (\n\t\t\t\t\t\t\t\t\t<BlockSettingsMenuControls.Slot\n\t\t\t\t\t\t\t\t\t\tfillProps={ {\n\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\tcount,\n\t\t\t\t\t\t\t\t\t\t\tfirstBlockClientId,\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ typeof children === 'function'\n\t\t\t\t\t\t\t\t\t? children( { onClose } )\n\t\t\t\t\t\t\t\t\t: Children.map( ( child ) =>\n\t\t\t\t\t\t\t\t\t\t\tcloneElement( child, { onClose } )\n\t\t\t\t\t\t\t\t\t  ) }\n\t\t\t\t\t\t\t\t{ canRemove && (\n\t\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\tonRemove,\n\t\t\t\t\t\t\t\t\t\t\t\tupdateSelectionAfterRemove\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.remove }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Delete' ) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</DropdownMenu>\n\t\t\t\t);\n\t\t\t} }\n\t\t</BlockActions>\n\t);\n}\n\nexport default BlockSettingsDropdown;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst CommentIconToolbarSlotFill = createSlotFill(\n\tSymbol( 'CommentIconToolbarSlotFill' )\n);\n\nexport default CommentIconToolbarSlotFill;\n","/**\n * WordPress dependencies\n */\nimport { ToolbarGroup, ToolbarItem } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockSettingsDropdown from './block-settings-dropdown';\nimport CommentIconToolbarSlotFill from '../../components/collab/block-comment-icon-toolbar-slot';\n\nexport function BlockSettingsMenu( { clientIds, ...props } ) {\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<CommentIconToolbarSlotFill.Slot />\n\n\t\t\t<ToolbarItem>\n\t\t\t\t{ ( toggleProps ) => (\n\t\t\t\t\t<BlockSettingsDropdown\n\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\ttoggleProps={ toggleProps }\n\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</ToolbarItem>\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default BlockSettingsMenu;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { useReducer, useRef, useEffect } from '@wordpress/element';\nimport { lock, unlock } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockLockModal from './modal';\nimport useBlockLock from './use-block-lock';\n\nexport default function BlockLockToolbar( { clientId } ) {\n\tconst { canLock, isLocked } = useBlockLock( clientId );\n\n\tconst [ isModalOpen, toggleModal ] = useReducer(\n\t\t( isActive ) => ! isActive,\n\t\tfalse\n\t);\n\n\tconst hasLockButtonShownRef = useRef( false );\n\n\t// If the block lock button has been shown, we don't want to remove it\n\t// from the toolbar until the toolbar is rendered again without it.\n\t// Removing it beforehand can cause focus loss issues, such as when\n\t// unlocking the block from the modal. It needs to return focus from\n\t// whence it came, and to do that, we need to leave the button in the toolbar.\n\tuseEffect( () => {\n\t\tif ( isLocked ) {\n\t\t\thasLockButtonShownRef.current = true;\n\t\t}\n\t}, [ isLocked ] );\n\n\tif ( ! isLocked && ! hasLockButtonShownRef.current ) {\n\t\treturn null;\n\t}\n\n\tlet label = isLocked ? __( 'Unlock' ) : __( 'Lock' );\n\n\tif ( ! canLock && isLocked ) {\n\t\tlabel = __( 'Locked' );\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<ToolbarGroup className=\"block-editor-block-lock-toolbar\">\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tdisabled={ ! canLock }\n\t\t\t\t\ticon={ isLocked ? lock : unlock }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\tonClick={ toggleModal }\n\t\t\t\t\taria-expanded={ isModalOpen }\n\t\t\t\t\taria-haspopup=\"dialog\"\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t\t{ isModalOpen && (\n\t\t\t\t<BlockLockModal clientId={ clientId } onClose={ toggleModal } />\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst group = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M18 4h-7c-1.1 0-2 .9-2 2v3H6c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2v-3h3c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4.5 14c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-7c0-.3.2-.5.5-.5h3V13c0 1.1.9 2 2 2h2.5v3zm0-4.5H11c-.3 0-.5-.2-.5-.5v-2.5H13c.3 0 .5.2.5.5v2.5zm5-.5c0 .3-.2.5-.5.5h-3V11c0-1.1-.9-2-2-2h-2.5V6c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5v7z\" />\n\t</SVG>\n);\n\nexport default group;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst row = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4 6.5h5a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H4V16h5a.5.5 0 0 0 .5-.5v-7A.5.5 0 0 0 9 8H4V6.5Zm16 0h-5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h5V16h-5a.5.5 0 0 1-.5-.5v-7A.5.5 0 0 1 15 8h5V6.5Z\" />\n\t</SVG>\n);\n\nexport default row;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst stack = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M17.5 4v5a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V4H8v5a.5.5 0 0 0 .5.5h7A.5.5 0 0 0 16 9V4h1.5Zm0 16v-5a2 2 0 0 0-2-2h-7a2 2 0 0 0-2 2v5H8v-5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v5h1.5Z\" />\n\t</SVG>\n);\n\nexport default stack;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst grid = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"m3 5c0-1.10457.89543-2 2-2h13.5c1.1046 0 2 .89543 2 2v13.5c0 1.1046-.8954 2-2 2h-13.5c-1.10457 0-2-.8954-2-2zm2-.5h6v6.5h-6.5v-6c0-.27614.22386-.5.5-.5zm-.5 8v6c0 .2761.22386.5.5.5h6v-6.5zm8 0v6.5h6c.2761 0 .5-.2239.5-.5v-6zm0-8v6.5h6.5v-6c0-.27614-.2239-.5-.5-.5z\"\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t/>\n\t</SVG>\n);\n\nexport default grid;\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { switchToBlockType, store as blocksStore } from '@wordpress/blocks';\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { group, row, stack, grid } from '@wordpress/icons';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useConvertToGroupButtonProps } from '../convert-to-group-buttons';\nimport { store as blockEditorStore } from '../../store';\n\nconst layouts = {\n\tgroup: { type: 'constrained' },\n\trow: { type: 'flex', flexWrap: 'nowrap' },\n\tstack: { type: 'flex', orientation: 'vertical' },\n\tgrid: { type: 'grid' },\n};\n\nfunction BlockGroupToolbar() {\n\tconst { blocksSelection, clientIds, groupingBlockName, isGroupable } =\n\t\tuseConvertToGroupButtonProps();\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\n\tconst { canRemove, variations } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { canRemoveBlocks } = select( blockEditorStore );\n\t\t\tconst { getBlockVariations } = select( blocksStore );\n\n\t\t\treturn {\n\t\t\t\tcanRemove: canRemoveBlocks( clientIds ),\n\t\t\t\tvariations: getBlockVariations(\n\t\t\t\t\tgroupingBlockName,\n\t\t\t\t\t'transform'\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientIds, groupingBlockName ]\n\t);\n\n\tconst onConvertToGroup = ( layout ) => {\n\t\tconst newBlocks = switchToBlockType(\n\t\t\tblocksSelection,\n\t\t\tgroupingBlockName\n\t\t);\n\n\t\tif ( typeof layout !== 'string' ) {\n\t\t\tlayout = 'group';\n\t\t}\n\n\t\tif ( newBlocks && newBlocks.length > 0 ) {\n\t\t\t// Because the block is not in the store yet we can't use\n\t\t\t// updateBlockAttributes so need to manually update attributes.\n\t\t\tnewBlocks[ 0 ].attributes.layout = layouts[ layout ];\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t}\n\t};\n\n\tconst onConvertToRow = () => onConvertToGroup( 'row' );\n\tconst onConvertToStack = () => onConvertToGroup( 'stack' );\n\tconst onConvertToGrid = () => onConvertToGroup( 'grid' );\n\n\t// Don't render the button if the current selection cannot be grouped.\n\t// A good example is selecting multiple button blocks within a Buttons block:\n\t// The group block is not a valid child of Buttons, so we should not show the button.\n\t// Any blocks that are locked against removal also cannot be grouped.\n\tif ( ! isGroupable || ! canRemove ) {\n\t\treturn null;\n\t}\n\n\tconst canInsertRow = !! variations.find(\n\t\t( { name } ) => name === 'group-row'\n\t);\n\tconst canInsertStack = !! variations.find(\n\t\t( { name } ) => name === 'group-stack'\n\t);\n\tconst canInsertGrid = !! variations.find(\n\t\t( { name } ) => name === 'group-grid'\n\t);\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\ticon={ group }\n\t\t\t\tlabel={ _x( 'Group', 'action: convert blocks to group' ) }\n\t\t\t\tonClick={ onConvertToGroup }\n\t\t\t/>\n\t\t\t{ canInsertRow && (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ row }\n\t\t\t\t\tlabel={ _x( 'Row', 'action: convert blocks to row' ) }\n\t\t\t\t\tonClick={ onConvertToRow }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ canInsertStack && (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ stack }\n\t\t\t\t\tlabel={ _x( 'Stack', 'action: convert blocks to stack' ) }\n\t\t\t\t\tonClick={ onConvertToStack }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ canInsertGrid && (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ grid }\n\t\t\t\t\tlabel={ _x( 'Grid', 'action: convert blocks to grid' ) }\n\t\t\t\t\tonClick={ onConvertToGrid }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default BlockGroupToolbar;\n","/**\n * WordPress dependencies\n */\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function BlockEditVisuallyButton( { clientIds } ) {\n\t// Edit visually only works for single block selection.\n\tconst clientId = clientIds.length === 1 ? clientIds[ 0 ] : undefined;\n\tconst canEditVisually = useSelect(\n\t\t( select ) =>\n\t\t\t!! clientId &&\n\t\t\tselect( blockEditorStore ).getBlockMode( clientId ) === 'html',\n\t\t[ clientId ]\n\t);\n\tconst { toggleBlockMode } = useDispatch( blockEditorStore );\n\n\tif ( ! canEditVisually ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\tonClick={ () => {\n\t\t\t\t\ttoggleBlockMode( clientId );\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ __( 'Edit visually' ) }\n\t\t\t</ToolbarButton>\n\t\t</ToolbarGroup>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { createContext } from '@wordpress/element';\n\nconst __unstableBlockNameContext = createContext( '' );\n\nexport default __unstableBlockNameContext;\n","/**\n * WordPress dependencies\n */\nimport { NavigableMenu, Toolbar } from '@wordpress/components';\nimport {\n\tuseState,\n\tuseRef,\n\tuseLayoutEffect,\n\tuseEffect,\n\tuseCallback,\n} from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\nimport { focus } from '@wordpress/dom';\nimport { useShortcut } from '@wordpress/keyboard-shortcuts';\nimport { ESCAPE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nfunction hasOnlyToolbarItem( elements ) {\n\tconst dataProp = 'toolbarItem';\n\treturn ! elements.some( ( element ) => ! ( dataProp in element.dataset ) );\n}\n\nfunction getAllFocusableToolbarItemsIn( container ) {\n\treturn Array.from(\n\t\tcontainer.querySelectorAll( '[data-toolbar-item]:not([disabled])' )\n\t);\n}\n\nfunction hasFocusWithin( container ) {\n\treturn container.contains( container.ownerDocument.activeElement );\n}\n\nfunction focusFirstTabbableIn( container ) {\n\tconst [ firstTabbable ] = focus.tabbable.find( container );\n\n\tif ( firstTabbable ) {\n\t\tfirstTabbable.focus( {\n\t\t\t// When focusing newly mounted toolbars,\n\t\t\t// the position of the popover is often not right on the first render\n\t\t\t// This prevents the layout shifts when focusing the dialogs.\n\t\t\tpreventScroll: true,\n\t\t} );\n\t}\n}\n\nfunction useIsAccessibleToolbar( toolbarRef ) {\n\t/*\n\t * By default, we'll assume the starting accessible state of the Toolbar\n\t * is true, as it seems to be the most common case.\n\t *\n\t * Transitioning from an (initial) false to true state causes the\n\t * <Toolbar /> component to mount twice, which is causing undesired\n\t * side-effects. These side-effects appear to only affect certain\n\t * E2E tests.\n\t *\n\t * This was initial discovered in this pull-request:\n\t * https://github.com/WordPress/gutenberg/pull/23425\n\t */\n\tconst initialAccessibleToolbarState = true;\n\n\t// By default, it's gonna render NavigableMenu. If all the tabbable elements\n\t// inside the toolbar are ToolbarItem components (or derived components like\n\t// ToolbarButton), then we can wrap them with the accessible Toolbar\n\t// component.\n\tconst [ isAccessibleToolbar, setIsAccessibleToolbar ] = useState(\n\t\tinitialAccessibleToolbarState\n\t);\n\n\tconst determineIsAccessibleToolbar = useCallback( () => {\n\t\tconst tabbables = focus.tabbable.find( toolbarRef.current );\n\t\tconst onlyToolbarItem = hasOnlyToolbarItem( tabbables );\n\t\tif ( ! onlyToolbarItem ) {\n\t\t\tdeprecated( 'Using custom components as toolbar controls', {\n\t\t\t\tsince: '5.6',\n\t\t\t\talternative:\n\t\t\t\t\t'ToolbarItem, ToolbarButton or ToolbarDropdownMenu components',\n\t\t\t\tlink: 'https://developer.wordpress.org/block-editor/components/toolbar-button/#inside-blockcontrols',\n\t\t\t} );\n\t\t}\n\t\tsetIsAccessibleToolbar( onlyToolbarItem );\n\t}, [ toolbarRef ] );\n\n\tuseLayoutEffect( () => {\n\t\t// Toolbar buttons may be rendered asynchronously, so we use\n\t\t// MutationObserver to check if the toolbar subtree has been modified.\n\t\tconst observer = new window.MutationObserver(\n\t\t\tdetermineIsAccessibleToolbar\n\t\t);\n\t\tobserver.observe( toolbarRef.current, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true,\n\t\t} );\n\t\treturn () => observer.disconnect();\n\t}, [ determineIsAccessibleToolbar, isAccessibleToolbar, toolbarRef ] );\n\n\treturn isAccessibleToolbar;\n}\n\nfunction useToolbarFocus( {\n\ttoolbarRef,\n\tfocusOnMount,\n\tisAccessibleToolbar,\n\tdefaultIndex,\n\tonIndexChange,\n\tshouldUseKeyboardFocusShortcut,\n\tfocusEditorOnEscape,\n} ) {\n\t// Make sure we don't use modified versions of this prop.\n\tconst [ initialFocusOnMount ] = useState( focusOnMount );\n\tconst [ initialIndex ] = useState( defaultIndex );\n\n\tconst focusToolbar = useCallback( () => {\n\t\tfocusFirstTabbableIn( toolbarRef.current );\n\t}, [ toolbarRef ] );\n\n\tconst focusToolbarViaShortcut = () => {\n\t\tif ( shouldUseKeyboardFocusShortcut ) {\n\t\t\tfocusToolbar();\n\t\t}\n\t};\n\n\t// Focus on toolbar when pressing alt+F10 when the toolbar is visible.\n\tuseShortcut( 'core/block-editor/focus-toolbar', focusToolbarViaShortcut );\n\n\tuseEffect( () => {\n\t\tif ( initialFocusOnMount ) {\n\t\t\tfocusToolbar();\n\t\t}\n\t}, [ isAccessibleToolbar, initialFocusOnMount, focusToolbar ] );\n\n\tuseEffect( () => {\n\t\t// Store ref so we have access on useEffect cleanup: https://legacy.reactjs.org/blog/2020/08/10/react-v17-rc.html#effect-cleanup-timing\n\t\tconst navigableToolbarRef = toolbarRef.current;\n\t\t// If initialIndex is passed, we focus on that toolbar item when the\n\t\t// toolbar gets mounted and initial focus is not forced.\n\t\t// We have to wait for the next browser paint because block controls aren't\n\t\t// rendered right away when the toolbar gets mounted.\n\t\tlet raf = 0;\n\n\t\t// If the toolbar already had focus before the render, we don't want to move it.\n\t\t// https://github.com/WordPress/gutenberg/issues/58511\n\t\tif (\n\t\t\t! initialFocusOnMount &&\n\t\t\t! hasFocusWithin( navigableToolbarRef )\n\t\t) {\n\t\t\traf = window.requestAnimationFrame( () => {\n\t\t\t\tconst items =\n\t\t\t\t\tgetAllFocusableToolbarItemsIn( navigableToolbarRef );\n\t\t\t\tconst index = initialIndex || 0;\n\t\t\t\tif ( items[ index ] && hasFocusWithin( navigableToolbarRef ) ) {\n\t\t\t\t\titems[ index ].focus( {\n\t\t\t\t\t\t// When focusing newly mounted toolbars,\n\t\t\t\t\t\t// the position of the popover is often not right on the first render\n\t\t\t\t\t\t// This prevents the layout shifts when focusing the dialogs.\n\t\t\t\t\t\tpreventScroll: true,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\treturn () => {\n\t\t\twindow.cancelAnimationFrame( raf );\n\t\t\tif ( ! onIndexChange || ! navigableToolbarRef ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// When the toolbar element is unmounted and onIndexChange is passed, we\n\t\t\t// pass the focused toolbar item index so it can be hydrated later.\n\t\t\tconst items = getAllFocusableToolbarItemsIn( navigableToolbarRef );\n\t\t\tconst index = items.findIndex( ( item ) => item.tabIndex === 0 );\n\t\t\tonIndexChange( index );\n\t\t};\n\t}, [ initialIndex, initialFocusOnMount, onIndexChange, toolbarRef ] );\n\n\tconst { getLastFocus } = unlock( useSelect( blockEditorStore ) );\n\t/**\n\t * Handles returning focus to the block editor canvas when pressing escape.\n\t */\n\tuseEffect( () => {\n\t\tconst navigableToolbarRef = toolbarRef.current;\n\n\t\tif ( focusEditorOnEscape ) {\n\t\t\tconst handleKeyDown = ( event ) => {\n\t\t\t\tconst lastFocus = getLastFocus();\n\t\t\t\tif ( event.keyCode === ESCAPE && lastFocus?.current ) {\n\t\t\t\t\t// Focus the last focused element when pressing escape.\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tlastFocus.current.focus();\n\t\t\t\t}\n\t\t\t};\n\t\t\tnavigableToolbarRef.addEventListener( 'keydown', handleKeyDown );\n\t\t\treturn () => {\n\t\t\t\tnavigableToolbarRef.removeEventListener(\n\t\t\t\t\t'keydown',\n\t\t\t\t\thandleKeyDown\n\t\t\t\t);\n\t\t\t};\n\t\t}\n\t}, [ focusEditorOnEscape, getLastFocus, toolbarRef ] );\n}\n\nexport default function NavigableToolbar( {\n\tchildren,\n\tfocusOnMount,\n\tfocusEditorOnEscape = false,\n\tshouldUseKeyboardFocusShortcut = true,\n\t__experimentalInitialIndex: initialIndex,\n\t__experimentalOnIndexChange: onIndexChange,\n\torientation = 'horizontal',\n\t...props\n} ) {\n\tconst toolbarRef = useRef();\n\tconst isAccessibleToolbar = useIsAccessibleToolbar( toolbarRef );\n\n\tuseToolbarFocus( {\n\t\ttoolbarRef,\n\t\tfocusOnMount,\n\t\tdefaultIndex: initialIndex,\n\t\tonIndexChange,\n\t\tisAccessibleToolbar,\n\t\tshouldUseKeyboardFocusShortcut,\n\t\tfocusEditorOnEscape,\n\t} );\n\n\tif ( isAccessibleToolbar ) {\n\t\treturn (\n\t\t\t<Toolbar\n\t\t\t\tlabel={ props[ 'aria-label' ] }\n\t\t\t\tref={ toolbarRef }\n\t\t\t\torientation={ orientation }\n\t\t\t\t{ ...props }\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</Toolbar>\n\t\t);\n\t}\n\n\treturn (\n\t\t<NavigableMenu\n\t\t\torientation={ orientation }\n\t\t\trole=\"toolbar\"\n\t\t\tref={ toolbarRef }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</NavigableMenu>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { getBlockType, hasBlockSupport } from '@wordpress/blocks';\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Returns true if the block toolbar should be shown.\n *\n * @return {boolean} Whether the block toolbar component will be rendered.\n */\nexport function useHasBlockToolbar() {\n\tconst enabled = useSelect( ( select ) => {\n\t\tconst { getBlockEditingMode, getBlockName, getBlockSelectionStart } =\n\t\t\tselect( blockEditorStore );\n\n\t\t// we only care about the 1st selected block\n\t\t// for the toolbar, so we use getBlockSelectionStart\n\t\t// instead of getSelectedBlockClientIds\n\t\tconst selectedBlockClientId = getBlockSelectionStart();\n\n\t\tconst blockType =\n\t\t\tselectedBlockClientId &&\n\t\t\tgetBlockType( getBlockName( selectedBlockClientId ) );\n\n\t\treturn (\n\t\t\tblockType &&\n\t\t\thasBlockSupport( blockType, '__experimentalToolbar', true ) &&\n\t\t\tgetBlockEditingMode( selectedBlockClientId ) !== 'disabled'\n\t\t);\n\t}, [] );\n\n\treturn enabled;\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tToolbarButton,\n\tToolbarGroup,\n\tDropdown,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { cloneBlock } from '@wordpress/blocks';\nimport { useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockPatternsList from '../block-patterns-list';\n\nconst EMPTY_ARRAY = [];\nconst MAX_PATTERNS_TO_SHOW = 6;\nconst POPOVER_PROPS = {\n\tplacement: 'bottom-start',\n};\n\nexport default function ChangeDesign( { clientId } ) {\n\tconst { categories, currentPatternName, patterns } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\t__experimentalGetAllowedPatterns,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\tconst _categories = attributes?.metadata?.categories || EMPTY_ARRAY;\n\t\t\tconst rootBlock = getBlockRootClientId( clientId );\n\n\t\t\t// Calling `__experimentalGetAllowedPatterns` is expensive.\n\t\t\t// Checking if the block can be changed prevents unnecessary selector calls.\n\t\t\t// See: https://github.com/WordPress/gutenberg/pull/64736.\n\t\t\tconst _patterns =\n\t\t\t\t_categories.length > 0\n\t\t\t\t\t? __experimentalGetAllowedPatterns( rootBlock )\n\t\t\t\t\t: EMPTY_ARRAY;\n\t\t\treturn {\n\t\t\t\tcategories: _categories,\n\t\t\t\tcurrentPatternName: attributes?.metadata?.patternName,\n\t\t\t\tpatterns: _patterns,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\tconst sameCategoryPatternsWithSingleWrapper = useMemo( () => {\n\t\tif ( categories.length === 0 || ! patterns || patterns.length === 0 ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\t\treturn patterns\n\t\t\t.filter( ( pattern ) => {\n\t\t\t\tconst isCorePattern =\n\t\t\t\t\tpattern.source === 'core' ||\n\t\t\t\t\t( pattern.source?.startsWith( 'pattern-directory' ) &&\n\t\t\t\t\t\tpattern.source !== 'pattern-directory/theme' );\n\t\t\t\treturn (\n\t\t\t\t\t// Check if the pattern has only one top level block,\n\t\t\t\t\t// otherwise we may switch to a pattern that doesn't have replacement suggestions.\n\t\t\t\t\tpattern.blocks.length === 1 &&\n\t\t\t\t\t// We exclude the core patterns and pattern directory patterns that are not theme patterns.\n\t\t\t\t\t! isCorePattern &&\n\t\t\t\t\t// Exclude current pattern.\n\t\t\t\t\tcurrentPatternName !== pattern.name &&\n\t\t\t\t\tpattern.categories?.some( ( category ) => {\n\t\t\t\t\t\treturn categories.includes( category );\n\t\t\t\t\t} ) &&\n\t\t\t\t\t// Check if the pattern is not a synced pattern.\n\t\t\t\t\t( pattern.syncStatus === 'unsynced' || ! pattern.id )\n\t\t\t\t);\n\t\t\t} )\n\t\t\t.slice( 0, MAX_PATTERNS_TO_SHOW );\n\t}, [ categories, currentPatternName, patterns ] );\n\n\tif ( sameCategoryPatternsWithSingleWrapper.length < 2 ) {\n\t\treturn null;\n\t}\n\n\tconst onClickPattern = ( pattern ) => {\n\t\tconst newBlocks = ( pattern.blocks ?? [] ).map( ( block ) => {\n\t\t\treturn cloneBlock( block );\n\t\t} );\n\t\tnewBlocks[ 0 ].attributes.metadata = {\n\t\t\t...newBlocks[ 0 ].attributes.metadata,\n\t\t\tcategories,\n\t\t};\n\t\treplaceBlocks( clientId, newBlocks );\n\t};\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\tonClick={ () => onToggle( ! isOpen ) }\n\t\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Change design' ) }\n\t\t\t\t\t\t</ToolbarButton>\n\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t);\n\t\t\t} }\n\t\t\trenderContent={ () => (\n\t\t\t\t<DropdownContentWrapper\n\t\t\t\t\tclassName=\"block-editor-block-toolbar-change-design-content-wrapper\"\n\t\t\t\t\tpaddingSize=\"none\"\n\t\t\t\t>\n\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\tblockPatterns={ sameCategoryPatternsWithSingleWrapper }\n\t\t\t\t\t\tonClickPattern={ onClickPattern }\n\t\t\t\t\t\tshowTitlesAsTooltip\n\t\t\t\t\t/>\n\t\t\t\t</DropdownContentWrapper>\n\t\t\t) }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tToolbarButton,\n\tToolbarGroup,\n\tIcon,\n\tPath,\n\tSVG,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useStylesForBlocks from '../block-styles/use-styles-for-block';\nimport { replaceActiveStyle } from '../block-styles/utils';\nimport { store as blockEditorStore } from '../../store';\nimport { GlobalStylesContext } from '../global-styles';\nimport { globalStylesDataKey } from '../../store/private-keys';\nimport { getVariationStylesWithRefValues } from '../../hooks/block-style-variation';\n\nconst styleIcon = (\n\t<SVG\n\t\tviewBox=\"0 0 24 24\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\twidth=\"24\"\n\t\theight=\"24\"\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t>\n\t\t<Path d=\"M17.2 10.9c-.5-1-1.2-2.1-2.1-3.2-.6-.9-1.3-1.7-2.1-2.6L12 4l-1 1.1c-.6.9-1.3 1.7-2 2.6-.8 1.2-1.5 2.3-2 3.2-.6 1.2-1 2.2-1 3 0 3.4 2.7 6.1 6.1 6.1s6.1-2.7 6.1-6.1c0-.8-.3-1.8-1-3z\" />\n\t\t<Path\n\t\t\tstroke=\"currentColor\"\n\t\t\tstrokeWidth=\"1.5\"\n\t\t\td=\"M17.2 10.9c-.5-1-1.2-2.1-2.1-3.2-.6-.9-1.3-1.7-2.1-2.6L12 4l-1 1.1c-.6.9-1.3 1.7-2 2.6-.8 1.2-1.5 2.3-2 3.2-.6 1.2-1 2.2-1 3 0 3.4 2.7 6.1 6.1 6.1s6.1-2.7 6.1-6.1c0-.8-.3-1.8-1-3z\"\n\t\t/>\n\t</SVG>\n);\n\nfunction SwitchSectionStyle( { clientId } ) {\n\tconst { stylesToRender, activeStyle, className } = useStylesForBlocks( {\n\t\tclientId,\n\t} );\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\n\t// Get global styles data\n\tconst { merged: mergedConfig } = useContext( GlobalStylesContext );\n\tconst { globalSettings, globalStyles, blockName } = useSelect(\n\t\t( select ) => {\n\t\t\tconst settings = select( blockEditorStore ).getSettings();\n\t\t\treturn {\n\t\t\t\tglobalSettings: settings.__experimentalFeatures,\n\t\t\t\tglobalStyles: settings[ globalStylesDataKey ],\n\t\t\t\tblockName: select( blockEditorStore ).getBlockName( clientId ),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\t// Get the background color for the active style\n\tconst activeStyleBackground = activeStyle?.name\n\t\t? getVariationStylesWithRefValues(\n\t\t\t\t{\n\t\t\t\t\tsettings: mergedConfig?.settings ?? globalSettings,\n\t\t\t\t\tstyles: mergedConfig?.styles ?? globalStyles,\n\t\t\t\t},\n\t\t\t\tblockName,\n\t\t\t\tactiveStyle.name\n\t\t  )?.color?.background\n\t\t: undefined;\n\n\tif ( ! stylesToRender || stylesToRender.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst handleStyleSwitch = () => {\n\t\tconst currentIndex = stylesToRender.findIndex(\n\t\t\t( style ) => style.name === activeStyle.name\n\t\t);\n\n\t\tconst nextIndex = ( currentIndex + 1 ) % stylesToRender.length;\n\t\tconst nextStyle = stylesToRender[ nextIndex ];\n\n\t\tconst styleClassName = replaceActiveStyle(\n\t\t\tclassName,\n\t\t\tactiveStyle,\n\t\t\tnextStyle\n\t\t);\n\n\t\tupdateBlockAttributes( clientId, {\n\t\t\tclassName: styleClassName,\n\t\t} );\n\t};\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\tonClick={ handleStyleSwitch }\n\t\t\t\tlabel={ __( 'Shuffle styles' ) }\n\t\t\t>\n\t\t\t\t<Icon\n\t\t\t\t\ticon={ styleIcon }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\tfill: activeStyleBackground || 'transparent',\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</ToolbarButton>\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default SwitchSectionStyle;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useRef } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\nimport {\n\tgetBlockType,\n\thasBlockSupport,\n\tisReusableBlock,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { ToolbarGroup } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockMover from '../block-mover';\nimport BlockParentSelector from '../block-parent-selector';\nimport BlockSwitcher from '../block-switcher';\nimport BlockControls from '../block-controls';\nimport __unstableBlockToolbarLastItem from './block-toolbar-last-item';\nimport BlockSettingsMenu from '../block-settings-menu';\nimport { BlockLockToolbar } from '../block-lock';\nimport { BlockGroupToolbar } from '../convert-to-group-buttons';\nimport BlockEditVisuallyButton from '../block-edit-visually-button';\nimport { useShowHoveredOrFocusedGestures } from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport __unstableBlockNameContext from './block-name-context';\nimport NavigableToolbar from '../navigable-toolbar';\nimport { useHasBlockToolbar } from './use-has-block-toolbar';\nimport ChangeDesign from './change-design';\nimport SwitchSectionStyle from './switch-section-style';\nimport { unlock } from '../../lock-unlock';\n\n/**\n * Renders the block toolbar.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-toolbar/README.md\n *\n * @param {Object}   props                             Components props.\n * @param {boolean}  props.hideDragHandle              Show or hide the Drag Handle for drag and drop functionality.\n * @param {boolean}  props.focusOnMount                Focus the toolbar when mounted.\n * @param {number}   props.__experimentalInitialIndex  The initial index of the toolbar item to focus.\n * @param {Function} props.__experimentalOnIndexChange Callback function to be called when the index of the focused toolbar item changes.\n * @param {string}   props.variant                     Style variant of the toolbar, also passed to the Dropdowns rendered from Block Toolbar Buttons.\n */\nexport function PrivateBlockToolbar( {\n\thideDragHandle,\n\tfocusOnMount,\n\t__experimentalInitialIndex,\n\t__experimentalOnIndexChange,\n\tvariant = 'unstyled',\n} ) {\n\tconst {\n\t\tblockClientId,\n\t\tblockClientIds,\n\t\tisDefaultEditingMode,\n\t\tblockType,\n\t\ttoolbarKey,\n\t\tshouldShowVisualToolbar,\n\t\tshowParentSelector,\n\t\tisUsingBindings,\n\t\thasParentPattern,\n\t\thasContentOnlyLocking,\n\t\tshowShuffleButton,\n\t\tshowSlots,\n\t\tshowGroupButtons,\n\t\tshowLockButtons,\n\t\tshowSwitchSectionStyleButton,\n\t\thasFixedToolbar,\n\t\tisNavigationMode,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockName,\n\t\t\tgetBlockMode,\n\t\t\tgetBlockParents,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\tisBlockValid,\n\t\t\tgetBlockEditingMode,\n\t\t\tgetBlockAttributes,\n\t\t\tgetBlockParentsByBlockName,\n\t\t\tgetTemplateLock,\n\t\t\tgetSettings,\n\t\t\tgetParentSectionBlock,\n\t\t\tisZoomOut,\n\t\t\tisNavigationMode: _isNavigationMode,\n\t\t\tisSectionBlock,\n\t\t} = unlock( select( blockEditorStore ) );\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\tconst selectedBlockClientId = selectedBlockClientIds[ 0 ];\n\t\tconst parents = getBlockParents( selectedBlockClientId );\n\t\tconst parentSection = getParentSectionBlock( selectedBlockClientId );\n\t\tconst parentClientId = parentSection ?? parents[ parents.length - 1 ];\n\t\tconst parentBlockName = getBlockName( parentClientId );\n\t\tconst parentBlockType = getBlockType( parentBlockName );\n\t\tconst editingMode = getBlockEditingMode( selectedBlockClientId );\n\t\tconst isNavigationModeEnabled = _isNavigationMode();\n\t\tconst _isDefaultEditingMode = editingMode === 'default';\n\t\tconst _blockName = getBlockName( selectedBlockClientId );\n\t\tconst isValid = selectedBlockClientIds.every( ( id ) =>\n\t\t\tisBlockValid( id )\n\t\t);\n\t\tconst isVisual = selectedBlockClientIds.every(\n\t\t\t( id ) => getBlockMode( id ) === 'visual'\n\t\t);\n\t\tconst _isUsingBindings = selectedBlockClientIds.every(\n\t\t\t( clientId ) =>\n\t\t\t\t!! getBlockAttributes( clientId )?.metadata?.bindings\n\t\t);\n\n\t\tconst _hasParentPattern = selectedBlockClientIds.every(\n\t\t\t( clientId ) =>\n\t\t\t\tgetBlockParentsByBlockName( clientId, 'core/block', true )\n\t\t\t\t\t.length > 0\n\t\t);\n\n\t\t// If one or more selected blocks are locked, do not show the BlockGroupToolbar.\n\t\tconst _hasTemplateLock = selectedBlockClientIds.some(\n\t\t\t( id ) => getTemplateLock( id ) === 'contentOnly'\n\t\t);\n\n\t\tconst _isZoomOut = isZoomOut();\n\n\t\treturn {\n\t\t\tblockClientId: selectedBlockClientId,\n\t\t\tblockClientIds: selectedBlockClientIds,\n\t\t\tisDefaultEditingMode: _isDefaultEditingMode,\n\t\t\tblockType: selectedBlockClientId && getBlockType( _blockName ),\n\t\t\tshouldShowVisualToolbar: isValid && isVisual,\n\t\t\ttoolbarKey: `${ selectedBlockClientId }${ parentClientId }`,\n\t\t\tshowParentSelector:\n\t\t\t\t! _isZoomOut &&\n\t\t\t\tparentBlockType &&\n\t\t\t\teditingMode !== 'contentOnly' &&\n\t\t\t\tgetBlockEditingMode( parentClientId ) !== 'disabled' &&\n\t\t\t\thasBlockSupport(\n\t\t\t\t\tparentBlockType,\n\t\t\t\t\t'__experimentalParentSelector',\n\t\t\t\t\ttrue\n\t\t\t\t) &&\n\t\t\t\tselectedBlockClientIds.length === 1,\n\t\t\tisUsingBindings: _isUsingBindings,\n\t\t\thasParentPattern: _hasParentPattern,\n\t\t\thasContentOnlyLocking: _hasTemplateLock,\n\t\t\tshowShuffleButton: _isZoomOut,\n\t\t\tshowSlots: ! _isZoomOut,\n\t\t\tshowGroupButtons: ! _isZoomOut,\n\t\t\tshowLockButtons: ! _isZoomOut,\n\t\t\tshowSwitchSectionStyleButton:\n\t\t\t\t_isZoomOut ||\n\t\t\t\t( isNavigationModeEnabled &&\n\t\t\t\t\teditingMode === 'contentOnly' &&\n\t\t\t\t\tisSectionBlock( selectedBlockClientId ) ), // Zoom out or Write Mode Section Blocks\n\t\t\thasFixedToolbar: getSettings().hasFixedToolbar,\n\t\t\tisNavigationMode: isNavigationModeEnabled,\n\t\t};\n\t}, [] );\n\n\tconst toolbarWrapperRef = useRef( null );\n\n\t// Handles highlighting the current block outline on hover or focus of the\n\t// block type toolbar area.\n\tconst nodeRef = useRef();\n\tconst showHoveredOrFocusedGestures = useShowHoveredOrFocusedGestures( {\n\t\tref: nodeRef,\n\t} );\n\n\tconst isLargeViewport = ! useViewportMatch( 'medium', '<' );\n\n\tconst hasBlockToolbar = useHasBlockToolbar();\n\tif ( ! hasBlockToolbar ) {\n\t\treturn null;\n\t}\n\n\tconst isMultiToolbar = blockClientIds.length > 1;\n\tconst isSynced =\n\t\tisReusableBlock( blockType ) || isTemplatePart( blockType );\n\n\t// Shifts the toolbar to make room for the parent block selector.\n\tconst classes = clsx( 'block-editor-block-contextual-toolbar', {\n\t\t'has-parent': showParentSelector,\n\t\t'is-inverted-toolbar': isNavigationMode && ! hasFixedToolbar,\n\t} );\n\n\tconst innerClasses = clsx( 'block-editor-block-toolbar', {\n\t\t'is-synced': isSynced,\n\t\t'is-connected': isUsingBindings,\n\t} );\n\n\treturn (\n\t\t<NavigableToolbar\n\t\t\tfocusEditorOnEscape\n\t\t\tclassName={ classes }\n\t\t\t/* translators: accessibility text for the block toolbar */\n\t\t\taria-label={ __( 'Block tools' ) }\n\t\t\t// The variant is applied as \"toolbar\" when undefined, which is the black border style of the dropdown from the toolbar popover.\n\t\t\tvariant={ variant === 'toolbar' ? undefined : variant }\n\t\t\tfocusOnMount={ focusOnMount }\n\t\t\t__experimentalInitialIndex={ __experimentalInitialIndex }\n\t\t\t__experimentalOnIndexChange={ __experimentalOnIndexChange }\n\t\t\t// Resets the index whenever the active block changes so\n\t\t\t// this is not persisted. See https://github.com/WordPress/gutenberg/pull/25760#issuecomment-717906169\n\t\t\tkey={ toolbarKey }\n\t\t>\n\t\t\t<div ref={ toolbarWrapperRef } className={ innerClasses }>\n\t\t\t\t{ showParentSelector && ! isMultiToolbar && isLargeViewport && (\n\t\t\t\t\t<BlockParentSelector />\n\t\t\t\t) }\n\t\t\t\t{ ( shouldShowVisualToolbar || isMultiToolbar ) &&\n\t\t\t\t\t! hasParentPattern && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref={ nodeRef }\n\t\t\t\t\t\t\t{ ...showHoveredOrFocusedGestures }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ToolbarGroup className=\"block-editor-block-toolbar__block-controls\">\n\t\t\t\t\t\t\t\t<BlockSwitcher clientIds={ blockClientIds } />\n\t\t\t\t\t\t\t\t{ ! isMultiToolbar &&\n\t\t\t\t\t\t\t\t\tisDefaultEditingMode &&\n\t\t\t\t\t\t\t\t\tshowLockButtons && (\n\t\t\t\t\t\t\t\t\t\t<BlockLockToolbar\n\t\t\t\t\t\t\t\t\t\t\tclientId={ blockClientId }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<BlockMover\n\t\t\t\t\t\t\t\t\tclientIds={ blockClientIds }\n\t\t\t\t\t\t\t\t\thideDragHandle={ hideDragHandle }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t{ ! hasContentOnlyLocking &&\n\t\t\t\t\tshouldShowVisualToolbar &&\n\t\t\t\t\tisMultiToolbar &&\n\t\t\t\t\tshowGroupButtons && <BlockGroupToolbar /> }\n\t\t\t\t{ showShuffleButton && (\n\t\t\t\t\t<ChangeDesign clientId={ blockClientIds[ 0 ] } />\n\t\t\t\t) }\n\t\t\t\t{ showSwitchSectionStyleButton && (\n\t\t\t\t\t<SwitchSectionStyle clientId={ blockClientIds[ 0 ] } />\n\t\t\t\t) }\n\t\t\t\t{ shouldShowVisualToolbar && showSlots && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\t\tgroup=\"parent\"\n\t\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\t\tgroup=\"block\"\n\t\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BlockControls.Slot className=\"block-editor-block-toolbar__slot\" />\n\t\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\t\tgroup=\"inline\"\n\t\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\t\tgroup=\"other\"\n\t\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<__unstableBlockNameContext.Provider\n\t\t\t\t\t\t\tvalue={ blockType?.name }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<__unstableBlockToolbarLastItem.Slot />\n\t\t\t\t\t\t</__unstableBlockNameContext.Provider>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t<BlockEditVisuallyButton clientIds={ blockClientIds } />\n\t\t\t\t<BlockSettingsMenu clientIds={ blockClientIds } />\n\t\t\t</div>\n\t\t</NavigableToolbar>\n\t);\n}\n\n/**\n * Renders the block toolbar.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-toolbar/README.md\n *\n * @param {Object}  props                Components props.\n * @param {boolean} props.hideDragHandle Show or hide the Drag Handle for drag and drop functionality.\n * @param {string}  props.variant        Style variant of the toolbar, also passed to the Dropdowns rendered from Block Toolbar Buttons.\n */\nexport default function BlockToolbar( { hideDragHandle, variant } ) {\n\treturn (\n\t\t<PrivateBlockToolbar\n\t\t\thideDragHandle={ hideDragHandle }\n\t\t\tvariant={ variant }\n\t\t\tfocusOnMount={ undefined }\n\t\t\t__experimentalInitialIndex={ undefined }\n\t\t\t__experimentalOnIndexChange={ undefined }\n\t\t/>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n/**\n * WordPress dependencies\n */\nimport { useDispatch } from '@wordpress/data';\nimport { useEffect, useRef } from '@wordpress/element';\nimport { useShortcut } from '@wordpress/keyboard-shortcuts';\n/**\n * Internal dependencies\n */\nimport { PrivateBlockPopover } from '../block-popover';\nimport useBlockToolbarPopoverProps from './use-block-toolbar-popover-props';\nimport useSelectedBlockToolProps from './use-selected-block-tool-props';\nimport { store as blockEditorStore } from '../../store';\nimport { PrivateBlockToolbar } from '../block-toolbar';\n\nexport default function BlockToolbarPopover( {\n\tclientId,\n\tisTyping,\n\t__unstableContentRef,\n} ) {\n\tconst { capturingClientId, isInsertionPointVisible, lastClientId } =\n\t\tuseSelectedBlockToolProps( clientId );\n\n\t// Stores the active toolbar item index so the block toolbar can return focus\n\t// to it when re-mounting.\n\tconst initialToolbarItemIndexRef = useRef();\n\n\tuseEffect( () => {\n\t\t// Resets the index whenever the active block changes so this is not\n\t\t// persisted. See https://github.com/WordPress/gutenberg/pull/25760#issuecomment-717906169\n\t\tinitialToolbarItemIndexRef.current = undefined;\n\t}, [ clientId ] );\n\n\tconst { stopTyping } = useDispatch( blockEditorStore );\n\tconst isToolbarForcedRef = useRef( false );\n\n\tuseShortcut( 'core/block-editor/focus-toolbar', () => {\n\t\tisToolbarForcedRef.current = true;\n\t\tstopTyping( true );\n\t} );\n\n\tuseEffect( () => {\n\t\tisToolbarForcedRef.current = false;\n\t} );\n\n\t// If the block has a parent with __experimentalCaptureToolbars enabled,\n\t// the toolbar should be positioned over the topmost capturing parent.\n\tconst clientIdToPositionOver = capturingClientId || clientId;\n\n\tconst popoverProps = useBlockToolbarPopoverProps( {\n\t\tcontentElement: __unstableContentRef?.current,\n\t\tclientId: clientIdToPositionOver,\n\t} );\n\n\treturn (\n\t\t! isTyping && (\n\t\t\t<PrivateBlockPopover\n\t\t\t\tclientId={ clientIdToPositionOver }\n\t\t\t\tbottomClientId={ lastClientId }\n\t\t\t\tclassName={ clsx( 'block-editor-block-list__block-popover', {\n\t\t\t\t\t'is-insertion-point-visible': isInsertionPointVisible,\n\t\t\t\t} ) }\n\t\t\t\tresize={ false }\n\t\t\t\t{ ...popoverProps }\n\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t>\n\t\t\t\t<PrivateBlockToolbar\n\t\t\t\t\t// If the toolbar is being shown because of being forced\n\t\t\t\t\t// it should focus the toolbar right after the mount.\n\t\t\t\t\tfocusOnMount={ isToolbarForcedRef.current }\n\t\t\t\t\t__experimentalInitialIndex={\n\t\t\t\t\t\tinitialToolbarItemIndexRef.current\n\t\t\t\t\t}\n\t\t\t\t\t__experimentalOnIndexChange={ ( index ) => {\n\t\t\t\t\t\tinitialToolbarItemIndexRef.current = index;\n\t\t\t\t\t} }\n\t\t\t\t\tvariant=\"toolbar\"\n\t\t\t\t/>\n\t\t\t</PrivateBlockPopover>\n\t\t)\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { plus } from '@wordpress/icons';\nimport { _x } from '@wordpress/i18n';\n\nfunction ZoomOutModeInserterButton( { onClick } ) {\n\treturn (\n\t\t<Button\n\t\t\tvariant=\"primary\"\n\t\t\ticon={ plus }\n\t\t\tsize=\"compact\"\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-button-pattern-inserter__button',\n\t\t\t\t'block-editor-block-tools__zoom-out-mode-inserter-button'\n\t\t\t) }\n\t\t\tonClick={ onClick }\n\t\t\tlabel={ _x(\n\t\t\t\t'Add pattern',\n\t\t\t\t'Generic label for pattern inserter button'\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nexport default ZoomOutModeInserterButton;\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect, useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockPopoverInbetween from '../block-popover/inbetween';\nimport ZoomOutModeInserterButton from './zoom-out-mode-inserter-button';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nfunction ZoomOutModeInserters() {\n\tconst [ isReady, setIsReady ] = useState( false );\n\tconst {\n\t\thasSelection,\n\t\tblockOrder,\n\t\tsetInserterIsOpened,\n\t\tsectionRootClientId,\n\t\tselectedBlockClientId,\n\t\tblockInsertionPoint,\n\t\tinsertionPointVisible,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSettings,\n\t\t\tgetBlockOrder,\n\t\t\tgetSelectionStart,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetSectionRootClientId,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tisBlockInsertionPointVisible,\n\t\t} = unlock( select( blockEditorStore ) );\n\n\t\tconst root = getSectionRootClientId();\n\n\t\treturn {\n\t\t\thasSelection: !! getSelectionStart().clientId,\n\t\t\tblockOrder: getBlockOrder( root ),\n\t\t\tsectionRootClientId: root,\n\t\t\tsetInserterIsOpened:\n\t\t\t\tgetSettings().__experimentalSetIsInserterOpened,\n\t\t\tselectedBlockClientId: getSelectedBlockClientId(),\n\t\t\tblockInsertionPoint: getBlockInsertionPoint(),\n\t\t\tinsertionPointVisible: isBlockInsertionPointVisible(),\n\t\t};\n\t}, [] );\n\n\t// eslint-disable-next-line @wordpress/no-unused-vars-before-return\n\tconst { showInsertionPoint } = unlock( useDispatch( blockEditorStore ) );\n\n\t// Defer the initial rendering to avoid the jumps due to the animation.\n\tuseEffect( () => {\n\t\tconst timeout = setTimeout( () => {\n\t\t\tsetIsReady( true );\n\t\t}, 500 );\n\t\treturn () => {\n\t\t\tclearTimeout( timeout );\n\t\t};\n\t}, [] );\n\n\tif ( ! isReady || ! hasSelection ) {\n\t\treturn null;\n\t}\n\n\tconst previousClientId = selectedBlockClientId;\n\tconst index = blockOrder.findIndex(\n\t\t( clientId ) => selectedBlockClientId === clientId\n\t);\n\n\tconst insertionIndex = index + 1;\n\n\tconst nextClientId = blockOrder[ insertionIndex ];\n\n\t// If the block insertion point is visible, and the insertion\n\t// Indices match then we don't need to render the inserter.\n\tif (\n\t\tinsertionPointVisible &&\n\t\tblockInsertionPoint?.index === insertionIndex\n\t) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<BlockPopoverInbetween\n\t\t\tpreviousClientId={ previousClientId }\n\t\t\tnextClientId={ nextClientId }\n\t\t>\n\t\t\t<ZoomOutModeInserterButton\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tsetInserterIsOpened( {\n\t\t\t\t\t\trootClientId: sectionRootClientId,\n\t\t\t\t\t\tinsertionIndex,\n\t\t\t\t\t\ttab: 'patterns',\n\t\t\t\t\t\tcategory: 'all',\n\t\t\t\t\t} );\n\t\t\t\t\tshowInsertionPoint( sectionRootClientId, insertionIndex, {\n\t\t\t\t\t\toperation: 'insert',\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t/>\n\t\t</BlockPopoverInbetween>\n\t);\n}\n\nexport default ZoomOutModeInserters;\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { isTextField } from '@wordpress/dom';\nimport { Popover } from '@wordpress/components';\nimport { __unstableUseShortcutEventMatch as useShortcutEventMatch } from '@wordpress/keyboard-shortcuts';\nimport { useRef } from '@wordpress/element';\nimport { switchToBlockType, store as blocksStore } from '@wordpress/blocks';\nimport { speak } from '@wordpress/a11y';\nimport { __, sprintf, _n } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport EmptyBlockInserter from './empty-block-inserter';\nimport {\n\tInsertionPointOpenRef,\n\tdefault as InsertionPoint,\n} from './insertion-point';\nimport BlockToolbarPopover from './block-toolbar-popover';\nimport { store as blockEditorStore } from '../../store';\nimport usePopoverScroll from '../block-popover/use-popover-scroll';\nimport ZoomOutModeInserters from './zoom-out-mode-inserters';\nimport { useShowBlockTools } from './use-show-block-tools';\nimport { unlock } from '../../lock-unlock';\nimport usePasteStyles from '../use-paste-styles';\n\nfunction selector( select ) {\n\tconst {\n\t\tgetSelectedBlockClientId,\n\t\tgetFirstMultiSelectedBlockClientId,\n\t\tgetSettings,\n\t\tisTyping,\n\t\tisDragging,\n\t\tisZoomOut,\n\t} = unlock( select( blockEditorStore ) );\n\n\tconst clientId =\n\t\tgetSelectedBlockClientId() || getFirstMultiSelectedBlockClientId();\n\n\treturn {\n\t\tclientId,\n\t\thasFixedToolbar: getSettings().hasFixedToolbar,\n\t\tisTyping: isTyping(),\n\t\tisZoomOutMode: isZoomOut(),\n\t\tisDragging: isDragging(),\n\t};\n}\n\n/**\n * Renders block tools (the block toolbar, select/navigation mode toolbar, the\n * insertion point and a slot for the inline rich text toolbar). Must be wrapped\n * around the block content and editor styles wrapper or iframe.\n *\n * @param {Object} $0                      Props.\n * @param {Object} $0.children             The block content and style container.\n * @param {Object} $0.__unstableContentRef Ref holding the content scroll container.\n */\nexport default function BlockTools( {\n\tchildren,\n\t__unstableContentRef,\n\t...props\n} ) {\n\tconst { clientId, hasFixedToolbar, isTyping, isZoomOutMode, isDragging } =\n\t\tuseSelect( selector, [] );\n\n\tconst isMatch = useShortcutEventMatch();\n\tconst {\n\t\tgetBlocksByClientId,\n\t\tgetSelectedBlockClientIds,\n\t\tgetBlockRootClientId,\n\t\tisGroupable,\n\t} = useSelect( blockEditorStore );\n\tconst { getGroupingBlockName } = useSelect( blocksStore );\n\tconst { showEmptyBlockSideInserter, showBlockToolbarPopover } =\n\t\tuseShowBlockTools();\n\tconst pasteStyles = usePasteStyles();\n\n\tconst {\n\t\tduplicateBlocks,\n\t\tremoveBlocks,\n\t\treplaceBlocks,\n\t\tinsertAfterBlock,\n\t\tinsertBeforeBlock,\n\t\tselectBlock,\n\t\tmoveBlocksUp,\n\t\tmoveBlocksDown,\n\t\texpandBlock,\n\t} = unlock( useDispatch( blockEditorStore ) );\n\n\tfunction onKeyDown( event ) {\n\t\tif ( event.defaultPrevented ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tisMatch( 'core/block-editor/move-up', event ) ||\n\t\t\tisMatch( 'core/block-editor/move-down', event )\n\t\t) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\t\t\t\tconst direction = isMatch( 'core/block-editor/move-up', event )\n\t\t\t\t\t? 'up'\n\t\t\t\t\t: 'down';\n\t\t\t\tif ( direction === 'up' ) {\n\t\t\t\t\tmoveBlocksUp( clientIds, rootClientId );\n\t\t\t\t} else {\n\t\t\t\t\tmoveBlocksDown( clientIds, rootClientId );\n\t\t\t\t}\n\t\t\t\tconst blockLength = Array.isArray( clientIds )\n\t\t\t\t\t? clientIds.length\n\t\t\t\t\t: 1;\n\t\t\t\tconst message = sprintf(\n\t\t\t\t\t// translators: %d: the name of the block that has been moved\n\t\t\t\t\t_n(\n\t\t\t\t\t\t'%d block moved.',\n\t\t\t\t\t\t'%d blocks moved.',\n\t\t\t\t\t\tclientIds.length\n\t\t\t\t\t),\n\t\t\t\t\tblockLength\n\t\t\t\t);\n\t\t\t\tspeak( message );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/duplicate', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tduplicateBlocks( clientIds );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/remove', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tremoveBlocks( clientIds );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/paste-styles', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst blocks = getBlocksByClientId( clientIds );\n\t\t\t\tpasteStyles( blocks );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/insert-after', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tinsertAfterBlock( clientIds[ clientIds.length - 1 ] );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/insert-before', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tinsertBeforeBlock( clientIds[ 0 ] );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/unselect', event ) ) {\n\t\t\tif ( event.target.closest( '[role=toolbar]' ) ) {\n\t\t\t\t// This shouldn't be necessary, but we have a combination of a few things all combining to create a situation where:\n\t\t\t\t// - Because the block toolbar uses createPortal to populate the block toolbar fills, we can't rely on the React event bubbling to hit the onKeyDown listener for the block toolbar\n\t\t\t\t// - Since we can't use the React tree, we use the DOM tree which _should_ handle the event bubbling correctly from a `createPortal` element.\n\t\t\t\t// - This bubbles via the React tree, which hits this `unselect` escape keypress before the block toolbar DOM event listener has access to it.\n\t\t\t\t// An alternative would be to remove the addEventListener on the navigableToolbar and use this event to handle it directly right here. That feels hacky too though.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length > 1 ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t// If there is more than one block selected, select the first\n\t\t\t\t// block so that focus is directed back to the beginning of the selection.\n\t\t\t\t// In effect, to the user this feels like deselecting the multi-selection.\n\t\t\t\tselectBlock( clientIds[ 0 ] );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/collapse-list-view', event ) ) {\n\t\t\t// If focus is currently within a text field, such as a rich text block or other editable field,\n\t\t\t// skip collapsing the list view, and allow the keyboard shortcut to be handled by the text field.\n\t\t\t// This condition checks for both the active element and the active element within an iframed editor.\n\t\t\tif (\n\t\t\t\tisTextField( event.target ) ||\n\t\t\t\tisTextField(\n\t\t\t\t\tevent.target?.contentWindow?.document?.activeElement\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\texpandBlock( clientId );\n\t\t} else if ( isMatch( 'core/block-editor/group', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length > 1 && isGroupable( clientIds ) ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst blocks = getBlocksByClientId( clientIds );\n\t\t\t\tconst groupingBlockName = getGroupingBlockName();\n\t\t\t\tconst newBlocks = switchToBlockType(\n\t\t\t\t\tblocks,\n\t\t\t\t\tgroupingBlockName\n\t\t\t\t);\n\t\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t\t\tspeak( __( 'Selected blocks are grouped.' ) );\n\t\t\t}\n\t\t}\n\t}\n\tconst blockToolbarRef = usePopoverScroll( __unstableContentRef );\n\tconst blockToolbarAfterRef = usePopoverScroll( __unstableContentRef );\n\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/no-static-element-interactions\n\t\t<div { ...props } onKeyDown={ onKeyDown }>\n\t\t\t<InsertionPointOpenRef.Provider value={ useRef( false ) }>\n\t\t\t\t{ ! isTyping && ! isZoomOutMode && (\n\t\t\t\t\t<InsertionPoint\n\t\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ showEmptyBlockSideInserter && (\n\t\t\t\t\t<EmptyBlockInserter\n\t\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ showBlockToolbarPopover && (\n\t\t\t\t\t<BlockToolbarPopover\n\t\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\tisTyping={ isTyping }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ /* Used for the inline rich text toolbar. Until this toolbar is combined into BlockToolbar, someone implementing their own BlockToolbar will also need to use this to see the image caption toolbar. */ }\n\t\t\t\t{ ! isZoomOutMode && ! hasFixedToolbar && (\n\t\t\t\t\t<Popover.Slot\n\t\t\t\t\t\tname=\"block-toolbar\"\n\t\t\t\t\t\tref={ blockToolbarRef }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ children }\n\t\t\t\t{ /* Used for inline rich text popovers. */ }\n\t\t\t\t<Popover.Slot\n\t\t\t\t\tname=\"__unstable-block-tools-after\"\n\t\t\t\t\tref={ blockToolbarAfterRef }\n\t\t\t\t/>\n\t\t\t\t{ isZoomOutMode && ! isDragging && (\n\t\t\t\t\t<ZoomOutModeInserters\n\t\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</InsertionPointOpenRef.Provider>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\n/**\n * Source of truth for which block tools are showing in the block editor.\n *\n * @return {Object} Object of which block tools will be shown.\n */\nexport function useShowBlockTools() {\n\treturn useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetFirstMultiSelectedBlockClientId,\n\t\t\tgetBlock,\n\t\t\tgetBlockMode,\n\t\t\tgetSettings,\n\t\t\t__unstableGetEditorMode,\n\t\t\tisTyping,\n\t\t\tisBlockInterfaceHidden,\n\t\t} = unlock( select( blockEditorStore ) );\n\n\t\tconst clientId =\n\t\t\tgetSelectedBlockClientId() || getFirstMultiSelectedBlockClientId();\n\n\t\tconst block = getBlock( clientId );\n\t\tconst editorMode = __unstableGetEditorMode();\n\t\tconst hasSelectedBlock = !! clientId && !! block;\n\t\tconst isEmptyDefaultBlock =\n\t\t\thasSelectedBlock &&\n\t\t\tisUnmodifiedDefaultBlock( block ) &&\n\t\t\tgetBlockMode( clientId ) !== 'html';\n\t\tconst _showEmptyBlockSideInserter =\n\t\t\tclientId &&\n\t\t\t! isTyping() &&\n\t\t\t// Hide the block inserter on the navigation mode.\n\t\t\t// See https://github.com/WordPress/gutenberg/pull/66636#discussion_r1824728483.\n\t\t\teditorMode !== 'navigation' &&\n\t\t\tisEmptyDefaultBlock;\n\t\tconst _showBlockToolbarPopover =\n\t\t\t! isBlockInterfaceHidden() &&\n\t\t\t! getSettings().hasFixedToolbar &&\n\t\t\t! _showEmptyBlockSideInserter &&\n\t\t\thasSelectedBlock &&\n\t\t\t! isEmptyDefaultBlock;\n\n\t\treturn {\n\t\t\tshowEmptyBlockSideInserter: _showEmptyBlockSideInserter,\n\t\t\tshowBlockToolbarPopover: _showBlockToolbarPopover,\n\t\t};\n\t}, [] );\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"commands\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst ungroup = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M18 4h-7c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 9c0 .3-.2.5-.5.5h-7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5v7zm-5 5c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-7c0-.3.2-.5.5-.5h1V9H6c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2v-1h-1.5v1z\" />\n\t</SVG>\n);\n\nexport default ungroup;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst trash = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z\"\n\t\t/>\n\t</SVG>\n);\n\nexport default trash;\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\thasBlockSupport,\n\tstore as blocksStore,\n\tswitchToBlockType,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useCommandLoader } from '@wordpress/commands';\nimport {\n\tcopy,\n\ttrash as remove,\n\tplus as add,\n\tgroup,\n\tungroup,\n} from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { store as blockEditorStore } from '../../store';\n\nconst getTransformCommands = () =>\n\tfunction useTransformCommands() {\n\t\tconst { replaceBlocks, multiSelect } = useDispatch( blockEditorStore );\n\t\tconst {\n\t\t\tblocks,\n\t\t\tclientIds,\n\t\t\tcanRemove,\n\t\t\tpossibleBlockTransformations,\n\t\t\tinvalidSelection,\n\t\t} = useSelect( ( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockTransformItems,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tgetBlocksByClientId,\n\t\t\t\tcanRemoveBlocks,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst selectedBlocks = getBlocksByClientId(\n\t\t\t\tselectedBlockClientIds\n\t\t\t);\n\n\t\t\t// selectedBlocks can have `null`s when something tries to call `selectBlock` with an inexistent clientId.\n\t\t\t// These nulls will cause fatal errors down the line.\n\t\t\t// In order to prevent discrepancies between selectedBlockClientIds and selectedBlocks, we effectively treat the entire selection as invalid.\n\t\t\t// @see https://github.com/WordPress/gutenberg/pull/59410#issuecomment-2006304536\n\t\t\tif ( selectedBlocks.filter( ( block ) => ! block ).length > 0 ) {\n\t\t\t\treturn {\n\t\t\t\t\tinvalidSelection: true,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst rootClientId = getBlockRootClientId(\n\t\t\t\tselectedBlockClientIds[ 0 ]\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tblocks: selectedBlocks,\n\t\t\t\tclientIds: selectedBlockClientIds,\n\t\t\t\tpossibleBlockTransformations: getBlockTransformItems(\n\t\t\t\t\tselectedBlocks,\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t\tcanRemove: canRemoveBlocks( selectedBlockClientIds ),\n\t\t\t\tinvalidSelection: false,\n\t\t\t};\n\t\t}, [] );\n\n\t\tif ( invalidSelection ) {\n\t\t\treturn {\n\t\t\t\tisLoading: false,\n\t\t\t\tcommands: [],\n\t\t\t};\n\t\t}\n\t\tconst isTemplate = blocks.length === 1 && isTemplatePart( blocks[ 0 ] );\n\n\t\tfunction selectForMultipleBlocks( insertedBlocks ) {\n\t\t\tif ( insertedBlocks.length > 1 ) {\n\t\t\t\tmultiSelect(\n\t\t\t\t\tinsertedBlocks[ 0 ].clientId,\n\t\t\t\t\tinsertedBlocks[ insertedBlocks.length - 1 ].clientId\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Simple block transformation based on the `Block Transforms` API.\n\t\tfunction onBlockTransform( name ) {\n\t\t\tconst newBlocks = switchToBlockType( blocks, name );\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t\tselectForMultipleBlocks( newBlocks );\n\t\t}\n\n\t\t/**\n\t\t * The `isTemplate` check is a stopgap solution here.\n\t\t * Ideally, the Transforms API should handle this\n\t\t * by allowing to exclude blocks from wildcard transformations.\n\t\t */\n\t\tconst hasPossibleBlockTransformations =\n\t\t\t!! possibleBlockTransformations.length && canRemove && ! isTemplate;\n\n\t\tif (\n\t\t\t! clientIds ||\n\t\t\tclientIds.length < 1 ||\n\t\t\t! hasPossibleBlockTransformations\n\t\t) {\n\t\t\treturn { isLoading: false, commands: [] };\n\t\t}\n\n\t\tconst commands = possibleBlockTransformations.map(\n\t\t\t( transformation ) => {\n\t\t\t\tconst { name, title, icon } = transformation;\n\t\t\t\treturn {\n\t\t\t\t\tname:\n\t\t\t\t\t\t'core/block-editor/transform-to-' +\n\t\t\t\t\t\tname.replace( '/', '-' ),\n\t\t\t\t\t/* translators: %s: Block or block variation name. */\n\t\t\t\t\tlabel: sprintf( __( 'Transform to %s' ), title ),\n\t\t\t\t\ticon: <BlockIcon icon={ icon } />,\n\t\t\t\t\tcallback: ( { close } ) => {\n\t\t\t\t\t\tonBlockTransform( name );\n\t\t\t\t\t\tclose();\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t);\n\n\t\treturn { isLoading: false, commands };\n\t};\n\nconst getQuickActionsCommands = () =>\n\tfunction useQuickActionsCommands() {\n\t\tconst { clientIds, isUngroupable, isGroupable } = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\t\tisUngroupable: _isUngroupable,\n\t\t\t\t\tisGroupable: _isGroupable,\n\t\t\t\t} = select( blockEditorStore );\n\t\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\n\t\t\t\treturn {\n\t\t\t\t\tclientIds: selectedBlockClientIds,\n\t\t\t\t\tisUngroupable: _isUngroupable(),\n\t\t\t\t\tisGroupable: _isGroupable(),\n\t\t\t\t};\n\t\t\t},\n\t\t\t[]\n\t\t);\n\t\tconst {\n\t\t\tcanInsertBlockType,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlocksByClientId,\n\t\t\tcanRemoveBlocks,\n\t\t} = useSelect( blockEditorStore );\n\t\tconst { getDefaultBlockName, getGroupingBlockName } =\n\t\t\tuseSelect( blocksStore );\n\n\t\tconst blocks = getBlocksByClientId( clientIds );\n\n\t\tconst {\n\t\t\tremoveBlocks,\n\t\t\treplaceBlocks,\n\t\t\tduplicateBlocks,\n\t\t\tinsertAfterBlock,\n\t\t\tinsertBeforeBlock,\n\t\t} = useDispatch( blockEditorStore );\n\n\t\tconst onGroup = () => {\n\t\t\tif ( ! blocks.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst groupingBlockName = getGroupingBlockName();\n\n\t\t\t// Activate the `transform` on `core/group` which does the conversion.\n\t\t\tconst newBlocks = switchToBlockType( blocks, groupingBlockName );\n\n\t\t\tif ( ! newBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t};\n\t\tconst onUngroup = () => {\n\t\t\tif ( ! blocks.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst innerBlocks = blocks[ 0 ].innerBlocks;\n\n\t\t\tif ( ! innerBlocks.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treplaceBlocks( clientIds, innerBlocks );\n\t\t};\n\n\t\tif ( ! clientIds || clientIds.length < 1 ) {\n\t\t\treturn { isLoading: false, commands: [] };\n\t\t}\n\n\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\t\tconst canInsertDefaultBlock = canInsertBlockType(\n\t\t\tgetDefaultBlockName(),\n\t\t\trootClientId\n\t\t);\n\t\tconst canDuplicate = blocks.every( ( block ) => {\n\t\t\treturn (\n\t\t\t\t!! block &&\n\t\t\t\thasBlockSupport( block.name, 'multiple', true ) &&\n\t\t\t\tcanInsertBlockType( block.name, rootClientId )\n\t\t\t);\n\t\t} );\n\t\tconst canRemove = canRemoveBlocks( clientIds );\n\n\t\tconst commands = [];\n\n\t\tif ( canDuplicate ) {\n\t\t\tcommands.push( {\n\t\t\t\tname: 'duplicate',\n\t\t\t\tlabel: __( 'Duplicate' ),\n\t\t\t\tcallback: () => duplicateBlocks( clientIds, true ),\n\t\t\t\ticon: copy,\n\t\t\t} );\n\t\t}\n\n\t\tif ( canInsertDefaultBlock ) {\n\t\t\tcommands.push(\n\t\t\t\t{\n\t\t\t\t\tname: 'add-before',\n\t\t\t\t\tlabel: __( 'Add before' ),\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tconst clientId = Array.isArray( clientIds )\n\t\t\t\t\t\t\t? clientIds[ 0 ]\n\t\t\t\t\t\t\t: clientId;\n\t\t\t\t\t\tinsertBeforeBlock( clientId );\n\t\t\t\t\t},\n\t\t\t\t\ticon: add,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'add-after',\n\t\t\t\t\tlabel: __( 'Add after' ),\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tconst clientId = Array.isArray( clientIds )\n\t\t\t\t\t\t\t? clientIds[ clientIds.length - 1 ]\n\t\t\t\t\t\t\t: clientId;\n\t\t\t\t\t\tinsertAfterBlock( clientId );\n\t\t\t\t\t},\n\t\t\t\t\ticon: add,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif ( isGroupable ) {\n\t\t\tcommands.push( {\n\t\t\t\tname: 'Group',\n\t\t\t\tlabel: __( 'Group' ),\n\t\t\t\tcallback: onGroup,\n\t\t\t\ticon: group,\n\t\t\t} );\n\t\t}\n\n\t\tif ( isUngroupable ) {\n\t\t\tcommands.push( {\n\t\t\t\tname: 'ungroup',\n\t\t\t\tlabel: __( 'Ungroup' ),\n\t\t\t\tcallback: onUngroup,\n\t\t\t\ticon: ungroup,\n\t\t\t} );\n\t\t}\n\n\t\tif ( canRemove ) {\n\t\t\tcommands.push( {\n\t\t\t\tname: 'remove',\n\t\t\t\tlabel: __( 'Delete' ),\n\t\t\t\tcallback: () => removeBlocks( clientIds, true ),\n\t\t\t\ticon: remove,\n\t\t\t} );\n\t\t}\n\n\t\treturn {\n\t\t\tisLoading: false,\n\t\t\tcommands: commands.map( ( command ) => ( {\n\t\t\t\t...command,\n\t\t\t\tname: 'core/block-editor/action-' + command.name,\n\t\t\t\tcallback: ( { close } ) => {\n\t\t\t\t\tcommand.callback();\n\t\t\t\t\tclose();\n\t\t\t\t},\n\t\t\t} ) ),\n\t\t};\n\t};\n\nexport const useBlockCommands = () => {\n\tuseCommandLoader( {\n\t\tname: 'core/block-editor/blockTransforms',\n\t\thook: getTransformCommands(),\n\t} );\n\tuseCommandLoader( {\n\t\tname: 'core/block-editor/blockQuickActions',\n\t\thook: getQuickActionsCommands(),\n\t\tcontext: 'block-selection-edit',\n\t} );\n};\n","/**\n * WordPress dependencies\n */\nimport { useMergeRefs, useViewportMatch } from '@wordpress/compose';\nimport { useRef } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockList from '../block-list';\nimport BlockTools from '../block-tools';\nimport EditorStyles from '../editor-styles';\nimport Iframe from '../iframe';\nimport WritingFlow from '../writing-flow';\nimport { useMouseMoveTypingReset } from '../observe-typing';\nimport { useBlockSelectionClearer } from '../block-selection-clearer';\nimport { useBlockCommands } from '../use-block-commands';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\n// EditorStyles is a memoized component, so avoid passing a new\n// object reference on each render.\nconst EDITOR_STYLE_TRANSFORM_OPTIONS = {\n\t// Don't transform selectors that already specify `.editor-styles-wrapper`.\n\tignoredSelectors: [ /\\.editor-styles-wrapper/gi ],\n};\n\nexport function ExperimentalBlockCanvas( {\n\tshouldIframe = true,\n\theight = '300px',\n\tchildren = <BlockList />,\n\tstyles,\n\tcontentRef: contentRefProp,\n\tiframeProps,\n} ) {\n\tuseBlockCommands();\n\tconst isTabletViewport = useViewportMatch( 'medium', '<' );\n\tconst resetTypingRef = useMouseMoveTypingReset();\n\tconst clearerRef = useBlockSelectionClearer();\n\tconst localRef = useRef();\n\tconst contentRef = useMergeRefs( [ contentRefProp, clearerRef, localRef ] );\n\tconst zoomLevel = useSelect(\n\t\t( select ) => unlock( select( blockEditorStore ) ).getZoomLevel(),\n\t\t[]\n\t);\n\tconst zoomOutIframeProps =\n\t\tzoomLevel !== 100 && ! isTabletViewport\n\t\t\t? {\n\t\t\t\t\tscale: zoomLevel,\n\t\t\t\t\tframeSize: '40px',\n\t\t\t  }\n\t\t\t: {};\n\n\tif ( ! shouldIframe ) {\n\t\treturn (\n\t\t\t<BlockTools\n\t\t\t\t__unstableContentRef={ localRef }\n\t\t\t\tstyle={ { height, display: 'flex' } }\n\t\t\t>\n\t\t\t\t<EditorStyles\n\t\t\t\t\tstyles={ styles }\n\t\t\t\t\tscope=\":where(.editor-styles-wrapper)\"\n\t\t\t\t\ttransformOptions={ EDITOR_STYLE_TRANSFORM_OPTIONS }\n\t\t\t\t/>\n\t\t\t\t<WritingFlow\n\t\t\t\t\tref={ contentRef }\n\t\t\t\t\tclassName=\"editor-styles-wrapper\"\n\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</WritingFlow>\n\t\t\t</BlockTools>\n\t\t);\n\t}\n\n\treturn (\n\t\t<BlockTools\n\t\t\t__unstableContentRef={ localRef }\n\t\t\tstyle={ { height, display: 'flex' } }\n\t\t>\n\t\t\t<Iframe\n\t\t\t\t{ ...iframeProps }\n\t\t\t\t{ ...zoomOutIframeProps }\n\t\t\t\tref={ resetTypingRef }\n\t\t\t\tcontentRef={ contentRef }\n\t\t\t\tstyle={ {\n\t\t\t\t\t...iframeProps?.style,\n\t\t\t\t} }\n\t\t\t\tname=\"editor-canvas\"\n\t\t\t>\n\t\t\t\t<EditorStyles styles={ styles } />\n\t\t\t\t{ children }\n\t\t\t</Iframe>\n\t\t</BlockTools>\n\t);\n}\n\n/**\n * BlockCanvas component is a component used to display the canvas of the block editor.\n * What we call the canvas is an iframe containing the block list that you can manipulate.\n * The component is also responsible of wiring up all the necessary hooks to enable\n * the keyboard navigation across blocks in the editor and inject content styles into the iframe.\n *\n * @example\n *\n * ```jsx\n * function MyBlockEditor() {\n *   const [ blocks, updateBlocks ] = useState([]);\n *   return (\n *     <BlockEditorProvider\n *       value={ blocks }\n *       onInput={ updateBlocks }\n *       onChange={ persistBlocks }\n *      >\n *        <BlockCanvas height=\"400px\" />\n *      </BlockEditorProvider>\n *    );\n * }\n * ```\n *\n * @param {Object}  props          Component props.\n * @param {string}  props.height   Canvas height, defaults to 300px.\n * @param {Array}   props.styles   Content styles to inject into the iframe.\n * @param {Element} props.children Content of the canvas, defaults to the BlockList component.\n * @return {Element}               Block Breadcrumb.\n */\nfunction BlockCanvas( { children, height, styles } ) {\n\treturn (\n\t\t<ExperimentalBlockCanvas height={ height } styles={ styles }>\n\t\t\t{ children }\n\t\t</ExperimentalBlockCanvas>\n\t);\n}\n\nexport default BlockCanvas;\n","/**\n * WordPress dependencies\n */\nimport {\n\tToolbarButton,\n\tDropdown,\n\tToolbarGroup,\n\tSVG,\n\tPath,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { DOWN } from '@wordpress/keycodes';\nimport deprecated from '@wordpress/deprecated';\n\nconst ColorSelectorSVGIcon = () => (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n\t\t<Path d=\"M7.434 5l3.18 9.16H8.538l-.692-2.184H4.628l-.705 2.184H2L5.18 5h2.254zm-1.13 1.904h-.115l-1.148 3.593H7.44L6.304 6.904zM14.348 7.006c1.853 0 2.9.876 2.9 2.374v4.78h-1.79v-.914h-.114c-.362.64-1.123 1.022-2.031 1.022-1.346 0-2.292-.826-2.292-2.108 0-1.27.972-2.006 2.71-2.107l1.696-.102V9.38c0-.584-.42-.914-1.18-.914-.667 0-1.112.228-1.264.647h-1.701c.12-1.295 1.307-2.107 3.066-2.107zm1.079 4.1l-1.416.09c-.793.056-1.18.342-1.18.844 0 .52.45.837 1.091.837.857 0 1.505-.545 1.505-1.256v-.515z\" />\n\t</SVG>\n);\n\n/**\n * Color Selector Icon component.\n *\n * @param {Object} props           Component properties.\n * @param {Object} props.style     Style object.\n * @param {string} props.className Class name for component.\n *\n * @return {*} React Icon component.\n */\nconst ColorSelectorIcon = ( { style, className } ) => {\n\treturn (\n\t\t<div className=\"block-library-colors-selector__icon-container\">\n\t\t\t<div\n\t\t\t\tclassName={ `${ className } block-library-colors-selector__state-selection` }\n\t\t\t\tstyle={ style }\n\t\t\t>\n\t\t\t\t<ColorSelectorSVGIcon />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n/**\n * Renders the Colors Selector Toolbar with the icon button.\n *\n * @param {Object} props                 Component properties.\n * @param {Object} props.TextColor       Text color component that wraps icon.\n * @param {Object} props.BackgroundColor Background color component that wraps icon.\n *\n * @return {*} React toggle button component.\n */\nconst renderToggleComponent =\n\t( { TextColor, BackgroundColor } ) =>\n\t( { onToggle, isOpen } ) => {\n\t\tconst openOnArrowDown = ( event ) => {\n\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tonToggle();\n\t\t\t}\n\t\t};\n\n\t\treturn (\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName=\"components-toolbar__control block-library-colors-selector__toggle\"\n\t\t\t\t\tlabel={ __( 'Open Colors Selector' ) }\n\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\tonKeyDown={ openOnArrowDown }\n\t\t\t\t\ticon={\n\t\t\t\t\t\t<BackgroundColor>\n\t\t\t\t\t\t\t<TextColor>\n\t\t\t\t\t\t\t\t<ColorSelectorIcon />\n\t\t\t\t\t\t\t</TextColor>\n\t\t\t\t\t\t</BackgroundColor>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t);\n\t};\n\nconst BlockColorsStyleSelector = ( { children, ...other } ) => {\n\tdeprecated( `wp.blockEditor.BlockColorsStyleSelector`, {\n\t\talternative: 'block supports API',\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t} );\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ { placement: 'bottom-start' } }\n\t\t\tclassName=\"block-library-colors-selector\"\n\t\t\tcontentClassName=\"block-library-colors-selector__popover\"\n\t\t\trenderToggle={ renderToggleComponent( other ) }\n\t\t\trenderContent={ () => children }\n\t\t/>\n\t);\n};\n\nexport default BlockColorsStyleSelector;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst listView = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z\" />\n\t</SVG>\n);\n\nexport default listView;\n","/**\n * WordPress dependencies\n */\nimport { createContext, useContext } from '@wordpress/element';\n\nexport const ListViewContext = createContext( {} );\n\nexport const useListViewContext = () => useContext( ListViewContext );\n","/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\n\n/**\n * A component specifically designed to be used as an element referenced\n * by ARIA attributes such as `aria-labelledby` or `aria-describedby`.\n *\n * @param {Object}                    props          Props.\n * @param {import('react').ReactNode} props.children\n */\nexport default function AriaReferencedText( { children, ...props } ) {\n\tconst ref = useRef();\n\n\tuseEffect( () => {\n\t\tif ( ref.current ) {\n\t\t\t// This seems like a no-op, but it fixes a bug in Firefox where\n\t\t\t// it fails to recompute the text when only the text node changes.\n\t\t\t// @see https://github.com/WordPress/gutenberg/pull/51035\n\t\t\tref.current.textContent = ref.current.textContent;\n\t\t}\n\t}, [ children ] );\n\n\treturn (\n\t\t<div hidden { ...props } ref={ ref }>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { speak } from '@wordpress/a11y';\nimport { useSelect } from '@wordpress/data';\nimport { forwardRef, useEffect } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\nimport { useListViewContext } from './context';\nimport Inserter from '../inserter';\nimport AriaReferencedText from './aria-referenced-text';\nimport { unlock } from '../../lock-unlock';\n\nexport const Appender = forwardRef(\n\t( { nestingLevel, blockCount, clientId, ...props }, ref ) => {\n\t\tconst { insertedBlock, setInsertedBlock } = useListViewContext();\n\n\t\tconst instanceId = useInstanceId( Appender );\n\t\tconst hideInserter = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst { getTemplateLock, isZoomOut } = unlock(\n\t\t\t\t\tselect( blockEditorStore )\n\t\t\t\t);\n\n\t\t\t\treturn !! getTemplateLock( clientId ) || isZoomOut();\n\t\t\t},\n\t\t\t[ clientId ]\n\t\t);\n\n\t\tconst blockTitle = useBlockDisplayTitle( {\n\t\t\tclientId,\n\t\t\tcontext: 'list-view',\n\t\t} );\n\n\t\tconst insertedBlockTitle = useBlockDisplayTitle( {\n\t\t\tclientId: insertedBlock?.clientId,\n\t\t\tcontext: 'list-view',\n\t\t} );\n\n\t\tuseEffect( () => {\n\t\t\tif ( ! insertedBlockTitle?.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tspeak(\n\t\t\t\tsprintf(\n\t\t\t\t\t// translators: %s: name of block being inserted (i.e. Paragraph, Image, Group etc)\n\t\t\t\t\t__( '%s block inserted' ),\n\t\t\t\t\tinsertedBlockTitle\n\t\t\t\t),\n\t\t\t\t'assertive'\n\t\t\t);\n\t\t}, [ insertedBlockTitle ] );\n\n\t\tif ( hideInserter ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst descriptionId = `list-view-appender__${ instanceId }`;\n\t\tconst description = sprintf(\n\t\t\t/* translators: 1: The name of the block. 2: The numerical position of the block. 3: The level of nesting for the block. */\n\t\t\t__( 'Append to %1$s block at position %2$d, Level %3$d' ),\n\t\t\tblockTitle,\n\t\t\tblockCount + 1,\n\t\t\tnestingLevel\n\t\t);\n\n\t\treturn (\n\t\t\t<div className=\"list-view-appender\">\n\t\t\t\t<Inserter\n\t\t\t\t\tref={ ref }\n\t\t\t\t\trootClientId={ clientId }\n\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\tisAppender\n\t\t\t\t\tselectBlockOnInsert={ false }\n\t\t\t\t\tshouldDirectInsert={ false }\n\t\t\t\t\t__experimentalIsQuick\n\t\t\t\t\t{ ...props }\n\t\t\t\t\ttoggleProps={ { 'aria-describedby': descriptionId } }\n\t\t\t\t\tonSelectOrClose={ ( maybeInsertedBlock ) => {\n\t\t\t\t\t\tif ( maybeInsertedBlock?.clientId ) {\n\t\t\t\t\t\t\tsetInsertedBlock( maybeInsertedBlock );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<AriaReferencedText id={ descriptionId }>\n\t\t\t\t\t{ description }\n\t\t\t\t</AriaReferencedText>\n\t\t\t</div>\n\t\t);\n\t}\n);\n","/**\n * External dependencies\n */\nimport { animated } from '@react-spring/web';\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __experimentalTreeGridRow as TreeGridRow } from '@wordpress/components';\nimport { useMergeRefs } from '@wordpress/compose';\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useMovingAnimation from '../use-moving-animation';\n\nconst AnimatedTreeGridRow = animated( TreeGridRow );\n\nconst ListViewLeaf = forwardRef(\n\t(\n\t\t{\n\t\t\tisDragged,\n\t\t\tisSelected,\n\t\t\tposition,\n\t\t\tlevel,\n\t\t\trowCount,\n\t\t\tchildren,\n\t\t\tclassName,\n\t\t\tpath,\n\t\t\t...props\n\t\t},\n\t\tref\n\t) => {\n\t\tconst animationRef = useMovingAnimation( {\n\t\t\tclientId: props[ 'data-block' ],\n\t\t\tenableAnimation: true,\n\t\t\ttriggerAnimationOnChange: path,\n\t\t} );\n\n\t\tconst mergedRef = useMergeRefs( [ ref, animationRef ] );\n\n\t\treturn (\n\t\t\t<AnimatedTreeGridRow\n\t\t\t\tref={ mergedRef }\n\t\t\t\tclassName={ clsx( 'block-editor-list-view-leaf', className ) }\n\t\t\t\tlevel={ level }\n\t\t\t\tpositionInSet={ position }\n\t\t\t\tsetSize={ rowCount }\n\t\t\t\tisExpanded={ undefined }\n\t\t\t\t{ ...props }\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</AnimatedTreeGridRow>\n\t\t);\n\t}\n);\n\nexport default ListViewLeaf;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst pinSmall = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M10.97 10.159a3.382 3.382 0 0 0-2.857.955l1.724 1.723-2.836 2.913L7 17h1.25l2.913-2.837 1.723 1.723a3.38 3.38 0 0 0 .606-.825c.33-.63.446-1.343.35-2.032L17 10.695 13.305 7l-2.334 3.159Z\" />\n\t</SVG>\n);\n\nexport default pinSmall;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst lockSmall = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M15 11h-.2V9c0-1.5-1.2-2.8-2.8-2.8S9.2 7.5 9.2 9v2H9c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1h6c.6 0 1-.4 1-1v-4c0-.6-.4-1-1-1zm-1.8 0h-2.5V9c0-.7.6-1.2 1.2-1.2s1.2.6 1.2 1.2v2z\"\n\t\t/>\n\t</SVG>\n);\n\nexport default lockSmall;\n","/**\n * WordPress dependencies\n */\nimport { chevronRightSmall, chevronLeftSmall, Icon } from '@wordpress/icons';\nimport { isRTL } from '@wordpress/i18n';\n\nexport default function ListViewExpander( { onClick } ) {\n\treturn (\n\t\t// Keyboard events are handled by TreeGrid see: components/src/tree-grid/index.js\n\t\t//\n\t\t// The expander component is implemented as a pseudo element in the w3 example\n\t\t// https://www.w3.org/TR/wai-aria-practices/examples/treegrid/treegrid-1.html\n\t\t//\n\t\t// We've mimicked this by adding an icon with aria-hidden set to true to hide this from the accessibility tree.\n\t\t// For the current tree grid implementation, please do not try to make this a button.\n\t\t//\n\t\t// eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions\n\t\t<span\n\t\t\tclassName=\"block-editor-list-view__expander\"\n\t\t\tonClick={ ( event ) => onClick( event, { forceToggle: true } ) }\n\t\t\taria-hidden=\"true\"\n\t\t\tdata-testid=\"list-view-expander\"\n\t\t>\n\t\t\t<Icon icon={ isRTL() ? chevronLeftSmall : chevronRightSmall } />\n\t\t</span>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n// Maximum number of images to display in a list view row.\nconst MAX_IMAGES = 3;\nconst IMAGE_GETTERS = {\n\t'core/image': ( { clientId, attributes } ) => {\n\t\tif ( attributes.url ) {\n\t\t\treturn {\n\t\t\t\turl: attributes.url,\n\t\t\t\talt: attributes.alt || '',\n\t\t\t\tclientId,\n\t\t\t};\n\t\t}\n\t},\n\t'core/cover': ( { clientId, attributes } ) => {\n\t\tif ( attributes.backgroundType === 'image' && attributes.url ) {\n\t\t\treturn {\n\t\t\t\turl: attributes.url,\n\t\t\t\talt: attributes.alt || '',\n\t\t\t\tclientId,\n\t\t\t};\n\t\t}\n\t},\n\t'core/media-text': ( { clientId, attributes } ) => {\n\t\tif ( attributes.mediaType === 'image' && attributes.mediaUrl ) {\n\t\t\treturn {\n\t\t\t\turl: attributes.mediaUrl,\n\t\t\t\talt: attributes.mediaAlt || '',\n\t\t\t\tclientId,\n\t\t\t};\n\t\t}\n\t},\n\t'core/gallery': ( { innerBlocks } ) => {\n\t\tconst images = [];\n\t\tconst getValues = !! innerBlocks?.length\n\t\t\t? IMAGE_GETTERS[ innerBlocks[ 0 ].name ]\n\t\t\t: undefined;\n\t\tif ( ! getValues ) {\n\t\t\treturn images;\n\t\t}\n\n\t\tfor ( const innerBlock of innerBlocks ) {\n\t\t\tconst img = getValues( innerBlock );\n\t\t\tif ( img ) {\n\t\t\t\timages.push( img );\n\t\t\t}\n\t\t\tif ( images.length >= MAX_IMAGES ) {\n\t\t\t\treturn images;\n\t\t\t}\n\t\t}\n\n\t\treturn images;\n\t},\n};\n\nfunction getImagesFromBlock( block, isExpanded ) {\n\tconst getImages = IMAGE_GETTERS[ block.name ];\n\tconst images = !! getImages ? getImages( block ) : undefined;\n\n\tif ( ! images ) {\n\t\treturn [];\n\t}\n\n\tif ( ! Array.isArray( images ) ) {\n\t\treturn [ images ];\n\t}\n\n\treturn isExpanded ? [] : images;\n}\n\n/**\n * Get a block's preview images for display within a list view row.\n *\n * TODO: Currently only supports images from the core/image and core/gallery\n * blocks. This should be expanded to support other blocks that have images,\n * potentially via an API that blocks can opt into / provide their own logic.\n *\n * @param {Object}  props            Hook properties.\n * @param {string}  props.clientId   The block's clientId.\n * @param {boolean} props.isExpanded Whether or not the block is expanded in the list view.\n * @return {Array} Images.\n */\nexport default function useListViewImages( { clientId, isExpanded } ) {\n\tconst { block } = useSelect(\n\t\t( select ) => {\n\t\t\treturn { block: select( blockEditorStore ).getBlock( clientId ) };\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst images = useMemo( () => {\n\t\treturn getImagesFromBlock( block, isExpanded );\n\t}, [ block, isExpanded ] );\n\n\treturn images;\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalHStack as HStack,\n\t__experimentalTruncate as Truncate,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { forwardRef } from '@wordpress/element';\nimport { Icon, lockSmall as lock, pinSmall } from '@wordpress/icons';\nimport { SPACE, ENTER } from '@wordpress/keycodes';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\nimport ListViewExpander from './expander';\nimport { useBlockLock } from '../block-lock';\nimport useListViewImages from './use-list-view-images';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\nconst { Badge } = unlock( componentsPrivateApis );\n\nfunction ListViewBlockSelectButton(\n\t{\n\t\tclassName,\n\t\tblock: { clientId },\n\t\tonClick,\n\t\tonContextMenu,\n\t\tonMouseDown,\n\t\tonToggleExpanded,\n\t\ttabIndex,\n\t\tonFocus,\n\t\tonDragStart,\n\t\tonDragEnd,\n\t\tdraggable,\n\t\tisExpanded,\n\t\tariaDescribedBy,\n\t},\n\tref\n) {\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst blockTitle = useBlockDisplayTitle( {\n\t\tclientId,\n\t\tcontext: 'list-view',\n\t} );\n\tconst { isLocked } = useBlockLock( clientId );\n\tconst { isContentOnly } = useSelect(\n\t\t( select ) => ( {\n\t\t\tisContentOnly:\n\t\t\t\tselect( blockEditorStore ).getBlockEditingMode( clientId ) ===\n\t\t\t\t'contentOnly',\n\t\t} ),\n\t\t[ clientId ]\n\t);\n\tconst shouldShowLockIcon = isLocked && ! isContentOnly;\n\tconst isSticky = blockInformation?.positionType === 'sticky';\n\tconst images = useListViewImages( { clientId, isExpanded } );\n\n\t// The `href` attribute triggers the browser's native HTML drag operations.\n\t// When the link is dragged, the element's outerHTML is set in DataTransfer object as text/html.\n\t// We need to clear any HTML drag data to prevent `pasteHandler` from firing\n\t// inside the `useOnBlockDrop` hook.\n\tconst onDragStartHandler = ( event ) => {\n\t\tevent.dataTransfer.clearData();\n\t\tonDragStart?.( event );\n\t};\n\n\t/**\n\t * @param {KeyboardEvent} event\n\t */\n\tfunction onKeyDown( event ) {\n\t\tif ( event.keyCode === ENTER || event.keyCode === SPACE ) {\n\t\t\tonClick( event );\n\t\t}\n\t}\n\n\treturn (\n\t\t<a\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-list-view-block-select-button',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\tonClick={ onClick }\n\t\t\tonContextMenu={ onContextMenu }\n\t\t\tonKeyDown={ onKeyDown }\n\t\t\tonMouseDown={ onMouseDown }\n\t\t\tref={ ref }\n\t\t\ttabIndex={ tabIndex }\n\t\t\tonFocus={ onFocus }\n\t\t\tonDragStart={ onDragStartHandler }\n\t\t\tonDragEnd={ onDragEnd }\n\t\t\tdraggable={ draggable }\n\t\t\thref={ `#block-${ clientId }` }\n\t\t\taria-describedby={ ariaDescribedBy }\n\t\t\taria-expanded={ isExpanded }\n\t\t>\n\t\t\t<ListViewExpander onClick={ onToggleExpanded } />\n\t\t\t<BlockIcon\n\t\t\t\ticon={ blockInformation?.icon }\n\t\t\t\tshowColors\n\t\t\t\tcontext=\"list-view\"\n\t\t\t/>\n\t\t\t<HStack\n\t\t\t\talignment=\"center\"\n\t\t\t\tclassName=\"block-editor-list-view-block-select-button__label-wrapper\"\n\t\t\t\tjustify=\"flex-start\"\n\t\t\t\tspacing={ 1 }\n\t\t\t>\n\t\t\t\t<span className=\"block-editor-list-view-block-select-button__title\">\n\t\t\t\t\t<Truncate ellipsizeMode=\"auto\">{ blockTitle }</Truncate>\n\t\t\t\t</span>\n\t\t\t\t{ blockInformation?.anchor && (\n\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__anchor-wrapper\">\n\t\t\t\t\t\t<Badge className=\"block-editor-list-view-block-select-button__anchor\">\n\t\t\t\t\t\t\t{ blockInformation.anchor }\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t\t{ isSticky && (\n\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__sticky\">\n\t\t\t\t\t\t<Icon icon={ pinSmall } />\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t\t{ images.length ? (\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__images\"\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t>\n\t\t\t\t\t\t{ images.map( ( image, index ) => (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__image\"\n\t\t\t\t\t\t\t\tkey={ image.clientId }\n\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\tbackgroundImage: `url(${ image.url })`,\n\t\t\t\t\t\t\t\t\tzIndex: images.length - index, // Ensure the first image is on top, and subsequent images are behind.\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</span>\n\t\t\t\t) : null }\n\t\t\t\t{ shouldShowLockIcon && (\n\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__lock\">\n\t\t\t\t\t\t<Icon icon={ lock } />\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t</HStack>\n\t\t</a>\n\t);\n}\n\nexport default forwardRef( ListViewBlockSelectButton );\n","/**\n * WordPress dependencies\n */\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport ListViewBlockSelectButton from './block-select-button';\nimport BlockDraggable from '../block-draggable';\nimport { useListViewContext } from './context';\n\nconst ListViewBlockContents = forwardRef(\n\t(\n\t\t{\n\t\t\tonClick,\n\t\t\tonToggleExpanded,\n\t\t\tblock,\n\t\t\tisSelected,\n\t\t\tposition,\n\t\t\tsiblingBlockCount,\n\t\t\tlevel,\n\t\t\tisExpanded,\n\t\t\tselectedClientIds,\n\t\t\t...props\n\t\t},\n\t\tref\n\t) => {\n\t\tconst { clientId } = block;\n\t\tconst { AdditionalBlockContent, insertedBlock, setInsertedBlock } =\n\t\t\tuseListViewContext();\n\n\t\t// Only include all selected blocks if the currently clicked on block\n\t\t// is one of the selected blocks. This ensures that if a user attempts\n\t\t// to drag a block that isn't part of the selection, they're still able\n\t\t// to drag it and rearrange its position.\n\t\tconst draggableClientIds = selectedClientIds.includes( clientId )\n\t\t\t? selectedClientIds\n\t\t\t: [ clientId ];\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ AdditionalBlockContent && (\n\t\t\t\t\t<AdditionalBlockContent\n\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\tinsertedBlock={ insertedBlock }\n\t\t\t\t\t\tsetInsertedBlock={ setInsertedBlock }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<BlockDraggable\n\t\t\t\t\tappendToOwnerDocument\n\t\t\t\t\tclientIds={ draggableClientIds }\n\t\t\t\t\tcloneClassname=\"block-editor-list-view-draggable-chip\"\n\t\t\t\t>\n\t\t\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\n\t\t\t\t\t\t<ListViewBlockSelectButton\n\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-contents\"\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\t\t\tonToggleExpanded={ onToggleExpanded }\n\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\tsiblingBlockCount={ siblingBlockCount }\n\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\tdraggable={ draggable }\n\t\t\t\t\t\t\tonDragStart={ onDragStart }\n\t\t\t\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\t\t\t\tisExpanded={ isExpanded }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</BlockDraggable>\n\t\t\t</>\n\t\t);\n\t}\n);\n\nexport default ListViewBlockContents;\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { focus } from '@wordpress/dom';\n\nexport const getBlockPositionDescription = ( position, siblingCount, level ) =>\n\tsprintf(\n\t\t/* translators: 1: The numerical position of the block. 2: The total number of blocks. 3. The level of nesting for the block. */\n\t\t__( 'Block %1$d of %2$d, Level %3$d.' ),\n\t\tposition,\n\t\tsiblingCount,\n\t\tlevel\n\t);\n\nexport const getBlockPropertiesDescription = ( blockInformation, isLocked ) =>\n\t[\n\t\tblockInformation?.positionLabel\n\t\t\t? `${ sprintf(\n\t\t\t\t\t// translators: %s: Position of selected block, e.g. \"Sticky\" or \"Fixed\".\n\t\t\t\t\t__( 'Position: %s' ),\n\t\t\t\t\tblockInformation.positionLabel\n\t\t\t  ) }.`\n\t\t\t: undefined,\n\t\tisLocked ? __( 'This block is locked.' ) : undefined,\n\t]\n\t\t.filter( Boolean )\n\t\t.join( ' ' );\n\n/**\n * Returns true if the client ID occurs within the block selection or multi-selection,\n * or false otherwise.\n *\n * @param {string}          clientId               Block client ID.\n * @param {string|string[]} selectedBlockClientIds Selected block client ID, or an array of multi-selected blocks client IDs.\n *\n * @return {boolean} Whether the block is in multi-selection set.\n */\nexport const isClientIdSelected = ( clientId, selectedBlockClientIds ) =>\n\tArray.isArray( selectedBlockClientIds ) && selectedBlockClientIds.length\n\t\t? selectedBlockClientIds.indexOf( clientId ) !== -1\n\t\t: selectedBlockClientIds === clientId;\n\n/**\n * From a start and end clientId of potentially different nesting levels,\n * return the nearest-depth ids that have a common level of depth in the\n * nesting hierarchy. For multiple block selection, this ensure that the\n * selection is always at the same nesting level, and not split across\n * separate levels.\n *\n * @param {string}   startId      The first id of a selection.\n * @param {string}   endId        The end id of a selection, usually one that has been clicked on.\n * @param {string[]} startParents An array of ancestor ids for the start id, in descending order.\n * @param {string[]} endParents   An array of ancestor ids for the end id, in descending order.\n * @return {Object} An object containing the start and end ids.\n */\nexport function getCommonDepthClientIds(\n\tstartId,\n\tendId,\n\tstartParents,\n\tendParents\n) {\n\tconst startPath = [ ...startParents, startId ];\n\tconst endPath = [ ...endParents, endId ];\n\tconst depth = Math.min( startPath.length, endPath.length ) - 1;\n\tconst start = startPath[ depth ];\n\tconst end = endPath[ depth ];\n\n\treturn {\n\t\tstart,\n\t\tend,\n\t};\n}\n\n/**\n * Shift focus to the list view item associated with a particular clientId.\n *\n * @typedef {import('@wordpress/element').RefObject} RefObject\n *\n * @param {string}       focusClientId   The client ID of the block to focus.\n * @param {?HTMLElement} treeGridElement The container element to search within.\n */\nexport function focusListItem( focusClientId, treeGridElement ) {\n\tconst getFocusElement = () => {\n\t\tconst row = treeGridElement?.querySelector(\n\t\t\t`[role=row][data-block=\"${ focusClientId }\"]`\n\t\t);\n\t\tif ( ! row ) {\n\t\t\treturn null;\n\t\t}\n\t\t// Focus the first focusable in the row, which is the ListViewBlockSelectButton.\n\t\treturn focus.focusable.find( row )[ 0 ];\n\t};\n\n\tlet focusElement = getFocusElement();\n\tif ( focusElement ) {\n\t\tfocusElement.focus();\n\t} else {\n\t\t// The element hasn't been painted yet. Defer focusing on the next frame.\n\t\t// This could happen when all blocks have been deleted and the default block\n\t\t// hasn't been added to the editor yet.\n\t\twindow.requestAnimationFrame( () => {\n\t\t\tfocusElement = getFocusElement();\n\n\t\t\t// Ignore if the element still doesn't exist.\n\t\t\tif ( focusElement ) {\n\t\t\t\tfocusElement.focus();\n\t\t\t}\n\t\t} );\n\t}\n}\n\n/**\n * Get values for the block that flag whether the block should be displaced up or down,\n * whether the block is being nested, and whether the block appears after the dragged\n * blocks. These values are used to determine the class names to apply to the block.\n * The list view rows are displaced visually via CSS rules. Displacement rules:\n * - `normal`: no displacement  used to apply a translateY of `0` so that the block\n *  appears in its original position, and moves to that position smoothly when dragging\n *  outside of the list view area.\n * - `up`: the block should be displaced up, creating room beneath the block for the drop indicator.\n * - `down`: the block should be displaced down, creating room above the block for the drop indicator.\n *\n * @param {Object}                props\n * @param {Object}                props.blockIndexes           The indexes of all the blocks in the list view, keyed by clientId.\n * @param {number|null|undefined} props.blockDropTargetIndex   The index of the block that the user is dropping to.\n * @param {?string}               props.blockDropPosition      The position relative to the block that the user is dropping to.\n * @param {string}                props.clientId               The client id for the current block.\n * @param {?number}               props.firstDraggedBlockIndex The index of the first dragged block.\n * @param {?boolean}              props.isDragged              Whether the current block is being dragged. Dragged blocks skip displacement.\n * @return {Object} An object containing the `displacement`, `isAfterDraggedBlocks` and `isNesting` values.\n */\nexport function getDragDisplacementValues( {\n\tblockIndexes,\n\tblockDropTargetIndex,\n\tblockDropPosition,\n\tclientId,\n\tfirstDraggedBlockIndex,\n\tisDragged,\n} ) {\n\tlet displacement;\n\tlet isNesting;\n\tlet isAfterDraggedBlocks;\n\n\tif ( ! isDragged ) {\n\t\tisNesting = false;\n\t\tconst thisBlockIndex = blockIndexes[ clientId ];\n\t\tisAfterDraggedBlocks = thisBlockIndex > firstDraggedBlockIndex;\n\n\t\t// Determine where to displace the position of the current block, relative\n\t\t// to the blocks being dragged (in their original position) and the drop target\n\t\t// (the position where a user is currently dragging the blocks to).\n\t\tif (\n\t\t\tblockDropTargetIndex !== undefined &&\n\t\t\tblockDropTargetIndex !== null &&\n\t\t\tfirstDraggedBlockIndex !== undefined\n\t\t) {\n\t\t\t// If the block is being dragged and there is a valid drop target,\n\t\t\t// determine if the block being rendered should be displaced up or down.\n\n\t\t\tif ( thisBlockIndex !== undefined ) {\n\t\t\t\tif (\n\t\t\t\t\tthisBlockIndex >= firstDraggedBlockIndex &&\n\t\t\t\t\tthisBlockIndex < blockDropTargetIndex\n\t\t\t\t) {\n\t\t\t\t\t// If the current block appears after the set of dragged blocks\n\t\t\t\t\t// (in their original position), but is before the drop target,\n\t\t\t\t\t// then the current block should be displaced up.\n\t\t\t\t\tdisplacement = 'up';\n\t\t\t\t} else if (\n\t\t\t\t\tthisBlockIndex < firstDraggedBlockIndex &&\n\t\t\t\t\tthisBlockIndex >= blockDropTargetIndex\n\t\t\t\t) {\n\t\t\t\t\t// If the current block appears before the set of dragged blocks\n\t\t\t\t\t// (in their original position), but is after the drop target,\n\t\t\t\t\t// then the current block should be displaced down.\n\t\t\t\t\tdisplacement = 'down';\n\t\t\t\t} else {\n\t\t\t\t\tdisplacement = 'normal';\n\t\t\t\t}\n\t\t\t\tisNesting =\n\t\t\t\t\ttypeof blockDropTargetIndex === 'number' &&\n\t\t\t\t\tblockDropTargetIndex - 1 === thisBlockIndex &&\n\t\t\t\t\tblockDropPosition === 'inside';\n\t\t\t}\n\t\t} else if (\n\t\t\tblockDropTargetIndex === null &&\n\t\t\tfirstDraggedBlockIndex !== undefined\n\t\t) {\n\t\t\t// A `null` value for `blockDropTargetIndex` indicates that the\n\t\t\t// drop target is outside of the valid areas within the list view.\n\t\t\t// In this case, the drag is still active, but as there is no\n\t\t\t// valid drop target, we should remove the gap indicating where\n\t\t\t// the block would be inserted.\n\t\t\tif (\n\t\t\t\tthisBlockIndex !== undefined &&\n\t\t\t\tthisBlockIndex >= firstDraggedBlockIndex\n\t\t\t) {\n\t\t\t\tdisplacement = 'up';\n\t\t\t} else {\n\t\t\t\tdisplacement = 'normal';\n\t\t\t}\n\t\t} else if (\n\t\t\tblockDropTargetIndex !== undefined &&\n\t\t\tblockDropTargetIndex !== null &&\n\t\t\tfirstDraggedBlockIndex === undefined\n\t\t) {\n\t\t\t// If the blockdrop target is defined, but there are no dragged blocks,\n\t\t\t// then the block should be displaced relative to the drop target.\n\t\t\tif ( thisBlockIndex !== undefined ) {\n\t\t\t\tif ( thisBlockIndex < blockDropTargetIndex ) {\n\t\t\t\t\tdisplacement = 'normal';\n\t\t\t\t} else {\n\t\t\t\t\tdisplacement = 'down';\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( blockDropTargetIndex === null ) {\n\t\t\tdisplacement = 'normal';\n\t\t}\n\t}\n\n\treturn {\n\t\tdisplacement,\n\t\tisNesting,\n\t\tisAfterDraggedBlocks,\n\t};\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\thasBlockSupport,\n\tswitchToBlockType,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport {\n\t__experimentalTreeGridCell as TreeGridCell,\n\t__experimentalTreeGridItem as TreeGridItem,\n} from '@wordpress/components';\nimport { useInstanceId, useDebounce } from '@wordpress/compose';\nimport { moreVertical } from '@wordpress/icons';\nimport {\n\tuseCallback,\n\tuseMemo,\n\tuseState,\n\tuseRef,\n\tmemo,\n} from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\nimport { __unstableUseShortcutEventMatch as useShortcutEventMatch } from '@wordpress/keyboard-shortcuts';\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport ListViewLeaf from './leaf';\nimport useListViewScrollIntoView from './use-list-view-scroll-into-view';\nimport {\n\tBlockMoverUpButton,\n\tBlockMoverDownButton,\n} from '../block-mover/button';\nimport ListViewBlockContents from './block-contents';\nimport { useListViewContext } from './context';\nimport {\n\tgetBlockPositionDescription,\n\tgetBlockPropertiesDescription,\n\tfocusListItem,\n} from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport { useBlockLock } from '../block-lock';\nimport AriaReferencedText from './aria-referenced-text';\nimport { unlock } from '../../lock-unlock';\nimport usePasteStyles from '../use-paste-styles';\n\nfunction ListViewBlock( {\n\tblock: { clientId },\n\tdisplacement,\n\tisAfterDraggedBlocks,\n\tisDragged,\n\tisNesting,\n\tisSelected,\n\tisBranchSelected,\n\tselectBlock,\n\tposition,\n\tlevel,\n\trowCount,\n\tsiblingBlockCount,\n\tshowBlockMovers,\n\tpath,\n\tisExpanded,\n\tselectedClientIds,\n\tisSyncedBranch,\n} ) {\n\tconst cellRef = useRef( null );\n\tconst rowRef = useRef( null );\n\tconst settingsRef = useRef( null );\n\tconst [ isHovered, setIsHovered ] = useState( false );\n\tconst [ settingsAnchorRect, setSettingsAnchorRect ] = useState();\n\n\tconst { isLocked, canEdit, canMove } = useBlockLock( clientId );\n\n\tconst isFirstSelectedBlock =\n\t\tisSelected && selectedClientIds[ 0 ] === clientId;\n\tconst isLastSelectedBlock =\n\t\tisSelected &&\n\t\tselectedClientIds[ selectedClientIds.length - 1 ] === clientId;\n\n\tconst {\n\t\ttoggleBlockHighlight,\n\t\tduplicateBlocks,\n\t\tmultiSelect,\n\t\treplaceBlocks,\n\t\tremoveBlocks,\n\t\tinsertAfterBlock,\n\t\tinsertBeforeBlock,\n\t\tsetOpenedBlockSettingsMenu,\n\t} = unlock( useDispatch( blockEditorStore ) );\n\tconst debouncedToggleBlockHighlight = useDebounce(\n\t\ttoggleBlockHighlight,\n\t\t50\n\t);\n\n\tconst {\n\t\tcanInsertBlockType,\n\t\tgetSelectedBlockClientIds,\n\t\tgetPreviousBlockClientId,\n\t\tgetBlockRootClientId,\n\t\tgetBlockOrder,\n\t\tgetBlockParents,\n\t\tgetBlocksByClientId,\n\t\tcanRemoveBlocks,\n\t\tisGroupable,\n\t} = useSelect( blockEditorStore );\n\tconst { getGroupingBlockName } = useSelect( blocksStore );\n\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\n\tconst pasteStyles = usePasteStyles();\n\n\tconst { block, blockName, allowRightClickOverrides } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlock, getBlockName, getSettings } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\treturn {\n\t\t\t\tblock: getBlock( clientId ),\n\t\t\t\tblockName: getBlockName( clientId ),\n\t\t\t\tallowRightClickOverrides:\n\t\t\t\t\tgetSettings().allowRightClickOverrides,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst showBlockActions =\n\t\t// When a block hides its toolbar it also hides the block settings menu,\n\t\t// since that menu is part of the toolbar in the editor canvas.\n\t\t// List View respects this by also hiding the block settings menu.\n\t\thasBlockSupport( blockName, '__experimentalToolbar', true );\n\tconst instanceId = useInstanceId( ListViewBlock );\n\tconst descriptionId = `list-view-block-select-button__description-${ instanceId }`;\n\n\tconst {\n\t\texpand,\n\t\tcollapse,\n\t\tcollapseAll,\n\t\tBlockSettingsMenu,\n\t\tlistViewInstanceId,\n\t\texpandedState,\n\t\tsetInsertedBlock,\n\t\ttreeGridElementRef,\n\t\trootClientId,\n\t} = useListViewContext();\n\tconst isMatch = useShortcutEventMatch();\n\n\t// Determine which blocks to update:\n\t// If the current (focused) block is part of the block selection, use the whole selection.\n\t// If the focused block is not part of the block selection, only update the focused block.\n\tfunction getBlocksToUpdate() {\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\tconst isUpdatingSelectedBlocks =\n\t\t\tselectedBlockClientIds.includes( clientId );\n\t\tconst firstBlockClientId = isUpdatingSelectedBlocks\n\t\t\t? selectedBlockClientIds[ 0 ]\n\t\t\t: clientId;\n\t\tconst firstBlockRootClientId =\n\t\t\tgetBlockRootClientId( firstBlockClientId );\n\n\t\tconst blocksToUpdate = isUpdatingSelectedBlocks\n\t\t\t? selectedBlockClientIds\n\t\t\t: [ clientId ];\n\n\t\treturn {\n\t\t\tblocksToUpdate,\n\t\t\tfirstBlockClientId,\n\t\t\tfirstBlockRootClientId,\n\t\t\tselectedBlockClientIds,\n\t\t};\n\t}\n\n\t/**\n\t * @param {KeyboardEvent} event\n\t */\n\tasync function onKeyDown( event ) {\n\t\tif ( event.defaultPrevented ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Do not handle events if it comes from modals;\n\t\t// retain the default behavior for these keys.\n\t\tif ( event.target.closest( '[role=dialog]' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isDeleteKey = [ BACKSPACE, DELETE ].includes( event.keyCode );\n\n\t\t// If multiple blocks are selected, deselect all blocks when the user\n\t\t// presses the escape key.\n\t\tif (\n\t\t\tisMatch( 'core/block-editor/unselect', event ) &&\n\t\t\tselectedClientIds.length > 0\n\t\t) {\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\t\t\tselectBlock( event, undefined );\n\t\t} else if (\n\t\t\tisDeleteKey ||\n\t\t\tisMatch( 'core/block-editor/remove', event )\n\t\t) {\n\t\t\tconst {\n\t\t\t\tblocksToUpdate: blocksToDelete,\n\t\t\t\tfirstBlockClientId,\n\t\t\t\tfirstBlockRootClientId,\n\t\t\t\tselectedBlockClientIds,\n\t\t\t} = getBlocksToUpdate();\n\n\t\t\t// Don't update the selection if the blocks cannot be deleted.\n\t\t\tif ( ! canRemoveBlocks( blocksToDelete ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet blockToFocus =\n\t\t\t\tgetPreviousBlockClientId( firstBlockClientId ) ??\n\t\t\t\t// If the previous block is not found (when the first block is deleted),\n\t\t\t\t// fallback to focus the parent block.\n\t\t\t\tfirstBlockRootClientId;\n\n\t\t\tremoveBlocks( blocksToDelete, false );\n\n\t\t\t// Update the selection if the original selection has been removed.\n\t\t\tconst shouldUpdateSelection =\n\t\t\t\tselectedBlockClientIds.length > 0 &&\n\t\t\t\tgetSelectedBlockClientIds().length === 0;\n\n\t\t\t// If there's no previous block nor parent block, focus the first block.\n\t\t\tif ( ! blockToFocus ) {\n\t\t\t\tblockToFocus = getBlockOrder()[ 0 ];\n\t\t\t}\n\n\t\t\tupdateFocusAndSelection( blockToFocus, shouldUpdateSelection );\n\t\t} else if ( isMatch( 'core/block-editor/paste-styles', event ) ) {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst { blocksToUpdate } = getBlocksToUpdate();\n\t\t\tconst blocks = getBlocksByClientId( blocksToUpdate );\n\n\t\t\tpasteStyles( blocks );\n\t\t} else if ( isMatch( 'core/block-editor/duplicate', event ) ) {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst { blocksToUpdate, firstBlockRootClientId } =\n\t\t\t\tgetBlocksToUpdate();\n\n\t\t\tconst canDuplicate = getBlocksByClientId( blocksToUpdate ).every(\n\t\t\t\t( blockToUpdate ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t!! blockToUpdate &&\n\t\t\t\t\t\thasBlockSupport(\n\t\t\t\t\t\t\tblockToUpdate.name,\n\t\t\t\t\t\t\t'multiple',\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t) &&\n\t\t\t\t\t\tcanInsertBlockType(\n\t\t\t\t\t\t\tblockToUpdate.name,\n\t\t\t\t\t\t\tfirstBlockRootClientId\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif ( canDuplicate ) {\n\t\t\t\tconst updatedBlocks = await duplicateBlocks(\n\t\t\t\t\tblocksToUpdate,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\n\t\t\t\tif ( updatedBlocks?.length ) {\n\t\t\t\t\t// If blocks have been duplicated, focus the first duplicated block.\n\t\t\t\t\tupdateFocusAndSelection( updatedBlocks[ 0 ], false );\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/insert-before', event ) ) {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst { blocksToUpdate } = getBlocksToUpdate();\n\t\t\tawait insertBeforeBlock( blocksToUpdate[ 0 ] );\n\t\t\tconst newlySelectedBlocks = getSelectedBlockClientIds();\n\n\t\t\t// Focus the first block of the newly inserted blocks, to keep focus within the list view.\n\t\t\tsetOpenedBlockSettingsMenu( undefined );\n\t\t\tupdateFocusAndSelection( newlySelectedBlocks[ 0 ], false );\n\t\t} else if ( isMatch( 'core/block-editor/insert-after', event ) ) {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst { blocksToUpdate } = getBlocksToUpdate();\n\t\t\tawait insertAfterBlock( blocksToUpdate.at( -1 ) );\n\t\t\tconst newlySelectedBlocks = getSelectedBlockClientIds();\n\n\t\t\t// Focus the first block of the newly inserted blocks, to keep focus within the list view.\n\t\t\tsetOpenedBlockSettingsMenu( undefined );\n\t\t\tupdateFocusAndSelection( newlySelectedBlocks[ 0 ], false );\n\t\t} else if ( isMatch( 'core/block-editor/select-all', event ) ) {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst { firstBlockRootClientId, selectedBlockClientIds } =\n\t\t\t\tgetBlocksToUpdate();\n\t\t\tconst blockClientIds = getBlockOrder( firstBlockRootClientId );\n\t\t\tif ( ! blockClientIds.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If we have selected all sibling nested blocks, try selecting up a level.\n\t\t\t// This is a similar implementation to that used by `useSelectAll`.\n\t\t\t// `isShallowEqual` is used for the list view instead of a length check,\n\t\t\t// as the array of siblings of the currently focused block may be a different\n\t\t\t// set of blocks from the current block selection if the user is focused\n\t\t\t// on a different part of the list view from the block selection.\n\t\t\tif ( isShallowEqual( selectedBlockClientIds, blockClientIds ) ) {\n\t\t\t\t// Only select up a level if the first block is not the root block.\n\t\t\t\t// This ensures that the block selection can't break out of the root block\n\t\t\t\t// used by the list view, if the list view is only showing a partial hierarchy.\n\t\t\t\tif (\n\t\t\t\t\tfirstBlockRootClientId &&\n\t\t\t\t\tfirstBlockRootClientId !== rootClientId\n\t\t\t\t) {\n\t\t\t\t\tupdateFocusAndSelection( firstBlockRootClientId, true );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Select all while passing `null` to skip focusing to the editor canvas,\n\t\t\t// and retain focus within the list view.\n\t\t\tmultiSelect(\n\t\t\t\tblockClientIds[ 0 ],\n\t\t\t\tblockClientIds[ blockClientIds.length - 1 ],\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if ( isMatch( 'core/block-editor/collapse-list-view', event ) ) {\n\t\t\tevent.preventDefault();\n\t\t\tconst { firstBlockClientId } = getBlocksToUpdate();\n\t\t\tconst blockParents = getBlockParents( firstBlockClientId, false );\n\t\t\t// Collapse all blocks.\n\t\t\tcollapseAll();\n\t\t\t// Expand all parents of the current block.\n\t\t\texpand( blockParents );\n\t\t} else if ( isMatch( 'core/block-editor/group', event ) ) {\n\t\t\tconst { blocksToUpdate } = getBlocksToUpdate();\n\t\t\tif ( blocksToUpdate.length > 1 && isGroupable( blocksToUpdate ) ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst blocks = getBlocksByClientId( blocksToUpdate );\n\t\t\t\tconst groupingBlockName = getGroupingBlockName();\n\t\t\t\tconst newBlocks = switchToBlockType(\n\t\t\t\t\tblocks,\n\t\t\t\t\tgroupingBlockName\n\t\t\t\t);\n\t\t\t\treplaceBlocks( blocksToUpdate, newBlocks );\n\t\t\t\tspeak( __( 'Selected blocks are grouped.' ) );\n\t\t\t\tconst newlySelectedBlocks = getSelectedBlockClientIds();\n\t\t\t\t// Focus the first block of the newly inserted blocks, to keep focus within the list view.\n\t\t\t\tsetOpenedBlockSettingsMenu( undefined );\n\t\t\t\tupdateFocusAndSelection( newlySelectedBlocks[ 0 ], false );\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onMouseEnter = useCallback( () => {\n\t\tsetIsHovered( true );\n\t\tdebouncedToggleBlockHighlight( clientId, true );\n\t}, [ clientId, setIsHovered, debouncedToggleBlockHighlight ] );\n\tconst onMouseLeave = useCallback( () => {\n\t\tsetIsHovered( false );\n\t\tdebouncedToggleBlockHighlight( clientId, false );\n\t}, [ clientId, setIsHovered, debouncedToggleBlockHighlight ] );\n\n\tconst selectEditorBlock = useCallback(\n\t\t( event ) => {\n\t\t\tselectBlock( event, clientId );\n\t\t\tevent.preventDefault();\n\t\t},\n\t\t[ clientId, selectBlock ]\n\t);\n\n\tconst updateFocusAndSelection = useCallback(\n\t\t( focusClientId, shouldSelectBlock ) => {\n\t\t\tif ( shouldSelectBlock ) {\n\t\t\t\tselectBlock( undefined, focusClientId, null, null );\n\t\t\t}\n\n\t\t\tfocusListItem( focusClientId, treeGridElementRef?.current );\n\t\t},\n\t\t[ selectBlock, treeGridElementRef ]\n\t);\n\n\tconst toggleExpanded = useCallback(\n\t\t( event ) => {\n\t\t\t// Prevent shift+click from opening link in a new window when toggling.\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tif ( isExpanded === true ) {\n\t\t\t\tcollapse( clientId );\n\t\t\t} else if ( isExpanded === false ) {\n\t\t\t\texpand( clientId );\n\t\t\t}\n\t\t},\n\t\t[ clientId, expand, collapse, isExpanded ]\n\t);\n\n\t// Allow right-clicking an item in the List View to open up the block settings dropdown.\n\tconst onContextMenu = useCallback(\n\t\t( event ) => {\n\t\t\tif ( showBlockActions && allowRightClickOverrides ) {\n\t\t\t\tsettingsRef.current?.click();\n\t\t\t\t// Ensure the position of the settings dropdown is at the cursor.\n\t\t\t\tsetSettingsAnchorRect(\n\t\t\t\t\tnew window.DOMRect( event.clientX, event.clientY, 0, 0 )\n\t\t\t\t);\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\t[ allowRightClickOverrides, settingsRef, showBlockActions ]\n\t);\n\n\tconst onMouseDown = useCallback(\n\t\t( event ) => {\n\t\t\t// Prevent right-click from focusing the block,\n\t\t\t// because focus will be handled when opening the block settings dropdown.\n\t\t\tif ( allowRightClickOverrides && event.button === 2 ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\t[ allowRightClickOverrides ]\n\t);\n\n\tconst settingsPopoverAnchor = useMemo( () => {\n\t\tconst { ownerDocument } = rowRef?.current || {};\n\n\t\t// If no custom position is set, the settings dropdown will be anchored to the\n\t\t// DropdownMenu toggle button.\n\t\tif ( ! settingsAnchorRect || ! ownerDocument ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Position the settings dropdown at the cursor when right-clicking a block.\n\t\treturn {\n\t\t\townerDocument,\n\t\t\tgetBoundingClientRect() {\n\t\t\t\treturn settingsAnchorRect;\n\t\t\t},\n\t\t};\n\t}, [ settingsAnchorRect ] );\n\n\tconst clearSettingsAnchorRect = useCallback( () => {\n\t\t// Clear the custom position for the settings dropdown so that it is restored back\n\t\t// to being anchored to the DropdownMenu toggle button.\n\t\tsetSettingsAnchorRect( undefined );\n\t}, [ setSettingsAnchorRect ] );\n\n\t// Pass in a ref to the row, so that it can be scrolled\n\t// into view when selected. For long lists, the placeholder for the\n\t// selected block is also observed, within ListViewLeafPlaceholder.\n\tuseListViewScrollIntoView( {\n\t\tisSelected,\n\t\trowItemRef: rowRef,\n\t\tselectedClientIds,\n\t} );\n\n\t// When switching between rendering modes (such as template preview and content only),\n\t// it is possible for a block to temporarily be unavailable. In this case, we should not\n\t// render the leaf, to avoid errors further down the tree.\n\tif ( ! block ) {\n\t\treturn null;\n\t}\n\n\tconst blockPositionDescription = getBlockPositionDescription(\n\t\tposition,\n\t\tsiblingBlockCount,\n\t\tlevel\n\t);\n\n\tconst blockPropertiesDescription = getBlockPropertiesDescription(\n\t\tblockInformation,\n\t\tisLocked\n\t);\n\n\tconst hasSiblings = siblingBlockCount > 0;\n\tconst hasRenderedMovers = showBlockMovers && hasSiblings;\n\tconst moverCellClassName = clsx(\n\t\t'block-editor-list-view-block__mover-cell',\n\t\t{ 'is-visible': isHovered || isSelected }\n\t);\n\n\tconst listViewBlockSettingsClassName = clsx(\n\t\t'block-editor-list-view-block__menu-cell',\n\t\t{ 'is-visible': isHovered || isFirstSelectedBlock }\n\t);\n\n\tlet colSpan;\n\tif ( hasRenderedMovers ) {\n\t\tcolSpan = 2;\n\t} else if ( ! showBlockActions ) {\n\t\tcolSpan = 3;\n\t}\n\n\tconst classes = clsx( {\n\t\t'is-selected': isSelected,\n\t\t'is-first-selected': isFirstSelectedBlock,\n\t\t'is-last-selected': isLastSelectedBlock,\n\t\t'is-branch-selected': isBranchSelected,\n\t\t'is-synced-branch': isSyncedBranch,\n\t\t'is-dragging': isDragged,\n\t\t'has-single-cell': ! showBlockActions,\n\t\t'is-synced': blockInformation?.isSynced,\n\t\t'is-draggable': canMove,\n\t\t'is-displacement-normal': displacement === 'normal',\n\t\t'is-displacement-up': displacement === 'up',\n\t\t'is-displacement-down': displacement === 'down',\n\t\t'is-after-dragged-blocks': isAfterDraggedBlocks,\n\t\t'is-nesting': isNesting,\n\t} );\n\n\t// Only include all selected blocks if the currently clicked on block\n\t// is one of the selected blocks. This ensures that if a user attempts\n\t// to alter a block that isn't part of the selection, they're still able\n\t// to do so.\n\tconst dropdownClientIds = selectedClientIds.includes( clientId )\n\t\t? selectedClientIds\n\t\t: [ clientId ];\n\n\t// Detect if there is a block in the canvas currently being edited and multi-selection is not happening.\n\tconst currentlyEditingBlockInCanvas =\n\t\tisSelected && selectedClientIds.length === 1;\n\n\treturn (\n\t\t<ListViewLeaf\n\t\t\tclassName={ classes }\n\t\t\tisDragged={ isDragged }\n\t\t\tonKeyDown={ onKeyDown }\n\t\t\tonMouseEnter={ onMouseEnter }\n\t\t\tonMouseLeave={ onMouseLeave }\n\t\t\tonFocus={ onMouseEnter }\n\t\t\tonBlur={ onMouseLeave }\n\t\t\tlevel={ level }\n\t\t\tposition={ position }\n\t\t\trowCount={ rowCount }\n\t\t\tpath={ path }\n\t\t\tid={ `list-view-${ listViewInstanceId }-block-${ clientId }` }\n\t\t\tdata-block={ clientId }\n\t\t\tdata-expanded={ canEdit ? isExpanded : undefined }\n\t\t\tref={ rowRef }\n\t\t>\n\t\t\t<TreeGridCell\n\t\t\t\tclassName=\"block-editor-list-view-block__contents-cell\"\n\t\t\t\tcolSpan={ colSpan }\n\t\t\t\tref={ cellRef }\n\t\t\t\taria-selected={ !! isSelected }\n\t\t\t>\n\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t<div className=\"block-editor-list-view-block__contents-container\">\n\t\t\t\t\t\t<ListViewBlockContents\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\tonClick={ selectEditorBlock }\n\t\t\t\t\t\t\tonContextMenu={ onContextMenu }\n\t\t\t\t\t\t\tonMouseDown={ onMouseDown }\n\t\t\t\t\t\t\tonToggleExpanded={ toggleExpanded }\n\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\tsiblingBlockCount={ siblingBlockCount }\n\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\ttabIndex={\n\t\t\t\t\t\t\t\tcurrentlyEditingBlockInCanvas ? 0 : tabIndex\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\tisExpanded={ canEdit ? isExpanded : undefined }\n\t\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\t\tariaDescribedBy={ descriptionId }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<AriaReferencedText id={ descriptionId }>\n\t\t\t\t\t\t\t{ [\n\t\t\t\t\t\t\t\tblockPositionDescription,\n\t\t\t\t\t\t\t\tblockPropertiesDescription,\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t.filter( Boolean )\n\t\t\t\t\t\t\t\t.join( ' ' ) }\n\t\t\t\t\t\t</AriaReferencedText>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</TreeGridCell>\n\t\t\t{ hasRenderedMovers && (\n\t\t\t\t<>\n\t\t\t\t\t<TreeGridCell\n\t\t\t\t\t\tclassName={ moverCellClassName }\n\t\t\t\t\t\twithoutGridItem\n\t\t\t\t\t>\n\t\t\t\t\t\t<TreeGridItem>\n\t\t\t\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t\t\t\t<BlockMoverUpButton\n\t\t\t\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\t\t\t\tclientIds={ [ clientId ] }\n\t\t\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</TreeGridItem>\n\t\t\t\t\t\t<TreeGridItem>\n\t\t\t\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t\t\t\t<BlockMoverDownButton\n\t\t\t\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\t\t\t\tclientIds={ [ clientId ] }\n\t\t\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</TreeGridItem>\n\t\t\t\t\t</TreeGridCell>\n\t\t\t\t</>\n\t\t\t) }\n\n\t\t\t{ showBlockActions && BlockSettingsMenu && (\n\t\t\t\t<TreeGridCell\n\t\t\t\t\tclassName={ listViewBlockSettingsClassName }\n\t\t\t\t\taria-selected={ !! isSelected }\n\t\t\t\t\tref={ settingsRef }\n\t\t\t\t>\n\t\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t\t<BlockSettingsMenu\n\t\t\t\t\t\t\tclientIds={ dropdownClientIds }\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\t\t\tlabel={ __( 'Options' ) }\n\t\t\t\t\t\t\tpopoverProps={ {\n\t\t\t\t\t\t\t\tanchor: settingsPopoverAnchor, // Used to position the settings at the cursor on right-click.\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\ttoggleProps={ {\n\t\t\t\t\t\t\t\tref,\n\t\t\t\t\t\t\t\tclassName: 'block-editor-list-view-block__menu',\n\t\t\t\t\t\t\t\ttabIndex,\n\t\t\t\t\t\t\t\tonClick: clearSettingsAnchorRect,\n\t\t\t\t\t\t\t\tonFocus,\n\t\t\t\t\t\t\t\tsize: 'small',\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tdisableOpenOnArrowDown\n\t\t\t\t\t\t\texpand={ expand }\n\t\t\t\t\t\t\texpandedState={ expandedState }\n\t\t\t\t\t\t\tsetInsertedBlock={ setInsertedBlock }\n\t\t\t\t\t\t\t__experimentalSelectBlock={\n\t\t\t\t\t\t\t\tupdateFocusAndSelection\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</TreeGridCell>\n\t\t\t) }\n\t\t</ListViewLeaf>\n\t);\n}\n\nexport default memo( ListViewBlock );\n","/**\n * WordPress dependencies\n */\nimport { getScrollContainer } from '@wordpress/dom';\nimport { useLayoutEffect } from '@wordpress/element';\n\nexport default function useListViewScrollIntoView( {\n\tisSelected,\n\tselectedClientIds,\n\trowItemRef,\n} ) {\n\tconst isSingleSelection = selectedClientIds.length === 1;\n\n\tuseLayoutEffect( () => {\n\t\t// Skip scrolling into view if this particular block isn't selected,\n\t\t// or if more than one block is selected overall. This is to avoid\n\t\t// scrolling the view in a multi selection where the user has intentionally\n\t\t// selected multiple blocks within the list view, but the initially\n\t\t// selected block may be out of view.\n\t\tif ( ! isSelected || ! isSingleSelection || ! rowItemRef.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst scrollContainer = getScrollContainer( rowItemRef.current );\n\t\tconst { ownerDocument } = rowItemRef.current;\n\n\t\tconst windowScroll =\n\t\t\tscrollContainer === ownerDocument.body ||\n\t\t\tscrollContainer === ownerDocument.documentElement;\n\n\t\t// If the there is no scroll container, of if the scroll container is the window,\n\t\t// do not scroll into view, as the block is already in view.\n\t\tif ( windowScroll || ! scrollContainer ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rowRect = rowItemRef.current.getBoundingClientRect();\n\t\tconst scrollContainerRect = scrollContainer.getBoundingClientRect();\n\n\t\t// If the selected block is not currently visible, scroll to it.\n\t\tif (\n\t\t\trowRect.top < scrollContainerRect.top ||\n\t\t\trowRect.bottom > scrollContainerRect.bottom\n\t\t) {\n\t\t\trowItemRef.current.scrollIntoView();\n\t\t}\n\t}, [ isSelected, isSingleSelection, rowItemRef ] );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalTreeGridRow as TreeGridRow,\n\t__experimentalTreeGridCell as TreeGridCell,\n} from '@wordpress/components';\nimport { memo, useRef } from '@wordpress/element';\nimport { AsyncModeProvider, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { Appender } from './appender';\nimport ListViewBlock from './block';\nimport { useListViewContext } from './context';\nimport { getDragDisplacementValues, isClientIdSelected } from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDisplayInformation from '../use-block-display-information';\n\n/**\n * Given a block, returns the total number of blocks in that subtree. This is used to help determine\n * the list position of a block.\n *\n * When a block is collapsed, we do not count their children as part of that total. In the current drag\n * implementation dragged blocks and their children are not counted.\n *\n * @param {Object}  block               block tree\n * @param {Object}  expandedState       state that notes which branches are collapsed\n * @param {Array}   draggedClientIds    a list of dragged client ids\n * @param {boolean} isExpandedByDefault flag to determine the default fallback expanded state.\n * @return {number} block count\n */\nfunction countBlocks(\n\tblock,\n\texpandedState,\n\tdraggedClientIds,\n\tisExpandedByDefault\n) {\n\tconst isDragged = draggedClientIds?.includes( block.clientId );\n\tif ( isDragged ) {\n\t\treturn 0;\n\t}\n\tconst isExpanded = expandedState[ block.clientId ] ?? isExpandedByDefault;\n\n\tif ( isExpanded ) {\n\t\treturn (\n\t\t\t1 +\n\t\t\tblock.innerBlocks.reduce(\n\t\t\t\tcountReducer(\n\t\t\t\t\texpandedState,\n\t\t\t\t\tdraggedClientIds,\n\t\t\t\t\tisExpandedByDefault\n\t\t\t\t),\n\t\t\t\t0\n\t\t\t)\n\t\t);\n\t}\n\treturn 1;\n}\nconst countReducer =\n\t( expandedState, draggedClientIds, isExpandedByDefault ) =>\n\t( count, block ) => {\n\t\tconst isDragged = draggedClientIds?.includes( block.clientId );\n\t\tif ( isDragged ) {\n\t\t\treturn count;\n\t\t}\n\t\tconst isExpanded =\n\t\t\texpandedState[ block.clientId ] ?? isExpandedByDefault;\n\t\tif ( isExpanded && block.innerBlocks.length > 0 ) {\n\t\t\treturn (\n\t\t\t\tcount +\n\t\t\t\tcountBlocks(\n\t\t\t\t\tblock,\n\t\t\t\t\texpandedState,\n\t\t\t\t\tdraggedClientIds,\n\t\t\t\t\tisExpandedByDefault\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\treturn count + 1;\n\t};\n\nconst noop = () => {};\n\nfunction ListViewBranch( props ) {\n\tconst {\n\t\tblocks,\n\t\tselectBlock = noop,\n\t\tshowBlockMovers,\n\t\tselectedClientIds,\n\t\tlevel = 1,\n\t\tpath = '',\n\t\tisBranchSelected = false,\n\t\tlistPosition = 0,\n\t\tfixedListWindow,\n\t\tisExpanded,\n\t\tparentId,\n\t\tshouldShowInnerBlocks = true,\n\t\tisSyncedBranch = false,\n\t\tshowAppender: showAppenderProp = true,\n\t} = props;\n\n\tconst parentBlockInformation = useBlockDisplayInformation( parentId );\n\tconst syncedBranch = isSyncedBranch || !! parentBlockInformation?.isSynced;\n\n\tconst canParentExpand = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! parentId ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn select( blockEditorStore ).canEditBlock( parentId );\n\t\t},\n\t\t[ parentId ]\n\t);\n\n\tconst {\n\t\tblockDropPosition,\n\t\tblockDropTargetIndex,\n\t\tfirstDraggedBlockIndex,\n\t\tblockIndexes,\n\t\texpandedState,\n\t\tdraggedClientIds,\n\t} = useListViewContext();\n\n\tconst nextPositionRef = useRef();\n\n\tif ( ! canParentExpand ) {\n\t\treturn null;\n\t}\n\n\t// Only show the appender at the first level.\n\tconst showAppender = showAppenderProp && level === 1;\n\tconst filteredBlocks = blocks.filter( Boolean );\n\tconst blockCount = filteredBlocks.length;\n\t// The appender means an extra row in List View, so add 1 to the row count.\n\tconst rowCount = showAppender ? blockCount + 1 : blockCount;\n\tnextPositionRef.current = listPosition;\n\n\treturn (\n\t\t<>\n\t\t\t{ filteredBlocks.map( ( block, index ) => {\n\t\t\t\tconst { clientId, innerBlocks } = block;\n\n\t\t\t\tif ( index > 0 ) {\n\t\t\t\t\tnextPositionRef.current += countBlocks(\n\t\t\t\t\t\tfilteredBlocks[ index - 1 ],\n\t\t\t\t\t\texpandedState,\n\t\t\t\t\t\tdraggedClientIds,\n\t\t\t\t\t\tisExpanded\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst isDragged = !! draggedClientIds?.includes( clientId );\n\n\t\t\t\t// Determine the displacement of the block while dragging. This\n\t\t\t\t// works out whether the current block should be displaced up or\n\t\t\t\t// down, relative to the dragged blocks and the drop target.\n\t\t\t\tconst { displacement, isAfterDraggedBlocks, isNesting } =\n\t\t\t\t\tgetDragDisplacementValues( {\n\t\t\t\t\t\tblockIndexes,\n\t\t\t\t\t\tblockDropTargetIndex,\n\t\t\t\t\t\tblockDropPosition,\n\t\t\t\t\t\tclientId,\n\t\t\t\t\t\tfirstDraggedBlockIndex,\n\t\t\t\t\t\tisDragged,\n\t\t\t\t\t} );\n\n\t\t\t\tconst { itemInView } = fixedListWindow;\n\t\t\t\tconst blockInView = itemInView( nextPositionRef.current );\n\n\t\t\t\tconst position = index + 1;\n\t\t\t\tconst updatedPath =\n\t\t\t\t\tpath.length > 0\n\t\t\t\t\t\t? `${ path }_${ position }`\n\t\t\t\t\t\t: `${ position }`;\n\t\t\t\tconst hasNestedBlocks = !! innerBlocks?.length;\n\n\t\t\t\tconst shouldExpand =\n\t\t\t\t\thasNestedBlocks && shouldShowInnerBlocks\n\t\t\t\t\t\t? expandedState[ clientId ] ?? isExpanded\n\t\t\t\t\t\t: undefined;\n\n\t\t\t\t// Make updates to the selected or dragged blocks synchronous,\n\t\t\t\t// but asynchronous for any other block.\n\t\t\t\tconst isSelected = isClientIdSelected(\n\t\t\t\t\tclientId,\n\t\t\t\t\tselectedClientIds\n\t\t\t\t);\n\t\t\t\tconst isSelectedBranch =\n\t\t\t\t\tisBranchSelected || ( isSelected && hasNestedBlocks );\n\n\t\t\t\t// To avoid performance issues, we only render blocks that are in view,\n\t\t\t\t// or blocks that are selected or dragged. If a block is selected,\n\t\t\t\t// it is only counted if it is the first of the block selection.\n\t\t\t\t// This prevents the entire tree from being rendered when a branch is\n\t\t\t\t// selected, or a user selects all blocks, while still enabling scroll\n\t\t\t\t// into view behavior when selecting a block or opening the list view.\n\t\t\t\t// The first and last blocks of the list are always rendered, to ensure\n\t\t\t\t// that Home and End keys work as expected.\n\t\t\t\tconst showBlock =\n\t\t\t\t\tisDragged ||\n\t\t\t\t\tblockInView ||\n\t\t\t\t\t( isSelected && clientId === selectedClientIds[ 0 ] ) ||\n\t\t\t\t\tindex === 0 ||\n\t\t\t\t\tindex === blockCount - 1;\n\t\t\t\treturn (\n\t\t\t\t\t<AsyncModeProvider key={ clientId } value={ ! isSelected }>\n\t\t\t\t\t\t{ showBlock && (\n\t\t\t\t\t\t\t<ListViewBlock\n\t\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\t\tselectBlock={ selectBlock }\n\t\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\t\tisBranchSelected={ isSelectedBranch }\n\t\t\t\t\t\t\t\tisDragged={ isDragged }\n\t\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\t\trowCount={ rowCount }\n\t\t\t\t\t\t\t\tsiblingBlockCount={ blockCount }\n\t\t\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\t\t\tpath={ updatedPath }\n\t\t\t\t\t\t\t\tisExpanded={ isDragged ? false : shouldExpand }\n\t\t\t\t\t\t\t\tlistPosition={ nextPositionRef.current }\n\t\t\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\t\t\tisSyncedBranch={ syncedBranch }\n\t\t\t\t\t\t\t\tdisplacement={ displacement }\n\t\t\t\t\t\t\t\tisAfterDraggedBlocks={ isAfterDraggedBlocks }\n\t\t\t\t\t\t\t\tisNesting={ isNesting }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ ! showBlock && (\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td className=\"block-editor-list-view-placeholder\" />\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ hasNestedBlocks && shouldExpand && ! isDragged && (\n\t\t\t\t\t\t\t<ListViewBranch\n\t\t\t\t\t\t\t\tparentId={ clientId }\n\t\t\t\t\t\t\t\tblocks={ innerBlocks }\n\t\t\t\t\t\t\t\tselectBlock={ selectBlock }\n\t\t\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\t\t\tlevel={ level + 1 }\n\t\t\t\t\t\t\t\tpath={ updatedPath }\n\t\t\t\t\t\t\t\tlistPosition={ nextPositionRef.current + 1 }\n\t\t\t\t\t\t\t\tfixedListWindow={ fixedListWindow }\n\t\t\t\t\t\t\t\tisBranchSelected={ isSelectedBranch }\n\t\t\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\t\t\tisExpanded={ isExpanded }\n\t\t\t\t\t\t\t\tisSyncedBranch={ syncedBranch }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</AsyncModeProvider>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t\t{ showAppender && (\n\t\t\t\t<TreeGridRow\n\t\t\t\t\tlevel={ level }\n\t\t\t\t\tsetSize={ rowCount }\n\t\t\t\t\tpositionInSet={ rowCount }\n\t\t\t\t\tisExpanded\n\t\t\t\t>\n\t\t\t\t\t<TreeGridCell>\n\t\t\t\t\t\t{ ( treeGridCellProps ) => (\n\t\t\t\t\t\t\t<Appender\n\t\t\t\t\t\t\t\tclientId={ parentId }\n\t\t\t\t\t\t\t\tnestingLevel={ level }\n\t\t\t\t\t\t\t\tblockCount={ blockCount }\n\t\t\t\t\t\t\t\t{ ...treeGridCellProps }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</TreeGridCell>\n\t\t\t\t</TreeGridRow>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default memo( ListViewBranch );\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalHStack as HStack,\n\t__experimentalTruncate as Truncate,\n\tPopover,\n} from '@wordpress/components';\n\nimport { getScrollContainer } from '@wordpress/dom';\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\nimport ListViewExpander from './expander';\n\nexport default function ListViewDropIndicatorPreview( {\n\tdraggedBlockClientId,\n\tlistViewRef,\n\tblockDropTarget,\n} ) {\n\tconst blockInformation = useBlockDisplayInformation( draggedBlockClientId );\n\tconst blockTitle = useBlockDisplayTitle( {\n\t\tclientId: draggedBlockClientId,\n\t\tcontext: 'list-view',\n\t} );\n\n\tconst { rootClientId, clientId, dropPosition } = blockDropTarget || {};\n\n\tconst [ rootBlockElement, blockElement ] = useMemo( () => {\n\t\tif ( ! listViewRef.current ) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// The rootClientId will be defined whenever dropping into inner\n\t\t// block lists, but is undefined when dropping at the root level.\n\t\tconst _rootBlockElement = rootClientId\n\t\t\t? listViewRef.current.querySelector(\n\t\t\t\t\t`[data-block=\"${ rootClientId }\"]`\n\t\t\t  )\n\t\t\t: undefined;\n\n\t\t// The clientId represents the sibling block, the dragged block will\n\t\t// usually be inserted adjacent to it. It will be undefined when\n\t\t// dropping a block into an empty block list.\n\t\tconst _blockElement = clientId\n\t\t\t? listViewRef.current.querySelector(\n\t\t\t\t\t`[data-block=\"${ clientId }\"]`\n\t\t\t  )\n\t\t\t: undefined;\n\n\t\treturn [ _rootBlockElement, _blockElement ];\n\t}, [ listViewRef, rootClientId, clientId ] );\n\n\t// The targetElement is the element that the drop indicator will appear\n\t// before or after. When dropping into an empty block list, blockElement\n\t// is undefined, so the indicator will appear after the rootBlockElement.\n\tconst targetElement = blockElement || rootBlockElement;\n\n\tconst rtl = isRTL();\n\n\tconst getDropIndicatorWidth = useCallback(\n\t\t( targetElementRect, indent ) => {\n\t\t\tif ( ! targetElement ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\t// Default to assuming that the width of the drop indicator\n\t\t\t// should be the same as the target element.\n\t\t\tlet width = targetElement.offsetWidth;\n\n\t\t\t// In deeply nested lists, where a scrollbar is present,\n\t\t\t// the width of the drop indicator should be the width of\n\t\t\t// the scroll container, minus the distance from the left\n\t\t\t// edge of the scroll container to the left edge of the\n\t\t\t// target element.\n\t\t\tconst scrollContainer = getScrollContainer(\n\t\t\t\ttargetElement,\n\t\t\t\t'horizontal'\n\t\t\t);\n\n\t\t\tconst ownerDocument = targetElement.ownerDocument;\n\t\t\tconst windowScroll =\n\t\t\t\tscrollContainer === ownerDocument.body ||\n\t\t\t\tscrollContainer === ownerDocument.documentElement;\n\n\t\t\tif ( scrollContainer && ! windowScroll ) {\n\t\t\t\tconst scrollContainerRect =\n\t\t\t\t\tscrollContainer.getBoundingClientRect();\n\n\t\t\t\tconst distanceBetweenContainerAndTarget = isRTL()\n\t\t\t\t\t? scrollContainerRect.right - targetElementRect.right\n\t\t\t\t\t: targetElementRect.left - scrollContainerRect.left;\n\n\t\t\t\tconst scrollContainerWidth = scrollContainer.clientWidth;\n\n\t\t\t\tif (\n\t\t\t\t\tscrollContainerWidth <\n\t\t\t\t\twidth + distanceBetweenContainerAndTarget\n\t\t\t\t) {\n\t\t\t\t\twidth =\n\t\t\t\t\t\tscrollContainerWidth -\n\t\t\t\t\t\tdistanceBetweenContainerAndTarget;\n\t\t\t\t}\n\n\t\t\t\t// LTR logic for ensuring the drop indicator does not extend\n\t\t\t\t// beyond the right edge of the scroll container.\n\t\t\t\tif (\n\t\t\t\t\t! rtl &&\n\t\t\t\t\ttargetElementRect.left + indent < scrollContainerRect.left\n\t\t\t\t) {\n\t\t\t\t\twidth -= scrollContainerRect.left - targetElementRect.left;\n\t\t\t\t\treturn width;\n\t\t\t\t}\n\n\t\t\t\t// RTL logic for ensuring the drop indicator does not extend\n\t\t\t\t// beyond the right edge of the scroll container.\n\t\t\t\tif (\n\t\t\t\t\trtl &&\n\t\t\t\t\ttargetElementRect.right - indent > scrollContainerRect.right\n\t\t\t\t) {\n\t\t\t\t\twidth -=\n\t\t\t\t\t\ttargetElementRect.right - scrollContainerRect.right;\n\t\t\t\t\treturn width;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Subtract the indent from the final width of the indicator.\n\t\t\treturn width - indent;\n\t\t},\n\t\t[ rtl, targetElement ]\n\t);\n\n\tconst style = useMemo( () => {\n\t\tif ( ! targetElement ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst targetElementRect = targetElement.getBoundingClientRect();\n\n\t\treturn {\n\t\t\twidth: getDropIndicatorWidth( targetElementRect, 0 ),\n\t\t};\n\t}, [ getDropIndicatorWidth, targetElement ] );\n\n\tconst horizontalScrollOffsetStyle = useMemo( () => {\n\t\tif ( ! targetElement ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst scrollContainer = getScrollContainer( targetElement );\n\t\tconst ownerDocument = targetElement.ownerDocument;\n\t\tconst windowScroll =\n\t\t\tscrollContainer === ownerDocument.body ||\n\t\t\tscrollContainer === ownerDocument.documentElement;\n\n\t\tif ( scrollContainer && ! windowScroll ) {\n\t\t\tconst scrollContainerRect = scrollContainer.getBoundingClientRect();\n\t\t\tconst targetElementRect = targetElement.getBoundingClientRect();\n\n\t\t\tconst distanceBetweenContainerAndTarget = rtl\n\t\t\t\t? scrollContainerRect.right - targetElementRect.right\n\t\t\t\t: targetElementRect.left - scrollContainerRect.left;\n\n\t\t\tif ( ! rtl && scrollContainerRect.left > targetElementRect.left ) {\n\t\t\t\treturn {\n\t\t\t\t\ttransform: `translateX( ${ distanceBetweenContainerAndTarget }px )`,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif ( rtl && scrollContainerRect.right < targetElementRect.right ) {\n\t\t\t\treturn {\n\t\t\t\t\ttransform: `translateX( ${\n\t\t\t\t\t\tdistanceBetweenContainerAndTarget * -1\n\t\t\t\t\t}px )`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn {};\n\t}, [ rtl, targetElement ] );\n\n\tconst ariaLevel = useMemo( () => {\n\t\tif ( ! rootBlockElement ) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tconst _ariaLevel = parseInt(\n\t\t\trootBlockElement.getAttribute( 'aria-level' ),\n\t\t\t10\n\t\t);\n\n\t\treturn _ariaLevel ? _ariaLevel + 1 : 1;\n\t}, [ rootBlockElement ] );\n\n\tconst hasAdjacentSelectedBranch = useMemo( () => {\n\t\tif ( ! targetElement ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn targetElement.classList.contains( 'is-branch-selected' );\n\t}, [ targetElement ] );\n\n\tconst popoverAnchor = useMemo( () => {\n\t\tconst isValidDropPosition =\n\t\t\tdropPosition === 'top' ||\n\t\t\tdropPosition === 'bottom' ||\n\t\t\tdropPosition === 'inside';\n\t\tif ( ! targetElement || ! isValidDropPosition ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tcontextElement: targetElement,\n\t\t\tgetBoundingClientRect() {\n\t\t\t\tconst rect = targetElement.getBoundingClientRect();\n\t\t\t\t// In RTL languages, the drop indicator should be positioned\n\t\t\t\t// to the left of the target element, with the width of the\n\t\t\t\t// indicator determining the indent at the right edge of the\n\t\t\t\t// target element. In LTR languages, the drop indicator should\n\t\t\t\t// end at the right edge of the target element, with the indent\n\t\t\t\t// added to the position of the left edge of the target element.\n\t\t\t\t// let left = rtl ? rect.left : rect.left + indent;\n\t\t\t\tlet left = rect.left;\n\t\t\t\tlet top = 0;\n\n\t\t\t\t// In deeply nested lists, where a scrollbar is present,\n\t\t\t\t// the width of the drop indicator should be the width of\n\t\t\t\t// the visible area of the scroll container. Additionally,\n\t\t\t\t// the left edge of the drop indicator line needs to be\n\t\t\t\t// offset by the distance the left edge of the target element\n\t\t\t\t// and the left edge of the scroll container. The ensures\n\t\t\t\t// that the drop indicator position never breaks out of the\n\t\t\t\t// visible area of the scroll container.\n\t\t\t\tconst scrollContainer = getScrollContainer(\n\t\t\t\t\ttargetElement,\n\t\t\t\t\t'horizontal'\n\t\t\t\t);\n\n\t\t\t\tconst doc = targetElement.ownerDocument;\n\t\t\t\tconst windowScroll =\n\t\t\t\t\tscrollContainer === doc.body ||\n\t\t\t\t\tscrollContainer === doc.documentElement;\n\n\t\t\t\t// If the scroll container is not the window, offset the left position, if need be.\n\t\t\t\tif ( scrollContainer && ! windowScroll ) {\n\t\t\t\t\tconst scrollContainerRect =\n\t\t\t\t\t\tscrollContainer.getBoundingClientRect();\n\n\t\t\t\t\t// In RTL languages, a vertical scrollbar is present on the\n\t\t\t\t\t// left edge of the scroll container. The width of the\n\t\t\t\t\t// scrollbar needs to be accounted for when positioning the\n\t\t\t\t\t// drop indicator.\n\t\t\t\t\tconst scrollbarWidth = rtl\n\t\t\t\t\t\t? scrollContainer.offsetWidth -\n\t\t\t\t\t\t  scrollContainer.clientWidth\n\t\t\t\t\t\t: 0;\n\n\t\t\t\t\tif ( left < scrollContainerRect.left + scrollbarWidth ) {\n\t\t\t\t\t\tleft = scrollContainerRect.left + scrollbarWidth;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( dropPosition === 'top' ) {\n\t\t\t\t\ttop = rect.top - rect.height * 2;\n\t\t\t\t} else {\n\t\t\t\t\t// `dropPosition` is either `bottom` or `inside`\n\t\t\t\t\ttop = rect.top;\n\t\t\t\t}\n\n\t\t\t\tconst width = getDropIndicatorWidth( rect, 0 );\n\t\t\t\tconst height = rect.height;\n\n\t\t\t\treturn new window.DOMRect( left, top, width, height );\n\t\t\t},\n\t\t};\n\t}, [ targetElement, dropPosition, getDropIndicatorWidth, rtl ] );\n\n\tif ( ! targetElement ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Popover\n\t\t\tanimate={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tfocusOnMount={ false }\n\t\t\tclassName=\"block-editor-list-view-drop-indicator--preview\"\n\t\t\tvariant=\"unstyled\"\n\t\t\tflip={ false }\n\t\t\tresize\n\t\t>\n\t\t\t<div\n\t\t\t\tstyle={ style }\n\t\t\t\tclassName={ clsx(\n\t\t\t\t\t'block-editor-list-view-drop-indicator__line',\n\t\t\t\t\t{\n\t\t\t\t\t\t'block-editor-list-view-drop-indicator__line--darker':\n\t\t\t\t\t\t\thasAdjacentSelectedBranch,\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"block-editor-list-view-leaf\"\n\t\t\t\t\taria-level={ ariaLevel }\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t'block-editor-list-view-block-select-button',\n\t\t\t\t\t\t\t'block-editor-list-view-block-contents'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tstyle={ horizontalScrollOffsetStyle }\n\t\t\t\t\t>\n\t\t\t\t\t\t<ListViewExpander onClick={ () => {} } />\n\t\t\t\t\t\t<BlockIcon\n\t\t\t\t\t\t\ticon={ blockInformation?.icon }\n\t\t\t\t\t\t\tshowColors\n\t\t\t\t\t\t\tcontext=\"list-view\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<HStack\n\t\t\t\t\t\t\talignment=\"center\"\n\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__label-wrapper\"\n\t\t\t\t\t\t\tjustify=\"flex-start\"\n\t\t\t\t\t\t\tspacing={ 1 }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__title\">\n\t\t\t\t\t\t\t\t<Truncate ellipsizeMode=\"auto\">\n\t\t\t\t\t\t\t\t\t{ blockTitle }\n\t\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</HStack>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"block-editor-list-view-block__menu-cell\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popover>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useState, useCallback, useEffect } from '@wordpress/element';\nimport {\n\tuseThrottle,\n\t__experimentalUseDropZone as useDropZone,\n\tusePrevious,\n} from '@wordpress/compose';\nimport { isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetDistanceToNearestEdge,\n\tisPointContainedByRect,\n} from '../../utils/math';\nimport useOnBlockDrop from '../use-on-block-drop';\nimport { store as blockEditorStore } from '../../store';\n\n/** @typedef {import('../../utils/math').WPPoint} WPPoint */\n\n/**\n * The type of a drag event.\n *\n * @typedef {'default'|'file'|'html'} WPDragEventType\n */\n\n/**\n * An object representing data for blocks in the DOM used by drag and drop.\n *\n * @typedef {Object} WPListViewDropZoneBlock\n * @property {string}  clientId                        The client id for the block.\n * @property {string}  rootClientId                    The root client id for the block.\n * @property {number}  blockIndex                      The block's index.\n * @property {Element} element                         The DOM element representing the block.\n * @property {number}  innerBlockCount                 The number of inner blocks the block has.\n * @property {boolean} isDraggedBlock                  Whether the block is currently being dragged.\n * @property {boolean} isExpanded                      Whether the block is expanded in the UI.\n * @property {boolean} canInsertDraggedBlocksAsSibling Whether the dragged block can be a sibling of this block.\n * @property {boolean} canInsertDraggedBlocksAsChild   Whether the dragged block can be a child of this block.\n */\n\n/**\n * An array representing data for blocks in the DOM used by drag and drop.\n *\n * @typedef {WPListViewDropZoneBlock[]} WPListViewDropZoneBlocks\n */\n\n/**\n * An object containing details of a drop target.\n *\n * @typedef {Object} WPListViewDropZoneTarget\n * @property {string}                  blockIndex   The insertion index.\n * @property {string}                  rootClientId The root client id for the block.\n * @property {string|undefined}        clientId     The client id for the block.\n * @property {'top'|'bottom'|'inside'} dropPosition The position relative to the block that the user is dropping to.\n *                                                  'inside' refers to nesting as an inner block.\n */\n\n// When the indentation level, the corresponding left margin in `style.scss`\n// must be updated as well to ensure the drop zone is aligned with the indentation.\nexport const NESTING_LEVEL_INDENTATION = 24;\n\n/**\n * Determines whether the user is positioning the dragged block to be\n * moved up to a parent level.\n *\n * Determined based on nesting level indentation of the current block.\n *\n * @param {WPPoint} point        The point representing the cursor position when dragging.\n * @param {DOMRect} rect         The rectangle.\n * @param {number}  nestingLevel The nesting level of the block.\n * @param {boolean} rtl          Whether the editor is in RTL mode.\n * @return {boolean} Whether the gesture is an upward gesture.\n */\nfunction isUpGesture( point, rect, nestingLevel = 1, rtl = false ) {\n\t// If the block is nested, and the user is dragging to the bottom\n\t// left of the block (or bottom right in RTL languages), then it is an upward gesture.\n\tconst blockIndentPosition = rtl\n\t\t? rect.right - nestingLevel * NESTING_LEVEL_INDENTATION\n\t\t: rect.left + nestingLevel * NESTING_LEVEL_INDENTATION;\n\treturn rtl ? point.x > blockIndentPosition : point.x < blockIndentPosition;\n}\n\n/**\n * Returns how many nesting levels up the user is attempting to drag to.\n *\n * The relative parent level is calculated based on how far\n * the cursor is from the provided nesting level (e.g. of a candidate block\n * that the user is hovering over). The nesting level is considered \"desired\"\n * because it is not guaranteed that the user will be able to drag to the desired level.\n *\n * The returned integer can be used to access an ascending array\n * of parent blocks, where the first item is the block the user\n * is hovering over, and the last item is the root block.\n *\n * @param {WPPoint} point        The point representing the cursor position when dragging.\n * @param {DOMRect} rect         The rectangle.\n * @param {number}  nestingLevel The nesting level of the block.\n * @param {boolean} rtl          Whether the editor is in RTL mode.\n * @return {number} The desired relative parent level.\n */\nfunction getDesiredRelativeParentLevel(\n\tpoint,\n\trect,\n\tnestingLevel = 1,\n\trtl = false\n) {\n\t// In RTL languages, the block indent position is from the right edge of the block.\n\t// In LTR languages, the block indent position is from the left edge of the block.\n\tconst blockIndentPosition = rtl\n\t\t? rect.right - nestingLevel * NESTING_LEVEL_INDENTATION\n\t\t: rect.left + nestingLevel * NESTING_LEVEL_INDENTATION;\n\n\tconst distanceBetweenPointAndBlockIndentPosition = rtl\n\t\t? blockIndentPosition - point.x\n\t\t: point.x - blockIndentPosition;\n\n\tconst desiredParentLevel = Math.round(\n\t\tdistanceBetweenPointAndBlockIndentPosition / NESTING_LEVEL_INDENTATION\n\t);\n\n\treturn Math.abs( desiredParentLevel );\n}\n\n/**\n * Returns an array of the parent blocks of the block the user is dropping to.\n *\n * @param {WPListViewDropZoneBlock}  candidateBlockData The block the user is dropping to.\n * @param {WPListViewDropZoneBlocks} blocksData         Data about the blocks in list view.\n * @return {WPListViewDropZoneBlocks} An array of block parents, including the block the user is dropping to.\n */\nfunction getCandidateBlockParents( candidateBlockData, blocksData ) {\n\tconst candidateBlockParents = [];\n\tlet currentBlockData = candidateBlockData;\n\n\twhile ( currentBlockData ) {\n\t\tcandidateBlockParents.push( { ...currentBlockData } );\n\t\tcurrentBlockData = blocksData.find(\n\t\t\t( blockData ) =>\n\t\t\t\tblockData.clientId === currentBlockData.rootClientId\n\t\t);\n\t}\n\n\treturn candidateBlockParents;\n}\n\n/**\n * Given a list of blocks data and a block index, return the next non-dragged\n * block. This is used to determine the block that the user is dropping to,\n * while ignoring the dragged block.\n *\n * @param {WPListViewDropZoneBlocks} blocksData Data about the blocks in list view.\n * @param {number}                   index      The index to begin searching from.\n * @return {WPListViewDropZoneBlock | undefined} The next non-dragged block.\n */\nfunction getNextNonDraggedBlock( blocksData, index ) {\n\tconst nextBlockData = blocksData[ index + 1 ];\n\tif ( nextBlockData && nextBlockData.isDraggedBlock ) {\n\t\treturn getNextNonDraggedBlock( blocksData, index + 1 );\n\t}\n\n\treturn nextBlockData;\n}\n\n/**\n * Determines whether the user positioning the dragged block to nest as an\n * inner block.\n *\n * Determined based on nesting level indentation of the current block, plus\n * the indentation of the next level of nesting. The vertical position of the\n * cursor must also be within the block.\n *\n * @param {WPPoint} point        The point representing the cursor position when dragging.\n * @param {DOMRect} rect         The rectangle.\n * @param {number}  nestingLevel The nesting level of the block.\n * @param {boolean} rtl          Whether the editor is in RTL mode.\n */\nfunction isNestingGesture( point, rect, nestingLevel = 1, rtl = false ) {\n\tconst blockIndentPosition = rtl\n\t\t? rect.right - nestingLevel * NESTING_LEVEL_INDENTATION\n\t\t: rect.left + nestingLevel * NESTING_LEVEL_INDENTATION;\n\n\tconst isNestingHorizontalGesture = rtl\n\t\t? point.x < blockIndentPosition - NESTING_LEVEL_INDENTATION\n\t\t: point.x > blockIndentPosition + NESTING_LEVEL_INDENTATION;\n\n\treturn isNestingHorizontalGesture && point.y < rect.bottom;\n}\n\n// Block navigation is always a vertical list, so only allow dropping\n// to the above or below a block.\nconst ALLOWED_DROP_EDGES = [ 'top', 'bottom' ];\n\n/**\n * Given blocks data and the cursor position, compute the drop target.\n *\n * @param {WPListViewDropZoneBlocks} blocksData Data about the blocks in list view.\n * @param {WPPoint}                  position   The point representing the cursor position when dragging.\n * @param {boolean}                  rtl        Whether the editor is in RTL mode.\n *\n * @return {WPListViewDropZoneTarget | undefined} An object containing data about the drop target.\n */\nexport function getListViewDropTarget( blocksData, position, rtl = false ) {\n\tlet candidateEdge;\n\tlet candidateBlockData;\n\tlet candidateDistance;\n\tlet candidateRect;\n\tlet candidateBlockIndex;\n\n\tfor ( let i = 0; i < blocksData.length; i++ ) {\n\t\tconst blockData = blocksData[ i ];\n\t\tif ( blockData.isDraggedBlock ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst rect = blockData.element.getBoundingClientRect();\n\t\tconst [ distance, edge ] = getDistanceToNearestEdge(\n\t\t\tposition,\n\t\t\trect,\n\t\t\tALLOWED_DROP_EDGES\n\t\t);\n\n\t\tconst isCursorWithinBlock = isPointContainedByRect( position, rect );\n\t\tif (\n\t\t\tcandidateDistance === undefined ||\n\t\t\tdistance < candidateDistance ||\n\t\t\tisCursorWithinBlock\n\t\t) {\n\t\t\tcandidateDistance = distance;\n\n\t\t\tconst index = blocksData.indexOf( blockData );\n\t\t\tconst previousBlockData = blocksData[ index - 1 ];\n\n\t\t\t// If dragging near the top of a block and the preceding block\n\t\t\t// is at the same level, use the preceding block as the candidate\n\t\t\t// instead, as later it makes determining a nesting drop easier.\n\t\t\tif (\n\t\t\t\tedge === 'top' &&\n\t\t\t\tpreviousBlockData &&\n\t\t\t\tpreviousBlockData.rootClientId === blockData.rootClientId &&\n\t\t\t\t! previousBlockData.isDraggedBlock\n\t\t\t) {\n\t\t\t\tcandidateBlockData = previousBlockData;\n\t\t\t\tcandidateEdge = 'bottom';\n\t\t\t\tcandidateRect =\n\t\t\t\t\tpreviousBlockData.element.getBoundingClientRect();\n\t\t\t\tcandidateBlockIndex = index - 1;\n\t\t\t} else {\n\t\t\t\tcandidateBlockData = blockData;\n\t\t\t\tcandidateEdge = edge;\n\t\t\t\tcandidateRect = rect;\n\t\t\t\tcandidateBlockIndex = index;\n\t\t\t}\n\n\t\t\t// If the mouse position is within the block, break early\n\t\t\t// as the user would intend to drop either before or after\n\t\t\t// this block.\n\t\t\t//\n\t\t\t// This solves an issue where some rows in the list view\n\t\t\t// tree overlap slightly due to sub-pixel rendering.\n\t\t\tif ( isCursorWithinBlock ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( ! candidateBlockData ) {\n\t\treturn;\n\t}\n\n\tconst candidateBlockParents = getCandidateBlockParents(\n\t\tcandidateBlockData,\n\t\tblocksData\n\t);\n\n\tconst isDraggingBelow = candidateEdge === 'bottom';\n\n\t// If the user is dragging towards the bottom of the block check whether\n\t// they might be trying to nest the block as a child.\n\t// If the block already has inner blocks, and is expanded, this should be treated\n\t// as nesting since the next block in the tree will be the first child.\n\t// However, if the block is collapsed, dragging beneath the block should\n\t// still be allowed, as the next visible block in the tree will be a sibling.\n\tif (\n\t\tisDraggingBelow &&\n\t\tcandidateBlockData.canInsertDraggedBlocksAsChild &&\n\t\t( ( candidateBlockData.innerBlockCount > 0 &&\n\t\t\tcandidateBlockData.isExpanded ) ||\n\t\t\tisNestingGesture(\n\t\t\t\tposition,\n\t\t\t\tcandidateRect,\n\t\t\t\tcandidateBlockParents.length,\n\t\t\t\trtl\n\t\t\t) )\n\t) {\n\t\t// If the block is expanded, insert the block as the first child.\n\t\t// Otherwise, for collapsed blocks, insert the block as the last child.\n\t\tconst newBlockIndex = candidateBlockData.isExpanded\n\t\t\t? 0\n\t\t\t: candidateBlockData.innerBlockCount || 0;\n\n\t\treturn {\n\t\t\trootClientId: candidateBlockData.clientId,\n\t\t\tclientId: candidateBlockData.clientId,\n\t\t\tblockIndex: newBlockIndex,\n\t\t\tdropPosition: 'inside',\n\t\t};\n\t}\n\n\t// If the user is dragging towards the bottom of the block check whether\n\t// they might be trying to move the block to be at a parent level.\n\tif (\n\t\tisDraggingBelow &&\n\t\tcandidateBlockData.rootClientId &&\n\t\tisUpGesture(\n\t\t\tposition,\n\t\t\tcandidateRect,\n\t\t\tcandidateBlockParents.length,\n\t\t\trtl\n\t\t)\n\t) {\n\t\tconst nextBlock = getNextNonDraggedBlock(\n\t\t\tblocksData,\n\t\t\tcandidateBlockIndex\n\t\t);\n\t\tconst currentLevel = candidateBlockData.nestingLevel;\n\t\tconst nextLevel = nextBlock ? nextBlock.nestingLevel : 1;\n\n\t\tif ( currentLevel && nextLevel ) {\n\t\t\t// Determine the desired relative level of the block to be dropped.\n\t\t\tconst desiredRelativeLevel = getDesiredRelativeParentLevel(\n\t\t\t\tposition,\n\t\t\t\tcandidateRect,\n\t\t\t\tcandidateBlockParents.length,\n\t\t\t\trtl\n\t\t\t);\n\n\t\t\tconst targetParentIndex = Math.max(\n\t\t\t\tMath.min( desiredRelativeLevel, currentLevel - nextLevel ),\n\t\t\t\t0\n\t\t\t);\n\n\t\t\tif ( candidateBlockParents[ targetParentIndex ] ) {\n\t\t\t\t// Default to the block index of the candidate block.\n\t\t\t\tlet newBlockIndex = candidateBlockData.blockIndex;\n\n\t\t\t\t// If the next block is at the same level, use that as the default\n\t\t\t\t// block index. This ensures that the block is dropped in the correct\n\t\t\t\t// position when dragging to the bottom of a block.\n\t\t\t\tif (\n\t\t\t\t\tcandidateBlockParents[ targetParentIndex ].nestingLevel ===\n\t\t\t\t\tnextBlock?.nestingLevel\n\t\t\t\t) {\n\t\t\t\t\tnewBlockIndex = nextBlock?.blockIndex;\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, search from the current block index back\n\t\t\t\t\t// to find the last block index within the same target parent.\n\t\t\t\t\tfor ( let i = candidateBlockIndex; i >= 0; i-- ) {\n\t\t\t\t\t\tconst blockData = blocksData[ i ];\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tblockData.rootClientId ===\n\t\t\t\t\t\t\tcandidateBlockParents[ targetParentIndex ]\n\t\t\t\t\t\t\t\t.rootClientId\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tnewBlockIndex = blockData.blockIndex + 1;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\trootClientId:\n\t\t\t\t\t\tcandidateBlockParents[ targetParentIndex ].rootClientId,\n\t\t\t\t\tclientId: candidateBlockData.clientId,\n\t\t\t\t\tblockIndex: newBlockIndex,\n\t\t\t\t\tdropPosition: candidateEdge,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\t// If dropping as a sibling, but block cannot be inserted in\n\t// this context, return early.\n\tif ( ! candidateBlockData.canInsertDraggedBlocksAsSibling ) {\n\t\treturn;\n\t}\n\n\tconst offset = isDraggingBelow ? 1 : 0;\n\treturn {\n\t\trootClientId: candidateBlockData.rootClientId,\n\t\tclientId: candidateBlockData.clientId,\n\t\tblockIndex: candidateBlockData.blockIndex + offset,\n\t\tdropPosition: candidateEdge,\n\t};\n}\n\n// Throttle options need to be defined outside of the hook to avoid\n// re-creating the object on every render. This is due to a limitation\n// of the `useThrottle` hook, where the options object is included\n// in the dependency array for memoization.\nconst EXPAND_THROTTLE_OPTIONS = {\n\tleading: false, // Don't call the function immediately on the first call.\n\ttrailing: true, // Do call the function on the last call.\n};\n\n/**\n * A react hook for implementing a drop zone in list view.\n *\n * @param {Object}       props                    Named parameters.\n * @param {?HTMLElement} [props.dropZoneElement]  Optional element to be used as the drop zone.\n * @param {Object}       [props.expandedState]    The expanded state of the blocks in the list view.\n * @param {Function}     [props.setExpandedState] Function to set the expanded state of a list of block clientIds.\n *\n * @return {WPListViewDropZoneTarget} The drop target.\n */\nexport default function useListViewDropZone( {\n\tdropZoneElement,\n\texpandedState,\n\tsetExpandedState,\n} ) {\n\tconst {\n\t\tgetBlockRootClientId,\n\t\tgetBlockIndex,\n\t\tgetBlockCount,\n\t\tgetDraggedBlockClientIds,\n\t\tcanInsertBlocks,\n\t} = useSelect( blockEditorStore );\n\tconst [ target, setTarget ] = useState();\n\tconst { rootClientId: targetRootClientId, blockIndex: targetBlockIndex } =\n\t\ttarget || {};\n\n\tconst onBlockDrop = useOnBlockDrop( targetRootClientId, targetBlockIndex );\n\n\tconst rtl = isRTL();\n\n\tconst previousRootClientId = usePrevious( targetRootClientId );\n\n\tconst maybeExpandBlock = useCallback(\n\t\t( _expandedState, _target ) => {\n\t\t\t// If the user is attempting to drop a block inside a collapsed block,\n\t\t\t// that is, using a nesting gesture flagged by 'inside' dropPosition,\n\t\t\t// expand the block within the list view, if it isn't already.\n\t\t\tconst { rootClientId } = _target || {};\n\t\t\tif ( ! rootClientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t_target?.dropPosition === 'inside' &&\n\t\t\t\t! _expandedState[ rootClientId ]\n\t\t\t) {\n\t\t\t\tsetExpandedState( {\n\t\t\t\t\ttype: 'expand',\n\t\t\t\t\tclientIds: [ rootClientId ],\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\t\t[ setExpandedState ]\n\t);\n\n\t// Throttle the maybeExpandBlock function to avoid expanding the block\n\t// too quickly when the user is dragging over the block. This is to\n\t// avoid expanding the block when the user is just passing over it.\n\tconst throttledMaybeExpandBlock = useThrottle(\n\t\tmaybeExpandBlock,\n\t\t500,\n\t\tEXPAND_THROTTLE_OPTIONS\n\t);\n\n\tuseEffect( () => {\n\t\tif (\n\t\t\ttarget?.dropPosition !== 'inside' ||\n\t\t\tpreviousRootClientId !== target?.rootClientId\n\t\t) {\n\t\t\tthrottledMaybeExpandBlock.cancel();\n\t\t\treturn;\n\t\t}\n\t\tthrottledMaybeExpandBlock( expandedState, target );\n\t}, [\n\t\texpandedState,\n\t\tpreviousRootClientId,\n\t\ttarget,\n\t\tthrottledMaybeExpandBlock,\n\t] );\n\n\tconst draggedBlockClientIds = getDraggedBlockClientIds();\n\tconst throttled = useThrottle(\n\t\tuseCallback(\n\t\t\t( event, currentTarget ) => {\n\t\t\t\tconst position = { x: event.clientX, y: event.clientY };\n\t\t\t\tconst isBlockDrag = !! draggedBlockClientIds?.length;\n\n\t\t\t\tconst blockElements = Array.from(\n\t\t\t\t\tcurrentTarget.querySelectorAll( '[data-block]' )\n\t\t\t\t);\n\n\t\t\t\tconst blocksData = blockElements.map( ( blockElement ) => {\n\t\t\t\t\tconst clientId = blockElement.dataset.block;\n\t\t\t\t\tconst isExpanded = blockElement.dataset.expanded === 'true';\n\t\t\t\t\tconst isDraggedBlock =\n\t\t\t\t\t\tblockElement.classList.contains( 'is-dragging' );\n\n\t\t\t\t\t// Get nesting level from `aria-level` attribute because Firefox does not support `element.ariaLevel`.\n\t\t\t\t\tconst nestingLevel = parseInt(\n\t\t\t\t\t\tblockElement.getAttribute( 'aria-level' ),\n\t\t\t\t\t\t10\n\t\t\t\t\t);\n\t\t\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tclientId,\n\t\t\t\t\t\tisExpanded,\n\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\tblockIndex: getBlockIndex( clientId ),\n\t\t\t\t\t\telement: blockElement,\n\t\t\t\t\t\tnestingLevel: nestingLevel || undefined,\n\t\t\t\t\t\tisDraggedBlock: isBlockDrag ? isDraggedBlock : false,\n\t\t\t\t\t\tinnerBlockCount: getBlockCount( clientId ),\n\t\t\t\t\t\tcanInsertDraggedBlocksAsSibling: isBlockDrag\n\t\t\t\t\t\t\t? canInsertBlocks(\n\t\t\t\t\t\t\t\t\tdraggedBlockClientIds,\n\t\t\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: true,\n\t\t\t\t\t\tcanInsertDraggedBlocksAsChild: isBlockDrag\n\t\t\t\t\t\t\t? canInsertBlocks( draggedBlockClientIds, clientId )\n\t\t\t\t\t\t\t: true,\n\t\t\t\t\t};\n\t\t\t\t} );\n\n\t\t\t\tconst newTarget = getListViewDropTarget(\n\t\t\t\t\tblocksData,\n\t\t\t\t\tposition,\n\t\t\t\t\trtl\n\t\t\t\t);\n\n\t\t\t\tif ( newTarget ) {\n\t\t\t\t\tsetTarget( newTarget );\n\t\t\t\t}\n\t\t\t},\n\t\t\t[\n\t\t\t\tcanInsertBlocks,\n\t\t\t\tdraggedBlockClientIds,\n\t\t\t\tgetBlockCount,\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\trtl,\n\t\t\t]\n\t\t),\n\t\t50\n\t);\n\n\tconst ref = useDropZone( {\n\t\tdropZoneElement,\n\t\tonDrop( event ) {\n\t\t\tthrottled.cancel();\n\t\t\tif ( target ) {\n\t\t\t\tonBlockDrop( event );\n\t\t\t}\n\t\t\t// Use `undefined` value to indicate that the drag has concluded.\n\t\t\t// This allows styling rules that are active only when a user is\n\t\t\t// dragging to be removed.\n\t\t\tsetTarget( undefined );\n\t\t},\n\t\tonDragLeave() {\n\t\t\tthrottled.cancel();\n\t\t\t// Use `null` value to indicate that the drop target is not valid,\n\t\t\t// but that the drag is still active. This allows for styling rules\n\t\t\t// that are active only when a user drags outside of the list view.\n\t\t\tsetTarget( null );\n\t\t},\n\t\tonDragOver( event ) {\n\t\t\t// `currentTarget` is only available while the event is being\n\t\t\t// handled, so get it now and pass it to the thottled function.\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget\n\t\t\tthrottled( event, event.currentTarget );\n\t\t},\n\t\tonDragEnd() {\n\t\t\tthrottled.cancel();\n\t\t\t// Use `undefined` value to indicate that the drag has concluded.\n\t\t\t// This allows styling rules that are active only when a user is\n\t\t\t// dragging to be removed.\n\t\t\tsetTarget( undefined );\n\t\t},\n\t} );\n\n\treturn { ref, target };\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseInstanceId,\n\tuseMergeRefs,\n\t__experimentalUseFixedWindowList as useFixedWindowList,\n} from '@wordpress/compose';\nimport {\n\t__experimentalTreeGrid as TreeGrid,\n\tVisuallyHidden,\n} from '@wordpress/components';\nimport { AsyncModeProvider, useSelect } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\nimport {\n\tuseCallback,\n\tuseEffect,\n\tuseMemo,\n\tuseRef,\n\tuseReducer,\n\tforwardRef,\n\tuseState,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport ListViewBranch from './branch';\nimport { ListViewContext } from './context';\nimport ListViewDropIndicatorPreview from './drop-indicator';\nimport useBlockSelection from './use-block-selection';\nimport useListViewBlockIndexes from './use-list-view-block-indexes';\nimport useListViewClientIds from './use-list-view-client-ids';\nimport useListViewCollapseItems from './use-list-view-collapse-items';\nimport useListViewDropZone from './use-list-view-drop-zone';\nimport useListViewExpandSelectedItem from './use-list-view-expand-selected-item';\nimport { store as blockEditorStore } from '../../store';\nimport { BlockSettingsDropdown } from '../block-settings-menu/block-settings-dropdown';\nimport { focusListItem } from './utils';\nimport useClipboardHandler from './use-clipboard-handler';\n\nconst expanded = ( state, action ) => {\n\tif ( action.type === 'clear' ) {\n\t\treturn {};\n\t}\n\tif ( Array.isArray( action.clientIds ) ) {\n\t\treturn {\n\t\t\t...state,\n\t\t\t...action.clientIds.reduce(\n\t\t\t\t( newState, id ) => ( {\n\t\t\t\t\t...newState,\n\t\t\t\t\t[ id ]: action.type === 'expand',\n\t\t\t\t} ),\n\t\t\t\t{}\n\t\t\t),\n\t\t};\n\t}\n\treturn state;\n};\n\nexport const BLOCK_LIST_ITEM_HEIGHT = 32;\n\n/** @typedef {import('react').ComponentType} ComponentType */\n/** @typedef {import('react').Ref<HTMLElement>} Ref */\n\n/**\n * Show a hierarchical list of blocks.\n *\n * @param {Object}         props                        Components props.\n * @param {string}         props.id                     An HTML element id for the root element of ListView.\n * @param {Array}          props.blocks                 _deprecated_ Custom subset of block client IDs to be used instead of the default hierarchy.\n * @param {?HTMLElement}   props.dropZoneElement        Optional element to be used as the drop zone.\n * @param {?boolean}       props.showBlockMovers        Flag to enable block movers. Defaults to `false`.\n * @param {?boolean}       props.isExpanded             Flag to determine whether nested levels are expanded by default. Defaults to `false`.\n * @param {?boolean}       props.showAppender           Flag to show or hide the block appender. Defaults to `false`.\n * @param {?ComponentType} props.blockSettingsMenu      Optional more menu substitution. Defaults to the standard `BlockSettingsDropdown` component.\n * @param {string}         props.rootClientId           The client id of the root block from which we determine the blocks to show in the list.\n * @param {string}         props.description            Optional accessible description for the tree grid component.\n * @param {?Function}      props.onSelect               Optional callback to be invoked when a block is selected. Receives the block object that was selected.\n * @param {?ComponentType} props.additionalBlockContent Component that renders additional block content UI.\n * @param {Ref}            ref                          Forwarded ref\n */\nfunction ListViewComponent(\n\t{\n\t\tid,\n\t\tblocks,\n\t\tdropZoneElement,\n\t\tshowBlockMovers = false,\n\t\tisExpanded = false,\n\t\tshowAppender = false,\n\t\tblockSettingsMenu: BlockSettingsMenu = BlockSettingsDropdown,\n\t\trootClientId,\n\t\tdescription,\n\t\tonSelect,\n\t\tadditionalBlockContent: AdditionalBlockContent,\n\t},\n\tref\n) {\n\t// This can be removed once we no longer need to support the blocks prop.\n\tif ( blocks ) {\n\t\tdeprecated(\n\t\t\t'`blocks` property in `wp.blockEditor.__experimentalListView`',\n\t\t\t{\n\t\t\t\tsince: '6.3',\n\t\t\t\talternative: '`rootClientId` property',\n\t\t\t}\n\t\t);\n\t}\n\n\tconst instanceId = useInstanceId( ListViewComponent );\n\tconst { clientIdsTree, draggedClientIds, selectedClientIds } =\n\t\tuseListViewClientIds( { blocks, rootClientId } );\n\tconst blockIndexes = useListViewBlockIndexes( clientIdsTree );\n\n\tconst { getBlock } = useSelect( blockEditorStore );\n\tconst { visibleBlockCount } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getGlobalBlockCount, getClientIdsOfDescendants } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst draggedBlockCount =\n\t\t\t\tdraggedClientIds?.length > 0\n\t\t\t\t\t? getClientIdsOfDescendants( draggedClientIds ).length + 1\n\t\t\t\t\t: 0;\n\t\t\treturn {\n\t\t\t\tvisibleBlockCount: getGlobalBlockCount() - draggedBlockCount,\n\t\t\t};\n\t\t},\n\t\t[ draggedClientIds ]\n\t);\n\n\tconst { updateBlockSelection } = useBlockSelection();\n\n\tconst [ expandedState, setExpandedState ] = useReducer( expanded, {} );\n\n\tconst [ insertedBlock, setInsertedBlock ] = useState( null );\n\n\tconst { setSelectedTreeId } = useListViewExpandSelectedItem( {\n\t\tfirstSelectedBlockClientId: selectedClientIds[ 0 ],\n\t\tsetExpandedState,\n\t} );\n\tconst selectEditorBlock = useCallback(\n\t\t/**\n\t\t * @param {MouseEvent | KeyboardEvent | undefined} event\n\t\t * @param {string}                                 blockClientId\n\t\t * @param {null | undefined | -1 | 1}              focusPosition\n\t\t */\n\t\t( event, blockClientId, focusPosition ) => {\n\t\t\tupdateBlockSelection( event, blockClientId, null, focusPosition );\n\t\t\tsetSelectedTreeId( blockClientId );\n\t\t\tif ( onSelect ) {\n\t\t\t\tonSelect( getBlock( blockClientId ) );\n\t\t\t}\n\t\t},\n\t\t[ setSelectedTreeId, updateBlockSelection, onSelect, getBlock ]\n\t);\n\n\tconst { ref: dropZoneRef, target: blockDropTarget } = useListViewDropZone( {\n\t\tdropZoneElement,\n\t\texpandedState,\n\t\tsetExpandedState,\n\t} );\n\tconst elementRef = useRef();\n\n\t// Allow handling of copy, cut, and paste events.\n\tconst clipBoardRef = useClipboardHandler( {\n\t\tselectBlock: selectEditorBlock,\n\t} );\n\n\tconst treeGridRef = useMergeRefs( [\n\t\tclipBoardRef,\n\t\telementRef,\n\t\tdropZoneRef,\n\t\tref,\n\t] );\n\n\tuseEffect( () => {\n\t\t// If a blocks are already selected when the list view is initially\n\t\t// mounted, shift focus to the first selected block.\n\t\tif ( selectedClientIds?.length ) {\n\t\t\tfocusListItem( selectedClientIds[ 0 ], elementRef?.current );\n\t\t}\n\t\t// Only focus on the selected item when the list view is mounted.\n\t}, [] );\n\n\tconst expand = useCallback(\n\t\t( clientId ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst clientIds = Array.isArray( clientId )\n\t\t\t\t? clientId\n\t\t\t\t: [ clientId ];\n\t\t\tsetExpandedState( { type: 'expand', clientIds } );\n\t\t},\n\t\t[ setExpandedState ]\n\t);\n\tconst collapse = useCallback(\n\t\t( clientId ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetExpandedState( { type: 'collapse', clientIds: [ clientId ] } );\n\t\t},\n\t\t[ setExpandedState ]\n\t);\n\tconst collapseAll = useCallback( () => {\n\t\tsetExpandedState( { type: 'clear' } );\n\t}, [ setExpandedState ] );\n\tconst expandRow = useCallback(\n\t\t( row ) => {\n\t\t\texpand( row?.dataset?.block );\n\t\t},\n\t\t[ expand ]\n\t);\n\tconst collapseRow = useCallback(\n\t\t( row ) => {\n\t\t\tcollapse( row?.dataset?.block );\n\t\t},\n\t\t[ collapse ]\n\t);\n\tconst focusRow = useCallback(\n\t\t( event, startRow, endRow ) => {\n\t\t\tif ( event.shiftKey ) {\n\t\t\t\tupdateBlockSelection(\n\t\t\t\t\tevent,\n\t\t\t\t\tstartRow?.dataset?.block,\n\t\t\t\t\tendRow?.dataset?.block\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[ updateBlockSelection ]\n\t);\n\n\tuseListViewCollapseItems( {\n\t\tcollapseAll,\n\t\texpand,\n\t} );\n\n\tconst firstDraggedBlockClientId = draggedClientIds?.[ 0 ];\n\n\t// Convert a blockDropTarget into indexes relative to the blocks in the list view.\n\t// These values are used to determine which blocks should be displaced to make room\n\t// for the drop indicator. See `ListViewBranch` and `getDragDisplacementValues`.\n\tconst { blockDropTargetIndex, blockDropPosition, firstDraggedBlockIndex } =\n\t\tuseMemo( () => {\n\t\t\tlet _blockDropTargetIndex, _firstDraggedBlockIndex;\n\n\t\t\tif ( blockDropTarget?.clientId ) {\n\t\t\t\tconst foundBlockIndex =\n\t\t\t\t\tblockIndexes[ blockDropTarget.clientId ];\n\t\t\t\t// If dragging below or inside the block, treat the drop target as the next block.\n\t\t\t\t_blockDropTargetIndex =\n\t\t\t\t\tfoundBlockIndex === undefined ||\n\t\t\t\t\tblockDropTarget?.dropPosition === 'top'\n\t\t\t\t\t\t? foundBlockIndex\n\t\t\t\t\t\t: foundBlockIndex + 1;\n\t\t\t} else if ( blockDropTarget === null ) {\n\t\t\t\t// A `null` value is used to indicate that the user is dragging outside of the list view.\n\t\t\t\t_blockDropTargetIndex = null;\n\t\t\t}\n\n\t\t\tif ( firstDraggedBlockClientId ) {\n\t\t\t\tconst foundBlockIndex =\n\t\t\t\t\tblockIndexes[ firstDraggedBlockClientId ];\n\t\t\t\t_firstDraggedBlockIndex =\n\t\t\t\t\tfoundBlockIndex === undefined ||\n\t\t\t\t\tblockDropTarget?.dropPosition === 'top'\n\t\t\t\t\t\t? foundBlockIndex\n\t\t\t\t\t\t: foundBlockIndex + 1;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tblockDropTargetIndex: _blockDropTargetIndex,\n\t\t\t\tblockDropPosition: blockDropTarget?.dropPosition,\n\t\t\t\tfirstDraggedBlockIndex: _firstDraggedBlockIndex,\n\t\t\t};\n\t\t}, [ blockDropTarget, blockIndexes, firstDraggedBlockClientId ] );\n\n\tconst contextValue = useMemo(\n\t\t() => ( {\n\t\t\tblockDropPosition,\n\t\t\tblockDropTargetIndex,\n\t\t\tblockIndexes,\n\t\t\tdraggedClientIds,\n\t\t\texpandedState,\n\t\t\texpand,\n\t\t\tfirstDraggedBlockIndex,\n\t\t\tcollapse,\n\t\t\tcollapseAll,\n\t\t\tBlockSettingsMenu,\n\t\t\tlistViewInstanceId: instanceId,\n\t\t\tAdditionalBlockContent,\n\t\t\tinsertedBlock,\n\t\t\tsetInsertedBlock,\n\t\t\ttreeGridElementRef: elementRef,\n\t\t\trootClientId,\n\t\t} ),\n\t\t[\n\t\t\tblockDropPosition,\n\t\t\tblockDropTargetIndex,\n\t\t\tblockIndexes,\n\t\t\tdraggedClientIds,\n\t\t\texpandedState,\n\t\t\texpand,\n\t\t\tfirstDraggedBlockIndex,\n\t\t\tcollapse,\n\t\t\tcollapseAll,\n\t\t\tBlockSettingsMenu,\n\t\t\tinstanceId,\n\t\t\tAdditionalBlockContent,\n\t\t\tinsertedBlock,\n\t\t\tsetInsertedBlock,\n\t\t\trootClientId,\n\t\t]\n\t);\n\n\t// List View renders a fixed number of items and relies on each having a fixed item height of 36px.\n\t// If this value changes, we should also change the itemHeight value set in useFixedWindowList.\n\t// See: https://github.com/WordPress/gutenberg/pull/35230 for additional context.\n\tconst [ fixedListWindow ] = useFixedWindowList(\n\t\telementRef,\n\t\tBLOCK_LIST_ITEM_HEIGHT,\n\t\tvisibleBlockCount,\n\t\t{\n\t\t\t// Ensure that the windowing logic is recalculated when the expanded state changes.\n\t\t\t// This is necessary because expanding a collapsed block in a short list view can\n\t\t\t// switch the list view to a tall list view with a scrollbar, and vice versa.\n\t\t\t// When this happens, the windowing logic needs to be recalculated to ensure that\n\t\t\t// the correct number of blocks are rendered, by rechecking for a scroll container.\n\t\t\texpandedState,\n\t\t\tuseWindowing: true,\n\t\t\twindowOverscan: 40,\n\t\t}\n\t);\n\n\t// If there are no blocks to show and we're not showing the appender, do not render the list view.\n\tif ( ! clientIdsTree.length && ! showAppender ) {\n\t\treturn null;\n\t}\n\n\tconst describedById =\n\t\tdescription && `block-editor-list-view-description-${ instanceId }`;\n\n\treturn (\n\t\t<AsyncModeProvider value>\n\t\t\t<ListViewDropIndicatorPreview\n\t\t\t\tdraggedBlockClientId={ firstDraggedBlockClientId }\n\t\t\t\tlistViewRef={ elementRef }\n\t\t\t\tblockDropTarget={ blockDropTarget }\n\t\t\t/>\n\t\t\t{ description && (\n\t\t\t\t<VisuallyHidden id={ describedById }>\n\t\t\t\t\t{ description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t\t<TreeGrid\n\t\t\t\tid={ id }\n\t\t\t\tclassName={ clsx( 'block-editor-list-view-tree', {\n\t\t\t\t\t'is-dragging':\n\t\t\t\t\t\tdraggedClientIds?.length > 0 &&\n\t\t\t\t\t\tblockDropTargetIndex !== undefined,\n\t\t\t\t} ) }\n\t\t\t\taria-label={ __( 'Block navigation structure' ) }\n\t\t\t\tref={ treeGridRef }\n\t\t\t\tonCollapseRow={ collapseRow }\n\t\t\t\tonExpandRow={ expandRow }\n\t\t\t\tonFocusRow={ focusRow }\n\t\t\t\tapplicationAriaLabel={ __( 'Block navigation structure' ) }\n\t\t\t\taria-describedby={ describedById }\n\t\t\t\tstyle={ {\n\t\t\t\t\t'--wp-admin--list-view-dragged-items-height':\n\t\t\t\t\t\tdraggedClientIds?.length\n\t\t\t\t\t\t\t? `${\n\t\t\t\t\t\t\t\t\tBLOCK_LIST_ITEM_HEIGHT *\n\t\t\t\t\t\t\t\t\t( draggedClientIds.length - 1 )\n\t\t\t\t\t\t\t  }px`\n\t\t\t\t\t\t\t: null,\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<ListViewContext.Provider value={ contextValue }>\n\t\t\t\t\t<ListViewBranch\n\t\t\t\t\t\tblocks={ clientIdsTree }\n\t\t\t\t\t\tparentId={ rootClientId }\n\t\t\t\t\t\tselectBlock={ selectEditorBlock }\n\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\tfixedListWindow={ fixedListWindow }\n\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\tisExpanded={ isExpanded }\n\t\t\t\t\t\tshowAppender={ showAppender }\n\t\t\t\t\t/>\n\t\t\t\t</ListViewContext.Provider>\n\t\t\t</TreeGrid>\n\t\t</AsyncModeProvider>\n\t);\n}\n\n// This is the private API for the ListView component.\n// It allows access to all props, not just the public ones.\nexport const PrivateListView = forwardRef( ListViewComponent );\n\n// This is the public API for the ListView component.\n// We wrap the PrivateListView component to hide some props from the public API.\nexport default forwardRef( ( props, ref ) => {\n\treturn (\n\t\t<PrivateListView\n\t\t\tref={ ref }\n\t\t\t{ ...props }\n\t\t\tshowAppender={ false }\n\t\t\trootClientId={ null }\n\t\t\tonSelect={ null }\n\t\t\tadditionalBlockContent={ null }\n\t\t\tblockSettingsMenu={ undefined }\n\t\t/>\n\t);\n} );\n","/**\n * WordPress dependencies\n */\n\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nexport default function useListViewClientIds( { blocks, rootClientId } ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetDraggedBlockClientIds,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tgetEnabledClientIdsTree,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\n\t\t\treturn {\n\t\t\t\tselectedClientIds: getSelectedBlockClientIds(),\n\t\t\t\tdraggedClientIds: getDraggedBlockClientIds(),\n\t\t\t\tclientIdsTree:\n\t\t\t\t\tblocks ?? getEnabledClientIdsTree( rootClientId ),\n\t\t\t};\n\t\t},\n\t\t[ blocks, rootClientId ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\n\nexport default function useListViewBlockIndexes( blocks ) {\n\tconst blockIndexes = useMemo( () => {\n\t\tconst indexes = {};\n\n\t\tlet currentGlobalIndex = 0;\n\n\t\tconst traverseBlocks = ( blockList ) => {\n\t\t\tblockList.forEach( ( block ) => {\n\t\t\t\tindexes[ block.clientId ] = currentGlobalIndex;\n\t\t\t\tcurrentGlobalIndex++;\n\n\t\t\t\tif ( block.innerBlocks.length > 0 ) {\n\t\t\t\t\ttraverseBlocks( block.innerBlocks );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\ttraverseBlocks( blocks );\n\n\t\treturn indexes;\n\t}, [ blocks ] );\n\n\treturn blockIndexes;\n}\n","/**\n * WordPress dependencies\n */\nimport { speak } from '@wordpress/a11y';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\nimport { UP, DOWN, HOME, END, ESCAPE } from '@wordpress/keycodes';\nimport { store as blocksStore } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { getCommonDepthClientIds } from './utils';\n\nexport default function useBlockSelection() {\n\tconst { clearSelectedBlock, multiSelect, selectBlock } =\n\t\tuseDispatch( blockEditorStore );\n\tconst {\n\t\tgetBlockName,\n\t\tgetBlockParents,\n\t\tgetBlockSelectionStart,\n\t\tgetSelectedBlockClientIds,\n\t\thasMultiSelection,\n\t\thasSelectedBlock,\n\t} = useSelect( blockEditorStore );\n\n\tconst { getBlockType } = useSelect( blocksStore );\n\n\tconst updateBlockSelection = useCallback(\n\t\tasync ( event, clientId, destinationClientId, focusPosition ) => {\n\t\t\tif ( ! event?.shiftKey && event?.keyCode !== ESCAPE ) {\n\t\t\t\tselectBlock( clientId, focusPosition );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// To handle multiple block selection via the `SHIFT` key, prevent\n\t\t\t// the browser default behavior of opening the link in a new window.\n\t\t\tevent.preventDefault();\n\n\t\t\tconst isOnlyDeselection =\n\t\t\t\tevent.type === 'keydown' && event.keyCode === ESCAPE;\n\t\t\tconst isKeyPress =\n\t\t\t\tevent.type === 'keydown' &&\n\t\t\t\t( event.keyCode === UP ||\n\t\t\t\t\tevent.keyCode === DOWN ||\n\t\t\t\t\tevent.keyCode === HOME ||\n\t\t\t\t\tevent.keyCode === END );\n\n\t\t\t// Handle clicking on a block when no blocks are selected, and return early.\n\t\t\tif (\n\t\t\t\t! isKeyPress &&\n\t\t\t\t! hasSelectedBlock() &&\n\t\t\t\t! hasMultiSelection()\n\t\t\t) {\n\t\t\t\tselectBlock( clientId, null );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selectedBlocks = getSelectedBlockClientIds();\n\t\t\tconst clientIdWithParents = [\n\t\t\t\t...getBlockParents( clientId ),\n\t\t\t\tclientId,\n\t\t\t];\n\n\t\t\tif (\n\t\t\t\tisOnlyDeselection ||\n\t\t\t\t( isKeyPress &&\n\t\t\t\t\t! selectedBlocks.some( ( blockId ) =>\n\t\t\t\t\t\tclientIdWithParents.includes( blockId )\n\t\t\t\t\t) )\n\t\t\t) {\n\t\t\t\t// Ensure that shift-selecting blocks via the keyboard only\n\t\t\t\t// expands the current selection if focusing over already\n\t\t\t\t// selected blocks. Otherwise, clear the selection so that\n\t\t\t\t// a user can create a new selection entirely by keyboard.\n\t\t\t\tawait clearSelectedBlock();\n\t\t\t}\n\n\t\t\t// Update selection, if not only clearing the selection.\n\t\t\tif ( ! isOnlyDeselection ) {\n\t\t\t\tlet startTarget = getBlockSelectionStart();\n\t\t\t\tlet endTarget = clientId;\n\n\t\t\t\t// Handle keyboard behavior for selecting multiple blocks.\n\t\t\t\tif ( isKeyPress ) {\n\t\t\t\t\tif ( ! hasSelectedBlock() && ! hasMultiSelection() ) {\n\t\t\t\t\t\t// Set the starting point of the selection to the currently\n\t\t\t\t\t\t// focused block, if there are no blocks currently selected.\n\t\t\t\t\t\t// This ensures that as the selection is expanded or contracted,\n\t\t\t\t\t\t// the starting point of the selection is anchored to that block.\n\t\t\t\t\t\tstartTarget = clientId;\n\t\t\t\t\t}\n\t\t\t\t\tif ( destinationClientId ) {\n\t\t\t\t\t\t// If the user presses UP or DOWN, we want to ensure that the block they're\n\t\t\t\t\t\t// moving to is the target for selection, and not the currently focused one.\n\t\t\t\t\t\tendTarget = destinationClientId;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst startParents = getBlockParents( startTarget );\n\t\t\t\tconst endParents = getBlockParents( endTarget );\n\n\t\t\t\tconst { start, end } = getCommonDepthClientIds(\n\t\t\t\t\tstartTarget,\n\t\t\t\t\tendTarget,\n\t\t\t\t\tstartParents,\n\t\t\t\t\tendParents\n\t\t\t\t);\n\t\t\t\tawait multiSelect( start, end, null );\n\t\t\t}\n\n\t\t\t// Announce deselected block, or number of deselected blocks if\n\t\t\t// the total number of blocks deselected is greater than one.\n\t\t\tconst updatedSelectedBlocks = getSelectedBlockClientIds();\n\n\t\t\t// If the selection is greater than 1 and the Home or End keys\n\t\t\t// were used to generate the selection, then skip announcing the\n\t\t\t// deselected blocks.\n\t\t\tif (\n\t\t\t\t( event.keyCode === HOME || event.keyCode === END ) &&\n\t\t\t\tupdatedSelectedBlocks.length > 1\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selectionDiff = selectedBlocks.filter(\n\t\t\t\t( blockId ) => ! updatedSelectedBlocks.includes( blockId )\n\t\t\t);\n\n\t\t\tlet label;\n\t\t\tif ( selectionDiff.length === 1 ) {\n\t\t\t\tconst title = getBlockType(\n\t\t\t\t\tgetBlockName( selectionDiff[ 0 ] )\n\t\t\t\t)?.title;\n\t\t\t\tif ( title ) {\n\t\t\t\t\tlabel = sprintf(\n\t\t\t\t\t\t/* translators: %s: block name */\n\t\t\t\t\t\t__( '%s deselected.' ),\n\t\t\t\t\t\ttitle\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if ( selectionDiff.length > 1 ) {\n\t\t\t\tlabel = sprintf(\n\t\t\t\t\t/* translators: %s: number of deselected blocks */\n\t\t\t\t\t__( '%s blocks deselected.' ),\n\t\t\t\t\tselectionDiff.length\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( label ) {\n\t\t\t\tspeak( label, 'assertive' );\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tclearSelectedBlock,\n\t\t\tgetBlockName,\n\t\t\tgetBlockType,\n\t\t\tgetBlockParents,\n\t\t\tgetBlockSelectionStart,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\thasMultiSelection,\n\t\t\thasSelectedBlock,\n\t\t\tmultiSelect,\n\t\t\tselectBlock,\n\t\t]\n\t);\n\n\treturn {\n\t\tupdateBlockSelection,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function useListViewExpandSelectedItem( {\n\tfirstSelectedBlockClientId,\n\tsetExpandedState,\n} ) {\n\tconst [ selectedTreeId, setSelectedTreeId ] = useState( null );\n\tconst { selectedBlockParentClientIds } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockParents } = select( blockEditorStore );\n\t\t\treturn {\n\t\t\t\tselectedBlockParentClientIds: getBlockParents(\n\t\t\t\t\tfirstSelectedBlockClientId,\n\t\t\t\t\tfalse\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ firstSelectedBlockClientId ]\n\t);\n\n\t// Expand tree when a block is selected.\n\tuseEffect( () => {\n\t\t// If the selectedTreeId is the same as the selected block,\n\t\t// it means that the block was selected using the block list tree.\n\t\tif ( selectedTreeId === firstSelectedBlockClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If the selected block has parents, get the top-level parent.\n\t\tif ( selectedBlockParentClientIds?.length ) {\n\t\t\t// If the selected block has parents,\n\t\t\t// expand the tree branch.\n\t\t\tsetExpandedState( {\n\t\t\t\ttype: 'expand',\n\t\t\t\tclientIds: selectedBlockParentClientIds,\n\t\t\t} );\n\t\t}\n\t}, [\n\t\tfirstSelectedBlockClientId,\n\t\tselectedBlockParentClientIds,\n\t\tselectedTreeId,\n\t\tsetExpandedState,\n\t] );\n\n\treturn {\n\t\tsetSelectedTreeId,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useRegistry, useSelect } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useNotifyCopy } from '../../utils/use-notify-copy';\nimport { focusListItem } from './utils';\nimport { getPasteBlocks, setClipboardBlocks } from '../writing-flow/utils';\n\n// This hook borrows from useClipboardHandler in ../writing-flow/use-clipboard-handler.js\n// and adds behaviour for the list view, while skipping partial selection.\nexport default function useClipboardHandler( { selectBlock } ) {\n\tconst registry = useRegistry();\n\tconst {\n\t\tgetBlockOrder,\n\t\tgetBlockRootClientId,\n\t\tgetBlocksByClientId,\n\t\tgetPreviousBlockClientId,\n\t\tgetSelectedBlockClientIds,\n\t\tgetSettings,\n\t\tcanInsertBlockType,\n\t\tcanRemoveBlocks,\n\t} = useSelect( blockEditorStore );\n\tconst { flashBlock, removeBlocks, replaceBlocks, insertBlocks } =\n\t\tuseDispatch( blockEditorStore );\n\tconst notifyCopy = useNotifyCopy();\n\n\treturn useRefEffect( ( node ) => {\n\t\tfunction updateFocusAndSelection( focusClientId, shouldSelectBlock ) {\n\t\t\tif ( shouldSelectBlock ) {\n\t\t\t\tselectBlock( undefined, focusClientId, null, null );\n\t\t\t}\n\n\t\t\tfocusListItem( focusClientId, node );\n\t\t}\n\n\t\t// Determine which blocks to update:\n\t\t// If the current (focused) block is part of the block selection, use the whole selection.\n\t\t// If the focused block is not part of the block selection, only update the focused block.\n\t\tfunction getBlocksToUpdate( clientId ) {\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst isUpdatingSelectedBlocks =\n\t\t\t\tselectedBlockClientIds.includes( clientId );\n\t\t\tconst firstBlockClientId = isUpdatingSelectedBlocks\n\t\t\t\t? selectedBlockClientIds[ 0 ]\n\t\t\t\t: clientId;\n\t\t\tconst firstBlockRootClientId =\n\t\t\t\tgetBlockRootClientId( firstBlockClientId );\n\n\t\t\tconst blocksToUpdate = isUpdatingSelectedBlocks\n\t\t\t\t? selectedBlockClientIds\n\t\t\t\t: [ clientId ];\n\n\t\t\treturn {\n\t\t\t\tblocksToUpdate,\n\t\t\t\tfirstBlockClientId,\n\t\t\t\tfirstBlockRootClientId,\n\t\t\t\toriginallySelectedBlockClientIds: selectedBlockClientIds,\n\t\t\t};\n\t\t}\n\n\t\tfunction handler( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\t// This was possibly already handled in rich-text/use-paste-handler.js.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Only handle events that occur within the list view.\n\t\t\tif ( ! node.contains( event.target.ownerDocument.activeElement ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Retrieve the block clientId associated with the focused list view row.\n\t\t\t// This enables applying copy / cut / paste behavior to the focused block,\n\t\t\t// rather than just the blocks that are currently selected.\n\t\t\tconst listViewRow =\n\t\t\t\tevent.target.ownerDocument.activeElement?.closest(\n\t\t\t\t\t'[role=row]'\n\t\t\t\t);\n\t\t\tconst clientId = listViewRow?.dataset?.block;\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tblocksToUpdate: selectedBlockClientIds,\n\t\t\t\tfirstBlockClientId,\n\t\t\t\tfirstBlockRootClientId,\n\t\t\t\toriginallySelectedBlockClientIds,\n\t\t\t} = getBlocksToUpdate( clientId );\n\n\t\t\tif ( selectedBlockClientIds.length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( event.type === 'copy' || event.type === 'cut' ) {\n\t\t\t\tif ( selectedBlockClientIds.length === 1 ) {\n\t\t\t\t\tflashBlock( selectedBlockClientIds[ 0 ] );\n\t\t\t\t}\n\n\t\t\t\tnotifyCopy( event.type, selectedBlockClientIds );\n\t\t\t\tconst blocks = getBlocksByClientId( selectedBlockClientIds );\n\t\t\t\tsetClipboardBlocks( event, blocks, registry );\n\t\t\t}\n\n\t\t\tif ( event.type === 'cut' ) {\n\t\t\t\t// Don't update the selection if the blocks cannot be deleted.\n\t\t\t\tif ( ! canRemoveBlocks( selectedBlockClientIds ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet blockToFocus =\n\t\t\t\t\tgetPreviousBlockClientId( firstBlockClientId ) ??\n\t\t\t\t\t// If the previous block is not found (when the first block is deleted),\n\t\t\t\t\t// fallback to focus the parent block.\n\t\t\t\t\tfirstBlockRootClientId;\n\n\t\t\t\t// Remove blocks, but don't update selection, and it will be handled below.\n\t\t\t\tremoveBlocks( selectedBlockClientIds, false );\n\n\t\t\t\t// Update the selection if the original selection has been removed.\n\t\t\t\tconst shouldUpdateSelection =\n\t\t\t\t\toriginallySelectedBlockClientIds.length > 0 &&\n\t\t\t\t\tgetSelectedBlockClientIds().length === 0;\n\n\t\t\t\t// If there's no previous block nor parent block, focus the first block.\n\t\t\t\tif ( ! blockToFocus ) {\n\t\t\t\t\tblockToFocus = getBlockOrder()[ 0 ];\n\t\t\t\t}\n\n\t\t\t\tupdateFocusAndSelection( blockToFocus, shouldUpdateSelection );\n\t\t\t} else if ( event.type === 'paste' ) {\n\t\t\t\tconst {\n\t\t\t\t\t__experimentalCanUserUseUnfilteredHTML:\n\t\t\t\t\t\tcanUserUseUnfilteredHTML,\n\t\t\t\t} = getSettings();\n\t\t\t\tconst blocks = getPasteBlocks(\n\t\t\t\t\tevent,\n\t\t\t\t\tcanUserUseUnfilteredHTML\n\t\t\t\t);\n\n\t\t\t\tif ( selectedBlockClientIds.length === 1 ) {\n\t\t\t\t\tconst [ selectedBlockClientId ] = selectedBlockClientIds;\n\n\t\t\t\t\t// If a single block is focused, and the blocks to be posted can\n\t\t\t\t\t// be inserted within the block, then append the pasted blocks\n\t\t\t\t\t// within the focused block. For example, if you have copied a paragraph\n\t\t\t\t\t// block and paste it within a single Group block, this will append\n\t\t\t\t\t// the paragraph block within the Group block.\n\t\t\t\t\tif (\n\t\t\t\t\t\tblocks.every( ( block ) =>\n\t\t\t\t\t\t\tcanInsertBlockType(\n\t\t\t\t\t\t\t\tblock.name,\n\t\t\t\t\t\t\t\tselectedBlockClientId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tinsertBlocks(\n\t\t\t\t\t\t\tblocks,\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\tselectedBlockClientId\n\t\t\t\t\t\t);\n\t\t\t\t\t\tupdateFocusAndSelection( blocks[ 0 ]?.clientId, false );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treplaceBlocks(\n\t\t\t\t\tselectedBlockClientIds,\n\t\t\t\t\tblocks,\n\t\t\t\t\tblocks.length - 1,\n\t\t\t\t\t-1\n\t\t\t\t);\n\t\t\t\tupdateFocusAndSelection( blocks[ 0 ]?.clientId, false );\n\t\t\t}\n\t\t}\n\n\t\tnode.ownerDocument.addEventListener( 'copy', handler );\n\t\tnode.ownerDocument.addEventListener( 'cut', handler );\n\t\tnode.ownerDocument.addEventListener( 'paste', handler );\n\n\t\treturn () => {\n\t\t\tnode.ownerDocument.removeEventListener( 'copy', handler );\n\t\t\tnode.ownerDocument.removeEventListener( 'cut', handler );\n\t\t\tnode.ownerDocument.removeEventListener( 'paste', handler );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nexport default function useListViewCollapseItems( { collapseAll, expand } ) {\n\tconst { expandedBlock, getBlockParents } = useSelect( ( select ) => {\n\t\tconst { getBlockParents: _getBlockParents, getExpandedBlock } = unlock(\n\t\t\tselect( blockEditorStore )\n\t\t);\n\t\treturn {\n\t\t\texpandedBlock: getExpandedBlock(),\n\t\t\tgetBlockParents: _getBlockParents,\n\t\t};\n\t}, [] );\n\n\t// Collapse all but the specified block when the expanded block client Id changes.\n\tuseEffect( () => {\n\t\tif ( expandedBlock ) {\n\t\t\tconst blockParents = getBlockParents( expandedBlock, false );\n\t\t\t// Collapse all blocks and expand the block's parents.\n\t\t\tcollapseAll();\n\t\t\texpand( blockParents );\n\t\t}\n\t}, [ collapseAll, expand, expandedBlock, getBlockParents ] );\n}\n","/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * WordPress dependencies\n */\nimport { Button, Dropdown } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\nimport { listView } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport ListView from '../list-view';\nimport { store as blockEditorStore } from '../../store';\n\nfunction BlockNavigationDropdownToggle( {\n\tisEnabled,\n\tonToggle,\n\tisOpen,\n\tinnerRef,\n\t...props\n} ) {\n\treturn (\n\t\t<Button\n\t\t\t__next40pxDefaultSize\n\t\t\t{ ...props }\n\t\t\tref={ innerRef }\n\t\t\ticon={ listView }\n\t\t\taria-expanded={ isOpen }\n\t\t\taria-haspopup=\"true\"\n\t\t\tonClick={ isEnabled ? onToggle : undefined }\n\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\tlabel={ __( 'List view' ) }\n\t\t\tclassName=\"block-editor-block-navigation\"\n\t\t\taria-disabled={ ! isEnabled }\n\t\t/>\n\t);\n}\n\nfunction BlockNavigationDropdown( { isDisabled, ...props }, ref ) {\n\tdeprecated( 'wp.blockEditor.BlockNavigationDropdown', {\n\t\tsince: '6.1',\n\t\talternative: 'wp.components.Dropdown and wp.blockEditor.ListView',\n\t} );\n\n\tconst hasBlocks = useSelect(\n\t\t( select ) => !! select( blockEditorStore ).getBlockCount(),\n\t\t[]\n\t);\n\tconst isEnabled = hasBlocks && ! isDisabled;\n\n\treturn (\n\t\t<Dropdown\n\t\t\tcontentClassName=\"block-editor-block-navigation__popover\"\n\t\t\tpopoverProps={ { placement: 'bottom-start' } }\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t<BlockNavigationDropdownToggle\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tinnerRef={ ref }\n\t\t\t\t\tisOpen={ isOpen }\n\t\t\t\t\tonToggle={ onToggle }\n\t\t\t\t\tisEnabled={ isEnabled }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\trenderContent={ () => (\n\t\t\t\t<div className=\"block-editor-block-navigation__container\">\n\t\t\t\t\t<p className=\"block-editor-block-navigation__label\">\n\t\t\t\t\t\t{ __( 'List view' ) }\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<ListView />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( BlockNavigationDropdown );\n","/**\n * WordPress dependencies\n */\nimport { getBlockType } from '@wordpress/blocks';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport InserterPreviewPanel from '../inserter/preview-panel';\nimport { replaceActiveStyle } from './utils';\n\nexport default function BlockStylesPreviewPanel( {\n\tgenericPreviewBlock,\n\tstyle,\n\tclassName,\n\tactiveStyle,\n} ) {\n\tconst example = getBlockType( genericPreviewBlock.name )?.example;\n\tconst styleClassName = replaceActiveStyle( className, activeStyle, style );\n\tconst previewBlocks = useMemo( () => {\n\t\treturn {\n\t\t\t...genericPreviewBlock,\n\t\t\ttitle: style.label || style.name,\n\t\t\tdescription: style.description,\n\t\t\tinitialAttributes: {\n\t\t\t\t...genericPreviewBlock.attributes,\n\t\t\t\tclassName:\n\t\t\t\t\tstyleClassName +\n\t\t\t\t\t' block-editor-block-styles__block-preview-container',\n\t\t\t},\n\t\t\texample,\n\t\t};\n\t}, [ genericPreviewBlock, styleClassName ] );\n\n\treturn <InserterPreviewPanel item={ previewBlocks } />;\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport { debounce, useViewportMatch } from '@wordpress/compose';\nimport {\n\tButton,\n\t__experimentalTruncate as Truncate,\n\tPopover,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockStylesPreviewPanel from './preview-panel';\nimport useStylesForBlocks from './use-styles-for-block';\n\nconst noop = () => {};\n\n// Block Styles component for the Settings Sidebar.\nfunction BlockStyles( { clientId, onSwitch = noop, onHoverClassName = noop } ) {\n\tconst {\n\t\tonSelect,\n\t\tstylesToRender,\n\t\tactiveStyle,\n\t\tgenericPreviewBlock,\n\t\tclassName: previewClassName,\n\t} = useStylesForBlocks( {\n\t\tclientId,\n\t\tonSwitch,\n\t} );\n\tconst [ hoveredStyle, setHoveredStyle ] = useState( null );\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\n\n\tif ( ! stylesToRender || stylesToRender.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst debouncedSetHoveredStyle = debounce( setHoveredStyle, 250 );\n\n\tconst onSelectStylePreview = ( style ) => {\n\t\tonSelect( style );\n\t\tonHoverClassName( null );\n\t\tsetHoveredStyle( null );\n\t\tdebouncedSetHoveredStyle.cancel();\n\t};\n\n\tconst styleItemHandler = ( item ) => {\n\t\tif ( hoveredStyle === item ) {\n\t\t\tdebouncedSetHoveredStyle.cancel();\n\t\t\treturn;\n\t\t}\n\t\tdebouncedSetHoveredStyle( item );\n\t\tonHoverClassName( item?.name ?? null );\n\t};\n\n\treturn (\n\t\t<div className=\"block-editor-block-styles\">\n\t\t\t<div className=\"block-editor-block-styles__variants\">\n\t\t\t\t{ stylesToRender.map( ( style ) => {\n\t\t\t\t\tconst buttonText = style.label || style.name;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t\t'block-editor-block-styles__item',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'is-active':\n\t\t\t\t\t\t\t\t\t\tactiveStyle.name === style.name,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tkey={ style.name }\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tlabel={ buttonText }\n\t\t\t\t\t\t\tonMouseEnter={ () => styleItemHandler( style ) }\n\t\t\t\t\t\t\tonFocus={ () => styleItemHandler( style ) }\n\t\t\t\t\t\t\tonMouseLeave={ () => styleItemHandler( null ) }\n\t\t\t\t\t\t\tonBlur={ () => styleItemHandler( null ) }\n\t\t\t\t\t\t\tonClick={ () => onSelectStylePreview( style ) }\n\t\t\t\t\t\t\taria-current={ activeStyle.name === style.name }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Truncate\n\t\t\t\t\t\t\t\tnumberOfLines={ 1 }\n\t\t\t\t\t\t\t\tclassName=\"block-editor-block-styles__item-text\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ buttonText }\n\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t\t{ hoveredStyle && ! isMobileViewport && (\n\t\t\t\t<Popover\n\t\t\t\t\tplacement=\"left-start\"\n\t\t\t\t\toffset={ 34 }\n\t\t\t\t\tfocusOnMount={ false }\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"block-editor-block-styles__preview-panel\"\n\t\t\t\t\t\tonMouseLeave={ () => styleItemHandler( null ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockStylesPreviewPanel\n\t\t\t\t\t\t\tactiveStyle={ activeStyle }\n\t\t\t\t\t\t\tclassName={ previewClassName }\n\t\t\t\t\t\t\tgenericPreviewBlock={ genericPreviewBlock }\n\t\t\t\t\t\t\tstyle={ hoveredStyle }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Popover>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default BlockStyles;\n","/**\n * WordPress dependencies\n */\nimport {\n\theadingLevel1,\n\theadingLevel2,\n\theadingLevel3,\n\theadingLevel4,\n\theadingLevel5,\n\theadingLevel6,\n\tparagraph,\n} from '@wordpress/icons';\nimport { Icon } from '@wordpress/components';\n\n/** @typedef {import('react').ComponentType} ComponentType */\n\n/**\n * HeadingLevelIcon props.\n *\n * @typedef WPHeadingLevelIconProps\n *\n * @property {number} level The heading level to show an icon for.\n */\n\nconst LEVEL_TO_PATH = {\n\t0: paragraph,\n\t1: headingLevel1,\n\t2: headingLevel2,\n\t3: headingLevel3,\n\t4: headingLevel4,\n\t5: headingLevel5,\n\t6: headingLevel6,\n};\n\n/**\n * Heading level icon.\n *\n * @param {WPHeadingLevelIconProps} props Component props.\n *\n * @return {?ComponentType} The icon.\n */\nexport default function HeadingLevelIcon( { level } ) {\n\tif ( LEVEL_TO_PATH[ level ] ) {\n\t\treturn <Icon icon={ LEVEL_TO_PATH[ level ] } />;\n\t}\n\n\treturn null;\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst paragraph = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m9.99609 14v-.2251l.00391.0001v6.225h1.5v-14.5h2.5v14.5h1.5v-14.5h3v-1.5h-8.50391c-2.76142 0-5 2.23858-5 5 0 2.7614 2.23858 5 5 5z\" />\n\t</SVG>\n);\n\nexport default paragraph;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst headingLevel1 = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M17.6 7c-.6.9-1.5 1.7-2.6 2v1h2v7h2V7h-1.4zM11 11H7V7H5v10h2v-4h4v4h2V7h-2v4z\" />\n\t</SVG>\n);\n\nexport default headingLevel1;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst headingLevel2 = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9 11.1H5v-4H3v10h2v-4h4v4h2v-10H9v4zm8 4c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6v1.5h8v-2H17z\" />\n\t</SVG>\n);\n\nexport default headingLevel2;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst headingLevel3 = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9 11H5V7H3v10h2v-4h4v4h2V7H9v4zm11.3 1.7c-.4-.4-1-.7-1.6-.8v-.1c.6-.2 1.1-.5 1.5-.9.3-.4.5-.8.5-1.3 0-.4-.1-.8-.3-1.1-.2-.3-.5-.6-.8-.8-.4-.2-.8-.4-1.2-.5-.6-.1-1.1-.2-1.6-.2-.6 0-1.3.1-1.8.3s-1.1.5-1.6.9l1.2 1.4c.4-.2.7-.4 1.1-.6.3-.2.7-.3 1.1-.3.4 0 .8.1 1.1.3.3.2.4.5.4.8 0 .4-.2.7-.6.9-.7.3-1.5.5-2.2.4v1.6c.5 0 1 0 1.5.1.3.1.7.2 1 .3.2.1.4.2.5.4s.1.4.1.6c0 .3-.2.7-.5.8-.4.2-.9.3-1.4.3s-1-.1-1.4-.3c-.4-.2-.8-.4-1.2-.7L13 15.6c.5.4 1 .8 1.6 1 .7.3 1.5.4 2.3.4.6 0 1.1-.1 1.6-.2.4-.1.9-.2 1.3-.5.4-.2.7-.5.9-.9.2-.4.3-.8.3-1.2 0-.6-.3-1.1-.7-1.5z\" />\n\t</SVG>\n);\n\nexport default headingLevel3;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst headingLevel4 = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M20 13V7h-3l-4 6v2h5v2h2v-2h1v-2h-1zm-2 0h-2.8L18 9v4zm-9-2H5V7H3v10h2v-4h4v4h2V7H9v4z\" />\n\t</SVG>\n);\n\nexport default headingLevel4;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst headingLevel5 = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9 11H5V7H3v10h2v-4h4v4h2V7H9v4zm11.7 1.2c-.2-.3-.5-.7-.8-.9-.3-.3-.7-.5-1.1-.6-.5-.1-.9-.2-1.4-.2-.2 0-.5.1-.7.1-.2.1-.5.1-.7.2l.1-1.9h4.3V7H14l-.3 5 1 .6.5-.2.4-.1c.1-.1.3-.1.4-.1h.5c.5 0 1 .1 1.4.4.4.2.6.7.6 1.1 0 .4-.2.8-.6 1.1-.4.3-.9.4-1.4.4-.4 0-.9-.1-1.3-.3-.4-.2-.7-.4-1.1-.7 0 0-1.1 1.4-1 1.5.5.4 1 .8 1.6 1 .7.3 1.5.4 2.3.4.5 0 1-.1 1.5-.3s.9-.4 1.3-.7c.4-.3.7-.7.9-1.1s.3-.9.3-1.4-.1-1-.3-1.4z\" />\n\t</SVG>\n);\n\nexport default headingLevel5;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst headingLevel6 = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M20.7 12.4c-.2-.3-.4-.6-.7-.9s-.6-.5-1-.6c-.4-.2-.8-.2-1.2-.2-.5 0-.9.1-1.3.3s-.8.5-1.2.8c0-.5 0-.9.2-1.4l.6-.9c.2-.2.5-.4.8-.5.6-.2 1.3-.2 1.9 0 .3.1.6.3.8.5 0 0 1.3-1.3 1.3-1.4-.4-.3-.9-.6-1.4-.8-.6-.2-1.3-.3-2-.3-.6 0-1.1.1-1.7.4-.5.2-1 .5-1.4.9-.4.4-.8 1-1 1.6-.3.7-.4 1.5-.4 2.3s.1 1.5.3 2.1c.2.6.6 1.1 1 1.5.4.4.9.7 1.4.9 1 .3 2 .3 3 0 .4-.1.8-.3 1.2-.6.3-.3.6-.6.8-1 .2-.5.3-.9.3-1.4s-.1-.9-.3-1.3zm-2 2.1c-.1.2-.3.4-.4.5-.1.1-.3.2-.5.2-.2.1-.4.1-.6.1-.2.1-.5 0-.7-.1-.2 0-.3-.2-.5-.3-.1-.2-.3-.4-.4-.6-.2-.3-.3-.7-.3-1 .3-.3.6-.5 1-.7.3-.1.7-.2 1-.2.4 0 .8.1 1.1.3.3.3.4.7.4 1.1 0 .2 0 .5-.1.7zM9 11H5V7H3v10h2v-4h4v4h2V7H9v4z\" />\n\t</SVG>\n);\n\nexport default headingLevel6;\n","/**\n * WordPress dependencies\n */\nimport { ToolbarDropdownMenu } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport HeadingLevelIcon from './heading-level-icon';\n\nconst HEADING_LEVELS = [ 1, 2, 3, 4, 5, 6 ];\n\nconst POPOVER_PROPS = {\n\tclassName: 'block-library-heading-level-dropdown',\n};\n\n/** @typedef {import('react').ComponentType} ComponentType */\n\n/**\n * HeadingLevelDropdown props.\n *\n * @typedef WPHeadingLevelDropdownProps\n *\n * @property {number}     value    The chosen heading level.\n * @property {number[]}   options  An array of supported heading levels.\n * @property {()=>number} onChange Function called with\n *                                 the selected value changes.\n */\n\n/**\n * Dropdown for selecting a heading level (1 through 6) or paragraph (0).\n *\n * @param {WPHeadingLevelDropdownProps} props Component props.\n *\n * @return {ComponentType} The toolbar.\n */\nexport default function HeadingLevelDropdown( {\n\toptions = HEADING_LEVELS,\n\tvalue,\n\tonChange,\n} ) {\n\tconst validOptions = options\n\t\t.filter(\n\t\t\t( option ) => option === 0 || HEADING_LEVELS.includes( option )\n\t\t)\n\t\t.sort( ( a, b ) => a - b ); // Sorts numerically in ascending order;\n\n\treturn (\n\t\t<ToolbarDropdownMenu\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\ticon={ <HeadingLevelIcon level={ value } /> }\n\t\t\tlabel={ __( 'Change level' ) }\n\t\t\tcontrols={ validOptions.map( ( targetLevel ) => {\n\t\t\t\tconst isActive = targetLevel === value;\n\t\t\t\treturn {\n\t\t\t\t\ticon: <HeadingLevelIcon level={ targetLevel } />,\n\t\t\t\t\ttitle:\n\t\t\t\t\t\ttargetLevel === 0\n\t\t\t\t\t\t\t? __( 'Paragraph' )\n\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t// translators: %d: heading level e.g: \"1\", \"2\", \"3\"\n\t\t\t\t\t\t\t\t\t__( 'Heading %d' ),\n\t\t\t\t\t\t\t\t\ttargetLevel\n\t\t\t\t\t\t\t  ),\n\t\t\t\t\tisActive,\n\t\t\t\t\tonClick() {\n\t\t\t\t\t\tonChange( targetLevel );\n\t\t\t\t\t},\n\t\t\t\t\trole: 'menuitemradio',\n\t\t\t\t};\n\t\t\t} ) }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst layout = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z\" />\n\t</SVG>\n);\n\nexport default layout;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, Placeholder } from '@wordpress/components';\nimport { layout } from '@wordpress/icons';\n\nfunction BlockVariationPicker( {\n\ticon = layout,\n\tlabel = __( 'Choose variation' ),\n\tinstructions = __( 'Select a variation to start with:' ),\n\tvariations,\n\tonSelect,\n\tallowSkip,\n} ) {\n\tconst classes = clsx( 'block-editor-block-variation-picker', {\n\t\t'has-many-variations': variations.length > 4,\n\t} );\n\n\treturn (\n\t\t<Placeholder\n\t\t\ticon={ icon }\n\t\t\tlabel={ label }\n\t\t\tinstructions={ instructions }\n\t\t\tclassName={ classes }\n\t\t>\n\t\t\t{ /*\n\t\t\t * Disable reason: The `list` ARIA role is redundant but\n\t\t\t * Safari+VoiceOver won't announce the list otherwise.\n\t\t\t */\n\t\t\t/* eslint-disable jsx-a11y/no-redundant-roles */ }\n\t\t\t<ul\n\t\t\t\tclassName=\"block-editor-block-variation-picker__variations\"\n\t\t\t\trole=\"list\"\n\t\t\t\taria-label={ __( 'Block variations' ) }\n\t\t\t>\n\t\t\t\t{ variations.map( ( variation ) => (\n\t\t\t\t\t<li key={ variation.name }>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\tvariation.icon && variation.icon.src\n\t\t\t\t\t\t\t\t\t? variation.icon.src\n\t\t\t\t\t\t\t\t\t: variation.icon\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ticonSize={ 48 }\n\t\t\t\t\t\t\tonClick={ () => onSelect( variation ) }\n\t\t\t\t\t\t\tclassName=\"block-editor-block-variation-picker__variation\"\n\t\t\t\t\t\t\tlabel={ variation.description || variation.title }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span className=\"block-editor-block-variation-picker__variation-label\">\n\t\t\t\t\t\t\t{ variation.title }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</li>\n\t\t\t\t) ) }\n\t\t\t</ul>\n\t\t\t{ /* eslint-enable jsx-a11y/no-redundant-roles */ }\n\t\t\t{ allowSkip && (\n\t\t\t\t<div className=\"block-editor-block-variation-picker__skip\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\tonClick={ () => onSelect() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Skip' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</Placeholder>\n\t);\n}\n\nexport default BlockVariationPicker;\n","export const VIEWMODES = {\n\tcarousel: 'carousel',\n\tgrid: 'grid',\n};\n","/**\n * WordPress dependencies\n */\nimport { __, isRTL } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport {\n\tchevronRight,\n\tchevronLeft,\n\tgrid,\n\tstretchFullWidth,\n} from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { VIEWMODES } from './constants';\n\nconst Actions = ( { onBlockPatternSelect } ) => (\n\t<div className=\"block-editor-block-pattern-setup__actions\">\n\t\t<Button\n\t\t\t__next40pxDefaultSize\n\t\t\tvariant=\"primary\"\n\t\t\tonClick={ onBlockPatternSelect }\n\t\t>\n\t\t\t{ __( 'Choose' ) }\n\t\t</Button>\n\t</div>\n);\n\nconst CarouselNavigation = ( {\n\thandlePrevious,\n\thandleNext,\n\tactiveSlide,\n\ttotalSlides,\n} ) => (\n\t<div className=\"block-editor-block-pattern-setup__navigation\">\n\t\t<Button\n\t\t\tsize=\"compact\"\n\t\t\ticon={ isRTL() ? chevronRight : chevronLeft }\n\t\t\tlabel={ __( 'Previous pattern' ) }\n\t\t\tonClick={ handlePrevious }\n\t\t\tdisabled={ activeSlide === 0 }\n\t\t\taccessibleWhenDisabled\n\t\t/>\n\t\t<Button\n\t\t\tsize=\"compact\"\n\t\t\ticon={ isRTL() ? chevronLeft : chevronRight }\n\t\t\tlabel={ __( 'Next pattern' ) }\n\t\t\tonClick={ handleNext }\n\t\t\tdisabled={ activeSlide === totalSlides - 1 }\n\t\t\taccessibleWhenDisabled\n\t\t/>\n\t</div>\n);\n\nconst SetupToolbar = ( {\n\tviewMode,\n\tsetViewMode,\n\thandlePrevious,\n\thandleNext,\n\tactiveSlide,\n\ttotalSlides,\n\tonBlockPatternSelect,\n} ) => {\n\tconst isCarouselView = viewMode === VIEWMODES.carousel;\n\tconst displayControls = (\n\t\t<div className=\"block-editor-block-pattern-setup__display-controls\">\n\t\t\t<Button\n\t\t\t\tsize=\"compact\"\n\t\t\t\ticon={ stretchFullWidth }\n\t\t\t\tlabel={ __( 'Carousel view' ) }\n\t\t\t\tonClick={ () => setViewMode( VIEWMODES.carousel ) }\n\t\t\t\tisPressed={ isCarouselView }\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tsize=\"compact\"\n\t\t\t\ticon={ grid }\n\t\t\t\tlabel={ __( 'Grid view' ) }\n\t\t\t\tonClick={ () => setViewMode( VIEWMODES.grid ) }\n\t\t\t\tisPressed={ viewMode === VIEWMODES.grid }\n\t\t\t/>\n\t\t</div>\n\t);\n\treturn (\n\t\t<div className=\"block-editor-block-pattern-setup__toolbar\">\n\t\t\t{ isCarouselView && (\n\t\t\t\t<CarouselNavigation\n\t\t\t\t\thandlePrevious={ handlePrevious }\n\t\t\t\t\thandleNext={ handleNext }\n\t\t\t\t\tactiveSlide={ activeSlide }\n\t\t\t\t\ttotalSlides={ totalSlides }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ displayControls }\n\t\t\t{ isCarouselView && (\n\t\t\t\t<Actions onBlockPatternSelect={ onBlockPatternSelect } />\n\t\t\t) }\n\t\t</div>\n\t);\n};\n\nexport default SetupToolbar;\n","/**\n * WordPress dependencies\n */\nimport { useDispatch } from '@wordpress/data';\nimport { cloneBlock } from '@wordpress/blocks';\nimport { Composite, VisuallyHidden } from '@wordpress/components';\n\nimport { useState } from '@wordpress/element';\nimport { useInstanceId } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockPreview from '../block-preview';\nimport SetupToolbar from './setup-toolbar';\nimport usePatternsSetup from './use-patterns-setup';\nimport { VIEWMODES } from './constants';\n\nconst SetupContent = ( {\n\tviewMode,\n\tactiveSlide,\n\tpatterns,\n\tonBlockPatternSelect,\n\tshowTitles,\n} ) => {\n\tconst containerClass = 'block-editor-block-pattern-setup__container';\n\n\tif ( viewMode === VIEWMODES.carousel ) {\n\t\tconst slideClass = new Map( [\n\t\t\t[ activeSlide, 'active-slide' ],\n\t\t\t[ activeSlide - 1, 'previous-slide' ],\n\t\t\t[ activeSlide + 1, 'next-slide' ],\n\t\t] );\n\t\treturn (\n\t\t\t<div className=\"block-editor-block-pattern-setup__carousel\">\n\t\t\t\t<div className={ containerClass }>\n\t\t\t\t\t<div className=\"carousel-container\">\n\t\t\t\t\t\t{ patterns.map( ( pattern, index ) => (\n\t\t\t\t\t\t\t<BlockPatternSlide\n\t\t\t\t\t\t\t\tactive={ index === activeSlide }\n\t\t\t\t\t\t\t\tclassName={ slideClass.get( index ) || '' }\n\t\t\t\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"block-editor-block-pattern-setup__grid\">\n\t\t\t<Composite\n\t\t\t\trole=\"listbox\"\n\t\t\t\tclassName={ containerClass }\n\t\t\t\taria-label={ __( 'Patterns list' ) }\n\t\t\t>\n\t\t\t\t{ patterns.map( ( pattern ) => (\n\t\t\t\t\t<BlockPattern\n\t\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\t\tonSelect={ onBlockPatternSelect }\n\t\t\t\t\t\tshowTitles={ showTitles }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</Composite>\n\t\t</div>\n\t);\n};\n\nfunction BlockPattern( { pattern, onSelect, showTitles } ) {\n\tconst baseClassName = 'block-editor-block-pattern-setup-list';\n\tconst { blocks, description, viewportWidth = 700 } = pattern;\n\tconst descriptionId = useInstanceId(\n\t\tBlockPattern,\n\t\t`${ baseClassName }__item-description`\n\t);\n\treturn (\n\t\t<div className={ `${ baseClassName }__list-item` }>\n\t\t\t<Composite.Item\n\t\t\t\trender={\n\t\t\t\t\t<div\n\t\t\t\t\t\taria-describedby={\n\t\t\t\t\t\t\tdescription ? descriptionId : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\taria-label={ pattern.title }\n\t\t\t\t\t\tclassName={ `${ baseClassName }__item` }\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tid={ `${ baseClassName }__pattern__${ pattern.name }` }\n\t\t\t\trole=\"option\"\n\t\t\t\tonClick={ () => onSelect( blocks ) }\n\t\t\t>\n\t\t\t\t<BlockPreview\n\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\t/>\n\t\t\t\t{ showTitles && (\n\t\t\t\t\t<div className={ `${ baseClassName }__item-title` }>\n\t\t\t\t\t\t{ pattern.title }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ !! description && (\n\t\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t\t{ description }\n\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t) }\n\t\t\t</Composite.Item>\n\t\t</div>\n\t);\n}\n\nfunction BlockPatternSlide( { active, className, pattern, minHeight } ) {\n\tconst { blocks, title, description } = pattern;\n\tconst descriptionId = useInstanceId(\n\t\tBlockPatternSlide,\n\t\t'block-editor-block-pattern-setup-list__item-description'\n\t);\n\treturn (\n\t\t<div\n\t\t\taria-hidden={ ! active }\n\t\t\trole=\"img\"\n\t\t\tclassName={ `pattern-slide ${ className }` }\n\t\t\taria-label={ title }\n\t\t\taria-describedby={ description ? descriptionId : undefined }\n\t\t>\n\t\t\t<BlockPreview blocks={ blocks } minHeight={ minHeight } />\n\t\t\t{ !! description && (\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nconst BlockPatternSetup = ( {\n\tclientId,\n\tblockName,\n\tfilterPatternsFn,\n\tonBlockPatternSelect,\n\tinitialViewMode = VIEWMODES.carousel,\n\tshowTitles = false,\n} ) => {\n\tconst [ viewMode, setViewMode ] = useState( initialViewMode );\n\tconst [ activeSlide, setActiveSlide ] = useState( 0 );\n\tconst { replaceBlock } = useDispatch( blockEditorStore );\n\tconst patterns = usePatternsSetup( clientId, blockName, filterPatternsFn );\n\n\tif ( ! patterns?.length ) {\n\t\treturn null;\n\t}\n\n\tconst onBlockPatternSelectDefault = ( blocks ) => {\n\t\tconst clonedBlocks = blocks.map( ( block ) => cloneBlock( block ) );\n\t\treplaceBlock( clientId, clonedBlocks );\n\t};\n\tconst onPatternSelectCallback =\n\t\tonBlockPatternSelect || onBlockPatternSelectDefault;\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tclassName={ `block-editor-block-pattern-setup view-mode-${ viewMode }` }\n\t\t\t>\n\t\t\t\t<SetupContent\n\t\t\t\t\tviewMode={ viewMode }\n\t\t\t\t\tactiveSlide={ activeSlide }\n\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\tonBlockPatternSelect={ onPatternSelectCallback }\n\t\t\t\t\tshowTitles={ showTitles }\n\t\t\t\t/>\n\t\t\t\t<SetupToolbar\n\t\t\t\t\tviewMode={ viewMode }\n\t\t\t\t\tsetViewMode={ setViewMode }\n\t\t\t\t\tactiveSlide={ activeSlide }\n\t\t\t\t\ttotalSlides={ patterns.length }\n\t\t\t\t\thandleNext={ () => {\n\t\t\t\t\t\tsetActiveSlide( ( active ) =>\n\t\t\t\t\t\t\tMath.min( active + 1, patterns.length - 1 )\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\thandlePrevious={ () => {\n\t\t\t\t\t\tsetActiveSlide( ( active ) =>\n\t\t\t\t\t\t\tMath.max( active - 1, 0 )\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\tonBlockPatternSelect={ () => {\n\t\t\t\t\t\tonPatternSelectCallback(\n\t\t\t\t\t\t\tpatterns[ activeSlide ].blocks\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default BlockPatternSetup;\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nfunction usePatternsSetup( clientId, blockName, filterPatternsFn ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetPatternsByBlockTypes,\n\t\t\t\t__experimentalGetAllowedPatterns,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\t\t\tif ( filterPatternsFn ) {\n\t\t\t\treturn __experimentalGetAllowedPatterns( rootClientId ).filter(\n\t\t\t\t\tfilterPatternsFn\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn getPatternsByBlockTypes( blockName, rootClientId );\n\t\t},\n\t\t[ clientId, blockName, filterPatternsFn ]\n\t);\n}\n\nexport default usePatternsSetup;\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tButton,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItemsChoice,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n\tVisuallyHidden,\n} from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useMemo } from '@wordpress/element';\nimport { chevronDown } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nfunction VariationsButtons( {\n\tclassName,\n\tonSelectVariation,\n\tselectedValue,\n\tvariations,\n} ) {\n\treturn (\n\t\t<fieldset className={ className }>\n\t\t\t<VisuallyHidden as=\"legend\">\n\t\t\t\t{ __( 'Transform to variation' ) }\n\t\t\t</VisuallyHidden>\n\t\t\t{ variations.map( ( variation ) => (\n\t\t\t\t<Button\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\tkey={ variation.name }\n\t\t\t\t\ticon={ <BlockIcon icon={ variation.icon } showColors /> }\n\t\t\t\t\tisPressed={ selectedValue === variation.name }\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tselectedValue === variation.name\n\t\t\t\t\t\t\t? variation.title\n\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t/* translators: %s: Block or block variation name. */\n\t\t\t\t\t\t\t\t\t__( 'Transform to %s' ),\n\t\t\t\t\t\t\t\t\tvariation.title\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t}\n\t\t\t\t\tonClick={ () => onSelectVariation( variation.name ) }\n\t\t\t\t\taria-label={ variation.title }\n\t\t\t\t\tshowTooltip\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</fieldset>\n\t);\n}\n\nfunction VariationsDropdown( {\n\tclassName,\n\tonSelectVariation,\n\tselectedValue,\n\tvariations,\n} ) {\n\tconst selectOptions = variations.map(\n\t\t( { name, title, description } ) => ( {\n\t\t\tvalue: name,\n\t\t\tlabel: title,\n\t\t\tinfo: description,\n\t\t} )\n\t);\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\tclassName={ className }\n\t\t\tlabel={ __( 'Transform to variation' ) }\n\t\t\ttext={ __( 'Transform to variation' ) }\n\t\t\tpopoverProps={ {\n\t\t\t\tposition: 'bottom center',\n\t\t\t\tclassName: `${ className }__popover`,\n\t\t\t} }\n\t\t\ticon={ chevronDown }\n\t\t\ttoggleProps={ { iconPosition: 'right' } }\n\t\t>\n\t\t\t{ () => (\n\t\t\t\t<MenuGroup>\n\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\tchoices={ selectOptions }\n\t\t\t\t\t\tvalue={ selectedValue }\n\t\t\t\t\t\tonSelect={ onSelectVariation }\n\t\t\t\t\t/>\n\t\t\t\t</MenuGroup>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n\nfunction VariationsToggleGroupControl( {\n\tclassName,\n\tonSelectVariation,\n\tselectedValue,\n\tvariations,\n} ) {\n\treturn (\n\t\t<div className={ className }>\n\t\t\t<ToggleGroupControl\n\t\t\t\tlabel={ __( 'Transform to variation' ) }\n\t\t\t\tvalue={ selectedValue }\n\t\t\t\thideLabelFromVision\n\t\t\t\tonChange={ onSelectVariation }\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t>\n\t\t\t\t{ variations.map( ( variation ) => (\n\t\t\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\t\t\tkey={ variation.name }\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t<BlockIcon icon={ variation.icon } showColors />\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue={ variation.name }\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\tselectedValue === variation.name\n\t\t\t\t\t\t\t\t? variation.title\n\t\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t\t/* translators: %s: Block or block variation name. */\n\t\t\t\t\t\t\t\t\t\t__( 'Transform to %s' ),\n\t\t\t\t\t\t\t\t\t\tvariation.title\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</ToggleGroupControl>\n\t\t</div>\n\t);\n}\n\nfunction __experimentalBlockVariationTransforms( { blockClientId } ) {\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst { activeBlockVariation, variations, isContentOnly } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getActiveBlockVariation, getBlockVariations } =\n\t\t\t\tselect( blocksStore );\n\n\t\t\tconst { getBlockName, getBlockAttributes, getBlockEditingMode } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\tconst name = blockClientId && getBlockName( blockClientId );\n\n\t\t\tconst { hasContentRoleAttribute } = unlock( select( blocksStore ) );\n\t\t\tconst isContentBlock = hasContentRoleAttribute( name );\n\n\t\t\treturn {\n\t\t\t\tactiveBlockVariation: getActiveBlockVariation(\n\t\t\t\t\tname,\n\t\t\t\t\tgetBlockAttributes( blockClientId )\n\t\t\t\t),\n\t\t\t\tvariations: name && getBlockVariations( name, 'transform' ),\n\t\t\t\tisContentOnly:\n\t\t\t\t\tgetBlockEditingMode( blockClientId ) === 'contentOnly' &&\n\t\t\t\t\t! isContentBlock,\n\t\t\t};\n\t\t},\n\t\t[ blockClientId ]\n\t);\n\n\tconst selectedValue = activeBlockVariation?.name;\n\n\t// Check if each variation has a unique icon.\n\tconst hasUniqueIcons = useMemo( () => {\n\t\tconst variationIcons = new Set();\n\t\tif ( ! variations ) {\n\t\t\treturn false;\n\t\t}\n\t\tvariations.forEach( ( variation ) => {\n\t\t\tif ( variation.icon ) {\n\t\t\t\tvariationIcons.add( variation.icon?.src || variation.icon );\n\t\t\t}\n\t\t} );\n\t\treturn variationIcons.size === variations.length;\n\t}, [ variations ] );\n\n\tconst onSelectVariation = ( variationName ) => {\n\t\tupdateBlockAttributes( blockClientId, {\n\t\t\t...variations.find( ( { name } ) => name === variationName )\n\t\t\t\t.attributes,\n\t\t} );\n\t};\n\n\tif ( ! variations?.length || isContentOnly ) {\n\t\treturn null;\n\t}\n\n\tconst baseClass = 'block-editor-block-variation-transforms';\n\n\t// Show buttons if there are more than 5 variations because the ToggleGroupControl does not wrap\n\tconst showButtons = variations.length > 5;\n\n\tconst ButtonComponent = showButtons\n\t\t? VariationsButtons\n\t\t: VariationsToggleGroupControl;\n\n\tconst Component = hasUniqueIcons ? ButtonComponent : VariationsDropdown;\n\n\treturn (\n\t\t<Component\n\t\t\tclassName={ baseClass }\n\t\t\tonSelectVariation={ onSelectVariation }\n\t\t\tselectedValue={ selectedValue }\n\t\t\tvariations={ variations }\n\t\t/>\n\t);\n}\n\nexport default __experimentalBlockVariationTransforms;\n","/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\n\nexport default createHigherOrderComponent( ( WrappedComponent ) => {\n\treturn ( props ) => {\n\t\t// Get the default colors, theme colors, and custom colors\n\t\tconst [\n\t\t\tdefaultColors,\n\t\t\tthemeColors,\n\t\t\tcustomColors,\n\t\t\tenableCustomColors,\n\t\t\tenableDefaultColors,\n\t\t] = useSettings(\n\t\t\t'color.palette.default',\n\t\t\t'color.palette.theme',\n\t\t\t'color.palette.custom',\n\t\t\t'color.custom',\n\t\t\t'color.defaultPalette'\n\t\t);\n\n\t\tconst _colors = enableDefaultColors\n\t\t\t? [\n\t\t\t\t\t...( themeColors || [] ),\n\t\t\t\t\t...( defaultColors || [] ),\n\t\t\t\t\t...( customColors || [] ),\n\t\t\t  ]\n\t\t\t: [ ...( themeColors || [] ), ...( customColors || [] ) ];\n\n\t\tconst { colors = _colors, disableCustomColors = ! enableCustomColors } =\n\t\t\tprops;\n\n\t\tconst hasColorsToChoose =\n\t\t\t( colors && colors.length > 0 ) || ! disableCustomColors;\n\t\treturn (\n\t\t\t<WrappedComponent\n\t\t\t\t{ ...{\n\t\t\t\t\t...props,\n\t\t\t\t\tcolors,\n\t\t\t\t\tdisableCustomColors,\n\t\t\t\t\thasColorsToChoose,\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t};\n}, 'withColorContext' );\n","/**\n * WordPress dependencies\n */\nimport { ColorPalette } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport withColorContext from './with-color-context';\n\nexport default withColorContext( ColorPalette );\n","/**\n * Internal dependencies\n */\nimport ColorGradientControl from '../colors-gradients/control';\n\nexport default function ColorPaletteControl( {\n\tonChange,\n\tvalue,\n\t...otherProps\n} ) {\n\treturn (\n\t\t<ColorGradientControl\n\t\t\t{ ...otherProps }\n\t\t\tonColorChange={ onChange }\n\t\t\tcolorValue={ value }\n\t\t\tgradients={ [] }\n\t\t\tdisableCustomGradients\n\t\t/>\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"date\"];","/**\n * WordPress dependencies\n */\nimport { _x, __ } from '@wordpress/i18n';\nimport { dateI18n, humanTimeDiff } from '@wordpress/date';\nimport { useState, createInterpolateElement } from '@wordpress/element';\nimport {\n\tTextControl,\n\tExternalLink,\n\tVisuallyHidden,\n\tToggleControl,\n\t__experimentalVStack as VStack,\n\tCustomSelectControl,\n} from '@wordpress/components';\n\n// So that we illustrate the different formats in the dropdown properly, show a date that is\n// somewhat recent, has a day greater than 12, and a month with more than three letters.\nconst exampleDate = new Date();\nexampleDate.setDate( 20 );\nexampleDate.setMonth( exampleDate.getMonth() - 3 );\nif ( exampleDate.getMonth() === 4 ) {\n\t// May has three letters, so use March.\n\texampleDate.setMonth( 3 );\n}\n\n/**\n * The `DateFormatPicker` component renders controls that let the user choose a\n * _date format_. That is, how they want their dates to be formatted.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/date-format-picker/README.md\n *\n * @param {Object}      props\n * @param {string|null} props.format        The selected date format. If `null`, _Default_ is selected.\n * @param {string}      props.defaultFormat The date format that will be used if the user selects 'Default'.\n * @param {Function}    props.onChange      Called when a selection is made. If `null`, _Default_ is selected.\n */\nexport default function DateFormatPicker( {\n\tformat,\n\tdefaultFormat,\n\tonChange,\n} ) {\n\treturn (\n\t\t<VStack\n\t\t\tas=\"fieldset\"\n\t\t\tspacing={ 4 }\n\t\t\tclassName=\"block-editor-date-format-picker\"\n\t\t>\n\t\t\t<VisuallyHidden as=\"legend\">{ __( 'Date format' ) }</VisuallyHidden>\n\t\t\t<ToggleControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Default format' ) }\n\t\t\t\thelp={ `${ __( 'Example:' ) }  ${ dateI18n(\n\t\t\t\t\tdefaultFormat,\n\t\t\t\t\texampleDate\n\t\t\t\t) }` }\n\t\t\t\tchecked={ ! format }\n\t\t\t\tonChange={ ( checked ) =>\n\t\t\t\t\tonChange( checked ? null : defaultFormat )\n\t\t\t\t}\n\t\t\t/>\n\t\t\t{ format && (\n\t\t\t\t<NonDefaultControls format={ format } onChange={ onChange } />\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n\nfunction NonDefaultControls( { format, onChange } ) {\n\t// Suggest a short format, medium format, long format, and a standardised\n\t// (YYYY-MM-DD) format. The short, medium, and long formats are localised as\n\t// different languages have different ways of writing these. For example, 'F\n\t// j, Y' (April 20, 2022) in American English (en_US) is 'j. F Y' (20. April\n\t// 2022) in German (de). The resultant array is de-duplicated as some\n\t// languages will use the same format string for short, medium, and long\n\t// formats.\n\tconst suggestedFormats = [\n\t\t...new Set( [\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t'Y-m-d',\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'n/j/Y', 'short date format' ),\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'n/j/Y g:i A', 'short date format with time' ),\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'M j, Y', 'medium date format' ),\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'M j, Y g:i A', 'medium date format with time' ),\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'F j, Y', 'long date format' ),\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'M j', 'short date format without the year' ),\n\t\t] ),\n\t];\n\n\tconst suggestedOptions = [\n\t\t...suggestedFormats.map( ( suggestedFormat, index ) => ( {\n\t\t\tkey: `suggested-${ index }`,\n\t\t\tname: dateI18n( suggestedFormat, exampleDate ),\n\t\t\tformat: suggestedFormat,\n\t\t} ) ),\n\t\t{\n\t\t\tkey: 'human-diff',\n\t\t\tname: humanTimeDiff( exampleDate ),\n\t\t\tformat: 'human-diff',\n\t\t},\n\t];\n\n\tconst customOption = {\n\t\tkey: 'custom',\n\t\tname: __( 'Custom' ),\n\t\tclassName:\n\t\t\t'block-editor-date-format-picker__custom-format-select-control__custom-option',\n\t\thint: __( 'Enter your own date format' ),\n\t};\n\n\tconst [ isCustom, setIsCustom ] = useState(\n\t\t() =>\n\t\t\t!! format &&\n\t\t\t! suggestedOptions.some( ( option ) => option.format === format )\n\t);\n\n\treturn (\n\t\t<VStack>\n\t\t\t<CustomSelectControl\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tlabel={ __( 'Choose a format' ) }\n\t\t\t\toptions={ [ ...suggestedOptions, customOption ] }\n\t\t\t\tvalue={\n\t\t\t\t\tisCustom\n\t\t\t\t\t\t? customOption\n\t\t\t\t\t\t: suggestedOptions.find(\n\t\t\t\t\t\t\t\t( option ) => option.format === format\n\t\t\t\t\t\t  ) ?? customOption\n\t\t\t\t}\n\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\tif ( selectedItem === customOption ) {\n\t\t\t\t\t\tsetIsCustom( true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetIsCustom( false );\n\t\t\t\t\t\tonChange( selectedItem.format );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t{ isCustom && (\n\t\t\t\t<TextControl\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Custom format' ) }\n\t\t\t\t\thideLabelFromVision\n\t\t\t\t\thelp={ createInterpolateElement(\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Enter a date or time <Link>format string</Link>.'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLink: (\n\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t\t\t\t'https://wordpress.org/documentation/article/customize-date-and-time-format/'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\tvalue={ format }\n\t\t\t\t\tonChange={ ( value ) => onChange( value ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tColorIndicator,\n\tDropdown,\n\tFlexItem,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\t__experimentalHStack as HStack,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport { useRef } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { reset as resetIcon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport ColorGradientControl from './control';\n\n// When the `ColorGradientSettingsDropdown` controls are being rendered to a\n// `ToolsPanel` they must be wrapped in a `ToolsPanelItem`.\nconst WithToolsPanelItem = ( { setting, children, panelId, ...props } ) => {\n\tconst clearValue = () => {\n\t\tif ( setting.colorValue ) {\n\t\t\tsetting.onColorChange();\n\t\t} else if ( setting.gradientValue ) {\n\t\t\tsetting.onGradientChange();\n\t\t}\n\t};\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\thasValue={ () => {\n\t\t\t\treturn !! setting.colorValue || !! setting.gradientValue;\n\t\t\t} }\n\t\t\tlabel={ setting.label }\n\t\t\tonDeselect={ clearValue }\n\t\t\tisShownByDefault={\n\t\t\t\tsetting.isShownByDefault !== undefined\n\t\t\t\t\t? setting.isShownByDefault\n\t\t\t\t\t: true\n\t\t\t}\n\t\t\t{ ...props }\n\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__item\"\n\t\t\tpanelId={ panelId }\n\t\t\t// Pass resetAllFilter if supplied due to rendering via SlotFill\n\t\t\t// into parent ToolsPanel.\n\t\t\tresetAllFilter={ setting.resetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanelItem>\n\t);\n};\n\nconst LabeledColorIndicator = ( { colorValue, label } ) => (\n\t<HStack justify=\"flex-start\">\n\t\t<ColorIndicator\n\t\t\tclassName=\"block-editor-panel-color-gradient-settings__color-indicator\"\n\t\t\tcolorValue={ colorValue }\n\t\t/>\n\t\t<FlexItem\n\t\t\tclassName=\"block-editor-panel-color-gradient-settings__color-name\"\n\t\t\ttitle={ label }\n\t\t>\n\t\t\t{ label }\n\t\t</FlexItem>\n\t</HStack>\n);\n\n// Renders a color dropdown's toggle as an `Item` if it is within an `ItemGroup`\n// or as a `Button` if it isn't e.g. the controls are being rendered in\n// a `ToolsPanel`.\nconst renderToggle =\n\t( settings ) =>\n\t( { onToggle, isOpen } ) => {\n\t\tconst {\n\t\t\tclearable,\n\t\t\tcolorValue,\n\t\t\tgradientValue,\n\t\t\tonColorChange,\n\t\t\tonGradientChange,\n\t\t\tlabel,\n\t\t} = settings;\n\t\tconst colorButtonRef = useRef( undefined );\n\n\t\tconst toggleProps = {\n\t\t\tonClick: onToggle,\n\t\t\tclassName: clsx(\n\t\t\t\t'block-editor-panel-color-gradient-settings__dropdown',\n\t\t\t\t{ 'is-open': isOpen }\n\t\t\t),\n\t\t\t'aria-expanded': isOpen,\n\t\t\tref: colorButtonRef,\n\t\t};\n\n\t\tconst clearValue = () => {\n\t\t\tif ( colorValue ) {\n\t\t\t\tonColorChange();\n\t\t\t} else if ( gradientValue ) {\n\t\t\t\tonGradientChange();\n\t\t\t}\n\t\t};\n\n\t\tconst value = colorValue ?? gradientValue;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button __next40pxDefaultSize { ...toggleProps }>\n\t\t\t\t\t<LabeledColorIndicator\n\t\t\t\t\t\tcolorValue={ value }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t\t{ clearable && value && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tlabel={ __( 'Reset' ) }\n\t\t\t\t\t\tclassName=\"block-editor-panel-color-gradient-settings__reset\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\ticon={ resetIcon }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tclearValue();\n\t\t\t\t\t\t\tif ( isOpen ) {\n\t\t\t\t\t\t\t\tonToggle();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Return focus to parent button\n\t\t\t\t\t\t\tcolorButtonRef.current?.focus();\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t};\n\n// Renders a collection of color controls as dropdowns. Depending upon the\n// context in which these dropdowns are being rendered, they may be wrapped\n// in an `ItemGroup` with each dropdown's toggle as an `Item`, or alternatively,\n// the may be individually wrapped in a `ToolsPanelItem` with the toggle as\n// a regular `Button`.\n//\n// For more context see: https://github.com/WordPress/gutenberg/pull/40084\nexport default function ColorGradientSettingsDropdown( {\n\tcolors,\n\tdisableCustomColors,\n\tdisableCustomGradients,\n\tenableAlpha,\n\tgradients,\n\tsettings,\n\t__experimentalIsRenderedInSidebar,\n\t...props\n} ) {\n\tlet popoverProps;\n\tif ( __experimentalIsRenderedInSidebar ) {\n\t\tpopoverProps = {\n\t\t\tplacement: 'left-start',\n\t\t\toffset: 36,\n\t\t\tshift: true,\n\t\t};\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ settings.map( ( setting, index ) => {\n\t\t\t\tconst controlProps = {\n\t\t\t\t\tclearable: false,\n\t\t\t\t\tcolorValue: setting.colorValue,\n\t\t\t\t\tcolors,\n\t\t\t\t\tdisableCustomColors,\n\t\t\t\t\tdisableCustomGradients,\n\t\t\t\t\tenableAlpha,\n\t\t\t\t\tgradientValue: setting.gradientValue,\n\t\t\t\t\tgradients,\n\t\t\t\t\tlabel: setting.label,\n\t\t\t\t\tonColorChange: setting.onColorChange,\n\t\t\t\t\tonGradientChange: setting.onGradientChange,\n\t\t\t\t\tshowTitle: false,\n\t\t\t\t\t__experimentalIsRenderedInSidebar,\n\t\t\t\t\t...setting,\n\t\t\t\t};\n\t\t\t\tconst toggleSettings = {\n\t\t\t\t\tclearable: setting.clearable,\n\t\t\t\t\tlabel: setting.label,\n\t\t\t\t\tcolorValue: setting.colorValue,\n\t\t\t\t\tgradientValue: setting.gradientValue,\n\t\t\t\t\tonColorChange: setting.onColorChange,\n\t\t\t\t\tonGradientChange: setting.onGradientChange,\n\t\t\t\t};\n\n\t\t\t\treturn (\n\t\t\t\t\tsetting && (\n\t\t\t\t\t\t// If not in an `ItemGroup` wrap the dropdown in a\n\t\t\t\t\t\t// `ToolsPanelItem`\n\t\t\t\t\t\t<WithToolsPanelItem\n\t\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t\tsetting={ setting }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\tpopoverProps={ popoverProps }\n\t\t\t\t\t\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__dropdown\"\n\t\t\t\t\t\t\t\trenderToggle={ renderToggle( toggleSettings ) }\n\t\t\t\t\t\t\t\trenderContent={ () => (\n\t\t\t\t\t\t\t\t\t<DropdownContentWrapper paddingSize=\"none\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"block-editor-panel-color-gradient-settings__dropdown-content\">\n\t\t\t\t\t\t\t\t\t\t\t<ColorGradientControl\n\t\t\t\t\t\t\t\t\t\t\t\t{ ...controlProps }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</DropdownContentWrapper>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</WithToolsPanelItem>\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalSpacer as Spacer,\n\t__experimentalToolsPanel as ToolsPanel,\n} from '@wordpress/components';\nimport { useRegistry } from '@wordpress/data';\nimport { useInstanceId } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport ColorGradientSettingsDropdown from './dropdown';\nimport useColorsAndGradientsPalettes from './use-multiple-origin-colors-and-gradients';\n\nconst colorsAndGradientKeys = [\n\t'colors',\n\t'disableCustomColors',\n\t'gradients',\n\t'disableCustomGradients',\n];\n\nexport const PanelColorGradientSettingsInner = ( {\n\tclassName,\n\tcolors,\n\tgradients,\n\tdisableCustomColors,\n\tdisableCustomGradients,\n\tchildren,\n\tsettings,\n\ttitle,\n\tshowTitle = true,\n\t__experimentalIsRenderedInSidebar,\n\tenableAlpha,\n} ) => {\n\tconst panelId = useInstanceId( PanelColorGradientSettingsInner );\n\tconst { batch } = useRegistry();\n\tif (\n\t\t( ! colors || colors.length === 0 ) &&\n\t\t( ! gradients || gradients.length === 0 ) &&\n\t\tdisableCustomColors &&\n\t\tdisableCustomGradients &&\n\t\tsettings?.every(\n\t\t\t( setting ) =>\n\t\t\t\t( ! setting.colors || setting.colors.length === 0 ) &&\n\t\t\t\t( ! setting.gradients || setting.gradients.length === 0 ) &&\n\t\t\t\t( setting.disableCustomColors === undefined ||\n\t\t\t\t\tsetting.disableCustomColors ) &&\n\t\t\t\t( setting.disableCustomGradients === undefined ||\n\t\t\t\t\tsetting.disableCustomGradients )\n\t\t)\n\t) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-panel-color-gradient-settings',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\tlabel={ showTitle ? title : undefined }\n\t\t\tresetAll={ () => {\n\t\t\t\tbatch( () => {\n\t\t\t\t\tsettings.forEach(\n\t\t\t\t\t\t( {\n\t\t\t\t\t\t\tcolorValue,\n\t\t\t\t\t\t\tgradientValue,\n\t\t\t\t\t\t\tonColorChange,\n\t\t\t\t\t\t\tonGradientChange,\n\t\t\t\t\t\t} ) => {\n\t\t\t\t\t\t\tif ( colorValue ) {\n\t\t\t\t\t\t\t\tonColorChange();\n\t\t\t\t\t\t\t} else if ( gradientValue ) {\n\t\t\t\t\t\t\t\tonGradientChange();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} }\n\t\t\tpanelId={ panelId }\n\t\t\t__experimentalFirstVisibleItemClass=\"first\"\n\t\t\t__experimentalLastVisibleItemClass=\"last\"\n\t\t>\n\t\t\t<ColorGradientSettingsDropdown\n\t\t\t\tsettings={ settings }\n\t\t\t\tpanelId={ panelId }\n\t\t\t\t{ ...{\n\t\t\t\t\tcolors,\n\t\t\t\t\tgradients,\n\t\t\t\t\tdisableCustomColors,\n\t\t\t\t\tdisableCustomGradients,\n\t\t\t\t\t__experimentalIsRenderedInSidebar,\n\t\t\t\t\tenableAlpha,\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t{ !! children && (\n\t\t\t\t<>\n\t\t\t\t\t<Spacer marginY={ 4 } /> { children }\n\t\t\t\t</>\n\t\t\t) }\n\t\t</ToolsPanel>\n\t);\n};\n\nconst PanelColorGradientSettingsSelect = ( props ) => {\n\tconst colorGradientSettings = useColorsAndGradientsPalettes();\n\treturn (\n\t\t<PanelColorGradientSettingsInner\n\t\t\t{ ...{ ...colorGradientSettings, ...props } }\n\t\t/>\n\t);\n};\n\nconst PanelColorGradientSettings = ( props ) => {\n\tif (\n\t\tcolorsAndGradientKeys.every( ( key ) => props.hasOwnProperty( key ) )\n\t) {\n\t\treturn <PanelColorGradientSettingsInner { ...props } />;\n\t}\n\treturn <PanelColorGradientSettingsSelect { ...props } />;\n};\n\nexport default PanelColorGradientSettings;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst aspectRatio = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M18.5 5.5h-13c-1.1 0-2 .9-2 2v9c0 1.1.9 2 2 2h13c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2zm.5 11c0 .3-.2.5-.5.5h-13c-.3 0-.5-.2-.5-.5v-9c0-.3.2-.5.5-.5h13c.3 0 .5.2.5.5v9zM6.5 12H8v-2h2V8.5H6.5V12zm9.5 2h-2v1.5h3.5V12H16v2z\" />\n\t</SVG>\n);\n\nexport default aspectRatio;\n","export const MIN_ZOOM = 100;\nexport const MAX_ZOOM = 300;\nexport const POPOVER_PROPS = {\n\tplacement: 'bottom-start',\n};\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useCallback, useMemo, useState } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { mediaEditKey } from '../../store/private-keys';\n\nconst messages = {\n\tcrop: __( 'Image cropped.' ),\n\trotate: __( 'Image rotated.' ),\n\tcropAndRotate: __( 'Image cropped and rotated.' ),\n};\n\nexport default function useSaveImage( {\n\tcrop,\n\trotation,\n\turl,\n\tid,\n\tonSaveImage,\n\tonFinishEditing,\n} ) {\n\tconst { createErrorNotice, createSuccessNotice } =\n\t\tuseDispatch( noticesStore );\n\tconst [ isInProgress, setIsInProgress ] = useState( false );\n\tconst { editMediaEntity } = useSelect( ( select ) => {\n\t\tconst settings = select( blockEditorStore ).getSettings();\n\t\treturn {\n\t\t\teditMediaEntity: settings?.[ mediaEditKey ],\n\t\t};\n\t}, [] );\n\n\tconst cancel = useCallback( () => {\n\t\tsetIsInProgress( false );\n\t\tonFinishEditing();\n\t}, [ onFinishEditing ] );\n\n\tconst apply = useCallback( async () => {\n\t\tif ( ! editMediaEntity ) {\n\t\t\tonFinishEditing();\n\t\t\tcreateErrorNotice(\n\t\t\t\t__( 'Sorry, you are not allowed to edit images on this site.' ),\n\t\t\t\t{\n\t\t\t\t\tid: 'image-editing-error',\n\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsInProgress( true );\n\n\t\tconst modifiers = [];\n\n\t\tif ( rotation > 0 ) {\n\t\t\tmodifiers.push( {\n\t\t\t\ttype: 'rotate',\n\t\t\t\targs: {\n\t\t\t\t\tangle: rotation,\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\n\t\t// The crop script may return some very small, sub-pixel values when the image was not cropped.\n\t\t// Crop only when the new size has changed by more than 0.1%.\n\t\tif ( crop.width < 99.9 || crop.height < 99.9 ) {\n\t\t\tmodifiers.push( {\n\t\t\t\ttype: 'crop',\n\t\t\t\targs: {\n\t\t\t\t\tleft: crop.x,\n\t\t\t\t\ttop: crop.y,\n\t\t\t\t\twidth: crop.width,\n\t\t\t\t\theight: crop.height,\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\n\t\tif ( modifiers.length === 0 ) {\n\t\t\t// No changes to apply.\n\t\t\tsetIsInProgress( false );\n\t\t\tonFinishEditing();\n\t\t\treturn;\n\t\t}\n\n\t\tconst modifierType =\n\t\t\tmodifiers.length === 1 ? modifiers[ 0 ].type : 'cropAndRotate';\n\n\t\ttry {\n\t\t\tconst savedImage = await editMediaEntity(\n\t\t\t\tid,\n\t\t\t\t{\n\t\t\t\t\tsrc: url,\n\t\t\t\t\tmodifiers,\n\t\t\t\t},\n\t\t\t\t{ throwOnError: true }\n\t\t\t);\n\n\t\t\tif ( savedImage ) {\n\t\t\t\tonSaveImage( {\n\t\t\t\t\tid: savedImage.id,\n\t\t\t\t\turl: savedImage.source_url,\n\t\t\t\t} );\n\n\t\t\t\tcreateSuccessNotice( messages[ modifierType ], {\n\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\tactions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __( 'Undo' ),\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tonSaveImage( {\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t} );\n\t\t\t}\n\t\t} catch ( error ) {\n\t\t\tcreateErrorNotice(\n\t\t\t\tsprintf(\n\t\t\t\t\t/* translators: %s: Error message. */\n\t\t\t\t\t__( 'Could not edit image. %s' ),\n\t\t\t\t\tstripHTML( error.message )\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\tid: 'image-editing-error',\n\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t}\n\t\t\t);\n\t\t} finally {\n\t\t\tsetIsInProgress( false );\n\t\t\tonFinishEditing();\n\t\t}\n\t}, [\n\t\tcrop,\n\t\trotation,\n\t\tid,\n\t\turl,\n\t\tonSaveImage,\n\t\tcreateErrorNotice,\n\t\tcreateSuccessNotice,\n\t\tonFinishEditing,\n\t\teditMediaEntity,\n\t] );\n\n\treturn useMemo(\n\t\t() => ( {\n\t\t\tisInProgress,\n\t\t\tapply,\n\t\t\tcancel,\n\t\t} ),\n\t\t[ isInProgress, apply, cancel ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { createContext, useContext, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useSaveImage from './use-save-image';\nimport useTransformImage from './use-transform-image';\n\nconst ImageEditingContext = createContext( {} );\n\nexport const useImageEditingContext = () => useContext( ImageEditingContext );\n\nexport default function ImageEditingProvider( {\n\tid,\n\turl,\n\tnaturalWidth,\n\tnaturalHeight,\n\tonFinishEditing,\n\tonSaveImage,\n\tchildren,\n} ) {\n\tconst transformImage = useTransformImage( {\n\t\turl,\n\t\tnaturalWidth,\n\t\tnaturalHeight,\n\t} );\n\n\tconst saveImage = useSaveImage( {\n\t\tid,\n\t\turl,\n\t\tonSaveImage,\n\t\tonFinishEditing,\n\t\t...transformImage,\n\t} );\n\n\tconst providerValue = useMemo(\n\t\t() => ( {\n\t\t\t...transformImage,\n\t\t\t...saveImage,\n\t\t} ),\n\t\t[ transformImage, saveImage ]\n\t);\n\n\treturn (\n\t\t<ImageEditingContext.Provider value={ providerValue }>\n\t\t\t{ children }\n\t\t</ImageEditingContext.Provider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useCallback, useMemo, useState } from '@wordpress/element';\nimport { applyFilters } from '@wordpress/hooks';\n\nexport default function useTransformImage( {\n\turl,\n\tnaturalWidth,\n\tnaturalHeight,\n} ) {\n\tconst [ editedUrl, setEditedUrl ] = useState();\n\tconst [ crop, setCrop ] = useState();\n\tconst [ position, setPosition ] = useState( { x: 0, y: 0 } );\n\tconst [ zoom, setZoom ] = useState( 100 );\n\tconst [ rotation, setRotation ] = useState( 0 );\n\tconst defaultAspect = naturalWidth / naturalHeight;\n\tconst [ aspect, setAspect ] = useState( defaultAspect );\n\n\tconst rotateClockwise = useCallback( () => {\n\t\tconst angle = ( rotation + 90 ) % 360;\n\n\t\tlet naturalAspectRatio = defaultAspect;\n\n\t\tif ( rotation % 180 === 90 ) {\n\t\t\tnaturalAspectRatio = 1 / defaultAspect;\n\t\t}\n\n\t\tif ( angle === 0 ) {\n\t\t\tsetEditedUrl();\n\t\t\tsetRotation( angle );\n\t\t\tsetAspect( defaultAspect );\n\t\t\tsetPosition( ( prevPosition ) => ( {\n\t\t\t\tx: -( prevPosition.y * naturalAspectRatio ),\n\t\t\t\ty: prevPosition.x * naturalAspectRatio,\n\t\t\t} ) );\n\t\t\treturn;\n\t\t}\n\n\t\tfunction editImage( event ) {\n\t\t\tconst canvas = document.createElement( 'canvas' );\n\n\t\t\tlet translateX = 0;\n\t\t\tlet translateY = 0;\n\n\t\t\tif ( angle % 180 ) {\n\t\t\t\tcanvas.width = event.target.height;\n\t\t\t\tcanvas.height = event.target.width;\n\t\t\t} else {\n\t\t\t\tcanvas.width = event.target.width;\n\t\t\t\tcanvas.height = event.target.height;\n\t\t\t}\n\n\t\t\tif ( angle === 90 || angle === 180 ) {\n\t\t\t\ttranslateX = canvas.width;\n\t\t\t}\n\n\t\t\tif ( angle === 270 || angle === 180 ) {\n\t\t\t\ttranslateY = canvas.height;\n\t\t\t}\n\n\t\t\tconst context = canvas.getContext( '2d' );\n\n\t\t\tcontext.translate( translateX, translateY );\n\t\t\tcontext.rotate( ( angle * Math.PI ) / 180 );\n\t\t\tcontext.drawImage( event.target, 0, 0 );\n\n\t\t\tcanvas.toBlob( ( blob ) => {\n\t\t\t\tsetEditedUrl( URL.createObjectURL( blob ) );\n\t\t\t\tsetRotation( angle );\n\t\t\t\tsetAspect( canvas.width / canvas.height );\n\t\t\t\tsetPosition( ( prevPosition ) => ( {\n\t\t\t\t\tx: -( prevPosition.y * naturalAspectRatio ),\n\t\t\t\t\ty: prevPosition.x * naturalAspectRatio,\n\t\t\t\t} ) );\n\t\t\t} );\n\t\t}\n\n\t\tconst el = new window.Image();\n\t\tel.src = url;\n\t\tel.onload = editImage;\n\n\t\tconst imgCrossOrigin = applyFilters(\n\t\t\t'media.crossOrigin',\n\t\t\tundefined,\n\t\t\turl\n\t\t);\n\t\tif ( typeof imgCrossOrigin === 'string' ) {\n\t\t\tel.crossOrigin = imgCrossOrigin;\n\t\t}\n\t}, [ rotation, defaultAspect, url ] );\n\n\treturn useMemo(\n\t\t() => ( {\n\t\t\teditedUrl,\n\t\t\tsetEditedUrl,\n\t\t\tcrop,\n\t\t\tsetCrop,\n\t\t\tposition,\n\t\t\tsetPosition,\n\t\t\tzoom,\n\t\t\tsetZoom,\n\t\t\trotation,\n\t\t\tsetRotation,\n\t\t\trotateClockwise,\n\t\t\taspect,\n\t\t\tsetAspect,\n\t\t\tdefaultAspect,\n\t\t} ),\n\t\t[\n\t\t\teditedUrl,\n\t\t\tcrop,\n\t\t\tposition,\n\t\t\tzoom,\n\t\t\trotation,\n\t\t\trotateClockwise,\n\t\t\taspect,\n\t\t\tdefaultAspect,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { check, aspectRatio as aspectRatioIcon } from '@wordpress/icons';\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\nimport { POPOVER_PROPS } from './constants';\nimport { useImageEditingContext } from './context';\n\nfunction AspectRatioGroup( {\n\taspectRatios,\n\tisDisabled,\n\tlabel,\n\tonClick,\n\tvalue,\n} ) {\n\treturn (\n\t\t<MenuGroup label={ label }>\n\t\t\t{ aspectRatios.map( ( { name, slug, ratio } ) => (\n\t\t\t\t<MenuItem\n\t\t\t\t\tkey={ slug }\n\t\t\t\t\tdisabled={ isDisabled }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tonClick( ratio );\n\t\t\t\t\t} }\n\t\t\t\t\trole=\"menuitemradio\"\n\t\t\t\t\tisSelected={ ratio === value }\n\t\t\t\t\ticon={ ratio === value ? check : undefined }\n\t\t\t\t>\n\t\t\t\t\t{ name }\n\t\t\t\t</MenuItem>\n\t\t\t) ) }\n\t\t</MenuGroup>\n\t);\n}\n\nexport function ratioToNumber( str ) {\n\t// TODO: support two-value aspect ratio?\n\t// https://css-tricks.com/almanac/properties/a/aspect-ratio/#aa-it-can-take-two-values\n\tconst [ a, b, ...rest ] = str.split( '/' ).map( Number );\n\tif (\n\t\ta <= 0 ||\n\t\tb <= 0 ||\n\t\tNumber.isNaN( a ) ||\n\t\tNumber.isNaN( b ) ||\n\t\trest.length\n\t) {\n\t\treturn NaN;\n\t}\n\treturn b ? a / b : a;\n}\n\nfunction presetRatioAsNumber( { ratio, ...rest } ) {\n\treturn {\n\t\tratio: ratioToNumber( ratio ),\n\t\t...rest,\n\t};\n}\n\nexport default function AspectRatioDropdown( { toggleProps } ) {\n\tconst { isInProgress, aspect, setAspect, defaultAspect } =\n\t\tuseImageEditingContext();\n\n\tconst [ defaultRatios, themeRatios, showDefaultRatios ] = useSettings(\n\t\t'dimensions.aspectRatios.default',\n\t\t'dimensions.aspectRatios.theme',\n\t\t'dimensions.defaultAspectRatios'\n\t);\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\ticon={ aspectRatioIcon }\n\t\t\tlabel={ __( 'Aspect Ratio' ) }\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\ttoggleProps={ toggleProps }\n\t\t>\n\t\t\t{ ( { onClose } ) => (\n\t\t\t\t<>\n\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\taspectRatios={ [\n\t\t\t\t\t\t\t// All ratios should be mirrored in AspectRatioTool in @wordpress/block-editor.\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tslug: 'original',\n\t\t\t\t\t\t\t\tname: __( 'Original' ),\n\t\t\t\t\t\t\t\tratio: defaultAspect,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...( showDefaultRatios\n\t\t\t\t\t\t\t\t? defaultRatios\n\t\t\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio === 1 )\n\t\t\t\t\t\t\t\t: [] ),\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t\t{ themeRatios?.length > 0 && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Theme' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ themeRatios }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showDefaultRatios && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Landscape' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ defaultRatios\n\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio > 1 ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showDefaultRatios && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Portrait' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ defaultRatios\n\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio < 1 ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Area, MediaSize, Point, Size } from './types'\n\n/**\n * Compute the dimension of the crop area based on media size,\n * aspect ratio and optionally rotation\n */\nexport function getCropSize(\n  mediaWidth: number,\n  mediaHeight: number,\n  containerWidth: number,\n  containerHeight: number,\n  aspect: number,\n  rotation = 0\n): Size {\n  const { width, height } = rotateSize(mediaWidth, mediaHeight, rotation)\n  const fittingWidth = Math.min(width, containerWidth)\n  const fittingHeight = Math.min(height, containerHeight)\n\n  if (fittingWidth > fittingHeight * aspect) {\n    return {\n      width: fittingHeight * aspect,\n      height: fittingHeight,\n    }\n  }\n\n  return {\n    width: fittingWidth,\n    height: fittingWidth / aspect,\n  }\n}\n\n/**\n * Compute media zoom.\n * We fit the media into the container with \"max-width: 100%; max-height: 100%;\"\n */\nexport function getMediaZoom(mediaSize: MediaSize) {\n  // Take the axis with more pixels to improve accuracy\n  return mediaSize.width > mediaSize.height\n    ? mediaSize.width / mediaSize.naturalWidth\n    : mediaSize.height / mediaSize.naturalHeight\n}\n\n/**\n * Ensure a new media position stays in the crop area.\n */\nexport function restrictPosition(\n  position: Point,\n  mediaSize: Size,\n  cropSize: Size,\n  zoom: number,\n  rotation = 0\n): Point {\n  const { width, height } = rotateSize(mediaSize.width, mediaSize.height, rotation)\n\n  return {\n    x: restrictPositionCoord(position.x, width, cropSize.width, zoom),\n    y: restrictPositionCoord(position.y, height, cropSize.height, zoom),\n  }\n}\n\nfunction restrictPositionCoord(\n  position: number,\n  mediaSize: number,\n  cropSize: number,\n  zoom: number\n): number {\n  const maxPosition = (mediaSize * zoom) / 2 - cropSize / 2\n\n  return clamp(position, -maxPosition, maxPosition)\n}\n\nexport function getDistanceBetweenPoints(pointA: Point, pointB: Point) {\n  return Math.sqrt(Math.pow(pointA.y - pointB.y, 2) + Math.pow(pointA.x - pointB.x, 2))\n}\n\nexport function getRotationBetweenPoints(pointA: Point, pointB: Point) {\n  return (Math.atan2(pointB.y - pointA.y, pointB.x - pointA.x) * 180) / Math.PI\n}\n\n/**\n * Compute the output cropped area of the media in percentages and pixels.\n * x/y are the top-left coordinates on the src media\n */\nexport function computeCroppedArea(\n  crop: Point,\n  mediaSize: MediaSize,\n  cropSize: Size,\n  aspect: number,\n  zoom: number,\n  rotation = 0,\n  restrictPosition = true\n): { croppedAreaPercentages: Area; croppedAreaPixels: Area } {\n  // if the media is rotated by the user, we cannot limit the position anymore\n  // as it might need to be negative.\n  const limitAreaFn = restrictPosition ? limitArea : noOp\n\n  const mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation)\n  const mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation)\n\n  // calculate the crop area in percentages\n  // in the rotated space\n  const croppedAreaPercentages = {\n    x: limitAreaFn(\n      100,\n      (((mediaBBoxSize.width - cropSize.width / zoom) / 2 - crop.x / zoom) / mediaBBoxSize.width) *\n        100\n    ),\n    y: limitAreaFn(\n      100,\n      (((mediaBBoxSize.height - cropSize.height / zoom) / 2 - crop.y / zoom) /\n        mediaBBoxSize.height) *\n        100\n    ),\n    width: limitAreaFn(100, ((cropSize.width / mediaBBoxSize.width) * 100) / zoom),\n    height: limitAreaFn(100, ((cropSize.height / mediaBBoxSize.height) * 100) / zoom),\n  }\n\n  // we compute the pixels size naively\n  const widthInPixels = Math.round(\n    limitAreaFn(\n      mediaNaturalBBoxSize.width,\n      (croppedAreaPercentages.width * mediaNaturalBBoxSize.width) / 100\n    )\n  )\n  const heightInPixels = Math.round(\n    limitAreaFn(\n      mediaNaturalBBoxSize.height,\n      (croppedAreaPercentages.height * mediaNaturalBBoxSize.height) / 100\n    )\n  )\n  const isImgWiderThanHigh = mediaNaturalBBoxSize.width >= mediaNaturalBBoxSize.height * aspect\n\n  // then we ensure the width and height exactly match the aspect (to avoid rounding approximations)\n  // if the media is wider than high, when zoom is 0, the crop height will be equals to image height\n  // thus we want to compute the width from the height and aspect for accuracy.\n  // Otherwise, we compute the height from width and aspect.\n  const sizePixels = isImgWiderThanHigh\n    ? {\n        width: Math.round(heightInPixels * aspect),\n        height: heightInPixels,\n      }\n    : {\n        width: widthInPixels,\n        height: Math.round(widthInPixels / aspect),\n      }\n\n  const croppedAreaPixels = {\n    ...sizePixels,\n    x: Math.round(\n      limitAreaFn(\n        mediaNaturalBBoxSize.width - sizePixels.width,\n        (croppedAreaPercentages.x * mediaNaturalBBoxSize.width) / 100\n      )\n    ),\n    y: Math.round(\n      limitAreaFn(\n        mediaNaturalBBoxSize.height - sizePixels.height,\n        (croppedAreaPercentages.y * mediaNaturalBBoxSize.height) / 100\n      )\n    ),\n  }\n\n  return { croppedAreaPercentages, croppedAreaPixels }\n}\n\n/**\n * Ensure the returned value is between 0 and max\n */\nfunction limitArea(max: number, value: number): number {\n  return Math.min(max, Math.max(0, value))\n}\n\nfunction noOp(_max: number, value: number) {\n  return value\n}\n\n/**\n * Compute crop and zoom from the croppedAreaPercentages.\n */\nexport function getInitialCropFromCroppedAreaPercentages(\n  croppedAreaPercentages: Area,\n  mediaSize: MediaSize,\n  rotation: number,\n  cropSize: Size,\n  minZoom: number,\n  maxZoom: number\n) {\n  const mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation)\n\n  // This is the inverse process of computeCroppedArea\n  const zoom = clamp(\n    (cropSize.width / mediaBBoxSize.width) * (100 / croppedAreaPercentages.width),\n    minZoom,\n    maxZoom\n  )\n\n  const crop = {\n    x:\n      (zoom * mediaBBoxSize.width) / 2 -\n      cropSize.width / 2 -\n      mediaBBoxSize.width * zoom * (croppedAreaPercentages.x / 100),\n    y:\n      (zoom * mediaBBoxSize.height) / 2 -\n      cropSize.height / 2 -\n      mediaBBoxSize.height * zoom * (croppedAreaPercentages.y / 100),\n  }\n\n  return { crop, zoom }\n}\n\n/**\n * Compute zoom from the croppedAreaPixels\n */\nfunction getZoomFromCroppedAreaPixels(\n  croppedAreaPixels: Area,\n  mediaSize: MediaSize,\n  cropSize: Size\n): number {\n  const mediaZoom = getMediaZoom(mediaSize)\n\n  return cropSize.height > cropSize.width\n    ? cropSize.height / (croppedAreaPixels.height * mediaZoom)\n    : cropSize.width / (croppedAreaPixels.width * mediaZoom)\n}\n\n/**\n * Compute crop and zoom from the croppedAreaPixels\n */\nexport function getInitialCropFromCroppedAreaPixels(\n  croppedAreaPixels: Area,\n  mediaSize: MediaSize,\n  rotation = 0,\n  cropSize: Size,\n  minZoom: number,\n  maxZoom: number\n): { crop: Point; zoom: number } {\n  const mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation)\n\n  const zoom = clamp(\n    getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize),\n    minZoom,\n    maxZoom\n  )\n\n  const cropZoom =\n    cropSize.height > cropSize.width\n      ? cropSize.height / croppedAreaPixels.height\n      : cropSize.width / croppedAreaPixels.width\n\n  const crop = {\n    x:\n      ((mediaNaturalBBoxSize.width - croppedAreaPixels.width) / 2 - croppedAreaPixels.x) * cropZoom,\n    y:\n      ((mediaNaturalBBoxSize.height - croppedAreaPixels.height) / 2 - croppedAreaPixels.y) *\n      cropZoom,\n  }\n  return { crop, zoom }\n}\n\n/**\n * Return the point that is the center of point a and b\n */\nexport function getCenter(a: Point, b: Point): Point {\n  return {\n    x: (b.x + a.x) / 2,\n    y: (b.y + a.y) / 2,\n  }\n}\n\nexport function getRadianAngle(degreeValue: number) {\n  return (degreeValue * Math.PI) / 180\n}\n\n/**\n * Returns the new bounding area of a rotated rectangle.\n */\nexport function rotateSize(width: number, height: number, rotation: number): Size {\n  const rotRad = getRadianAngle(rotation)\n\n  return {\n    width: Math.abs(Math.cos(rotRad) * width) + Math.abs(Math.sin(rotRad) * height),\n    height: Math.abs(Math.sin(rotRad) * width) + Math.abs(Math.cos(rotRad) * height),\n  }\n}\n\n/**\n * Clamp value between min and max\n */\nexport function clamp(value: number, min: number, max: number) {\n  return Math.min(Math.max(value, min), max)\n}\n\n/**\n * Combine multiple class names into a single string.\n */\nexport function classNames(...args: (boolean | string | number | undefined | void | null)[]) {\n  return args\n    .filter((value) => {\n      if (typeof value === 'string' && value.length > 0) {\n        return true\n      }\n\n      return false\n    })\n    .join(' ')\n    .trim()\n}\n","import * as React from 'react'\nimport normalizeWheel from 'normalize-wheel'\nimport { Area, MediaSize, Point, Size, VideoSrc } from './types'\nimport {\n  getCropSize,\n  restrictPosition,\n  getDistanceBetweenPoints,\n  getRotationBetweenPoints,\n  computeCroppedArea,\n  getCenter,\n  getInitialCropFromCroppedAreaPixels,\n  getInitialCropFromCroppedAreaPercentages,\n  classNames,\n  clamp,\n} from './helpers'\nimport cssStyles from './styles.css'\n\nexport type CropperProps = {\n  image?: string\n  video?: string | VideoSrc[]\n  transform?: string\n  crop: Point\n  zoom: number\n  rotation: number\n  aspect: number\n  minZoom: number\n  maxZoom: number\n  cropShape: 'rect' | 'round'\n  cropSize?: Size\n  objectFit?: 'contain' | 'cover' | 'horizontal-cover' | 'vertical-cover'\n  showGrid?: boolean\n  zoomSpeed: number\n  zoomWithScroll?: boolean\n  onCropChange: (location: Point) => void\n  onZoomChange?: (zoom: number) => void\n  onRotationChange?: (rotation: number) => void\n  onCropComplete?: (croppedArea: Area, croppedAreaPixels: Area) => void\n  onCropAreaChange?: (croppedArea: Area, croppedAreaPixels: Area) => void\n  onCropSizeChange?: (cropSize: Size) => void\n  onInteractionStart?: () => void\n  onInteractionEnd?: () => void\n  onMediaLoaded?: (mediaSize: MediaSize) => void\n  style: {\n    containerStyle?: React.CSSProperties\n    mediaStyle?: React.CSSProperties\n    cropAreaStyle?: React.CSSProperties\n  }\n  classes: {\n    containerClassName?: string\n    mediaClassName?: string\n    cropAreaClassName?: string\n  }\n  restrictPosition: boolean\n  mediaProps: React.ImgHTMLAttributes<HTMLElement> | React.VideoHTMLAttributes<HTMLElement>\n  disableAutomaticStylesInjection?: boolean\n  initialCroppedAreaPixels?: Area\n  initialCroppedAreaPercentages?: Area\n  onTouchRequest?: (e: React.TouchEvent<HTMLDivElement>) => boolean\n  onWheelRequest?: (e: WheelEvent) => boolean\n  setImageRef?: (ref: React.RefObject<HTMLImageElement>) => void\n  setVideoRef?: (ref: React.RefObject<HTMLVideoElement>) => void\n  setMediaSize?: (size: MediaSize) => void\n  setCropSize?: (size: Size) => void\n  nonce?: string\n}\n\ntype State = {\n  cropSize: Size | null\n  hasWheelJustStarted: boolean\n  mediaObjectFit: String | undefined\n}\n\nconst MIN_ZOOM = 1\nconst MAX_ZOOM = 3\n\ntype GestureEvent = UIEvent & {\n  rotation: number\n  scale: number\n  clientX: number\n  clientY: number\n}\n\nclass Cropper extends React.Component<CropperProps, State> {\n  static defaultProps = {\n    zoom: 1,\n    rotation: 0,\n    aspect: 4 / 3,\n    maxZoom: MAX_ZOOM,\n    minZoom: MIN_ZOOM,\n    cropShape: 'rect' as const,\n    objectFit: 'contain' as const,\n    showGrid: true,\n    style: {},\n    classes: {},\n    mediaProps: {},\n    zoomSpeed: 1,\n    restrictPosition: true,\n    zoomWithScroll: true,\n  }\n\n  imageRef: React.RefObject<HTMLImageElement> = React.createRef()\n  videoRef: React.RefObject<HTMLVideoElement> = React.createRef()\n  containerPosition: Point = { x: 0, y: 0 }\n  containerRef: HTMLDivElement | null = null\n  styleRef: HTMLStyleElement | null = null\n  containerRect: DOMRect | null = null\n  mediaSize: MediaSize = { width: 0, height: 0, naturalWidth: 0, naturalHeight: 0 }\n  dragStartPosition: Point = { x: 0, y: 0 }\n  dragStartCrop: Point = { x: 0, y: 0 }\n  gestureZoomStart = 0\n  gestureRotationStart = 0\n  isTouching = false\n  lastPinchDistance = 0\n  lastPinchRotation = 0\n  rafDragTimeout: number | null = null\n  rafPinchTimeout: number | null = null\n  wheelTimer: number | null = null\n  currentDoc: Document | null = typeof document !== 'undefined' ? document : null\n  currentWindow: Window | null = typeof window !== 'undefined' ? window : null\n  resizeObserver: ResizeObserver | null = null\n\n  state: State = {\n    cropSize: null,\n    hasWheelJustStarted: false,\n    mediaObjectFit: undefined,\n  }\n\n  componentDidMount() {\n    if (!this.currentDoc || !this.currentWindow) return\n    if (this.containerRef) {\n      if (this.containerRef.ownerDocument) {\n        this.currentDoc = this.containerRef.ownerDocument\n      }\n      if (this.currentDoc.defaultView) {\n        this.currentWindow = this.currentDoc.defaultView\n      }\n\n      this.initResizeObserver()\n      // only add window resize listener if ResizeObserver is not supported. Otherwise, it would be redundant\n      if (typeof window.ResizeObserver === 'undefined') {\n        this.currentWindow.addEventListener('resize', this.computeSizes)\n      }\n      this.props.zoomWithScroll &&\n        this.containerRef.addEventListener('wheel', this.onWheel, { passive: false })\n      this.containerRef.addEventListener('gesturestart', this.onGestureStart as EventListener)\n    }\n\n    this.currentDoc.addEventListener('scroll', this.onScroll)\n\n    if (!this.props.disableAutomaticStylesInjection) {\n      this.styleRef = this.currentDoc.createElement('style')\n      this.styleRef.setAttribute('type', 'text/css')\n      if (this.props.nonce) {\n        this.styleRef.setAttribute('nonce', this.props.nonce)\n      }\n      this.styleRef.innerHTML = cssStyles\n      this.currentDoc.head.appendChild(this.styleRef)\n    }\n\n    // when rendered via SSR, the image can already be loaded and its onLoad callback will never be called\n    if (this.imageRef.current && this.imageRef.current.complete) {\n      this.onMediaLoad()\n    }\n\n    // set image and video refs in the parent if the callbacks exist\n    if (this.props.setImageRef) {\n      this.props.setImageRef(this.imageRef)\n    }\n\n    if (this.props.setVideoRef) {\n      this.props.setVideoRef(this.videoRef)\n    }\n  }\n\n  componentWillUnmount() {\n    if (!this.currentDoc || !this.currentWindow) return\n    if (typeof window.ResizeObserver === 'undefined') {\n      this.currentWindow.removeEventListener('resize', this.computeSizes)\n    }\n    this.resizeObserver?.disconnect()\n    if (this.containerRef) {\n      this.containerRef.removeEventListener('gesturestart', this.preventZoomSafari)\n    }\n\n    if (this.styleRef) {\n      this.styleRef.parentNode?.removeChild(this.styleRef)\n    }\n\n    this.cleanEvents()\n    this.props.zoomWithScroll && this.clearScrollEvent()\n  }\n\n  componentDidUpdate(prevProps: CropperProps) {\n    if (prevProps.rotation !== this.props.rotation) {\n      this.computeSizes()\n      this.recomputeCropPosition()\n    } else if (prevProps.aspect !== this.props.aspect) {\n      this.computeSizes()\n    } else if (prevProps.objectFit !== this.props.objectFit) {\n      this.computeSizes()\n    } else if (prevProps.zoom !== this.props.zoom) {\n      this.recomputeCropPosition()\n    } else if (\n      prevProps.cropSize?.height !== this.props.cropSize?.height ||\n      prevProps.cropSize?.width !== this.props.cropSize?.width\n    ) {\n      this.computeSizes()\n    } else if (\n      prevProps.crop?.x !== this.props.crop?.x ||\n      prevProps.crop?.y !== this.props.crop?.y\n    ) {\n      this.emitCropAreaChange()\n    }\n    if (prevProps.zoomWithScroll !== this.props.zoomWithScroll && this.containerRef) {\n      this.props.zoomWithScroll\n        ? this.containerRef.addEventListener('wheel', this.onWheel, { passive: false })\n        : this.clearScrollEvent()\n    }\n    if (prevProps.video !== this.props.video) {\n      this.videoRef.current?.load()\n    }\n\n    const objectFit = this.getObjectFit()\n    if (objectFit !== this.state.mediaObjectFit) {\n      this.setState({ mediaObjectFit: objectFit }, this.computeSizes)\n    }\n  }\n\n  initResizeObserver = () => {\n    if (typeof window.ResizeObserver === 'undefined' || !this.containerRef) {\n      return\n    }\n    let isFirstResize = true\n    this.resizeObserver = new window.ResizeObserver((entries) => {\n      if (isFirstResize) {\n        isFirstResize = false // observe() is called on mount, we don't want to trigger a recompute on mount\n        return\n      }\n      this.computeSizes()\n    })\n    this.resizeObserver.observe(this.containerRef)\n  }\n\n  // this is to prevent Safari on iOS >= 10 to zoom the page\n  preventZoomSafari = (e: Event) => e.preventDefault()\n\n  cleanEvents = () => {\n    if (!this.currentDoc) return\n    this.currentDoc.removeEventListener('mousemove', this.onMouseMove)\n    this.currentDoc.removeEventListener('mouseup', this.onDragStopped)\n    this.currentDoc.removeEventListener('touchmove', this.onTouchMove)\n    this.currentDoc.removeEventListener('touchend', this.onDragStopped)\n    this.currentDoc.removeEventListener('gesturemove', this.onGestureMove as EventListener)\n    this.currentDoc.removeEventListener('gestureend', this.onGestureEnd as EventListener)\n    this.currentDoc.removeEventListener('scroll', this.onScroll)\n  }\n\n  clearScrollEvent = () => {\n    if (this.containerRef) this.containerRef.removeEventListener('wheel', this.onWheel)\n    if (this.wheelTimer) {\n      clearTimeout(this.wheelTimer)\n    }\n  }\n\n  onMediaLoad = () => {\n    const cropSize = this.computeSizes()\n\n    if (cropSize) {\n      this.emitCropData()\n      this.setInitialCrop(cropSize)\n    }\n\n    if (this.props.onMediaLoaded) {\n      this.props.onMediaLoaded(this.mediaSize)\n    }\n  }\n\n  setInitialCrop = (cropSize: Size) => {\n    if (this.props.initialCroppedAreaPercentages) {\n      const { crop, zoom } = getInitialCropFromCroppedAreaPercentages(\n        this.props.initialCroppedAreaPercentages,\n        this.mediaSize,\n        this.props.rotation,\n        cropSize,\n        this.props.minZoom,\n        this.props.maxZoom\n      )\n\n      this.props.onCropChange(crop)\n      this.props.onZoomChange && this.props.onZoomChange(zoom)\n    } else if (this.props.initialCroppedAreaPixels) {\n      const { crop, zoom } = getInitialCropFromCroppedAreaPixels(\n        this.props.initialCroppedAreaPixels,\n        this.mediaSize,\n        this.props.rotation,\n        cropSize,\n        this.props.minZoom,\n        this.props.maxZoom\n      )\n\n      this.props.onCropChange(crop)\n      this.props.onZoomChange && this.props.onZoomChange(zoom)\n    }\n  }\n\n  getAspect() {\n    const { cropSize, aspect } = this.props\n    if (cropSize) {\n      return cropSize.width / cropSize.height\n    }\n    return aspect\n  }\n\n  getObjectFit() {\n    if (this.props.objectFit === 'cover') {\n      const mediaRef = this.imageRef.current || this.videoRef.current\n\n      if (mediaRef && this.containerRef) {\n        this.containerRect = this.containerRef.getBoundingClientRect()\n        const containerAspect = this.containerRect.width / this.containerRect.height\n        const naturalWidth =\n          this.imageRef.current?.naturalWidth || this.videoRef.current?.videoWidth || 0\n        const naturalHeight =\n          this.imageRef.current?.naturalHeight || this.videoRef.current?.videoHeight || 0\n        const mediaAspect = naturalWidth / naturalHeight\n\n        return mediaAspect < containerAspect ? 'horizontal-cover' : 'vertical-cover'\n      }\n      return 'horizontal-cover'\n    }\n\n    return this.props.objectFit\n  }\n\n  computeSizes = () => {\n    const mediaRef = this.imageRef.current || this.videoRef.current\n\n    if (mediaRef && this.containerRef) {\n      this.containerRect = this.containerRef.getBoundingClientRect()\n      this.saveContainerPosition()\n      const containerAspect = this.containerRect.width / this.containerRect.height\n      const naturalWidth =\n        this.imageRef.current?.naturalWidth || this.videoRef.current?.videoWidth || 0\n      const naturalHeight =\n        this.imageRef.current?.naturalHeight || this.videoRef.current?.videoHeight || 0\n      const isMediaScaledDown =\n        mediaRef.offsetWidth < naturalWidth || mediaRef.offsetHeight < naturalHeight\n      const mediaAspect = naturalWidth / naturalHeight\n\n      // We do not rely on the offsetWidth/offsetHeight if the media is scaled down\n      // as the values they report are rounded. That will result in precision losses\n      // when calculating zoom. We use the fact that the media is positionned relative\n      // to the container. That allows us to use the container's dimensions\n      // and natural aspect ratio of the media to calculate accurate media size.\n      // However, for this to work, the container should not be rotated\n      let renderedMediaSize: Size\n\n      if (isMediaScaledDown) {\n        switch (this.state.mediaObjectFit) {\n          default:\n          case 'contain':\n            renderedMediaSize =\n              containerAspect > mediaAspect\n                ? {\n                    width: this.containerRect.height * mediaAspect,\n                    height: this.containerRect.height,\n                  }\n                : {\n                    width: this.containerRect.width,\n                    height: this.containerRect.width / mediaAspect,\n                  }\n            break\n          case 'horizontal-cover':\n            renderedMediaSize = {\n              width: this.containerRect.width,\n              height: this.containerRect.width / mediaAspect,\n            }\n            break\n          case 'vertical-cover':\n            renderedMediaSize = {\n              width: this.containerRect.height * mediaAspect,\n              height: this.containerRect.height,\n            }\n            break\n        }\n      } else {\n        renderedMediaSize = {\n          width: mediaRef.offsetWidth,\n          height: mediaRef.offsetHeight,\n        }\n      }\n\n      this.mediaSize = {\n        ...renderedMediaSize,\n        naturalWidth,\n        naturalHeight,\n      }\n\n      // set media size in the parent\n      if (this.props.setMediaSize) {\n        this.props.setMediaSize(this.mediaSize)\n      }\n\n      const cropSize = this.props.cropSize\n        ? this.props.cropSize\n        : getCropSize(\n            this.mediaSize.width,\n            this.mediaSize.height,\n            this.containerRect.width,\n            this.containerRect.height,\n            this.props.aspect,\n            this.props.rotation\n          )\n\n      if (\n        this.state.cropSize?.height !== cropSize.height ||\n        this.state.cropSize?.width !== cropSize.width\n      ) {\n        this.props.onCropSizeChange && this.props.onCropSizeChange(cropSize)\n      }\n      this.setState({ cropSize }, this.recomputeCropPosition)\n      // pass crop size to parent\n      if (this.props.setCropSize) {\n        this.props.setCropSize(cropSize)\n      }\n\n      return cropSize\n    }\n  }\n\n  saveContainerPosition = () => {\n    if (this.containerRef) {\n      const bounds = this.containerRef.getBoundingClientRect()\n      this.containerPosition = { x: bounds.left, y: bounds.top }\n    }\n  }\n\n  static getMousePoint = (e: MouseEvent | React.MouseEvent | GestureEvent) => ({\n    x: Number(e.clientX),\n    y: Number(e.clientY),\n  })\n\n  static getTouchPoint = (touch: Touch | React.Touch) => ({\n    x: Number(touch.clientX),\n    y: Number(touch.clientY),\n  })\n\n  onMouseDown = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (!this.currentDoc) return\n    e.preventDefault()\n    this.currentDoc.addEventListener('mousemove', this.onMouseMove)\n    this.currentDoc.addEventListener('mouseup', this.onDragStopped)\n    this.saveContainerPosition()\n    this.onDragStart(Cropper.getMousePoint(e))\n  }\n\n  onMouseMove = (e: MouseEvent) => this.onDrag(Cropper.getMousePoint(e))\n\n  onScroll = (e: Event) => {\n    if (!this.currentDoc) return\n    e.preventDefault()\n    this.saveContainerPosition()\n  }\n\n  onTouchStart = (e: React.TouchEvent<HTMLDivElement>) => {\n    if (!this.currentDoc) return\n    this.isTouching = true\n    if (this.props.onTouchRequest && !this.props.onTouchRequest(e)) {\n      return\n    }\n\n    this.currentDoc.addEventListener('touchmove', this.onTouchMove, { passive: false }) // iOS 11 now defaults to passive: true\n    this.currentDoc.addEventListener('touchend', this.onDragStopped)\n\n    this.saveContainerPosition()\n\n    if (e.touches.length === 2) {\n      this.onPinchStart(e)\n    } else if (e.touches.length === 1) {\n      this.onDragStart(Cropper.getTouchPoint(e.touches[0]))\n    }\n  }\n\n  onTouchMove = (e: TouchEvent) => {\n    // Prevent whole page from scrolling on iOS.\n    e.preventDefault()\n    if (e.touches.length === 2) {\n      this.onPinchMove(e)\n    } else if (e.touches.length === 1) {\n      this.onDrag(Cropper.getTouchPoint(e.touches[0]))\n    }\n  }\n\n  onGestureStart = (e: GestureEvent) => {\n    if (!this.currentDoc) return\n    e.preventDefault()\n    this.currentDoc.addEventListener('gesturechange', this.onGestureMove as EventListener)\n    this.currentDoc.addEventListener('gestureend', this.onGestureEnd as EventListener)\n    this.gestureZoomStart = this.props.zoom\n    this.gestureRotationStart = this.props.rotation\n  }\n\n  onGestureMove = (e: GestureEvent) => {\n    e.preventDefault()\n    if (this.isTouching) {\n      // this is to avoid conflict between gesture and touch events\n      return\n    }\n\n    const point = Cropper.getMousePoint(e)\n    const newZoom = this.gestureZoomStart - 1 + e.scale\n    this.setNewZoom(newZoom, point, { shouldUpdatePosition: true })\n    if (this.props.onRotationChange) {\n      const newRotation = this.gestureRotationStart + e.rotation\n      this.props.onRotationChange(newRotation)\n    }\n  }\n\n  onGestureEnd = (e: GestureEvent) => {\n    this.cleanEvents()\n  }\n\n  onDragStart = ({ x, y }: Point) => {\n    this.dragStartPosition = { x, y }\n    this.dragStartCrop = { ...this.props.crop }\n    this.props.onInteractionStart?.()\n  }\n\n  onDrag = ({ x, y }: Point) => {\n    if (!this.currentWindow) return\n    if (this.rafDragTimeout) this.currentWindow.cancelAnimationFrame(this.rafDragTimeout)\n\n    this.rafDragTimeout = this.currentWindow.requestAnimationFrame(() => {\n      if (!this.state.cropSize) return\n      if (x === undefined || y === undefined) return\n      const offsetX = x - this.dragStartPosition.x\n      const offsetY = y - this.dragStartPosition.y\n      const requestedPosition = {\n        x: this.dragStartCrop.x + offsetX,\n        y: this.dragStartCrop.y + offsetY,\n      }\n\n      const newPosition = this.props.restrictPosition\n        ? restrictPosition(\n            requestedPosition,\n            this.mediaSize,\n            this.state.cropSize,\n            this.props.zoom,\n            this.props.rotation\n          )\n        : requestedPosition\n      this.props.onCropChange(newPosition)\n    })\n  }\n\n  onDragStopped = () => {\n    this.isTouching = false\n    this.cleanEvents()\n    this.emitCropData()\n    this.props.onInteractionEnd?.()\n  }\n\n  onPinchStart(e: React.TouchEvent<HTMLDivElement>) {\n    const pointA = Cropper.getTouchPoint(e.touches[0])\n    const pointB = Cropper.getTouchPoint(e.touches[1])\n    this.lastPinchDistance = getDistanceBetweenPoints(pointA, pointB)\n    this.lastPinchRotation = getRotationBetweenPoints(pointA, pointB)\n    this.onDragStart(getCenter(pointA, pointB))\n  }\n\n  onPinchMove(e: TouchEvent) {\n    if (!this.currentDoc || !this.currentWindow) return\n    const pointA = Cropper.getTouchPoint(e.touches[0])\n    const pointB = Cropper.getTouchPoint(e.touches[1])\n    const center = getCenter(pointA, pointB)\n    this.onDrag(center)\n\n    if (this.rafPinchTimeout) this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout)\n    this.rafPinchTimeout = this.currentWindow.requestAnimationFrame(() => {\n      const distance = getDistanceBetweenPoints(pointA, pointB)\n      const newZoom = this.props.zoom * (distance / this.lastPinchDistance)\n      this.setNewZoom(newZoom, center, { shouldUpdatePosition: false })\n      this.lastPinchDistance = distance\n\n      const rotation = getRotationBetweenPoints(pointA, pointB)\n      const newRotation = this.props.rotation + (rotation - this.lastPinchRotation)\n      this.props.onRotationChange && this.props.onRotationChange(newRotation)\n      this.lastPinchRotation = rotation\n    })\n  }\n\n  onWheel = (e: WheelEvent) => {\n    if (!this.currentWindow) return\n    if (this.props.onWheelRequest && !this.props.onWheelRequest(e)) {\n      return\n    }\n\n    e.preventDefault()\n    const point = Cropper.getMousePoint(e)\n    const { pixelY } = normalizeWheel(e)\n    const newZoom = this.props.zoom - (pixelY * this.props.zoomSpeed) / 200\n    this.setNewZoom(newZoom, point, { shouldUpdatePosition: true })\n\n    if (!this.state.hasWheelJustStarted) {\n      this.setState({ hasWheelJustStarted: true }, () => this.props.onInteractionStart?.())\n    }\n\n    if (this.wheelTimer) {\n      clearTimeout(this.wheelTimer)\n    }\n    this.wheelTimer = this.currentWindow.setTimeout(\n      () => this.setState({ hasWheelJustStarted: false }, () => this.props.onInteractionEnd?.()),\n      250\n    )\n  }\n\n  getPointOnContainer = ({ x, y }: Point, containerTopLeft: Point): Point => {\n    if (!this.containerRect) {\n      throw new Error('The Cropper is not mounted')\n    }\n    return {\n      x: this.containerRect.width / 2 - (x - containerTopLeft.x),\n      y: this.containerRect.height / 2 - (y - containerTopLeft.y),\n    }\n  }\n\n  getPointOnMedia = ({ x, y }: Point) => {\n    const { crop, zoom } = this.props\n    return {\n      x: (x + crop.x) / zoom,\n      y: (y + crop.y) / zoom,\n    }\n  }\n\n  setNewZoom = (zoom: number, point: Point, { shouldUpdatePosition = true } = {}) => {\n    if (!this.state.cropSize || !this.props.onZoomChange) return\n\n    const newZoom = clamp(zoom, this.props.minZoom, this.props.maxZoom)\n\n    if (shouldUpdatePosition) {\n      const zoomPoint = this.getPointOnContainer(point, this.containerPosition)\n      const zoomTarget = this.getPointOnMedia(zoomPoint)\n      const requestedPosition = {\n        x: zoomTarget.x * newZoom - zoomPoint.x,\n        y: zoomTarget.y * newZoom - zoomPoint.y,\n      }\n\n      const newPosition = this.props.restrictPosition\n        ? restrictPosition(\n            requestedPosition,\n            this.mediaSize,\n            this.state.cropSize,\n            newZoom,\n            this.props.rotation\n          )\n        : requestedPosition\n\n      this.props.onCropChange(newPosition)\n    }\n    this.props.onZoomChange(newZoom)\n  }\n\n  getCropData = () => {\n    if (!this.state.cropSize) {\n      return null\n    }\n\n    // this is to ensure the crop is correctly restricted after a zoom back (https://github.com/ValentinH/react-easy-crop/issues/6)\n    const restrictedPosition = this.props.restrictPosition\n      ? restrictPosition(\n          this.props.crop,\n          this.mediaSize,\n          this.state.cropSize,\n          this.props.zoom,\n          this.props.rotation\n        )\n      : this.props.crop\n    return computeCroppedArea(\n      restrictedPosition,\n      this.mediaSize,\n      this.state.cropSize,\n      this.getAspect(),\n      this.props.zoom,\n      this.props.rotation,\n      this.props.restrictPosition\n    )\n  }\n\n  emitCropData = () => {\n    const cropData = this.getCropData()\n    if (!cropData) return\n\n    const { croppedAreaPercentages, croppedAreaPixels } = cropData\n    if (this.props.onCropComplete) {\n      this.props.onCropComplete(croppedAreaPercentages, croppedAreaPixels)\n    }\n\n    if (this.props.onCropAreaChange) {\n      this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels)\n    }\n  }\n\n  emitCropAreaChange = () => {\n    const cropData = this.getCropData()\n    if (!cropData) return\n\n    const { croppedAreaPercentages, croppedAreaPixels } = cropData\n    if (this.props.onCropAreaChange) {\n      this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels)\n    }\n  }\n\n  recomputeCropPosition = () => {\n    if (!this.state.cropSize) return\n\n    const newPosition = this.props.restrictPosition\n      ? restrictPosition(\n          this.props.crop,\n          this.mediaSize,\n          this.state.cropSize,\n          this.props.zoom,\n          this.props.rotation\n        )\n      : this.props.crop\n\n    this.props.onCropChange(newPosition)\n    this.emitCropData()\n  }\n\n  render() {\n    const {\n      image,\n      video,\n      mediaProps,\n      transform,\n      crop: { x, y },\n      rotation,\n      zoom,\n      cropShape,\n      showGrid,\n      style: { containerStyle, cropAreaStyle, mediaStyle },\n      classes: { containerClassName, cropAreaClassName, mediaClassName },\n    } = this.props\n\n    const objectFit = this.state.mediaObjectFit\n\n    return (\n      <div\n        onMouseDown={this.onMouseDown}\n        onTouchStart={this.onTouchStart}\n        ref={(el) => (this.containerRef = el)}\n        data-testid=\"container\"\n        style={containerStyle}\n        className={classNames('reactEasyCrop_Container', containerClassName)}\n      >\n        {image ? (\n          <img\n            alt=\"\"\n            className={classNames(\n              'reactEasyCrop_Image',\n              objectFit === 'contain' && 'reactEasyCrop_Contain',\n              objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal',\n              objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical',\n              mediaClassName\n            )}\n            {...(mediaProps as React.ImgHTMLAttributes<HTMLElement>)}\n            src={image}\n            ref={this.imageRef}\n            style={{\n              ...mediaStyle,\n              transform:\n                transform || `translate(${x}px, ${y}px) rotate(${rotation}deg) scale(${zoom})`,\n            }}\n            onLoad={this.onMediaLoad}\n          />\n        ) : (\n          video && (\n            <video\n              autoPlay\n              loop\n              muted={true}\n              className={classNames(\n                'reactEasyCrop_Video',\n                objectFit === 'contain' && 'reactEasyCrop_Contain',\n                objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal',\n                objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical',\n                mediaClassName\n              )}\n              {...mediaProps}\n              ref={this.videoRef}\n              onLoadedMetadata={this.onMediaLoad}\n              style={{\n                ...mediaStyle,\n                transform:\n                  transform || `translate(${x}px, ${y}px) rotate(${rotation}deg) scale(${zoom})`,\n              }}\n              controls={false}\n            >\n              {(Array.isArray(video) ? video : [{ src: video }]).map((item) => (\n                <source key={item.src} {...item} />\n              ))}\n            </video>\n          )\n        )}\n        {this.state.cropSize && (\n          <div\n            style={{\n              ...cropAreaStyle,\n              width: this.state.cropSize.width,\n              height: this.state.cropSize.height,\n            }}\n            data-testid=\"cropper\"\n            className={classNames(\n              'reactEasyCrop_CropArea',\n              cropShape === 'round' && 'reactEasyCrop_CropAreaRound',\n              showGrid && 'reactEasyCrop_CropAreaGrid',\n              cropAreaClassName\n            )}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default Cropper\n","/**\n * External dependencies\n */\nimport Cropper from 'react-easy-crop';\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { Spinner } from '@wordpress/components';\nimport { useResizeObserver } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { MIN_ZOOM, MAX_ZOOM } from './constants';\n\nimport { useImageEditingContext } from './context';\n\nexport default function ImageCropper( {\n\turl,\n\twidth,\n\theight,\n\tnaturalHeight,\n\tnaturalWidth,\n\tborderProps,\n} ) {\n\tconst {\n\t\tisInProgress,\n\t\teditedUrl,\n\t\tposition,\n\t\tzoom,\n\t\taspect,\n\t\tsetPosition,\n\t\tsetCrop,\n\t\tsetZoom,\n\t\trotation,\n\t} = useImageEditingContext();\n\tconst [ contentResizeListener, { width: clientWidth } ] =\n\t\tuseResizeObserver();\n\n\tlet editedHeight = height || ( clientWidth * naturalHeight ) / naturalWidth;\n\n\tif ( rotation % 180 === 90 ) {\n\t\teditedHeight = ( clientWidth * naturalWidth ) / naturalHeight;\n\t}\n\n\tconst area = (\n\t\t<div\n\t\t\tclassName={ clsx(\n\t\t\t\t'wp-block-image__crop-area',\n\t\t\t\tborderProps?.className,\n\t\t\t\t{\n\t\t\t\t\t'is-applying': isInProgress,\n\t\t\t\t}\n\t\t\t) }\n\t\t\tstyle={ {\n\t\t\t\t...borderProps?.style,\n\t\t\t\twidth: width || clientWidth,\n\t\t\t\theight: editedHeight,\n\t\t\t} }\n\t\t>\n\t\t\t<Cropper\n\t\t\t\timage={ editedUrl || url }\n\t\t\t\tdisabled={ isInProgress }\n\t\t\t\tminZoom={ MIN_ZOOM / 100 }\n\t\t\t\tmaxZoom={ MAX_ZOOM / 100 }\n\t\t\t\tcrop={ position }\n\t\t\t\tzoom={ zoom / 100 }\n\t\t\t\taspect={ aspect }\n\t\t\t\tonCropChange={ ( pos ) => {\n\t\t\t\t\tsetPosition( pos );\n\t\t\t\t} }\n\t\t\t\tonCropComplete={ ( newCropPercent ) => {\n\t\t\t\t\tsetCrop( newCropPercent );\n\t\t\t\t} }\n\t\t\t\tonZoomChange={ ( newZoom ) => {\n\t\t\t\t\tsetZoom( newZoom * 100 );\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t{ isInProgress && <Spinner /> }\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ contentResizeListener }\n\t\t\t{ area }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst search = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z\" />\n\t</SVG>\n);\n\nexport default search;\n","/**\n * WordPress dependencies\n */\nimport {\n\tToolbarButton,\n\tRangeControl,\n\tDropdown,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { search } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { MIN_ZOOM, MAX_ZOOM, POPOVER_PROPS } from './constants';\nimport { useImageEditingContext } from './context';\n\nexport default function ZoomDropdown() {\n\tconst { isInProgress, zoom, setZoom } = useImageEditingContext();\n\treturn (\n\t\t<Dropdown\n\t\t\tcontentClassName=\"wp-block-image__zoom\"\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ search }\n\t\t\t\t\tlabel={ __( 'Zoom' ) }\n\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\tdisabled={ isInProgress }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\trenderContent={ () => (\n\t\t\t\t<DropdownContentWrapper paddingSize=\"medium\">\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Zoom' ) }\n\t\t\t\t\t\tmin={ MIN_ZOOM }\n\t\t\t\t\t\tmax={ MAX_ZOOM }\n\t\t\t\t\t\tvalue={ Math.round( zoom ) }\n\t\t\t\t\t\tonChange={ setZoom }\n\t\t\t\t\t/>\n\t\t\t\t</DropdownContentWrapper>\n\t\t\t) }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst rotateRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M15.1 4.8l-3-2.5V4c-4.4 0-8 3.6-8 8 0 3.7 2.5 6.9 6 7.7.3.1.6.1 1 .2l.2-1.5c-.4 0-.7-.1-1.1-.2l-.1.2v-.2c-2.6-.8-4.5-3.3-4.5-6.2 0-3.6 2.9-6.5 6.5-6.5v1.8l3-2.5zM20 11c-.2-1.4-.7-2.7-1.6-3.8l-1.2.8c.7.9 1.1 2 1.3 3.1L20 11zm-1.5 1.8c-.1.5-.2 1.1-.4 1.6s-.5 1-.8 1.5l1.2.9c.4-.5.8-1.1 1-1.8s.5-1.3.5-2l-1.5-.2zm-5.6 5.6l.2 1.5c1.4-.2 2.7-.7 3.8-1.6l-.9-1.1c-.9.7-2 1.1-3.1 1.2z\" />\n\t</SVG>\n);\n\nexport default rotateRight;\n","/**\n * WordPress dependencies\n */\n\nimport { ToolbarButton } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { rotateRight as rotateRightIcon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { useImageEditingContext } from './context';\n\nexport default function RotationButton() {\n\tconst { isInProgress, rotateClockwise } = useImageEditingContext();\n\treturn (\n\t\t<ToolbarButton\n\t\t\ticon={ rotateRightIcon }\n\t\t\tlabel={ __( 'Rotate' ) }\n\t\t\tonClick={ rotateClockwise }\n\t\t\tdisabled={ isInProgress }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { ToolbarButton } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useImageEditingContext } from './context';\n\nexport default function FormControls() {\n\tconst { isInProgress, apply, cancel } = useImageEditingContext();\n\treturn (\n\t\t<>\n\t\t\t<ToolbarButton onClick={ apply } disabled={ isInProgress }>\n\t\t\t\t{ __( 'Apply' ) }\n\t\t\t</ToolbarButton>\n\t\t\t<ToolbarButton onClick={ cancel }>{ __( 'Cancel' ) }</ToolbarButton>\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { ToolbarGroup, ToolbarItem } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport AspectRatioDropdown from './aspect-ratio-dropdown';\nimport BlockControls from '../block-controls';\nimport ImageEditingProvider from './context';\nimport Cropper from './cropper';\nimport ZoomDropdown from './zoom-dropdown';\nimport RotationButton from './rotation-button';\nimport FormControls from './form-controls';\n\nexport default function ImageEditor( {\n\tid,\n\turl,\n\twidth,\n\theight,\n\tnaturalHeight,\n\tnaturalWidth,\n\tonSaveImage,\n\tonFinishEditing,\n\tborderProps,\n} ) {\n\treturn (\n\t\t<ImageEditingProvider\n\t\t\tid={ id }\n\t\t\turl={ url }\n\t\t\tnaturalWidth={ naturalWidth }\n\t\t\tnaturalHeight={ naturalHeight }\n\t\t\tonSaveImage={ onSaveImage }\n\t\t\tonFinishEditing={ onFinishEditing }\n\t\t>\n\t\t\t<Cropper\n\t\t\t\tborderProps={ borderProps }\n\t\t\t\turl={ url }\n\t\t\t\twidth={ width }\n\t\t\t\theight={ height }\n\t\t\t\tnaturalHeight={ naturalHeight }\n\t\t\t\tnaturalWidth={ naturalWidth }\n\t\t\t/>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ZoomDropdown />\n\t\t\t\t\t<ToolbarItem>\n\t\t\t\t\t\t{ ( toggleProps ) => (\n\t\t\t\t\t\t\t<AspectRatioDropdown toggleProps={ toggleProps } />\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ToolbarItem>\n\t\t\t\t\t<RotationButton />\n\t\t\t\t</ToolbarGroup>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<FormControls />\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t</ImageEditingProvider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tSelectControl,\n\t__experimentalNumberControl as NumberControl,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n} from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useDimensionHandler from './use-dimension-handler';\n\nconst IMAGE_SIZE_PRESETS = [ 25, 50, 75, 100 ];\nconst noop = () => {};\n\n/**\n * Get scaled width and height for the given scale.\n *\n * @param {number} scale       The scale to get the scaled width and height for.\n * @param {number} imageWidth  The image width.\n * @param {number} imageHeight The image height.\n *\n * @return {Object} The scaled width and height.\n */\nfunction getScaledWidthAndHeight( scale, imageWidth, imageHeight ) {\n\tconst scaledWidth = Math.round( imageWidth * ( scale / 100 ) );\n\tconst scaledHeight = Math.round( imageHeight * ( scale / 100 ) );\n\n\treturn {\n\t\tscaledWidth,\n\t\tscaledHeight,\n\t};\n}\n\nexport default function ImageSizeControl( {\n\timageSizeHelp,\n\timageWidth,\n\timageHeight,\n\timageSizeOptions = [],\n\tisResizable = true,\n\tslug,\n\twidth,\n\theight,\n\tonChange,\n\tonChangeImage = noop,\n} ) {\n\tconst { currentHeight, currentWidth, updateDimension, updateDimensions } =\n\t\tuseDimensionHandler( height, width, imageHeight, imageWidth, onChange );\n\n\t/**\n\t * Updates the dimensions for the given scale.\n\t * Handler for toggle group control change.\n\t *\n\t * @param {number} scale The scale to update the dimensions for.\n\t */\n\tconst handleUpdateDimensions = ( scale ) => {\n\t\tif ( undefined === scale ) {\n\t\t\tupdateDimensions();\n\t\t\treturn;\n\t\t}\n\n\t\tconst { scaledWidth, scaledHeight } = getScaledWidthAndHeight(\n\t\t\tscale,\n\t\t\timageWidth,\n\t\t\timageHeight\n\t\t);\n\n\t\tupdateDimensions( scaledHeight, scaledWidth );\n\t};\n\n\t/**\n\t * Add the stored image preset value to toggle group control.\n\t */\n\tconst selectedValue = IMAGE_SIZE_PRESETS.find( ( scale ) => {\n\t\tconst { scaledWidth, scaledHeight } = getScaledWidthAndHeight(\n\t\t\tscale,\n\t\t\timageWidth,\n\t\t\timageHeight\n\t\t);\n\n\t\treturn currentWidth === scaledWidth && currentHeight === scaledHeight;\n\t} );\n\n\treturn (\n\t\t<VStack className=\"block-editor-image-size-control\" spacing=\"4\">\n\t\t\t{ imageSizeOptions && imageSizeOptions.length > 0 && (\n\t\t\t\t<SelectControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Resolution' ) }\n\t\t\t\t\tvalue={ slug }\n\t\t\t\t\toptions={ imageSizeOptions }\n\t\t\t\t\tonChange={ onChangeImage }\n\t\t\t\t\thelp={ imageSizeHelp }\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ isResizable && (\n\t\t\t\t<>\n\t\t\t\t\t<HStack align=\"baseline\" spacing=\"4\">\n\t\t\t\t\t\t<NumberControl\n\t\t\t\t\t\t\tlabel={ __( 'Width' ) }\n\t\t\t\t\t\t\tvalue={ currentWidth }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tupdateDimension( 'width', value )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<NumberControl\n\t\t\t\t\t\t\tlabel={ __( 'Height' ) }\n\t\t\t\t\t\t\tvalue={ currentHeight }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tupdateDimension( 'height', value )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</HStack>\n\t\t\t\t\t<ToggleGroupControl\n\t\t\t\t\t\tlabel={ __( 'Image size presets' ) }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\tonChange={ handleUpdateDimensions }\n\t\t\t\t\t\tvalue={ selectedValue }\n\t\t\t\t\t\tisBlock\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t>\n\t\t\t\t\t\t{ IMAGE_SIZE_PRESETS.map( ( scale ) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\t\t\t\tkey={ scale }\n\t\t\t\t\t\t\t\t\tvalue={ scale }\n\t\t\t\t\t\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t\t\t\t\t\t/* translators: %d: Percentage value. */\n\t\t\t\t\t\t\t\t\t\t__( '%d%%' ),\n\t\t\t\t\t\t\t\t\t\tscale\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t</ToggleGroupControl>\n\t\t\t\t</>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\n\nexport default function useDimensionHandler(\n\tcustomHeight,\n\tcustomWidth,\n\tdefaultHeight,\n\tdefaultWidth,\n\tonChange\n) {\n\tconst [ currentWidth, setCurrentWidth ] = useState(\n\t\tcustomWidth ?? defaultWidth ?? ''\n\t);\n\tconst [ currentHeight, setCurrentHeight ] = useState(\n\t\tcustomHeight ?? defaultHeight ?? ''\n\t);\n\n\t// When an image is first inserted, the default dimensions are initially\n\t// undefined. This effect updates the dimensions when the default values\n\t// come through.\n\tuseEffect( () => {\n\t\tif ( customWidth === undefined && defaultWidth !== undefined ) {\n\t\t\tsetCurrentWidth( defaultWidth );\n\t\t}\n\t\tif ( customHeight === undefined && defaultHeight !== undefined ) {\n\t\t\tsetCurrentHeight( defaultHeight );\n\t\t}\n\t}, [ defaultWidth, defaultHeight ] );\n\n\t// If custom values change, it means an outsider has resized the image using some other method (eg resize box)\n\t// this keeps track of these values too. We need to parse before comparing; custom values can be strings.\n\tuseEffect( () => {\n\t\tif (\n\t\t\tcustomWidth !== undefined &&\n\t\t\tNumber.parseInt( customWidth ) !== Number.parseInt( currentWidth )\n\t\t) {\n\t\t\tsetCurrentWidth( customWidth );\n\t\t}\n\t\tif (\n\t\t\tcustomHeight !== undefined &&\n\t\t\tNumber.parseInt( customHeight ) !== Number.parseInt( currentHeight )\n\t\t) {\n\t\t\tsetCurrentHeight( customHeight );\n\t\t}\n\t}, [ customWidth, customHeight ] );\n\n\tconst updateDimension = ( dimension, value ) => {\n\t\tconst parsedValue = value === '' ? undefined : parseInt( value, 10 );\n\t\tif ( dimension === 'width' ) {\n\t\t\tsetCurrentWidth( parsedValue );\n\t\t} else {\n\t\t\tsetCurrentHeight( parsedValue );\n\t\t}\n\t\tonChange( {\n\t\t\t[ dimension ]: parsedValue,\n\t\t} );\n\t};\n\n\tconst updateDimensions = ( nextHeight, nextWidth ) => {\n\t\tsetCurrentHeight( nextHeight ?? defaultHeight );\n\t\tsetCurrentWidth( nextWidth ?? defaultWidth );\n\t\tonChange( { height: nextHeight, width: nextWidth } );\n\t};\n\n\treturn {\n\t\tcurrentHeight,\n\t\tcurrentWidth,\n\t\tupdateDimension,\n\t\tupdateDimensions,\n\t};\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { ExternalLink } from '@wordpress/components';\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\n\nexport default function LinkViewerURL( { url, urlLabel, className } ) {\n\tconst linkClassName = clsx(\n\t\tclassName,\n\t\t'block-editor-url-popover__link-viewer-url'\n\t);\n\n\tif ( ! url ) {\n\t\treturn <span className={ linkClassName }></span>;\n\t}\n\n\treturn (\n\t\t<ExternalLink className={ linkClassName } href={ url }>\n\t\t\t{ urlLabel || filterURLForDisplay( safeDecodeURI( url ) ) }\n\t\t</ExternalLink>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { forwardRef, useState } from '@wordpress/element';\nimport {\n\tButton,\n\tPopover,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { chevronDown } from '@wordpress/icons';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport LinkViewer from './link-viewer';\nimport LinkEditor from './link-editor';\nimport { unlock } from '../../lock-unlock';\n\nconst { __experimentalPopoverLegacyPositionToPlacement } = unlock(\n\tcomponentsPrivateApis\n);\n\nconst DEFAULT_PLACEMENT = 'bottom';\n\nconst URLPopover = forwardRef(\n\t(\n\t\t{\n\t\t\tadditionalControls,\n\t\t\tchildren,\n\t\t\trenderSettings,\n\t\t\t// The DEFAULT_PLACEMENT value is assigned inside the function's body\n\t\t\tplacement,\n\t\t\tfocusOnMount = 'firstElement',\n\t\t\t// Deprecated\n\t\t\tposition,\n\t\t\t// Rest\n\t\t\t...popoverProps\n\t\t},\n\t\tref\n\t) => {\n\t\tif ( position !== undefined ) {\n\t\t\tdeprecated( '`position` prop in wp.blockEditor.URLPopover', {\n\t\t\t\tsince: '6.2',\n\t\t\t\talternative: '`placement` prop',\n\t\t\t} );\n\t\t}\n\n\t\t// Compute popover's placement:\n\t\t// - give priority to `placement` prop, if defined\n\t\t// - otherwise, compute it from the legacy `position` prop (if defined)\n\t\t// - finally, fallback to the DEFAULT_PLACEMENT.\n\t\tlet computedPlacement;\n\t\tif ( placement !== undefined ) {\n\t\t\tcomputedPlacement = placement;\n\t\t} else if ( position !== undefined ) {\n\t\t\tcomputedPlacement =\n\t\t\t\t__experimentalPopoverLegacyPositionToPlacement( position );\n\t\t}\n\t\tcomputedPlacement = computedPlacement || DEFAULT_PLACEMENT;\n\n\t\tconst [ isSettingsExpanded, setIsSettingsExpanded ] = useState( false );\n\n\t\tconst showSettings = !! renderSettings && isSettingsExpanded;\n\n\t\tconst toggleSettingsVisibility = () => {\n\t\t\tsetIsSettingsExpanded( ! isSettingsExpanded );\n\t\t};\n\n\t\treturn (\n\t\t\t<Popover\n\t\t\t\tref={ ref }\n\t\t\t\trole=\"dialog\"\n\t\t\t\taria-modal=\"true\"\n\t\t\t\taria-label={ __( 'Edit URL' ) }\n\t\t\t\tclassName=\"block-editor-url-popover\"\n\t\t\t\tfocusOnMount={ focusOnMount }\n\t\t\t\tplacement={ computedPlacement }\n\t\t\t\tshift\n\t\t\t\tvariant=\"toolbar\"\n\t\t\t\t{ ...popoverProps }\n\t\t\t>\n\t\t\t\t<div className=\"block-editor-url-popover__input-container\">\n\t\t\t\t\t<div className=\"block-editor-url-popover__row\">\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t{ !! renderSettings && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"block-editor-url-popover__settings-toggle\"\n\t\t\t\t\t\t\t\ticon={ chevronDown }\n\t\t\t\t\t\t\t\tlabel={ __( 'Link settings' ) }\n\t\t\t\t\t\t\t\tonClick={ toggleSettingsVisibility }\n\t\t\t\t\t\t\t\taria-expanded={ isSettingsExpanded }\n\t\t\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{ showSettings && (\n\t\t\t\t\t<div className=\"block-editor-url-popover__settings\">\n\t\t\t\t\t\t{ renderSettings() }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ additionalControls && ! showSettings && (\n\t\t\t\t\t<div className=\"block-editor-url-popover__additional-controls\">\n\t\t\t\t\t\t{ additionalControls }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</Popover>\n\t\t);\n\t}\n);\n\nURLPopover.LinkEditor = LinkEditor;\n\nURLPopover.LinkViewer = LinkViewer;\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/url-popover/README.md\n */\nexport default URLPopover;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { keyboardReturn } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport URLInput from '../url-input';\n\nexport default function LinkEditor( {\n\tautocompleteRef,\n\tclassName,\n\tonChangeInputValue,\n\tvalue,\n\t...props\n} ) {\n\treturn (\n\t\t<form\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-url-popover__link-editor',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<URLInput\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChangeInputValue }\n\t\t\t\tautocompleteRef={ autocompleteRef }\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\ticon={ keyboardReturn }\n\t\t\t\tlabel={ __( 'Apply' ) }\n\t\t\t\ttype=\"submit\"\n\t\t\t\tsize=\"compact\"\n\t\t\t/>\n\t\t</form>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { edit } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport LinkViewerURL from './link-viewer-url';\n\nexport default function LinkViewer( {\n\tclassName,\n\tlinkClassName,\n\tonEditLinkClick,\n\turl,\n\turlLabel,\n\t...props\n} ) {\n\treturn (\n\t\t<div\n\t\t\tclassName={ clsx(\n\t\t\t\t'block-editor-url-popover__link-viewer',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<LinkViewerURL\n\t\t\t\turl={ url }\n\t\t\t\turlLabel={ urlLabel }\n\t\t\t\tclassName={ linkClassName }\n\t\t\t/>\n\t\t\t{ onEditLinkClick && (\n\t\t\t\t<Button\n\t\t\t\t\ticon={ edit }\n\t\t\t\t\tlabel={ __( 'Edit' ) }\n\t\t\t\t\tonClick={ onEditLinkClick }\n\t\t\t\t\tsize=\"compact\"\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tFormFileUpload,\n\tPlaceholder,\n\tDropZone,\n\t__experimentalInputControl as InputControl,\n\t__experimentalInputControlSuffixWrapper as InputControlSuffixWrapper,\n\twithFilters,\n} from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\nimport { useState, useEffect } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { keyboardReturn } from '@wordpress/icons';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport MediaUpload from '../media-upload';\nimport MediaUploadCheck from '../media-upload/check';\nimport URLPopover from '../url-popover';\nimport { store as blockEditorStore } from '../../store';\nimport { parseDropEvent } from '../use-on-block-drop';\n\nconst noop = () => {};\n\nconst InsertFromURLPopover = ( {\n\tsrc,\n\tonChange,\n\tonSubmit,\n\tonClose,\n\tpopoverAnchor,\n} ) => (\n\t<URLPopover anchor={ popoverAnchor } onClose={ onClose }>\n\t\t<form\n\t\t\tclassName=\"block-editor-media-placeholder__url-input-form\"\n\t\t\tonSubmit={ onSubmit }\n\t\t>\n\t\t\t<InputControl\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tlabel={ __( 'URL' ) }\n\t\t\t\ttype=\"text\" // Use text instead of URL to allow relative paths (e.g., /image/image.jpg)\n\t\t\t\thideLabelFromVision\n\t\t\t\tplaceholder={ __( 'Paste or type URL' ) }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tvalue={ src }\n\t\t\t\tsuffix={\n\t\t\t\t\t<InputControlSuffixWrapper variant=\"control\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ticon={ keyboardReturn }\n\t\t\t\t\t\t\tlabel={ __( 'Apply' ) }\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</InputControlSuffixWrapper>\n\t\t\t\t}\n\t\t\t/>\n\t\t</form>\n\t</URLPopover>\n);\n\nconst URLSelectionUI = ( { src, onChangeSrc, onSelectURL } ) => {\n\t// Use internal state instead of a ref to make sure that the component\n\t// re-renders when the popover's anchor updates.\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\n\tconst [ isURLInputVisible, setIsURLInputVisible ] = useState( false );\n\n\tconst openURLInput = () => {\n\t\tsetIsURLInputVisible( true );\n\t};\n\tconst closeURLInput = () => {\n\t\tsetIsURLInputVisible( false );\n\t\tpopoverAnchor?.focus();\n\t};\n\n\tconst onSubmitSrc = ( event ) => {\n\t\tevent.preventDefault();\n\t\tif ( src && onSelectURL ) {\n\t\t\tonSelectURL( src );\n\t\t\tcloseURLInput();\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"block-editor-media-placeholder__url-input-container\">\n\t\t\t<Button\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tclassName=\"block-editor-media-placeholder__button\"\n\t\t\t\tonClick={ openURLInput }\n\t\t\t\tisPressed={ isURLInputVisible }\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\taria-haspopup=\"dialog\"\n\t\t\t\tref={ setPopoverAnchor }\n\t\t\t>\n\t\t\t\t{ __( 'Insert from URL' ) }\n\t\t\t</Button>\n\t\t\t{ isURLInputVisible && (\n\t\t\t\t<InsertFromURLPopover\n\t\t\t\t\tsrc={ src }\n\t\t\t\t\tonChange={ onChangeSrc }\n\t\t\t\t\tonSubmit={ onSubmitSrc }\n\t\t\t\t\tonClose={ closeURLInput }\n\t\t\t\t\tpopoverAnchor={ popoverAnchor }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n};\n\nexport function MediaPlaceholder( {\n\tvalue = {},\n\tallowedTypes,\n\tclassName,\n\ticon,\n\tlabels = {},\n\tmediaPreview,\n\tnotices,\n\tisAppender,\n\taccept,\n\taddToGallery,\n\tmultiple = false,\n\thandleUpload = true,\n\tdisableDropZone,\n\tdisableMediaButtons,\n\tonError,\n\tonSelect,\n\tonCancel,\n\tonSelectURL,\n\tonToggleFeaturedImage,\n\tonDoubleClick,\n\tonFilesPreUpload = noop,\n\tonHTMLDrop: deprecatedOnHTMLDrop,\n\tchildren,\n\tmediaLibraryButton,\n\tplaceholder,\n\tstyle,\n} ) {\n\tif ( deprecatedOnHTMLDrop ) {\n\t\tdeprecated( 'wp.blockEditor.MediaPlaceholder onHTMLDrop prop', {\n\t\t\tsince: '6.2',\n\t\t\tversion: '6.4',\n\t\t} );\n\t}\n\n\tconst mediaUpload = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn getSettings().mediaUpload;\n\t}, [] );\n\tconst [ src, setSrc ] = useState( '' );\n\n\tuseEffect( () => {\n\t\tsetSrc( value?.src ?? '' );\n\t}, [ value?.src ] );\n\n\tconst onlyAllowsImages = () => {\n\t\tif ( ! allowedTypes || allowedTypes.length === 0 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn allowedTypes.every(\n\t\t\t( allowedType ) =>\n\t\t\t\tallowedType === 'image' || allowedType.startsWith( 'image/' )\n\t\t);\n\t};\n\n\tconst onFilesUpload = ( files ) => {\n\t\tif (\n\t\t\t! handleUpload ||\n\t\t\t( typeof handleUpload === 'function' && ! handleUpload( files ) )\n\t\t) {\n\t\t\treturn onSelect( files );\n\t\t}\n\t\tonFilesPreUpload( files );\n\t\tlet setMedia;\n\t\tif ( multiple ) {\n\t\t\tif ( addToGallery ) {\n\t\t\t\t// Since the setMedia function runs multiple times per upload group\n\t\t\t\t// and is passed newMedia containing every item in its group each time, we must\n\t\t\t\t// filter out whatever this upload group had previously returned to the\n\t\t\t\t// gallery before adding and returning the image array with replacement newMedia\n\t\t\t\t// values.\n\n\t\t\t\t// Define an array to store urls from newMedia between subsequent function calls.\n\t\t\t\tlet lastMediaPassed = [];\n\t\t\t\tsetMedia = ( newMedia ) => {\n\t\t\t\t\t// Remove any images this upload group is responsible for (lastMediaPassed).\n\t\t\t\t\t// Their replacements are contained in newMedia.\n\t\t\t\t\tconst filteredMedia = ( value ?? [] ).filter( ( item ) => {\n\t\t\t\t\t\t// If Item has id, only remove it if lastMediaPassed has an item with that id.\n\t\t\t\t\t\tif ( item.id ) {\n\t\t\t\t\t\t\treturn ! lastMediaPassed.some(\n\t\t\t\t\t\t\t\t// Be sure to convert to number for comparison.\n\t\t\t\t\t\t\t\t( { id } ) => Number( id ) === Number( item.id )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Compare transient images via .includes since gallery may append extra info onto the url.\n\t\t\t\t\t\treturn ! lastMediaPassed.some( ( { urlSlug } ) =>\n\t\t\t\t\t\t\titem.url.includes( urlSlug )\n\t\t\t\t\t\t);\n\t\t\t\t\t} );\n\t\t\t\t\t// Return the filtered media array along with newMedia.\n\t\t\t\t\tonSelect( filteredMedia.concat( newMedia ) );\n\t\t\t\t\t// Reset lastMediaPassed and set it with ids and urls from newMedia.\n\t\t\t\t\tlastMediaPassed = newMedia.map( ( media ) => {\n\t\t\t\t\t\t// Add everything up to '.fileType' to compare via .includes.\n\t\t\t\t\t\tconst cutOffIndex = media.url.lastIndexOf( '.' );\n\t\t\t\t\t\tconst urlSlug = media.url.slice( 0, cutOffIndex );\n\t\t\t\t\t\treturn { id: media.id, urlSlug };\n\t\t\t\t\t} );\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tsetMedia = onSelect;\n\t\t\t}\n\t\t} else {\n\t\t\tsetMedia = ( [ media ] ) => onSelect( media );\n\t\t}\n\t\tmediaUpload( {\n\t\t\tallowedTypes,\n\t\t\tfilesList: files,\n\t\t\tonFileChange: setMedia,\n\t\t\tonError,\n\t\t\tmultiple,\n\t\t} );\n\t};\n\n\tasync function handleBlocksDrop( event ) {\n\t\tconst { blocks } = parseDropEvent( event );\n\n\t\tif ( ! blocks?.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst uploadedMediaList = await Promise.all(\n\t\t\tblocks.map( ( block ) => {\n\t\t\t\tconst blockType = block.name.split( '/' )[ 1 ];\n\t\t\t\tif ( block.attributes.id ) {\n\t\t\t\t\tblock.attributes.type = blockType;\n\t\t\t\t\treturn block.attributes;\n\t\t\t\t}\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\t\t\t\t\twindow\n\t\t\t\t\t\t.fetch( block.attributes.url )\n\t\t\t\t\t\t.then( ( response ) => response.blob() )\n\t\t\t\t\t\t.then( ( blob ) =>\n\t\t\t\t\t\t\tmediaUpload( {\n\t\t\t\t\t\t\t\tfilesList: [ blob ],\n\t\t\t\t\t\t\t\tadditionalData: {\n\t\t\t\t\t\t\t\t\ttitle: block.attributes.title,\n\t\t\t\t\t\t\t\t\talt_text: block.attributes.alt,\n\t\t\t\t\t\t\t\t\tcaption: block.attributes.caption,\n\t\t\t\t\t\t\t\t\ttype: blockType,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonFileChange: ( [ media ] ) => {\n\t\t\t\t\t\t\t\t\tif ( media.id ) {\n\t\t\t\t\t\t\t\t\t\tresolve( media );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tallowedTypes,\n\t\t\t\t\t\t\t\tonError: reject,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.catch( () => resolve( block.attributes.url ) );\n\t\t\t\t} );\n\t\t\t} )\n\t\t).catch( ( err ) => onError( err ) );\n\n\t\tif ( ! uploadedMediaList?.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tonSelect( multiple ? uploadedMediaList : uploadedMediaList[ 0 ] );\n\t}\n\n\tconst onUpload = ( event ) => {\n\t\tonFilesUpload( event.target.files );\n\t};\n\n\tconst defaultRenderPlaceholder = ( content ) => {\n\t\tlet { instructions, title } = labels;\n\n\t\tif ( ! mediaUpload && ! onSelectURL ) {\n\t\t\tinstructions = __(\n\t\t\t\t'To edit this block, you need permission to upload media.'\n\t\t\t);\n\t\t}\n\n\t\tif ( instructions === undefined || title === undefined ) {\n\t\t\tconst typesAllowed = allowedTypes ?? [];\n\n\t\t\tconst [ firstAllowedType ] = typesAllowed;\n\t\t\tconst isOneType = 1 === typesAllowed.length;\n\t\t\tconst isAudio = isOneType && 'audio' === firstAllowedType;\n\t\t\tconst isImage = isOneType && 'image' === firstAllowedType;\n\t\t\tconst isVideo = isOneType && 'video' === firstAllowedType;\n\n\t\t\tif ( instructions === undefined && mediaUpload ) {\n\t\t\t\tinstructions = __(\n\t\t\t\t\t'Drag and drop an image or video, upload, or choose from your library.'\n\t\t\t\t);\n\n\t\t\t\tif ( isAudio ) {\n\t\t\t\t\tinstructions = __(\n\t\t\t\t\t\t'Drag and drop an audio file, upload, or choose from your library.'\n\t\t\t\t\t);\n\t\t\t\t} else if ( isImage ) {\n\t\t\t\t\tinstructions = __(\n\t\t\t\t\t\t'Drag and drop an image, upload, or choose from your library.'\n\t\t\t\t\t);\n\t\t\t\t} else if ( isVideo ) {\n\t\t\t\t\tinstructions = __(\n\t\t\t\t\t\t'Drag and drop a video, upload, or choose from your library.'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( title === undefined ) {\n\t\t\t\ttitle = __( 'Media' );\n\n\t\t\t\tif ( isAudio ) {\n\t\t\t\t\ttitle = __( 'Audio' );\n\t\t\t\t} else if ( isImage ) {\n\t\t\t\t\ttitle = __( 'Image' );\n\t\t\t\t} else if ( isVideo ) {\n\t\t\t\t\ttitle = __( 'Video' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst placeholderClassName = clsx(\n\t\t\t'block-editor-media-placeholder',\n\t\t\tclassName,\n\t\t\t{\n\t\t\t\t'is-appender': isAppender,\n\t\t\t}\n\t\t);\n\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\ticon={ icon }\n\t\t\t\tlabel={ title }\n\t\t\t\tinstructions={ instructions }\n\t\t\t\tclassName={ placeholderClassName }\n\t\t\t\tnotices={ notices }\n\t\t\t\tonDoubleClick={ onDoubleClick }\n\t\t\t\tpreview={ mediaPreview }\n\t\t\t\tstyle={ style }\n\t\t\t>\n\t\t\t\t{ content }\n\t\t\t\t{ children }\n\t\t\t</Placeholder>\n\t\t);\n\t};\n\tconst renderPlaceholder = placeholder ?? defaultRenderPlaceholder;\n\n\tconst renderDropZone = () => {\n\t\tif ( disableDropZone ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<DropZone\n\t\t\t\tonFilesDrop={ onFilesUpload }\n\t\t\t\tonDrop={ handleBlocksDrop }\n\t\t\t\tisEligible={ ( dataTransfer ) => {\n\t\t\t\t\tconst prefix = 'wp-block:core/';\n\t\t\t\t\tconst types = [];\n\t\t\t\t\tfor ( const type of dataTransfer.types ) {\n\t\t\t\t\t\tif ( type.startsWith( prefix ) ) {\n\t\t\t\t\t\t\ttypes.push( type.slice( prefix.length ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\ttypes.every( ( type ) =>\n\t\t\t\t\t\t\tallowedTypes.includes( type )\n\t\t\t\t\t\t) && ( multiple ? true : types.length === 1 )\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst renderCancelLink = () => {\n\t\treturn (\n\t\t\tonCancel && (\n\t\t\t\t<Button\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tclassName=\"block-editor-media-placeholder__cancel-button\"\n\t\t\t\t\ttitle={ __( 'Cancel' ) }\n\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\tonClick={ onCancel }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t</Button>\n\t\t\t)\n\t\t);\n\t};\n\n\tconst renderUrlSelectionUI = () => {\n\t\treturn (\n\t\t\tonSelectURL && (\n\t\t\t\t<URLSelectionUI\n\t\t\t\t\tsrc={ src }\n\t\t\t\t\tonChangeSrc={ setSrc }\n\t\t\t\t\tonSelectURL={ onSelectURL }\n\t\t\t\t/>\n\t\t\t)\n\t\t);\n\t};\n\n\tconst renderFeaturedImageToggle = () => {\n\t\treturn (\n\t\t\tonToggleFeaturedImage && (\n\t\t\t\t<div className=\"block-editor-media-placeholder__url-input-container\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tclassName=\"block-editor-media-placeholder__button\"\n\t\t\t\t\t\tonClick={ onToggleFeaturedImage }\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Use featured image' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)\n\t\t);\n\t};\n\n\tconst renderMediaUploadChecked = () => {\n\t\tconst defaultButton = ( { open } ) => {\n\t\t\treturn (\n\t\t\t\t<Button\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\topen();\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Media Library' ) }\n\t\t\t\t</Button>\n\t\t\t);\n\t\t};\n\t\tconst libraryButton = mediaLibraryButton ?? defaultButton;\n\t\tconst uploadMediaLibraryButton = (\n\t\t\t<MediaUpload\n\t\t\t\taddToGallery={ addToGallery }\n\t\t\t\tgallery={ multiple && onlyAllowsImages() }\n\t\t\t\tmultiple={ multiple }\n\t\t\t\tonSelect={ onSelect }\n\t\t\t\tallowedTypes={ allowedTypes }\n\t\t\t\tmode=\"browse\"\n\t\t\t\tvalue={\n\t\t\t\t\tArray.isArray( value )\n\t\t\t\t\t\t? value.map( ( { id } ) => id )\n\t\t\t\t\t\t: value.id\n\t\t\t\t}\n\t\t\t\trender={ libraryButton }\n\t\t\t/>\n\t\t);\n\n\t\tif ( mediaUpload && isAppender ) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{ renderDropZone() }\n\t\t\t\t\t<FormFileUpload\n\t\t\t\t\t\tonChange={ onUpload }\n\t\t\t\t\t\taccept={ accept }\n\t\t\t\t\t\tmultiple={ !! multiple }\n\t\t\t\t\t\trender={ ( { openFileDialog } ) => {\n\t\t\t\t\t\t\tconst content = (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t\t\t\t\t'block-editor-media-placeholder__button',\n\t\t\t\t\t\t\t\t\t\t\t'block-editor-media-placeholder__upload-button'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tonClick={ openFileDialog }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ _x( 'Upload', 'verb' ) }\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t{ uploadMediaLibraryButton }\n\t\t\t\t\t\t\t\t\t{ renderUrlSelectionUI() }\n\t\t\t\t\t\t\t\t\t{ renderFeaturedImageToggle() }\n\t\t\t\t\t\t\t\t\t{ renderCancelLink() }\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn renderPlaceholder( content );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\tif ( mediaUpload ) {\n\t\t\tconst content = (\n\t\t\t\t<>\n\t\t\t\t\t{ renderDropZone() }\n\t\t\t\t\t<FormFileUpload\n\t\t\t\t\t\trender={ ( { openFileDialog } ) => (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\t\tonClick={ openFileDialog }\n\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t\t\t\t'block-editor-media-placeholder__button',\n\t\t\t\t\t\t\t\t\t'block-editor-media-placeholder__upload-button'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ _x( 'Upload', 'verb' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonChange={ onUpload }\n\t\t\t\t\t\taccept={ accept }\n\t\t\t\t\t\tmultiple={ !! multiple }\n\t\t\t\t\t/>\n\t\t\t\t\t{ uploadMediaLibraryButton }\n\t\t\t\t\t{ renderUrlSelectionUI() }\n\t\t\t\t\t{ renderFeaturedImageToggle() }\n\t\t\t\t\t{ renderCancelLink() }\n\t\t\t\t</>\n\t\t\t);\n\t\t\treturn renderPlaceholder( content );\n\t\t}\n\n\t\treturn renderPlaceholder( uploadMediaLibraryButton );\n\t};\n\n\tif ( disableMediaButtons ) {\n\t\treturn <MediaUploadCheck>{ renderDropZone() }</MediaUploadCheck>;\n\t}\n\n\treturn (\n\t\t<MediaUploadCheck\n\t\t\tfallback={ renderPlaceholder( renderUrlSelectionUI() ) }\n\t\t>\n\t\t\t{ renderMediaUploadChecked() }\n\t\t</MediaUploadCheck>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-placeholder/README.md\n */\nexport default withFilters( 'editor.MediaPlaceholder' )( MediaPlaceholder );\n","/**\n * Internal dependencies\n */\nimport PanelColorGradientSettings from '../colors-gradients/panel-color-gradient-settings';\n\nconst PanelColorSettings = ( { colorSettings, ...props } ) => {\n\tconst settings = colorSettings.map( ( setting ) => {\n\t\tif ( ! setting ) {\n\t\t\treturn setting;\n\t\t}\n\t\tconst { value, onChange, ...otherSettings } = setting;\n\t\treturn {\n\t\t\t...otherSettings,\n\t\t\tcolorValue: value,\n\t\t\tonColorChange: onChange,\n\t\t};\n\t} );\n\treturn (\n\t\t<PanelColorGradientSettings\n\t\t\tsettings={ settings }\n\t\t\tgradients={ [] }\n\t\t\tdisableCustomGradients\n\t\t\t{ ...props }\n\t\t/>\n\t);\n};\nexport default PanelColorSettings;\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { ToolbarItem, DropdownMenu, Slot } from '@wordpress/components';\nimport { chevronDown } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { orderBy } from '../../../utils/sorting';\n\nconst POPOVER_PROPS = {\n\tplacement: 'bottom-start',\n};\n\nconst FormatToolbar = () => {\n\treturn (\n\t\t<>\n\t\t\t{ [ 'bold', 'italic', 'link', 'unknown' ].map( ( format ) => (\n\t\t\t\t<Slot\n\t\t\t\t\tname={ `RichText.ToolbarControls.${ format }` }\n\t\t\t\t\tkey={ format }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t\t<Slot name=\"RichText.ToolbarControls\">\n\t\t\t\t{ ( fills ) => {\n\t\t\t\t\tif ( ! fills.length ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst allProps = fills.map( ( [ { props } ] ) => props );\n\t\t\t\t\tconst hasActive = allProps.some(\n\t\t\t\t\t\t( { isActive } ) => isActive\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ToolbarItem>\n\t\t\t\t\t\t\t{ ( toggleProps ) => (\n\t\t\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\t\t\ticon={ chevronDown }\n\t\t\t\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\t\t\t\t\t\t\tlabel={ __( 'More' ) }\n\t\t\t\t\t\t\t\t\ttoggleProps={ {\n\t\t\t\t\t\t\t\t\t\t...toggleProps,\n\t\t\t\t\t\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t\t\t\t\t\ttoggleProps.className,\n\t\t\t\t\t\t\t\t\t\t\t{ 'is-pressed': hasActive }\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tdescription: __(\n\t\t\t\t\t\t\t\t\t\t\t'Displays more block tools'\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tcontrols={ orderBy(\n\t\t\t\t\t\t\t\t\t\tfills.map( ( [ { props } ] ) => props ),\n\t\t\t\t\t\t\t\t\t\t'title'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</ToolbarItem>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Slot>\n\t\t</>\n\t);\n};\n\nexport default FormatToolbar;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Popover, ToolbarGroup } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockControls from '../block-controls';\nimport FormatToolbar from './format-toolbar';\nimport NavigableToolbar from '../navigable-toolbar';\n\nfunction InlineToolbar( { popoverAnchor } ) {\n\treturn (\n\t\t<Popover\n\t\t\tplacement=\"top\"\n\t\t\tfocusOnMount={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar\"\n\t\t\t__unstableSlotName=\"block-toolbar\"\n\t\t>\n\t\t\t<NavigableToolbar\n\t\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar-group\"\n\t\t\t\t/* translators: accessibility text for the inline format toolbar */\n\t\t\t\taria-label={ __( 'Format tools' ) }\n\t\t\t>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<FormatToolbar />\n\t\t\t\t</ToolbarGroup>\n\t\t\t</NavigableToolbar>\n\t\t</Popover>\n\t);\n}\n\nconst FormatToolbarContainer = ( { inline, editableContentElement } ) => {\n\tif ( inline ) {\n\t\treturn <InlineToolbar popoverAnchor={ editableContentElement } />;\n\t}\n\n\t// Render regular toolbar.\n\treturn (\n\t\t<BlockControls group=\"inline\">\n\t\t\t<FormatToolbar />\n\t\t</BlockControls>\n\t);\n};\n\nexport default FormatToolbarContainer;\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as richTextStore } from '@wordpress/rich-text';\n\nfunction formatTypesSelector( select ) {\n\treturn select( richTextStore ).getFormatTypes();\n}\n\n/**\n * Set of all interactive content tags.\n *\n * @see https://html.spec.whatwg.org/multipage/dom.html#interactive-content\n */\nconst interactiveContentTags = new Set( [\n\t'a',\n\t'audio',\n\t'button',\n\t'details',\n\t'embed',\n\t'iframe',\n\t'input',\n\t'label',\n\t'select',\n\t'textarea',\n\t'video',\n] );\n\nfunction prefixSelectKeys( selected, prefix ) {\n\tif ( typeof selected !== 'object' ) {\n\t\treturn { [ prefix ]: selected };\n\t}\n\treturn Object.fromEntries(\n\t\tObject.entries( selected ).map( ( [ key, value ] ) => [\n\t\t\t`${ prefix }.${ key }`,\n\t\t\tvalue,\n\t\t] )\n\t);\n}\n\nfunction getPrefixedSelectKeys( selected, prefix ) {\n\tif ( selected[ prefix ] ) {\n\t\treturn selected[ prefix ];\n\t}\n\treturn Object.keys( selected )\n\t\t.filter( ( key ) => key.startsWith( prefix + '.' ) )\n\t\t.reduce( ( accumulator, key ) => {\n\t\t\taccumulator[ key.slice( prefix.length + 1 ) ] = selected[ key ];\n\t\t\treturn accumulator;\n\t\t}, {} );\n}\n\n/**\n * This hook provides RichText with the `formatTypes` and its derived props from\n * experimental format type settings.\n *\n * @param {Object}  $0                              Options\n * @param {string}  $0.clientId                     Block client ID.\n * @param {string}  $0.identifier                   Block attribute.\n * @param {boolean} $0.withoutInteractiveFormatting Whether to clean the interactive formatting or not.\n * @param {Array}   $0.allowedFormats               Allowed formats\n */\nexport function useFormatTypes( {\n\tclientId,\n\tidentifier,\n\twithoutInteractiveFormatting,\n\tallowedFormats,\n} ) {\n\tconst allFormatTypes = useSelect( formatTypesSelector, [] );\n\tconst formatTypes = useMemo( () => {\n\t\treturn allFormatTypes.filter( ( { name, interactive, tagName } ) => {\n\t\t\tif ( allowedFormats && ! allowedFormats.includes( name ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\twithoutInteractiveFormatting &&\n\t\t\t\t( interactive || interactiveContentTags.has( tagName ) )\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t} );\n\t}, [ allFormatTypes, allowedFormats, withoutInteractiveFormatting ] );\n\tconst keyedSelected = useSelect(\n\t\t( select ) =>\n\t\t\tformatTypes.reduce( ( accumulator, type ) => {\n\t\t\t\tif ( ! type.__experimentalGetPropsForEditableTreePreparation ) {\n\t\t\t\t\treturn accumulator;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...accumulator,\n\t\t\t\t\t...prefixSelectKeys(\n\t\t\t\t\t\ttype.__experimentalGetPropsForEditableTreePreparation(\n\t\t\t\t\t\t\tselect,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trichTextIdentifier: identifier,\n\t\t\t\t\t\t\t\tblockClientId: clientId,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttype.name\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t}, {} ),\n\t\t[ formatTypes, clientId, identifier ]\n\t);\n\tconst dispatch = useDispatch();\n\tconst prepareHandlers = [];\n\tconst valueHandlers = [];\n\tconst changeHandlers = [];\n\tconst dependencies = [];\n\n\tfor ( const key in keyedSelected ) {\n\t\tdependencies.push( keyedSelected[ key ] );\n\t}\n\n\tformatTypes.forEach( ( type ) => {\n\t\tif ( type.__experimentalCreatePrepareEditableTree ) {\n\t\t\tconst handler = type.__experimentalCreatePrepareEditableTree(\n\t\t\t\tgetPrefixedSelectKeys( keyedSelected, type.name ),\n\t\t\t\t{\n\t\t\t\t\trichTextIdentifier: identifier,\n\t\t\t\t\tblockClientId: clientId,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif ( type.__experimentalCreateOnChangeEditableValue ) {\n\t\t\t\tvalueHandlers.push( handler );\n\t\t\t} else {\n\t\t\t\tprepareHandlers.push( handler );\n\t\t\t}\n\t\t}\n\n\t\tif ( type.__experimentalCreateOnChangeEditableValue ) {\n\t\t\tlet dispatchers = {};\n\n\t\t\tif ( type.__experimentalGetPropsForEditableTreeChangeHandler ) {\n\t\t\t\tdispatchers =\n\t\t\t\t\ttype.__experimentalGetPropsForEditableTreeChangeHandler(\n\t\t\t\t\t\tdispatch,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trichTextIdentifier: identifier,\n\t\t\t\t\t\t\tblockClientId: clientId,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst selected = getPrefixedSelectKeys( keyedSelected, type.name );\n\t\t\tchangeHandlers.push(\n\t\t\t\ttype.__experimentalCreateOnChangeEditableValue(\n\t\t\t\t\t{\n\t\t\t\t\t\t...( typeof selected === 'object' ? selected : {} ),\n\t\t\t\t\t\t...dispatchers,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\trichTextIdentifier: identifier,\n\t\t\t\t\t\tblockClientId: clientId,\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t} );\n\n\treturn {\n\t\tformatTypes,\n\t\tprepareHandlers,\n\t\tvalueHandlers,\n\t\tchangeHandlers,\n\t\tdependencies,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { insert, isCollapsed } from '@wordpress/rich-text';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * When typing over a selection, the selection will we wrapped by a matching\n * character pair. The second character is optional, it defaults to the first\n * character.\n *\n * @type {string[]} Array of character pairs.\n */\nconst wrapSelectionSettings = [ '`', '\"', \"'\", '', '' ];\n\nexport default ( props ) => ( element ) => {\n\tfunction onInput( event ) {\n\t\tconst { inputType, data } = event;\n\t\tconst { value, onChange, registry } = props.current;\n\n\t\t// Only run the rules when inserting text.\n\t\tif ( inputType !== 'insertText' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isCollapsed( value ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst pair = applyFilters(\n\t\t\t'blockEditor.wrapSelectionSettings',\n\t\t\twrapSelectionSettings\n\t\t).find(\n\t\t\t( [ startChar, endChar ] ) => startChar === data || endChar === data\n\t\t);\n\n\t\tif ( ! pair ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [ startChar, endChar = startChar ] = pair;\n\t\tconst start = value.start;\n\t\tconst end = value.end + startChar.length;\n\n\t\tlet newValue = insert( value, startChar, start, start );\n\t\tnewValue = insert( newValue, endChar, end, end );\n\n\t\tconst {\n\t\t\t__unstableMarkLastChangeAsPersistent,\n\t\t\t__unstableMarkAutomaticChange,\n\t\t} = registry.dispatch( blockEditorStore );\n\n\t\t__unstableMarkLastChangeAsPersistent();\n\t\tonChange( newValue );\n\t\t__unstableMarkAutomaticChange();\n\n\t\tconst init = {};\n\n\t\tfor ( const key in event ) {\n\t\t\tinit[ key ] = event[ key ];\n\t\t}\n\n\t\tinit.data = endChar;\n\n\t\tconst { ownerDocument } = element;\n\t\tconst { defaultView } = ownerDocument;\n\t\tconst newEvent = new defaultView.InputEvent( 'input', init );\n\n\t\t// Dispatch an `input` event with the new data. This will trigger the\n\t\t// input rules.\n\t\t// Postpone the `input` to the next event loop tick so that the dispatch\n\t\t// doesn't happen synchronously in the middle of `beforeinput` dispatch.\n\t\t// This is closer to how native `input` event would be timed, and also\n\t\t// makes sure that the `input` event is dispatched only after the `onChange`\n\t\t// call few lines above has fully updated the data store state and rerendered\n\t\t// all affected components.\n\t\twindow.queueMicrotask( () => {\n\t\t\tevent.target.dispatchEvent( newEvent );\n\t\t} );\n\t\tevent.preventDefault();\n\t}\n\n\telement.addEventListener( 'beforeinput', onInput );\n\treturn () => {\n\t\telement.removeEventListener( 'beforeinput', onInput );\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { insert, toHTMLString } from '@wordpress/rich-text';\nimport { getBlockTransforms, findTransform } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\nimport { preventEventDiscovery } from '../prevent-event-discovery';\nimport {\n\tretrieveSelectedAttribute,\n\tSTART_OF_SELECTED_AREA,\n} from '../../../utils/selection';\n\nexport function findSelection( blocks ) {\n\tlet i = blocks.length;\n\n\twhile ( i-- ) {\n\t\tconst attributeKey = retrieveSelectedAttribute(\n\t\t\tblocks[ i ].attributes\n\t\t);\n\n\t\tif ( attributeKey ) {\n\t\t\tblocks[ i ].attributes[ attributeKey ] = blocks[ i ].attributes[\n\t\t\t\tattributeKey\n\t\t\t]\n\t\t\t\t// To do: refactor this to use rich text's selection instead, so\n\t\t\t\t// we no longer have to use on this hack inserting a special\n\t\t\t\t// character.\n\t\t\t\t.toString()\n\t\t\t\t.replace( START_OF_SELECTED_AREA, '' );\n\t\t\treturn [ blocks[ i ].clientId, attributeKey, 0, 0 ];\n\t\t}\n\n\t\tconst nestedSelection = findSelection( blocks[ i ].innerBlocks );\n\n\t\tif ( nestedSelection ) {\n\t\t\treturn nestedSelection;\n\t\t}\n\t}\n\n\treturn [];\n}\n\nexport default ( props ) => ( element ) => {\n\tfunction inputRule() {\n\t\tconst { getValue, onReplace, selectionChange, registry } =\n\t\t\tprops.current;\n\n\t\tif ( ! onReplace ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// We must use getValue() here because value may be update\n\t\t// asynchronously.\n\t\tconst value = getValue();\n\t\tconst { start, text } = value;\n\t\tconst characterBefore = text.slice( start - 1, start );\n\n\t\t// The character right before the caret must be a plain space.\n\t\tif ( characterBefore !== ' ' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst trimmedTextBefore = text.slice( 0, start ).trim();\n\t\tconst prefixTransforms = getBlockTransforms( 'from' ).filter(\n\t\t\t( { type } ) => type === 'prefix'\n\t\t);\n\t\tconst transformation = findTransform(\n\t\t\tprefixTransforms,\n\t\t\t( { prefix } ) => {\n\t\t\t\treturn trimmedTextBefore === prefix;\n\t\t\t}\n\t\t);\n\n\t\tif ( ! transformation ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst content = toHTMLString( {\n\t\t\tvalue: insert( value, START_OF_SELECTED_AREA, 0, start ),\n\t\t} );\n\t\tconst block = transformation.transform( content );\n\n\t\tselectionChange( ...findSelection( [ block ] ) );\n\t\tonReplace( [ block ] );\n\t\tregistry.dispatch( blockEditorStore ).__unstableMarkAutomaticChange();\n\n\t\treturn true;\n\t}\n\n\tfunction onInput( event ) {\n\t\tconst { inputType, type } = event;\n\t\tconst {\n\t\t\tgetValue,\n\t\t\tonChange,\n\t\t\t__unstableAllowPrefixTransformations,\n\t\t\tformatTypes,\n\t\t\tregistry,\n\t\t} = props.current;\n\n\t\t// Only run input rules when inserting text.\n\t\tif ( inputType !== 'insertText' && type !== 'compositionend' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( __unstableAllowPrefixTransformations && inputRule() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = getValue();\n\t\tconst transformed = formatTypes.reduce(\n\t\t\t( accumulator, { __unstableInputRule } ) => {\n\t\t\t\tif ( __unstableInputRule ) {\n\t\t\t\t\taccumulator = __unstableInputRule( accumulator );\n\t\t\t\t}\n\n\t\t\t\treturn accumulator;\n\t\t\t},\n\t\t\tpreventEventDiscovery( value )\n\t\t);\n\n\t\tconst {\n\t\t\t__unstableMarkLastChangeAsPersistent,\n\t\t\t__unstableMarkAutomaticChange,\n\t\t} = registry.dispatch( blockEditorStore );\n\n\t\tif ( transformed !== value ) {\n\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\tonChange( {\n\t\t\t\t...transformed,\n\t\t\t\tactiveFormats: value.activeFormats,\n\t\t\t} );\n\t\t\t__unstableMarkAutomaticChange();\n\t\t}\n\t}\n\n\telement.addEventListener( 'input', onInput );\n\telement.addEventListener( 'compositionend', onInput );\n\treturn () => {\n\t\telement.removeEventListener( 'input', onInput );\n\t\telement.removeEventListener( 'compositionend', onInput );\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { renderToString } from '@wordpress/element';\nimport { createBlock } from '@wordpress/blocks';\n\nexport function addActiveFormats( value, activeFormats ) {\n\tif ( activeFormats?.length ) {\n\t\tlet index = value.formats.length;\n\n\t\twhile ( index-- ) {\n\t\t\tvalue.formats[ index ] = [\n\t\t\t\t...activeFormats,\n\t\t\t\t...( value.formats[ index ] || [] ),\n\t\t\t];\n\t\t}\n\t}\n}\n\n/**\n * Get the multiline tag based on the multiline prop.\n *\n * @param {?(string|boolean)} multiline The multiline prop.\n *\n * @return {string | undefined} The multiline tag.\n */\nexport function getMultilineTag( multiline ) {\n\tif ( multiline !== true && multiline !== 'p' && multiline !== 'li' ) {\n\t\treturn;\n\t}\n\n\treturn multiline === true ? 'p' : multiline;\n}\n\nexport function getAllowedFormats( { allowedFormats, disableFormats } ) {\n\tif ( disableFormats ) {\n\t\treturn getAllowedFormats.EMPTY_ARRAY;\n\t}\n\n\treturn allowedFormats;\n}\n\ngetAllowedFormats.EMPTY_ARRAY = [];\n\n/**\n * Creates a link from pasted URL.\n * Creates a paragraph block containing a link to the URL, and calls `onReplace`.\n *\n * @param {string}   url       The URL that could not be embedded.\n * @param {Function} onReplace Function to call with the created fallback block.\n */\nexport function createLinkInParagraph( url, onReplace ) {\n\tconst link = <a href={ url }>{ url }</a>;\n\tonReplace(\n\t\tcreateBlock( 'core/paragraph', { content: renderToString( link ) } )\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { pasteHandler } from '@wordpress/blocks';\nimport { isEmpty, insert, create } from '@wordpress/rich-text';\nimport { isURL } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { addActiveFormats } from '../utils';\nimport { getPasteEventData } from '../../../utils/pasting';\n\n/** @typedef {import('@wordpress/rich-text').RichTextValue} RichTextValue */\n\nexport default ( props ) => ( element ) => {\n\tfunction _onPaste( event ) {\n\t\tconst {\n\t\t\tdisableFormats,\n\t\t\tonChange,\n\t\t\tvalue,\n\t\t\tformatTypes,\n\t\t\ttagName,\n\t\t\tonReplace,\n\t\t\t__unstableEmbedURLOnPaste,\n\t\t\tpreserveWhiteSpace,\n\t\t\tpastePlainText,\n\t\t} = props.current;\n\n\t\t// The event listener is attached to the window, so we need to check if\n\t\t// the target is the element or inside the element.\n\t\tif ( ! element.contains( event.target ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( event.defaultPrevented ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { plainText, html } = getPasteEventData( event );\n\n\t\tevent.preventDefault();\n\n\t\t// Allows us to ask for this information when we get a report.\n\t\twindow.console.log( 'Received HTML:\\n\\n', html );\n\t\twindow.console.log( 'Received plain text:\\n\\n', plainText );\n\n\t\tif ( disableFormats ) {\n\t\t\tonChange( insert( value, plainText ) );\n\t\t\treturn;\n\t\t}\n\n\t\tconst isInternal =\n\t\t\tevent.clipboardData.getData( 'rich-text' ) === 'true';\n\n\t\tfunction pasteInline( content ) {\n\t\t\tconst transformed = formatTypes.reduce(\n\t\t\t\t( accumulator, { __unstablePasteRule } ) => {\n\t\t\t\t\t// Only allow one transform.\n\t\t\t\t\tif ( __unstablePasteRule && accumulator === value ) {\n\t\t\t\t\t\taccumulator = __unstablePasteRule( value, {\n\t\t\t\t\t\t\thtml,\n\t\t\t\t\t\t\tplainText,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn accumulator;\n\t\t\t\t},\n\t\t\t\tvalue\n\t\t\t);\n\t\t\tif ( transformed !== value ) {\n\t\t\t\tonChange( transformed );\n\t\t\t} else {\n\t\t\t\tconst valueToInsert = create( { html: content } );\n\t\t\t\taddActiveFormats( valueToInsert, value.activeFormats );\n\t\t\t\tonChange( insert( value, valueToInsert ) );\n\t\t\t}\n\t\t}\n\n\t\t// If the data comes from a rich text instance, we can directly use it\n\t\t// without filtering the data. The filters are only meant for externally\n\t\t// pasted content and remove inline styles.\n\t\tif ( isInternal ) {\n\t\t\tpasteInline( html );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( pastePlainText ) {\n\t\t\tonChange( insert( value, create( { text: plainText } ) ) );\n\t\t\treturn;\n\t\t}\n\n\t\tlet mode = 'INLINE';\n\n\t\tconst trimmedPlainText = plainText.trim();\n\n\t\tif (\n\t\t\t__unstableEmbedURLOnPaste &&\n\t\t\tisEmpty( value ) &&\n\t\t\tisURL( trimmedPlainText ) &&\n\t\t\t// For the link pasting feature, allow only http(s) protocols.\n\t\t\t/^https?:/.test( trimmedPlainText )\n\t\t) {\n\t\t\tmode = 'BLOCKS';\n\t\t}\n\n\t\tconst content = pasteHandler( {\n\t\t\tHTML: html,\n\t\t\tplainText,\n\t\t\tmode,\n\t\t\ttagName,\n\t\t\tpreserveWhiteSpace,\n\t\t} );\n\n\t\tif ( typeof content === 'string' ) {\n\t\t\tpasteInline( content );\n\t\t} else if ( content.length > 0 ) {\n\t\t\tif ( onReplace && isEmpty( value ) ) {\n\t\t\t\tonReplace( content, content.length - 1, -1 );\n\t\t\t}\n\t\t}\n\t}\n\n\tconst { defaultView } = element.ownerDocument;\n\n\t// Attach the listener to the window so parent elements have the chance to\n\t// prevent the default behavior.\n\tdefaultView.addEventListener( 'paste', _onPaste );\n\treturn () => {\n\t\tdefaultView.removeEventListener( 'paste', _onPaste );\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { useMemo, useRef, useInsertionEffect } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport beforeInputRules from './before-input-rules';\nimport inputRules from './input-rules';\nimport insertReplacementText from './insert-replacement-text';\nimport removeBrowserShortcuts from './remove-browser-shortcuts';\nimport shortcuts from './shortcuts';\nimport inputEvents from './input-events';\nimport undoAutomaticChange from './undo-automatic-change';\nimport pasteHandler from './paste-handler';\nimport _delete from './delete';\nimport enter from './enter';\nimport firefoxCompat from './firefox-compat';\n\nconst allEventListeners = [\n\tbeforeInputRules,\n\tinputRules,\n\tinsertReplacementText,\n\tremoveBrowserShortcuts,\n\tshortcuts,\n\tinputEvents,\n\tundoAutomaticChange,\n\tpasteHandler,\n\t_delete,\n\tenter,\n\tfirefoxCompat,\n];\n\nexport function useEventListeners( props ) {\n\tconst propsRef = useRef( props );\n\tuseInsertionEffect( () => {\n\t\tpropsRef.current = props;\n\t} );\n\tconst refEffects = useMemo(\n\t\t() => allEventListeners.map( ( refEffect ) => refEffect( propsRef ) ),\n\t\t[ propsRef ]\n\t);\n\n\treturn useRefEffect(\n\t\t( element ) => {\n\t\t\tif ( ! props.isSelected ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst cleanups = refEffects.map( ( effect ) => effect( element ) );\n\t\t\treturn () => {\n\t\t\t\tcleanups.forEach( ( cleanup ) => cleanup() );\n\t\t\t};\n\t\t},\n\t\t[ refEffects, props.isSelected ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { insert } from '@wordpress/rich-text';\n\nexport function preventEventDiscovery( value ) {\n\tconst searchText = 'tales of gutenberg';\n\tconst addText =\n\t\t' ';\n\tconst { start, text } = value;\n\n\tif ( start < searchText.length ) {\n\t\treturn value;\n\t}\n\n\tconst charactersBefore = text.slice( start - searchText.length, start );\n\n\tif ( charactersBefore.toLowerCase() !== searchText ) {\n\t\treturn value;\n\t}\n\n\treturn insert( value, addText );\n}\n","/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * When the browser is about to auto correct, add an undo level so the user can\n * revert the change.\n *\n * @param {Object} props\n */\nexport default ( props ) => ( element ) => {\n\tfunction onInput( event ) {\n\t\tif ( event.inputType !== 'insertReplacementText' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { registry } = props.current;\n\t\tregistry\n\t\t\t.dispatch( blockEditorStore )\n\t\t\t.__unstableMarkLastChangeAsPersistent();\n\t}\n\n\telement.addEventListener( 'beforeinput', onInput );\n\treturn () => {\n\t\telement.removeEventListener( 'beforeinput', onInput );\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { isKeyboardEvent } from '@wordpress/keycodes';\n\n/**\n * Hook to prevent default behaviors for key combinations otherwise handled\n * internally by RichText.\n */\nexport default () => ( node ) => {\n\tfunction onKeydown( event ) {\n\t\tif (\n\t\t\tisKeyboardEvent.primary( event, 'z' ) ||\n\t\t\tisKeyboardEvent.primary( event, 'y' ) ||\n\t\t\tisKeyboardEvent.primaryShift( event, 'z' )\n\t\t) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\tnode.addEventListener( 'keydown', onKeydown );\n\treturn () => {\n\t\tnode.removeEventListener( 'keydown', onKeydown );\n\t};\n};\n","export default ( props ) => ( element ) => {\n\tconst { keyboardShortcuts } = props.current;\n\tfunction onKeyDown( event ) {\n\t\tfor ( const keyboardShortcut of keyboardShortcuts.current ) {\n\t\t\tkeyboardShortcut( event );\n\t\t}\n\t}\n\n\telement.addEventListener( 'keydown', onKeyDown );\n\treturn () => {\n\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t};\n};\n","export default ( props ) => ( element ) => {\n\tconst { inputEvents } = props.current;\n\tfunction onInput( event ) {\n\t\tfor ( const keyboardShortcut of inputEvents.current ) {\n\t\t\tkeyboardShortcut( event );\n\t\t}\n\t}\n\n\telement.addEventListener( 'input', onInput );\n\treturn () => {\n\t\telement.removeEventListener( 'input', onInput );\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { BACKSPACE, ESCAPE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\nexport default ( props ) => ( element ) => {\n\tfunction onKeyDown( event ) {\n\t\tconst { keyCode } = event;\n\n\t\tif ( event.defaultPrevented ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( keyCode !== BACKSPACE && keyCode !== ESCAPE ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { registry } = props.current;\n\t\tconst { didAutomaticChange, getSettings } =\n\t\t\tregistry.select( blockEditorStore );\n\n\t\tconst { __experimentalUndo } = getSettings();\n\n\t\tif ( ! __experimentalUndo ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! didAutomaticChange() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\t__experimentalUndo();\n\t}\n\n\telement.addEventListener( 'keydown', onKeyDown );\n\treturn () => {\n\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { DELETE, BACKSPACE } from '@wordpress/keycodes';\nimport { isCollapsed, isEmpty } from '@wordpress/rich-text';\n\nexport default ( props ) => ( element ) => {\n\tfunction onKeyDown( event ) {\n\t\tconst { keyCode } = event;\n\n\t\tif ( event.defaultPrevented ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { value, onMerge, onRemove } = props.current;\n\n\t\tif ( keyCode === DELETE || keyCode === BACKSPACE ) {\n\t\t\tconst { start, end, text } = value;\n\t\t\tconst isReverse = keyCode === BACKSPACE;\n\t\t\tconst hasActiveFormats =\n\t\t\t\tvalue.activeFormats && !! value.activeFormats.length;\n\n\t\t\t// Only process delete if the key press occurs at an uncollapsed edge.\n\t\t\tif (\n\t\t\t\t! isCollapsed( value ) ||\n\t\t\t\thasActiveFormats ||\n\t\t\t\t( isReverse && start !== 0 ) ||\n\t\t\t\t( ! isReverse && end !== text.length )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( onMerge ) {\n\t\t\t\tonMerge( ! isReverse );\n\t\t\t}\n\n\t\t\t// Only handle remove on Backspace. This serves dual-purpose of being\n\t\t\t// an intentional user interaction distinguishing between Backspace and\n\t\t\t// Delete to remove the empty field, but also to avoid merge & remove\n\t\t\t// causing destruction of two fields (merge, then removed merged).\n\t\t\telse if ( onRemove && isEmpty( value ) && isReverse ) {\n\t\t\t\tonRemove( ! isReverse );\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\telement.addEventListener( 'keydown', onKeyDown );\n\treturn () => {\n\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { ENTER } from '@wordpress/keycodes';\nimport { insert, remove } from '@wordpress/rich-text';\n\nexport default ( props ) => ( element ) => {\n\tfunction onKeyDownDeprecated( event ) {\n\t\tif ( event.keyCode !== ENTER ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { onReplace, onSplit } = props.current;\n\n\t\tif ( onReplace && onSplit ) {\n\t\t\tevent.__deprecatedOnSplit = true;\n\t\t}\n\t}\n\n\tfunction onKeyDown( event ) {\n\t\tif ( event.defaultPrevented ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// The event listener is attached to the window, so we need to check if\n\t\t// the target is the element.\n\t\tif ( event.target !== element ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( event.keyCode !== ENTER ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tvalue,\n\t\t\tonChange,\n\t\t\tdisableLineBreaks,\n\t\t\tonSplitAtEnd,\n\t\t\tonSplitAtDoubleLineEnd,\n\t\t\tregistry,\n\t\t} = props.current;\n\n\t\tevent.preventDefault();\n\n\t\tconst { text, start, end } = value;\n\n\t\tif ( event.shiftKey ) {\n\t\t\tif ( ! disableLineBreaks ) {\n\t\t\t\tonChange( insert( value, '\\n' ) );\n\t\t\t}\n\t\t} else if ( onSplitAtEnd && start === end && end === text.length ) {\n\t\t\tonSplitAtEnd();\n\t\t} else if (\n\t\t\t// For some blocks it's desirable to split at the end of the\n\t\t\t// block when there are two line breaks at the end of the\n\t\t\t// block, so triple Enter exits the block.\n\t\t\tonSplitAtDoubleLineEnd &&\n\t\t\tstart === end &&\n\t\t\tend === text.length &&\n\t\t\ttext.slice( -2 ) === '\\n\\n'\n\t\t) {\n\t\t\tregistry.batch( () => {\n\t\t\t\tconst _value = { ...value };\n\t\t\t\t_value.start = _value.end - 2;\n\t\t\t\tonChange( remove( _value ) );\n\t\t\t\tonSplitAtDoubleLineEnd();\n\t\t\t} );\n\t\t} else if ( ! disableLineBreaks ) {\n\t\t\tonChange( insert( value, '\\n' ) );\n\t\t}\n\t}\n\n\tconst { defaultView } = element.ownerDocument;\n\n\t// Attach the listener to the window so parent elements have the chance to\n\t// prevent the default behavior.\n\tdefaultView.addEventListener( 'keydown', onKeyDown );\n\telement.addEventListener( 'keydown', onKeyDownDeprecated );\n\treturn () => {\n\t\tdefaultView.removeEventListener( 'keydown', onKeyDown );\n\t\telement.removeEventListener( 'keydown', onKeyDownDeprecated );\n\t};\n};\n","/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\nexport default ( props ) => ( element ) => {\n\tfunction onFocus() {\n\t\tconst { registry } = props.current;\n\t\tif ( ! registry.select( blockEditorStore ).isMultiSelecting() ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// This is a little hack to work around focus issues with nested\n\t\t// editable elements in Firefox. For some reason the editable child\n\t\t// element sometimes regains focus, while it should not be focusable\n\t\t// and focus should remain on the editable parent element.\n\t\t// To do: try to find the cause of the shifting focus.\n\t\tconst parentEditable = element.parentElement.closest(\n\t\t\t'[contenteditable=\"true\"]'\n\t\t);\n\n\t\tif ( parentEditable ) {\n\t\t\tparentEditable.focus();\n\t\t}\n\t}\n\n\telement.addEventListener( 'focus', onFocus );\n\treturn () => {\n\t\telement.removeEventListener( 'focus', onFocus );\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { getActiveFormat, getActiveObject } from '@wordpress/rich-text';\nimport { useContext, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockContext from '../block-context';\n\nconst DEFAULT_BLOCK_CONTEXT = {};\n\nexport const usesContextKey = Symbol( 'usesContext' );\n\nfunction Edit( { onChange, onFocus, value, forwardedRef, settings } ) {\n\tconst {\n\t\tname,\n\t\tedit: EditFunction,\n\t\t[ usesContextKey ]: usesContext,\n\t} = settings;\n\n\tconst blockContext = useContext( BlockContext );\n\n\t// Assign context values using the block type's declared context needs.\n\tconst context = useMemo( () => {\n\t\treturn usesContext\n\t\t\t? Object.fromEntries(\n\t\t\t\t\tObject.entries( blockContext ).filter( ( [ key ] ) =>\n\t\t\t\t\t\tusesContext.includes( key )\n\t\t\t\t\t)\n\t\t\t  )\n\t\t\t: DEFAULT_BLOCK_CONTEXT;\n\t}, [ usesContext, blockContext ] );\n\n\tif ( ! EditFunction ) {\n\t\treturn null;\n\t}\n\n\tconst activeFormat = getActiveFormat( value, name );\n\tconst isActive = activeFormat !== undefined;\n\tconst activeObject = getActiveObject( value );\n\tconst isObjectActive =\n\t\tactiveObject !== undefined && activeObject.type === name;\n\n\treturn (\n\t\t<EditFunction\n\t\t\tkey={ name }\n\t\t\tisActive={ isActive }\n\t\t\tactiveAttributes={ isActive ? activeFormat.attributes || {} : {} }\n\t\t\tisObjectActive={ isObjectActive }\n\t\t\tactiveObjectAttributes={\n\t\t\t\tisObjectActive ? activeObject.attributes || {} : {}\n\t\t\t}\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tonFocus={ onFocus }\n\t\t\tcontentRef={ forwardedRef }\n\t\t\tcontext={ context }\n\t\t/>\n\t);\n}\n\nexport default function FormatEdit( { formatTypes, ...props } ) {\n\treturn formatTypes.map( ( settings ) => (\n\t\t<Edit settings={ settings } { ...props } key={ settings.name } />\n\t) );\n}\n","/**\n * WordPress dependencies\n */\nimport { RawHTML } from '@wordpress/element';\nimport { children as childrenSource } from '@wordpress/blocks';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport RichText from './';\n\n/**\n * Internal dependencies\n */\nimport { getMultilineTag } from './utils';\n\nexport function valueToHTMLString( value, multiline ) {\n\tif ( RichText.isEmpty( value ) ) {\n\t\tconst multilineTag = getMultilineTag( multiline );\n\t\treturn multilineTag ? `<${ multilineTag }></${ multilineTag }>` : '';\n\t}\n\n\tif ( Array.isArray( value ) ) {\n\t\tdeprecated( 'wp.blockEditor.RichText value prop as children type', {\n\t\t\tsince: '6.1',\n\t\t\tversion: '6.3',\n\t\t\talternative: 'value prop as string',\n\t\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t\t} );\n\t\treturn childrenSource.toHTML( value );\n\t}\n\n\t// To do: deprecate string type.\n\tif ( typeof value === 'string' ) {\n\t\treturn value;\n\t}\n\n\t// To do: create a toReactComponent method on RichTextData, which we\n\t// might in the future also use for the editable tree. See\n\t// https://github.com/WordPress/gutenberg/pull/41655.\n\treturn value.toHTMLString();\n}\n\nexport function Content( {\n\tvalue,\n\ttagName: Tag,\n\tmultiline,\n\tformat,\n\t...props\n} ) {\n\tvalue = <RawHTML>{ valueToHTMLString( value, multiline ) }</RawHTML>;\n\treturn Tag ? <Tag { ...props }>{ value }</Tag> : value;\n}\n","/**\n * WordPress dependencies\n */\nimport { forwardRef } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { ENTER } from '@wordpress/keycodes';\nimport { create, split, toHTMLString } from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport { RichTextWrapper } from './';\nimport { store as blockEditorStore } from '../../store';\nimport { useBlockEditContext } from '../block-edit';\nimport { getMultilineTag } from './utils';\n\nfunction RichTextMultiline(\n\t{\n\t\tchildren,\n\t\tidentifier,\n\t\ttagName: TagName = 'div',\n\t\tvalue = '',\n\t\tonChange,\n\t\tmultiline,\n\t\t...props\n\t},\n\tforwardedRef\n) {\n\tdeprecated( 'wp.blockEditor.RichText multiline prop', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t\talternative: 'nested blocks (InnerBlocks)',\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/nested-blocks-inner-blocks/',\n\t} );\n\n\tconst { clientId } = useBlockEditContext();\n\tconst { getSelectionStart, getSelectionEnd } =\n\t\tuseSelect( blockEditorStore );\n\tconst { selectionChange } = useDispatch( blockEditorStore );\n\n\tconst multilineTagName = getMultilineTag( multiline );\n\tvalue = value || `<${ multilineTagName }></${ multilineTagName }>`;\n\tconst padded = `</${ multilineTagName }>${ value }<${ multilineTagName }>`;\n\tconst values = padded.split(\n\t\t`</${ multilineTagName }><${ multilineTagName }>`\n\t);\n\n\tvalues.shift();\n\tvalues.pop();\n\n\tfunction _onChange( newValues ) {\n\t\tonChange(\n\t\t\t`<${ multilineTagName }>${ newValues.join(\n\t\t\t\t`</${ multilineTagName }><${ multilineTagName }>`\n\t\t\t) }</${ multilineTagName }>`\n\t\t);\n\t}\n\n\treturn (\n\t\t<TagName ref={ forwardedRef }>\n\t\t\t{ values.map( ( _value, index ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<RichTextWrapper\n\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\tidentifier={ `${ identifier }-${ index }` }\n\t\t\t\t\t\ttagName={ multilineTagName }\n\t\t\t\t\t\tvalue={ _value }\n\t\t\t\t\t\tonChange={ ( newValue ) => {\n\t\t\t\t\t\t\tconst newValues = values.slice();\n\t\t\t\t\t\t\tnewValues[ index ] = newValue;\n\t\t\t\t\t\t\t_onChange( newValues );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tisSelected={ undefined }\n\t\t\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\t\t\tif ( event.keyCode !== ENTER ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t\tconst { offset: start } = getSelectionStart();\n\t\t\t\t\t\t\tconst { offset: end } = getSelectionEnd();\n\n\t\t\t\t\t\t\t// Cannot split if there is no selection.\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\ttypeof start !== 'number' ||\n\t\t\t\t\t\t\t\ttypeof end !== 'number'\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst richTextValue = create( { html: _value } );\n\t\t\t\t\t\t\trichTextValue.start = start;\n\t\t\t\t\t\t\trichTextValue.end = end;\n\n\t\t\t\t\t\t\tconst array = split( richTextValue ).map( ( v ) =>\n\t\t\t\t\t\t\t\ttoHTMLString( { value: v } )\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconst newValues = values.slice();\n\t\t\t\t\t\t\tnewValues.splice( index, 1, ...array );\n\t\t\t\t\t\t\t_onChange( newValues );\n\t\t\t\t\t\t\tselectionChange(\n\t\t\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t\t\t`${ identifier }-${ index + 1 }`,\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonMerge={ ( forward ) => {\n\t\t\t\t\t\t\tconst newValues = values.slice();\n\t\t\t\t\t\t\tlet offset = 0;\n\t\t\t\t\t\t\tif ( forward ) {\n\t\t\t\t\t\t\t\tif ( ! newValues[ index + 1 ] ) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnewValues.splice(\n\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t2,\n\t\t\t\t\t\t\t\t\tnewValues[ index ] + newValues[ index + 1 ]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\toffset = newValues[ index ].length - 1;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ( ! newValues[ index - 1 ] ) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnewValues.splice(\n\t\t\t\t\t\t\t\t\tindex - 1,\n\t\t\t\t\t\t\t\t\t2,\n\t\t\t\t\t\t\t\t\tnewValues[ index - 1 ] + newValues[ index ]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\toffset = newValues[ index - 1 ].length - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_onChange( newValues );\n\t\t\t\t\t\t\tselectionChange(\n\t\t\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t\t\t`${ identifier }-${\n\t\t\t\t\t\t\t\t\tindex - ( forward ? 0 : 1 )\n\t\t\t\t\t\t\t\t}`,\n\t\t\t\t\t\t\t\toffset,\n\t\t\t\t\t\t\t\toffset\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</TagName>\n\t);\n}\n\nexport default forwardRef( RichTextMultiline );\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseRef,\n\tuseCallback,\n\tforwardRef,\n\tcreateContext,\n\tuseContext,\n} from '@wordpress/element';\nimport { useDispatch, useRegistry, useSelect } from '@wordpress/data';\nimport { useMergeRefs, useInstanceId } from '@wordpress/compose';\nimport {\n\t__unstableUseRichText as useRichText,\n\tremoveFormat,\n} from '@wordpress/rich-text';\nimport { Popover } from '@wordpress/components';\nimport { getBlockBindingsSource } from '@wordpress/blocks';\nimport deprecated from '@wordpress/deprecated';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditorAutocompleteProps } from '../autocomplete';\nimport { useBlockEditContext } from '../block-edit';\nimport { blockBindingsKey, isPreviewModeKey } from '../block-edit/context';\nimport FormatToolbarContainer from './format-toolbar-container';\nimport { store as blockEditorStore } from '../../store';\nimport { useMarkPersistent } from './use-mark-persistent';\nimport { useFormatTypes } from './use-format-types';\nimport { useEventListeners } from './event-listeners';\nimport FormatEdit from './format-edit';\nimport { getAllowedFormats } from './utils';\nimport { Content, valueToHTMLString } from './content';\nimport { withDeprecations } from './with-deprecations';\nimport { canBindBlock } from '../../utils/block-bindings';\nimport BlockContext from '../block-context';\n\nexport const keyboardShortcutContext = createContext();\nexport const inputEventContext = createContext();\n\nconst instanceIdKey = Symbol( 'instanceId' );\n\n/**\n * Removes props used for the native version of RichText so that they are not\n * passed to the DOM element and log warnings.\n *\n * @param {Object} props Props to filter.\n *\n * @return {Object} Filtered props.\n */\nfunction removeNativeProps( props ) {\n\tconst {\n\t\t__unstableMobileNoFocusOnMount,\n\t\tdeleteEnter,\n\t\tplaceholderTextColor,\n\t\ttextAlign,\n\t\tselectionColor,\n\t\ttagsToEliminate,\n\t\tdisableEditingMenu,\n\t\tfontSize,\n\t\tfontFamily,\n\t\tfontWeight,\n\t\tfontStyle,\n\t\tminWidth,\n\t\tmaxWidth,\n\t\tdisableSuggestions,\n\t\tdisableAutocorrection,\n\t\t...restProps\n\t} = props;\n\treturn restProps;\n}\n\nexport function RichTextWrapper(\n\t{\n\t\tchildren,\n\t\ttagName = 'div',\n\t\tvalue: adjustedValue = '',\n\t\tonChange: adjustedOnChange,\n\t\tisSelected: originalIsSelected,\n\t\tmultiline,\n\t\tinlineToolbar,\n\t\twrapperClassName,\n\t\tautocompleters,\n\t\tonReplace,\n\t\tplaceholder,\n\t\tallowedFormats,\n\t\twithoutInteractiveFormatting,\n\t\tonRemove,\n\t\tonMerge,\n\t\tonSplit,\n\t\t__unstableOnSplitAtEnd: onSplitAtEnd,\n\t\t__unstableOnSplitAtDoubleLineEnd: onSplitAtDoubleLineEnd,\n\t\tidentifier,\n\t\tpreserveWhiteSpace,\n\t\t__unstablePastePlainText: pastePlainText,\n\t\t__unstableEmbedURLOnPaste,\n\t\t__unstableDisableFormats: disableFormats,\n\t\tdisableLineBreaks,\n\t\t__unstableAllowPrefixTransformations,\n\t\treadOnly,\n\t\t...props\n\t},\n\tforwardedRef\n) {\n\tprops = removeNativeProps( props );\n\n\tif ( onSplit ) {\n\t\tdeprecated( 'wp.blockEditor.RichText onSplit prop', {\n\t\t\tsince: '6.4',\n\t\t\talternative: 'block.json support key: \"splitting\"',\n\t\t} );\n\t}\n\n\tconst instanceId = useInstanceId( RichTextWrapper );\n\tconst anchorRef = useRef();\n\tconst context = useBlockEditContext();\n\tconst { clientId, isSelected: isBlockSelected, name: blockName } = context;\n\tconst blockBindings = context[ blockBindingsKey ];\n\tconst blockContext = useContext( BlockContext );\n\tconst registry = useRegistry();\n\tconst selector = ( select ) => {\n\t\t// Avoid subscribing to the block editor store if the block is not\n\t\t// selected.\n\t\tif ( ! isBlockSelected ) {\n\t\t\treturn { isSelected: false };\n\t\t}\n\n\t\tconst { getSelectionStart, getSelectionEnd } =\n\t\t\tselect( blockEditorStore );\n\t\tconst selectionStart = getSelectionStart();\n\t\tconst selectionEnd = getSelectionEnd();\n\n\t\tlet isSelected;\n\n\t\tif ( originalIsSelected === undefined ) {\n\t\t\tisSelected =\n\t\t\t\tselectionStart.clientId === clientId &&\n\t\t\t\tselectionEnd.clientId === clientId &&\n\t\t\t\t( identifier\n\t\t\t\t\t? selectionStart.attributeKey === identifier\n\t\t\t\t\t: selectionStart[ instanceIdKey ] === instanceId );\n\t\t} else if ( originalIsSelected ) {\n\t\t\tisSelected = selectionStart.clientId === clientId;\n\t\t}\n\n\t\treturn {\n\t\t\tselectionStart: isSelected ? selectionStart.offset : undefined,\n\t\t\tselectionEnd: isSelected ? selectionEnd.offset : undefined,\n\t\t\tisSelected,\n\t\t};\n\t};\n\tconst { selectionStart, selectionEnd, isSelected } = useSelect( selector, [\n\t\tclientId,\n\t\tidentifier,\n\t\tinstanceId,\n\t\toriginalIsSelected,\n\t\tisBlockSelected,\n\t] );\n\n\tconst { disableBoundBlock, bindingsPlaceholder, bindingsLabel } = useSelect(\n\t\t( select ) => {\n\t\t\tif (\n\t\t\t\t! blockBindings?.[ identifier ] ||\n\t\t\t\t! canBindBlock( blockName )\n\t\t\t) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tconst relatedBinding = blockBindings[ identifier ];\n\t\t\tconst blockBindingsSource = getBlockBindingsSource(\n\t\t\t\trelatedBinding.source\n\t\t\t);\n\t\t\tconst blockBindingsContext = {};\n\t\t\tif ( blockBindingsSource?.usesContext?.length ) {\n\t\t\t\tfor ( const key of blockBindingsSource.usesContext ) {\n\t\t\t\t\tblockBindingsContext[ key ] = blockContext[ key ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst _disableBoundBlock =\n\t\t\t\t! blockBindingsSource?.canUserEditValue?.( {\n\t\t\t\t\tselect,\n\t\t\t\t\tcontext: blockBindingsContext,\n\t\t\t\t\targs: relatedBinding.args,\n\t\t\t\t} );\n\n\t\t\t// Don't modify placeholders if value is not empty.\n\t\t\tif ( adjustedValue.length > 0 ) {\n\t\t\t\treturn {\n\t\t\t\t\tdisableBoundBlock: _disableBoundBlock,\n\t\t\t\t\t// Null values will make them fall back to the default behavior.\n\t\t\t\t\tbindingsPlaceholder: null,\n\t\t\t\t\tbindingsLabel: null,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst { getBlockAttributes } = select( blockEditorStore );\n\t\t\tconst blockAttributes = getBlockAttributes( clientId );\n\t\t\tconst fieldsList = blockBindingsSource?.getFieldsList?.( {\n\t\t\t\tselect,\n\t\t\t\tcontext: blockBindingsContext,\n\t\t\t} );\n\t\t\tconst bindingKey =\n\t\t\t\tfieldsList?.[ relatedBinding?.args?.key ]?.label ??\n\t\t\t\tblockBindingsSource?.label;\n\n\t\t\tconst _bindingsPlaceholder = _disableBoundBlock\n\t\t\t\t? bindingKey\n\t\t\t\t: sprintf(\n\t\t\t\t\t\t/* translators: %s: connected field label or source label */\n\t\t\t\t\t\t__( 'Add %s' ),\n\t\t\t\t\t\tbindingKey\n\t\t\t\t  );\n\t\t\tconst _bindingsLabel = _disableBoundBlock\n\t\t\t\t? relatedBinding?.args?.key || blockBindingsSource?.label\n\t\t\t\t: sprintf(\n\t\t\t\t\t\t/* translators: %s: source label or key */\n\t\t\t\t\t\t__( 'Empty %s; start writing to edit its value' ),\n\t\t\t\t\t\trelatedBinding?.args?.key || blockBindingsSource?.label\n\t\t\t\t  );\n\n\t\t\treturn {\n\t\t\t\tdisableBoundBlock: _disableBoundBlock,\n\t\t\t\tbindingsPlaceholder:\n\t\t\t\t\tblockAttributes?.placeholder || _bindingsPlaceholder,\n\t\t\t\tbindingsLabel: _bindingsLabel,\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tblockBindings,\n\t\t\tidentifier,\n\t\t\tblockName,\n\t\t\tadjustedValue,\n\t\t\tclientId,\n\t\t\tblockContext,\n\t\t]\n\t);\n\n\tconst shouldDisableEditing = readOnly || disableBoundBlock;\n\n\tconst { getSelectionStart, getSelectionEnd, getBlockRootClientId } =\n\t\tuseSelect( blockEditorStore );\n\tconst { selectionChange } = useDispatch( blockEditorStore );\n\tconst adjustedAllowedFormats = getAllowedFormats( {\n\t\tallowedFormats,\n\t\tdisableFormats,\n\t} );\n\tconst hasFormats =\n\t\t! adjustedAllowedFormats || adjustedAllowedFormats.length > 0;\n\n\tconst onSelectionChange = useCallback(\n\t\t( start, end ) => {\n\t\t\tconst selection = {};\n\t\t\tconst unset = start === undefined && end === undefined;\n\n\t\t\tconst baseSelection = {\n\t\t\t\tclientId,\n\t\t\t\t[ identifier ? 'attributeKey' : instanceIdKey ]: identifier\n\t\t\t\t\t? identifier\n\t\t\t\t\t: instanceId,\n\t\t\t};\n\n\t\t\tif ( typeof start === 'number' || unset ) {\n\t\t\t\t// If we are only setting the start (or the end below), which\n\t\t\t\t// means a partial selection, and we're not updating a selection\n\t\t\t\t// with the same client ID, abort. This means the selected block\n\t\t\t\t// is a parent block.\n\t\t\t\tif (\n\t\t\t\t\tend === undefined &&\n\t\t\t\t\tgetBlockRootClientId( clientId ) !==\n\t\t\t\t\t\tgetBlockRootClientId( getSelectionEnd().clientId )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tselection.start = {\n\t\t\t\t\t...baseSelection,\n\t\t\t\t\toffset: start,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif ( typeof end === 'number' || unset ) {\n\t\t\t\tif (\n\t\t\t\t\tstart === undefined &&\n\t\t\t\t\tgetBlockRootClientId( clientId ) !==\n\t\t\t\t\t\tgetBlockRootClientId( getSelectionStart().clientId )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tselection.end = {\n\t\t\t\t\t...baseSelection,\n\t\t\t\t\toffset: end,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tselectionChange( selection );\n\t\t},\n\t\t[\n\t\t\tclientId,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetSelectionEnd,\n\t\t\tgetSelectionStart,\n\t\t\tidentifier,\n\t\t\tinstanceId,\n\t\t\tselectionChange,\n\t\t]\n\t);\n\n\tconst {\n\t\tformatTypes,\n\t\tprepareHandlers,\n\t\tvalueHandlers,\n\t\tchangeHandlers,\n\t\tdependencies,\n\t} = useFormatTypes( {\n\t\tclientId,\n\t\tidentifier,\n\t\twithoutInteractiveFormatting,\n\t\tallowedFormats: adjustedAllowedFormats,\n\t} );\n\n\tfunction addEditorOnlyFormats( value ) {\n\t\treturn valueHandlers.reduce(\n\t\t\t( accumulator, fn ) => fn( accumulator, value.text ),\n\t\t\tvalue.formats\n\t\t);\n\t}\n\n\tfunction removeEditorOnlyFormats( value ) {\n\t\tformatTypes.forEach( ( formatType ) => {\n\t\t\t// Remove formats created by prepareEditableTree, because they are editor only.\n\t\t\tif ( formatType.__experimentalCreatePrepareEditableTree ) {\n\t\t\t\tvalue = removeFormat(\n\t\t\t\t\tvalue,\n\t\t\t\t\tformatType.name,\n\t\t\t\t\t0,\n\t\t\t\t\tvalue.text.length\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\treturn value.formats;\n\t}\n\n\tfunction addInvisibleFormats( value ) {\n\t\treturn prepareHandlers.reduce(\n\t\t\t( accumulator, fn ) => fn( accumulator, value.text ),\n\t\t\tvalue.formats\n\t\t);\n\t}\n\n\tconst {\n\t\tvalue,\n\t\tgetValue,\n\t\tonChange,\n\t\tref: richTextRef,\n\t} = useRichText( {\n\t\tvalue: adjustedValue,\n\t\tonChange( html, { __unstableFormats, __unstableText } ) {\n\t\t\tadjustedOnChange( html );\n\t\t\tObject.values( changeHandlers ).forEach( ( changeHandler ) => {\n\t\t\t\tchangeHandler( __unstableFormats, __unstableText );\n\t\t\t} );\n\t\t},\n\t\tselectionStart,\n\t\tselectionEnd,\n\t\tonSelectionChange,\n\t\tplaceholder: bindingsPlaceholder || placeholder,\n\t\t__unstableIsSelected: isSelected,\n\t\t__unstableDisableFormats: disableFormats,\n\t\tpreserveWhiteSpace,\n\t\t__unstableDependencies: [ ...dependencies, tagName ],\n\t\t__unstableAfterParse: addEditorOnlyFormats,\n\t\t__unstableBeforeSerialize: removeEditorOnlyFormats,\n\t\t__unstableAddInvisibleFormats: addInvisibleFormats,\n\t} );\n\tconst autocompleteProps = useBlockEditorAutocompleteProps( {\n\t\tonReplace,\n\t\tcompleters: autocompleters,\n\t\trecord: value,\n\t\tonChange,\n\t} );\n\n\tuseMarkPersistent( { html: adjustedValue, value } );\n\n\tconst keyboardShortcuts = useRef( new Set() );\n\tconst inputEvents = useRef( new Set() );\n\n\tfunction onFocus() {\n\t\tanchorRef.current?.focus();\n\t}\n\n\tconst TagName = tagName;\n\treturn (\n\t\t<>\n\t\t\t{ isSelected && (\n\t\t\t\t<keyboardShortcutContext.Provider value={ keyboardShortcuts }>\n\t\t\t\t\t<inputEventContext.Provider value={ inputEvents }>\n\t\t\t\t\t\t<Popover.__unstableSlotNameProvider value=\"__unstable-block-tools-after\">\n\t\t\t\t\t\t\t{ children &&\n\t\t\t\t\t\t\t\tchildren( { value, onChange, onFocus } ) }\n\n\t\t\t\t\t\t\t<FormatEdit\n\t\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\t\tformatTypes={ formatTypes }\n\t\t\t\t\t\t\t\tforwardedRef={ anchorRef }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Popover.__unstableSlotNameProvider>\n\t\t\t\t\t</inputEventContext.Provider>\n\t\t\t\t</keyboardShortcutContext.Provider>\n\t\t\t) }\n\t\t\t{ isSelected && hasFormats && (\n\t\t\t\t<FormatToolbarContainer\n\t\t\t\t\tinline={ inlineToolbar }\n\t\t\t\t\teditableContentElement={ anchorRef.current }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<TagName\n\t\t\t\t// Overridable props.\n\t\t\t\trole=\"textbox\"\n\t\t\t\taria-multiline={ ! disableLineBreaks }\n\t\t\t\taria-readonly={ shouldDisableEditing }\n\t\t\t\t{ ...props }\n\t\t\t\t// Unset draggable (coming from block props) for contentEditable\n\t\t\t\t// elements because it will interfere with multi block selection\n\t\t\t\t// when the contentEditable and draggable elements are the same\n\t\t\t\t// element.\n\t\t\t\tdraggable={ undefined }\n\t\t\t\taria-label={\n\t\t\t\t\tbindingsLabel || props[ 'aria-label' ] || placeholder\n\t\t\t\t}\n\t\t\t\t{ ...autocompleteProps }\n\t\t\t\tref={ useMergeRefs( [\n\t\t\t\t\t// Rich text ref must be first because its focus listener\n\t\t\t\t\t// must be set up before any other ref calls .focus() on\n\t\t\t\t\t// mount.\n\t\t\t\t\trichTextRef,\n\t\t\t\t\tforwardedRef,\n\t\t\t\t\tautocompleteProps.ref,\n\t\t\t\t\tprops.ref,\n\t\t\t\t\tuseEventListeners( {\n\t\t\t\t\t\tregistry,\n\t\t\t\t\t\tgetValue,\n\t\t\t\t\t\tonChange,\n\t\t\t\t\t\t__unstableAllowPrefixTransformations,\n\t\t\t\t\t\tformatTypes,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tselectionChange,\n\t\t\t\t\t\tisSelected,\n\t\t\t\t\t\tdisableFormats,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\ttagName,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t\t__unstableEmbedURLOnPaste,\n\t\t\t\t\t\tpastePlainText,\n\t\t\t\t\t\tonMerge,\n\t\t\t\t\t\tonRemove,\n\t\t\t\t\t\tremoveEditorOnlyFormats,\n\t\t\t\t\t\tdisableLineBreaks,\n\t\t\t\t\t\tonSplitAtEnd,\n\t\t\t\t\t\tonSplitAtDoubleLineEnd,\n\t\t\t\t\t\tkeyboardShortcuts,\n\t\t\t\t\t\tinputEvents,\n\t\t\t\t\t} ),\n\t\t\t\t\tanchorRef,\n\t\t\t\t] ) }\n\t\t\t\tcontentEditable={ ! shouldDisableEditing }\n\t\t\t\tsuppressContentEditableWarning\n\t\t\t\tclassName={ clsx(\n\t\t\t\t\t'block-editor-rich-text__editable',\n\t\t\t\t\tprops.className,\n\t\t\t\t\t'rich-text'\n\t\t\t\t) }\n\t\t\t\t// Setting tabIndex to 0 is unnecessary, the element is already\n\t\t\t\t// focusable because it's contentEditable. This also fixes a\n\t\t\t\t// Safari bug where it's not possible to Shift+Click multi\n\t\t\t\t// select blocks when Shift Clicking into an element with\n\t\t\t\t// tabIndex because Safari will focus the element. However,\n\t\t\t\t// Safari will correctly ignore nested contentEditable elements.\n\t\t\t\ttabIndex={\n\t\t\t\t\tprops.tabIndex === 0 && ! shouldDisableEditing\n\t\t\t\t\t\t? null\n\t\t\t\t\t\t: props.tabIndex\n\t\t\t\t}\n\t\t\t\tdata-wp-block-attribute-key={ identifier }\n\t\t\t/>\n\t\t</>\n\t);\n}\n\n// This is the private API for the RichText component.\n// It allows access to all props, not just the public ones.\nexport const PrivateRichText = withDeprecations(\n\tforwardRef( RichTextWrapper )\n);\n\nPrivateRichText.Content = Content;\nPrivateRichText.isEmpty = ( value ) => {\n\treturn ! value || value.length === 0;\n};\n\n// This is the public API for the RichText component.\n// We wrap the PrivateRichText component to hide some props from the public API.\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/rich-text/README.md\n */\nconst PublicForwardedRichTextContainer = forwardRef( ( props, ref ) => {\n\tconst context = useBlockEditContext();\n\tconst isPreviewMode = context[ isPreviewModeKey ];\n\n\tif ( isPreviewMode ) {\n\t\t// Remove all non-content props.\n\t\tconst {\n\t\t\tchildren,\n\t\t\ttagName: Tag = 'div',\n\t\t\tvalue,\n\t\t\tonChange,\n\t\t\tisSelected,\n\t\t\tmultiline,\n\t\t\tinlineToolbar,\n\t\t\twrapperClassName,\n\t\t\tautocompleters,\n\t\t\tonReplace,\n\t\t\tplaceholder,\n\t\t\tallowedFormats,\n\t\t\twithoutInteractiveFormatting,\n\t\t\tonRemove,\n\t\t\tonMerge,\n\t\t\tonSplit,\n\t\t\t__unstableOnSplitAtEnd,\n\t\t\t__unstableOnSplitAtDoubleLineEnd,\n\t\t\tidentifier,\n\t\t\tpreserveWhiteSpace,\n\t\t\t__unstablePastePlainText,\n\t\t\t__unstableEmbedURLOnPaste,\n\t\t\t__unstableDisableFormats,\n\t\t\tdisableLineBreaks,\n\t\t\t__unstableAllowPrefixTransformations,\n\t\t\treadOnly,\n\t\t\t...contentProps\n\t\t} = removeNativeProps( props );\n\t\treturn (\n\t\t\t<Tag\n\t\t\t\t{ ...contentProps }\n\t\t\t\tdangerouslySetInnerHTML={ {\n\t\t\t\t\t__html: valueToHTMLString( value, multiline ),\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <PrivateRichText ref={ ref } { ...props } readOnly={ false } />;\n} );\n\nPublicForwardedRichTextContainer.Content = Content;\nPublicForwardedRichTextContainer.isEmpty = ( value ) => {\n\treturn ! value || value.length === 0;\n};\n\nexport default PublicForwardedRichTextContainer;\nexport { RichTextShortcut } from './shortcut';\nexport { RichTextToolbarButton } from './toolbar-button';\nexport { __unstableRichTextInputEvent } from './input-event';\n","/**\n * WordPress dependencies\n */\nimport { useLayoutEffect, useRef } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport function useMarkPersistent( { html, value } ) {\n\tconst previousTextRef = useRef();\n\tconst hasActiveFormats = !! value.activeFormats?.length;\n\tconst { __unstableMarkLastChangeAsPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\n\t// Must be set synchronously to make sure it applies to the last change.\n\tuseLayoutEffect( () => {\n\t\t// Ignore mount.\n\t\tif ( ! previousTextRef.current ) {\n\t\t\tpreviousTextRef.current = value.text;\n\t\t\treturn;\n\t\t}\n\n\t\t// Text input, so don't create an undo level for every character.\n\t\t// Create an undo level after 1 second of no input.\n\t\tif ( previousTextRef.current !== value.text ) {\n\t\t\tconst timeout = window.setTimeout( () => {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t}, 1000 );\n\t\t\tpreviousTextRef.current = value.text;\n\t\t\treturn () => {\n\t\t\t\twindow.clearTimeout( timeout );\n\t\t\t};\n\t\t}\n\n\t\t__unstableMarkLastChangeAsPersistent();\n\t}, [ html, hasActiveFormats ] );\n}\n","/**\n * WordPress dependencies\n */\nimport { forwardRef } from '@wordpress/element';\nimport { children as childrenSource } from '@wordpress/blocks';\nimport { __unstableCreateElement } from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport RichTextMultiline from './multiline';\n\nexport function withDeprecations( Component ) {\n\treturn forwardRef( ( props, ref ) => {\n\t\tlet value = props.value;\n\t\tlet onChange = props.onChange;\n\n\t\t// Handle deprecated format.\n\t\tif ( Array.isArray( value ) ) {\n\t\t\tdeprecated( 'wp.blockEditor.RichText value prop as children type', {\n\t\t\t\tsince: '6.1',\n\t\t\t\tversion: '6.3',\n\t\t\t\talternative: 'value prop as string',\n\t\t\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t\t\t} );\n\n\t\t\tvalue = childrenSource.toHTML( props.value );\n\t\t\tonChange = ( newValue ) =>\n\t\t\t\tprops.onChange(\n\t\t\t\t\tchildrenSource.fromDOM(\n\t\t\t\t\t\t__unstableCreateElement( document, newValue ).childNodes\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t}\n\n\t\tconst NewComponent = props.multiline ? RichTextMultiline : Component;\n\n\t\treturn (\n\t\t\t<NewComponent\n\t\t\t\t{ ...props }\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tref={ ref }\n\t\t\t/>\n\t\t);\n\t} );\n}\n","/**\n * WordPress dependencies\n */\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport RichText from '../rich-text';\n\nconst EditableText = forwardRef( ( props, ref ) => {\n\treturn <RichText ref={ ref } { ...props } __unstableDisableFormats />;\n} );\n\nEditableText.Content = ( { value = '', tagName: Tag = 'div', ...props } ) => {\n\treturn <Tag { ...props }>{ value }</Tag>;\n};\n\n/**\n * Renders an editable text input in which text formatting is not allowed.\n */\nexport default EditableText;\n","/**\n * External dependencies\n */\nimport TextareaAutosize from 'react-autosize-textarea';\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport EditableText from '../editable-text';\n\n/**\n * Render an auto-growing textarea allow users to fill any textual content.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/plain-text/README.md\n *\n * @example\n * ```jsx\n * import { registerBlockType } from '@wordpress/blocks';\n * import { PlainText } from '@wordpress/block-editor';\n *\n * registerBlockType( 'my-plugin/example-block', {\n *   // ...\n *\n *   attributes: {\n *     content: {\n *       type: 'string',\n *     },\n *   },\n *\n *   edit( { className, attributes, setAttributes } ) {\n *     return (\n *       <PlainText\n *         className={ className }\n *         value={ attributes.content }\n *         onChange={ ( content ) => setAttributes( { content } ) }\n *       />\n *     );\n *   },\n * } );\n * ````\n *\n * @param {Object}   props          Component props.\n * @param {string}   props.value    String value of the textarea.\n * @param {Function} props.onChange Function called when the text value changes.\n * @param {Object}   [props.ref]    The component forwards the `ref` property to the `TextareaAutosize` component.\n * @return {Element} Plain text component\n */\nconst PlainText = forwardRef( ( { __experimentalVersion, ...props }, ref ) => {\n\tif ( __experimentalVersion === 2 ) {\n\t\treturn <EditableText ref={ ref } { ...props } />;\n\t}\n\n\tconst { className, onChange, ...remainingProps } = props;\n\n\treturn (\n\t\t<TextareaAutosize\n\t\t\tref={ ref }\n\t\t\tclassName={ clsx( 'block-editor-plain-text', className ) }\n\t\t\tonChange={ ( event ) => onChange( event.target.value ) }\n\t\t\t{ ...remainingProps }\n\t\t/>\n\t);\n} );\n\nexport default PlainText;\n","/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { VisuallyHidden } from '@wordpress/components';\nimport { _x, sprintf } from '@wordpress/i18n';\n\nexport default function ResponsiveBlockControlLabel( {\n\tproperty,\n\tviewport,\n\tdesc,\n} ) {\n\tconst instanceId = useInstanceId( ResponsiveBlockControlLabel );\n\tconst accessibleLabel =\n\t\tdesc ||\n\t\tsprintf(\n\t\t\t/* translators: 1: property name. 2: viewport name. */\n\t\t\t_x(\n\t\t\t\t'Controls the %1$s property for %2$s viewports.',\n\t\t\t\t'Text labelling a interface as controlling a given layout property (eg: margin) for a given screen size.'\n\t\t\t),\n\t\t\tproperty,\n\t\t\tviewport.label\n\t\t);\n\treturn (\n\t\t<>\n\t\t\t<span aria-describedby={ `rbc-desc-${ instanceId }` }>\n\t\t\t\t{ viewport.label }\n\t\t\t</span>\n\t\t\t<VisuallyHidden as=\"span\" id={ `rbc-desc-${ instanceId }` }>\n\t\t\t\t{ accessibleLabel }\n\t\t\t</VisuallyHidden>\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { ToggleControl } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport ResponsiveBlockControlLabel from './label';\n\nfunction ResponsiveBlockControl( props ) {\n\tconst {\n\t\ttitle,\n\t\tproperty,\n\t\ttoggleLabel,\n\t\tonIsResponsiveChange,\n\t\trenderDefaultControl,\n\t\trenderResponsiveControls,\n\t\tisResponsive = false,\n\t\tdefaultLabel = {\n\t\t\tid: 'all',\n\t\t\tlabel: _x( 'All', 'screen sizes' ),\n\t\t},\n\t\tviewports = [\n\t\t\t{\n\t\t\t\tid: 'small',\n\t\t\t\tlabel: __( 'Small screens' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'medium',\n\t\t\t\tlabel: __( 'Medium screens' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'large',\n\t\t\t\tlabel: __( 'Large screens' ),\n\t\t\t},\n\t\t],\n\t} = props;\n\n\tif ( ! title || ! property || ! renderDefaultControl ) {\n\t\treturn null;\n\t}\n\n\tconst toggleControlLabel =\n\t\ttoggleLabel ||\n\t\tsprintf(\n\t\t\t/* translators: %s: Property value for the control (eg: margin, padding, etc.). */\n\t\t\t__( 'Use the same %s on all screen sizes.' ),\n\t\t\tproperty\n\t\t);\n\n\tconst toggleHelpText = __(\n\t\t'Choose whether to use the same value for all screen sizes or a unique value for each screen size.'\n\t);\n\n\tconst defaultControl = renderDefaultControl(\n\t\t<ResponsiveBlockControlLabel\n\t\t\tproperty={ property }\n\t\t\tviewport={ defaultLabel }\n\t\t/>,\n\t\tdefaultLabel\n\t);\n\n\tconst defaultResponsiveControls = () => {\n\t\treturn viewports.map( ( viewport ) => (\n\t\t\t<Fragment key={ viewport.id }>\n\t\t\t\t{ renderDefaultControl(\n\t\t\t\t\t<ResponsiveBlockControlLabel\n\t\t\t\t\t\tproperty={ property }\n\t\t\t\t\t\tviewport={ viewport }\n\t\t\t\t\t/>,\n\t\t\t\t\tviewport\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t) );\n\t};\n\n\treturn (\n\t\t<fieldset className=\"block-editor-responsive-block-control\">\n\t\t\t<legend className=\"block-editor-responsive-block-control__title\">\n\t\t\t\t{ title }\n\t\t\t</legend>\n\n\t\t\t<div className=\"block-editor-responsive-block-control__inner\">\n\t\t\t\t<ToggleControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tclassName=\"block-editor-responsive-block-control__toggle\"\n\t\t\t\t\tlabel={ toggleControlLabel }\n\t\t\t\t\tchecked={ ! isResponsive }\n\t\t\t\t\tonChange={ onIsResponsiveChange }\n\t\t\t\t\thelp={ toggleHelpText }\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclassName={ clsx(\n\t\t\t\t\t\t'block-editor-responsive-block-control__group',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'is-responsive': isResponsive,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ ! isResponsive && defaultControl }\n\t\t\t\t\t{ isResponsive &&\n\t\t\t\t\t\t( renderResponsiveControls\n\t\t\t\t\t\t\t? renderResponsiveControls( viewports )\n\t\t\t\t\t\t\t: defaultResponsiveControls() ) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</fieldset>\n\t);\n}\n\nexport default ResponsiveBlockControl;\n","/**\n * WordPress dependencies\n */\nimport { isKeyboardEvent } from '@wordpress/keycodes';\nimport { useEffect, useContext, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { keyboardShortcutContext } from './';\n\nexport function RichTextShortcut( { character, type, onUse } ) {\n\tconst keyboardShortcuts = useContext( keyboardShortcutContext );\n\tconst onUseRef = useRef();\n\tonUseRef.current = onUse;\n\n\tuseEffect( () => {\n\t\tfunction callback( event ) {\n\t\t\tif ( isKeyboardEvent[ type ]( event, character ) ) {\n\t\t\t\tonUseRef.current();\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\tkeyboardShortcuts.current.add( callback );\n\t\treturn () => {\n\t\t\tkeyboardShortcuts.current.delete( callback );\n\t\t};\n\t}, [ character, type ] );\n\n\treturn null;\n}\n","/**\n * WordPress dependencies\n */\nimport { Fill, ToolbarButton } from '@wordpress/components';\nimport { displayShortcut } from '@wordpress/keycodes';\n\nexport function RichTextToolbarButton( {\n\tname,\n\tshortcutType,\n\tshortcutCharacter,\n\t...props\n} ) {\n\tlet shortcut;\n\tlet fillName = 'RichText.ToolbarControls';\n\n\tif ( name ) {\n\t\tfillName += `.${ name }`;\n\t}\n\n\tif ( shortcutType && shortcutCharacter ) {\n\t\tshortcut = displayShortcut[ shortcutType ]( shortcutCharacter );\n\t}\n\n\treturn (\n\t\t<Fill name={ fillName }>\n\t\t\t<ToolbarButton { ...props } shortcut={ shortcut } />\n\t\t</Fill>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useContext, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { inputEventContext } from './';\n\nexport function __unstableRichTextInputEvent( { inputType, onInput } ) {\n\tconst callbacks = useContext( inputEventContext );\n\tconst onInputRef = useRef();\n\tonInputRef.current = onInput;\n\n\tuseEffect( () => {\n\t\tfunction callback( event ) {\n\t\t\tif ( event.inputType === inputType ) {\n\t\t\t\tonInputRef.current();\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\tcallbacks.current.add( callback );\n\t\treturn () => {\n\t\t\tcallbacks.current.delete( callback );\n\t\t};\n\t}, [ inputType ] );\n\n\treturn null;\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tDropdown,\n\tButton,\n\tMenuItemsChoice,\n\tSVG,\n\tPath,\n\tNavigableMenu,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\nimport { Icon, edit as editIcon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst selectIcon = (\n\t<SVG\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\twidth=\"24\"\n\t\theight=\"24\"\n\t\tviewBox=\"0 0 24 24\"\n\t>\n\t\t<Path d=\"M9.4 20.5L5.2 3.8l14.6 9-2 .3c-.2 0-.4.1-.7.1-.9.2-1.6.3-2.2.5-.8.3-1.4.5-1.8.8-.4.3-.8.8-1.3 1.5-.4.5-.8 1.2-1.2 2l-.3.6-.9 1.9zM7.6 7.1l2.4 9.3c.2-.4.5-.8.7-1.1.6-.8 1.1-1.4 1.6-1.8.5-.4 1.3-.8 2.2-1.1l1.2-.3-8.1-5z\" />\n\t</SVG>\n);\n\nfunction ToolSelector( props, ref ) {\n\tconst mode = useSelect(\n\t\t( select ) => select( blockEditorStore ).__unstableGetEditorMode(),\n\t\t[]\n\t);\n\tconst { __unstableSetEditorMode } = useDispatch( blockEditorStore );\n\n\treturn (\n\t\t<Dropdown\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tref={ ref }\n\t\t\t\t\ticon={ mode === 'navigation' ? editIcon : selectIcon }\n\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\t\t\tlabel={ __( 'Tools' ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\tpopoverProps={ { placement: 'bottom-start' } }\n\t\t\trenderContent={ () => (\n\t\t\t\t<>\n\t\t\t\t\t<NavigableMenu\n\t\t\t\t\t\tclassName=\"block-editor-tool-selector__menu\"\n\t\t\t\t\t\trole=\"menu\"\n\t\t\t\t\t\taria-label={ __( 'Tools' ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\tmode === 'navigation' ? 'navigation' : 'edit'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonSelect={ ( newMode ) => {\n\t\t\t\t\t\t\t\t__unstableSetEditorMode( newMode );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tchoices={ [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: 'navigation',\n\t\t\t\t\t\t\t\t\tlabel: (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<Icon icon={ editIcon } />\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Write' ) }\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tinfo: __( 'Focus on content.' ),\n\t\t\t\t\t\t\t\t\t'aria-label': __( 'Write' ),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: 'edit',\n\t\t\t\t\t\t\t\t\tlabel: (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t{ selectIcon }\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Design' ) }\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tinfo: __( 'Edit layout and styles.' ),\n\t\t\t\t\t\t\t\t\t'aria-label': __( 'Design' ),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</NavigableMenu>\n\t\t\t\t\t<div className=\"block-editor-tool-selector__help\">\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Tools provide different sets of interactions for blocks. Choose between simplified content tools (Write) and advanced visual editing tools (Design).'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( ToolSelector );\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalUnitControl as BaseUnitControl,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\n\nexport default function UnitControl( { units: unitsProp, ...props } ) {\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: availableUnits || [ '%', 'px', 'em', 'rem', 'vw' ],\n\t\tunits: unitsProp,\n\t} );\n\n\treturn <BaseUnitControl units={ units } { ...props } />;\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst arrowLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z\" />\n\t</SVG>\n);\n\nexport default arrowLeft;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useReducer } from '@wordpress/element';\nimport {\n\tButton,\n\t__experimentalInputControlSuffixWrapper as InputControlSuffixWrapper,\n} from '@wordpress/components';\nimport { link, keyboardReturn, arrowLeft } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport URLInput from './';\n\n/**\n * A button that toggles a URL input field for inserting or editing links.\n *\n * @param {Object}   props          Component properties.\n * @param {string}   props.url      The current URL value.\n * @param {Function} props.onChange Callback function to handle URL changes.\n * @return {JSX.Element} The URL input button component.\n */\nfunction URLInputButton( { url, onChange } ) {\n\tconst [ expanded, toggleExpanded ] = useReducer(\n\t\t( isExpanded ) => ! isExpanded,\n\t\tfalse\n\t);\n\n\tconst submitLink = ( event ) => {\n\t\tevent.preventDefault();\n\t\ttoggleExpanded();\n\t};\n\n\treturn (\n\t\t<div className=\"block-editor-url-input__button\">\n\t\t\t<Button\n\t\t\t\tsize=\"compact\"\n\t\t\t\ticon={ link }\n\t\t\t\tlabel={ url ? __( 'Edit link' ) : __( 'Insert link' ) }\n\t\t\t\tonClick={ toggleExpanded }\n\t\t\t\tclassName=\"components-toolbar__control\"\n\t\t\t\tisPressed={ !! url }\n\t\t\t/>\n\t\t\t{ expanded && (\n\t\t\t\t<form\n\t\t\t\t\tclassName=\"block-editor-url-input__button-modal\"\n\t\t\t\t\tonSubmit={ submitLink }\n\t\t\t\t>\n\t\t\t\t\t<div className=\"block-editor-url-input__button-modal-line\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tclassName=\"block-editor-url-input__back\"\n\t\t\t\t\t\t\ticon={ arrowLeft }\n\t\t\t\t\t\t\tlabel={ __( 'Close' ) }\n\t\t\t\t\t\t\tonClick={ toggleExpanded }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<URLInput\n\t\t\t\t\t\t\tvalue={ url || '' }\n\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t<InputControlSuffixWrapper variant=\"control\">\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\ticon={ keyboardReturn }\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Submit' ) }\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</InputControlSuffixWrapper>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/url-input/README.md\n */\nexport default URLInputButton;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst image = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z\" />\n\t</SVG>\n);\n\nexport default image;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { focus } from '@wordpress/dom';\nimport {\n\tToolbarButton,\n\tNavigableMenu,\n\tButton,\n\tMenuItem,\n\tToggleControl,\n\tTextControl,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport {\n\tIcon,\n\tlink as linkIcon,\n\timage,\n\tpage,\n\tfullscreen,\n\tlinkOff,\n} from '@wordpress/icons';\nimport { prependHTTP } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport URLPopover from './index';\n\nconst LINK_DESTINATION_NONE = 'none';\nconst LINK_DESTINATION_CUSTOM = 'custom';\nconst LINK_DESTINATION_MEDIA = 'media';\nconst LINK_DESTINATION_ATTACHMENT = 'attachment';\nconst NEW_TAB_REL = [ 'noreferrer', 'noopener' ];\n\nconst ImageURLInputUI = ( {\n\tlinkDestination,\n\tonChangeUrl,\n\turl,\n\tmediaType = 'image',\n\tmediaUrl,\n\tmediaLink,\n\tlinkTarget,\n\tlinkClass,\n\trel,\n\tshowLightboxSetting,\n\tlightboxEnabled,\n\tonSetLightbox,\n\tresetLightbox,\n} ) => {\n\tconst [ isOpen, setIsOpen ] = useState( false );\n\t// Use internal state instead of a ref to make sure that the component\n\t// re-renders when the popover's anchor updates.\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\n\tconst openLinkUI = () => {\n\t\tsetIsOpen( true );\n\t};\n\n\tconst [ isEditingLink, setIsEditingLink ] = useState( false );\n\tconst [ urlInput, setUrlInput ] = useState( null );\n\n\tconst autocompleteRef = useRef( null );\n\tconst wrapperRef = useRef();\n\n\tuseEffect( () => {\n\t\tif ( ! wrapperRef.current ) {\n\t\t\treturn;\n\t\t}\n\t\tconst nextFocusTarget =\n\t\t\tfocus.focusable.find( wrapperRef.current )[ 0 ] ||\n\t\t\twrapperRef.current;\n\t\tnextFocusTarget.focus();\n\t}, [ isEditingLink, url, lightboxEnabled ] );\n\n\tconst startEditLink = () => {\n\t\tif (\n\t\t\tlinkDestination === LINK_DESTINATION_MEDIA ||\n\t\t\tlinkDestination === LINK_DESTINATION_ATTACHMENT\n\t\t) {\n\t\t\tsetUrlInput( '' );\n\t\t}\n\t\tsetIsEditingLink( true );\n\t};\n\n\tconst stopEditLink = () => {\n\t\tsetIsEditingLink( false );\n\t};\n\n\tconst closeLinkUI = () => {\n\t\tsetUrlInput( null );\n\t\tstopEditLink();\n\t\tsetIsOpen( false );\n\t};\n\n\tconst getUpdatedLinkTargetSettings = ( value ) => {\n\t\tconst newLinkTarget = value ? '_blank' : undefined;\n\n\t\tlet updatedRel;\n\t\tif ( newLinkTarget ) {\n\t\t\tconst rels = ( rel ?? '' ).split( ' ' );\n\t\t\tNEW_TAB_REL.forEach( ( relVal ) => {\n\t\t\t\tif ( ! rels.includes( relVal ) ) {\n\t\t\t\t\trels.push( relVal );\n\t\t\t\t}\n\t\t\t} );\n\t\t\tupdatedRel = rels.join( ' ' );\n\t\t} else {\n\t\t\tconst rels = ( rel ?? '' )\n\t\t\t\t.split( ' ' )\n\t\t\t\t.filter(\n\t\t\t\t\t( relVal ) => NEW_TAB_REL.includes( relVal ) === false\n\t\t\t\t);\n\t\t\tupdatedRel = rels.length ? rels.join( ' ' ) : undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tlinkTarget: newLinkTarget,\n\t\t\trel: updatedRel,\n\t\t};\n\t};\n\n\tconst onFocusOutside = () => {\n\t\treturn ( event ) => {\n\t\t\t// The autocomplete suggestions list renders in a separate popover (in a portal),\n\t\t\t// so onFocusOutside fails to detect that a click on a suggestion occurred in the\n\t\t\t// LinkContainer. Detect clicks on autocomplete suggestions using a ref here, and\n\t\t\t// return to avoid the popover being closed.\n\t\t\tconst autocompleteElement = autocompleteRef.current;\n\t\t\tif (\n\t\t\t\tautocompleteElement &&\n\t\t\t\tautocompleteElement.contains( event.target )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetIsOpen( false );\n\t\t\tsetUrlInput( null );\n\t\t\tstopEditLink();\n\t\t};\n\t};\n\n\tconst onSubmitLinkChange = () => {\n\t\treturn ( event ) => {\n\t\t\tif ( urlInput ) {\n\t\t\t\t// It is possible the entered URL actually matches a named link destination.\n\t\t\t\t// This check will ensure our link destination is correct.\n\t\t\t\tconst selectedDestination =\n\t\t\t\t\tgetLinkDestinations().find(\n\t\t\t\t\t\t( destination ) => destination.url === urlInput\n\t\t\t\t\t)?.linkDestination || LINK_DESTINATION_CUSTOM;\n\n\t\t\t\tonChangeUrl( {\n\t\t\t\t\thref: prependHTTP( urlInput ),\n\t\t\t\t\tlinkDestination: selectedDestination,\n\t\t\t\t\tlightbox: { enabled: false },\n\t\t\t\t} );\n\t\t\t}\n\t\t\tstopEditLink();\n\t\t\tsetUrlInput( null );\n\t\t\tevent.preventDefault();\n\t\t};\n\t};\n\n\tconst onLinkRemove = () => {\n\t\tonChangeUrl( {\n\t\t\tlinkDestination: LINK_DESTINATION_NONE,\n\t\t\thref: '',\n\t\t} );\n\t};\n\n\tconst getLinkDestinations = () => {\n\t\tconst linkDestinations = [\n\t\t\t{\n\t\t\t\tlinkDestination: LINK_DESTINATION_MEDIA,\n\t\t\t\ttitle: __( 'Link to image file' ),\n\t\t\t\turl: mediaType === 'image' ? mediaUrl : undefined,\n\t\t\t\ticon: image,\n\t\t\t},\n\t\t];\n\t\tif ( mediaType === 'image' && mediaLink ) {\n\t\t\tlinkDestinations.push( {\n\t\t\t\tlinkDestination: LINK_DESTINATION_ATTACHMENT,\n\t\t\t\ttitle: __( 'Link to attachment page' ),\n\t\t\t\turl: mediaType === 'image' ? mediaLink : undefined,\n\t\t\t\ticon: page,\n\t\t\t} );\n\t\t}\n\t\treturn linkDestinations;\n\t};\n\n\tconst onSetHref = ( value ) => {\n\t\tconst linkDestinations = getLinkDestinations();\n\t\tlet linkDestinationInput;\n\t\tif ( ! value ) {\n\t\t\tlinkDestinationInput = LINK_DESTINATION_NONE;\n\t\t} else {\n\t\t\tlinkDestinationInput = (\n\t\t\t\tlinkDestinations.find( ( destination ) => {\n\t\t\t\t\treturn destination.url === value;\n\t\t\t\t} ) || { linkDestination: LINK_DESTINATION_CUSTOM }\n\t\t\t).linkDestination;\n\t\t}\n\t\tonChangeUrl( {\n\t\t\tlinkDestination: linkDestinationInput,\n\t\t\thref: value,\n\t\t} );\n\t};\n\n\tconst onSetNewTab = ( value ) => {\n\t\tconst updatedLinkTarget = getUpdatedLinkTargetSettings( value );\n\t\tonChangeUrl( updatedLinkTarget );\n\t};\n\n\tconst onSetLinkRel = ( value ) => {\n\t\tonChangeUrl( { rel: value } );\n\t};\n\n\tconst onSetLinkClass = ( value ) => {\n\t\tonChangeUrl( { linkClass: value } );\n\t};\n\n\tconst advancedOptions = (\n\t\t<VStack spacing=\"3\">\n\t\t\t<ToggleControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\tonChange={ onSetNewTab }\n\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t/>\n\t\t\t<TextControl\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Link rel' ) }\n\t\t\t\tvalue={ rel ?? '' }\n\t\t\t\tonChange={ onSetLinkRel }\n\t\t\t/>\n\t\t\t<TextControl\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Link CSS class' ) }\n\t\t\t\tvalue={ linkClass || '' }\n\t\t\t\tonChange={ onSetLinkClass }\n\t\t\t/>\n\t\t</VStack>\n\t);\n\n\tconst linkEditorValue = urlInput !== null ? urlInput : url;\n\tconst hideLightboxPanel =\n\t\t! lightboxEnabled || ( lightboxEnabled && ! showLightboxSetting );\n\tconst showLinkEditor = ! linkEditorValue && hideLightboxPanel;\n\n\tconst urlLabel = (\n\t\tgetLinkDestinations().find(\n\t\t\t( destination ) => destination.linkDestination === linkDestination\n\t\t) || {}\n\t).title;\n\n\tconst PopoverChildren = () => {\n\t\tif (\n\t\t\tlightboxEnabled &&\n\t\t\tshowLightboxSetting &&\n\t\t\t! url &&\n\t\t\t! isEditingLink\n\t\t) {\n\t\t\treturn (\n\t\t\t\t<div className=\"block-editor-url-popover__expand-on-click\">\n\t\t\t\t\t<Icon icon={ fullscreen } />\n\t\t\t\t\t<div className=\"text\">\n\t\t\t\t\t\t<p>{ __( 'Enlarge on click' ) }</p>\n\t\t\t\t\t\t<p className=\"description\">\n\t\t\t\t\t\t\t{ __( 'Scales the image with a lightbox effect' ) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ linkOff }\n\t\t\t\t\t\tlabel={ __( 'Disable enlarge on click' ) }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonSetLightbox?.( false );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else if ( ! url || isEditingLink ) {\n\t\t\treturn (\n\t\t\t\t<URLPopover.LinkEditor\n\t\t\t\t\tclassName=\"block-editor-format-toolbar__link-container-content\"\n\t\t\t\t\tvalue={ linkEditorValue }\n\t\t\t\t\tonChangeInputValue={ setUrlInput }\n\t\t\t\t\tonSubmit={ onSubmitLinkChange() }\n\t\t\t\t\tautocompleteRef={ autocompleteRef }\n\t\t\t\t/>\n\t\t\t);\n\t\t} else if ( url && ! isEditingLink ) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<URLPopover.LinkViewer\n\t\t\t\t\t\tclassName=\"block-editor-format-toolbar__link-container-content\"\n\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\tonEditLinkClick={ startEditLink }\n\t\t\t\t\t\turlLabel={ urlLabel }\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ linkOff }\n\t\t\t\t\t\tlabel={ __( 'Remove link' ) }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonLinkRemove();\n\t\t\t\t\t\t\tresetLightbox?.();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<ToolbarButton\n\t\t\t\ticon={ linkIcon }\n\t\t\t\tclassName=\"components-toolbar__control\"\n\t\t\t\tlabel={ __( 'Link' ) }\n\t\t\t\taria-expanded={ isOpen }\n\t\t\t\tonClick={ openLinkUI }\n\t\t\t\tref={ setPopoverAnchor }\n\t\t\t\tisActive={\n\t\t\t\t\t!! url || ( lightboxEnabled && showLightboxSetting )\n\t\t\t\t}\n\t\t\t/>\n\t\t\t{ isOpen && (\n\t\t\t\t<URLPopover\n\t\t\t\t\tref={ wrapperRef }\n\t\t\t\t\tanchor={ popoverAnchor }\n\t\t\t\t\tonFocusOutside={ onFocusOutside() }\n\t\t\t\t\tonClose={ closeLinkUI }\n\t\t\t\t\trenderSettings={\n\t\t\t\t\t\thideLightboxPanel ? () => advancedOptions : null\n\t\t\t\t\t}\n\t\t\t\t\tadditionalControls={\n\t\t\t\t\t\tshowLinkEditor && (\n\t\t\t\t\t\t\t<NavigableMenu>\n\t\t\t\t\t\t\t\t{ getLinkDestinations().map( ( link ) => (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={ link.linkDestination }\n\t\t\t\t\t\t\t\t\t\ticon={ link.icon }\n\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\n\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\tsetUrlInput( null );\n\t\t\t\t\t\t\t\t\t\t\tonSetHref( link.url );\n\t\t\t\t\t\t\t\t\t\t\tstopEditLink();\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ link.title }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t\t{ showLightboxSetting && (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey=\"expand-on-click\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-url-popover__expand-on-click\"\n\t\t\t\t\t\t\t\t\t\ticon={ fullscreen }\n\t\t\t\t\t\t\t\t\t\tinfo={ __(\n\t\t\t\t\t\t\t\t\t\t\t'Scale the image with a lightbox effect.'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\n\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\tsetUrlInput( null );\n\t\t\t\t\t\t\t\t\t\t\tonChangeUrl( {\n\t\t\t\t\t\t\t\t\t\t\t\tlinkDestination:\n\t\t\t\t\t\t\t\t\t\t\t\t\tLINK_DESTINATION_NONE,\n\t\t\t\t\t\t\t\t\t\t\t\thref: '',\n\t\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\t\tonSetLightbox?.( true );\n\t\t\t\t\t\t\t\t\t\t\tstopEditLink();\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Enlarge on click' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</NavigableMenu>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\toffset={ 13 }\n\t\t\t\t>\n\t\t\t\t\t{ PopoverChildren() }\n\t\t\t\t</URLPopover>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nexport { ImageURLInputUI as __experimentalImageURLInputUI };\n","/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\n\nexport default function PreviewOptions() {\n\tdeprecated( 'wp.blockEditor.PreviewOptions', {\n\t\tversion: '6.5',\n\t} );\n\treturn null;\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\n\n/**\n * Function to resize the editor window.\n *\n * @param {string} deviceType Used for determining the size of the container (e.g. Desktop, Tablet, Mobile)\n *\n * @return {Object} Inline styles to be added to resizable container.\n */\nexport default function useResizeCanvas( deviceType ) {\n\tconst [ actualWidth, updateActualWidth ] = useState( window.innerWidth );\n\n\tuseEffect( () => {\n\t\tif ( deviceType === 'Desktop' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst resizeListener = () => updateActualWidth( window.innerWidth );\n\t\twindow.addEventListener( 'resize', resizeListener );\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener( 'resize', resizeListener );\n\t\t};\n\t}, [ deviceType ] );\n\n\tconst getCanvasWidth = ( device ) => {\n\t\tlet deviceWidth;\n\n\t\tswitch ( device ) {\n\t\t\tcase 'Tablet':\n\t\t\t\tdeviceWidth = 780;\n\t\t\t\tbreak;\n\t\t\tcase 'Mobile':\n\t\t\t\tdeviceWidth = 360;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\n\t\treturn deviceWidth < actualWidth ? deviceWidth : actualWidth;\n\t};\n\n\tconst contentInlineStyles = ( device ) => {\n\t\tconst height = device === 'Mobile' ? '768px' : '1024px';\n\t\tconst marginVertical = '40px';\n\t\tconst marginHorizontal = 'auto';\n\n\t\tswitch ( device ) {\n\t\t\tcase 'Tablet':\n\t\t\tcase 'Mobile':\n\t\t\t\treturn {\n\t\t\t\t\twidth: getCanvasWidth( device ),\n\t\t\t\t\t// Keeping margin styles separate to avoid warnings\n\t\t\t\t\t// when those props get overridden in the iframe component\n\t\t\t\t\tmarginTop: marginVertical,\n\t\t\t\t\tmarginBottom: marginVertical,\n\t\t\t\t\tmarginLeft: marginHorizontal,\n\t\t\t\t\tmarginRight: marginHorizontal,\n\t\t\t\t\theight,\n\t\t\t\t\toverflowY: 'auto',\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\treturn {\n\t\t\t\t\tmarginLeft: marginHorizontal,\n\t\t\t\t\tmarginRight: marginHorizontal,\n\t\t\t\t};\n\t\t}\n\t};\n\n\treturn contentInlineStyles( deviceType );\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useBlockElementRef } from '../block-list/use-block-props/use-block-refs';\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/skip-to-selected-block/README.md\n */\nexport default function SkipToSelectedBlock() {\n\tconst selectedBlockClientId = useSelect(\n\t\t( select ) => select( blockEditorStore ).getBlockSelectionStart(),\n\t\t[]\n\t);\n\tconst ref = useRef();\n\tuseBlockElementRef( selectedBlockClientId, ref );\n\tconst onClick = () => {\n\t\tref.current?.focus();\n\t};\n\n\treturn selectedBlockClientId ? (\n\t\t<Button\n\t\t\t__next40pxDefaultSize\n\t\t\tvariant=\"secondary\"\n\t\t\tclassName=\"block-editor-skip-to-selected-block\"\n\t\t\tonClick={ onClick }\n\t\t>\n\t\t\t{ __( 'Skip to the selected block' ) }\n\t\t</Button>\n\t) : null;\n}\n","/**\n * WordPress dependencies\n */\nimport { sprintf, _n } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { copy } from '@wordpress/icons';\nimport { __experimentalHStack as HStack } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { store as blockEditorStore } from '../../store';\n\nexport default function MultiSelectionInspector() {\n\tconst selectedBlockCount = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSelectedBlockCount(),\n\t\t[]\n\t);\n\treturn (\n\t\t<HStack\n\t\t\tjustify=\"flex-start\"\n\t\t\tspacing={ 2 }\n\t\t\tclassName=\"block-editor-multi-selection-inspector__card\"\n\t\t>\n\t\t\t<BlockIcon icon={ copy } showColors />\n\t\t\t<div className=\"block-editor-multi-selection-inspector__card-title\">\n\t\t\t\t{ sprintf(\n\t\t\t\t\t/* translators: %d: number of blocks */\n\t\t\t\t\t_n( '%d Block', '%d Blocks', selectedBlockCount ),\n\t\t\t\t\tselectedBlockCount\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</HStack>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst cog = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\td=\"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z\"\n\t\t\tclipRule=\"evenodd\"\n\t\t/>\n\t</SVG>\n);\n\nexport default cog;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nexport const styles = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M20 12a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 0 1-6.5 6.5v-13a6.5 6.5 0 0 1 6.5 6.5Z\"\n\t\t/>\n\t</SVG>\n);\n\nexport default styles;\n","/**\n * WordPress dependencies\n */\nimport { cog, styles, listView } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\n\nexport const TAB_SETTINGS = {\n\tname: 'settings',\n\ttitle: __( 'Settings' ),\n\tvalue: 'settings',\n\ticon: cog,\n};\n\nexport const TAB_STYLES = {\n\tname: 'styles',\n\ttitle: __( 'Styles' ),\n\tvalue: 'styles',\n\ticon: styles,\n};\n\nexport const TAB_LIST_VIEW = {\n\tname: 'list',\n\ttitle: __( 'List View' ),\n\tvalue: 'list-view',\n\ticon: listView,\n};\n","/**\n * WordPress dependencies\n */\nimport {\n\tPanelBody,\n\t__experimentalUseSlotFills as useSlotFills,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport {\n\tdefault as InspectorControls,\n\tInspectorAdvancedControls,\n} from '../inspector-controls';\n\nconst AdvancedControls = () => {\n\tconst fills = useSlotFills( InspectorAdvancedControls.slotName );\n\tconst hasFills = Boolean( fills && fills.length );\n\n\tif ( ! hasFills ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"block-editor-block-inspector__advanced\"\n\t\t\ttitle={ __( 'Advanced' ) }\n\t\t\tinitialOpen={ false }\n\t\t>\n\t\t\t<InspectorControls.Slot group=\"advanced\" />\n\t\t</PanelBody>\n\t);\n};\n\nexport default AdvancedControls;\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalUseSlotFills as useSlotFills,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport InspectorControlsGroups from '../inspector-controls/groups';\nimport { default as InspectorControls } from '../inspector-controls';\nimport { store as blockEditorStore } from '../../store';\nimport { useToolsPanelDropdownMenuProps } from '../global-styles/utils';\nimport { cleanEmptyObject } from '../../hooks/utils';\n\nconst PositionControlsPanel = () => {\n\tconst { selectedClientIds, selectedBlocks, hasPositionAttribute } =\n\t\tuseSelect( ( select ) => {\n\t\t\tconst { getBlocksByClientId, getSelectedBlockClientIds } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst _selectedBlocks = getBlocksByClientId(\n\t\t\t\tselectedBlockClientIds\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tselectedClientIds: selectedBlockClientIds,\n\t\t\t\tselectedBlocks: _selectedBlocks,\n\t\t\t\thasPositionAttribute: _selectedBlocks?.some(\n\t\t\t\t\t( { attributes } ) => !! attributes?.style?.position?.type\n\t\t\t\t),\n\t\t\t};\n\t\t}, [] );\n\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\n\tfunction resetPosition() {\n\t\tif ( ! selectedClientIds?.length || ! selectedBlocks?.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst attributesByClientId = Object.fromEntries(\n\t\t\tselectedBlocks?.map( ( { clientId, attributes } ) => [\n\t\t\t\tclientId,\n\t\t\t\t{\n\t\t\t\t\tstyle: cleanEmptyObject( {\n\t\t\t\t\t\t...attributes?.style,\n\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t\t...attributes?.style?.position,\n\t\t\t\t\t\t\ttype: undefined,\n\t\t\t\t\t\t\ttop: undefined,\n\t\t\t\t\t\t\tright: undefined,\n\t\t\t\t\t\t\tbottom: undefined,\n\t\t\t\t\t\t\tleft: undefined,\n\t\t\t\t\t\t},\n\t\t\t\t\t} ),\n\t\t\t\t},\n\t\t\t] )\n\t\t);\n\n\t\tupdateBlockAttributes( selectedClientIds, attributesByClientId, true );\n\t}\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tclassName=\"block-editor-block-inspector__position\"\n\t\t\tlabel={ __( 'Position' ) }\n\t\t\tresetAll={ resetPosition }\n\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t>\n\t\t\t<ToolsPanelItem\n\t\t\t\tisShownByDefault={ hasPositionAttribute }\n\t\t\t\tlabel={ __( 'Position' ) }\n\t\t\t\thasValue={ () => hasPositionAttribute }\n\t\t\t\tonDeselect={ resetPosition }\n\t\t\t>\n\t\t\t\t<InspectorControls.Slot group=\"position\" />\n\t\t\t</ToolsPanelItem>\n\t\t</ToolsPanel>\n\t);\n};\n\nconst PositionControls = () => {\n\tconst fills = useSlotFills( InspectorControlsGroups.position.name );\n\tconst hasFills = Boolean( fills && fills.length );\n\n\tif ( ! hasFills ) {\n\t\treturn null;\n\t}\n\n\treturn <PositionControlsPanel />;\n};\n\nexport default PositionControls;\n","/**\n * Internal dependencies\n */\nimport AdvancedControls from './advanced-controls-panel';\nimport PositionControls from './position-controls-panel';\nimport { default as InspectorControls } from '../inspector-controls';\n\nconst SettingsTab = ( { showAdvancedControls = false } ) => (\n\t<>\n\t\t<InspectorControls.Slot />\n\t\t<PositionControls />\n\t\t<InspectorControls.Slot group=\"bindings\" />\n\t\t{ showAdvancedControls && (\n\t\t\t<div>\n\t\t\t\t<AdvancedControls />\n\t\t\t</div>\n\t\t) }\n\t</>\n);\n\nexport default SettingsTab;\n","/**\n * WordPress dependencies\n */\nimport { PanelBody } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockStyles from '../block-styles';\nimport InspectorControls from '../inspector-controls';\nimport { useBorderPanelLabel } from '../../hooks/border';\n\nconst StylesTab = ( { blockName, clientId, hasBlockStyles } ) => {\n\tconst borderPanelLabel = useBorderPanelLabel( { blockName } );\n\n\treturn (\n\t\t<>\n\t\t\t{ hasBlockStyles && (\n\t\t\t\t<div>\n\t\t\t\t\t<PanelBody title={ __( 'Styles' ) }>\n\t\t\t\t\t\t<BlockStyles clientId={ clientId } />\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<InspectorControls.Slot\n\t\t\t\tgroup=\"color\"\n\t\t\t\tlabel={ __( 'Color' ) }\n\t\t\t\tclassName=\"color-block-support-panel__inner-wrapper\"\n\t\t\t/>\n\t\t\t<InspectorControls.Slot\n\t\t\t\tgroup=\"background\"\n\t\t\t\tlabel={ __( 'Background image' ) }\n\t\t\t/>\n\t\t\t<InspectorControls.Slot group=\"filter\" />\n\t\t\t<InspectorControls.Slot\n\t\t\t\tgroup=\"typography\"\n\t\t\t\tlabel={ __( 'Typography' ) }\n\t\t\t/>\n\t\t\t<InspectorControls.Slot\n\t\t\t\tgroup=\"dimensions\"\n\t\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\t/>\n\t\t\t<InspectorControls.Slot group=\"border\" label={ borderPanelLabel } />\n\t\t\t<InspectorControls.Slot group=\"styles\" />\n\t\t</>\n\t);\n};\n\nexport default StylesTab;\n","// List view tab restricts the blocks that may render to it via the\n// allowlist below.\nconst allowlist = [ 'core/navigation' ];\n\nexport const useIsListViewTabDisabled = ( blockName ) => {\n\treturn ! allowlist.includes( blockName );\n};\n\nexport default useIsListViewTabDisabled;\n","/**\n * WordPress dependencies\n */\nimport {\n\tIcon,\n\tTooltip,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { store as preferencesStore } from '@wordpress/preferences';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { TAB_SETTINGS, TAB_STYLES, TAB_LIST_VIEW } from './utils';\nimport SettingsTab from './settings-tab';\nimport StylesTab from './styles-tab';\nimport InspectorControls from '../inspector-controls';\nimport useIsListViewTabDisabled from './use-is-list-view-tab-disabled';\nimport { unlock } from '../../lock-unlock';\n\nconst { Tabs } = unlock( componentsPrivateApis );\n\nexport default function InspectorControlsTabs( {\n\tblockName,\n\tclientId,\n\thasBlockStyles,\n\ttabs,\n} ) {\n\tconst showIconLabels = useSelect( ( select ) => {\n\t\treturn select( preferencesStore ).get( 'core', 'showIconLabels' );\n\t}, [] );\n\n\t// The tabs panel will mount before fills are rendered to the list view\n\t// slot. This means the list view tab isn't initially included in the\n\t// available tabs so the panel defaults selection to the settings tab\n\t// which at the time is the first tab. This check allows blocks known to\n\t// include the list view tab to set it as the tab selected by default.\n\tconst initialTabName = ! useIsListViewTabDisabled( blockName )\n\t\t? TAB_LIST_VIEW.name\n\t\t: undefined;\n\n\treturn (\n\t\t<div className=\"block-editor-block-inspector__tabs\">\n\t\t\t<Tabs defaultTabId={ initialTabName } key={ clientId }>\n\t\t\t\t<Tabs.TabList>\n\t\t\t\t\t{ tabs.map( ( tab ) =>\n\t\t\t\t\t\tshowIconLabels ? (\n\t\t\t\t\t\t\t<Tabs.Tab key={ tab.name } tabId={ tab.name }>\n\t\t\t\t\t\t\t\t{ tab.title }\n\t\t\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Tooltip text={ tab.title } key={ tab.name }>\n\t\t\t\t\t\t\t\t<Tabs.Tab\n\t\t\t\t\t\t\t\t\ttabId={ tab.name }\n\t\t\t\t\t\t\t\t\taria-label={ tab.title }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon icon={ tab.icon } />\n\t\t\t\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t)\n\t\t\t\t\t) }\n\t\t\t\t</Tabs.TabList>\n\t\t\t\t<Tabs.TabPanel tabId={ TAB_SETTINGS.name } focusable={ false }>\n\t\t\t\t\t<SettingsTab showAdvancedControls={ !! blockName } />\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t<Tabs.TabPanel tabId={ TAB_STYLES.name } focusable={ false }>\n\t\t\t\t\t<StylesTab\n\t\t\t\t\t\tblockName={ blockName }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\thasBlockStyles={ hasBlockStyles }\n\t\t\t\t\t/>\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t<Tabs.TabPanel tabId={ TAB_LIST_VIEW.name } focusable={ false }>\n\t\t\t\t\t<InspectorControls.Slot group=\"list\" />\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t</Tabs>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalUseSlotFills as useSlotFills } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport InspectorControlsGroups from '../inspector-controls/groups';\nimport useIsListViewTabDisabled from './use-is-list-view-tab-disabled';\nimport { InspectorAdvancedControls } from '../inspector-controls';\nimport { TAB_LIST_VIEW, TAB_SETTINGS, TAB_STYLES } from './utils';\nimport { store as blockEditorStore } from '../../store';\n\nconst EMPTY_ARRAY = [];\n\nfunction getShowTabs( blockName, tabSettings = {} ) {\n\t// Block specific setting takes precedence over generic default.\n\tif ( tabSettings[ blockName ] !== undefined ) {\n\t\treturn tabSettings[ blockName ];\n\t}\n\n\t// Use generic default if set over the Gutenberg experiment option.\n\tif ( tabSettings.default !== undefined ) {\n\t\treturn tabSettings.default;\n\t}\n\n\treturn true;\n}\n\nexport default function useInspectorControlsTabs( blockName ) {\n\tconst tabs = [];\n\tconst {\n\t\tbindings: bindingsGroup,\n\t\tborder: borderGroup,\n\t\tcolor: colorGroup,\n\t\tdefault: defaultGroup,\n\t\tdimensions: dimensionsGroup,\n\t\tlist: listGroup,\n\t\tposition: positionGroup,\n\t\tstyles: stylesGroup,\n\t\ttypography: typographyGroup,\n\t\teffects: effectsGroup,\n\t} = InspectorControlsGroups;\n\n\t// List View Tab: If there are any fills for the list group add that tab.\n\tconst listViewDisabled = useIsListViewTabDisabled( blockName );\n\tconst listFills = useSlotFills( listGroup.name );\n\tconst hasListFills = ! listViewDisabled && !! listFills && listFills.length;\n\n\t// Styles Tab: Add this tab if there are any fills for block supports\n\t// e.g. border, color, spacing, typography, etc.\n\tconst styleFills = [\n\t\t...( useSlotFills( borderGroup.name ) || [] ),\n\t\t...( useSlotFills( colorGroup.name ) || [] ),\n\t\t...( useSlotFills( dimensionsGroup.name ) || [] ),\n\t\t...( useSlotFills( stylesGroup.name ) || [] ),\n\t\t...( useSlotFills( typographyGroup.name ) || [] ),\n\t\t...( useSlotFills( effectsGroup.name ) || [] ),\n\t];\n\tconst hasStyleFills = styleFills.length;\n\n\t// Settings Tab: If we don't have multiple tabs to display\n\t// (i.e. both list view and styles), check only the default and position\n\t// InspectorControls slots. If we have multiple tabs, we'll need to check\n\t// the advanced controls slot as well to ensure they are rendered.\n\tconst advancedFills = [\n\t\t...( useSlotFills( InspectorAdvancedControls.slotName ) || [] ),\n\t\t...( useSlotFills( bindingsGroup.name ) || [] ),\n\t];\n\n\tconst settingsFills = [\n\t\t...( useSlotFills( defaultGroup.name ) || [] ),\n\t\t...( useSlotFills( positionGroup.name ) || [] ),\n\t\t...( hasListFills && hasStyleFills > 1 ? advancedFills : [] ),\n\t];\n\n\t// Add the tabs in the order that they will default to if available.\n\t// List View > Settings > Styles.\n\tif ( hasListFills ) {\n\t\ttabs.push( TAB_LIST_VIEW );\n\t}\n\n\tif ( settingsFills.length ) {\n\t\ttabs.push( TAB_SETTINGS );\n\t}\n\n\tif ( hasStyleFills ) {\n\t\ttabs.push( TAB_STYLES );\n\t}\n\n\tconst tabSettings = useSelect( ( select ) => {\n\t\treturn select( blockEditorStore ).getSettings().blockInspectorTabs;\n\t}, [] );\n\n\tconst showTabs = getShowTabs( blockName, tabSettings );\n\treturn showTabs ? tabs : EMPTY_ARRAY;\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\tButton,\n\t__experimentalVStack as VStack,\n\t__experimentalTruncate as Truncate,\n\tFlex,\n\tFlexBlock,\n\tFlexItem,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockIcon from '../block-icon';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\n\nexport default function BlockQuickNavigation( { clientIds, onSelect } ) {\n\tif ( ! clientIds.length ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<VStack spacing={ 1 }>\n\t\t\t{ clientIds.map( ( clientId ) => (\n\t\t\t\t<BlockQuickNavigationItem\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\tkey={ clientId }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</VStack>\n\t);\n}\n\nfunction BlockQuickNavigationItem( { clientId, onSelect } ) {\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst blockTitle = useBlockDisplayTitle( {\n\t\tclientId,\n\t\tcontext: 'list-view',\n\t} );\n\tconst { isSelected } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { isBlockSelected, hasSelectedInnerBlock } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\treturn {\n\t\t\t\tisSelected:\n\t\t\t\t\tisBlockSelected( clientId ) ||\n\t\t\t\t\thasSelectedInnerBlock( clientId, /* deep: */ true ),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\n\treturn (\n\t\t<Button\n\t\t\t__next40pxDefaultSize\n\t\t\tisPressed={ isSelected }\n\t\t\tonClick={ async () => {\n\t\t\t\tawait selectBlock( clientId );\n\t\t\t\tif ( onSelect ) {\n\t\t\t\t\tonSelect( clientId );\n\t\t\t\t}\n\t\t\t} }\n\t\t>\n\t\t\t<Flex>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<BlockIcon icon={ blockInformation?.icon } />\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexBlock style={ { textAlign: 'left' } }>\n\t\t\t\t\t<Truncate>{ blockTitle }</Truncate>\n\t\t\t\t</FlexBlock>\n\t\t\t</Flex>\n\t\t</Button>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tgetBlockType,\n\tgetUnregisteredTypeHandlerName,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { PanelBody, __unstableMotion as motion } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport SkipToSelectedBlock from '../skip-to-selected-block';\nimport BlockCard from '../block-card';\nimport MultiSelectionInspector from '../multi-selection-inspector';\nimport BlockVariationTransforms from '../block-variation-transforms';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport { store as blockEditorStore } from '../../store';\nimport BlockStyles from '../block-styles';\nimport { default as InspectorControls } from '../inspector-controls';\nimport { default as InspectorControlsTabs } from '../inspector-controls-tabs';\nimport useInspectorControlsTabs from '../inspector-controls-tabs/use-inspector-controls-tabs';\nimport AdvancedControls from '../inspector-controls-tabs/advanced-controls-panel';\nimport PositionControls from '../inspector-controls-tabs/position-controls-panel';\nimport useBlockInspectorAnimationSettings from './useBlockInspectorAnimationSettings';\nimport BlockQuickNavigation from '../block-quick-navigation';\nimport { useBorderPanelLabel } from '../../hooks/border';\n\nimport { unlock } from '../../lock-unlock';\n\nfunction BlockStylesPanel( { clientId } ) {\n\treturn (\n\t\t<PanelBody title={ __( 'Styles' ) }>\n\t\t\t<BlockStyles clientId={ clientId } />\n\t\t</PanelBody>\n\t);\n}\n\nfunction BlockInspector() {\n\tconst {\n\t\tcount,\n\t\tselectedBlockName,\n\t\tselectedBlockClientId,\n\t\tblockType,\n\t\tisSectionBlock,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetSelectedBlockCount,\n\t\t\tgetBlockName,\n\t\t\tgetParentSectionBlock,\n\t\t\tisSectionBlock: _isSectionBlock,\n\t\t} = unlock( select( blockEditorStore ) );\n\t\tconst _selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst renderedBlockClientId =\n\t\t\tgetParentSectionBlock( _selectedBlockClientId ) ||\n\t\t\tgetSelectedBlockClientId();\n\t\tconst _selectedBlockName =\n\t\t\trenderedBlockClientId && getBlockName( renderedBlockClientId );\n\t\tconst _blockType =\n\t\t\t_selectedBlockName && getBlockType( _selectedBlockName );\n\n\t\treturn {\n\t\t\tcount: getSelectedBlockCount(),\n\t\t\tselectedBlockClientId: renderedBlockClientId,\n\t\t\tselectedBlockName: _selectedBlockName,\n\t\t\tblockType: _blockType,\n\t\t\tisSectionBlock: _isSectionBlock( renderedBlockClientId ),\n\t\t};\n\t}, [] );\n\n\tconst availableTabs = useInspectorControlsTabs( blockType?.name );\n\tconst showTabs = availableTabs?.length > 1;\n\n\t// The block inspector animation settings will be completely\n\t// removed in the future to create an API which allows the block\n\t// inspector to transition between what it\n\t// displays based on the relationship between the selected block\n\t// and its parent, and only enable it if the parent is controlling\n\t// its children blocks.\n\tconst blockInspectorAnimationSettings =\n\t\tuseBlockInspectorAnimationSettings( blockType );\n\n\tconst borderPanelLabel = useBorderPanelLabel( {\n\t\tblockName: selectedBlockName,\n\t} );\n\n\tif ( count > 1 && ! isSectionBlock ) {\n\t\treturn (\n\t\t\t<div className=\"block-editor-block-inspector\">\n\t\t\t\t<MultiSelectionInspector />\n\t\t\t\t{ showTabs ? (\n\t\t\t\t\t<InspectorControlsTabs tabs={ availableTabs } />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<InspectorControls.Slot />\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"color\"\n\t\t\t\t\t\t\tlabel={ __( 'Color' ) }\n\t\t\t\t\t\t\tclassName=\"color-block-support-panel__inner-wrapper\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"background\"\n\t\t\t\t\t\t\tlabel={ __( 'Background image' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"typography\"\n\t\t\t\t\t\t\tlabel={ __( 'Typography' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"dimensions\"\n\t\t\t\t\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"border\"\n\t\t\t\t\t\t\tlabel={ borderPanelLabel }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot group=\"styles\" />\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst isSelectedBlockUnregistered =\n\t\tselectedBlockName === getUnregisteredTypeHandlerName();\n\n\t/*\n\t * If the selected block is of an unregistered type, avoid showing it as an actual selection\n\t * because we want the user to focus on the unregistered block warning, not block settings.\n\t */\n\tif (\n\t\t! blockType ||\n\t\t! selectedBlockClientId ||\n\t\tisSelectedBlockUnregistered\n\t) {\n\t\treturn (\n\t\t\t<span className=\"block-editor-block-inspector__no-blocks\">\n\t\t\t\t{ __( 'No block selected.' ) }\n\t\t\t</span>\n\t\t);\n\t}\n\n\treturn (\n\t\t<BlockInspectorSingleBlockWrapper\n\t\t\tanimate={ blockInspectorAnimationSettings }\n\t\t\twrapper={ ( children ) => (\n\t\t\t\t<AnimatedContainer\n\t\t\t\t\tblockInspectorAnimationSettings={\n\t\t\t\t\t\tblockInspectorAnimationSettings\n\t\t\t\t\t}\n\t\t\t\t\tselectedBlockClientId={ selectedBlockClientId }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</AnimatedContainer>\n\t\t\t) }\n\t\t>\n\t\t\t<BlockInspectorSingleBlock\n\t\t\t\tclientId={ selectedBlockClientId }\n\t\t\t\tblockName={ blockType.name }\n\t\t\t\tisSectionBlock={ isSectionBlock }\n\t\t\t/>\n\t\t</BlockInspectorSingleBlockWrapper>\n\t);\n}\n\nconst BlockInspectorSingleBlockWrapper = ( { animate, wrapper, children } ) => {\n\treturn animate ? wrapper( children ) : children;\n};\n\nconst AnimatedContainer = ( {\n\tblockInspectorAnimationSettings,\n\tselectedBlockClientId,\n\tchildren,\n} ) => {\n\tconst animationOrigin =\n\t\tblockInspectorAnimationSettings &&\n\t\tblockInspectorAnimationSettings.enterDirection === 'leftToRight'\n\t\t\t? -50\n\t\t\t: 50;\n\n\treturn (\n\t\t<motion.div\n\t\t\tanimate={ {\n\t\t\t\tx: 0,\n\t\t\t\topacity: 1,\n\t\t\t\ttransition: {\n\t\t\t\t\tease: 'easeInOut',\n\t\t\t\t\tduration: 0.14,\n\t\t\t\t},\n\t\t\t} }\n\t\t\tinitial={ {\n\t\t\t\tx: animationOrigin,\n\t\t\t\topacity: 0,\n\t\t\t} }\n\t\t\tkey={ selectedBlockClientId }\n\t\t>\n\t\t\t{ children }\n\t\t</motion.div>\n\t);\n};\n\nconst BlockInspectorSingleBlock = ( {\n\tclientId,\n\tblockName,\n\tisSectionBlock,\n} ) => {\n\tconst availableTabs = useInspectorControlsTabs( blockName );\n\tconst showTabs = ! isSectionBlock && availableTabs?.length > 1;\n\n\tconst hasBlockStyles = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockStyles } = select( blocksStore );\n\t\t\tconst blockStyles = getBlockStyles( blockName );\n\t\t\treturn blockStyles && blockStyles.length > 0;\n\t\t},\n\t\t[ blockName ]\n\t);\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst borderPanelLabel = useBorderPanelLabel( { blockName } );\n\tconst contentClientIds = useSelect(\n\t\t( select ) => {\n\t\t\t// Avoid unnecessary subscription.\n\t\t\tif ( ! isSectionBlock ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tgetClientIdsOfDescendants,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = select( blockEditorStore );\n\t\t\treturn getClientIdsOfDescendants( clientId ).filter(\n\t\t\t\t( current ) =>\n\t\t\t\t\tgetBlockName( current ) !== 'core/list-item' &&\n\t\t\t\t\tgetBlockEditingMode( current ) === 'contentOnly'\n\t\t\t);\n\t\t},\n\t\t[ isSectionBlock, clientId ]\n\t);\n\n\treturn (\n\t\t<div className=\"block-editor-block-inspector\">\n\t\t\t<BlockCard\n\t\t\t\t{ ...blockInformation }\n\t\t\t\tclassName={ blockInformation.isSynced && 'is-synced' }\n\t\t\t/>\n\t\t\t<BlockVariationTransforms blockClientId={ clientId } />\n\t\t\t{ showTabs && (\n\t\t\t\t<InspectorControlsTabs\n\t\t\t\t\thasBlockStyles={ hasBlockStyles }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tblockName={ blockName }\n\t\t\t\t\ttabs={ availableTabs }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ ! showTabs && (\n\t\t\t\t<>\n\t\t\t\t\t{ hasBlockStyles && (\n\t\t\t\t\t\t<BlockStylesPanel clientId={ clientId } />\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ contentClientIds && contentClientIds?.length > 0 && (\n\t\t\t\t\t\t<PanelBody title={ __( 'Content' ) }>\n\t\t\t\t\t\t\t<BlockQuickNavigation\n\t\t\t\t\t\t\t\tclientIds={ contentClientIds }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ ! isSectionBlock && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<InspectorControls.Slot />\n\t\t\t\t\t\t\t<InspectorControls.Slot group=\"list\" />\n\t\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\t\tgroup=\"color\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Color' ) }\n\t\t\t\t\t\t\t\tclassName=\"color-block-support-panel__inner-wrapper\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\t\tgroup=\"background\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Background image' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\t\tgroup=\"typography\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Typography' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\t\tgroup=\"dimensions\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\t\tgroup=\"border\"\n\t\t\t\t\t\t\t\tlabel={ borderPanelLabel }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<InspectorControls.Slot group=\"styles\" />\n\t\t\t\t\t\t\t<PositionControls />\n\t\t\t\t\t\t\t<InspectorControls.Slot group=\"bindings\" />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<AdvancedControls />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t<SkipToSelectedBlock key=\"back\" />\n\t\t</div>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-inspector/README.md\n */\nexport default BlockInspector;\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function useBlockInspectorAnimationSettings( blockType ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tif ( blockType ) {\n\t\t\t\tconst globalBlockInspectorAnimationSettings =\n\t\t\t\t\tselect( blockEditorStore ).getSettings()\n\t\t\t\t\t\t.blockInspectorAnimation;\n\n\t\t\t\t// Get the name of the block that will allow it's children to be animated.\n\t\t\t\tconst animationParent =\n\t\t\t\t\tglobalBlockInspectorAnimationSettings?.animationParent;\n\n\t\t\t\t// Determine whether the animationParent block is a parent of the selected block.\n\t\t\t\tconst { getSelectedBlockClientId, getBlockParentsByBlockName } =\n\t\t\t\t\tselect( blockEditorStore );\n\t\t\t\tconst _selectedBlockClientId = getSelectedBlockClientId();\n\t\t\t\tconst animationParentBlockClientId = getBlockParentsByBlockName(\n\t\t\t\t\t_selectedBlockClientId,\n\t\t\t\t\tanimationParent,\n\t\t\t\t\ttrue\n\t\t\t\t)[ 0 ];\n\n\t\t\t\t// If the selected block is not a child of the animationParent block,\n\t\t\t\t// and not an animationParent block itself, don't animate.\n\t\t\t\tif (\n\t\t\t\t\t! animationParentBlockClientId &&\n\t\t\t\t\tblockType.name !== animationParent\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn globalBlockInspectorAnimationSettings?.[\n\t\t\t\t\tblockType.name\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t[ blockType ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport useClipboardHandler from '../writing-flow/use-clipboard-handler';\n\n/**\n * @deprecated\n */\nexport const __unstableUseClipboardHandler = () => {\n\tdeprecated( '__unstableUseClipboardHandler', {\n\t\talternative: 'BlockCanvas or WritingFlow',\n\t\tsince: '6.4',\n\t\tversion: '6.7',\n\t} );\n\treturn useClipboardHandler();\n};\n\n/**\n * @deprecated\n * @param {Object} props\n */\nexport default function CopyHandler( props ) {\n\tdeprecated( 'CopyHandler', {\n\t\talternative: 'BlockCanvas or WritingFlow',\n\t\tsince: '6.4',\n\t\tversion: '6.7',\n\t} );\n\treturn <div { ...props } ref={ useClipboardHandler() } />;\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { PrivateInserterMenu } from './menu';\nimport { store as blockEditorStore } from '../../store';\n\nconst noop = () => {};\n\nfunction InserterLibrary(\n\t{\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\tshowInserterHelpPanel,\n\t\tshowMostUsedBlocks = false,\n\t\t__experimentalInsertionIndex,\n\t\t__experimentalInitialTab,\n\t\t__experimentalInitialCategory,\n\t\t__experimentalFilterValue,\n\t\tonPatternCategorySelection,\n\t\tonSelect = noop,\n\t\tshouldFocusBlock = false,\n\t\tonClose,\n\t},\n\tref\n) {\n\tconst { destinationRootClientId } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockRootClientId } = select( blockEditorStore );\n\t\t\tconst _rootClientId =\n\t\t\t\trootClientId || getBlockRootClientId( clientId ) || undefined;\n\t\t\treturn {\n\t\t\t\tdestinationRootClientId: _rootClientId,\n\t\t\t};\n\t\t},\n\t\t[ clientId, rootClientId ]\n\t);\n\n\treturn (\n\t\t<PrivateInserterMenu\n\t\t\tonSelect={ onSelect }\n\t\t\trootClientId={ destinationRootClientId }\n\t\t\tclientId={ clientId }\n\t\t\tisAppender={ isAppender }\n\t\t\tshowInserterHelpPanel={ showInserterHelpPanel }\n\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t__experimentalInsertionIndex={ __experimentalInsertionIndex }\n\t\t\t__experimentalFilterValue={ __experimentalFilterValue }\n\t\t\tonPatternCategorySelection={ onPatternCategorySelection }\n\t\t\t__experimentalInitialTab={ __experimentalInitialTab }\n\t\t\t__experimentalInitialCategory={ __experimentalInitialCategory }\n\t\t\tshouldFocusBlock={ shouldFocusBlock }\n\t\t\tref={ ref }\n\t\t\tonClose={ onClose }\n\t\t/>\n\t);\n}\n\nexport const PrivateInserterLibrary = forwardRef( InserterLibrary );\n\nfunction PublicInserterLibrary( props, ref ) {\n\treturn (\n\t\t<PrivateInserterLibrary\n\t\t\t{ ...props }\n\t\t\tonPatternCategorySelection={ undefined }\n\t\t\tref={ ref }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( PublicInserterLibrary );\n","/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Scrolls the multi block selection end into view if not in view already. This\n * is important to do after selection by keyboard.\n *\n * @deprecated\n */\nexport function MultiSelectScrollIntoView() {\n\tdeprecated( 'wp.blockEditor.MultiSelectScrollIntoView', {\n\t\thint: 'This behaviour is now built-in.',\n\t\tsince: '5.8',\n\t} );\n\treturn null;\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { computeCaretRect, getScrollContainer } from '@wordpress/dom';\nimport { useSelect } from '@wordpress/data';\nimport { UP, DOWN, LEFT, RIGHT } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst isIE = window.navigator.userAgent.indexOf( 'Trident' ) !== -1;\nconst arrowKeyCodes = new Set( [ UP, DOWN, LEFT, RIGHT ] );\nconst initialTriggerPercentage = 0.75;\n\nexport function useTypewriter() {\n\tconst hasSelectedBlock = useSelect(\n\t\t( select ) => select( blockEditorStore ).hasSelectedBlock(),\n\t\t[]\n\t);\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! hasSelectedBlock ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\tlet scrollResizeRafId;\n\t\t\tlet onKeyDownRafId;\n\n\t\t\tlet caretRect;\n\n\t\t\tfunction onScrollResize() {\n\t\t\t\tif ( scrollResizeRafId ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tscrollResizeRafId = defaultView.requestAnimationFrame( () => {\n\t\t\t\t\tcomputeCaretRectangle();\n\t\t\t\t\tscrollResizeRafId = null;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tfunction onKeyDown( event ) {\n\t\t\t\t// Ensure the any remaining request is cancelled.\n\t\t\t\tif ( onKeyDownRafId ) {\n\t\t\t\t\tdefaultView.cancelAnimationFrame( onKeyDownRafId );\n\t\t\t\t}\n\n\t\t\t\t// Use an animation frame for a smooth result.\n\t\t\t\tonKeyDownRafId = defaultView.requestAnimationFrame( () => {\n\t\t\t\t\tmaintainCaretPosition( event );\n\t\t\t\t\tonKeyDownRafId = null;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Maintains the scroll position after a selection change caused by a\n\t\t\t * keyboard event.\n\t\t\t *\n\t\t\t * @param {KeyboardEvent} event Keyboard event.\n\t\t\t */\n\t\t\tfunction maintainCaretPosition( { keyCode } ) {\n\t\t\t\tif ( ! isSelectionEligibleForScroll() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst currentCaretRect = computeCaretRect( defaultView );\n\n\t\t\t\tif ( ! currentCaretRect ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// If for some reason there is no position set to be scrolled to, let\n\t\t\t\t// this be the position to be scrolled to in the future.\n\t\t\t\tif ( ! caretRect ) {\n\t\t\t\t\tcaretRect = currentCaretRect;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Even though enabling the typewriter effect for arrow keys results in\n\t\t\t\t// a pleasant experience, it may not be the case for everyone, so, for\n\t\t\t\t// now, let's disable it.\n\t\t\t\tif ( arrowKeyCodes.has( keyCode ) ) {\n\t\t\t\t\t// Reset the caret position to maintain.\n\t\t\t\t\tcaretRect = currentCaretRect;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst diff = currentCaretRect.top - caretRect.top;\n\n\t\t\t\tif ( diff === 0 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst scrollContainer = getScrollContainer( node );\n\n\t\t\t\t// The page must be scrollable.\n\t\t\t\tif ( ! scrollContainer ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst windowScroll =\n\t\t\t\t\tscrollContainer === ownerDocument.body ||\n\t\t\t\t\tscrollContainer === ownerDocument.documentElement;\n\t\t\t\tconst scrollY = windowScroll\n\t\t\t\t\t? defaultView.scrollY\n\t\t\t\t\t: scrollContainer.scrollTop;\n\t\t\t\tconst scrollContainerY = windowScroll\n\t\t\t\t\t? 0\n\t\t\t\t\t: scrollContainer.getBoundingClientRect().top;\n\t\t\t\tconst relativeScrollPosition = windowScroll\n\t\t\t\t\t? caretRect.top / defaultView.innerHeight\n\t\t\t\t\t: ( caretRect.top - scrollContainerY ) /\n\t\t\t\t\t  ( defaultView.innerHeight - scrollContainerY );\n\n\t\t\t\t// If the scroll position is at the start, the active editable element\n\t\t\t\t// is the last one, and the caret is positioned within the initial\n\t\t\t\t// trigger percentage of the page, do not scroll the page.\n\t\t\t\t// The typewriter effect should not kick in until an empty page has been\n\t\t\t\t// filled with the initial trigger percentage or the user scrolls\n\t\t\t\t// intentionally down.\n\t\t\t\tif (\n\t\t\t\t\tscrollY === 0 &&\n\t\t\t\t\trelativeScrollPosition < initialTriggerPercentage &&\n\t\t\t\t\tisLastEditableNode()\n\t\t\t\t) {\n\t\t\t\t\t// Reset the caret position to maintain.\n\t\t\t\t\tcaretRect = currentCaretRect;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst scrollContainerHeight = windowScroll\n\t\t\t\t\t? defaultView.innerHeight\n\t\t\t\t\t: scrollContainer.clientHeight;\n\n\t\t\t\t// Abort if the target scroll position would scroll the caret out of\n\t\t\t\t// view.\n\t\t\t\tif (\n\t\t\t\t\t// The caret is under the lower fold.\n\t\t\t\t\tcaretRect.top + caretRect.height >\n\t\t\t\t\t\tscrollContainerY + scrollContainerHeight ||\n\t\t\t\t\t// The caret is above the upper fold.\n\t\t\t\t\tcaretRect.top < scrollContainerY\n\t\t\t\t) {\n\t\t\t\t\t// Reset the caret position to maintain.\n\t\t\t\t\tcaretRect = currentCaretRect;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( windowScroll ) {\n\t\t\t\t\tdefaultView.scrollBy( 0, diff );\n\t\t\t\t} else {\n\t\t\t\t\tscrollContainer.scrollTop += diff;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Adds a `selectionchange` listener to reset the scroll position to be\n\t\t\t * maintained.\n\t\t\t */\n\t\t\tfunction addSelectionChangeListener() {\n\t\t\t\townerDocument.addEventListener(\n\t\t\t\t\t'selectionchange',\n\t\t\t\t\tcomputeCaretRectOnSelectionChange\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Resets the scroll position to be maintained during a `selectionchange`\n\t\t\t * event. Also removes the listener, so it acts as a one-time listener.\n\t\t\t */\n\t\t\tfunction computeCaretRectOnSelectionChange() {\n\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t'selectionchange',\n\t\t\t\t\tcomputeCaretRectOnSelectionChange\n\t\t\t\t);\n\t\t\t\tcomputeCaretRectangle();\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Resets the scroll position to be maintained.\n\t\t\t */\n\t\t\tfunction computeCaretRectangle() {\n\t\t\t\tif ( isSelectionEligibleForScroll() ) {\n\t\t\t\t\tcaretRect = computeCaretRect( defaultView );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Checks if the current situation is eligible for scroll:\n\t\t\t * - There should be one and only one block selected.\n\t\t\t * - The component must contain the selection.\n\t\t\t * - The active element must be contenteditable.\n\t\t\t */\n\t\t\tfunction isSelectionEligibleForScroll() {\n\t\t\t\treturn (\n\t\t\t\t\tnode.contains( ownerDocument.activeElement ) &&\n\t\t\t\t\townerDocument.activeElement.isContentEditable\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfunction isLastEditableNode() {\n\t\t\t\tconst editableNodes = node.querySelectorAll(\n\t\t\t\t\t'[contenteditable=\"true\"]'\n\t\t\t\t);\n\t\t\t\tconst lastEditableNode =\n\t\t\t\t\teditableNodes[ editableNodes.length - 1 ];\n\t\t\t\treturn lastEditableNode === ownerDocument.activeElement;\n\t\t\t}\n\n\t\t\t// When the user scrolls or resizes, the scroll position should be\n\t\t\t// reset.\n\t\t\tdefaultView.addEventListener( 'scroll', onScrollResize, true );\n\t\t\tdefaultView.addEventListener( 'resize', onScrollResize, true );\n\n\t\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\t\tnode.addEventListener( 'keyup', maintainCaretPosition );\n\t\t\tnode.addEventListener( 'mousedown', addSelectionChangeListener );\n\t\t\tnode.addEventListener( 'touchstart', addSelectionChangeListener );\n\n\t\t\treturn () => {\n\t\t\t\tdefaultView.removeEventListener(\n\t\t\t\t\t'scroll',\n\t\t\t\t\tonScrollResize,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tdefaultView.removeEventListener(\n\t\t\t\t\t'resize',\n\t\t\t\t\tonScrollResize,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\n\t\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t\t\tnode.removeEventListener( 'keyup', maintainCaretPosition );\n\t\t\t\tnode.removeEventListener(\n\t\t\t\t\t'mousedown',\n\t\t\t\t\taddSelectionChangeListener\n\t\t\t\t);\n\t\t\t\tnode.removeEventListener(\n\t\t\t\t\t'touchstart',\n\t\t\t\t\taddSelectionChangeListener\n\t\t\t\t);\n\n\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t'selectionchange',\n\t\t\t\t\tcomputeCaretRectOnSelectionChange\n\t\t\t\t);\n\n\t\t\t\tdefaultView.cancelAnimationFrame( scrollResizeRafId );\n\t\t\t\tdefaultView.cancelAnimationFrame( onKeyDownRafId );\n\t\t\t};\n\t\t},\n\t\t[ hasSelectedBlock ]\n\t);\n}\n\nfunction Typewriter( { children } ) {\n\treturn (\n\t\t<div ref={ useTypewriter() } className=\"block-editor__typewriter\">\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n\n/**\n * The exported component. The implementation of Typewriter faced technical\n * challenges in Internet Explorer, and is simply skipped, rendering the given\n * props children instead.\n *\n * @type {Component}\n */\nconst TypewriterOrIEBypass = isIE ? ( props ) => props.children : Typewriter;\n\n/**\n * Ensures that the text selection keeps the same vertical distance from the\n * viewport during keyboard events within this component. The vertical distance\n * can vary. It is the last clicked or scrolled to position.\n */\nexport default TypewriterOrIEBypass;\n","/**\n * WordPress dependencies\n */\nimport { createContext, useContext, useMemo } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit/context';\n\nconst RenderedRefsContext = createContext( {} );\n\n/**\n * Immutably adds an unique identifier to a set scoped for a given block type.\n *\n * @param {Object} renderedBlocks Rendered blocks grouped by block name\n * @param {string} blockName      Name of the block.\n * @param {*}      uniqueId       Any value that acts as a unique identifier for a block instance.\n *\n * @return {Object} The list of rendered blocks grouped by block name.\n */\nfunction addToBlockType( renderedBlocks, blockName, uniqueId ) {\n\tconst result = {\n\t\t...renderedBlocks,\n\t\t[ blockName ]: renderedBlocks[ blockName ]\n\t\t\t? new Set( renderedBlocks[ blockName ] )\n\t\t\t: new Set(),\n\t};\n\tresult[ blockName ].add( uniqueId );\n\n\treturn result;\n}\n\n/**\n * A React context provider for use with the `useHasRecursion` hook to prevent recursive\n * renders.\n *\n * Wrap block content with this provider and provide the same `uniqueId` prop as used\n * with `useHasRecursion`.\n *\n * @param {Object}      props\n * @param {*}           props.uniqueId  Any value that acts as a unique identifier for a block instance.\n * @param {string}      props.blockName Optional block name.\n * @param {JSX.Element} props.children  React children.\n *\n * @return {JSX.Element} A React element.\n */\nexport function RecursionProvider( { children, uniqueId, blockName = '' } ) {\n\tconst previouslyRenderedBlocks = useContext( RenderedRefsContext );\n\tconst { name } = useBlockEditContext();\n\n\tblockName = blockName || name;\n\n\tconst newRenderedBlocks = useMemo(\n\t\t() => addToBlockType( previouslyRenderedBlocks, blockName, uniqueId ),\n\t\t[ previouslyRenderedBlocks, blockName, uniqueId ]\n\t);\n\n\treturn (\n\t\t<RenderedRefsContext.Provider value={ newRenderedBlocks }>\n\t\t\t{ children }\n\t\t</RenderedRefsContext.Provider>\n\t);\n}\n\n/**\n * A React hook for keeping track of blocks previously rendered up in the block\n * tree. Blocks susceptible to recursion can use this hook in their `Edit`\n * function to prevent said recursion.\n *\n * Use this with the `RecursionProvider` component, using the same `uniqueId` value\n * for both the hook and the provider.\n *\n * @param {*}      uniqueId  Any value that acts as a unique identifier for a block instance.\n * @param {string} blockName Optional block name.\n *\n * @return {boolean} A boolean describing whether the provided id has already been rendered.\n */\nexport function useHasRecursion( uniqueId, blockName = '' ) {\n\tconst previouslyRenderedBlocks = useContext( RenderedRefsContext );\n\tconst { name } = useBlockEditContext();\n\tblockName = blockName || name;\n\treturn Boolean( previouslyRenderedBlocks[ blockName ]?.has( uniqueId ) );\n}\n\nexport const DeprecatedExperimentalRecursionProvider = ( props ) => {\n\tdeprecated( 'wp.blockEditor.__experimentalRecursionProvider', {\n\t\tsince: '6.5',\n\t\talternative: 'wp.blockEditor.RecursionProvider',\n\t} );\n\treturn <RecursionProvider { ...props } />;\n};\n\nexport const DeprecatedExperimentalUseHasRecursion = ( ...args ) => {\n\tdeprecated( 'wp.blockEditor.__experimentalUseHasRecursion', {\n\t\tsince: '6.5',\n\t\talternative: 'wp.blockEditor.useHasRecursion',\n\t} );\n\treturn useHasRecursion( ...args );\n};\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalVStack as VStack,\n\t__experimentalHStack as HStack,\n\t__experimentalHeading as Heading,\n\t__experimentalSpacer as Spacer,\n\tButton,\n\t__experimentalText as Text,\n} from '@wordpress/components';\nimport { closeSmall } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\n\nexport default function InspectorPopoverHeader( {\n\ttitle,\n\thelp,\n\tactions = [],\n\tonClose,\n} ) {\n\treturn (\n\t\t<VStack className=\"block-editor-inspector-popover-header\" spacing={ 4 }>\n\t\t\t<HStack alignment=\"center\">\n\t\t\t\t<Heading\n\t\t\t\t\tclassName=\"block-editor-inspector-popover-header__heading\"\n\t\t\t\t\tlevel={ 2 }\n\t\t\t\t\tsize={ 13 }\n\t\t\t\t>\n\t\t\t\t\t{ title }\n\t\t\t\t</Heading>\n\t\t\t\t<Spacer />\n\t\t\t\t{ actions.map( ( { label, icon, onClick } ) => (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tkey={ label }\n\t\t\t\t\t\tclassName=\"block-editor-inspector-popover-header__action\"\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tvariant={ ! icon && 'tertiary' }\n\t\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ! icon && label }\n\t\t\t\t\t</Button>\n\t\t\t\t) ) }\n\t\t\t\t{ onClose && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName=\"block-editor-inspector-popover-header__action\"\n\t\t\t\t\t\tlabel={ __( 'Close' ) }\n\t\t\t\t\t\ticon={ closeSmall }\n\t\t\t\t\t\tonClick={ onClose }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</HStack>\n\t\t\t{ help && <Text>{ help }</Text> }\n\t\t</VStack>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { DateTimePicker, TimePicker } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { forwardRef } from '@wordpress/element';\nimport { getSettings } from '@wordpress/date';\n\n/**\n * Internal dependencies\n */\nimport InspectorPopoverHeader from '../inspector-popover-header';\n\nexport function PublishDateTimePicker(\n\t{\n\t\tonClose,\n\t\tonChange,\n\t\tshowPopoverHeaderActions,\n\t\tisCompact,\n\t\tcurrentDate,\n\t\ttitle,\n\t\t...additionalProps\n\t},\n\tref\n) {\n\tconst datePickerProps = {\n\t\tstartOfWeek: getSettings().l10n.startOfWeek,\n\t\tonChange,\n\t\tcurrentDate: isCompact ? undefined : currentDate,\n\t\tcurrentTime: isCompact ? currentDate : undefined,\n\t\t...additionalProps,\n\t};\n\tconst DatePickerComponent = isCompact ? TimePicker : DateTimePicker;\n\treturn (\n\t\t<div ref={ ref } className=\"block-editor-publish-date-time-picker\">\n\t\t\t<InspectorPopoverHeader\n\t\t\t\ttitle={ title || __( 'Publish' ) }\n\t\t\t\tactions={\n\t\t\t\t\tshowPopoverHeaderActions\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __( 'Now' ),\n\t\t\t\t\t\t\t\t\tonClick: () => onChange?.( null ),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\tonClose={ onClose }\n\t\t\t/>\n\t\t\t<DatePickerComponent { ...datePickerProps } />\n\t\t</div>\n\t);\n}\n\nexport const PrivatePublishDateTimePicker = forwardRef( PublishDateTimePicker );\n\nfunction PublicPublishDateTimePicker( props, ref ) {\n\treturn (\n\t\t<PrivatePublishDateTimePicker\n\t\t\t{ ...props }\n\t\t\tshowPopoverHeaderActions\n\t\t\tisCompact={ false }\n\t\t\tref={ ref }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( PublicPublishDateTimePicker );\n","const ELEMENT_CLASS_NAMES = {\n\tbutton: 'wp-element-button',\n\tcaption: 'wp-element-caption',\n};\n\nexport const __experimentalGetElementClassName = ( element ) => {\n\treturn ELEMENT_CLASS_NAMES[ element ] ? ELEMENT_CLASS_NAMES[ element ] : '';\n};\n","/**\n * This function was accidentally exposed for mobile/native usage.\n *\n * @deprecated\n *\n * @return {string} Empty string.\n */\nexport default () => '';\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\tToggleControl,\n} from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useToolsPanelDropdownMenuProps } from './utils';\n\nexport function useHasImageSettingsPanel( name, value, inheritedValue ) {\n\t// Note: If lightbox `value` exists, that means it was\n\t// defined via the the Global Styles UI and will NOT\n\t// be a boolean value or contain the `allowEditing` property,\n\t// so we should show the settings panel in those cases.\n\treturn (\n\t\t( name === 'core/image' && inheritedValue?.lightbox?.allowEditing ) ||\n\t\t!! value?.lightbox\n\t);\n}\n\nexport default function ImageSettingsPanel( {\n\tonChange,\n\tvalue,\n\tinheritedValue,\n\tpanelId,\n} ) {\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\tconst resetLightbox = () => {\n\t\tonChange( undefined );\n\t};\n\n\tconst onChangeLightbox = ( newSetting ) => {\n\t\tonChange( {\n\t\t\tenabled: newSetting,\n\t\t} );\n\t};\n\n\tlet lightboxChecked = false;\n\n\tif ( inheritedValue?.lightbox?.enabled ) {\n\t\tlightboxChecked = inheritedValue.lightbox.enabled;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<ToolsPanel\n\t\t\t\tlabel={ _x( 'Settings', 'Image settings' ) }\n\t\t\t\tresetAll={ resetLightbox }\n\t\t\t\tpanelId={ panelId }\n\t\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t\t>\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t// We use the `userSettings` prop instead of `settings`, because `settings`\n\t\t\t\t\t// contains the core/theme values for the lightbox and we want to show the\n\t\t\t\t\t// \"RESET\" button ONLY when the user has explicitly set a value in the\n\t\t\t\t\t// Global Styles.\n\t\t\t\t\thasValue={ () => !! value?.lightbox }\n\t\t\t\t\tlabel={ __( 'Enlarge on click' ) }\n\t\t\t\t\tonDeselect={ resetLightbox }\n\t\t\t\t\tisShownByDefault\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Enlarge on click' ) }\n\t\t\t\t\t\tchecked={ lightboxChecked }\n\t\t\t\t\t\tonChange={ onChangeLightbox }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t</ToolsPanel>\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tTextareaControl,\n\tNotice,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { default as transformStyles } from '../../utils/transform-styles';\n\nexport default function AdvancedPanel( {\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n} ) {\n\t// Custom CSS\n\tconst [ cssError, setCSSError ] = useState( null );\n\tconst customCSS = inheritedValue?.css;\n\tfunction handleOnChange( newValue ) {\n\t\tonChange( {\n\t\t\t...value,\n\t\t\tcss: newValue,\n\t\t} );\n\t\tif ( cssError ) {\n\t\t\t// Check if the new value is valid CSS, and pass a wrapping selector\n\t\t\t// to ensure that `transformStyles` validates the CSS. Note that the\n\t\t\t// wrapping selector here is not used in the actual output of any styles.\n\t\t\tconst [ transformed ] = transformStyles(\n\t\t\t\t[ { css: newValue } ],\n\t\t\t\t'.for-validation-only'\n\t\t\t);\n\t\t\tif ( transformed ) {\n\t\t\t\tsetCSSError( null );\n\t\t\t}\n\t\t}\n\t}\n\tfunction handleOnBlur( event ) {\n\t\tif ( ! event?.target?.value ) {\n\t\t\tsetCSSError( null );\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if the new value is valid CSS, and pass a wrapping selector\n\t\t// to ensure that `transformStyles` validates the CSS. Note that the\n\t\t// wrapping selector here is not used in the actual output of any styles.\n\t\tconst [ transformed ] = transformStyles(\n\t\t\t[ { css: event.target.value } ],\n\t\t\t'.for-validation-only'\n\t\t);\n\n\t\tsetCSSError(\n\t\t\ttransformed === null\n\t\t\t\t? __( 'There is an error with your CSS structure.' )\n\t\t\t\t: null\n\t\t);\n\t}\n\n\treturn (\n\t\t<VStack spacing={ 3 }>\n\t\t\t{ cssError && (\n\t\t\t\t<Notice status=\"error\" onRemove={ () => setCSSError( null ) }>\n\t\t\t\t\t{ cssError }\n\t\t\t\t</Notice>\n\t\t\t) }\n\t\t\t<TextareaControl\n\t\t\t\tlabel={ __( 'Additional CSS' ) }\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tvalue={ customCSS }\n\t\t\t\tonChange={ ( newValue ) => handleOnChange( newValue ) }\n\t\t\t\tonBlur={ handleOnBlur }\n\t\t\t\tclassName=\"block-editor-global-styles-advanced-panel__custom-css-input\"\n\t\t\t\tspellCheck={ false }\n\t\t\t/>\n\t\t</VStack>\n\t);\n}\n","/**\n * External dependencies\n */\nimport memoize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { getBlockTypes } from '@wordpress/blocks';\n\nconst globalStylesChangesCache = new Map();\nconst EMPTY_ARRAY = [];\nconst translationMap = {\n\tcaption: __( 'Caption' ),\n\tlink: __( 'Link' ),\n\tbutton: __( 'Button' ),\n\theading: __( 'Heading' ),\n\th1: __( 'H1' ),\n\th2: __( 'H2' ),\n\th3: __( 'H3' ),\n\th4: __( 'H4' ),\n\th5: __( 'H5' ),\n\th6: __( 'H6' ),\n\t'settings.color': __( 'Color' ),\n\t'settings.typography': __( 'Typography' ),\n\t'styles.color': __( 'Colors' ),\n\t'styles.spacing': __( 'Spacing' ),\n\t'styles.background': __( 'Background' ),\n\t'styles.typography': __( 'Typography' ),\n};\nconst getBlockNames = memoize( () =>\n\tgetBlockTypes().reduce( ( accumulator, { name, title } ) => {\n\t\taccumulator[ name ] = title;\n\t\treturn accumulator;\n\t}, {} )\n);\nconst isObject = ( obj ) => obj !== null && typeof obj === 'object';\n\n/**\n * Get the translation for a given global styles key.\n * @param {string} key A key representing a path to a global style property or setting.\n * @return {string|undefined}                A translated key or undefined if no translation exists.\n */\nfunction getTranslation( key ) {\n\tif ( translationMap[ key ] ) {\n\t\treturn translationMap[ key ];\n\t}\n\n\tconst keyArray = key.split( '.' );\n\n\tif ( keyArray?.[ 0 ] === 'blocks' ) {\n\t\tconst blockName = getBlockNames()?.[ keyArray[ 1 ] ];\n\t\treturn blockName || keyArray[ 1 ];\n\t}\n\n\tif ( keyArray?.[ 0 ] === 'elements' ) {\n\t\treturn translationMap[ keyArray[ 1 ] ] || keyArray[ 1 ];\n\t}\n\n\treturn undefined;\n}\n\n/**\n * A deep comparison of two objects, optimized for comparing global styles.\n * @param {Object} changedObject  The changed object to compare.\n * @param {Object} originalObject The original object to compare against.\n * @param {string} parentPath     A key/value pair object of block names and their rendered titles.\n * @return {string[]}             An array of paths whose values have changed.\n */\nfunction deepCompare( changedObject, originalObject, parentPath = '' ) {\n\t// We have two non-object values to compare.\n\tif ( ! isObject( changedObject ) && ! isObject( originalObject ) ) {\n\t\t/*\n\t\t * Only return a path if the value has changed.\n\t\t * And then only the path name up to 2 levels deep.\n\t\t */\n\t\treturn changedObject !== originalObject\n\t\t\t? parentPath.split( '.' ).slice( 0, 2 ).join( '.' )\n\t\t\t: undefined;\n\t}\n\n\t// Enable comparison when an object doesn't have a corresponding property to compare.\n\tchangedObject = isObject( changedObject ) ? changedObject : {};\n\toriginalObject = isObject( originalObject ) ? originalObject : {};\n\n\tconst allKeys = new Set( [\n\t\t...Object.keys( changedObject ),\n\t\t...Object.keys( originalObject ),\n\t] );\n\n\tlet diffs = [];\n\tfor ( const key of allKeys ) {\n\t\tconst path = parentPath ? parentPath + '.' + key : key;\n\t\tconst changedPath = deepCompare(\n\t\t\tchangedObject[ key ],\n\t\t\toriginalObject[ key ],\n\t\t\tpath\n\t\t);\n\t\tif ( changedPath ) {\n\t\t\tdiffs = diffs.concat( changedPath );\n\t\t}\n\t}\n\treturn diffs;\n}\n\n/**\n * Returns an array of translated summarized global styles changes.\n * Results are cached using a Map() key of `JSON.stringify( { next, previous } )`.\n *\n * @param {Object} next     The changed object to compare.\n * @param {Object} previous The original object to compare against.\n * @return {Array[]}        A 2-dimensional array of tuples: [ \"group\", \"translated change\" ].\n */\nexport function getGlobalStylesChangelist( next, previous ) {\n\tconst cacheKey = JSON.stringify( { next, previous } );\n\n\tif ( globalStylesChangesCache.has( cacheKey ) ) {\n\t\treturn globalStylesChangesCache.get( cacheKey );\n\t}\n\n\t/*\n\t * Compare the two changesets with normalized keys.\n\t * The order of these keys determines the order in which\n\t * they'll appear in the results.\n\t */\n\tconst changedValueTree = deepCompare(\n\t\t{\n\t\t\tstyles: {\n\t\t\t\tbackground: next?.styles?.background,\n\t\t\t\tcolor: next?.styles?.color,\n\t\t\t\ttypography: next?.styles?.typography,\n\t\t\t\tspacing: next?.styles?.spacing,\n\t\t\t},\n\t\t\tblocks: next?.styles?.blocks,\n\t\t\telements: next?.styles?.elements,\n\t\t\tsettings: next?.settings,\n\t\t},\n\t\t{\n\t\t\tstyles: {\n\t\t\t\tbackground: previous?.styles?.background,\n\t\t\t\tcolor: previous?.styles?.color,\n\t\t\t\ttypography: previous?.styles?.typography,\n\t\t\t\tspacing: previous?.styles?.spacing,\n\t\t\t},\n\t\t\tblocks: previous?.styles?.blocks,\n\t\t\telements: previous?.styles?.elements,\n\t\t\tsettings: previous?.settings,\n\t\t}\n\t);\n\n\tif ( ! changedValueTree.length ) {\n\t\tglobalStylesChangesCache.set( cacheKey, EMPTY_ARRAY );\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\t// Remove duplicate results.\n\tconst result = [ ...new Set( changedValueTree ) ]\n\t\t/*\n\t\t * Translate the keys.\n\t\t * Remove empty translations.\n\t\t */\n\t\t.reduce( ( acc, curr ) => {\n\t\t\tconst translation = getTranslation( curr );\n\t\t\tif ( translation ) {\n\t\t\t\tacc.push( [ curr.split( '.' )[ 0 ], translation ] );\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, [] );\n\n\tglobalStylesChangesCache.set( cacheKey, result );\n\n\treturn result;\n}\n\n/**\n * From a getGlobalStylesChangelist() result, returns an array of translated global styles changes, grouped by type.\n * The types are 'blocks', 'elements', 'settings', and 'styles'.\n *\n * @param {Object}              next     The changed object to compare.\n * @param {Object}              previous The original object to compare against.\n * @param {{maxResults:number}} options  Options. maxResults: results to return before truncating.\n * @return {string[]}                    An array of translated changes.\n */\nexport default function getGlobalStylesChanges( next, previous, options = {} ) {\n\tlet changeList = getGlobalStylesChangelist( next, previous );\n\tconst changesLength = changeList.length;\n\tconst { maxResults } = options;\n\n\tif ( changesLength ) {\n\t\t// Truncate to `n` results if necessary.\n\t\tif ( !! maxResults && changesLength > maxResults ) {\n\t\t\tchangeList = changeList.slice( 0, maxResults );\n\t\t}\n\t\treturn Object.entries(\n\t\t\tchangeList.reduce( ( acc, curr ) => {\n\t\t\t\tconst group = acc[ curr[ 0 ] ] || [];\n\t\t\t\tif ( ! group.includes( curr[ 1 ] ) ) {\n\t\t\t\t\tacc[ curr[ 0 ] ] = [ ...group, curr[ 1 ] ];\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t}, {} )\n\t\t).map( ( [ key, changeValues ] ) => {\n\t\t\tconst changeValuesLength = changeValues.length;\n\t\t\tconst joinedChangesValue = changeValues.join(\n\t\t\t\t/* translators: Used between list items, there is a space after the comma. */\n\t\t\t\t__( ', ' ) // eslint-disable-line @wordpress/i18n-no-flanking-whitespace\n\t\t\t);\n\t\t\tswitch ( key ) {\n\t\t\t\tcase 'blocks': {\n\t\t\t\t\treturn sprintf(\n\t\t\t\t\t\t// translators: %s: a list of block names separated by a comma.\n\t\t\t\t\t\t_n( '%s block.', '%s blocks.', changeValuesLength ),\n\t\t\t\t\t\tjoinedChangesValue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcase 'elements': {\n\t\t\t\t\treturn sprintf(\n\t\t\t\t\t\t// translators: %s: a list of element names separated by a comma.\n\t\t\t\t\t\t_n( '%s element.', '%s elements.', changeValuesLength ),\n\t\t\t\t\t\tjoinedChangesValue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcase 'settings': {\n\t\t\t\t\treturn sprintf(\n\t\t\t\t\t\t// translators: %s: a list of theme.json setting labels separated by a comma.\n\t\t\t\t\t\t__( '%s settings.' ),\n\t\t\t\t\t\tjoinedChangesValue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcase 'styles': {\n\t\t\t\t\treturn sprintf(\n\t\t\t\t\t\t// translators: %s: a list of theme.json top-level styles labels separated by a comma.\n\t\t\t\t\t\t__( '%s styles.' ),\n\t\t\t\t\t\tjoinedChangesValue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\treturn sprintf(\n\t\t\t\t\t\t// translators: %s: a list of global styles changes separated by a comma.\n\t\t\t\t\t\t__( '%s.' ),\n\t\t\t\t\t\tjoinedChangesValue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn EMPTY_ARRAY;\n}\n","/**\n * Memize options object.\n *\n * @typedef MemizeOptions\n *\n * @property {number} [maxSize] Maximum size of the cache.\n */\n\n/**\n * Internal cache entry.\n *\n * @typedef MemizeCacheNode\n *\n * @property {?MemizeCacheNode|undefined} [prev] Previous node.\n * @property {?MemizeCacheNode|undefined} [next] Next node.\n * @property {Array<*>}                   args   Function arguments for cache\n *                                               entry.\n * @property {*}                          val    Function result.\n */\n\n/**\n * Properties of the enhanced function for controlling cache.\n *\n * @typedef MemizeMemoizedFunction\n *\n * @property {()=>void} clear Clear the cache.\n */\n\n/**\n * Accepts a function to be memoized, and returns a new memoized function, with\n * optional options.\n *\n * @template {(...args: any[]) => any} F\n *\n * @param {F}             fn        Function to memoize.\n * @param {MemizeOptions} [options] Options object.\n *\n * @return {((...args: Parameters<F>) => ReturnType<F>) & MemizeMemoizedFunction} Memoized function.\n */\nfunction memize(fn, options) {\n\tvar size = 0;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar head;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar tail;\n\n\toptions = options || {};\n\n\tfunction memoized(/* ...args */) {\n\t\tvar node = head,\n\t\t\tlen = arguments.length,\n\t\t\targs,\n\t\t\ti;\n\n\t\tsearchCache: while (node) {\n\t\t\t// Perform a shallow equality test to confirm that whether the node\n\t\t\t// under test is a candidate for the arguments passed. Two arrays\n\t\t\t// are shallowly equal if their length matches and each entry is\n\t\t\t// strictly equal between the two sets. Avoid abstracting to a\n\t\t\t// function which could incur an arguments leaking deoptimization.\n\n\t\t\t// Check whether node arguments match arguments length\n\t\t\tif (node.args.length !== arguments.length) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Check whether node arguments match arguments values\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (node.args[i] !== arguments[i]) {\n\t\t\t\t\tnode = node.next;\n\t\t\t\t\tcontinue searchCache;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif (node !== head) {\n\t\t\t\t// As tail, shift to previous. Must only shift if not also\n\t\t\t\t// head, since if both head and tail, there is no previous.\n\t\t\t\tif (node === tail) {\n\t\t\t\t\ttail = node.prev;\n\t\t\t\t}\n\n\t\t\t\t// Adjust siblings to point to each other. If node was tail,\n\t\t\t\t// this also handles new tail's empty `next` assignment.\n\t\t\t\t/** @type {MemizeCacheNode} */ (node.prev).next = node.next;\n\t\t\t\tif (node.next) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = head;\n\t\t\t\tnode.prev = null;\n\t\t\t\t/** @type {MemizeCacheNode} */ (head).prev = node;\n\t\t\t\thead = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\t// Create a copy of arguments (avoid leaking deoptimization)\n\t\targs = new Array(len);\n\t\tfor (i = 0; i < len; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\n\t\tnode = {\n\t\t\targs: args,\n\n\t\t\t// Generate the result from original function\n\t\t\tval: fn.apply(null, args),\n\t\t};\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif (head) {\n\t\t\thead.prev = node;\n\t\t\tnode.next = head;\n\t\t} else {\n\t\t\t// If no head, follows that there's no tail (at initial or reset)\n\t\t\ttail = node;\n\t\t}\n\n\t\t// Trim tail if we're reached max size and are pending cache insertion\n\t\tif (size === /** @type {MemizeOptions} */ (options).maxSize) {\n\t\t\ttail = /** @type {MemizeCacheNode} */ (tail).prev;\n\t\t\t/** @type {MemizeCacheNode} */ (tail).next = null;\n\t\t} else {\n\t\t\tsize++;\n\t\t}\n\n\t\thead = node;\n\n\t\treturn node.val;\n\t}\n\n\tmemoized.clear = function () {\n\t\thead = null;\n\t\ttail = null;\n\t\tsize = 0;\n\t};\n\n\t// Ignore reason: There's not a clear solution to create an intersection of\n\t// the function with additional properties, where the goal is to retain the\n\t// function signature of the incoming argument and add control properties\n\t// on the return value.\n\n\t// @ts-ignore\n\treturn memoized;\n}\n\nexport { memize as default };\n","/**\n * WordPress dependencies\n */\nimport { RawHTML, StrictMode, Fragment } from '@wordpress/element';\nimport {\n\tgetSaveElement,\n\t__unstableGetBlockProps as getBlockProps,\n} from '@wordpress/blocks';\nimport { RichTextData } from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport InnerBlocks from '../inner-blocks';\nimport { Content } from './content';\n\n/*\n * This function is similar to `@wordpress/element`'s `renderToString` function,\n * except that it does not render the elements to a string, but instead collects\n * the values of all rich text `Content` elements.\n */\nfunction addValuesForElement( element, values, innerBlocks ) {\n\tif ( null === element || undefined === element || false === element ) {\n\t\treturn;\n\t}\n\n\tif ( Array.isArray( element ) ) {\n\t\treturn addValuesForElements( element, values, innerBlocks );\n\t}\n\n\tswitch ( typeof element ) {\n\t\tcase 'string':\n\t\tcase 'number':\n\t\t\treturn;\n\t}\n\n\tconst { type, props } = element;\n\n\tswitch ( type ) {\n\t\tcase StrictMode:\n\t\tcase Fragment:\n\t\t\treturn addValuesForElements( props.children, values, innerBlocks );\n\t\tcase RawHTML:\n\t\t\treturn;\n\t\tcase InnerBlocks.Content:\n\t\t\treturn addValuesForBlocks( values, innerBlocks );\n\t\tcase Content:\n\t\t\tvalues.push( props.value );\n\t\t\treturn;\n\t}\n\n\tswitch ( typeof type ) {\n\t\tcase 'string':\n\t\t\tif ( typeof props.children !== 'undefined' ) {\n\t\t\t\treturn addValuesForElements(\n\t\t\t\t\tprops.children,\n\t\t\t\t\tvalues,\n\t\t\t\t\tinnerBlocks\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn;\n\t\tcase 'function':\n\t\t\tconst el =\n\t\t\t\ttype.prototype && typeof type.prototype.render === 'function'\n\t\t\t\t\t? new type( props ).render()\n\t\t\t\t\t: type( props );\n\t\t\treturn addValuesForElement( el, values, innerBlocks );\n\t}\n}\n\nfunction addValuesForElements( children, ...args ) {\n\tchildren = Array.isArray( children ) ? children : [ children ];\n\n\tfor ( let i = 0; i < children.length; i++ ) {\n\t\taddValuesForElement( children[ i ], ...args );\n\t}\n}\n\nfunction addValuesForBlocks( values, blocks ) {\n\tfor ( let i = 0; i < blocks.length; i++ ) {\n\t\tconst { name, attributes, innerBlocks } = blocks[ i ];\n\t\tconst saveElement = getSaveElement(\n\t\t\tname,\n\t\t\tattributes,\n\t\t\t// Instead of letting save elements use `useInnerBlocksProps.save`,\n\t\t\t// force them to use InnerBlocks.Content instead so we can intercept\n\t\t\t// a single component.\n\t\t\t<InnerBlocks.Content />\n\t\t);\n\t\taddValuesForElement( saveElement, values, innerBlocks );\n\t}\n}\n\nexport function getRichTextValues( blocks = [] ) {\n\tgetBlockProps.skipFilters = true;\n\tconst values = [];\n\taddValuesForBlocks( values, blocks );\n\tgetBlockProps.skipFilters = false;\n\treturn values.map( ( value ) =>\n\t\tvalue instanceof RichTextData\n\t\t\t? value\n\t\t\t: RichTextData.fromHTMLString( value )\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { CheckboxControl } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\n\nfunction BlockTypesChecklist( { blockTypes, value, onItemChange } ) {\n\treturn (\n\t\t<ul className=\"block-editor-block-manager__checklist\">\n\t\t\t{ blockTypes.map( ( blockType ) => (\n\t\t\t\t<li\n\t\t\t\t\tkey={ blockType.name }\n\t\t\t\t\tclassName=\"block-editor-block-manager__checklist-item\"\n\t\t\t\t>\n\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ blockType.title }\n\t\t\t\t\t\tchecked={ value.includes( blockType.name ) }\n\t\t\t\t\t\tonChange={ ( ...args ) =>\n\t\t\t\t\t\t\tonItemChange( blockType, ...args )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockIcon icon={ blockType.icon } />\n\t\t\t\t</li>\n\t\t\t) ) }\n\t\t</ul>\n\t);\n}\n\nexport default BlockTypesChecklist;\n","/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport { useInstanceId } from '@wordpress/compose';\nimport { CheckboxControl } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesChecklist from './checklist';\n\nfunction BlockManagerCategory( {\n\ttitle,\n\tblockTypes,\n\tselectedBlockTypes,\n\tonChange,\n} ) {\n\tconst instanceId = useInstanceId( BlockManagerCategory );\n\n\tconst toggleVisible = useCallback(\n\t\t( blockType, nextIsChecked ) => {\n\t\t\tif ( nextIsChecked ) {\n\t\t\t\tonChange( [ ...selectedBlockTypes, blockType ] );\n\t\t\t} else {\n\t\t\t\tonChange(\n\t\t\t\t\tselectedBlockTypes.filter(\n\t\t\t\t\t\t( { name } ) => name !== blockType.name\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[ selectedBlockTypes, onChange ]\n\t);\n\n\tconst toggleAllVisible = useCallback(\n\t\t( nextIsChecked ) => {\n\t\t\tif ( nextIsChecked ) {\n\t\t\t\tonChange( [\n\t\t\t\t\t...selectedBlockTypes,\n\t\t\t\t\t...blockTypes.filter(\n\t\t\t\t\t\t( blockType ) =>\n\t\t\t\t\t\t\t! selectedBlockTypes.find(\n\t\t\t\t\t\t\t\t( { name } ) => name === blockType.name\n\t\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t] );\n\t\t\t} else {\n\t\t\t\tonChange(\n\t\t\t\t\tselectedBlockTypes.filter(\n\t\t\t\t\t\t( selectedBlockType ) =>\n\t\t\t\t\t\t\t! blockTypes.find(\n\t\t\t\t\t\t\t\t( { name } ) => name === selectedBlockType.name\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[ blockTypes, selectedBlockTypes, onChange ]\n\t);\n\n\tif ( ! blockTypes.length ) {\n\t\treturn null;\n\t}\n\n\tconst checkedBlockNames = blockTypes\n\t\t.map( ( { name } ) => name )\n\t\t.filter( ( type ) =>\n\t\t\t( selectedBlockTypes ?? [] ).some(\n\t\t\t\t( selectedBlockType ) => selectedBlockType.name === type\n\t\t\t)\n\t\t);\n\n\tconst titleId = 'block-editor-block-manager__category-title-' + instanceId;\n\n\tconst isAllChecked = checkedBlockNames.length === blockTypes.length;\n\tconst isIndeterminate = ! isAllChecked && checkedBlockNames.length > 0;\n\n\treturn (\n\t\t<div\n\t\t\trole=\"group\"\n\t\t\taria-labelledby={ titleId }\n\t\t\tclassName=\"block-editor-block-manager__category\"\n\t\t>\n\t\t\t<CheckboxControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tchecked={ isAllChecked }\n\t\t\t\tonChange={ toggleAllVisible }\n\t\t\t\tclassName=\"block-editor-block-manager__category-title\"\n\t\t\t\tindeterminate={ isIndeterminate }\n\t\t\t\tlabel={ <span id={ titleId }>{ title }</span> }\n\t\t\t/>\n\t\t\t<BlockTypesChecklist\n\t\t\t\tblockTypes={ blockTypes }\n\t\t\t\tvalue={ checkedBlockNames }\n\t\t\t\tonItemChange={ toggleVisible }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default BlockManagerCategory;\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n} from '@wordpress/components';\nimport { useMemo } from '@wordpress/element';\nimport { __, _x } from '@wordpress/i18n';\n\n/**\n * @typedef {import('@wordpress/components/build-types/select-control/types').SelectControlProps} SelectControlProps\n */\n\n/**\n * The descriptions are purposely made generic as object-fit could be used for\n * any replaced element. Provide your own set of options if you need different\n * help text or labels.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/Replaced_element\n *\n * @type {SelectControlProps[]}\n */\nconst DEFAULT_SCALE_OPTIONS = [\n\t{\n\t\tvalue: 'fill',\n\t\tlabel: _x( 'Fill', 'Scale option for dimensions control' ),\n\t\thelp: __( 'Fill the space by stretching the content.' ),\n\t},\n\t{\n\t\tvalue: 'contain',\n\t\tlabel: _x( 'Contain', 'Scale option for dimensions control' ),\n\t\thelp: __( 'Fit the content to the space without clipping.' ),\n\t},\n\t{\n\t\tvalue: 'cover',\n\t\tlabel: _x( 'Cover', 'Scale option for dimensions control' ),\n\t\thelp: __( \"Fill the space by clipping what doesn't fit.\" ),\n\t},\n\t{\n\t\tvalue: 'none',\n\t\tlabel: _x( 'None', 'Scale option for dimensions control' ),\n\t\thelp: __(\n\t\t\t'Do not adjust the sizing of the content. Content that is too large will be clipped, and content that is too small will have additional padding.'\n\t\t),\n\t},\n\t{\n\t\tvalue: 'scale-down',\n\t\tlabel: _x( 'Scale down', 'Scale option for dimensions control' ),\n\t\thelp: __(\n\t\t\t'Scale down the content to fit the space if it is too big. Content that is too small will have additional padding.'\n\t\t),\n\t},\n];\n\n/**\n * @callback ScaleToolPropsOnChange\n * @param {string} nextValue New scale value.\n * @return {void}\n */\n\n/**\n * @typedef {Object} ScaleToolProps\n * @property {string}                 [panelId]               ID of the panel that contains the controls.\n * @property {string}                 [value]                 Current scale value.\n * @property {ScaleToolPropsOnChange} [onChange]              Callback to update the scale value.\n * @property {SelectControlProps[]}   [options]               Scale options.\n * @property {string}                 [defaultValue]          Default scale value.\n * @property {boolean}                [showControl=true]      Whether to show the control.\n * @property {boolean}                [isShownByDefault=true] Whether the tool panel is shown by default.\n */\n\n/**\n * A tool to select the CSS object-fit property for the image.\n *\n * @param {ScaleToolProps} props\n *\n * @return {import('react').ReactElement} The scale tool.\n */\nexport default function ScaleTool( {\n\tpanelId,\n\tvalue,\n\tonChange,\n\toptions = DEFAULT_SCALE_OPTIONS,\n\tdefaultValue = DEFAULT_SCALE_OPTIONS[ 0 ].value,\n\tisShownByDefault = true,\n} ) {\n\t// Match the CSS default so if the value is used directly in CSS it will look correct in the control.\n\tconst displayValue = value ?? 'fill';\n\n\tconst scaleHelp = useMemo( () => {\n\t\treturn options.reduce( ( acc, option ) => {\n\t\t\tacc[ option.value ] = option.help;\n\t\t\treturn acc;\n\t\t}, {} );\n\t}, [ options ] );\n\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\tlabel={ __( 'Scale' ) }\n\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\thasValue={ () => displayValue !== defaultValue }\n\t\t\tonDeselect={ () => onChange( defaultValue ) }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t<ToggleGroupControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Scale' ) }\n\t\t\t\tisBlock\n\t\t\t\thelp={ scaleHelp[ displayValue ] }\n\t\t\t\tvalue={ displayValue }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tsize=\"__unstable-large\"\n\t\t\t>\n\t\t\t\t{ options.map( ( option ) => (\n\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\tkey={ option.value }\n\t\t\t\t\t\t{ ...option }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</ToggleGroupControl>\n\t\t</ToolsPanelItem>\n\t);\n}\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","function memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport { memoize as default };\n","import memoize from '@emotion/memoize';\n\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar isPropValid = /* #__PURE__ */memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\n\nexport { isPropValid as default };\n","/*\n\nBased off glamor's StyleSheet, thanks Sunil \n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  tag.setAttribute('data-s', '');\n  return tag;\n}\n\nvar StyleSheet = /*#__PURE__*/function () {\n  function StyleSheet(options) {\n    var _this = this;\n\n    this._insertTag = function (tag) {\n      var before;\n\n      if (_this.tags.length === 0) {\n        if (_this.insertionPoint) {\n          before = _this.insertionPoint.nextSibling;\n        } else if (_this.prepend) {\n          before = _this.container.firstChild;\n        } else {\n          before = _this.before;\n        }\n      } else {\n        before = _this.tags[_this.tags.length - 1].nextSibling;\n      }\n\n      _this.container.insertBefore(tag, before);\n\n      _this.tags.push(tag);\n    };\n\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.prepend = options.prepend;\n    this.insertionPoint = options.insertionPoint;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.hydrate = function hydrate(nodes) {\n    nodes.forEach(this._insertTag);\n  };\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      this._insertTag(createStyleElement(this));\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (process.env.NODE_ENV !== 'production') {\n      var isImportRule = rule.charCodeAt(0) === 64 && rule.charCodeAt(1) === 105;\n\n      if (isImportRule && this._alreadyInsertedOrderInsensitiveRule) {\n        // this would only cause problem in speedy mode\n        // but we don't want enabling speedy to affect the observable behavior\n        // so we report this error at all times\n        console.error(\"You're attempting to insert the following rule:\\n\" + rule + '\\n\\n`@import` rules must be before all other types of rules in a stylesheet but other rules have already been inserted. Please ensure that `@import` rules are before all other rules.');\n      }\n      this._alreadyInsertedOrderInsensitiveRule = this._alreadyInsertedOrderInsensitiveRule || !isImportRule;\n    }\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production' && !/:(-moz-placeholder|-moz-focus-inner|-moz-focusring|-ms-input-placeholder|-moz-read-write|-moz-read-only|-ms-clear){/.test(rule)) {\n          console.error(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode && tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._alreadyInsertedOrderInsensitiveRule = false;\n    }\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n","/**\n * @param {number}\n * @return {number}\n */\nexport var abs = Math.abs\n\n/**\n * @param {number}\n * @return {string}\n */\nexport var from = String.fromCharCode\n\n/**\n * @param {object}\n * @return {object}\n */\nexport var assign = Object.assign\n\n/**\n * @param {string} value\n * @param {number} length\n * @return {number}\n */\nexport function hash (value, length) {\n\treturn (((((((length << 2) ^ charat(value, 0)) << 2) ^ charat(value, 1)) << 2) ^ charat(value, 2)) << 2) ^ charat(value, 3)\n}\n\n/**\n * @param {string} value\n * @return {string}\n */\nexport function trim (value) {\n\treturn value.trim()\n}\n\n/**\n * @param {string} value\n * @param {RegExp} pattern\n * @return {string?}\n */\nexport function match (value, pattern) {\n\treturn (value = pattern.exec(value)) ? value[0] : value\n}\n\n/**\n * @param {string} value\n * @param {(string|RegExp)} pattern\n * @param {string} replacement\n * @return {string}\n */\nexport function replace (value, pattern, replacement) {\n\treturn value.replace(pattern, replacement)\n}\n\n/**\n * @param {string} value\n * @param {string} search\n * @return {number}\n */\nexport function indexof (value, search) {\n\treturn value.indexOf(search)\n}\n\n/**\n * @param {string} value\n * @param {number} index\n * @return {number}\n */\nexport function charat (value, index) {\n\treturn value.charCodeAt(index) | 0\n}\n\n/**\n * @param {string} value\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function substr (value, begin, end) {\n\treturn value.slice(begin, end)\n}\n\n/**\n * @param {string} value\n * @return {number}\n */\nexport function strlen (value) {\n\treturn value.length\n}\n\n/**\n * @param {any[]} value\n * @return {number}\n */\nexport function sizeof (value) {\n\treturn value.length\n}\n\n/**\n * @param {any} value\n * @param {any[]} array\n * @return {any}\n */\nexport function append (value, array) {\n\treturn array.push(value), value\n}\n\n/**\n * @param {string[]} array\n * @param {function} callback\n * @return {string}\n */\nexport function combine (array, callback) {\n\treturn array.map(callback).join('')\n}\n","import {from, trim, charat, strlen, substr, append, assign} from './Utility.js'\n\nexport var line = 1\nexport var column = 1\nexport var length = 0\nexport var position = 0\nexport var character = 0\nexport var characters = ''\n\n/**\n * @param {string} value\n * @param {object | null} root\n * @param {object | null} parent\n * @param {string} type\n * @param {string[] | string} props\n * @param {object[] | string} children\n * @param {number} length\n */\nexport function node (value, root, parent, type, props, children, length) {\n\treturn {value: value, root: root, parent: parent, type: type, props: props, children: children, line: line, column: column, length: length, return: ''}\n}\n\n/**\n * @param {object} root\n * @param {object} props\n * @return {object}\n */\nexport function copy (root, props) {\n\treturn assign(node('', null, null, '', null, null, 0), root, {length: -root.length}, props)\n}\n\n/**\n * @return {number}\n */\nexport function char () {\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function prev () {\n\tcharacter = position > 0 ? charat(characters, --position) : 0\n\n\tif (column--, character === 10)\n\t\tcolumn = 1, line--\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function next () {\n\tcharacter = position < length ? charat(characters, position++) : 0\n\n\tif (column++, character === 10)\n\t\tcolumn = 1, line++\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function peek () {\n\treturn charat(characters, position)\n}\n\n/**\n * @return {number}\n */\nexport function caret () {\n\treturn position\n}\n\n/**\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function slice (begin, end) {\n\treturn substr(characters, begin, end)\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function token (type) {\n\tswitch (type) {\n\t\t// \\0 \\t \\n \\r \\s whitespace token\n\t\tcase 0: case 9: case 10: case 13: case 32:\n\t\t\treturn 5\n\t\t// ! + , / > @ ~ isolate token\n\t\tcase 33: case 43: case 44: case 47: case 62: case 64: case 126:\n\t\t// ; { } breakpoint token\n\t\tcase 59: case 123: case 125:\n\t\t\treturn 4\n\t\t// : accompanied token\n\t\tcase 58:\n\t\t\treturn 3\n\t\t// \" ' ( [ opening delimit token\n\t\tcase 34: case 39: case 40: case 91:\n\t\t\treturn 2\n\t\t// ) ] closing delimit token\n\t\tcase 41: case 93:\n\t\t\treturn 1\n\t}\n\n\treturn 0\n}\n\n/**\n * @param {string} value\n * @return {any[]}\n */\nexport function alloc (value) {\n\treturn line = column = 1, length = strlen(characters = value), position = 0, []\n}\n\n/**\n * @param {any} value\n * @return {any}\n */\nexport function dealloc (value) {\n\treturn characters = '', value\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function delimit (type) {\n\treturn trim(slice(position - 1, delimiter(type === 91 ? type + 2 : type === 40 ? type + 1 : type)))\n}\n\n/**\n * @param {string} value\n * @return {string[]}\n */\nexport function tokenize (value) {\n\treturn dealloc(tokenizer(alloc(value)))\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function whitespace (type) {\n\twhile (character = peek())\n\t\tif (character < 33)\n\t\t\tnext()\n\t\telse\n\t\t\tbreak\n\n\treturn token(type) > 2 || token(character) > 3 ? '' : ' '\n}\n\n/**\n * @param {string[]} children\n * @return {string[]}\n */\nexport function tokenizer (children) {\n\twhile (next())\n\t\tswitch (token(character)) {\n\t\t\tcase 0: append(identifier(position - 1), children)\n\t\t\t\tbreak\n\t\t\tcase 2: append(delimit(character), children)\n\t\t\t\tbreak\n\t\t\tdefault: append(from(character), children)\n\t\t}\n\n\treturn children\n}\n\n/**\n * @param {number} index\n * @param {number} count\n * @return {string}\n */\nexport function escaping (index, count) {\n\twhile (--count && next())\n\t\t// not 0-9 A-F a-f\n\t\tif (character < 48 || character > 102 || (character > 57 && character < 65) || (character > 70 && character < 97))\n\t\t\tbreak\n\n\treturn slice(index, caret() + (count < 6 && peek() == 32 && next() == 32))\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function delimiter (type) {\n\twhile (next())\n\t\tswitch (character) {\n\t\t\t// ] ) \" '\n\t\t\tcase type:\n\t\t\t\treturn position\n\t\t\t// \" '\n\t\t\tcase 34: case 39:\n\t\t\t\tif (type !== 34 && type !== 39)\n\t\t\t\t\tdelimiter(character)\n\t\t\t\tbreak\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (type === 41)\n\t\t\t\t\tdelimiter(type)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tnext()\n\t\t\t\tbreak\n\t\t}\n\n\treturn position\n}\n\n/**\n * @param {number} type\n * @param {number} index\n * @return {number}\n */\nexport function commenter (type, index) {\n\twhile (next())\n\t\t// //\n\t\tif (type + character === 47 + 10)\n\t\t\tbreak\n\t\t// /*\n\t\telse if (type + character === 42 + 42 && peek() === 47)\n\t\t\tbreak\n\n\treturn '/*' + slice(index, position - 1) + '*' + from(type === 47 ? type : next())\n}\n\n/**\n * @param {number} index\n * @return {string}\n */\nexport function identifier (index) {\n\twhile (!token(peek()))\n\t\tnext()\n\n\treturn slice(index, position)\n}\n","export var MS = '-ms-'\nexport var MOZ = '-moz-'\nexport var WEBKIT = '-webkit-'\n\nexport var COMMENT = 'comm'\nexport var RULESET = 'rule'\nexport var DECLARATION = 'decl'\n\nexport var PAGE = '@page'\nexport var MEDIA = '@media'\nexport var IMPORT = '@import'\nexport var CHARSET = '@charset'\nexport var VIEWPORT = '@viewport'\nexport var SUPPORTS = '@supports'\nexport var DOCUMENT = '@document'\nexport var NAMESPACE = '@namespace'\nexport var KEYFRAMES = '@keyframes'\nexport var FONT_FACE = '@font-face'\nexport var COUNTER_STYLE = '@counter-style'\nexport var FONT_FEATURE_VALUES = '@font-feature-values'\n","import {IMPORT, COMMENT, RULESET, DECLARATION, KEYFRAMES} from './Enum.js'\nimport {strlen, sizeof} from './Utility.js'\n\n/**\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function serialize (children, callback) {\n\tvar output = ''\n\tvar length = sizeof(children)\n\n\tfor (var i = 0; i < length; i++)\n\t\toutput += callback(children[i], i, children, callback) || ''\n\n\treturn output\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function stringify (element, index, children, callback) {\n\tswitch (element.type) {\n\t\tcase IMPORT: case DECLARATION: return element.return = element.return || element.value\n\t\tcase COMMENT: return ''\n\t\tcase KEYFRAMES: return element.return = element.value + '{' + serialize(element.children, callback) + '}'\n\t\tcase RULESET: element.value = element.props.join(',')\n\t}\n\n\treturn strlen(children = serialize(element.children, callback)) ? element.return = element.value + '{' + children + '}' : ''\n}\n","import {MS, MOZ, WEBKIT} from './Enum.js'\nimport {hash, charat, strlen, indexof, replace} from './Utility.js'\n\n/**\n * @param {string} value\n * @param {number} length\n * @return {string}\n */\nexport function prefix (value, length) {\n\tswitch (hash(value, length)) {\n\t\t// color-adjust\n\t\tcase 5103:\n\t\t\treturn WEBKIT + 'print-' + value + value\n\t\t// animation, animation-(delay|direction|duration|fill-mode|iteration-count|name|play-state|timing-function)\n\t\tcase 5737: case 4201: case 3177: case 3433: case 1641: case 4457: case 2921:\n\t\t// text-decoration, filter, clip-path, backface-visibility, column, box-decoration-break\n\t\tcase 5572: case 6356: case 5844: case 3191: case 6645: case 3005:\n\t\t// mask, mask-image, mask-(mode|clip|size), mask-(repeat|origin), mask-position, mask-composite,\n\t\tcase 6391: case 5879: case 5623: case 6135: case 4599: case 4855:\n\t\t// background-clip, columns, column-(count|fill|gap|rule|rule-color|rule-style|rule-width|span|width)\n\t\tcase 4215: case 6389: case 5109: case 5365: case 5621: case 3829:\n\t\t\treturn WEBKIT + value + value\n\t\t// appearance, user-select, transform, hyphens, text-size-adjust\n\t\tcase 5349: case 4246: case 4810: case 6968: case 2756:\n\t\t\treturn WEBKIT + value + MOZ + value + MS + value + value\n\t\t// flex, flex-direction\n\t\tcase 6828: case 4268:\n\t\t\treturn WEBKIT + value + MS + value + value\n\t\t// order\n\t\tcase 6165:\n\t\t\treturn WEBKIT + value + MS + 'flex-' + value + value\n\t\t// align-items\n\t\tcase 5187:\n\t\t\treturn WEBKIT + value + replace(value, /(\\w+).+(:[^]+)/, WEBKIT + 'box-$1$2' + MS + 'flex-$1$2') + value\n\t\t// align-self\n\t\tcase 5443:\n\t\t\treturn WEBKIT + value + MS + 'flex-item-' + replace(value, /flex-|-self/, '') + value\n\t\t// align-content\n\t\tcase 4675:\n\t\t\treturn WEBKIT + value + MS + 'flex-line-pack' + replace(value, /align-content|flex-|-self/, '') + value\n\t\t// flex-shrink\n\t\tcase 5548:\n\t\t\treturn WEBKIT + value + MS + replace(value, 'shrink', 'negative') + value\n\t\t// flex-basis\n\t\tcase 5292:\n\t\t\treturn WEBKIT + value + MS + replace(value, 'basis', 'preferred-size') + value\n\t\t// flex-grow\n\t\tcase 6060:\n\t\t\treturn WEBKIT + 'box-' + replace(value, '-grow', '') + WEBKIT + value + MS + replace(value, 'grow', 'positive') + value\n\t\t// transition\n\t\tcase 4554:\n\t\t\treturn WEBKIT + replace(value, /([^-])(transform)/g, '$1' + WEBKIT + '$2') + value\n\t\t// cursor\n\t\tcase 6187:\n\t\t\treturn replace(replace(replace(value, /(zoom-|grab)/, WEBKIT + '$1'), /(image-set)/, WEBKIT + '$1'), value, '') + value\n\t\t// background, background-image\n\t\tcase 5495: case 3959:\n\t\t\treturn replace(value, /(image-set\\([^]*)/, WEBKIT + '$1' + '$`$1')\n\t\t// justify-content\n\t\tcase 4968:\n\t\t\treturn replace(replace(value, /(.+:)(flex-)?(.*)/, WEBKIT + 'box-pack:$3' + MS + 'flex-pack:$3'), /s.+-b[^;]+/, 'justify') + WEBKIT + value + value\n\t\t// (margin|padding)-inline-(start|end)\n\t\tcase 4095: case 3583: case 4068: case 2532:\n\t\t\treturn replace(value, /(.+)-inline(.+)/, WEBKIT + '$1$2') + value\n\t\t// (min|max)?(width|height|inline-size|block-size)\n\t\tcase 8116: case 7059: case 5753: case 5535:\n\t\tcase 5445: case 5701: case 4933: case 4677:\n\t\tcase 5533: case 5789: case 5021: case 4765:\n\t\t\t// stretch, max-content, min-content, fill-available\n\t\t\tif (strlen(value) - 1 - length > 6)\n\t\t\t\tswitch (charat(value, length + 1)) {\n\t\t\t\t\t// (m)ax-content, (m)in-content\n\t\t\t\t\tcase 109:\n\t\t\t\t\t\t// -\n\t\t\t\t\t\tif (charat(value, length + 4) !== 45)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t// (f)ill-available, (f)it-content\n\t\t\t\t\tcase 102:\n\t\t\t\t\t\treturn replace(value, /(.+:)(.+)-([^]+)/, '$1' + WEBKIT + '$2-$3' + '$1' + MOZ + (charat(value, length + 3) == 108 ? '$3' : '$2-$3')) + value\n\t\t\t\t\t// (s)tretch\n\t\t\t\t\tcase 115:\n\t\t\t\t\t\treturn ~indexof(value, 'stretch') ? prefix(replace(value, 'stretch', 'fill-available'), length) + value : value\n\t\t\t\t}\n\t\t\tbreak\n\t\t// position: sticky\n\t\tcase 4949:\n\t\t\t// (s)ticky?\n\t\t\tif (charat(value, length + 1) !== 115)\n\t\t\t\tbreak\n\t\t// display: (flex|inline-flex)\n\t\tcase 6444:\n\t\t\tswitch (charat(value, strlen(value) - 3 - (~indexof(value, '!important') && 10))) {\n\t\t\t\t// stic(k)y\n\t\t\t\tcase 107:\n\t\t\t\t\treturn replace(value, ':', ':' + WEBKIT) + value\n\t\t\t\t// (inline-)?fl(e)x\n\t\t\t\tcase 101:\n\t\t\t\t\treturn replace(value, /(.+:)([^;!]+)(;|!.+)?/, '$1' + WEBKIT + (charat(value, 14) === 45 ? 'inline-' : '') + 'box$3' + '$1' + WEBKIT + '$2$3' + '$1' + MS + '$2box$3') + value\n\t\t\t}\n\t\t\tbreak\n\t\t// writing-mode\n\t\tcase 5936:\n\t\t\tswitch (charat(value, length + 11)) {\n\t\t\t\t// vertical-l(r)\n\t\t\t\tcase 114:\n\t\t\t\t\treturn WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb') + value\n\t\t\t\t// vertical-r(l)\n\t\t\t\tcase 108:\n\t\t\t\t\treturn WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb-rl') + value\n\t\t\t\t// horizontal(-)tb\n\t\t\t\tcase 45:\n\t\t\t\t\treturn WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'lr') + value\n\t\t\t}\n\n\t\t\treturn WEBKIT + value + MS + value + value\n\t}\n\n\treturn value\n}\n","import {COMMENT, RULESET, DECLARATION} from './Enum.js'\nimport {abs, trim, from, sizeof, strlen, substr, append, replace, indexof} from './Utility.js'\nimport {node, char, prev, next, peek, caret, alloc, dealloc, delimit, whitespace, escaping, identifier, commenter} from './Tokenizer.js'\n\n/**\n * @param {string} value\n * @return {object[]}\n */\nexport function compile (value) {\n\treturn dealloc(parse('', null, null, null, [''], value = alloc(value), 0, [0], value))\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {string[]} rule\n * @param {string[]} rules\n * @param {string[]} rulesets\n * @param {number[]} pseudo\n * @param {number[]} points\n * @param {string[]} declarations\n * @return {object}\n */\nexport function parse (value, root, parent, rule, rules, rulesets, pseudo, points, declarations) {\n\tvar index = 0\n\tvar offset = 0\n\tvar length = pseudo\n\tvar atrule = 0\n\tvar property = 0\n\tvar previous = 0\n\tvar variable = 1\n\tvar scanning = 1\n\tvar ampersand = 1\n\tvar character = 0\n\tvar type = ''\n\tvar props = rules\n\tvar children = rulesets\n\tvar reference = rule\n\tvar characters = type\n\n\twhile (scanning)\n\t\tswitch (previous = character, character = next()) {\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (previous != 108 && characters.charCodeAt(length - 1) == 58) {\n\t\t\t\t\tif (indexof(characters += replace(delimit(character), '&', '&\\f'), '&\\f') != -1)\n\t\t\t\t\t\tampersand = -1\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t// \" ' [\n\t\t\tcase 34: case 39: case 91:\n\t\t\t\tcharacters += delimit(character)\n\t\t\t\tbreak\n\t\t\t// \\t \\n \\r \\s\n\t\t\tcase 9: case 10: case 13: case 32:\n\t\t\t\tcharacters += whitespace(previous)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tcharacters += escaping(caret() - 1, 7)\n\t\t\t\tcontinue\n\t\t\t// /\n\t\t\tcase 47:\n\t\t\t\tswitch (peek()) {\n\t\t\t\t\tcase 42: case 47:\n\t\t\t\t\t\tappend(comment(commenter(next(), caret()), root, parent), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcharacters += '/'\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t// {\n\t\t\tcase 123 * variable:\n\t\t\t\tpoints[index++] = strlen(characters) * ampersand\n\t\t\t// } ; \\0\n\t\t\tcase 125 * variable: case 59: case 0:\n\t\t\t\tswitch (character) {\n\t\t\t\t\t// \\0 }\n\t\t\t\t\tcase 0: case 125: scanning = 0\n\t\t\t\t\t// ;\n\t\t\t\t\tcase 59 + offset:\n\t\t\t\t\t\tif (property > 0 && (strlen(characters) - length))\n\t\t\t\t\t\t\tappend(property > 32 ? declaration(characters + ';', rule, parent, length - 1) : declaration(replace(characters, ' ', '') + ';', rule, parent, length - 2), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @ ;\n\t\t\t\t\tcase 59: characters += ';'\n\t\t\t\t\t// { rule/at-rule\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tappend(reference = ruleset(characters, root, parent, index, offset, rules, points, type, props = [], children = [], length), rulesets)\n\n\t\t\t\t\t\tif (character === 123)\n\t\t\t\t\t\t\tif (offset === 0)\n\t\t\t\t\t\t\t\tparse(characters, root, reference, reference, props, rulesets, length, points, children)\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tswitch (atrule) {\n\t\t\t\t\t\t\t\t\t// d m s\n\t\t\t\t\t\t\t\t\tcase 100: case 109: case 115:\n\t\t\t\t\t\t\t\t\t\tparse(value, reference, reference, rule && append(ruleset(value, reference, reference, 0, 0, rules, points, type, rules, props = [], length), children), rules, children, length, points, rule ? props : children)\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tparse(characters, reference, reference, reference, [''], children, 0, points, children)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tindex = offset = property = 0, variable = ampersand = 1, type = characters = '', length = pseudo\n\t\t\t\tbreak\n\t\t\t// :\n\t\t\tcase 58:\n\t\t\t\tlength = 1 + strlen(characters), property = previous\n\t\t\tdefault:\n\t\t\t\tif (variable < 1)\n\t\t\t\t\tif (character == 123)\n\t\t\t\t\t\t--variable\n\t\t\t\t\telse if (character == 125 && variable++ == 0 && prev() == 125)\n\t\t\t\t\t\tcontinue\n\n\t\t\t\tswitch (characters += from(character), character * variable) {\n\t\t\t\t\t// &\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\tampersand = offset > 0 ? 1 : (characters += '\\f', -1)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// ,\n\t\t\t\t\tcase 44:\n\t\t\t\t\t\tpoints[index++] = (strlen(characters) - 1) * ampersand, ampersand = 1\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @\n\t\t\t\t\tcase 64:\n\t\t\t\t\t\t// -\n\t\t\t\t\t\tif (peek() === 45)\n\t\t\t\t\t\t\tcharacters += delimit(next())\n\n\t\t\t\t\t\tatrule = peek(), offset = length = strlen(type = characters += identifier(caret())), character++\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// -\n\t\t\t\t\tcase 45:\n\t\t\t\t\t\tif (previous === 45 && strlen(characters) == 2)\n\t\t\t\t\t\t\tvariable = 0\n\t\t\t\t}\n\t\t}\n\n\treturn rulesets\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} index\n * @param {number} offset\n * @param {string[]} rules\n * @param {number[]} points\n * @param {string} type\n * @param {string[]} props\n * @param {string[]} children\n * @param {number} length\n * @return {object}\n */\nexport function ruleset (value, root, parent, index, offset, rules, points, type, props, children, length) {\n\tvar post = offset - 1\n\tvar rule = offset === 0 ? rules : ['']\n\tvar size = sizeof(rule)\n\n\tfor (var i = 0, j = 0, k = 0; i < index; ++i)\n\t\tfor (var x = 0, y = substr(value, post + 1, post = abs(j = points[i])), z = value; x < size; ++x)\n\t\t\tif (z = trim(j > 0 ? rule[x] + ' ' + y : replace(y, /&\\f/g, rule[x])))\n\t\t\t\tprops[k++] = z\n\n\treturn node(value, root, parent, offset === 0 ? RULESET : type, props, children, length)\n}\n\n/**\n * @param {number} value\n * @param {object} root\n * @param {object?} parent\n * @return {object}\n */\nexport function comment (value, root, parent) {\n\treturn node(value, root, parent, COMMENT, from(char()), substr(value, 2, -2), 0)\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} length\n * @return {object}\n */\nexport function declaration (value, root, parent, length) {\n\treturn node(value, root, parent, DECLARATION, substr(value, 0, length), substr(value, length + 1, -1), length)\n}\n","import { StyleSheet } from '@emotion/sheet';\nimport { dealloc, alloc, next, token, from, peek, delimit, slice, position, stringify, COMMENT, rulesheet, middleware, prefixer, serialize, compile } from 'stylis';\nimport '@emotion/weak-memoize';\nimport '@emotion/memoize';\n\nvar last = function last(arr) {\n  return arr.length ? arr[arr.length - 1] : null;\n}; // based on https://github.com/thysultan/stylis.js/blob/e6843c373ebcbbfade25ebcc23f540ed8508da0a/src/Tokenizer.js#L239-L244\n\n\nvar identifierWithPointTracking = function identifierWithPointTracking(begin, points, index) {\n  var previous = 0;\n  var character = 0;\n\n  while (true) {\n    previous = character;\n    character = peek(); // &\\f\n\n    if (previous === 38 && character === 12) {\n      points[index] = 1;\n    }\n\n    if (token(character)) {\n      break;\n    }\n\n    next();\n  }\n\n  return slice(begin, position);\n};\n\nvar toRules = function toRules(parsed, points) {\n  // pretend we've started with a comma\n  var index = -1;\n  var character = 44;\n\n  do {\n    switch (token(character)) {\n      case 0:\n        // &\\f\n        if (character === 38 && peek() === 12) {\n          // this is not 100% correct, we don't account for literal sequences here - like for example quoted strings\n          // stylis inserts \\f after & to know when & where it should replace this sequence with the context selector\n          // and when it should just concatenate the outer and inner selectors\n          // it's very unlikely for this sequence to actually appear in a different context, so we just leverage this fact here\n          points[index] = 1;\n        }\n\n        parsed[index] += identifierWithPointTracking(position - 1, points, index);\n        break;\n\n      case 2:\n        parsed[index] += delimit(character);\n        break;\n\n      case 4:\n        // comma\n        if (character === 44) {\n          // colon\n          parsed[++index] = peek() === 58 ? '&\\f' : '';\n          points[index] = parsed[index].length;\n          break;\n        }\n\n      // fallthrough\n\n      default:\n        parsed[index] += from(character);\n    }\n  } while (character = next());\n\n  return parsed;\n};\n\nvar getRules = function getRules(value, points) {\n  return dealloc(toRules(alloc(value), points));\n}; // WeakSet would be more appropriate, but only WeakMap is supported in IE11\n\n\nvar fixedElements = /* #__PURE__ */new WeakMap();\nvar compat = function compat(element) {\n  if (element.type !== 'rule' || !element.parent || // positive .length indicates that this rule contains pseudo\n  // negative .length indicates that this rule has been already prefixed\n  element.length < 1) {\n    return;\n  }\n\n  var value = element.value,\n      parent = element.parent;\n  var isImplicitRule = element.column === parent.column && element.line === parent.line;\n\n  while (parent.type !== 'rule') {\n    parent = parent.parent;\n    if (!parent) return;\n  } // short-circuit for the simplest case\n\n\n  if (element.props.length === 1 && value.charCodeAt(0) !== 58\n  /* colon */\n  && !fixedElements.get(parent)) {\n    return;\n  } // if this is an implicitly inserted rule (the one eagerly inserted at the each new nested level)\n  // then the props has already been manipulated beforehand as they that array is shared between it and its \"rule parent\"\n\n\n  if (isImplicitRule) {\n    return;\n  }\n\n  fixedElements.set(element, true);\n  var points = [];\n  var rules = getRules(value, points);\n  var parentRules = parent.props;\n\n  for (var i = 0, k = 0; i < rules.length; i++) {\n    for (var j = 0; j < parentRules.length; j++, k++) {\n      element.props[k] = points[i] ? rules[i].replace(/&\\f/g, parentRules[j]) : parentRules[j] + \" \" + rules[i];\n    }\n  }\n};\nvar removeLabel = function removeLabel(element) {\n  if (element.type === 'decl') {\n    var value = element.value;\n\n    if ( // charcode for l\n    value.charCodeAt(0) === 108 && // charcode for b\n    value.charCodeAt(2) === 98) {\n      // this ignores label\n      element[\"return\"] = '';\n      element.value = '';\n    }\n  }\n};\nvar ignoreFlag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n\nvar isIgnoringComment = function isIgnoringComment(element) {\n  return !!element && element.type === 'comm' && element.children.indexOf(ignoreFlag) > -1;\n};\n\nvar createUnsafeSelectorsAlarm = function createUnsafeSelectorsAlarm(cache) {\n  return function (element, index, children) {\n    if (element.type !== 'rule') return;\n    var unsafePseudoClasses = element.value.match(/(:first|:nth|:nth-last)-child/g);\n\n    if (unsafePseudoClasses && cache.compat !== true) {\n      var prevElement = index > 0 ? children[index - 1] : null;\n\n      if (prevElement && isIgnoringComment(last(prevElement.children))) {\n        return;\n      }\n\n      unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n        console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n      });\n    }\n  };\n};\n\nvar isImportRule = function isImportRule(element) {\n  return element.type.charCodeAt(1) === 105 && element.type.charCodeAt(0) === 64;\n};\n\nvar isPrependedWithRegularRules = function isPrependedWithRegularRules(index, children) {\n  for (var i = index - 1; i >= 0; i--) {\n    if (!isImportRule(children[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}; // use this to remove incorrect elements from further processing\n// so they don't get handed to the `sheet` (or anything else)\n// as that could potentially lead to additional logs which in turn could be overhelming to the user\n\n\nvar nullifyElement = function nullifyElement(element) {\n  element.type = '';\n  element.value = '';\n  element[\"return\"] = '';\n  element.children = '';\n  element.props = '';\n};\n\nvar incorrectImportAlarm = function incorrectImportAlarm(element, index, children) {\n  if (!isImportRule(element)) {\n    return;\n  }\n\n  if (element.parent) {\n    console.error(\"`@import` rules can't be nested inside other rules. Please move it to the top level and put it before regular rules. Keep in mind that they can only be used within global styles.\");\n    nullifyElement(element);\n  } else if (isPrependedWithRegularRules(index, children)) {\n    console.error(\"`@import` rules can't be after other rules. Please put your `@import` rules before your other rules.\");\n    nullifyElement(element);\n  }\n};\n\nvar defaultStylisPlugins = [prefixer];\n\nvar createCache = function createCache(options) {\n  var key = options.key;\n\n  if (process.env.NODE_ENV !== 'production' && !key) {\n    throw new Error(\"You have to configure `key` for your cache. Please make sure it's unique (and not equal to 'css') as it's used for linking styles to your cache.\\n\" + \"If multiple caches share the same key they might \\\"fight\\\" for each other's style elements.\");\n  }\n\n  if ( key === 'css') {\n    var ssrStyles = document.querySelectorAll(\"style[data-emotion]:not([data-s])\"); // get SSRed styles out of the way of React's hydration\n    // document.head is a safe place to move them to(though note document.head is not necessarily the last place they will be)\n    // note this very very intentionally targets all style elements regardless of the key to ensure\n    // that creating a cache works inside of render of a React component\n\n    Array.prototype.forEach.call(ssrStyles, function (node) {\n      // we want to only move elements which have a space in the data-emotion attribute value\n      // because that indicates that it is an Emotion 11 server-side rendered style elements\n      // while we will already ignore Emotion 11 client-side inserted styles because of the :not([data-s]) part in the selector\n      // Emotion 10 client-side inserted styles did not have data-s (but importantly did not have a space in their data-emotion attributes)\n      // so checking for the space ensures that loading Emotion 11 after Emotion 10 has inserted some styles\n      // will not result in the Emotion 10 styles being destroyed\n      var dataEmotionAttribute = node.getAttribute('data-emotion');\n\n      if (dataEmotionAttribute.indexOf(' ') === -1) {\n        return;\n      }\n      document.head.appendChild(node);\n      node.setAttribute('data-s', '');\n    });\n  }\n\n  var stylisPlugins = options.stylisPlugins || defaultStylisPlugins;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var inserted = {}; // $FlowFixMe\n\n  var container;\n  var nodesToHydrate = [];\n\n  {\n    container = options.container || document.head;\n    Array.prototype.forEach.call( // this means we will ignore elements which don't have a space in them which\n    // means that the style elements we're looking at are only Emotion 11 server-rendered style elements\n    document.querySelectorAll(\"style[data-emotion^=\\\"\" + key + \" \\\"]\"), function (node) {\n      var attrib = node.getAttribute(\"data-emotion\").split(' '); // $FlowFixMe\n\n      for (var i = 1; i < attrib.length; i++) {\n        inserted[attrib[i]] = true;\n      }\n\n      nodesToHydrate.push(node);\n    });\n  }\n\n  var _insert;\n\n  var omnipresentPlugins = [compat, removeLabel];\n\n  if (process.env.NODE_ENV !== 'production') {\n    omnipresentPlugins.push(createUnsafeSelectorsAlarm({\n      get compat() {\n        return cache.compat;\n      }\n\n    }), incorrectImportAlarm);\n  }\n\n  {\n    var currentSheet;\n    var finalizingPlugins = [stringify, process.env.NODE_ENV !== 'production' ? function (element) {\n      if (!element.root) {\n        if (element[\"return\"]) {\n          currentSheet.insert(element[\"return\"]);\n        } else if (element.value && element.type !== COMMENT) {\n          // insert empty rule in non-production environments\n          // so @emotion/jest can grab `key` from the (JS)DOM for caches without any rules inserted yet\n          currentSheet.insert(element.value + \"{}\");\n        }\n      }\n    } : rulesheet(function (rule) {\n      currentSheet.insert(rule);\n    })];\n    var serializer = middleware(omnipresentPlugins.concat(stylisPlugins, finalizingPlugins));\n\n    var stylis = function stylis(styles) {\n      return serialize(compile(styles), serializer);\n    };\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      currentSheet = sheet;\n\n      if (process.env.NODE_ENV !== 'production' && serialized.map !== undefined) {\n        currentSheet = {\n          insert: function insert(rule) {\n            sheet.insert(rule + serialized.map);\n          }\n        };\n      }\n\n      stylis(selector ? selector + \"{\" + serialized.styles + \"}\" : serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[serialized.name] = true;\n      }\n    };\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy,\n      prepend: options.prepend,\n      insertionPoint: options.insertionPoint\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  cache.sheet.hydrate(nodesToHydrate);\n  return cache;\n};\n\nexport default createCache;\n","import {MS, MOZ, WEBKIT, RULESET, KEYFRAMES, DECLARATION} from './Enum.js'\nimport {match, charat, substr, strlen, sizeof, replace, combine} from './Utility.js'\nimport {copy, tokenize} from './Tokenizer.js'\nimport {serialize} from './Serializer.js'\nimport {prefix} from './Prefixer.js'\n\n/**\n * @param {function[]} collection\n * @return {function}\n */\nexport function middleware (collection) {\n\tvar length = sizeof(collection)\n\n\treturn function (element, index, children, callback) {\n\t\tvar output = ''\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\toutput += collection[i](element, index, children, callback) || ''\n\n\t\treturn output\n\t}\n}\n\n/**\n * @param {function} callback\n * @return {function}\n */\nexport function rulesheet (callback) {\n\treturn function (element) {\n\t\tif (!element.root)\n\t\t\tif (element = element.return)\n\t\t\t\tcallback(element)\n\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n */\nexport function prefixer (element, index, children, callback) {\n\tif (element.length > -1)\n\t\tif (!element.return)\n\t\t\tswitch (element.type) {\n\t\t\t\tcase DECLARATION: element.return = prefix(element.value, element.length)\n\t\t\t\t\tbreak\n\t\t\t\tcase KEYFRAMES:\n\t\t\t\t\treturn serialize([copy(element, {value: replace(element.value, '@', '@' + WEBKIT)})], callback)\n\t\t\t\tcase RULESET:\n\t\t\t\t\tif (element.length)\n\t\t\t\t\t\treturn combine(element.props, function (value) {\n\t\t\t\t\t\t\tswitch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n\t\t\t\t\t\t\t\t// :read-(only|write)\n\t\t\t\t\t\t\t\tcase ':read-only': case ':read-write':\n\t\t\t\t\t\t\t\t\treturn serialize([copy(element, {props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]})], callback)\n\t\t\t\t\t\t\t\t// :placeholder\n\t\t\t\t\t\t\t\tcase '::placeholder':\n\t\t\t\t\t\t\t\t\treturn serialize([\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]})\n\t\t\t\t\t\t\t\t\t], callback)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn ''\n\t\t\t\t\t\t})\n\t\t\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n */\nexport function namespace (element) {\n\tswitch (element.type) {\n\t\tcase RULESET:\n\t\t\telement.props = element.props.map(function (value) {\n\t\t\t\treturn combine(tokenize(value), function (value, index, children) {\n\t\t\t\t\tswitch (charat(value, 0)) {\n\t\t\t\t\t\t// \\f\n\t\t\t\t\t\tcase 12:\n\t\t\t\t\t\t\treturn substr(value, 1, strlen(value))\n\t\t\t\t\t\t// \\0 ( + > ~\n\t\t\t\t\t\tcase 0: case 40: case 43: case 62: case 126:\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t// :\n\t\t\t\t\t\tcase 58:\n\t\t\t\t\t\t\tif (children[++index] === 'global')\n\t\t\t\t\t\t\t\tchildren[index] = '', children[++index] = '\\f' + substr(children[index], index = 1, -1)\n\t\t\t\t\t\t// \\s\n\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\treturn index === 1 ? '' : value\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tswitch (index) {\n\t\t\t\t\t\t\t\tcase 0: element = value\n\t\t\t\t\t\t\t\t\treturn sizeof(children) > 1 ? '' : value\n\t\t\t\t\t\t\t\tcase index = sizeof(children) - 1: case 2:\n\t\t\t\t\t\t\t\t\treturn index === 2 ? value + element + element : value + element\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t}\n}\n","var unitlessKeys = {\n  animationIterationCount: 1,\n  aspectRatio: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport { unitlessKeys as default };\n","function memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport { memoize as default };\n","import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\nvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = /* #__PURE__ */memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(var|attr|counters?|url|element|(((repeating-)?(linear|radial))|conic)-gradient)\\(|(no-)?(open|close)-quote/;\n  var contentValues = ['normal', 'none', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n  var msPattern = /^-ms-/;\n  var hyphenPattern = /-(.)/g;\n  var hyphenatedCache = {};\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        throw new Error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    var processed = oldProcessStyleValue(key, value);\n\n    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n      hyphenatedCache[key] = true;\n      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n        return _char.toUpperCase();\n      }) + \"?\");\n    }\n\n    return processed;\n  };\n}\n\nvar noComponentSelectorMessage = 'Component selectors can only be used in conjunction with ' + '@emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware ' + 'compiler transform.';\n\nfunction handleInterpolation(mergedProps, registered, interpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  if (interpolation.__emotion_styles !== undefined) {\n    if (process.env.NODE_ENV !== 'production' && interpolation.toString() === 'NO_COMPONENT_SELECTOR') {\n      throw new Error(noComponentSelectorMessage);\n    }\n\n    return interpolation;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        if (interpolation.anim === 1) {\n          cursor = {\n            name: interpolation.name,\n            styles: interpolation.styles,\n            next: cursor\n          };\n          return interpolation.name;\n        }\n\n        if (interpolation.styles !== undefined) {\n          var next = interpolation.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = interpolation.styles + \";\";\n\n          if (process.env.NODE_ENV !== 'production' && interpolation.map !== undefined) {\n            styles += interpolation.map;\n          }\n\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result);\n        } else if (process.env.NODE_ENV !== 'production') {\n          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        break;\n      }\n\n    case 'string':\n      if (process.env.NODE_ENV !== 'production') {\n        var matched = [];\n        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n          var fakeVarName = \"animation\" + matched.length;\n          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n          return \"${\" + fakeVarName + \"}\";\n        });\n\n        if (matched.length) {\n          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n        }\n      }\n\n      break;\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  if (registered == null) {\n    return interpolation;\n  }\n\n  var cached = registered[interpolation];\n  return cached !== undefined ? cached : interpolation;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i]) + \";\";\n    }\n  } else {\n    for (var _key in obj) {\n      var value = obj[_key];\n\n      if (typeof value !== 'object') {\n        if (registered != null && registered[value] !== undefined) {\n          string += _key + \"{\" + registered[value] + \"}\";\n        } else if (isProcessableValue(value)) {\n          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n        }\n      } else {\n        if (_key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n          throw new Error(noComponentSelectorMessage);\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value);\n\n          switch (_key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(_key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n                if (process.env.NODE_ENV !== 'production' && _key === 'undefined') {\n                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n                }\n\n                string += _key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*(;|$)/g;\nvar sourceMapPattern;\n\nif (process.env.NODE_ENV !== 'production') {\n  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//g;\n} // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\n\nvar cursor;\nvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings);\n  } else {\n    if (process.env.NODE_ENV !== 'production' && strings[0] === undefined) {\n      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n    }\n\n    styles += strings[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i]);\n\n    if (stringMode) {\n      if (process.env.NODE_ENV !== 'production' && strings[i] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles += strings[i];\n    }\n  }\n\n  var sourceMap;\n\n  if (process.env.NODE_ENV !== 'production') {\n    styles = styles.replace(sourceMapPattern, function (match) {\n      sourceMap = match;\n      return '';\n    });\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + // $FlowFixMe we know it's not null\n    match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n    return {\n      name: name,\n      styles: styles,\n      map: sourceMap,\n      next: cursor,\n      toString: function toString() {\n        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n      }\n    };\n  }\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n};\n\nexport { serializeStyles };\n","import { createContext, useContext, forwardRef, createElement, Fragment } from 'react';\nimport createCache from '@emotion/cache';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport weakMemoize from '@emotion/weak-memoize';\nimport hoistNonReactStatics from '../_isolated-hnrs/dist/emotion-react-_isolated-hnrs.browser.esm.js';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\nimport { serializeStyles } from '@emotion/serialize';\n\nvar hasOwnProperty = {}.hasOwnProperty;\n\nvar EmotionCacheContext = /* #__PURE__ */createContext( // we're doing this to avoid preconstruct's dead code elimination in this one case\n// because this module is primarily intended for the browser and node\n// but it's also required in react native and similar environments sometimes\n// and we could have a special build just for that\n// but this is much easier and the native packages\n// might use a different theme context in the future anyway\ntypeof HTMLElement !== 'undefined' ? /* #__PURE__ */createCache({\n  key: 'css'\n}) : null);\n\nif (process.env.NODE_ENV !== 'production') {\n  EmotionCacheContext.displayName = 'EmotionCacheContext';\n}\n\nvar CacheProvider = EmotionCacheContext.Provider;\nvar __unsafe_useEmotionCache = function useEmotionCache() {\n  return useContext(EmotionCacheContext);\n};\n\nvar withEmotionCache = function withEmotionCache(func) {\n  // $FlowFixMe\n  return /*#__PURE__*/forwardRef(function (props, ref) {\n    // the cache will never be null in the browser\n    var cache = useContext(EmotionCacheContext);\n    return func(props, cache, ref);\n  });\n};\n\nvar ThemeContext = /* #__PURE__ */createContext({});\n\nif (process.env.NODE_ENV !== 'production') {\n  ThemeContext.displayName = 'EmotionThemeContext';\n}\n\nvar useTheme = function useTheme() {\n  return useContext(ThemeContext);\n};\n\nvar getTheme = function getTheme(outerTheme, theme) {\n  if (typeof theme === 'function') {\n    var mergedTheme = theme(outerTheme);\n\n    if (process.env.NODE_ENV !== 'production' && (mergedTheme == null || typeof mergedTheme !== 'object' || Array.isArray(mergedTheme))) {\n      throw new Error('[ThemeProvider] Please return an object from your theme function, i.e. theme={() => ({})}!');\n    }\n\n    return mergedTheme;\n  }\n\n  if (process.env.NODE_ENV !== 'production' && (theme == null || typeof theme !== 'object' || Array.isArray(theme))) {\n    throw new Error('[ThemeProvider] Please make your theme prop a plain object');\n  }\n\n  return _extends({}, outerTheme, theme);\n};\n\nvar createCacheWithTheme = /* #__PURE__ */weakMemoize(function (outerTheme) {\n  return weakMemoize(function (theme) {\n    return getTheme(outerTheme, theme);\n  });\n});\nvar ThemeProvider = function ThemeProvider(props) {\n  var theme = useContext(ThemeContext);\n\n  if (props.theme !== theme) {\n    theme = createCacheWithTheme(theme)(props.theme);\n  }\n\n  return /*#__PURE__*/createElement(ThemeContext.Provider, {\n    value: theme\n  }, props.children);\n};\nfunction withTheme(Component) {\n  var componentName = Component.displayName || Component.name || 'Component';\n\n  var render = function render(props, ref) {\n    var theme = useContext(ThemeContext);\n    return /*#__PURE__*/createElement(Component, _extends({\n      theme: theme,\n      ref: ref\n    }, props));\n  }; // $FlowFixMe\n\n\n  var WithTheme = /*#__PURE__*/forwardRef(render);\n  WithTheme.displayName = \"WithTheme(\" + componentName + \")\";\n  return hoistNonReactStatics(WithTheme, Component);\n}\n\nvar getFunctionNameFromStackTraceLine = function getFunctionNameFromStackTraceLine(line) {\n  // V8\n  var match = /^\\s+at\\s+([A-Za-z0-9$.]+)\\s/.exec(line);\n\n  if (match) {\n    // The match may be something like 'Object.createEmotionProps'\n    var parts = match[1].split('.');\n    return parts[parts.length - 1];\n  } // Safari / Firefox\n\n\n  match = /^([A-Za-z0-9$.]+)@/.exec(line);\n  if (match) return match[1];\n  return undefined;\n};\n\nvar internalReactFunctionNames = /* #__PURE__ */new Set(['renderWithHooks', 'processChild', 'finishClassComponent', 'renderToString']); // These identifiers come from error stacks, so they have to be valid JS\n// identifiers, thus we only need to replace what is a valid character for JS,\n// but not for CSS.\n\nvar sanitizeIdentifier = function sanitizeIdentifier(identifier) {\n  return identifier.replace(/\\$/g, '-');\n};\n\nvar getLabelFromStackTrace = function getLabelFromStackTrace(stackTrace) {\n  if (!stackTrace) return undefined;\n  var lines = stackTrace.split('\\n');\n\n  for (var i = 0; i < lines.length; i++) {\n    var functionName = getFunctionNameFromStackTraceLine(lines[i]); // The first line of V8 stack traces is just \"Error\"\n\n    if (!functionName) continue; // If we reach one of these, we have gone too far and should quit\n\n    if (internalReactFunctionNames.has(functionName)) break; // The component name is the first function in the stack that starts with an\n    // uppercase letter\n\n    if (/^[A-Z]/.test(functionName)) return sanitizeIdentifier(functionName);\n  }\n\n  return undefined;\n};\n\nvar typePropName = '__EMOTION_TYPE_PLEASE_DO_NOT_USE__';\nvar labelPropName = '__EMOTION_LABEL_PLEASE_DO_NOT_USE__';\nvar createEmotionProps = function createEmotionProps(type, props) {\n  if (process.env.NODE_ENV !== 'production' && typeof props.css === 'string' && // check if there is a css declaration\n  props.css.indexOf(':') !== -1) {\n    throw new Error(\"Strings are not allowed as css prop values, please wrap it in a css template literal from '@emotion/react' like this: css`\" + props.css + \"`\");\n  }\n\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps[typePropName] = type; // For performance, only call getLabelFromStackTrace in development and when\n  // the label hasn't already been computed\n\n  if (process.env.NODE_ENV !== 'production' && !!props.css && (typeof props.css !== 'object' || typeof props.css.name !== 'string' || props.css.name.indexOf('-') === -1)) {\n    var label = getLabelFromStackTrace(new Error().stack);\n    if (label) newProps[labelPropName] = label;\n  }\n\n  return newProps;\n};\n\nvar Noop = function Noop() {\n  return null;\n};\n\nvar Emotion = /* #__PURE__ */withEmotionCache(function (props, cache, ref) {\n  var cssProp = props.css; // so that using `css` from `emotion` and passing the result to the css prop works\n  // not passing the registered cache to serializeStyles because it would\n  // make certain babel optimisations not possible\n\n  if (typeof cssProp === 'string' && cache.registered[cssProp] !== undefined) {\n    cssProp = cache.registered[cssProp];\n  }\n\n  var type = props[typePropName];\n  var registeredStyles = [cssProp];\n  var className = '';\n\n  if (typeof props.className === 'string') {\n    className = getRegisteredStyles(cache.registered, registeredStyles, props.className);\n  } else if (props.className != null) {\n    className = props.className + \" \";\n  }\n\n  var serialized = serializeStyles(registeredStyles, undefined, useContext(ThemeContext));\n\n  if (process.env.NODE_ENV !== 'production' && serialized.name.indexOf('-') === -1) {\n    var labelFromStack = props[labelPropName];\n\n    if (labelFromStack) {\n      serialized = serializeStyles([serialized, 'label:' + labelFromStack + ';']);\n    }\n  }\n\n  var rules = insertStyles(cache, serialized, typeof type === 'string');\n  className += cache.key + \"-\" + serialized.name;\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key) && key !== 'css' && key !== typePropName && (process.env.NODE_ENV === 'production' || key !== labelPropName)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps.ref = ref;\n  newProps.className = className;\n  var ele = /*#__PURE__*/createElement(type, newProps);\n  var possiblyStyleElement = /*#__PURE__*/createElement(Noop, null);\n\n\n  return /*#__PURE__*/createElement(Fragment, null, possiblyStyleElement, ele);\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  Emotion.displayName = 'EmotionCssPropInternal';\n}\n\nexport { CacheProvider as C, Emotion as E, ThemeContext as T, __unsafe_useEmotionCache as _, ThemeProvider as a, withTheme as b, createEmotionProps as c, hasOwnProperty as h, useTheme as u, withEmotionCache as w };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport { useContext, createElement, Fragment } from 'react';\nimport isPropValid from '@emotion/is-prop-valid';\nimport { withEmotionCache, ThemeContext } from '@emotion/react';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\nimport { serializeStyles } from '@emotion/serialize';\n\nvar testOmitPropsOnStringTag = isPropValid;\n\nvar testOmitPropsOnComponent = function testOmitPropsOnComponent(key) {\n  return key !== 'theme';\n};\n\nvar getDefaultShouldForwardProp = function getDefaultShouldForwardProp(tag) {\n  return typeof tag === 'string' && // 96 is one less than the char code\n  // for \"a\" so this is checking that\n  // it's a lowercase character\n  tag.charCodeAt(0) > 96 ? testOmitPropsOnStringTag : testOmitPropsOnComponent;\n};\nvar composeShouldForwardProps = function composeShouldForwardProps(tag, options, isReal) {\n  var shouldForwardProp;\n\n  if (options) {\n    var optionsShouldForwardProp = options.shouldForwardProp;\n    shouldForwardProp = tag.__emotion_forwardProp && optionsShouldForwardProp ? function (propName) {\n      return tag.__emotion_forwardProp(propName) && optionsShouldForwardProp(propName);\n    } : optionsShouldForwardProp;\n  }\n\n  if (typeof shouldForwardProp !== 'function' && isReal) {\n    shouldForwardProp = tag.__emotion_forwardProp;\n  }\n\n  return shouldForwardProp;\n};\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\n\nvar Noop = function Noop() {\n  return null;\n};\n\nvar createStyled = function createStyled(tag, options) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (tag === undefined) {\n      throw new Error('You are trying to create a styled element with an undefined component.\\nYou may have forgotten to import it.');\n    }\n  }\n\n  var isReal = tag.__emotion_real === tag;\n  var baseTag = isReal && tag.__emotion_base || tag;\n  var identifierName;\n  var targetClassName;\n\n  if (options !== undefined) {\n    identifierName = options.label;\n    targetClassName = options.target;\n  }\n\n  var shouldForwardProp = composeShouldForwardProps(tag, options, isReal);\n  var defaultShouldForwardProp = shouldForwardProp || getDefaultShouldForwardProp(baseTag);\n  var shouldUseAs = !defaultShouldForwardProp('as');\n  return function () {\n    var args = arguments;\n    var styles = isReal && tag.__emotion_styles !== undefined ? tag.__emotion_styles.slice(0) : [];\n\n    if (identifierName !== undefined) {\n      styles.push(\"label:\" + identifierName + \";\");\n    }\n\n    if (args[0] == null || args[0].raw === undefined) {\n      styles.push.apply(styles, args);\n    } else {\n      if (process.env.NODE_ENV !== 'production' && args[0][0] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles.push(args[0][0]);\n      var len = args.length;\n      var i = 1;\n\n      for (; i < len; i++) {\n        if (process.env.NODE_ENV !== 'production' && args[0][i] === undefined) {\n          console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n        }\n\n        styles.push(args[i], args[0][i]);\n      }\n    } // $FlowFixMe: we need to cast StatelessFunctionalComponent to our PrivateStyledComponent class\n\n\n    var Styled = withEmotionCache(function (props, cache, ref) {\n      var finalTag = shouldUseAs && props.as || baseTag;\n      var className = '';\n      var classInterpolations = [];\n      var mergedProps = props;\n\n      if (props.theme == null) {\n        mergedProps = {};\n\n        for (var key in props) {\n          mergedProps[key] = props[key];\n        }\n\n        mergedProps.theme = useContext(ThemeContext);\n      }\n\n      if (typeof props.className === 'string') {\n        className = getRegisteredStyles(cache.registered, classInterpolations, props.className);\n      } else if (props.className != null) {\n        className = props.className + \" \";\n      }\n\n      var serialized = serializeStyles(styles.concat(classInterpolations), cache.registered, mergedProps);\n      var rules = insertStyles(cache, serialized, typeof finalTag === 'string');\n      className += cache.key + \"-\" + serialized.name;\n\n      if (targetClassName !== undefined) {\n        className += \" \" + targetClassName;\n      }\n\n      var finalShouldForwardProp = shouldUseAs && shouldForwardProp === undefined ? getDefaultShouldForwardProp(finalTag) : defaultShouldForwardProp;\n      var newProps = {};\n\n      for (var _key in props) {\n        if (shouldUseAs && _key === 'as') continue;\n\n        if ( // $FlowFixMe\n        finalShouldForwardProp(_key)) {\n          newProps[_key] = props[_key];\n        }\n      }\n\n      newProps.className = className;\n      newProps.ref = ref;\n      var ele = /*#__PURE__*/createElement(finalTag, newProps);\n      var possiblyStyleElement = /*#__PURE__*/createElement(Noop, null);\n\n\n      return /*#__PURE__*/createElement(Fragment, null, possiblyStyleElement, ele);\n    });\n    Styled.displayName = identifierName !== undefined ? identifierName : \"Styled(\" + (typeof baseTag === 'string' ? baseTag : baseTag.displayName || baseTag.name || 'Component') + \")\";\n    Styled.defaultProps = tag.defaultProps;\n    Styled.__emotion_real = Styled;\n    Styled.__emotion_base = baseTag;\n    Styled.__emotion_styles = styles;\n    Styled.__emotion_forwardProp = shouldForwardProp;\n    Object.defineProperty(Styled, 'toString', {\n      value: function value() {\n        if (targetClassName === undefined && process.env.NODE_ENV !== 'production') {\n          return 'NO_COMPONENT_SELECTOR';\n        } // $FlowFixMe: coerce undefined to string\n\n\n        return \".\" + targetClassName;\n      }\n    });\n\n    Styled.withComponent = function (nextTag, nextOptions) {\n      return createStyled(nextTag, _extends({}, options, nextOptions, {\n        shouldForwardProp: composeShouldForwardProps(Styled, nextOptions, true)\n      })).apply(void 0, styles);\n    };\n\n    return Styled;\n  };\n};\n\nexport default createStyled;\n","var isBrowser = \"object\" !== 'undefined';\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className] + \";\");\n    } else {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar registerStyles = function registerStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false ) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n};\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  registerStyles(cache, serialized, isStringTag);\n  var className = cache.key + \"-\" + serialized.name;\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      cache.insert(serialized === current ? \".\" + className : '', current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles, registerStyles };\n","/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nexport { murmur2 as default };\n","/**\n * External dependencies\n */\nimport styled from '@emotion/styled';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalUnitControl as UnitControl,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\nconst SingleColumnToolsPanelItem = styled( ToolsPanelItem )`\n\tgrid-column: span 1;\n`;\n\n/**\n * @typedef {import('@wordpress/components/build-types/unit-control/types').WPUnitControlUnit} WPUnitControlUnit\n */\n\n/**\n * @typedef {Object} WidthHeightToolValue\n * @property {string} [width]  Width CSS value.\n * @property {string} [height] Height CSS value.\n */\n\n/**\n * @callback WidthHeightToolOnChange\n * @param {WidthHeightToolValue} nextValue Next dimensions value.\n * @return {void}\n */\n\n/**\n * @typedef {Object} WidthHeightToolProps\n * @property {string}                  [panelId]          ID of the panel that contains the controls.\n * @property {WidthHeightToolValue}    [value]            Current dimensions values.\n * @property {WidthHeightToolOnChange} [onChange]         Callback to update the dimensions values.\n * @property {WPUnitControlUnit[]}     [units]            Units options.\n * @property {boolean}                 [isShownByDefault] Whether the panel is shown by default.\n */\n\n/**\n * Component that renders controls to edit the dimensions of an image or container.\n *\n * @param {WidthHeightToolProps} props The component props.\n *\n * @return {import('react').ReactElement} The width and height tool.\n */\nexport default function WidthHeightTool( {\n\tpanelId,\n\tvalue = {},\n\tonChange = () => {},\n\tunits,\n\tisShownByDefault = true,\n} ) {\n\t// null, undefined, and 'auto' all represent the default value.\n\tconst width = value.width === 'auto' ? '' : value.width ?? '';\n\tconst height = value.height === 'auto' ? '' : value.height ?? '';\n\n\tconst onDimensionChange = ( dimension ) => ( nextDimension ) => {\n\t\tconst nextValue = { ...value };\n\t\t// Empty strings or undefined may be passed and both represent removing the value.\n\t\tif ( ! nextDimension ) {\n\t\t\tdelete nextValue[ dimension ];\n\t\t} else {\n\t\t\tnextValue[ dimension ] = nextDimension;\n\t\t}\n\t\tonChange( nextValue );\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<SingleColumnToolsPanelItem\n\t\t\t\tlabel={ __( 'Width' ) }\n\t\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\t\thasValue={ () => width !== '' }\n\t\t\t\tonDeselect={ onDimensionChange( 'width' ) }\n\t\t\t\tpanelId={ panelId }\n\t\t\t>\n\t\t\t\t<UnitControl\n\t\t\t\t\tlabel={ __( 'Width' ) }\n\t\t\t\t\tplaceholder={ __( 'Auto' ) }\n\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\tunits={ units }\n\t\t\t\t\tmin={ 0 }\n\t\t\t\t\tvalue={ width }\n\t\t\t\t\tonChange={ onDimensionChange( 'width' ) }\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t/>\n\t\t\t</SingleColumnToolsPanelItem>\n\t\t\t<SingleColumnToolsPanelItem\n\t\t\t\tlabel={ __( 'Height' ) }\n\t\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\t\thasValue={ () => height !== '' }\n\t\t\t\tonDeselect={ onDimensionChange( 'height' ) }\n\t\t\t\tpanelId={ panelId }\n\t\t\t>\n\t\t\t\t<UnitControl\n\t\t\t\t\tlabel={ __( 'Height' ) }\n\t\t\t\t\tplaceholder={ __( 'Auto' ) }\n\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\tunits={ units }\n\t\t\t\t\tmin={ 0 }\n\t\t\t\t\tvalue={ height }\n\t\t\t\t\tonChange={ onDimensionChange( 'height' ) }\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t/>\n\t\t\t</SingleColumnToolsPanelItem>\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport AspectRatioTool from './aspect-ratio-tool';\nimport ScaleTool from './scale-tool';\nimport WidthHeightTool from './width-height-tool';\n\n/**\n * @typedef {import('@wordpress/components/build-types/select-control/types').SelectControlProps} SelectControlProps\n */\n\n/**\n * @typedef {import('@wordpress/components/build-types/unit-control/types').WPUnitControlUnit} WPUnitControlUnit\n */\n\n/**\n * @typedef {Object} Dimensions\n * @property {string} [width]       CSS width property.\n * @property {string} [height]      CSS height property.\n * @property {string} [scale]       CSS object-fit property.\n * @property {string} [aspectRatio] CSS aspect-ratio property.\n */\n\n/**\n * @callback DimensionsControlsOnChange\n * @param {Dimensions} nextValue\n * @return {void}\n */\n\n/**\n * @typedef {Object} DimensionsControlsProps\n * @property {string}                     [panelId]            ID of the panel that contains the controls.\n * @property {Dimensions}                 [value]              Current dimensions values.\n * @property {DimensionsControlsOnChange} [onChange]           Callback to update the dimensions values.\n * @property {SelectControlProps[]}       [aspectRatioOptions] Aspect ratio options.\n * @property {SelectControlProps[]}       [scaleOptions]       Scale options.\n * @property {WPUnitControlUnit[]}        [unitsOptions]       Units options.\n */\n\n/**\n * Component that renders controls to edit the dimensions of an image or container.\n *\n * @param {DimensionsControlsProps} props The component props.\n *\n * @return {Element} The dimensions controls.\n */\nfunction DimensionsTool( {\n\tpanelId,\n\tvalue = {},\n\tonChange = () => {},\n\taspectRatioOptions, // Default options handled by AspectRatioTool.\n\tdefaultAspectRatio = 'auto', // Match CSS default value for aspect-ratio.\n\tscaleOptions, // Default options handled by ScaleTool.\n\tdefaultScale = 'fill', // Match CSS default value for object-fit.\n\tunitsOptions, // Default options handled by UnitControl.\n\ttools = [ 'aspectRatio', 'widthHeight', 'scale' ],\n} ) {\n\t// Coerce undefined and CSS default values to be null.\n\tconst width =\n\t\tvalue.width === undefined || value.width === 'auto'\n\t\t\t? null\n\t\t\t: value.width;\n\tconst height =\n\t\tvalue.height === undefined || value.height === 'auto'\n\t\t\t? null\n\t\t\t: value.height;\n\tconst aspectRatio =\n\t\tvalue.aspectRatio === undefined || value.aspectRatio === 'auto'\n\t\t\t? null\n\t\t\t: value.aspectRatio;\n\tconst scale =\n\t\tvalue.scale === undefined || value.scale === 'fill'\n\t\t\t? null\n\t\t\t: value.scale;\n\n\t// Keep track of state internally, so when the value is cleared by means\n\t// other than directly editing that field, it's easier to restore the\n\t// previous value.\n\tconst [ lastScale, setLastScale ] = useState( scale );\n\tconst [ lastAspectRatio, setLastAspectRatio ] = useState( aspectRatio );\n\n\t// 'custom' is not a valid value for CSS aspect-ratio, but it is used in the\n\t// dropdown to indicate that setting both the width and height is the same\n\t// as a custom aspect ratio.\n\tconst aspectRatioValue = width && height ? 'custom' : lastAspectRatio;\n\n\tconst showScaleControl = aspectRatio || ( width && height );\n\n\treturn (\n\t\t<>\n\t\t\t{ tools.includes( 'aspectRatio' ) && (\n\t\t\t\t<AspectRatioTool\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t\toptions={ aspectRatioOptions }\n\t\t\t\t\tdefaultValue={ defaultAspectRatio }\n\t\t\t\t\tvalue={ aspectRatioValue }\n\t\t\t\t\tonChange={ ( nextAspectRatio ) => {\n\t\t\t\t\t\tconst nextValue = { ...value };\n\n\t\t\t\t\t\t// 'auto' is CSS default, so it gets treated as null.\n\t\t\t\t\t\tnextAspectRatio =\n\t\t\t\t\t\t\tnextAspectRatio === 'auto' ? null : nextAspectRatio;\n\n\t\t\t\t\t\tsetLastAspectRatio( nextAspectRatio );\n\n\t\t\t\t\t\t// Update aspectRatio.\n\t\t\t\t\t\tif ( ! nextAspectRatio ) {\n\t\t\t\t\t\t\tdelete nextValue.aspectRatio;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextValue.aspectRatio = nextAspectRatio;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Auto-update scale.\n\t\t\t\t\t\tif ( ! nextAspectRatio ) {\n\t\t\t\t\t\t\tdelete nextValue.scale;\n\t\t\t\t\t\t} else if ( lastScale ) {\n\t\t\t\t\t\t\tnextValue.scale = lastScale;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextValue.scale = defaultScale;\n\t\t\t\t\t\t\tsetLastScale( defaultScale );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Auto-update width and height.\n\t\t\t\t\t\tif ( 'custom' !== nextAspectRatio && width && height ) {\n\t\t\t\t\t\t\tdelete nextValue.height;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tonChange( nextValue );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ tools.includes( 'widthHeight' ) && (\n\t\t\t\t<WidthHeightTool\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t\tunits={ unitsOptions }\n\t\t\t\t\tvalue={ { width, height } }\n\t\t\t\t\tonChange={ ( { width: nextWidth, height: nextHeight } ) => {\n\t\t\t\t\t\tconst nextValue = { ...value };\n\n\t\t\t\t\t\t// 'auto' is CSS default, so it gets treated as null.\n\t\t\t\t\t\tnextWidth = nextWidth === 'auto' ? null : nextWidth;\n\t\t\t\t\t\tnextHeight = nextHeight === 'auto' ? null : nextHeight;\n\n\t\t\t\t\t\t// Update width.\n\t\t\t\t\t\tif ( ! nextWidth ) {\n\t\t\t\t\t\t\tdelete nextValue.width;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextValue.width = nextWidth;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Update height.\n\t\t\t\t\t\tif ( ! nextHeight ) {\n\t\t\t\t\t\t\tdelete nextValue.height;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextValue.height = nextHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Auto-update aspectRatio.\n\t\t\t\t\t\tif ( nextWidth && nextHeight ) {\n\t\t\t\t\t\t\tdelete nextValue.aspectRatio;\n\t\t\t\t\t\t} else if ( lastAspectRatio ) {\n\t\t\t\t\t\t\tnextValue.aspectRatio = lastAspectRatio;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// No setting defaultAspectRatio here, because\n\t\t\t\t\t\t\t// aspectRatio is optional in this scenario,\n\t\t\t\t\t\t\t// unlike scale.\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Auto-update scale.\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t! lastAspectRatio &&\n\t\t\t\t\t\t\t!! nextWidth !== !! nextHeight\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tdelete nextValue.scale;\n\t\t\t\t\t\t} else if ( lastScale ) {\n\t\t\t\t\t\t\tnextValue.scale = lastScale;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextValue.scale = defaultScale;\n\t\t\t\t\t\t\tsetLastScale( defaultScale );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tonChange( nextValue );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ tools.includes( 'scale' ) && showScaleControl && (\n\t\t\t\t<ScaleTool\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t\toptions={ scaleOptions }\n\t\t\t\t\tdefaultValue={ defaultScale }\n\t\t\t\t\tvalue={ lastScale }\n\t\t\t\t\tonChange={ ( nextScale ) => {\n\t\t\t\t\t\tconst nextValue = { ...value };\n\n\t\t\t\t\t\t// 'fill' is CSS default, so it gets treated as null.\n\t\t\t\t\t\tnextScale = nextScale === 'fill' ? null : nextScale;\n\n\t\t\t\t\t\tsetLastScale( nextScale );\n\n\t\t\t\t\t\t// Update scale.\n\t\t\t\t\t\tif ( ! nextScale ) {\n\t\t\t\t\t\t\tdelete nextValue.scale;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextValue.scale = nextScale;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tonChange( nextValue );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default DimensionsTool;\n","/**\n * WordPress dependencies\n */\nimport {\n\tSelectControl,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\n\nconst DEFAULT_SIZE_OPTIONS = [\n\t{\n\t\tlabel: _x( 'Thumbnail', 'Image size option for resolution control' ),\n\t\tvalue: 'thumbnail',\n\t},\n\t{\n\t\tlabel: _x( 'Medium', 'Image size option for resolution control' ),\n\t\tvalue: 'medium',\n\t},\n\t{\n\t\tlabel: _x( 'Large', 'Image size option for resolution control' ),\n\t\tvalue: 'large',\n\t},\n\t{\n\t\tlabel: _x( 'Full Size', 'Image size option for resolution control' ),\n\t\tvalue: 'full',\n\t},\n];\n\nexport default function ResolutionTool( {\n\tpanelId,\n\tvalue,\n\tonChange,\n\toptions = DEFAULT_SIZE_OPTIONS,\n\tdefaultValue = DEFAULT_SIZE_OPTIONS[ 0 ].value,\n\tisShownByDefault = true,\n\tresetAllFilter,\n} ) {\n\tconst displayValue = value ?? defaultValue;\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\thasValue={ () => displayValue !== defaultValue }\n\t\t\tlabel={ __( 'Resolution' ) }\n\t\t\tonDeselect={ () => onChange( defaultValue ) }\n\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\tpanelId={ panelId }\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t>\n\t\t\t<SelectControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Resolution' ) }\n\t\t\t\tvalue={ displayValue }\n\t\t\t\toptions={ options }\n\t\t\t\tonChange={ onChange }\n\t\t\t\thelp={ __( 'Select the size of the source image.' ) }\n\t\t\t\tsize=\"__unstable-large\"\n\t\t\t/>\n\t\t</ToolsPanelItem>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Messages providing helpful descriptions for HTML elements.\n */\nexport const htmlElementMessages = {\n\ta: __(\n\t\t'The <a> element should be used for links that navigate to a different page or to a different section within the same page.'\n\t),\n\tarticle: __(\n\t\t'The <article> element should represent a self-contained, syndicatable portion of the document.'\n\t),\n\taside: __(\n\t\t\"The <aside> element should represent a portion of a document whose content is only indirectly related to the document's main content.\"\n\t),\n\tbutton: __(\n\t\t'The <button> element should be used for interactive controls that perform an action on the current page, such as opening a modal or toggling content visibility.'\n\t),\n\tdiv: __(\n\t\t'The <div> element should only be used if the block is a design element with no semantic meaning.'\n\t),\n\tfooter: __(\n\t\t'The <footer> element should represent a footer for its nearest sectioning element (e.g.: <section>, <article>, <main> etc.).'\n\t),\n\theader: __(\n\t\t'The <header> element should represent introductory content, typically a group of introductory or navigational aids.'\n\t),\n\tmain: __(\n\t\t'The <main> element should be used for the primary content of your document only.'\n\t),\n\tnav: __(\n\t\t'The <nav> element should be used to identify groups of links that are intended to be used for website or page content navigation.'\n\t),\n\tsection: __(\n\t\t\"The <section> element should represent a standalone portion of the document that can't be better represented by another element.\"\n\t),\n};\n","/**\n * Internal dependencies\n */\nimport * as globalStyles from './components/global-styles';\nimport { ExperimentalBlockEditorProvider } from './components/provider';\nimport { lock } from './lock-unlock';\nimport { getRichTextValues } from './components/rich-text/get-rich-text-values';\nimport ResizableBoxPopover from './components/resizable-box-popover';\nimport { default as PrivateQuickInserter } from './components/inserter/quick-inserter';\nimport {\n\textractWords,\n\tgetNormalizedSearchTerms,\n\tnormalizeString,\n} from './components/inserter/search-items';\nimport { PrivateListView } from './components/list-view';\nimport { useHasBlockToolbar } from './components/block-toolbar/use-has-block-toolbar';\nimport { cleanEmptyObject } from './hooks/utils';\nimport BlockQuickNavigation from './components/block-quick-navigation';\nimport { LayoutStyle } from './components/block-list/layout';\nimport BlockManager from './components/block-manager';\nimport { BlockRemovalWarningModal } from './components/block-removal-warning-modal';\nimport {\n\tsetBackgroundStyleDefaults,\n\tuseLayoutClasses,\n\tuseLayoutStyles,\n\t__unstableBlockStyleVariationOverridesWithConfig,\n\tuseZoomOut,\n} from './hooks';\nimport DimensionsTool from './components/dimensions-tool';\nimport ResolutionTool from './components/resolution-tool';\nimport TextAlignmentControl from './components/text-alignment-control';\nimport { usesContextKey } from './components/rich-text/format-edit';\nimport { ExperimentalBlockCanvas } from './components/block-canvas';\nimport { getDuotoneFilter } from './components/duotone/utils';\nimport { useFlashEditableBlocks } from './components/use-flash-editable-blocks';\nimport {\n\tselectBlockPatternsKey,\n\treusableBlocksSelectKey,\n\tglobalStylesDataKey,\n\tglobalStylesLinksDataKey,\n\tsectionRootClientIdKey,\n\tmediaEditKey,\n} from './store/private-keys';\nimport { requiresWrapperOnCopy } from './components/writing-flow/utils';\nimport { PrivateRichText } from './components/rich-text/';\nimport { PrivateBlockPopover } from './components/block-popover';\nimport { PrivateInserterLibrary } from './components/inserter/library';\nimport { PrivatePublishDateTimePicker } from './components/publish-date-time-picker';\nimport useSpacingSizes from './components/spacing-sizes-control/hooks/use-spacing-sizes';\nimport useBlockDisplayTitle from './components/block-title/use-block-display-title';\nimport TabbedSidebar from './components/tabbed-sidebar';\nimport CommentIconSlotFill from './components/collab/block-comment-icon-slot';\nimport CommentIconToolbarSlotFill from './components/collab/block-comment-icon-toolbar-slot';\nimport HTMLElementControl from './components/html-element-control';\n/**\n * Private @wordpress/block-editor APIs.\n */\nexport const privateApis = {};\nlock( privateApis, {\n\t...globalStyles,\n\tExperimentalBlockCanvas,\n\tExperimentalBlockEditorProvider,\n\tgetDuotoneFilter,\n\tgetRichTextValues,\n\tPrivateQuickInserter,\n\textractWords,\n\tgetNormalizedSearchTerms,\n\tnormalizeString,\n\tPrivateListView,\n\tResizableBoxPopover,\n\tuseHasBlockToolbar,\n\tcleanEmptyObject,\n\tBlockQuickNavigation,\n\tLayoutStyle,\n\tBlockManager,\n\tBlockRemovalWarningModal,\n\tuseLayoutClasses,\n\tuseLayoutStyles,\n\tDimensionsTool,\n\tResolutionTool,\n\tTabbedSidebar,\n\tTextAlignmentControl,\n\tusesContextKey,\n\tuseFlashEditableBlocks,\n\tHTMLElementControl,\n\tuseZoomOut,\n\tglobalStylesDataKey,\n\tglobalStylesLinksDataKey,\n\tselectBlockPatternsKey,\n\trequiresWrapperOnCopy,\n\tPrivateRichText,\n\tPrivateInserterLibrary,\n\treusableBlocksSelectKey,\n\tPrivateBlockPopover,\n\tPrivatePublishDateTimePicker,\n\tuseSpacingSizes,\n\tuseBlockDisplayTitle,\n\t__unstableBlockStyleVariationOverridesWithConfig,\n\tsetBackgroundStyleDefaults,\n\tsectionRootClientIdKey,\n\tCommentIconSlotFill,\n\tCommentIconToolbarSlotFill,\n\tmediaEditKey,\n} );\n","/**\n * WordPress dependencies\n */\nimport { ResizableBox } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockPopoverCover from '../block-popover/cover';\n\nexport default function ResizableBoxPopover( {\n\tclientId,\n\tresizableBoxProps,\n\t...props\n} ) {\n\treturn (\n\t\t<BlockPopoverCover\n\t\t\tclientId={ clientId }\n\t\t\t__unstablePopoverSlot=\"block-toolbar\"\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<ResizableBox { ...resizableBoxProps } />\n\t\t</BlockPopoverCover>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { SearchControl, Button } from '@wordpress/components';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { useEffect, useState } from '@wordpress/element';\nimport { useDebounce } from '@wordpress/compose';\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport BlockManagerCategory from './category';\n\n/**\n * Provides a list of blocks with checkboxes.\n *\n * @param {Object}   props                    Props.\n * @param {Array}    props.blockTypes         An array of blocks.\n * @param {Array}    props.selectedBlockTypes An array of selected blocks.\n * @param {Function} props.onChange           Function to be called when the selected blocks change.\n */\nexport default function BlockManager( {\n\tblockTypes,\n\tselectedBlockTypes,\n\tonChange,\n} ) {\n\tconst debouncedSpeak = useDebounce( speak, 500 );\n\tconst [ search, setSearch ] = useState( '' );\n\tconst { categories, isMatchingSearchTerm } = useSelect( ( select ) => {\n\t\treturn {\n\t\t\tcategories: select( blocksStore ).getCategories(),\n\t\t\tisMatchingSearchTerm: select( blocksStore ).isMatchingSearchTerm,\n\t\t};\n\t}, [] );\n\n\tfunction enableAllBlockTypes() {\n\t\tonChange( blockTypes );\n\t}\n\n\tconst filteredBlockTypes = blockTypes.filter( ( blockType ) => {\n\t\treturn ! search || isMatchingSearchTerm( blockType, search );\n\t} );\n\n\tconst numberOfHiddenBlocks = blockTypes.length - selectedBlockTypes.length;\n\n\t// Announce search results on change\n\tuseEffect( () => {\n\t\tif ( ! search ) {\n\t\t\treturn;\n\t\t}\n\t\tconst count = filteredBlockTypes.length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [ filteredBlockTypes?.length, search, debouncedSpeak ] );\n\n\treturn (\n\t\t<div className=\"block-editor-block-manager__content\">\n\t\t\t{ !! numberOfHiddenBlocks && (\n\t\t\t\t<div className=\"block-editor-block-manager__disabled-blocks-count\">\n\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t/* translators: %d: number of blocks. */\n\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t'%d block is hidden.',\n\t\t\t\t\t\t\t'%d blocks are hidden.',\n\t\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t\t),\n\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t) }\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\tonClick={ enableAllBlockTypes }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<SearchControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Search for a block' ) }\n\t\t\t\tplaceholder={ __( 'Search for a block' ) }\n\t\t\t\tvalue={ search }\n\t\t\t\tonChange={ ( nextSearch ) => setSearch( nextSearch ) }\n\t\t\t\tclassName=\"block-editor-block-manager__search\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\trole=\"region\"\n\t\t\t\taria-label={ __( 'Available block types' ) }\n\t\t\t\tclassName=\"block-editor-block-manager__results\"\n\t\t\t>\n\t\t\t\t{ filteredBlockTypes.length === 0 && (\n\t\t\t\t\t<p className=\"block-editor-block-manager__no-results\">\n\t\t\t\t\t\t{ __( 'No blocks found.' ) }\n\t\t\t\t\t</p>\n\t\t\t\t) }\n\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t<BlockManagerCategory\n\t\t\t\t\t\tkey={ category.slug }\n\t\t\t\t\t\ttitle={ category.title }\n\t\t\t\t\t\tblockTypes={ filteredBlockTypes.filter(\n\t\t\t\t\t\t\t( blockType ) =>\n\t\t\t\t\t\t\t\tblockType.category === category.slug\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tselectedBlockTypes={ selectedBlockTypes }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t\t<BlockManagerCategory\n\t\t\t\t\ttitle={ __( 'Uncategorized' ) }\n\t\t\t\t\tblockTypes={ filteredBlockTypes.filter(\n\t\t\t\t\t\t( { category } ) => ! category\n\t\t\t\t\t) }\n\t\t\t\t\tselectedBlockTypes={ selectedBlockTypes }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\tModal,\n\tButton,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nexport function BlockRemovalWarningModal( { rules } ) {\n\tconst { clientIds, selectPrevious, message } = useSelect( ( select ) =>\n\t\tunlock( select( blockEditorStore ) ).getRemovalPromptData()\n\t);\n\n\tconst {\n\t\tclearBlockRemovalPrompt,\n\t\tsetBlockRemovalRules,\n\t\tprivateRemoveBlocks,\n\t} = unlock( useDispatch( blockEditorStore ) );\n\n\t// Load block removal rules, simultaneously signalling that the block\n\t// removal prompt is in place.\n\tuseEffect( () => {\n\t\tsetBlockRemovalRules( rules );\n\t\treturn () => {\n\t\t\tsetBlockRemovalRules();\n\t\t};\n\t}, [ rules, setBlockRemovalRules ] );\n\n\tif ( ! message ) {\n\t\treturn;\n\t}\n\n\tconst onConfirmRemoval = () => {\n\t\tprivateRemoveBlocks( clientIds, selectPrevious, /* force */ true );\n\t\tclearBlockRemovalPrompt();\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Be careful!' ) }\n\t\t\tonRequestClose={ clearBlockRemovalPrompt }\n\t\t\tsize=\"medium\"\n\t\t>\n\t\t\t<p>{ message }</p>\n\t\t\t<HStack justify=\"right\">\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\tonClick={ clearBlockRemovalPrompt }\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tonClick={ onConfirmRemoval }\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Delete' ) }\n\t\t\t\t</Button>\n\t\t\t</HStack>\n\t\t</Modal>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tSelectControl,\n\tNotice,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { htmlElementMessages } from './messages';\n\n/**\n * Renders a SelectControl for choosing HTML elements with validation\n * to prevent duplicate <main> elements.\n *\n * @param {Object}   props          Component props.\n * @param {string}   props.tagName  The current HTML tag name.\n * @param {Function} props.onChange Function to call when the tag is changed.\n * @param {string}   props.clientId Optional. The client ID of the block. Used to check for existing <main> elements.\n * @param {Array}    props.options  SelectControl options (optional).\n *\n * @return {Component} The HTML element select control with validation.\n */\nexport default function HTMLElementControl( {\n\ttagName,\n\tonChange,\n\tclientId,\n\toptions = [\n\t\t{ label: __( 'Default (<div>)' ), value: 'div' },\n\t\t{ label: '<header>', value: 'header' },\n\t\t{ label: '<main>', value: 'main' },\n\t\t{ label: '<section>', value: 'section' },\n\t\t{ label: '<article>', value: 'article' },\n\t\t{ label: '<aside>', value: 'aside' },\n\t\t{ label: '<footer>', value: 'footer' },\n\t],\n} ) {\n\tconst checkForMainTag =\n\t\t!! clientId && options.some( ( option ) => option.value === 'main' );\n\n\tconst hasMainElementElsewhere = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! checkForMainTag ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst { getClientIdsWithDescendants, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\treturn getClientIdsWithDescendants().some( ( id ) => {\n\t\t\t\t// Skip the current block.\n\t\t\t\tif ( id === clientId ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn getBlockAttributes( id )?.tagName === 'main';\n\t\t\t} );\n\t\t},\n\t\t[ clientId, checkForMainTag ]\n\t);\n\n\t// Create a modified options array that disables the main option if needed.\n\tconst modifiedOptions = options.map( ( option ) => {\n\t\tif (\n\t\t\toption.value === 'main' &&\n\t\t\thasMainElementElsewhere &&\n\t\t\ttagName !== 'main'\n\t\t) {\n\t\t\treturn {\n\t\t\t\t...option,\n\t\t\t\tdisabled: true,\n\t\t\t\tlabel: sprintf(\n\t\t\t\t\t/* translators: %s: HTML element name */\n\t\t\t\t\t__( '%s (Already in use)' ),\n\t\t\t\t\toption.label\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\t\treturn option;\n\t} );\n\n\treturn (\n\t\t<VStack spacing={ 2 } className=\"block-editor-html-element-control\">\n\t\t\t<SelectControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tlabel={ __( 'HTML element' ) }\n\t\t\t\toptions={ modifiedOptions }\n\t\t\t\tvalue={ tagName }\n\t\t\t\tonChange={ onChange }\n\t\t\t\thelp={ htmlElementMessages[ tagName ] }\n\t\t\t/>\n\n\t\t\t{ tagName === 'main' && hasMainElementElsewhere && (\n\t\t\t\t<Notice status=\"warning\" isDismissible={ false }>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Multiple <main> elements detected. The duplicate may be in your content or template. This is not valid HTML and may cause accessibility issues. Please change this HTML element.'\n\t\t\t\t\t) }\n\t\t\t\t</Notice>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n"],"names":["module","exports","keys","values","map","Map","has","key","indexOf","get","set","value","push","delete","index","splice","createEvent","name","Event","bubbles","e","evt","document","initEvent","assign","ta","nodeName","heightOffset","clientWidth","cachedHeight","pageResize","update","destroy","style","window","removeEventListener","Object","forEach","bind","height","resize","overflowY","overflowX","wordWrap","addEventListener","getComputedStyle","boxSizing","parseFloat","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","isNaN","changeOverflow","width","offsetWidth","scrollHeight","overflows","el","arr","parentNode","Element","scrollTop","node","getParentOverflows","docTop","documentElement","styleHeight","Math","round","computed","actualHeight","offsetHeight","dispatchEvent","err","methods","autosize","options","Array","prototype","call","length","x","default","prop","currentStyle","replace","word","letter","toUpperCase","Diff","buildValues","diff","components","newString","oldString","useLongestToken","componentPos","componentLen","newPos","oldPos","component","removed","join","slice","count","added","tmp","i","oldValue","lastComponent","equals","pop","callback","this","self","done","setTimeout","undefined","castInput","removeEmpty","tokenize","newLen","oldLen","editLength","maxEditLength","bestPath","extractCommon","execEditLength","diagonalPath","basePath","addPath","removePath","canAdd","canRemove","path","pushComponent","exec","ret","last","commonCount","left","right","comparator","ignoreCase","toLowerCase","array","split","chars","oldStr","newStr","characterDiff","equal","a","b","constructor","isArray","size","entries","Set","ArrayBuffer","isView","RegExp","source","flags","valueOf","toString","hasOwnProperty","computedStyle","lnHeightStr","lnHeight","_lnHeightStyle","lineHeight","_node","createElement","innerHTML","setAttribute","fontSizeStr","fontSize","padding","border","body","appendChild","removeChild","canUseDOM","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","attachEvent","canUseViewport","screen","isInWorker","_ie","_firefox","_opera","_webkit","_chrome","_ie_real_version","_osx","_windows","_linux","_android","_win64","_iphone","_ipad","_native","_mobile","_populated","_populate","uas","navigator","userAgent","agent","os","NaN","documentMode","trident","ver","UserAgent_DEPRECATED","ie","ieCompatibilityMode","ie64","firefox","opera","webkit","safari","chrome","windows","osx","linux","iphone","mobile","nativeApp","android","ipad","useHasFeature","implementation","hasFeature","eventNameSuffix","capture","eventName","isSupported","element","isEventSupported","normalizeWheel","event","sX","sY","pX","pY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","spinX","spinY","pixelX","pixelY","getEventType","String","create","isColorSupported","reset","bold","dim","italic","underline","inverse","hidden","strikethrough","black","red","green","yellow","blue","magenta","cyan","white","gray","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","blackBright","redBright","greenBright","yellowBright","blueBright","magentaBright","cyanBright","whiteBright","bgBlackBright","bgRedBright","bgGreenBright","bgYellowBright","bgBlueBright","bgMagentaBright","bgCyanBright","bgWhiteBright","createColors","isFileInArray","file","some","ruleOrString","test","includes","prefix","prefixWithSpace","ignoreFiles","concat","includeFiles","root","input","walkRules","rule","parent","selectors","selector","exclude","excludeArr","excludeRule","excludeSelector","transform","Container","AtRule","defaults","super","type","append","children","proxyOf","nodes","prepend","registerAtRule","Node","Comment","parse","Rule","Root","isClean","my","Declaration","cleanSource","markDirtyUp","child","normalize","markDirty","cleanRaws","keepBetween","each","result","iterator","getIterator","indexes","every","condition","lastEach","getProxyProcessor","startsWith","args","toProxy","cb","other","insertAfter","exist","add","existIndex","reverse","id","insertBefore","sample","Error","text","rebuild","raws","before","first","unshift","removeAll","replaceValues","pattern","opts","walkDecls","decl","props","fast","walk","addToError","walkAtRules","walkComments","registerParse","dependant","registerRule","registerRoot","setPrototypeOf","pico","terminalHighlight","CssSyntaxError","message","line","column","plugin","reason","endLine","endColumn","setMessage","captureStackTrace","showSourceCode","color","css","mark","aside","lines","start","max","end","min","maxWidth","str","number","gutter","spacing","code","variable","LazyResult","Processor","Document","toResult","stringify","registerLazyResult","registerProcessor","SourceMapConsumer","SourceMapGenerator","fileURLToPath","pathToFileURL","isAbsolute","resolve","nanoid","PreviousMap","fromOffsetCache","Symbol","sourceMapAvailable","Boolean","pathAvailable","Input","hasBOM","from","consumer","mapResolve","error","offset","pos","fromOffset","col","origin","url","lastLine","lineToIndex","prevIndex","l","mid","sourceRoot","to","fromUrl","originalPositionFor","URL","mapFile","protocol","sourceContentFor","toJSON","json","consumerCache","registerInput","MapGenerator","Result","TYPE_TO_CLASS_NAME","atrule","comment","PLUGIN_PROPS","AtRuleExit","CommentExit","DeclarationExit","DocumentExit","Once","OnceExit","postcssPlugin","prepare","RootExit","RuleExit","NOT_VISITORS","CHILDREN","isPromise","obj","then","getEvents","toStack","events","eventIndex","visitorIndex","visitors","cleanMarks","postcss","processor","stringified","processed","inline","prev","parser","syntax","helpers","plugins","async","Promise","reject","processing","runAsync","onRejected","catch","onFinally","getAsyncError","handleError","lastPlugin","postcssVersion","console","prepareVisitors","listeners","version","filter","hasListener","promise","runOnRoot","stack","visitTick","visitor","roots","subRoot","all","sync","stringifier","data","generate","walkSync","visitSync","onFulfilled","visit","warnings","content","messages","toStringTag","registerPostcss","list","comma","string","space","separators","current","func","inQuote","prevQuote","escape","trim","dirname","relative","sep","cssString","mapOpts","originalCSS","usesFileUrls","absolute","memoizedFileURLs","memoizedPaths","memoizedURLs","addAnnotation","isInline","toBase64","annotation","outputFile","eol","applyPrevMaps","previous","toUrl","sourcesContent","applySourceMap","clearAnnotation","isMap","generateMap","generateString","fromSourceMap","ignoreInvalidMapping","addMapping","generated","original","isSourcesContent","setSourcesContent","isAnnotation","noSource","mapping","sourcePath","match","lastIndexOf","p","semicolon","withContent","charCodeAt","cached","previousMaps","already","toFileUrl","setSourceContent","Buffer","btoa","unescape","encodeURIComponent","fileURL","encodeURI","NoWorkResult","_processor","_css","_opts","_map","defineProperty","generatedCSS","generatedMap","_root","Stringifier","cloneNode","cloned","j","clone","postcssNode","s","after","overrides","between","cloneAfter","cloneBefore","rangeBy","next","positionBy","stringRepresentation","positionInside","endIndex","raw","defaultType","remove","replaceWith","bookmark","foundSelf","_","inputs","fixed","emitInputs","inputsNextIndex","inputId","proxyCache","Proxy","warn","Parser","tokenizer","SAFE_COMMENT_NEIGHBOR","empty","spaces","createTokenizer","token","shift","unnamedAtrule","init","open","params","brackets","endOfFile","nextToken","getPosition","spacesAndCommentsFromEnd","afterName","spacesAndCommentsFromStart","checkMissedSemicolon","tokens","colon","founded","doubleColon","customProperty","findLastWithPosition","unknownWord","firstSpaces","precheckMissedSemicolon","important","stringFrom","spacesFromEnd","cache","emptyRule","unexpectedClose","endFile","unclosedBlock","position","freeSemicolon","ownSemicolon","bracket","back","unclosedBracket","clean","reduce","lastTokenType","existsSync","readFileSync","loadAnnotation","startWith","loadMap","decodeInline","decodeURIComponent","substr","lastMatch","atob","encoding","getAnnotationURL","sourceMapString","mappings","_mappings","sections","comments","substring","loadFile","JSON","prevPath","normalized","process","use","Warning","warning","ignore","DEFAULT_RAW","beforeClose","beforeComment","beforeDecl","beforeOpen","beforeRule","commentLeft","commentRight","emptyBody","indent","builder","rawValue","block","beforeAfter","detect","buf","depth","step","own","rawCache","method","rawBeforeClose","rawBeforeComment","rawBeforeDecl","rawBeforeOpen","rawBeforeRule","rawColon","rawEmptyBody","rawIndent","parts","rawSemicolon","SINGLE_QUOTE","DOUBLE_QUOTE","BACKSLASH","SLASH","NEWLINE","SPACE","FEED","TAB","CR","OPEN_SQUARE","CLOSE_SQUARE","OPEN_PARENTHESES","CLOSE_PARENTHESES","OPEN_CURLY","CLOSE_CURLY","SEMICOLON","ASTERISK","COLON","AT","RE_AT_END","RE_WORD_END","RE_BAD_BRACKET","RE_HEX_ESCAPE","quote","escaped","escapePos","n","currentToken","ignoreErrors","buffer","returned","unclosed","what","ignoreUnclosed","controlChar","fromCharCode","lastIndex","charAt","printed","range","opt","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","location","propFullName","secret","getShim","isRequired","ReactPropTypes","bigint","bool","object","symbol","any","arrayOf","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","extendStatics","__extends","__proto__","d","__","__assign","t","arguments","__rest","getOwnPropertySymbols","__esModule","React","getLineHeight","RESIZED","TextareaAutosizeClass","_super","_this","apply","state","textarea","onResize","updateLineHeight","setState","onChange","currentValue","currentTarget","componentDidMount","_a","maxRows","componentWillUnmount","render","_b","innerRef","maxHeight","ref","componentDidUpdate","defaultProps","rows","propTypes","Component","TextareaAutosize","forwardRef","TextareaAutosize_1","characterMap","allAccents","firstAccent","matcher","removeAccents","CSSValueParser","config","skipHostRelativeUrls","parsedValue","valueChanged","urlVal","basedUrl","rootUrl","pathname","ValueParser","bubble","unit","openParentheses","closeParentheses","singleQuote","doubleQuote","backslash","slash","star","uLower","uUpper","plus","isUnicodeRange","whitespacePos","parenthesesOpenPos","balanced","sourceEndIndex","sourceIndex","stringifyNode","custom","customResult","minus","dot","exp","EXP","nextCode","nextNextCode","likeNumber","random","customAlphabet","alphabet","defaultSize","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","o","enumerable","r","mayDisplayControlsKey","mayDisplayParentControlsKey","blockEditingModeKey","blockBindingsKey","isPreviewModeKey","DEFAULT_BLOCK_EDIT_CONTEXT","isSelected","Context","createContext","Provider","useBlockEditContext","useContext","PREFERENCES_DEFAULTS","insertUsage","SETTINGS_DEFAULTS","alignWide","supportsLayout","colors","slug","fontSizes","_x","imageDefaultSize","imageSizes","imageEditing","allowedBlockTypes","maxUploadFileSize","allowedMimeTypes","canLockBlocks","enableOpenverseMediaCategory","clearBlockSelection","__experimentalCanUserUseUnfilteredHTML","__experimentalBlockDirectory","__mobileEnablePageTemplates","__experimentalBlockPatterns","__experimentalBlockPatternCategories","isPreviewMode","blockInspectorAnimation","animationParent","enterDirection","generateAnchors","gradients","gradient","__unstableResolvedAssets","styles","scripts","insertAt","elements","moveTo","withoutMovedElements","globalStylesDataKey","globalStylesLinksDataKey","selectBlockPatternsKey","reusableBlocksSelectKey","sectionRootClientIdKey","mediaEditKey","lock","unlock","__dangerousOptInToUnstableAPIsOnlyForCoreModules","isContentBlock","blocksPrivateApis","identity","mapBlockOrder","blocks","rootClientId","clientId","innerBlocks","order","subClientId","mapBlockParents","currentBlocks","flattenBlocks","getFlattenedBlocksWithoutAttributes","attributes","restBlock","getFlattenedBlockAttributes","isUpdatingSameBlockAttribute","action","lastAction","fastDeepEqual","clientIds","hasSameKeys","updateBlockTreeForBlocks","treeToUpdate","tree","flattenedBlocks","byClientId","subBlock","updateParentInnerBlocksInTree","updatedClientIds","updateChildrenOfUpdatedClientIds","uncontrolledParents","controlledParents","parents","controlledInnerBlocks","pipe","combineReducers","reducer","updatedId","newState","inserterClientIds","getFlattenedClientIds","replacedClientIds","parentsOfRemovedBlocks","parentId","removedClientIds","updatedBlockUids","fromRootClientId","toRootClientId","getAllChildren","keepControlledInnerBlocks","nestedControllers","stateAfterBlocksRemoval","stateAfterInsert","stateAfterInsertOrder","_key","explicitPersistent","markNextChangeAsNotPersistent","nextIsPersistentChange","nextState","_state$isPersistentCh","isPersistentChange","isExplicitPersistentChange","_state$isPersistentCh2","IGNORED_ACTION_TYPES","isIgnoredChange","tempState","changes","updates","hasChange","_action$attributes","updatedAttributeEntries","uniqueByBlock","hasUpdatedAttributes","existingAttributes","newAttributes","_state$get","blockOrder","subState","mappedBlocks","_state$get$filter","fromIndex","firstClientId","firstIndex","lastClientId","newSubOrder","_order$filter","hasControlledInnerBlocks","selectionHelper","updateSelection","blockToSelect","indexToSelect","combinedReducers","isDragging","isTyping","isBlockInterfaceHidden","draggedBlocks","selection","selectionStart","attributeKey","startOffset","selectionEnd","endOffset","startClientId","endClientId","isMultiSelecting","isSelectionEnabled","initialPosition","blocksMode","blockListSettings","fromEntries","settings","merged","insertionPoint","insertionCue","__unstableWithInserter","operation","nearestSide","template","isValid","updatedSettings","deprecated","since","alternative","preferences","nextInsertUsage","prevUsage","blockName","select","blocksStore","getActiveBlockVariation","time","lastBlockAttributesChange","accumulator","lastFocus","expandedBlock","highlightedBlock","isHighlighted","lastBlockInserted","meta","temporarilyEditingAsBlocks","temporarilyEditingFocusModeRevert","focusModeToRevert","blockVisibility","blockEditingModes","mode","styleOverrides","removalPromptData","selectPrevious","blockRemovalRules","rules","openedBlockSettingsMenu","_action$clientId","registeredInserterMediaCategories","category","zoomLevel","zoom","getBlockTreeBlock","rootBlock","controlledTree","traverseBlockTree","innerBlock","findParentInClientIdsList","hasBindings","metadata","bindings","getDerivedBlockEditingModesForTree","isNavMode","treeClientId","isZoomedOut","derivedBlockEditingModes","sectionRootClientId","sectionClientIds","hasDisabledBlocks","templatePartClientIds","syncedPatternClientIds","ancestorBlockEditingMode","parentPatternClientId","getDerivedBlockEditingModesUpdates","prevState","addedBlocks","prevDerivedBlockEditingModes","derivedNavModeBlockEditingModes","nextDerivedBlockEditingModes","addedBlock","_state$derivedBlockEd","_state$derivedNavMode","nextDerivedNavModeBlockEditingModes","updatedBlock","automaticChangeStatus","_jsx","SVG","xmlns","viewBox","Path","STORE_NAME","INSERTER_PATTERN_TYPES","user","theme","directory","INSERTER_SYNC_TYPES","full","unsynced","allPatternsCategory","label","myPatternsCategory","starterPatternsCategory","isPatternFiltered","sourceFilter","syncFilter","isUserPattern","isDirectoryPattern","syncStatus","setImmutably","leaf","lvl","getValueFromObjectPath","defaultValue","_value","arrayPath","fieldName","blockedPaths","deprecatedFlags","disableCustomColors","disableCustomGradients","disableCustomFontSizes","enableCustomLineHeight","enableCustomUnits","enableCustomSpacing","prefixedFlags","removeCustomPrefixes","getBlockSettings","paths","getBlockName","candidates","hasBlockSupport","applyFilters","normalizedPath","candidateClientId","_getValueFromObjectPa","candidateAtts","getBlockAttributes","getSettings","_ref","_result$custom","__experimentalFeatures","PATHS_WITH_OVERRIDE","deprecatedSettingsValue","getLastInsertedBlocksClientIds","getBlockWithoutAttributes","isBlockSubtreeDisabled","isChildSubtreeDisabled","childClientId","getBlockEditingMode","getBlockOrder","getEnabledClientIdsTreeUnmemoized","getEnabledClientIdsTree","createRegistrySelector","createSelector","templateLock","__unstableGetEditorMode","getEnabledBlockParents","ascending","getBlockParents","getRemovalPromptData","getBlockRemovalRules","getOpenedBlockSettingsMenu","getStyleOverrides","clientIdMap","getClientIdsWithDescendants","acc","sort","overrideA","overrideB","_clientIdMap$clientId","_clientIdMap$clientId2","clientIdA","clientIdB","getRegisteredInserterMediaCategories","getInserterMediaCategories","inserterMediaCategories","coreInserterMediaCategoriesNames","mimeType","mediaType","hasAllowedPatterns","getAllPatterns","patterns","inserter","grammar","getGrammar","checkAllowListRecursive","canInsertBlockType","getAllPatternsDependants","getInsertBlockTypeDependants","mapUserPattern","userPattern","__experimentalUserPatternCategories","title","categories","wp_pattern_category","catId","find","wp_pattern_sync_status","getPatternBySlug","patternName","_state$settings$__exp","_state$settings$selec","_id","parseInt","getReusableBlocks","__experimentalReusableBlocks","_state$settings$__exp2","_state$settings$selec2","findIndex","y","EMPTY_ARRAY","reusableBlocksSelect","getLastFocus","getExpandedBlock","getContentLockingParent","getTemplateLock","getParentSectionBlock","isSectionBlock","_isNavigationMode","isNavigationMode","getSectionRootClientId","getTemporarilyEditingAsBlocks","getTemporarilyEditingFocusModeToRevert","getBlockStyles","isZoomOut","getZoomLevel","getClosestAllowedInsertionPoint","blockNames","areBlockNamesAllowedInClientId","currentName","getBlockRootClientId","getClosestAllowedInsertionPointForPattern","getInsertionPoint","isFiltered","parsedPatternCache","WeakMap","grammarMapCache","getParsedPattern","parsedPattern","__unstableSkipMigrationLogs","parsePattern","grammarMap","grammarParse","checkAllowList","item","defaultResult","blocksQueue","blockPatterns","field","items","cmpA","cmpB","orderA","orderB","orderBy","EMPTY_SET","DEFAULT_INSERTER_OPTIONS","socialLinkName","Platform","OS","service","isBlockValid","getBlock","__unstableGetBlockWithoutInnerBlocks","getBlocks","treeKey","areInnerBlocksControlled","__unstableGetClientIdWithClientIdsTree","__unstableGetClientIdsTree","getClientIdsOfDescendants","rootIds","ids","rootId","getGlobalBlockCount","getBlocksByName","foundBlocks","__experimentalGetGlobalBlocksByName","getBlocksByClientId","getBlockNamesByClientId","getBlockCount","getSelectionStart","getSelectionEnd","getBlockSelectionStart","getBlockSelectionEnd","getSelectedBlockCount","getMultiSelectedBlockClientIds","hasSelectedBlock","getSelectedBlockClientId","getSelectedBlock","_state$blocks$parents","getBlockParentsByBlockName","hasName","getBlockHierarchyRootClientId","getLowestCommonAncestorWithSelectedBlock","selectedId","clientParents","selectedParents","lowestCommonAncestor","maxDepth","getAdjacentBlockClientId","modifier","getFirstMultiSelectedBlockClientId","getLastMultiSelectedBlockClientId","orderSet","nextIndex","getPreviousBlockClientId","getNextBlockClientId","getSelectedBlocksInitialCaretPosition","getSelectedBlockClientIds","startIndex","getMultiSelectedBlocks","multiSelectedBlockClientIds","getDependants","selectedClientIds","isFirstMultiSelectedBlock","isBlockMultiSelected","isAncestorMultiSelected","ancestorClientId","isMultiSelected","getMultiSelectedBlocksStartClientId","getMultiSelectedBlocksEndClientId","__unstableIsFullySelected","selectionAnchor","selectionFocus","__unstableIsSelectionCollapsed","__unstableSelectionHasUnmergeableBlock","getBlockType","merge","__unstableIsSelectionMergeable","isForward","anchorRootClientId","targetBlockClientId","blockToMergeClientId","targetBlockName","blockToMerge","blocksToMerge","switchToBlockType","__unstableGetSelectedBlocksWithPartialSelection","anchorIndex","focusIndex","blockA","blockB","htmlA","htmlB","valueA","html","valueB","toHTMLString","getBlockIndex","isBlockSelected","hasSelectedInnerBlock","deep","selectedBlockClientIds","hasDraggedInnerBlock","innerClientId","isBlockBeingDragged","isBlockWithinSelection","hasMultiSelection","getBlockMode","isDraggingBlocks","getDraggedBlockClientIds","isAncestorBeingDragged","parentClientId","isCaretWithinFormattedText","getBlockInsertionPoint","isBlockInsertionPointVisible","isValidTemplate","getTemplate","_getBlockListSettings","_state$settings$templ","getBlockListSettings","isBlockVisibleInTheInserter","blockNameOrType","blockType","ancestor","hasParent","canInsertBlockTypeUnmemoized","parentBlockListSettings","parentName","parentBlockType","parentAllowedChildBlocks","allowedBlocks","hasParentAllowedBlock","parentAllowedBlocks","hasParentListAllowedBlock","blockAllowedParentBlocks","hasBlockAllowedParent","hasBlockAllowedAncestor","blockAllowedAncestorBlocks","canInsert","canInsertBlocks","canRemoveBlock","canRemoveBlocks","canMoveBlock","move","canMoveBlocks","canEditBlock","edit","canLockBlockType","nameOrType","getInsertUsage","_state$preferences$in","canIncludeBlockTypeInInserter","calculateFrecency","duration","Date","now","buildBlockTypeItem","buildScope","isDisabled","blockItemBase","icon","frecency","inserterVariations","getBlockVariations","initialAttributes","description","keywords","variations","example","utility","getInserterItems","syncedPatternInserterItems","reusableBlock","src","foreground","buildBlockTypeInserterItem","blockTypeInserterItems","getBlockTypes","isAllowedInCurrentRoot","isDefault","variationMapper","getItemFromVariation","variation","variationId","core","coreItems","noncore","nonCoreItems","groupByType","getBlockTransformItems","normalizedBlocks","buildBlockTypeTransformItem","blockTypeTransformItems","itemsByName","possibleTransforms","getPossibleBlockTransformations","hasInserterItems","getAllowedBlocks","blockTypes","__experimentalGetAllowedBlocks","getDirectInsertBlock","_state$blockListSetti","defaultBlock","directInsert","__experimentalGetDirectInsertBlock","__experimentalGetParsedPattern","getAllowedPatternsDependants","patternsWithParsedBlocks","enhancePatternWithParsedBlocks","enhancedPattern","__experimentalGetAllowedPatterns","parsedPatterns","getPatternsByBlockTypes","normalizedBlockNames","filteredPatterns","__experimentalGetPatternsByBlockTypes","__experimentalGetPatternTransformItems","selectedBlockNames","isLastBlockChangePersistent","__experimentalGetBlockListSettingsForBlocks","blockListSettingsForBlocks","__experimentalGetReusableBlockTitle","__unstableIsLastBlockChangeIgnored","__experimentalGetLastBlockAttributeChanges","_state$settings$edito","__experimentalEditorWriteMode","editorTool","preferencesStore","hasBlockMovingClientId","hint","didAutomaticChange","isBlockHighlighted","__experimentalGetActiveBlockIdByBlockNames","validBlockNames","selectedBlockClientId","entityAreaParents","wasBlockJustInserted","isBlockVisible","_state$blockVisibilit","getHoveredBlockClientId","__unstableGetVisibleBlocks","visibleBlocks","__unstableHasActiveBlockOverlayActive","__unstableIsWithinBlockOverlay","blockEditingMode","hasContentRoleAttribute","isUngroupable","_clientId","getGroupingBlockName","groupingBlockName","transforms","ungroup","isGroupable","_clientIds","__unstableGetContentLockingParent","__unstableGetTemporarilyEditingAsBlocks","__unstableGetTemporarilyEditingFocusModeToRevert","privateSettings","__experimentalUpdateSettings","stripExperimentalSettings","incomingSettings","hasOwn","__unstableIsPreviewMode","cleanSettings","hideBlockInterface","showBlockInterface","privateRemoveBlocks","forceRemove","dispatch","registry","maybeArray","displayBlockRemovalPrompt","selectPreviousBlock","batch","ensureDefaultBlock","__unstableHasCustomAppender","insertDefaultBlock","clearBlockRemovalPrompt","setBlockRemovalRules","setOpenedBlockSettingsMenu","setStyleOverride","deleteStyleOverride","setLastFocus","stopEditingAsBlocks","blockEditorStore","__unstableMarkNextChangeAsNotPersistent","updateBlockAttributes","updateBlockListSettings","updateSettings","focusMode","__unstableSetTemporarilyEditingAsBlocks","startDragging","stopDragging","expandBlock","setInsertionPoint","modifyContentLockBlock","selectBlock","setZoomLevel","firstSelectedClientId","sectionClientId","clearSelectedBlock","speak","resetZoomLevel","START_OF_SELECTED_AREA","retrieveSelectedAttribute","blockAttributes","RichTextData","findRichTextAttributeKey","castArray","resetBlocks","validateBlocksToTemplate","isBlocksValidToTemplate","doBlocksMatchTemplate","setTemplateValidity","resetSelection","receiveBlocks","updateBlock","hoverBlock","fallbackToParent","previousBlockClientId","firstParentClientId","selectNextBlock","nextBlockClientId","startMultiSelect","stopMultiSelect","multiSelect","__experimentalInitialPosition","blockCount","sprintf","_n","toggleSelection","replaceBlocks","replaceBlock","createOnMove","moveBlocksDown","moveBlocksUp","moveBlocksToPosition","moveBlockToPosition","insertBlock","insertBlocks","showInsertionPoint","__unstableOptions","hideInsertionPoint","synchronizeTemplate","updatedBlockList","synchronizeBlocksWithTemplate","__unstableDeleteSelection","targetSelection","targetBlock","targetBlockType","selectionA","selectionB","insert","cloneA","cloneBlock","cloneB","followingBlock","blocksWithTheSameType","updatedAttributes","newAttributeKey","convertedHtml","convertedValue","newOffset","newValue","newHtml","replacement","selectionChange","__unstableSplitSelection","focusRootClientId","blockAType","blockBType","attributeKeyA","attributeKeyB","createWarningNotice","noticesStore","insertAfterBlock","isUnmodifiedDefaultBlock","createEmpty","defaultBlockName","getDefaultBlockName","createBlock","head","tail","switched","output","clonedBlocks","firstBlock","headType","firstBlocks","isUnmodifiedBlock","lastBlock","tailType","lastBlocks","__unstableExpandSelection","mergeBlocks","firstBlockClientId","secondBlockClientId","getBlockSupport","blockWithSameType","removeBlock","rootAttributes","previousRootAttributes","attributeDefinition","canRestoreTextSelection","selectedBlock","removeBlocks","replaceInnerBlocks","toggleBlockMode","startTyping","stopTyping","startDraggingBlocks","stopDraggingBlocks","enterFormattedText","exitFormattedText","__unstableSaveReusableBlock","__unstableMarkLastChangeAsPersistent","__unstableMarkAutomaticChange","requestIdleCallback","setNavigationMode","__unstableSetEditorMode","setBlockMovingClientId","duplicateBlocks","clientIdsArray","lastSelectedIndex","__experimentalCloneSanitizedBlock","insertBeforeBlock","blockIndex","directInsertBlock","copiedAttributes","attributesToCopy","toggleBlockHighlight","flashBlock","setHasControlledInnerBlocks","setBlockVisibility","registerInserterMediaCategory","labels","fetch","isExternalResource","setBlockEditingMode","unsetBlockEditingMode","storeConfig","actions","store","createReduxStore","persist","registeredStore","registerStore","useSettings","useSelect","useSetting","note","registerPrivateActions","privateActions","registerPrivateSelectors","privateSelectors","DEFAULT_MAXIMUM_VIEWPORT_WIDTH","DEFAULT_MINIMUM_VIEWPORT_WIDTH","DEFAULT_SCALE_FACTOR","DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MIN","DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MAX","DEFAULT_MINIMUM_FONT_SIZE_LIMIT","getComputedFluidTypographyValue","minimumFontSize","maximumFontSize","minimumViewportWidth","maximumViewportWidth","scaleFactor","minimumFontSizeLimit","getTypographyValueAndUnit","fontSizeParsed","minimumFontSizeLimitParsed","coerceTo","fontSizeValueInPx","minimumFontSizeFactor","log2","calculatedMinimumFontSize","roundToPrecision","minimumFontSizeParsed","fontSizeUnit","maximumFontSizeParsed","minimumFontSizeRem","maximumViewportWidthParsed","minimumViewportWidthParsed","linearDenominator","minViewportWidthOffsetValue","viewportWidthOffset","linearFactorScaled","isFinite","rootSizeValue","acceptableUnits","acceptableUnitsGroup","regexUnits","matches","returnValue","digits","base","pow","Number","formatFontWeight","fontWeight","FONT_STYLES","FONT_WEIGHTS","getFontStylesAndWeights","fontFamilyFaces","fontStyles","fontWeights","combinedStyleAndWeightOptions","isSystemFont","isVariableFont","face","startValue","endValue","fontWeightValue","weight","fontStyle","formatFontStyle","styleName","styleValue","weightName","weightValue","optionName","getTypographyFontSizeValue","preset","fluid","isFluidTypographyEnabled","typography","fluidTypographySettings","typographySettings","layoutSettings","layout","defaultMaxViewportWidth","wideSize","maxViewportWidth","getFluidTypographyOptionsFromSettings","minFontSize","minViewportWidth","fluidSettings","findNearestFontWeight","availableFontWeights","newFontWeightValue","nearestFontWeight","nearest","fw","abs","ROOT_BLOCK_SELECTOR","ROOT_CSS_PROPERTIES_SELECTOR","PRESET_METADATA","valueKey","cssVarInfix","classes","classSuffix","propertyName","valueFunc","STYLE_PATH_TO_CSS_VAR_INFIX","shadow","useToolsPanelDropdownMenuProps","useViewportMatch","popoverProps","placement","findInPresetsBy","features","presetPath","presetProperty","presetValueValue","orderedPresetsByOrigin","presetByOrigin","origins","presets","presetObject","getValueFromVariable","parsedVar","USER_VALUE_PREFIX","endsWith","THEME_VALUE_PREFIX","THEME_VALUE_SUFFIX","presetType","getValueFromPresetVariable","getValueFromCustomVariable","scopeSelector","scope","scopes","selectorsScoped","outer","inner","areGlobalStyleConfigsEqual","getResolvedValue","ruleValue","resolvedValue","resolvedRuleValue","getCSSValueFromRawStyle","getResolvedRefValue","themeFileURIs","uri","themeFileUri","href","getResolvedThemeFilePath","_links","GlobalStylesContext","setUserConfig","EMPTY_CONFIG","VALID_SETTINGS","useGlobalStylesReset","useCallback","useGlobalSetting","propertyPath","configs","appendedBlockPath","appendedPropertyPath","contextualPath","globalPath","sourceKey","useMemo","configToUse","setting","_getValueFromObjectPa2","currentConfig","useGlobalStyle","shouldDecodeEncode","mergedConfig","baseConfig","userConfig","appendedPath","finalPath","rawResult","variableStylePath","presetPropertyValue","getPresetVariableFromValue","useSettingsForBlockElement","parentSettings","supportedStyles","supports","getSupportedStyles","customFontSize","defaultFontSizes","fontFamilies","background","button","heading","link","caption","customGradient","defaultDuotone","customDuotone","textColumns","sides","dimensions","textAlign","useColorsPerOrigin","customColors","palette","themeColors","defaultColors","shouldDisplayDefaultColors","defaultPalette","useGradientsPerOrigin","customGradients","themeGradients","defaultGradients","shouldDisplayDefaultGradients","f","cleanEmptyObject","cleanedNestedObjects","transformStyles","activeSupports","migrationPaths","results","isActive","referenceBlockAttributes","returnBlock","support","shouldSkipSerialization","featureSet","feature","skipSerialization","__experimentalSkipSerialization","pendingStyleOverrides","useStyleOverride","usePrivateStyleOverride","assets","__unstableType","useDispatch","useRegistry","fallbackId","useId","useEffect","override","queueMicrotask","isPending","currentId","useBlockSettings","parentLayout","backgroundImage","backgroundSize","customFontFamilies","defaultFontFamilies","themeFontFamilies","defaultFontSizesEnabled","customFontSizes","themeFontSizes","textDecoration","writingMode","textTransform","letterSpacing","margin","blockGap","defaultSpacingSizesEnabled","customSpacingSize","userSpacingSizes","defaultSpacingSizes","themeSpacingSizes","units","aspectRatio","minHeight","borderColor","borderRadius","borderStyle","borderWidth","customColorsEnabled","userDuotonePalette","themeDuotonePalette","defaultDuotonePalette","userGradientPalette","themeGradientPalette","defaultGradientPalette","areCustomGradientsEnabled","isBackgroundEnabled","isLinkEnabled","isTextEnabled","isHeadingEnabled","isButtonEnabled","duotone","spacingSizes","radius","BlockPropsPure","memo","useBlockProps","hook","setAllWrapperProps","wrapperProps","setWrapperProps","nextAll","addFilter","apiVersion","createSlotFill","BlockControlsFill","group","controls","__experimentalShareWithChildBlocks","Fill","shareWithChildBlocks","context","groups","useBlockControlsFill","innerMarkup","_jsxs","_Fragment","ToolbarGroup","StyleProvider","fillProps","forwardedContext","ComponentsContext","privateApis","BlockControlsSlot","toolbarState","ToolbarContext","contextState","slotFill","fills","useSlotFills","Slot","slot","bubblesVirtually","BlockControls","BlockFormatControls","LAYOUT_DEFINITIONS","className","baseStyles","float","spacingStyles","constrained","flex","displayMode","gap","grid","appendSelectors","subselector","getBlockGapCSS","layoutDefinitions","layoutType","blockGapValue","gapStyle","cssProperty","getAlignmentsInfo","contentSize","alignmentInfo","sizeRegex","none","wide","opacity","sidesLeft","RANGE_CONTROL_MAX_SIZE","ALL_SIDES","DEFAULT_VALUES","top","bottom","ICONS","sidesAll","axial","horizontal","sidesHorizontal","vertical","sidesVertical","sidesTop","sidesRight","sidesBottom","LABELS","mixed","VIEWS","isValueSpacingPreset","getCustomValueFromPreset","getSpacingPresetSlug","spacingSize","getPresetValueFromCustomValue","spacingMatch","getSpacingPresetCssVar","hasAxisSupport","hasHorizontalSupport","hasVerticalSupport","getGapCSSValue","blockGapBoxControlValue","isValueString","getGapBoxControlValueFromStyle","row","BLOCK_ALIGNMENTS_CONTROLS","justifyTop","center","justifyCenterVertical","justifyBottom","stretch","justifyStretchVertical","justifySpaceBetweenVertical","DEFAULT_CONTROLS","isCollapsed","isToolbar","applyOrUnset","align","activeAlignment","defaultAlignmentControl","UIComponent","ToolbarDropdownMenu","extraProps","control","role","onClick","BlockVerticalAlignmentControl","BlockVerticalAlignmentUI","BlockVerticalAlignmentToolbar","icons","justifyLeft","justifyCenter","justifyRight","justifySpaceBetween","justifyStretch","allowedControls","handleClick","allControls","elem","JustifyContentControl","JustifyContentUI","JustifyToolbar","justifyContentMap","alignItemsMap","verticalAlignmentMap","flexWrapOptions","inspectorControls","layoutBlockSupport","allowOrientation","allowJustification","Flex","FlexItem","FlexLayoutJustifyContentControl","OrientationControl","FlexWrapControl","toolBarControls","allowVerticalAlignment","FlexLayoutVerticalAlignmentControl","getLayoutStyle","hasBlockGapSupport","orientation","justifyContent","flexWrap","verticalAlignment","alignItems","getOrientation","getAlignments","defaultVerticalAlignment","POPOVER_PROPS","onJustificationChange","justificationOptions","ToggleGroupControl","__next40pxDefaultSize","__nextHasNoMarginBottom","ToggleGroupControlOptionIcon","ToggleControl","checked","newVerticalAlignment","newJustification","arrowRight","arrowDown","blockGapStyleValue","isBlockBasedTheme","alignments","alignment","info","cloneElement","allowCustomContentAndWideSize","availableUnits","useCustomUnits","VStack","UnitControl","labelPosition","nextWidth","InputControlPrefixWrapper","variant","Icon","alignNone","stretchWide","DefaultLayoutJustifyContentControl","marginLeft","marginRight","getCSSRules","paddingRightValue","paddingLeftValue","RANGE_CONTROL_MAX_VALUES","px","vw","vh","em","rem","svw","lvw","dvw","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","allowSizingOnChildren","showColumnsControl","__experimentalEnableGridInteractivity","columnCount","showMinWidthControl","GridLayoutTypeControl","GridLayoutColumnsAndRowsControl","GridLayoutMinimumWidthControl","minimumColumnWidth","rowCount","maxValue","isManualPlacement","quantity","parseQuantityAndUnitFromRawValue","BaseControl","VisualLabel","as","isBlock","onUnitChange","newUnit","toFixed","hideLabelFromVision","RangeControl","withInputField","defaultColumnCount","NumberControl","newColumnCount","newRowCount","tempColumnCount","setTempColumnCount","useState","tempRowCount","setTempRowCount","tempMinimumColumnWidth","setTempMinimumColumnWidth","gridPlacement","helpText","help","ToggleGroupControlOption","layoutTypes","flow","getLayoutType","defaultLayout","Layout","LayoutProvider","useLayout","WIDE_CONTROLS","useAvailableAlignments","isNoneOnly","wideControlsEnabled","themeSupportsLayout","_settings$alignWide","__unstableIsBlockBasedTheme","positionLeft","positionCenter","positionRight","stretchFullWidth","enabledControls","onChangeAlignment","activeAlignmentControl","commonProps","controlName","toggleProps","onClose","MenuGroup","MenuItem","iconPosition","clsx","BlockAlignmentControl","BlockAlignmentUI","BlockAlignmentToolbar","useBlockEditingMode","globalBlockEditingMode","ALL_ALIGNMENTS","WIDE_ALIGNMENTS","getValidAlignments","blockAlign","hasWideBlockSupport","hasWideEnabled","validAlignments","setAttributes","nextAlign","blockDefaultAlign","addSaveProps","attributeKeys","hasSupport","_settings$attributes$","enum","InspectorControlsDefault","InspectorControlsAdvanced","InspectorControlsBindings","InspectorControlsBackground","InspectorControlsBorder","InspectorControlsColor","InspectorControlsFilter","InspectorControlsDimensions","InspectorControlsPosition","InspectorControlsTypography","InspectorControlsListView","InspectorControlsStyles","advanced","effects","InspectorControlsFill","__experimentalGroup","resetAllFilter","ToolsPanelInspectorControl","RegisterResetAll","registerResetAllFilter","deregisterResetAllFilter","ToolsPanelContext","BlockSupportToolsPanel","dropdownMenuProps","panelId","resetAll","resetFilters","newBlockAttributes","resetFilter","ToolsPanel","hasInnerWrapper","shouldRenderPlaceholderItems","__experimentalFirstVisibleItemClass","__experimentalLastVisibleItemClass","BlockSupportSlotContainer","toolsPanelContext","computedFillProps","_fillProps$forwardedC","InspectorControlsSlot","InspectorControls","InspectorAdvancedControls","slotName","fillRule","clipRule","withFilters","MediaUpload","fallback","hasUploadPermissions","mediaUpload","LinkSettingsDrawer","settingsOpen","setSettingsOpen","prefersReducedMotion","useReducedMotion","MaybeAnimatePresence","Fragment","AnimatePresence","MaybeMotionDiv","motion","div","settingsDrawerId","useInstanceId","Button","isRTL","chevronLeftSmall","chevronRightSmall","initial","animate","exit","variants","collapsed","transition","isFunction","maybeFunc","URLInput","onFocus","onKeyDown","selectLink","handleOnClick","bindSuggestionNode","autocompleteRef","createRef","inputRef","updateSuggestions","debounce","suggestionNodes","suggestionsRequest","suggestions","showSuggestions","suggestionsValue","selectedSuggestion","suggestionsListboxId","suggestionOptionIdPrefix","prevProps","__experimentalShowInitialSuggestions","scrollIntoView","behavior","disableSuggestions","shouldShowInitialSuggestions","cancel","__experimentalFetchLinkSuggestions","fetchLinkSuggestions","__experimentalHandleURLSuggestions","handleURLSuggestions","isInitialSuggestions","isURL","loading","request","debouncedSpeak","finally","keyCode","UP","target","preventDefault","setSelectionRange","DOWN","ENTER","onSubmit","suggestion","previousIndex","focus","getDerivedStateFromProps","instanceId","shouldShowSuggestions","hasValue","renderControl","renderSuggestions","isFullWidth","placeholder","__experimentalRenderControl","controlProps","inputProps","required","suffix","InputControl","Spinner","__experimentalRenderSuggestions","suggestionsListProps","buildSuggestionItemProps","tabIndex","isLoading","handleSuggestionClick","currentInputValue","Popover","focusOnMount","_createElement","compose","withSafeTimeout","withSpokenMessages","withInstanceId","withSelect","LinkControlSearchCreate","searchTerm","itemProps","buttonText","createInterpolateElement","ICONS_MAP","post","postList","page","post_tag","tag","attachment","SearchItemIcon","globe","isFrontPage","home","isBlogHome","verse","addLeadingSlash","trimmedURL","removeTrailingSlash","LinkControlSearchItem","shouldShowType","safeDecodeURI","getPath","v","partialRight","fn","partialArgs","filterURLForDisplay","shortcut","getVisualTypeName","TextHighlight","stripHTML","highlight","__experimentalLinkControlSearchItem","CREATE_TYPE","URL_TYPE","MAILTO_TYPE","INTERNAL_TYPE","LINK_ENTRY_TYPES","DEFAULT_LINK_SETTINGS","LinkControlSearchResults","withCreateSuggestion","createSuggestionButtonText","suggestionsQuery","resultsListClasses","isSingleDirectEntryResult","shouldShowCreateSuggestion","shouldShowSuggestionsTypes","labelText","__experimentalLinkControlSearchResults","isURLLike","val","getProtocol","protocolIsValid","isValidProtocol","mayBeTLD","maxLength","cleanedURL","hasPossibleTLD","isWWW","isInternal","isValidFragment","handleNoop","handleDirectEntry","prependHTTP","noopSearchHandler","noop","LinkControlSearchInput","currentLink","onCreateSuggestion","onSelect","fetchSuggestions","allowDirectEntry","showInitialSuggestions","withURLSuggestion","genericSearchHandler","fetchSearchSuggestions","pageOnFront","pageForPosts","directEntryHandler","handleEntitySearch","useSearchHandler","searchHandler","focusedSuggestion","setFocusedSuggestion","onSuggestionSelected","restLinkProps","_placeholder","onInputChange","hasSuggestion","__experimentalLinkControlSearchInput","ViewerSlot","ViewerFill","isFetching","richData","useReducer","fetchRichUrlData","__experimentalFetchRichUrlData","AbortController","controller","signal","urlData","aborted","abort","LinkPreview","onEditClick","hasRichPreviews","hasUnlinkControl","onRemove","showIconLabels","showRichPreviews","useRichUrlData","hasRichData","displayURL","isEmptyURL","displayTitle","isUrlRedundant","alt","createNotice","useCopyToClipboard","isDismissible","ExternalLink","Truncate","numberOfLines","showTooltip","linkOff","copySmall","accessibleWhenDisabled","disabled","LinkControlSettings","handleSettingChange","theSettings","CheckboxControl","VisuallyHidden","PREFERENCE_SCOPE","PREFERENCE_KEY","LinkControl","searchInputPlaceholder","onCancel","noDirectEntry","forceIsEditingLink","createSuggestion","inputValue","propInputValue","noURLSuggestion","hasTextControl","renderControlBottom","advancedSettingsPreference","_prefsStore$get","setPreference","isSettingsOpen","isMountingRef","useRef","wrapperNode","textInputRef","isEndingEditWithFocusRef","settingsKeys","internalControlValue","setInternalControlValue","setInternalURLInputValue","setInternalTextInputValue","createSetInternalSettingValueHandler","internalValue","setInternalValue","previousValue","setPreviousValue","nextValue","settingsUpdates","useInternalValue","valueHasChanges","isShallowEqualObjects","isEditingLink","setIsEditingLink","createPage","isCreatingPage","errorMessage","handleCreatePage","cancelableCreateSuggestion","setIsCreatingPage","setErrorMessage","suggestionTitle","hasCanceled_","isCanceled","makeCancelable","useCreatePage","focusable","hasLinkValue","stopEditing","contains","ownerDocument","activeElement","handleSubmit","currentUrlInputValue","currentInputIsEmpty","shownUnlinkControl","showActions","showTextControl","isEditing","showSettings","TextControl","updatedValue","nonSettingsChanges","InputControlSuffixWrapper","keyboardReturn","Notice","status","LinkControlSettingsDrawer","prefVal","LinkSettings","HStack","justify","stopPropagation","DeprecatedExperimentalLinkControl","uniqueId","withDispatch","removeNotice","MediaReplaceFlow","mediaURL","mediaId","mediaIds","allowedTypes","accept","onError","onSelectURL","onReset","onToggleFeaturedImage","useFeaturedImage","onFilesUpload","multiple","addToGallery","handleUpload","renderToggle","errorNoticeID","onUploadError","safeMessage","selectMedia","media","closeMenu","openOnArrowDown","click","gallery","allowedType","Dropdown","contentClassName","isOpen","onToggle","ToolbarButton","renderContent","NavigableMenu","MediaUploadCheck","mediaIcon","FormFileUpload","uploadFiles","files","filesList","onFileChange","openFileDialog","upload","postFeaturedImage","isPressed","IMAGE_BACKGROUND_TYPE","BACKGROUND_POPOVER_PROPS","coordsToBackgroundPosition","backgroundPositionToCoords","InspectorImagePreviewItem","imgUrl","filename","onToggleCallback","restToggleProps","renderPreviewContent","flexGrow","BackgroundControlsPanel","hasImageValue","imgLabel","getFilename","DropdownContentWrapper","paddingSize","LoadingSpinner","Placeholder","BackgroundImageControls","inheritedValue","onRemoveImage","onResetImage","displayInPanel","defaultValues","containerRef","isUploading","setIsUploading","createErrorNotice","onSelectMedia","isBlobURL","media_type","sizeValue","positionValue","backgroundPosition","closeAndFocus","hasBackgroundImageValue","requestAnimationFrame","toggleButton","tabbable","DropZone","onFilesDrop","image","BackgroundSizeControls","repeatValue","backgroundRepeat","imageValue","isUploadedImage","attachmentValue","backgroundAttachment","currentValueForToggle","repeatCheckedValue","updateBackgroundSize","nextRepeat","nextPosition","backgroundPositionValue","FocalPointPicker","toggleScrollWithPage","__unstableInputWidth","toggleIsRepeated","BackgroundImagePanel","globalStyles","_settings","resolvedInheritedValue","resolvedValues","backgroundValue","resetBackground","shouldShowBackgroundImageControls","isDropDownOpen","setIsDropDownOpen","useHasBackgroundPanel","BackgroundToolsPanel","headerLabel","Wrapper","defaultControls","showBackgroundImageControl","ToolsPanelItem","onDeselect","isShownByDefault","BackgroundImageControl","BACKGROUND_SUPPORT_KEY","BACKGROUND_BLOCK_DEFAULT_VALUES","hasBackgroundSupport","setBackgroundStyleDefaults","backgroundStyle","backgroundStylesWithDefaults","getBackgroundImageClasses","BackgroundInspectorControl","StylesBackgroundPanel","newStyle","backgroundStyles","ANCHOR_REGEX","ANCHOR_SCHEMA","attribute","anchor","isWeb","autoCapitalize","autoComplete","ariaLabel","originClassName","getBlockDefaultClassName","grad","turn","rad","PI","u","g","h","floor","c","m","N","M","H","$","parsed","rgba","brightness","isDark","isLight","toHex","toRgb","toRgbString","toHsl","toHslString","toHsv","invert","w","saturate","desaturate","grayscale","lighten","darken","rotate","hue","alpha","isEqual","S","k","bisque","cadetblue","chartreuse","chocolate","coral","antiquewhite","aqua","azure","whitesmoke","papayawhip","plum","blanchedalmond","gold","goldenrod","gainsboro","cornsilk","cornflowerblue","burlywood","aquamarine","beige","crimson","darkblue","darkcyan","darkgoldenrod","darkkhaki","darkgray","darkgreen","darkgrey","peachpuff","darkmagenta","darkred","darkorchid","darkorange","darkslateblue","darkslategray","darkslategrey","deeppink","deepskyblue","wheat","firebrick","floralwhite","ghostwhite","darkviolet","dodgerblue","grey","honeydew","hotpink","blueviolet","forestgreen","lawngreen","indianred","indigo","fuchsia","brown","maroon","mediumblue","lightcoral","darkturquoise","lightcyan","ivory","lightyellow","lightsalmon","lightseagreen","linen","mediumaquamarine","lemonchiffon","lime","khaki","mediumseagreen","limegreen","mediumspringgreen","lightskyblue","lightblue","midnightblue","lightpink","mistyrose","moccasin","mintcream","lightslategray","lightslategrey","navajowhite","navy","mediumvioletred","powderblue","palegoldenrod","oldlace","paleturquoise","mediumturquoise","mediumorchid","rebeccapurple","lightsteelblue","mediumslateblue","thistle","tan","orchid","mediumpurple","purple","pink","skyblue","springgreen","palegreen","slateblue","lavenderblush","peru","palevioletred","violet","teal","slategray","slategrey","aliceblue","darkseagreen","darkolivegreen","greenyellow","seagreen","seashell","tomato","silver","sienna","lavender","lightgreen","orange","orangered","steelblue","royalblue","turquoise","yellowgreen","salmon","saddlebrown","sandybrown","rosybrown","darksalmon","lightgoldenrodyellow","snow","lightgrey","lightgray","dimgray","dimgrey","olivedrab","olive","toName","closest","luminance","contrast","isReadable","level","extend","namesPlugin","a11yPlugin","kebabCase","componentsPrivateApis","getColorObjectByAttributeValues","definedColor","customColor","colorObj","getColorObjectByColorValue","colorValue","getColorClassName","colorContextName","colorSlug","useMultipleOriginColorsAndGradients","enableCustomColors","enableCustomGradients","colorGradientSettings","hasColorsOrGradients","inputArray","getAllUnit","selectedUnits","flat","cornerUnits","getAllValue","parsedQuantitiesAndUnits","allValues","_value$","allUnits","hasMixedValues","allValue","hasDefinedValues","AllInputControl","setSelectedUnits","isMixed","allPlaceholder","disableUnits","isOnly","isNumeric","topLeft","topRight","bottomLeft","bottomRight","CORNERS","BoxInputControls","valuesProp","createHandleOnChange","corner","parsedQuantity","parsedUnit","computedUnit","Tooltip","side","newUnits","LinkedButton","isLinked","iconSize","MIN_BORDER_RADIUS_VALUE","MAX_BORDER_RADIUS_VALUES","BorderRadiusControl","setIsLinked","unitConfig","InputControls","toggleLinked","ShadowPopoverContainer","onShadowChange","shadows","useShadowPresets","Heading","ShadowPresets","activeShadow","Composite","ShadowIndicator","Item","unset","boxShadow","check","ShadowPopover","renderShadowToggle","shadowButtonRef","removeButtonProps","shadowIcon","_settings$shadow$pres","defaultPresetsEnabled","defaultPresets","defaultShadows","themeShadows","customShadows","unsetShadow","shadowPresets","useHasBorderPanel","useHasBorderPanelControls","hasBorderColor","useHasBorderColorControl","hasBorderRadius","useHasBorderRadiusControl","hasBorderStyle","useHasBorderStyleControl","hasBorderWidth","useHasBorderWidthControl","hasShadow","useHasShadowControl","BorderToolsPanel","BorderPanel","_ref2","_shadowPresets$custom","decodeValue","encodeColorValue","colorObject","flatMap","originColors","hasSplitBorders","borderValue","setBorder","newBorder","showBorderColor","showBorderStyle","showBorderWidth","showBorderRadius","borderRadiusValues","setBorderRadius","newBorderRadius","borderValues","hasShadowControl","mergedShadowPresets","setShadow","shadowName","showBorderByDefault","hasBorderControl","useBorderPanelLabel","isDefinedBorder","resetBorder","BorderBoxControl","enableAlpha","enableStyle","updatedBorder","popoverOffset","popoverPlacement","__experimentalIsRenderedInSidebar","resetShadow","BORDER_SUPPORT_KEY","SHADOW_SUPPORT_KEY","getColorByProperty","property","matchedColor","getMultiOriginColor","namedColor","getColorSlugFromVariable","styleToAttributes","borderColorValue","borderColorSlug","updatedStyle","attributesToStyle","BordersInspectorControl","attributesResetAllFilter","existingStyle","isEnabled","StylesBorderPanel","hasBorderSupport","borderClasses","getBorderClasses","newClassName","borderColorClass","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","__experimentalGetGradientClass","gradientSlug","getGradientValueBySlug","__experimentalGetGradientObjectByGradientValue","getGradientSlugByValue","__experimentalUseGradient","gradientAttribute","customGradientAttribute","allGradients","setGradient","newGradientValue","gradientClass","gradientValue","Tabs","colorsAndGradientKeys","TAB_IDS","ColorGradientControlInner","onColorChange","onGradientChange","clearable","showTitle","headingLevel","canChooseAColor","canChooseAGradient","tabPanels","ColorPalette","newColor","GradientPicker","newGradient","renderPanelType","defaultTabId","TabList","Tab","tabId","TabPanel","ColorGradientControlSelect","useHasColorPanel","hasTextPanel","useHasTextPanel","hasBackgroundPanel","useHasBackgroundColorPanel","hasLinkPanel","useHasLinkPanel","hasHeadingPanel","useHasHeadingPanel","hasButtonPanel","useHasButtonPanel","hasCaptionPanel","useHasCaptionPanel","ColorToolsPanel","LabeledColorIndicators","indicators","ZStack","isLayered","indicator","expanded","ColorIndicator","ColorPanelTab","isGradient","userValue","setValue","colorGradientControlSettings","ColorGradientControl","ColorPanelDropdown","resetValue","tabs","_tabs$","currentTab","tab","firstTabKey","firstTab","colorGradientDropdownButtonRef","resetIcon","tabKey","restTabProps","ColorPanel","areCustomSolidsEnabled","hasSolidColors","hasGradientColors","encodeGradientValue","gradientObject","originGradients","showBackgroundPanel","backgroundColor","userBackgroundColor","userGradient","showLinkPanel","linkColor","userLinkColor","hoverLinkColor","userHoverLinkColor","showTextPanel","textColor","userTextColor","setTextColor","changedObject","showPanel","hasTextColor","resetTextColor","hasBackground","hasLink","resetLink","elementBackgroundColor","elementGradient","elementTextColor","elementBackgroundUserColor","elementGradientUserColor","elementTextUserColor","supportsBackground","hasElement","resetElement","newTextColor","newBackgroundColor","restItem","fallbackBackgroundColor","fallbackTextColor","fallbackLinkColor","isLargeText","enableAlphaChecker","currentBackgroundColor","currentTextColor","currentLinkColor","textColors","colordBackgroundColor","colord","backgroundColorHasTransparency","backgroundColorBrightness","isReadableOptions","speakMessage","colordTextColor","isColordTextReadable","textHasTransparency","spokenMessage","BlockRefs","refsMap","observableMap","BlockRefsProvider","useBlockRefProvider","useRefEffect","assignRef","useBlockElementRef","useLayoutEffect","unsubscribe","subscribe","useBlockElement","blockElement","setBlockElement","getComputedValue","defaultView","getPropertyValue","prevColors","newColors","BlockColorContrastChecker","blockEl","setColors","updateColors","firstLinkElement","querySelector","innerText","backgroundColorNode","nodeType","ELEMENT_NODE","getBlockElementColors","ContrastChecker","COLOR_SUPPORT_KEY","hasColorSupport","colorSupport","hasLinkColorSupport","hasGradientSupport","hasBackgroundColorSupport","hasTextColorSupport","hasGradient","shouldSerialize","textClass","backgroundClass","serializeHasBackground","textColorValue","textColorSlug","backgroundColorValue","backgroundColorSlug","ColorInspectorControl","ColorEdit","enableContrastChecking","StylesColorPanel","enableContrastChecker","userPalette","themePalette","extraStyles","saveProps","hasBackgroundValue","MIGRATION_PATHS","FontFamilyControl","_options$find","blockLevelFontFamilies","fontFamily","selectedValue","option","CustomSelectControl","__shouldNotWarnDeprecated36pxSize","selectedItem","destinationBlockType","getFontAppearanceLabel","hasFontStyles","hasFontWeights","FontAppearanceControl","otherProps","hasStylesOrWeights","defaultOption","selectOptions","combineOptions","combinedOptions","styleOptions","weightOptions","currentSelection","describedBy","LineHeightControl","isDefined","isLineHeightDefined","adjustNextValue","wasTypedOrPasted","BASE_DEFAULT_VALUE","__unstableStateReducer","stateReducer","payload","nativeEvent","inputType","handleOnChange","spinFactor","spinControls","LetterSpacingControl","TEXT_ALIGNMENT_OPTIONS","alignLeft","alignCenter","alignRight","alignJustify","DEFAULT_OPTIONS","TextAlignmentControl","validOptions","isDeselectable","TEXT_TRANSFORMS","formatUppercase","formatLowercase","formatCapitalize","TextTransformControl","TEXT_DECORATIONS","formatUnderline","formatStrikethrough","TextDecorationControl","WRITING_MODES","textHorizontal","textVertical","WritingModeControl","MIN_TEXT_COLUMNS","MAX_TEXT_COLUMNS","useHasTypographyPanel","hasFontFamily","useHasFontFamilyControl","hasLineHeight","useHasLineHeightControl","hasFontAppearance","useHasAppearanceControl","hasLetterSpacing","useHasLetterSpacingControl","hasTextAlign","useHasTextAlignmentControl","hasTextTransform","useHasTextTransformControl","hasTextDecoration","useHasTextDecorationControl","hasWritingMode","useHasWritingModeControl","hasTextColumns","useHasTextColumnsControl","hasFontSize","useHasFontSizeControl","TypographyToolsPanel","fontAppearance","TypographyPanel","hasFontFamilyEnabled","selectedFontFamily","_fontFamilies$find$fo","fontFamiliesFromSettings","_fontFamiliesFromSett","family","fontFace","getMergedFontFamiliesAndFontFamilyFaces","setFontFamily","hasFontSizeEnabled","mergedFontSizes","_fontSizes$custom","_fontSizes$theme","_fontSizes$default","getMergedFontSizes","setFontSize","hasAppearanceControl","appearanceControlLabel","useAppearanceControlLabel","nearestFontStyle","hasFontStyle","fs","hasFontWeight","availableFontStyles","newFontStyleValue","findNearestStyleAndWeight","setFontAppearance","newFontStyle","newFontWeight","resetFontAppearance","hasLineHeightEnabled","setLineHeight","hasLetterSpacingControl","setLetterSpacing","hasTextColumnsControl","setTextColumns","hasTextTransformControl","setTextTransform","hasTextDecorationControl","setTextDecoration","hasWritingModeControl","setWritingMode","hasTextAlignmentControl","setTextAlign","resetFontFamily","resetFontSize","FontSizePicker","withReset","withSlider","resetLineHeight","resetLetterSpacing","resetTextColumns","resetTextDecoration","resetWritingMode","resetTextTransform","showNone","resetTextAlign","FONT_FAMILY_SUPPORT_KEY","TYPOGRAPHY_SUPPORT_KEY","TokenList","getFontSize","fontSizeAttribute","customFontSizeAttribute","fontSizeObject","getFontSizeObjectByValue","getFontSizeClass","fontSizeSlug","FONT_SIZE_SUPPORT_KEY","DEFAULT_ALIGNMENT_CONTROLS","alignmentControls","AlignmentControl","AlignmentUI","AlignmentToolbar","TEXT_ALIGN_SUPPORT_KEY","VALID_TEXT_ALIGNMENTS","NO_TEXT_ALIGNMENTS","getValidTextAlignments","blockTextAlign","hasTextAlignControl","validTextAlignments","textAlignmentControls","newTextAlignValue","omit","TYPOGRAPHY_SUPPORT_KEYS","fontSizeValue","fontFamilyValue","fontFamilySlug","TypographyInspectorControl","StylesTypographyPanel","compare","Intl","Collator","numeric","useSpacingSizes","customSpacingSizes","customSizes","themeSizes","defaultSizes","sizes","CUSTOM_VALUE_SETTINGS","steps","rm","SpacingInputControl","minimumCustomValue","onMouseOut","onMouseOver","showSideInLabel","_CUSTOM_VALUE_SETTING","_CUSTOM_VALUE_SETTING2","selectListSizes","showRangeControl","disableCustomSpacingSizes","editorSettings","showCustomValueControl","setShowCustomValueControl","minValue","setMinValue","usePrevious","presetValue","sliderValue","getSliderValueFromPreset","selectedUnit","customRangeValue","getNewPresetValue","newSize","controlType","marks","_newValue","sideLabel","typeLabel","onBlur","getNewCustomValue","onDragStart","onDrag","onDragEnd","onMouseDown","offsetX","renderTooltipContent","groupedSides","AxialInputControls","nextValues","filteredSides","axisValue","SeparatedInputControls","SingleInputControl","currentSide","SpacingSizesControl","labelProp","inputValues","hasOneSide","hasOnlyAxialSides","view","setView","sideValues","hasMatchingAxialValues","hasNoValuesAndBalancedSides","counts","hasBalancedSidesSupport","getInitialView","inputControlProps","newValues","RANGE_CONTROL_CUSTOM_SETTINGS","HeightControl","_RANGE_CONTROL_CUSTOM","_RANGE_CONTROL_CUSTOM2","currentUnit","Spacer","marginX","marginBottom","useGetNumberOfBlocksBeforeCell","gridClientId","numColumns","getNumberOfBlocksBeforeCell","targetIndex","_getBlockAttributes$s","columnStart","rowStart","selfStretch","ChildLayoutControl","childLayout","parentType","defaultParentType","parentLayoutType","FlexControls","GridControls","flexSize","flexResetLabel","hasFlexValue","resetFlex","childLayoutOrientation","columnSpan","rowSpan","maxColumnSpan","maxRowSpan","hasSpanValue","resetGridSpans","newColumnSpan","constrainedValue","newRowSpan","hasStartValue","resetGridStarts","newColumnStart","newRowStart","AspectRatioTool","displayValue","defaultRatios","themeRatios","showDefaultRatios","themeOptions","ratio","defaultOptions","aspectRatioOptions","SelectControl","AXIAL_SIDES","useHasDimensionsPanel","hasContentSize","useHasContentSize","hasWideSize","useHasWideSize","hasPadding","useHasPadding","hasMargin","useHasMargin","hasGap","useHasGap","hasMinHeight","useHasMinHeight","hasAspectRatio","useHasAspectRatio","hasChildLayout","useHasChildLayout","_settings$parentLayou","defaultParentLayoutType","filterValuesBySides","filteredValues","splitStyleValue","DimensionsToolsPanel","DimensionsPanel","onVisualize","includeLayoutControls","_defaultControls$cont","_defaultControls$wide","_defaultControls$padd","_defaultControls$marg","_defaultControls$bloc","_defaultControls$chil","_defaultControls$minH","_defaultControls$aspe","showSpacingPresetsControl","useHasSpacingPresets","minimumMargin","minMarginValue","setMinMarginValue","showContentSizeControl","contentSizeValue","setContentSizeValue","showWideSizeControl","wideSizeValue","setWideSizeValue","showPaddingControl","paddingValues","paddingSides","isAxialPadding","setPaddingValues","newPaddingValues","onMouseOverPadding","showMarginControl","marginValues","marginSides","isAxialMargin","setMarginValues","newMarginValues","onMouseOverMargin","showGapControl","gapSides","isAxialGap","gapValue","gapValues","splitGapValue","setGapValue","newGapValue","setGapValues","nextBoxGapValue","showMinHeightControl","minHeightValue","setMinHeightValue","tempValue","showAspectRatioControl","aspectRatioValue","showChildLayoutControl","onMouseLeaveControls","hasUserSetContentSizeValue","resetContentSizeValue","nextContentSize","hasUserSetWideSizeValue","resetWideSizeValue","nextWideSize","hasPaddingValue","resetPaddingValue","BoxControl","allowReset","splitOnAxis","hasMarginValue","resetMarginValue","hasGapValue","resetGapValue","newChildLayout","hasMinHeightValue","resetMinHeightValue","hasAspectRatioValue","scrollContainerCache","contentRef","effect","onWheel","contentEl","scrollContainer","getScrollContainer","scrollBy","passive","BLOCK_SELECTOR","APPENDER_SELECTOR","BLOCK_APPENDER_CLASS","isInSameBlock","isInsideRootBlock","getBlockClientId","blockNode","rectUnion","rect1","rect2","DOMRectReadOnly","isElementVisible","viewport","classList","bounds","getBoundingClientRect","checkVisibility","opacityProperty","contentVisibilityAuto","visibilityProperty","display","visibility","isScrollable","WITH_OVERFLOW_ELEMENT_BLOCKS","getElementBounds","dataType","getAttribute","currentElement","innerWidth","MAX_POPOVER_RECOMPUTE_COUNTER","MAX_SAFE_INTEGER","PrivateBlockPopover","bottomClientId","__unstablePopoverSlot","__unstableContentRef","selectedElement","lastSelectedElement","mergedRefs","useMergeRefs","usePopoverScroll","popoverDimensionsRecomputeCounter","forceRecomputePopoverDimensions","observer","MutationObserver","observe","disconnect","popoverAnchor","contextElement","__unstableSlotName","flip","PublicBlockPopover","CoverContainer","additionalStyles","setWidth","setHeight","ResizeObserver","box","_bottomClientId","SpacingVisualizer","computeStyle","forceShow","updateStyle","attributeFilter","previousValueRef","setIsActive","isShallowEqual","timeout","clearTimeout","BlockPopoverCover","getComputedCSS","MarginVisualizer","borderRightWidth","borderLeftWidth","PaddingVisualizer","DIMENSIONS_SUPPORT_KEY","SPACING_SUPPORT_KEY","DimensionsInspectorControl","visualizedProperty","setVisualizedProperty","setProperty","useVisualizer","StylesDimensionsPanel","hasDimensionsSupport","inlineStyleOverrides","useCustomSides","styleSupportKeys","hasStyleSupport","getInlineStyles","skipSerializationPathsEdit","skipSerializationPathsSave","skipSerializationPathsSaveChecks","renamedFeatures","omitStyle","preserveReference","firstSubpath","restPath","skipPaths","featureName","__unstableParentLayout","passedProps","blockElementsContainerIdentifier","STYLE_BLOCK_PROPS_REFERENCE","baseElementSelector","blockElementStyles","elementCSSRules","elementTypes","pseudo","elementStyles","ELEMENTS","compileCSS","pseudoSelector","DuotoneControl","idProp","colorPalette","duotonePalette","disableCustomDuotone","toolbarIcon","DuotoneSwatch","actionLabel","descriptionId","headerTitle","DuotonePicker","getDuotoneUnsetStylesheet","getDuotoneStylesheet","getDuotoneFilter","rgbColor","getValuesFromColors","getBlockCSSSelector","hasSelectors","rootSelector","__experimentalSelector","pathArray","fallbackSelector","featureSelector","subfeatureSelector","useMultiOriginColorPresets","presetSetting","defaultSetting","disableDefault","userPresets","themePresets","useHasFiltersPanel","useHasDuotoneControl","FiltersToolsPanel","LabeledColorIndicator","resetDuotone","duotoneButtonRef","FiltersPanel","hasDuotoneEnabled","setDuotone","duotonePreset","duotoneValue","hasDuotone","isSafari","useMultiOriginPresets","enableDefault","getColorsFromDuotonePreset","duotoneStyle","enableCustomDuotone","duotonePresetOrColors","StylesFiltersPanel","newDuotone","maybePreset","getDuotonePresetFromColors","DUOTONE_BLOCK_PROPS_REFERENCE","experimentalDuotone","filterClass","shouldRender","filterId","duotoneSelector","duotoneAttr","isCustom","isPreset","selectorPart","isValidFilter","useDuotoneStyles","useBlockDisplayInformation","isSynced","isReusableBlock","isTemplatePart","getBlockLabel","positionLabel","positionType","getPositionTypeLabel","blockTypeInfo","POSITION_SUPPORT_KEY","DEFAULT_OPTION","STICKY_OPTION","FIXED_OPTION","POSITION_SIDES","VALID_POSITION_TYPES","hasStickyOrFixedPositionValue","useIsPositionDisabled","allowFixed","allowSticky","PositionPanelPure","hasFixedPositionSupport","sticky","hasStickyPositionSupport","blockInformation","stickyHelpText","availableOptions","selectedOption","web","onChangeType","native","hasPositionBlockSupport","isPositionDisabled","allowPositionStyles","POSITION_BLOCK_PROPS_REFERENCE","getPositionCSS","ELEMENT_CLASS_NAMES","BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS","__experimentalBorder","flattenTree","newKey","newLeaf","newPrefix","getFeatureDeclarations","declarations","isShorthand","subfeature","newDeclarations","getStylesDeclarations","blockStyles","useRootPaddingAlign","disableRootPadding","isRoot","STYLE_PROPERTY","properties","useEngine","rootOnly","pathToValue","entry","getLayoutStyles","hasFallbackGapSupport","fallbackGapValue","ruleset","spacingStyle","cssValue","combinedSelector","validDisplayModes","baseStyle","STYLE_KEYS","pickStyleKeys","treeToPickFrom","clonedEntries","getNodesWithSettings","blockSelectors","_tree$settings$blocks","pickPresets","blockPresets","blockCustom","toCustomProperties","mergedSettings","getPresetsDeclarations","customProps","toStyles","disableLayoutStyles","layoutStyles","marginReset","rootPadding","variationStyles","nodesWithStyles","getNodesWithStyles","_tree$styles$blocks","skipSelectorWrapper","_node$elements","variationName","_variation$elements","_variation$blocks","variationSelector","styleVariationSelectors","variationBlockName","variationBlockStyles","_variationBlockStyles","variationBlockSelector","variationDuotoneSelector","variationFeatureSelectors","featureSelectors","scopeFeatureSelectors","variationBlockStyleNodes","hasLayoutSupport","variationBlockElement","variationBlockElementStyles","elementName","sel","elementSelector","nodesWithSettings","useRootPaddingAwareAlignments","hasBodyStyles","featureDeclarations","cssSelector","duotoneStyles","duotoneDeclarations","styleDeclarations","processCSSNesting","styleVariationName","styleVariationSelector","styleVariations","baseSelector","combinedSelectors","concatFeatureVariationSelectorString","styleVariationDeclarations","pseudoSelectorStyles","pseudoKey","pseudoStyle","pseudoDeclarations","pseudoRule","blockSelector","classSelectorToUse","selectorToUse","getPresetsClasses","getBlockSelectors","variationInstanceId","duotoneSupport","__experimentalLayout","__experimentalDefault","blockStyleVariations","variationSuffix","variationClass","ancestorRegex","addVariationClass","_match","group1","group2","part","getBlockStyleVariationSelector","getSelectorsConfig","featureKey","processedCSS","splitPart","nestedSelector","pseudoPart","withoutPseudoElement","toAppend","appendToSelector","useGlobalStylesOutputWithConfig","_updatedConfig$styles","updatedConfig","customProperties","svgs","at","getPresetsSvgFilters","toSvgFilters","isGlobalStyles","useGlobalStylesOutput","VARIATION_PREFIX","getVariationMatches","OverrideStyles","getVariationStylesWithRefValues","replaceRefs","refValue","isMatch","registeredStyles","getVariationNameFromClass","globalSettings","_mergedConfig$setting","_mergedConfig$styles","_mergedConfig$setting2","useBlockStyleVariation","variationConfig","layoutBlockSupportKey","hasLayoutBlockSupport","useLayoutClasses","defaultBlockLayout","usedLayout","inherit","layoutClassnames","baseClassName","splitBlockName","compoundClassName","blockSupportAndThemeSettings","allowSwitching","allowEditing","allowInheriting","blockSupportAndLayout","blockLayoutType","showInheritToggle","constrainedType","displayControlsForLegacyLayouts","hasContentSizeOrLegacySettings","onChangeLayout","newLayout","PanelBody","LayoutTypeSwitcher","newType","isAdaptiveWidth","BlockWithLayoutStyles","BlockListBlock","blockGapSupport","layoutClasses","selectorPrefix","fullLayoutType","layoutClassNames","__unstableLayoutClassNames","withLayoutStyles","createHigherOrderComponent","blockSupportsLayout","GridRect","columnEnd","rowEnd","containsRect","rect","intersectsRect","getGridTracks","tracks","previousTrack","getClosestTrack","edge","track","getGridInfo","gridElement","gridTemplateColumns","gridTemplateRows","paddingRight","paddingLeft","numRows","numItems","currentColor","inset","globalTips","kbd","randomIndex","Tip","showColors","blockDefault","renderedIcon","Badge","parentNavBlockClientId","minWidth","chevronRight","chevronLeft","BlockIcon","Text","Type","ItemStatus","OperationType","DEFAULT_STATE","queue","queueStatus","blobUrls","Unknown","PauseQueue","ResumeQueue","Add","Cancel","Remove","OperationStart","currentOperation","AddOperations","operations","OperationFinish","additionalData","CacheBlobUrl","blobUrl","RevokeBlobUrls","newBlobUrls","UpdateSettings","getItems","isUploadingByUrl","sourceUrl","isUploadingById","attachmentId","sourceAttachmentId","getAllItems","getItem","isBatchUploaded","batchId","isUploadingToPost","postOrAttachmentId","Upload","getPausedUploadForPost","Paused","isPaused","getBlobUrls","randomUUID","crypto","getRandomValues","rnds8","Uint8Array","rng","byteToHex","rnds","unsafeStringify","UploadError","cause","validateMimeType","isAllowedType","validateMimeTypeForUser","wpAllowedMimeTypes","allowedMimeTypesForUser","wpMimeTypesObject","extensionsString","mime","extension","isAllowedMimeTypeForUser","validateFileSize","addItems","onSuccess","onBatchSuccess","uuidv4","addItem","cancelItem","silent","abortController","removeItem","revokeBlobUrls","cloneFile","File","lastModified","renameFile","StubFile","fileName","fileOrBlob","itemId","ext","convertBlobToFile","createBlobURL","Processing","sourceFile","convert_format","Prepare","processItem","prepareItem","uploadItem","pauseQueue","resumeQueue","finishOperation","revokeBlobURL","register","MediaUploadProvider","WrappedComponent","useSubRegistry","subRegistries","subRegistry","createRegistry","mediaUploadStoreName","getSubRegistry","RegistryProvider","withRegistryProvider","uploadStore","blockEditorStoreName","useBlockSync","controlledBlocks","controlledSelection","onInput","isControlled","pendingChangesRef","incoming","outgoing","subscribedRef","setControlledBlocks","storeBlocks","onInputRef","onChangeRef","isMountedRef","isPersistent","previousAreBlocksDifferent","newIsPersistent","newBlocks","areBlocksDifferent","KeyboardShortcuts","Register","registerShortcut","keyboardShortcutsStore","keyCombination","character","aliases","ExperimentalBlockEditorProvider","mediaUploadSettings","mediaSideload","useMediaUploadSettings","__experimentalMediaProcessing","__internalIsInitialized","SlotFillProvider","passthrough","BlockContextProvider","DEFAULT_ATTRIBUTE","PATTERN_OVERRIDES_SOURCE","BLOCK_BINDINGS_ALLOWED_BLOCKS","isObjectEmpty","canBindBlock","canBindAttribute","attributeName","hasPatternOverridesDefaultBinding","replacePatternOverridesDefaultBinding","supportedAttributes","bindingsWithDefaults","bindingSource","useBlockBindingsUtils","contextClientId","blockClientId","updateBlockBindings","currentBindings","newBindings","binding","newMetadata","removeAllBlockBindings","DEFAULT_BLOCK_CONTEXT","EditWithFilters","save","blockContext","BlockContext","registeredSources","getAllBlockBindingsSources","blockBindings","hasPatternOverrides","computedContext","usesContext","computedAttributes","attributesFromSources","blockBindingsBySource","sourceName","sourceArgs","getValues","attr","setBoundAttributes","nextAttributes","keptAttributes","setValues","hasParentPattern","generatedClassName","secondaryActions","DropdownMenu","moreVertical","noIcons","MultipleUsageWarning","originalBlockClientId","onReplace","PrivateBlockContext","BlockEdit","mayDisplayControls","mayDisplayParentControls","layoutSupport","BlockEditContextProvider","Edit","BlockView","rawContent","renderedContent","actionText","RawHTML","safeHTML","onKeep","onConvert","convertor","convertButtonText","converted","convertedBlock","getSaveContent","difference","originalContent","newContent","diffChars","blockToBlocks","rawHandler","HTML","BlockInvalidWarning","canInsertHTMLBlock","canInsertClassicBlock","setCompare","onCompareClose","convert","toClassic","classicBlock","toHTML","htmlBlock","toBlocks","toRecoveredBlock","recoveredBlock","Modal","onRequestClose","BlockCompare","BlockCrashBoundary","hasError","componentDidCatch","setHtml","getBlockContent","validateBlock","updateQueue","makeQueue","raf","schedule","writeQueue","write","onStartQueue","onStart","onFrameQueue","onFrame","onFinishQueue","onFinish","timeouts","handler","ms","pendingCount","findTimeout","batchedUpdates","throttle","lastArgs","queuedFn","throttled","nativeRaf","impl","performance","frameLoop","advance","ts","loop","prevTs","eachSafely","flush","arg","fun","num","und","ctx","clear","flushCalls","isSSR","createStringInterpolator$1","colors$1","skipAnimation","willAdvance","globals","freeze","createStringInterpolator","startQueue","currentFrame","prevFrame","priority","idle","animation","flushStartQueue","startSafely","startUnsafely","dt","nextFrame","NUMBER","PERCENTAGE","rgb","hsl","hsla","hex3","hex4","hex6","hex8","hue2rgb","q","hslToRgb","parse255","int","parse360","parse1","parsePercentage","colorToRgba","int32Color","normalizeColor","createInterpolator","extrapolate","outputRange","inputRange","extrapolateLeft","extrapolateRight","easing","findRange","inputMin","inputMax","outputMin","outputMax","Infinity","interpolate","$get","for","$observers","hasFluidValue","getFluidValue","getFluidObservers","callFluidObservers","observers","eventObserved","callFluidObserver","FluidValue","setFluidGetter","setHidden","observerAdded","removeFluidObserver","observerRemoved","writable","configurable","numberRegex","colorRegex","unitRegex","rgbaRegex","cssVariableRegex","variableToRgba","parseCSSVariable","namedColorRegex","rgbaRound","p1","p2","p3","p4","keyframes","outputRanges","interpolators","_output$find","missingUnit","once","called","TypeError","warnInterpolate","isAnimatedString","emptyDeps","$node","getAnimated","owner","setAnimated","defineHidden","getPayload","Animated","AnimatedValue","elapsedTime","lastPosition","lastVelocity","v0","durationProgress","getValue","AnimatedString","_string","_toString","goal","TreeContext","dependencies","AnimatedObject","animated","_makePayload","_addToPayload","AnimatedArray","makeAnimated","getAnimatedType","withAnimated","host","hasInstance","isReactComponent","givenProps","givenRef","instanceRef","updateRef","deps","createAnimatedStyle","getAnimatedState","forceUpdate","isMounted","useIsMounted","instance","applyAnimatedValues","PropsObserver","observerRef","dep","usedProps","getComponentProps","cacheKey","getDisplayName","displayName","callProp","matchProp","resolveProp","getDefaultProp","noopTransform","getDefaultProps","DEFAULT_PROPS","RESERVED_PROPS","pause","immediate","delay","onProps","onPause","onResume","onRest","onResolve","trail","expires","enter","leave","onDestroyed","callId","inferTo","forward","getForwardProps","out","computeGoal","isAsyncTo","c1","c2","c3","c4","c5","bounceOut","n1","d1","easings","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInBack","easeOutBack","easeInOutBack","easeInElastic","easeOutElastic","easeInOutElastic","easeInBounce","easeOutBounce","easeInOutBounce","tension","friction","mass","damping","clamp","AnimationConfig","frequency","velocity","restVelocity","precision","progress","bounce","decay","sanitizeConfig","isTensionConfig","emptyArray","Animation","changed","toValues","fromValues","scheduleProps","_props$cancel","paused","resume","delayed","cancelId","getCombinedResult","cancelled","getCancelledResult","getNoopResult","getFinishedResult","finished","asyncTo","prevTo","prevPromise","asyncId","preventBail","bail","bailPromise","bailIfEnded","bailSignal","bailResult","arg1","arg2","BailSignal","skipAnimationSignal","SkipAniamtionSignal","stopAsync","animating","stop","isFrameValue","FrameValue","nextId$1","_priority","_onPriorityChange","_attach","_detach","_onChange","$P","hasAnimated","isAnimating","setActiveBit","active","IS_ANIMATING","setPausedBit","SpringValue","_state","_pendingCalls","_lastCallId","_lastToId","_memoizedDuration","isDelayed","anim","elapsed","bounceFactor","canBounce","isGrowing","isMoving","isBouncing","numSteps","ceil","currVal","finalVal","_stop","_focus","_set","_update","finish","_onStart","_start","_prepareNode","isLoop","mergeActiveFn","sendEvent","isFrozen","checkFinished","_resume","_merge","nextProps","createLoopUpdate","hasToProp","hasFromProp","prevFrom","hasFromChanged","hasToChanged","hasAsyncTo","newConfig","defaultConfig","mergeConfig","isAnimatable","goalType","started","hasValueChanged","ACTIVE_EVENTS","oldNode","loopRet","createUpdate","findDefined","_target$animation$typ","_target$animation","_target$defaultProps$","_target$defaultProps","BATCHED_EVENTS","nextId","Controller","springs","_flush","_initialProps","_lastAsyncId","_active","_changed","_started","_item","_events","_onFrame","spring","prepareKeys","ctrl","flushUpdate","flushUpdateQueue","promises","prepareSprings","createSpring","_excluded$3","SpringContext","excluded","sourceKeys","_objectWithoutPropertiesLoose","inherited","getResult","committed","prevCache","useCache","areInputsEqual","useMemoOne","_context","Consumer","TransitionPhase","Interpolation","calc","_get","_dt","checkIdle","becomeIdle","highest","isIdle","isCustomPropRE","dangerousStyleValue","isUnitlessNumber","attributeCache","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columns","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","lineClamp","orphans","tabSize","widows","zIndex","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","prefixes","prefixKey","domTransforms","pxTransforms","degTransforms","addUnit","isValueIdentity","AnimatedStyle","z","xyz","deg","FluidTransform","unstable_batchedUpdates","transparent","burntsienna","_applyAnimatedValues","_createAnimatedStyle","_getComponentProps","hostConfig","createHost","isFilterElement","scrollLeft","names","hasAttribute","textContent","getAbsolutePosition","offsetTop","offsetLeft","triggerAnimationOnChange","prevRect","adjustScrolling","preserveScrollPosition","matchMedia","isPartOfSelection","finishedMoving","transformOrigin","destination","useFocusFirstElement","textInputs","isTextField","isReverse","focusElement","findNext","isFormElement","placeCaretAtHorizontalEdge","listener","defaultPrevented","toggle","useFocusHandler","parentElement","isContentEditable","BlockDraggableChip","isPattern","fadeWhenDisabled","patternLabel","dragHandle","useEventHandlers","BACKSPACE","DELETE","srcClientIds","srcRootClientId","dataTransfer","effectAllowed","clearData","setData","getSelection","removeAllRanges","domNode","createRoot","pointerEvents","dragElement","setDragImage","frame","frameElement","over","clientX","clientY","useIntersectionObserver","IntersectionObserver","unobserve","useScrollIntoView","isIntersecting","useFlashEditableBlocks","nodesByDocument","restore","prevDraggable","removeAttribute","down","tagName","isInputOrTextArea","__unstableIsHtml","isAligned","blockApiVersion","blockTitle","isSubtreeDisabled","hasOverlay","isPartiallySelected","isReusable","hasChildSelected","isEditingDisabled","hasEditableOutline","isTemporarilyEditingAsBlocks","defaultClassName","canMove","blockLabel","htmlSuffix","ffDragRef","doc","useMovingAnimation","useDisabled","blockEditContext","bindingsStyle","hasNegativeMargin","marginTop","draggable","inert","Block","isHtml","__unstableBlockSource","isLocked","onInsertBlocksAfter","onMerge","_wrapperProps","blockEdit","insertBlocksAfter","getEditWrapperProps","propsA","propsB","newProps","mergeWrapperProps","isSticky","BlockHtml","saveContent","serializeRawBlock","dataAlign","restWrapperProps","updatedWrapperProps","BlockCrashWarning","getBlockProps","applyWithDispatch","ownProps","onInsertBlocks","switchToDefaultOrRemove","defaultBlockType","moveFirstItemUp","changeSelection","wrapperBlockName","isTextualWrapper","targetRootClientId","nextRootClientId","previousRootClientId","replacementBlocks","selectionEnabled","selectedProps","_isSectionBlock","blockWithoutAttributes","_hasBlockSupport","hasLightBlockWrapper","previewContext","_isSelected","isAncestorOfSelectedBlock","blocksWithSameName","isInvalid","privateContext","ZWNBSP","DefaultBlockAppender","showPrompt","isManualGrid","isEmpty","bodyPlaceholder","decodeEntities","onAppend","Inserter","isAppender","__experimentalIsQuick","DefaultAppender","ButtonBlockAppender","BlockListAppender","CustomAppender","TagName","isDragOver","contentEditable","previousClientId","nextClientId","popoverRecomputeCounter","forcePopoverRecompute","isVisible","_rootClientId","previousElement","nextElement","isVertical","previousRect","nextRect","targetRect","DOMRect","popoverScrollRef","animateVariants","hide","scaleY","show","reducedMotion","InsertionPointOpenRef","InbetweenInsertionPointPopover","openRef","isInserterShown","isDistractionFree","isZoomOutMode","_previousClientId","_nextClientId","disableMotion","lineVariants","scale","rest","hover","inserterVariants","BlockPopoverInbetween","whileHover","whileTap","onHoverEnd","onSelectOrClose","InsertionPoint","isBlockListEmpty","blockInsertionPoint","BlockDropZonePopover","useInBetweenInserter","isInBetweenInserterDisabled","onMouseMove","TEXT_NODE","captureToolbars","__experimentalCaptureToolbars","blockElRect","firstElementChild","hasFixedToolbar","elementRect","useBlockSelectionClearer","BlockSelectionClearer","pendingSettingsUpdates","createShallowMemo","useShallowMemo","parseDropEvent","srcIndex","getData","useOnBlockDrop","targetBlockIndex","insertOrReplaceBlocks","clientIdsToReplace","groupInnerBlocks","areAllImages","galleryBlock","wrappedBlocks","moveBlocks","sourceClientIds","sourceRootClientId","insertIndex","sourceBlocks","_onDrop","dropType","blocksToInsert","sourceBlockIndex","isAtSameLevel","draggedBlockCount","onBlockDrop","_onFilesDrop","transformation","findTransform","getBlockTransforms","_onHTMLDrop","pasteHandler","onHTMLDrop","getFilesFromDataTransfer","getDistanceToNearestEdge","point","allowedEdges","candidateDistance","candidateEdge","distance","isHorizontal","pointLateralPosition","pointForwardPosition","edgeStart","edgeEnd","edgeForwardPosition","edgeLateralPosition","getDistanceFromPointToEdge","isPointContainedByRect","THRESHOLD_DISTANCE","MINIMUM_HEIGHT_FOR_THRESHOLD","MINIMUM_WIDTH_FOR_THRESHOLD","isDropTargetValid","draggedBlockNames","areBlocksAllowed","allowedBlockNames","targetMatchesDraggedBlockParents","allowedParentName","isInsertionPoint","targetToCheck","HTMLElement","EMPTY_OBJECT","providesContext","contextName","useBlockContext","BlockListItemsMemo","BlockListItems","UncontrolledInnerBlocks","prioritizedInserterBlocks","__experimentalDefaultBlock","__experimentalDirectInsert","wrapperRef","templateInsertUpdatesSelection","__experimentalAppenderTagName","renderAppender","parentLock","_allowedBlocks","_prioritizedInserterBlocks","_templateLock","newSettings","useNestedSettingsUpdate","existingTemplateRef","isCancelled","currentInnerBlocks","shouldApplyTemplate","hasTemplateChanged","nextBlocks","useInnerBlockTemplateSync","defaultLayoutBlockSupport","memoedLayout","ControlledInnerBlocks","ForwardedInnerBlocks","innerBlocksProps","useInnerBlocksProps","__unstableDisableLayoutClassNames","__unstableDisableDropZone","dropZoneElement","selected","isDropZoneDisabled","_isDropZoneDisabled","blockDropZoneRef","parentBlockClientId","dropTarget","setDropTarget","useThrottle","draggedBlockClientIds","targetParents","blocksData","getIsUnmodifiedDefaultBlock","getElementById","blockOrientation","dropTargetPosition","nearestIndex","insertPosition","minDistance","parentBlockOrientation","rootBlockIndex","isRightToLeft","sideDistance","sideEdge","isPointInsideRect","isPointWithinTopAndBottomBoundariesOfRect","adjacentIndex","isNearestBlockUnmodifiedDefaultBlock","isAdjacentBlockUnmodifiedDefaultBlock","getDropTargetPosition","isTargetIndexEmptyDefaultBlock","canInsertGalleryBlock","areGroupableBlocks","groupBlockVariations","canInsertRow","insertionPointClientId","useDropZone","onDrop","onDragOver","onDragLeave","relatedTarget","useBlockDropZone","InnerBlocks","getInnerBlocksProps","BaseDefaultBlockAppender","showSeparator","isFloating","onAddBlock","isToggle","BaseButtonBlockAppender","Content","KEY_DOWN_ELIGIBLE_KEY_CODES","RIGHT","LEFT","useMouseMoveTypingReset","lastClientX","lastClientY","stopTypingOnMouseMove","useTypingObserver","_isTyping","ref1","ref2","timerId","stopTypingOnNonTextField","stopTypingOnEscapeKey","ESCAPE","stopTypingOnSelectionUncollapse","startTypingInTextField","shiftKey","isKeyDownEligibleForStartTyping","ZoomOutSeparator","isDraggedOver","setIsDraggedOver","blockInsertionPointVisible","blocksBeingDragged","isReducedMotion","hasTopInsertionPoint","hasBottomInsertionPoint","blockBeingDraggedClientId","isCurrentBlockBeingDragged","blockBeingDraggedIndex","blockBeingDraggedPreviousSiblingClientId","ease","pendingBlockVisibilityUpdatesPerRegistry","isOutlineMode","isFocusMode","outlineMode","delayedBlockVisibilityUpdates","useDebounce","trailing","intersectionObserver","Observer","StopEditingAsBlocksOnOutsideSelect","isBlockOrDescendantSelected","BlockList","Items","hasAppender","hasCustomAppender","selectedBlocks","shouldRenderAppender","_isZoomOut","_order","showRootAppender","hasSelectedRoot","AsyncModeProvider","isFullSelection","useMultiSelection","getClosestTabbable","containerElement","onlyVertical","focusableNodes","isTabbableIndex","nodeRect","useArrowNav","verticalRect","ctrlKey","altKey","metaKey","isUp","isDown","isLeft","isRight","isNav","hasModifier","isNavEdge","isVerticalEdge","isHorizontalEdge","isNavigationCandidate","computeCaretRect","isReverseDir","keepCaretInsideBlock","closestTabbable","isClosestTabbableABlock","placeCaretAtVerticalEdge","useSelectAll","useShortcutEventMatch","isEntirelySelected","blockClientIds","setContentEditableWrapper","useDragSelection","anchorElement","rafId","lastMouseDownTarget","onMouseUp","rangeCount","getRangeAt","commonAncestorContainer","clonedRange","cloneRange","addRange","onMouseLeave","buttons","cancelAnimationFrame","getRichTextElement","useSelectionObserver","onSelectionChange","startNode","anchorNode","anchorOffset","childNodes","extractSelectionStartNode","endNode","focusNode","focusOffset","isSelectionForward","_focusNode$previousSi","previousSibling","extractSelectionEndNode","isClickShift","selectedClientId","clickedClientId","focusNodeIsNonSelectable","startPath","endPath","findDepth","richTextElementStart","richTextElementEnd","_richTextDataStart$st","_richTextDataEnd$star","richTextDataStart","__unstableIsEditableTree","richTextDataEnd","dataset","wpBlockAttributeKey","useClickSelection","useInput","onBeforeInput","selectedAttributeValue","regExp","__deprecatedOnSplit","onCompositionStart","useNotifyCopy","createSuccessNotice","eventType","notice","getPasteEventData","clipboardData","plainText","startIdx","endIdx","startStr","removeWindowsFragments","metaTag","removeCharsetMetaTag","IMAGE_TAG","IMG_WITH_LOCAL_SRC","shouldDismissPastedFiles","requiresWrapperOnCopy","setClipboardBlocks","_blocks","wrapperBlockClientId","serialized","serialize","useClipboardHandler","notifyCopy","documentHasUncollapsedSelection","documentHasSelection","isSelectionMergeable","shouldHandleWholeBlocks","expandSelectionIsNeeded","canUserUseUnfilteredHTML","isFullySelected","fromTransforms","rootBlockName","switchedBlocks","switchedBlock","useWritingFlow","focusCaptureBeforeRef","focusCaptureAfterRef","noCaptureRef","onFocusCapture","canvasElement","sectionBlocks","isBefore","compareDocumentPosition","DOCUMENT_POSITION_FOLLOWING","tabbables","isShift","direction","nextTabbable","currentBlock","isElementPartOfSelectedBlock","preventScroll","onFocusOut","preventScrollOnTab","useTabNav","forwardedRef","compatibilityStyles","calculateScale","frameSize","containerWidth","maxContainerWidth","scaleContainerWidth","bubbleEvent","Constructor","contentDocument","MouseEvent","newEvent","useBubbleEvents","iframeDocument","eventTypes","handlers","constructorName","getPrototypeOf","Iframe","readonly","resolvedAssets","setIframeDocument","bodyClasses","setBodyClasses","clearerRef","writingFlowRef","setRef","iFrameDocument","preventFileDropDefault","interceptLinkClicks","hash","_load","onLoad","dir","compatStyle","styleSheets","styleSheet","cssRules","ownerNode","matchFromRules","_cssRules","selectorText","conditionText","__cssRules","mainStylesCssId","mainStylesElement","inlineStylesCssId","inlineStylesElement","contentResizeListener","containerResizeListener","contentHeight","useResizeObserver","containerHeight","initialContainerWidthRef","isAutoScaled","startAnimationRef","animationRef","scaleValue","transitionFromRef","transitionToRef","startZoomOutAnimation","scrollTopNext","transitionFrom","transitionTo","prevScale","prevFrameSize","translate","getAnimationKeyframes","finishZoomOutAnimation","removeProperty","previousIsZoomedOut","trigger","tempTransitionFrom","tempTransitionTo","clientHeight","prevScrollHeight","computeScrollHeightNext","prevContainerHeight","prevScrollTop","maxScrollTop","computeScrollTopNext","onfinish","useScaleCanvas","disabledRef","bodyRef","cleanup","_src","createObjectURL","Blob","revokeObjectURL","shouldRenderFocusCaptureElements","iframe","KeyboardEvent","createPortal","TOKENS","class","combinator","universal","TRIM_TOKENS","getArgumentPatternByType","gobbleParens","nesting","char","STRING_PATTERN","ESCAPE_PATTERN","replacements","repeat","tokenizeBy","changedTokens","tokenOffset","flatten","cacheByWrapperSelector","ROOT_SELECTOR_TOKENS","wrapperSelector","transformOptions","ignoredSelectors","baseURL","_transformOptions$ign","excludedSelectors","prefixSelector","prefixedSelector","excludedSelector","tokenized","parsel","findLastIndex","tokenizedPrefix","listOrNode","prefixRootSelector","rebaseUrl","transformStyle","useDarkThemeBodyClassName","canvas","tempCanvas","transformedStyles","transformedSvgs","_styles","overrideWithId","overflow","dangerouslySetInnerHTML","__html","MemoizedBlockList","MAX_HEIGHT","EMPTY_ADDITIONAL_STYLES","ScaledBlockPreview","viewportWidth","editorStyles","Disabled","bodyElement","EditorStyles","AutoBlockPreview","blockPreviewQueue","createQueue","MemoizedBlockPreview","__experimentalMinHeight","__experimentalPadding","originalSettings","renderedBlocks","AutoHeightBlockPreview","Async","setShouldRender","flushSync","useBlockPreview","_example$viewportWidt","getBlockFromExample","BlockPreview","BlockCard","isFirst","htmlProps","propsWithTabIndex","InserterDraggableBlocks","blockTypeIcon","patternBlock","draggableBlocks","Draggable","__experimentalTransferDataType","transferData","__experimentalDragComponent","onDraggableStart","onDraggableEnd","onHover","isDraggable","isDraggingRef","itemIconStyle","createBlocksFromInnerBlocksTemplate","InserterListboxItem","isAppleOS","onMouseEnter","shouldSpeak","setShouldSpeak","Group","chunk","chunks","BlockTypesList","listId","InserterListboxGroup","InserterListboxRow","InserterListItem","getBlockMenuDefaultClassName","rowId","useBlockTypesState","onInsert","isQuick","collections","getCategories","getCollections","shouldFocusBlock","destinationClientId","_getBlockType$title","insertedBlock","focusShift","focusWrap","BlockTypesTabPanel","onSelectItem","showMostUsedBlocks","suggestedItems","uncategorizedItems","itemsPerCollection","namespace","getBlockNamespace","currentlyRenderedCategories","useAsyncList","didRenderAllCategories","collectionEntries","currentlyRenderedCollections","InserterPanel","categoryItems","collection","collectionItems","InserterNoResults","itemsForCurrentRoot","itemsRemaining","InserterListbox","PatternCategoriesList","selectedCategory","patternCategories","onClickCategory","PatternsExplorerSearch","searchValue","setSearchValue","SearchControl","Pagination","currentPage","numPages","changePage","totalItems","WithToolTip","BlockPattern","showTitlesAsTooltip","setIsDragging","patternBlocks","clonedBlock","BlockPatternPlaceholder","onClickPattern","pagingProps","activeCompositeId","setActiveCompositeId","activePattern","setActivePattern","firstCompositeItemId","handleClickPattern","activeId","setActiveId","BlockPatternsPaging","getIndex","destinationRootClientId","destinationIndex","parentIndex","insertionIndex","selectBlockOnInsert","_destinationIndex","_destinationRootClientId","shouldForceFocusBlock","blockLength","onToggleInsertionPoint","allowedDestinationRootClientId","usePatternsState","userPatternCategories","allCategories","userCategory","existingCategory","lowerCase","DEFAULT_SPLIT_REGEXP","DEFAULT_STRIP_REGEXP","re","defaultGetName","defaultGetTitle","defaultGetDescription","defaultGetKeywords","defaultGetCategory","defaultGetCollection","splitRegexp","stripRegexp","extractedWords","normalizedStrings","extractWords","delimiter","noCase","normalizeString","getNormalizedSearchTerms","searchBlockItems","searchInput","searchItems","getCategory","getCollection","rankedItems","getItemSearchRank","rank","rank1","rank2","getName","getTitle","getDescription","getKeywords","normalizedSearchInput","normalizedTitle","terms","unmatchedTerms","unprocessedTerms","term","unprocessedTerm","removeMatchingTerms","PAGE_SIZE","usePatternsPaging","currentCategoryPatterns","currentCategory","scrollContainerRef","currentFilter","setCurrentPage","previousCategory","previousFilter","pageIndex","categoryPatterns","scrollTo","PatternsListHeader","filterValue","filteredBlockPatternsLength","onModalClose","container","useInsertionPoint","registeredPatternCategories","patternCategory","filteredBlockPatterns","_pattern$categories$s","hasKnownCategory","resultsFoundMessage","previousSearchValue","setPreviousSearchValue","hasItems","BlockPatternsList","usePatternCategories","populatedCategories","localeCompare","cat","hasRegisteredCategory","PatternsExplorer","initialCategory","setSelectedCategory","PatternExplorerSidebar","PatternList","restProps","isFullScreen","ScreenHeader","View","paddingX","paddingY","Navigator","BackButton","MobileTabNavigation","initialPath","Screen","ItemGroup","isAction","FlexBlock","getShouldDisableSyncFilter","getShouldHideSourcesFilter","PATTERN_SOURCE_MENU_OPTIONS","PatternsFilter","setPatternSyncFilter","setPatternSourceFilter","patternSyncFilter","patternSourceFilter","currentPatternSourceFilter","shouldDisableSyncFilter","shouldHideSourcesFilter","patternSyncMenuOptions","fill","MenuItemsChoice","choices","newSourceFilter","Link","PatternCategoryPreviews","allPatterns","availableCategories","catName","onSetPatternSyncFilter","onSetPatternSourceFilter","patternFilter","onSelectCategory","defaultTransition","previousSelectedCategory","selectedTabId","activeTabId","firstTabId","selectOnMove","categoryId","onActiveTabIdChange","transitionEnd","closed","showPatternsExplorer","setShowPatternsExplorer","isMobile","CategoryTabs","PatternsExplorerModal","mediaTypeTag","video","audio","getBlockAndPreviewFromMedia","mediaSrc","PreviewTag","preview","previewUrl","ALLOWED_MEDIA_TYPES","MEDIA_OPTIONS_POPOVER_PROPS","MediaPreviewOptions","getReportUrl","reportUrl","external","InsertExternalImageModal","MediaPreview","showExternalUploadModal","setShowExternalUploadModal","isHovered","setIsHovered","isInserting","setIsInserting","onMediaInsert","previewBlock","response","blob","img","rendered","mediaList","sourceId","MediaCategoryPanel","search","setSearch","debouncedSearch","useDebouncedInput","query","setMediaList","setIsLoading","lastRequestRef","_media","useMediaResults","per_page","baseCssClass","searchLabel","search_items","MediaList","mediaCategories","setCategories","canInsertImage","canInsertVideo","canInsertAudio","_categories","categoriesHaveMedia","canInsertMediaType","useMediaCategories","mediaCategory","__unstableInserterMenuExtension","orderInserterBlockItems","aName","bName","aIndex","bIndex","onHoverPattern","__experimentalInsertionIndex","maxBlockPatterns","maxBlockTypes","showBlockDirectory","prioritizePatterns","prioritizedBlocks","blockTypeCategories","blockTypeCollections","onSelectBlockType","maxBlockTypesToShow","filteredBlockTypes","orderedItems","currentShownBlockTypes","blocksUI","patternsUI","selectedTab","closeButtonLabel","closeSmall","panelRef","panel","useZoomOut","enabled","controlZoomLevelRef","isEnabledRef","NOOP","PrivateInserterMenu","showInserterHelpPanel","__experimentalFilterValue","onPatternCategorySelection","__experimentalInitialTab","__experimentalInitialCategory","hasSectionRootClientId","setFilterValue","delayedFilterValue","hoveredItem","setHoveredItem","selectedPatternCategory","setSelectedPatternCategory","setPatternFilter","selectedMediaCategory","setSelectedMediaCategory","isLargeViewport","setSelectedTab","blockTypesTabRef","onInsertPattern","onClickPatternCategory","showPatternPanel","showMediaPanel","inserterSearch","InserterSearchResults","blocksTab","BlockTypesTab","Tips","patternsTab","BlockPatternsTab","mediaTab","MediaTab","tabsRef","TabbedSidebar","InserterPreviewPanel","QuickInserter","hasSearch","setInserterIsOpened","__experimentalSetIsInserterOpened","showSearch","onBrowseAll","defaultRenderToggle","hasSingleBlockType","tooltipPosition","InserterMenu","insertOnlyAllowedBlock","expandOnMobile","shouldDirectInsert","allowedBlockType","blockToInsert","adjacentAttributes","previousBlock","parentBlock","lastInnerBlock","getAdjacentBlockAttributes","getInsertionIndex","ifCondition","isToggleButton","ButtonBlockerAppender","GridVisualizer","GridVisualizerGrid","gridInfo","setGridInfo","isDroppingAllowed","setIsDroppingAllowed","resizeCallback","borderBoxSpy","contentBoxSpy","onGlobalDrag","onGlobalDragEnd","ManualGridVisualizer","GridVisualizerCell","highlightedRect","setHighlightedRect","gridItemStyles","occupiedRects","rects","_style$layout","_highlightedRect$cont","isCellOccupied","GridVisualizerDropZone","GridVisualizerAppender","useGridVisualizerDropZone","validateDrag","onDragEnter","srcClientId","useDropZoneWithValidation","prevHighlightedRect","GridItemResizer","rootBlockElement","GridItemResizerInner","resizeDirection","setResizeDirection","enableSide","setEnableSide","blockClientRect","rootBlockClientRect","justification","ResizableBox","enable","boundsByDirection","onPointerDown","pointerId","setPointerCapture","onResizeStart","onResizeStop","boxElement","columnGap","rowGap","gridColumnTracks","gridRowTracks","GridItemMovers","_layout$columnStart","_layout$rowStart","_layout$columnSpan","_layout$rowSpan","GridItemMover","chevronUp","chevronDown","LAYOUT_CHILD_BLOCK_PROPS_REFERENCE","GridTools","resizerBounds","setResizerBounds","updateLayout","shouldRenderChildLayoutStyles","parentColumnValue","parentColumnUnit","numColsToBreakAt","defaultGapValue","containerQueryValue","minimumContainerQueryValue","gridColumnValue","isLockedByParent","isEditingAsBlocks","isContentLocked","stopEditingAsBlockCallback","META_ATTRIBUTE_NAME","blockTypeSettings","ignoredHookedBlocks","hookedBlocksForCurrentBlock","blockHooks","hookedBlockClientIds","_hookedBlockClientIds","relativePosition","hookedBlock","candidate","groupedHookedBlocks","initialOpen","vendor","insertBlockIntoDesignatedLocation","innerBlocksLength","Menu","BlockBindingsPanelMenuContent","fieldsList","getBlockBindingsSources","currentKey","attributeType","_attributeType","fields","GroupLabel","RadioItem","ItemLabel","ItemHelpText","Separator","BlockBindingsAttribute","sourceProps","getBlockBindingsSource","isSourceInvalid","truncate","isDestructive","ReadOnlyBlockBindingsPanelItems","EditableBlockBindingsPanelItems","TriggerButton","BlockBindingsPanel","bindableAttributes","getBindableAttributes","_fieldsList","canUpdateBlockBindings","getFieldsList","sourceList","filteredBindings","readOnly","isBordered","isSeparated","placeBlock","gridColumnCount","blockColumnSpan","blockRowSpan","startColumn","startRow","candidateRect","GridLayoutSync","gridLayout","selectedBlockLayout","_getBlockAttributes$l","selectedBlockRect","previouslySelectedBlockRect","previousIsManualPlacement","previousBlockOrder","_attributes$style$lay","bottomMostRow","_attributes$style$lay2","hasEmptyLayoutAttribute","_attributes$style$lay3","useGridLayoutSync","__experimentalLabel","addGridVisualizerToBlockEdit","getBorderClassesAndStyles","useBorderProps","borderProps","borderColorObject","getShadowClassesAndStyles","getColorClassesAndStyles","useColorProps","userGradients","colorProps","backgroundColorObject","textColorObject","getSpacingClassesAndStyles","getTypographyClassesAndStyles","typographyStyles","fontFamilyClassName","useCachedTruthy","cachedValue","setCachedValue","withBlockEditHooks","OriginalBlockEdit","neededProps","createBlockEditFilter","customClassName","contentLockUI","blockBindingsPanel","withBlockListBlockHooks","allWrapperProps","createBlockListBlockFilter","blockStyleVariation","accu","neededAttributes","upperFirst","firstLetter","withCustomColorPalette","colorsArray","withEditorColorPalette","allColors","createColorHOC","colorTypes","withColorPalette","colorMap","colorType","setters","createSetters","colorUtils","getMostReadableColor","colordColor","getColorContrast","maxContrast","settersAccumulator","colorAttributeName","upperFirstColorAttributeName","customColorAttributeName","createSetColor","previousState","colorContext","previousColorObject","previousColor","createCustomColorsHOC","withColors","BaseFontSizePicker","DEFAULT_FONT_SIZES","fontSizeNames","fontSizeAttributeNames","fontSizeAttributeNamesAccumulator","fontSizeAttributeName","customFontSizeAttributeName","createSetFontSize","didAttributesChange","newStateAccumulator","fontSizeAttributeValue","triggerPrefix","useItems","selectedBlockId","activeBlockVariation","filteredItems","blockItem","allowContext","getOptionCompletion","inserterItem","apiFetch","addQueryArgs","letters","order_by","getOptionKeywords","getOptionLabel","subtype","useCompleters","completers","filteredCompleters","linkAutocompleter","blockAutocompleter","hasFilter","completer","Autocomplete","fullscreen","AlignmentMatrixControl","hasFocusBorder","useBlockDisplayTitle","maximumLength","omission","BlockTitle","rootLabelText","hasSelection","rootLabel","blockRef","blockEditor","editor","_Array$from$find","_editorCanvas$closest","editorCanvas","querySelectorAll","contentWindow","getEditorRegion","useBlockOverlayActive","COMMON_PROPS","RESTRICTED_HEIGHT_PROPS","getProps","contentElement","selectedBlockElement","toolbarHeight","blockRect","topOfContentElementInViewport","viewportHeight","restrictedTopArea","hasSpaceForToolbarAbove","isBlockTallerThanViewport","useBlockToolbarPopoverProps","setToolbarHeight","setProps","popoverRef","popoverNode","updateProps","contentView","resizeObserver","addEventHandler","blockView","removeEventHandler","useSelectedBlockToolProps","selectedBlockProps","blockParentsClientIds","capturingClientId","isInsertionPointVisible","EmptyBlockInserter","BlockDraggable","appendToOwnerDocument","cloneClassname","elementId","dragComponent","visibleInserter","_getBlockType","startScrolling","scrollOnDragOver","stopScrolling","dragStartYRef","velocityYRef","scrollParentYRef","scrollEditorIntervalRef","clearInterval","setInterval","newTop","scroll","scrollParentHeight","offsetDragStartPosition","offsetDragPosition","moveableDistance","dragDistance","distancePercentage","PIXELS_PER_SECOND_PER_PERCENTAGE","useScrollWhenDragging","editorRoot","throttledOnDragOver","targetClientId","dropTargetValid","targetRootBlockName","rootAllowedBlocks","getMovementDirection","moveDirection","getBlockMoverDescription","selectedCount","isLast","movementDirection","getMultiBlockMoverDescription","getArrowIcon","getMovementDirectionLabel","BlockMoverButton","moverOrientation","normalizedClientIds","blocksCount","blockRootClientId","firstBlockIndex","lastBlockIndex","isFirstBlock","isLastBlock","blockListOrientation","moverFunction","BlockMoverUpButton","BlockMoverDownButton","hideDragHandle","isBlockMoverUpButtonDisabled","isBlockMoverDownButtonDisabled","_getBlockAttributes","draggableProps","ToolbarItem","DEBOUNCE_TIMEOUT","useDebouncedShowGestures","isFocused","highlightParent","debounceTimeout","timeoutRef","nextIsFocused","clearTimeoutRef","debouncedShowGestures","debouncedHideGestures","shouldHideGestures","useShowHoveredOrFocusedGestures","setIsFocused","registerRef","isFocusedWithin","handleOnFocus","handleOnBlur","BlockParentSelector","parentSection","nodeRef","showHoveredOrFocusedGestures","PreviewBlockPopover","BlockVariationTransformationItem","setHoveredTransformItemName","BlockVariationTransformations","transformations","hoveredTransformItemName","RestTransformationItems","restTransformations","BlockTransformationItem","BlockTransformationsMenu","possibleBlockTransformations","possibleBlockVariationTransformations","onSelectVariation","priorityTextTransformations","priorityContentTransformationBlocks","priorityTextTransformsNames","groupedPossibleTransforms","nextName","useGroupedTransforms","hasBothContentTransformations","restTransformItems","replaceActiveStyle","activeStyle","getDefaultStyle","useStylesForBlocks","onSwitch","stylesToRender","getRenderedStyles","potentialStyleName","getActiveStyle","genericPreviewBlock","useGenericPreviewBlock","styleClassName","BlockStylesMenuItems","menuItemText","limit","ellipsizeMode","BlockStylesMenu","hoveredBlock","getMatchingBlockByName","selectedBlockName","consumedBlocks","transformMatchingBlock","retainedBlockAttributes","getRetainedBlockAttributes","contentAttributes","getBlockAttributesNamesByRole","_accumulator","PreviewPatternsPopover","transformedBlocks","statePatterns","showTransforms","setShowTransforms","useTransformedPatterns","_pattern","getPatternTransformedBlocks","_patternBlocks","BlockSwitcherDropdownMenuContents","hasBlockStyles","isUsingBindings","blockVariationTransformations","useBlockVariationTransforms","selectForMultipleBlocks","insertedBlocks","isSingleBlock","isTemplate","hasPossibleBlockTransformations","hasPossibleBlockVariationTransformations","hasPatternTransformation","hasBlockOrBlockVariationTransforms","connectedBlockDescription","PatternTransformationsMenu","onPatternTransform","onBlockTransform","onBlockVariationTransform","BlockSwitcher","hasContentOnlyLocking","invalidBlocks","firstBlockName","_isSingleBlockSelected","editingMode","_icon","_hasTemplateLock","isSelectionOfSameType","copy","blockSwitcherLabel","blockIndicatorText","blockSwitcherDescription","menuProps","__unstableBlockToolbarLastItem","STYLE_ATTRIBUTES","getStyleAttributes","sourceBlock","recursivelyUpdateBlockAttributes","targetBlocks","usePasteStyles","clipboard","readText","__unstableSkipAutop","hasSerializedBlocks","copiedBlocks","BlockActions","__experimentalUpdateSelection","canInsertDefaultBlock","canInsertBlock","canCopyStyles","canDuplicate","pasteStyles","onDuplicate","onInsertBefore","onInsertAfter","onGroup","onUngroup","onCopy","onPasteStyles","__unstableBlockSettingsMenuFirstItem","useConvertToGroupButtonProps","blocksSelection","firstSelectedBlock","_isUngroupable","ConvertToGroupButton","displayShortcut","primary","onConvertToGroup","onConvertFromGroup","useBlockLock","canEdit","canLock","ALLOWS_EDIT_LOCKING","getTemplateLockValue","BlockLockModal","setLock","allowsEditLocking","hasTemplateLock","applyTemplateLock","setApplyTemplateLock","isAllChecked","overlayClassName","indeterminate","prevLock","lockIcon","unlockIcon","BlockLockMenuItem","isModalOpen","toggleModal","lockOutline","BlockModeToggle","codeEditingEnabled","ModifyContentLockMenuItem","blockEditorActions","BlockRenameModal","editedBlockName","setEditedBlockName","originalBlockName","hasOverridesWarning","nameHasChanged","nameIsOriginal","nameIsEmpty","testString","isNameValid","newName","BlockRenameControl","renamingBlock","setRenamingBlock","BlockSettingsMenuControls","BlockSettingsMenuControlsSlot","isContentOnly","canRename","showLockButton","showRenameButton","convertToGroupButtonProps","showConvertToGroupButton","BlockParentSelectorMenuItem","isSmallViewport","menuItemRef","gesturesProps","CopyMenuItem","copyMenuItemLabel","BlockSettingsDropdown","__experimentalSelectBlock","currentClientId","_firstParentClientId","parentBlockName","shortcuts","getShortcutRepresentation","cut","duplicate","hasSelectedBlocks","updateSelectionAfterDuplicate","clientIdsPromise","updateSelectionAfterRemove","blockToFocus","shouldUpdateSelection","parentBlockIsSelected","localOpen","shouldShowBlockParentMenuItem","BlockHTMLConvertButton","CommentIconSlotFill","Children","CommentIconToolbarSlotFill","BlockLockToolbar","hasLockButtonShownRef","layouts","canInsertStack","canInsertGrid","onConvertToRow","onConvertToStack","onConvertToGrid","BlockEditVisuallyButton","canEditVisually","getAllFocusableToolbarItemsIn","hasFocusWithin","NavigableToolbar","focusEditorOnEscape","shouldUseKeyboardFocusShortcut","__experimentalInitialIndex","initialIndex","__experimentalOnIndexChange","onIndexChange","toolbarRef","isAccessibleToolbar","setIsAccessibleToolbar","determineIsAccessibleToolbar","onlyToolbarItem","childList","subtree","useIsAccessibleToolbar","defaultIndex","initialFocusOnMount","focusToolbar","firstTabbable","focusFirstTabbableIn","useShortcut","focusToolbarViaShortcut","navigableToolbarRef","handleKeyDown","useToolbarFocus","Toolbar","useHasBlockToolbar","MAX_PATTERNS_TO_SHOW","ChangeDesign","currentPatternName","_patterns","sameCategoryPatternsWithSingleWrapper","isCorePattern","_pattern$blocks","styleIcon","stroke","activeStyleBackground","handleStyleSwitch","currentIndex","nextStyle","PrivateBlockToolbar","isDefaultEditingMode","toolbarKey","shouldShowVisualToolbar","showParentSelector","showShuffleButton","showSlots","showGroupButtons","showLockButtons","showSwitchSectionStyleButton","isNavigationModeEnabled","_isDefaultEditingMode","_blockName","isVisual","_isUsingBindings","_hasParentPattern","toolbarWrapperRef","isMultiToolbar","innerClasses","BlockMover","BlockGroupToolbar","SwitchSectionStyle","__unstableBlockNameContext","BlockSettingsMenu","BlockToolbar","BlockToolbarPopover","initialToolbarItemIndexRef","isToolbarForcedRef","clientIdToPositionOver","isReady","setIsReady","insertionPointVisible","ZoomOutModeInserterButton","BlockTools","showEmptyBlockSideInserter","showBlockToolbarPopover","editorMode","isEmptyDefaultBlock","_showEmptyBlockSideInserter","blockToolbarRef","blockToolbarAfterRef","ZoomOutModeInserters","getTransformCommands","invalidSelection","commands","close","useBlockCommands","useCommandLoader","_isGroupable","command","EDITOR_STYLE_TRANSFORM_OPTIONS","ExperimentalBlockCanvas","shouldIframe","contentRefProp","iframeProps","isTabletViewport","resetTypingRef","localRef","zoomOutIframeProps","WritingFlow","ColorSelectorSVGIcon","ColorSelectorIcon","renderToggleComponent","TextColor","BackgroundColor","BlockColorsStyleSelector","ListViewContext","useListViewContext","AriaReferencedText","Appender","nestingLevel","setInsertedBlock","hideInserter","insertedBlockTitle","maybeInsertedBlock","AnimatedTreeGridRow","TreeGridRow","ListViewLeaf","isDragged","enableAnimation","mergedRef","positionInSet","setSize","isExpanded","ListViewExpander","forceToggle","IMAGE_GETTERS","core/image","core/cover","backgroundType","core/media-text","mediaUrl","mediaAlt","core/gallery","images","onContextMenu","onToggleExpanded","ariaDescribedBy","shouldShowLockIcon","getImages","getImagesFromBlock","useListViewImages","pinSmall","ListViewBlockContents","siblingBlockCount","AdditionalBlockContent","draggableClientIds","ListViewBlockSelectButton","focusListItem","focusClientId","treeGridElement","getFocusElement","ListViewBlock","displacement","isAfterDraggedBlocks","isNesting","isBranchSelected","showBlockMovers","isSyncedBranch","cellRef","rowRef","settingsRef","settingsAnchorRect","setSettingsAnchorRect","isFirstSelectedBlock","isLastSelectedBlock","debouncedToggleBlockHighlight","allowRightClickOverrides","showBlockActions","expand","collapse","collapseAll","listViewInstanceId","expandedState","treeGridElementRef","getBlocksToUpdate","isUpdatingSelectedBlocks","firstBlockRootClientId","blocksToUpdate","selectEditorBlock","updateFocusAndSelection","shouldSelectBlock","toggleExpanded","settingsPopoverAnchor","clearSettingsAnchorRect","rowItemRef","isSingleSelection","rowRect","scrollContainerRect","useListViewScrollIntoView","blockPositionDescription","getBlockPositionDescription","siblingCount","blockPropertiesDescription","getBlockPropertiesDescription","hasRenderedMovers","moverCellClassName","listViewBlockSettingsClassName","colSpan","dropdownClientIds","currentlyEditingBlockInCanvas","isDeleteKey","_getPreviousBlockClie","blocksToDelete","blockToUpdate","updatedBlocks","newlySelectedBlocks","blockParents","TreeGridCell","withoutGridItem","TreeGridItem","disableOpenOnArrowDown","countBlocks","draggedClientIds","isExpandedByDefault","_expandedState$block$","countReducer","_expandedState$block$2","ListViewBranch","listPosition","fixedListWindow","shouldShowInnerBlocks","showAppender","showAppenderProp","parentBlockInformation","syncedBranch","canParentExpand","blockDropPosition","blockDropTargetIndex","firstDraggedBlockIndex","blockIndexes","nextPositionRef","filteredBlocks","_expandedState$client","thisBlockIndex","getDragDisplacementValues","itemInView","blockInView","updatedPath","hasNestedBlocks","shouldExpand","isClientIdSelected","isSelectedBranch","showBlock","treeGridCellProps","ListViewDropIndicatorPreview","draggedBlockClientId","listViewRef","blockDropTarget","dropPosition","targetElement","rtl","getDropIndicatorWidth","targetElementRect","windowScroll","distanceBetweenContainerAndTarget","scrollContainerWidth","horizontalScrollOffsetStyle","ariaLevel","_ariaLevel","hasAdjacentSelectedBranch","scrollbarWidth","NESTING_LEVEL_INDENTATION","getNextNonDraggedBlock","nextBlockData","isDraggedBlock","ALLOWED_DROP_EDGES","getListViewDropTarget","candidateBlockData","candidateBlockIndex","blockData","isCursorWithinBlock","previousBlockData","candidateBlockParents","currentBlockData","getCandidateBlockParents","isDraggingBelow","canInsertDraggedBlocksAsChild","innerBlockCount","blockIndentPosition","isNestingGesture","newBlockIndex","isUpGesture","nextBlock","currentLevel","nextLevel","desiredRelativeLevel","distanceBetweenPointAndBlockIndentPosition","desiredParentLevel","getDesiredRelativeParentLevel","targetParentIndex","canInsertDraggedBlocksAsSibling","EXPAND_THROTTLE_OPTIONS","leading","PrivateListView","ListViewComponent","blockSettingsMenu","additionalBlockContent","clientIdsTree","useListViewClientIds","currentGlobalIndex","traverseBlocks","blockList","useListViewBlockIndexes","visibleBlockCount","updateBlockSelection","focusPosition","isOnlyDeselection","isKeyPress","HOME","END","clientIdWithParents","blockId","startTarget","endTarget","startParents","endParents","startId","endId","getCommonDepthClientIds","updatedSelectedBlocks","selectionDiff","useBlockSelection","setExpandedState","setSelectedTreeId","firstSelectedBlockClientId","selectedTreeId","selectedBlockParentClientIds","useListViewExpandSelectedItem","dropZoneRef","setTarget","maybeExpandBlock","_expandedState","_target","throttledMaybeExpandBlock","isBlockDrag","newTarget","useListViewDropZone","elementRef","clipBoardRef","listViewRow","originallySelectedBlockClientIds","getPasteBlocks","treeGridRef","expandRow","collapseRow","focusRow","endRow","_getBlockParents","useListViewCollapseItems","firstDraggedBlockClientId","_blockDropTargetIndex","_firstDraggedBlockIndex","foundBlockIndex","contextValue","useFixedWindowList","useWindowing","windowOverscan","describedById","TreeGrid","onCollapseRow","onExpandRow","onFocusRow","applicationAriaLabel","BlockNavigationDropdownToggle","listView","ListView","BlockStylesPreviewPanel","previewBlocks","onHoverClassName","previewClassName","hoveredStyle","setHoveredStyle","isMobileViewport","debouncedSetHoveredStyle","styleItemHandler","_item$name","onSelectStylePreview","LEVEL_TO_PATH","HeadingLevelIcon","HEADING_LEVELS","HeadingLevelDropdown","targetLevel","instructions","allowSkip","VIEWMODES","Actions","onBlockPatternSelect","CarouselNavigation","handlePrevious","handleNext","activeSlide","totalSlides","SetupToolbar","viewMode","setViewMode","isCarouselView","displayControls","SetupContent","showTitles","containerClass","slideClass","BlockPatternSlide","BlockPatternSetup","filterPatternsFn","initialViewMode","setActiveSlide","usePatternsSetup","onPatternSelectCallback","VariationsButtons","VariationsDropdown","VariationsToggleGroupControl","hasUniqueIcons","variationIcons","showButtons","enableDefaultColors","_colors","hasColorsToChoose","withColorContext","ColorPaletteControl","exampleDate","DateFormatPicker","format","defaultFormat","dateI18n","NonDefaultControls","_suggestedOptions$fin","suggestedOptions","suggestedFormat","humanTimeDiff","customOption","setIsCustom","setDate","setMonth","getMonth","WithToolsPanelItem","clearValue","colorButtonRef","ColorGradientSettingsDropdown","toggleSettings","PanelColorGradientSettingsInner","marginY","PanelColorGradientSettingsSelect","useColorsAndGradientsPalettes","MIN_ZOOM","MAX_ZOOM","crop","cropAndRotate","ImageEditingContext","useImageEditingContext","ImageEditingProvider","naturalWidth","naturalHeight","onFinishEditing","onSaveImage","transformImage","editedUrl","setEditedUrl","setCrop","setPosition","setZoom","rotation","setRotation","defaultAspect","aspect","setAspect","rotateClockwise","angle","naturalAspectRatio","prevPosition","Image","onload","translateX","translateY","getContext","drawImage","toBlob","imgCrossOrigin","crossOrigin","useTransformImage","saveImage","isInProgress","setIsInProgress","editMediaEntity","modifiers","modifierType","savedImage","throwOnError","source_url","useSaveImage","providerValue","AspectRatioGroup","aspectRatios","ratioToNumber","presetRatioAsNumber","AspectRatioDropdown","aspectRatioIcon","newAspect","restrictPosition","mediaSize","cropSize","rotateSize","restrictPositionCoord","maxPosition","getDistanceBetweenPoints","pointA","pointB","getRotationBetweenPoints","atan2","limitArea","noOp","_max","getCenter","rotRad","classNames","_i","Cropper","imageRef","videoRef","containerPosition","styleRef","containerRect","dragStartPosition","dragStartCrop","gestureZoomStart","gestureRotationStart","isTouching","lastPinchDistance","lastPinchRotation","rafDragTimeout","rafPinchTimeout","wheelTimer","currentDoc","currentWindow","hasWheelJustStarted","mediaObjectFit","initResizeObserver","isFirstResize","computeSizes","preventZoomSafari","cleanEvents","onDragStopped","onTouchMove","onGestureMove","onGestureEnd","onScroll","clearScrollEvent","onMediaLoad","emitCropData","setInitialCrop","onMediaLoaded","initialCroppedAreaPercentages","croppedAreaPercentages","minZoom","maxZoom","mediaBBoxSize","getInitialCropFromCroppedAreaPercentages","onCropChange","onZoomChange","initialCroppedAreaPixels","croppedAreaPixels","mediaNaturalBBoxSize","mediaZoom","getMediaZoom","getZoomFromCroppedAreaPixels","cropZoom","getInitialCropFromCroppedAreaPixels","mediaRef","saveContainerPosition","containerAspect","videoWidth","_c","_d","videoHeight","mediaAspect","renderedMediaSize","setMediaSize","mediaWidth","mediaHeight","fittingWidth","fittingHeight","getCropSize","_e","_f","onCropSizeChange","recomputeCropPosition","setCropSize","getMousePoint","onTouchStart","onTouchRequest","touches","onPinchStart","getTouchPoint","onPinchMove","onGestureStart","newZoom","setNewZoom","shouldUpdatePosition","onRotationChange","newRotation","onInteractionStart","offsetY","requestedPosition","newPosition","onInteractionEnd","onWheelRequest","zoomSpeed","getPointOnContainer","containerTopLeft","getPointOnMedia","zoomPoint","zoomTarget","getCropData","limitAreaFn","widthInPixels","heightInPixels","sizePixels","computeCroppedArea","getAspect","cropData","onCropComplete","onCropAreaChange","emitCropAreaChange","zoomWithScroll","disableAutomaticStylesInjection","nonce","complete","setImageRef","setVideoRef","objectFit","_g","_h","_j","load","getObjectFit","mediaProps","cropShape","showGrid","containerStyle","cropAreaStyle","mediaStyle","containerClassName","cropAreaClassName","mediaClassName","autoPlay","muted","onLoadedMetadata","touch","ImageCropper","editedHeight","area","newCropPercent","ZoomDropdown","RotationButton","rotateRightIcon","FormControls","ImageEditor","IMAGE_SIZE_PRESETS","getScaledWidthAndHeight","imageWidth","imageHeight","scaledWidth","scaledHeight","ImageSizeControl","imageSizeHelp","imageSizeOptions","isResizable","onChangeImage","currentHeight","currentWidth","updateDimension","updateDimensions","customHeight","customWidth","defaultHeight","defaultWidth","setCurrentWidth","setCurrentHeight","dimension","nextHeight","useDimensionHandler","LinkViewerURL","urlLabel","linkClassName","__experimentalPopoverLegacyPositionToPlacement","URLPopover","additionalControls","renderSettings","computedPlacement","isSettingsExpanded","setIsSettingsExpanded","toggleSettingsVisibility","LinkEditor","onChangeInputValue","LinkViewer","onEditLinkClick","InsertFromURLPopover","URLSelectionUI","onChangeSrc","setPopoverAnchor","isURLInputVisible","setIsURLInputVisible","closeURLInput","openURLInput","mediaPreview","notices","disableDropZone","disableMediaButtons","onDoubleClick","onFilesPreUpload","deprecatedOnHTMLDrop","mediaLibraryButton","setSrc","_value$src","setMedia","lastMediaPassed","newMedia","filteredMedia","urlSlug","cutOffIndex","handleBlocksDrop","uploadedMediaList","alt_text","onUpload","renderPlaceholder","typesAllowed","firstAllowedType","isOneType","isAudio","isImage","isVideo","placeholderClassName","renderDropZone","isEligible","types","renderCancelLink","renderUrlSelectionUI","renderFeaturedImageToggle","renderMediaUploadChecked","libraryButton","defaultButton","uploadMediaLibraryButton","PanelColorSettings","colorSettings","otherSettings","PanelColorGradientSettings","FormatToolbar","hasActive","InlineToolbar","FormatToolbarContainer","editableContentElement","formatTypesSelector","richTextStore","getFormatTypes","interactiveContentTags","prefixSelectKeys","getPrefixedSelectKeys","wrapSelectionSettings","findSelection","nestedSelection","getMultilineTag","multiline","getAllowedFormats","allowedFormats","disableFormats","allEventListeners","pair","startChar","endChar","InputEvent","inputRule","trimmedTextBefore","prefixTransforms","__unstableAllowPrefixTransformations","formatTypes","transformed","__unstableInputRule","searchText","preventEventDiscovery","activeFormats","onKeydown","isKeyboardEvent","primaryShift","keyboardShortcuts","keyboardShortcut","inputEvents","__experimentalUndo","_onPaste","__unstableEmbedURLOnPaste","preserveWhiteSpace","pastePlainText","log","pasteInline","__unstablePasteRule","valueToInsert","formats","addActiveFormats","trimmedPlainText","hasActiveFormats","onKeyDownDeprecated","onSplit","disableLineBreaks","onSplitAtEnd","onSplitAtDoubleLineEnd","parentEditable","useEventListeners","propsRef","useInsertionEffect","refEffects","refEffect","cleanups","usesContextKey","EditFunction","activeFormat","getActiveFormat","activeObject","getActiveObject","isObjectActive","activeAttributes","activeObjectAttributes","FormatEdit","valueToHTMLString","RichText","multilineTag","childrenSource","Tag","identifier","multilineTagName","RichTextWrapper","richTextValue","keyboardShortcutContext","inputEventContext","instanceIdKey","removeNativeProps","__unstableMobileNoFocusOnMount","deleteEnter","placeholderTextColor","selectionColor","tagsToEliminate","disableEditingMenu","disableAutocorrection","adjustedValue","adjustedOnChange","originalIsSelected","inlineToolbar","wrapperClassName","autocompleters","withoutInteractiveFormatting","__unstableOnSplitAtEnd","__unstableOnSplitAtDoubleLineEnd","__unstablePastePlainText","__unstableDisableFormats","anchorRef","disableBoundBlock","bindingsPlaceholder","bindingsLabel","_fieldsList$relatedBi","relatedBinding","blockBindingsSource","blockBindingsContext","_disableBoundBlock","canUserEditValue","bindingKey","_bindingsPlaceholder","_bindingsLabel","shouldDisableEditing","adjustedAllowedFormats","hasFormats","baseSelection","prepareHandlers","valueHandlers","changeHandlers","allFormatTypes","interactive","keyedSelected","__experimentalGetPropsForEditableTreePreparation","richTextIdentifier","__experimentalCreatePrepareEditableTree","__experimentalCreateOnChangeEditableValue","dispatchers","__experimentalGetPropsForEditableTreeChangeHandler","useFormatTypes","removeEditorOnlyFormats","formatType","removeFormat","richTextRef","useRichText","__unstableFormats","__unstableText","changeHandler","__unstableIsSelected","__unstableDependencies","__unstableAfterParse","__unstableBeforeSerialize","__unstableAddInvisibleFormats","autocompleteProps","useAutocompleteProps","useBlockEditorAutocompleteProps","record","previousTextRef","useMarkPersistent","__unstableSlotNameProvider","suppressContentEditableWarning","PrivateRichText","fromDOM","__unstableCreateElement","NewComponent","RichTextMultiline","PublicForwardedRichTextContainer","contentProps","EditableText","__experimentalVersion","remainingProps","ResponsiveBlockControlLabel","desc","accessibleLabel","toggleLabel","onIsResponsiveChange","renderDefaultControl","renderResponsiveControls","isResponsive","defaultLabel","viewports","toggleControlLabel","toggleHelpText","defaultControl","RichTextShortcut","onUse","onUseRef","RichTextToolbarButton","shortcutType","shortcutCharacter","fillName","__unstableRichTextInputEvent","callbacks","selectIcon","editIcon","newMode","unitsProp","BaseUnitControl","arrowLeft","LINK_DESTINATION_NONE","LINK_DESTINATION_CUSTOM","LINK_DESTINATION_MEDIA","LINK_DESTINATION_ATTACHMENT","NEW_TAB_REL","ImageURLInputUI","linkDestination","onChangeUrl","mediaLink","linkTarget","linkClass","rel","showLightboxSetting","lightboxEnabled","onSetLightbox","resetLightbox","setIsOpen","urlInput","setUrlInput","stopEditLink","getLinkDestinations","linkDestinations","advancedOptions","updatedLinkTarget","newLinkTarget","updatedRel","rels","relVal","getUpdatedLinkTargetSettings","linkEditorValue","hideLightboxPanel","showLinkEditor","linkIcon","openLinkUI","onFocusOutside","autocompleteElement","closeLinkUI","linkDestinationInput","onSetHref","selectedDestination","lightbox","startEditLink","PreviewOptions","useResizeCanvas","deviceType","actualWidth","updateActualWidth","resizeListener","getCanvasWidth","device","deviceWidth","marginVertical","marginHorizontal","contentInlineStyles","SkipToSelectedBlock","MultiSelectionInspector","selectedBlockCount","TAB_SETTINGS","cog","TAB_STYLES","TAB_LIST_VIEW","AdvancedControls","PositionControlsPanel","hasPositionAttribute","_selectedBlocks","resetPosition","attributesByClientId","PositionControls","InspectorControlsGroups","SettingsTab","showAdvancedControls","StylesTab","borderPanelLabel","BlockStyles","allowlist","InspectorControlsTabs","initialTabName","useIsListViewTabDisabled","useInspectorControlsTabs","bindingsGroup","borderGroup","colorGroup","defaultGroup","dimensionsGroup","listGroup","positionGroup","stylesGroup","typographyGroup","effectsGroup","listViewDisabled","listFills","hasListFills","hasStyleFills","advancedFills","settingsFills","showTabs","tabSettings","getShowTabs","blockInspectorTabs","BlockQuickNavigation","BlockQuickNavigationItem","BlockStylesPanel","BlockInspectorSingleBlockWrapper","wrapper","AnimatedContainer","blockInspectorAnimationSettings","animationOrigin","BlockInspectorSingleBlock","availableTabs","contentClientIds","BlockVariationTransforms","renderedBlockClientId","_selectedBlockName","_blockType","globalBlockInspectorAnimationSettings","useBlockInspectorAnimationSettings","isSelectedBlockUnregistered","getUnregisteredTypeHandlerName","__unstableUseClipboardHandler","CopyHandler","PrivateInserterLibrary","MultiSelectScrollIntoView","isIE","arrowKeyCodes","initialTriggerPercentage","useTypewriter","scrollResizeRafId","onKeyDownRafId","caretRect","onScrollResize","computeCaretRectangle","maintainCaretPosition","isSelectionEligibleForScroll","currentCaretRect","scrollY","scrollContainerY","relativeScrollPosition","innerHeight","editableNodes","isLastEditableNode","scrollContainerHeight","addSelectionChangeListener","computeCaretRectOnSelectionChange","RenderedRefsContext","RecursionProvider","previouslyRenderedBlocks","newRenderedBlocks","addToBlockType","useHasRecursion","DeprecatedExperimentalRecursionProvider","DeprecatedExperimentalUseHasRecursion","InspectorPopoverHeader","PrivatePublishDateTimePicker","showPopoverHeaderActions","isCompact","currentDate","additionalProps","datePickerProps","startOfWeek","l10n","currentTime","DatePickerComponent","TimePicker","DateTimePicker","__experimentalGetElementClassName","useHasImageSettingsPanel","ImageSettingsPanel","lightboxChecked","newSetting","AdvancedPanel","cssError","setCSSError","customCSS","TextareaControl","spellCheck","globalStylesChangesCache","translationMap","h1","h2","h3","h4","h5","h6","getBlockNames","memoized","len","searchCache","maxSize","memoize","isObject","deepCompare","originalObject","parentPath","allKeys","diffs","changedPath","getGlobalStylesChangelist","changedValueTree","curr","translation","keyArray","getTranslation","getGlobalStylesChanges","changeList","changesLength","maxResults","changeValues","changeValuesLength","joinedChangesValue","addValuesForElement","addValuesForElements","StrictMode","addValuesForBlocks","getSaveElement","onItemChange","BlockManagerCategory","selectedBlockTypes","toggleVisible","nextIsChecked","toggleAllVisible","selectedBlockType","checkedBlockNames","titleId","isIndeterminate","BlockTypesChecklist","DEFAULT_SCALE_OPTIONS","ScaleTool","scaleHelp","reactPropsRegex","isPropValid","StyleSheet","_insertTag","tags","nextSibling","firstChild","isSpeedy","speedy","ctr","_proto","hydrate","createTextNode","createStyleElement","sheet","sheetForTag","insertRule","indexof","begin","characters","return","peek","caret","alloc","dealloc","delimit","whitespace","escaping","commenter","MS","MOZ","WEBKIT","COMMENT","DECLARATION","KEYFRAMES","compile","rulesets","points","scanning","ampersand","reference","declaration","identifierWithPointTracking","fixedElements","compat","isImplicitRule","toRules","getRules","parentRules","removeLabel","defaultStylisPlugins","ssrStyles","_insert","stylisPlugins","inserted","nodesToHydrate","attrib","currentSheet","finalizingPlugins","serializer","shouldCache","registered","unitlessKeys","msGridRow","msGridRowSpan","msGridColumn","msGridColumnSpan","WebkitLineClamp","hyphenateRegex","animationRegex","isCustomProperty","isProcessableValue","processStyleName","processStyleValue","cursor","handleInterpolation","mergedProps","interpolation","__emotion_styles","interpolated","createStringFromObject","previousCursor","labelPattern","EmotionCacheContext","ThemeContext","testOmitPropsOnStringTag","testOmitPropsOnComponent","getDefaultShouldForwardProp","composeShouldForwardProps","isReal","shouldForwardProp","optionsShouldForwardProp","__emotion_forwardProp","createStyled","identifierName","targetClassName","__emotion_real","baseTag","__emotion_base","defaultShouldForwardProp","shouldUseAs","Styled","finalTag","classInterpolations","rawClassName","stringMode","strings","isStringTag","registerStyles","finalShouldForwardProp","ele","possiblyStyleElement","withComponent","nextTag","nextOptions","SingleColumnToolsPanelItem","_styled","WidthHeightTool","_value$width","_value$height","onDimensionChange","nextDimension","DEFAULT_SIZE_OPTIONS","htmlElementMessages","article","footer","header","main","nav","section","getRichTextValues","skipFilters","fromHTMLString","PrivateQuickInserter","ResizableBoxPopover","resizableBoxProps","LayoutStyle","layoutStyle","BlockManager","isMatchingSearchTerm","numberOfHiddenBlocks","nextSearch","BlockRemovalWarningModal","onConfirmRemoval","useLayoutStyles","DimensionsTool","defaultAspectRatio","scaleOptions","defaultScale","unitsOptions","tools","lastScale","setLastScale","lastAspectRatio","setLastAspectRatio","showScaleControl","nextAspectRatio","nextScale","ResolutionTool","HTMLElementControl","checkForMainTag","hasMainElementElsewhere","modifiedOptions","__unstableBlockStyleVariationOverridesWithConfig","overridesWithConfig","newOverrides","overriddenClientIds","configStyles"],"sourceRoot":""}